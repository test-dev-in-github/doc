/*! For license information please see bundle-8848c7d40f0358fc22cb.js.LICENSE */
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=463)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return a})),n.d(t,"__rest",(function(){return o})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return l})),n.d(t,"__awaiter",(function(){return c})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return h})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return m})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return v})),n.d(t,"__spreadArray",(function(){return y})),n.d(t,"__await",(function(){return _})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return T})),n.d(t,"__asyncValues",(function(){return E})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return A})),n.d(t,"__importDefault",(function(){return M})),n.d(t,"__classPrivateFieldGet",(function(){return L})),n.d(t,"__classPrivateFieldSet",(function(){return C})),n.d(t,"__classPrivateFieldIn",(function(){return D}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var f=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function h(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function y(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof _?Promise.resolve(n.value.v).then(u,l):c(a[0][2],n)}catch(e){c(a[0][3],e)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function T(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var w=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&f(t,e,n);return w(t,e),t}function M(e){return e&&e.__esModule?e:{default:e}}function L(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function C(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function D(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return a})),n.d(t,"__rest",(function(){return o})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return l})),n.d(t,"__awaiter",(function(){return c})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return h})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return m})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return v})),n.d(t,"__spreadArray",(function(){return y})),n.d(t,"__await",(function(){return _})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return T})),n.d(t,"__asyncValues",(function(){return E})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return A})),n.d(t,"__importDefault",(function(){return M})),n.d(t,"__classPrivateFieldGet",(function(){return L})),n.d(t,"__classPrivateFieldSet",(function(){return C})),n.d(t,"__classPrivateFieldIn",(function(){return D}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var f=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function h(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function y(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof _?Promise.resolve(n.value.v).then(u,l):c(a[0][2],n)}catch(e){c(a[0][3],e)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function T(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var w=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&f(t,e,n);return w(t,e),t}function M(e){return e&&e.__esModule?e:{default:e}}function L(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function C(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function D(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},function(e,t,n){"use strict";e.exports=n(890)},function(e,t,n){(function(e){e.exports=function(){"use strict";var t,r;function i(){return t.apply(null,arguments)}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function l(e){return void 0===e}function c(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function h(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return Rt(e,t,n,r,!0).utc()}function m(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function g(e){if(null==e._isValid){var t=m(e),n=r.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function v(e){var t=p(NaN);return null!=e?h(m(t),e):m(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var y=i.momentProperties=[],_=!1;function b(e,t){var n,r,i;if(l(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),l(t._i)||(e._i=t._i),l(t._f)||(e._f=t._f),l(t._l)||(e._l=t._l),l(t._strict)||(e._strict=t._strict),l(t._tzm)||(e._tzm=t._tzm),l(t._isUTC)||(e._isUTC=t._isUTC),l(t._offset)||(e._offset=t._offset),l(t._pf)||(e._pf=m(t)),l(t._locale)||(e._locale=t._locale),y.length>0)for(n=0;n<y.length;n++)l(i=t[r=y[n]])||(e[r]=i);return e}function T(e){b(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===_&&(_=!0,i.updateOffset(this),_=!1)}function E(e){return e instanceof T||null!=e&&null!=e._isAMomentObject}function S(e){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function w(e,t){var n=!0;return h((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,e),n){var r,a,o,u=[];for(a=0;a<arguments.length;a++){if(r="","object"==typeof arguments[a]){for(o in r+="\n["+a+"] ",arguments[0])s(arguments[0],o)&&(r+=o+": "+arguments[0][o]+", ");r=r.slice(0,-2)}else r=arguments[a];u.push(r)}S(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var A,M={};function L(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),M[e]||(S(t),M[e]=!0)}function C(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function D(e,t){var n,r=h({},e);for(n in t)s(t,n)&&(o(e[n])&&o(t[n])?(r[n]={},h(r[n],e[n]),h(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)s(e,n)&&!s(t,n)&&o(e[n])&&(r[n]=h({},r[n]));return r}function k(e){null!=e&&this.set(e)}function P(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,A=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var I=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,O=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,R={},x={};function N(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(x[e]=i),t&&(x[t[0]]=function(){return P(i.apply(this,arguments),t[1],t[2])}),n&&(x[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function j(e,t){return e.isValid()?(t=F(t,e.localeData()),R[t]=R[t]||function(e){var t,n,r,i=e.match(I);for(t=0,n=i.length;t<n;t++)x[i[t]]?i[t]=x[i[t]]:i[t]=(r=i[t]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(t){var r,a="";for(r=0;r<n;r++)a+=C(i[r])?i[r].call(t,e):i[r];return a}}(t),R[t](e)):e.localeData().invalidDate()}function F(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(O.lastIndex=0;n>=0&&O.test(e);)e=e.replace(O,r),O.lastIndex=0,n-=1;return e}var U={};function B(e,t){var n=e.toLowerCase();U[n]=U[n+"s"]=U[t]=e}function Y(e){return"string"==typeof e?U[e]||U[e.toLowerCase()]:void 0}function H(e){var t,n,r={};for(n in e)s(e,n)&&(t=Y(n))&&(r[t]=e[n]);return r}var V={};function G(e,t){V[e]=t}function K(e){return e%4==0&&e%100!=0||e%400==0}function W(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function q(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=W(t)),n}function z(e,t){return function(n){return null!=n?(Q(this,e,n),i.updateOffset(this,t),this):X(this,e)}}function X(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Q(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&K(e.year())&&1===e.month()&&29===e.date()?(n=q(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Pe(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}var $,J=/\d/,Z=/\d\d/,ee=/\d{3}/,te=/\d{4}/,ne=/[+-]?\d{6}/,re=/\d\d?/,ie=/\d\d\d\d?/,ae=/\d\d\d\d\d\d?/,oe=/\d{1,3}/,se=/\d{1,4}/,ue=/[+-]?\d{1,6}/,le=/\d+/,ce=/[+-]?\d+/,de=/Z|[+-]\d\d:?\d\d/gi,fe=/Z|[+-]\d\d(?::?\d\d)?/gi,he=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function pe(e,t,n){$[e]=C(t)?t:function(e,r){return e&&n?n:t}}function me(e,t){return s($,e)?$[e](t._strict,t._locale):new RegExp(function(e){return ge(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}(e))}function ge(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}$={};var ve={};function ye(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),c(t)&&(r=function(e,n){n[t]=q(e)}),n=0;n<e.length;n++)ve[e[n]]=r}function _e(e,t){ye(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function be(e,t,n){null!=t&&s(ve,e)&&ve[e](t,n._a,n,e)}var Te,Ee=0,Se=1,we=2,Ae=3,Me=4,Le=5,Ce=6,De=7,ke=8;function Pe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,r=(t%(n=12)+n)%n;return e+=(t-r)/12,1===r?K(e)?29:28:31-r%7%2}Te=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},N("M",["MM",2],"Mo",(function(){return this.month()+1})),N("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),N("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),B("month","M"),G("month",8),pe("M",re),pe("MM",re,Z),pe("MMM",(function(e,t){return t.monthsShortRegex(e)})),pe("MMMM",(function(e,t){return t.monthsRegex(e)})),ye(["M","MM"],(function(e,t){t[Se]=q(e)-1})),ye(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[Se]=i:m(n).invalidMonth=e}));var Ie="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Oe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Re=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,xe=he,Ne=he;function je(e,t,n){var r,i,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Te.call(this._shortMonthsParse,o))?i:null:-1!==(i=Te.call(this._longMonthsParse,o))?i:null:"MMM"===t?-1!==(i=Te.call(this._shortMonthsParse,o))?i:-1!==(i=Te.call(this._longMonthsParse,o))?i:null:-1!==(i=Te.call(this._longMonthsParse,o))?i:-1!==(i=Te.call(this._shortMonthsParse,o))?i:null}function Fe(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=q(t);else if(!c(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Pe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ue(e){return null!=e?(Fe(this,e),i.updateOffset(this,!0),this):X(this,"Month")}function Be(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],a=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),a.sort(e),t=0;t<12;t++)r[t]=ge(r[t]),i[t]=ge(i[t]);for(t=0;t<24;t++)a[t]=ge(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Ye(e){return K(e)?366:365}N("Y",0,0,(function(){var e=this.year();return e<=9999?P(e,4):"+"+e})),N(0,["YY",2],0,(function(){return this.year()%100})),N(0,["YYYY",4],0,"year"),N(0,["YYYYY",5],0,"year"),N(0,["YYYYYY",6,!0],0,"year"),B("year","y"),G("year",1),pe("Y",ce),pe("YY",re,Z),pe("YYYY",se,te),pe("YYYYY",ue,ne),pe("YYYYYY",ue,ne),ye(["YYYYY","YYYYYY"],Ee),ye("YYYY",(function(e,t){t[Ee]=2===e.length?i.parseTwoDigitYear(e):q(e)})),ye("YY",(function(e,t){t[Ee]=i.parseTwoDigitYear(e)})),ye("Y",(function(e,t){t[Ee]=parseInt(e,10)})),i.parseTwoDigitYear=function(e){return q(e)+(q(e)>68?1900:2e3)};var He=z("FullYear",!0);function Ve(e,t,n,r,i,a,o){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,i,a,o),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,i,a,o),s}function Ge(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Ke(e,t,n){var r=7+t-n;return-(7+Ge(e,0,r).getUTCDay()-t)%7+r-1}function We(e,t,n,r,i){var a,o,s=1+7*(t-1)+(7+n-r)%7+Ke(e,r,i);return s<=0?o=Ye(a=e-1)+s:s>Ye(e)?(a=e+1,o=s-Ye(e)):(a=e,o=s),{year:a,dayOfYear:o}}function qe(e,t,n){var r,i,a=Ke(e.year(),t,n),o=Math.floor((e.dayOfYear()-a-1)/7)+1;return o<1?r=o+ze(i=e.year()-1,t,n):o>ze(e.year(),t,n)?(r=o-ze(e.year(),t,n),i=e.year()+1):(i=e.year(),r=o),{week:r,year:i}}function ze(e,t,n){var r=Ke(e,t,n),i=Ke(e+1,t,n);return(Ye(e)-r+i)/7}function Xe(e,t){return e.slice(t,7).concat(e.slice(0,t))}N("w",["ww",2],"wo","week"),N("W",["WW",2],"Wo","isoWeek"),B("week","w"),B("isoWeek","W"),G("week",5),G("isoWeek",5),pe("w",re),pe("ww",re,Z),pe("W",re),pe("WW",re,Z),_e(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=q(e)})),N("d",0,"do","day"),N("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),N("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),N("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),N("e",0,0,"weekday"),N("E",0,0,"isoWeekday"),B("day","d"),B("weekday","e"),B("isoWeekday","E"),G("day",11),G("weekday",11),G("isoWeekday",11),pe("d",re),pe("e",re),pe("E",re),pe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),pe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),pe("dddd",(function(e,t){return t.weekdaysRegex(e)})),_e(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:m(n).invalidWeekday=e})),_e(["d","e","E"],(function(e,t,n,r){t[r]=q(e)}));var Qe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$e="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Je="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ze=he,et=he,tt=he;function nt(e,t,n){var r,i,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Te.call(this._weekdaysParse,o))?i:null:"ddd"===t?-1!==(i=Te.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=Te.call(this._minWeekdaysParse,o))?i:null:"dddd"===t?-1!==(i=Te.call(this._weekdaysParse,o))?i:-1!==(i=Te.call(this._shortWeekdaysParse,o))?i:-1!==(i=Te.call(this._minWeekdaysParse,o))?i:null:"ddd"===t?-1!==(i=Te.call(this._shortWeekdaysParse,o))?i:-1!==(i=Te.call(this._weekdaysParse,o))?i:-1!==(i=Te.call(this._minWeekdaysParse,o))?i:null:-1!==(i=Te.call(this._minWeekdaysParse,o))?i:-1!==(i=Te.call(this._weekdaysParse,o))?i:-1!==(i=Te.call(this._shortWeekdaysParse,o))?i:null}function rt(){function e(e,t){return t.length-e.length}var t,n,r,i,a,o=[],s=[],u=[],l=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=ge(this.weekdaysMin(n,"")),i=ge(this.weekdaysShort(n,"")),a=ge(this.weekdays(n,"")),o.push(r),s.push(i),u.push(a),l.push(r),l.push(i),l.push(a);o.sort(e),s.sort(e),u.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function it(){return this.hours()%12||12}function at(e,t){N(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function ot(e,t){return t._meridiemParse}N("H",["HH",2],0,"hour"),N("h",["hh",2],0,it),N("k",["kk",2],0,(function(){return this.hours()||24})),N("hmm",0,0,(function(){return""+it.apply(this)+P(this.minutes(),2)})),N("hmmss",0,0,(function(){return""+it.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)})),N("Hmm",0,0,(function(){return""+this.hours()+P(this.minutes(),2)})),N("Hmmss",0,0,(function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)})),at("a",!0),at("A",!1),B("hour","h"),G("hour",13),pe("a",ot),pe("A",ot),pe("H",re),pe("h",re),pe("k",re),pe("HH",re,Z),pe("hh",re,Z),pe("kk",re,Z),pe("hmm",ie),pe("hmmss",ae),pe("Hmm",ie),pe("Hmmss",ae),ye(["H","HH"],Ae),ye(["k","kk"],(function(e,t,n){var r=q(e);t[Ae]=24===r?0:r})),ye(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),ye(["h","hh"],(function(e,t,n){t[Ae]=q(e),m(n).bigHour=!0})),ye("hmm",(function(e,t,n){var r=e.length-2;t[Ae]=q(e.substr(0,r)),t[Me]=q(e.substr(r)),m(n).bigHour=!0})),ye("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ae]=q(e.substr(0,r)),t[Me]=q(e.substr(r,2)),t[Le]=q(e.substr(i)),m(n).bigHour=!0})),ye("Hmm",(function(e,t,n){var r=e.length-2;t[Ae]=q(e.substr(0,r)),t[Me]=q(e.substr(r))})),ye("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ae]=q(e.substr(0,r)),t[Me]=q(e.substr(r,2)),t[Le]=q(e.substr(i))}));var st,ut=z("Hours",!0),lt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ie,monthsShort:Oe,week:{dow:0,doy:6},weekdays:Qe,weekdaysMin:Je,weekdaysShort:$e,meridiemParse:/[ap]\.?m?\.?/i},ct={},dt={};function ft(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function ht(e){return e?e.toLowerCase().replace("_","-"):e}function pt(t){var r=null;if(void 0===ct[t]&&void 0!==e&&e&&e.exports)try{r=st._abbr,n(1047)("./"+t),mt(r)}catch(e){ct[t]=null}return ct[t]}function mt(e,t){var n;return e&&((n=l(t)?vt(e):gt(e,t))?st=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),st._abbr}function gt(e,t){if(null!==t){var n,r=lt;if(t.abbr=e,null!=ct[e])L("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=ct[e]._config;else if(null!=t.parentLocale)if(null!=ct[t.parentLocale])r=ct[t.parentLocale]._config;else{if(null==(n=pt(t.parentLocale)))return dt[t.parentLocale]||(dt[t.parentLocale]=[]),dt[t.parentLocale].push({name:e,config:t}),null;r=n._config}return ct[e]=new k(D(r,t)),dt[e]&&dt[e].forEach((function(e){gt(e.name,e.config)})),mt(e),ct[e]}return delete ct[e],null}function vt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return st;if(!a(e)){if(t=pt(e))return t;e=[e]}return function(e){for(var t,n,r,i,a=0;a<e.length;){for(t=(i=ht(e[a]).split("-")).length,n=(n=ht(e[a+1]))?n.split("-"):null;t>0;){if(r=pt(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&ft(i,n)>=t-1)break;t--}a++}return st}(e)}function yt(e){var t,n=e._a;return n&&-2===m(e).overflow&&(t=n[Se]<0||n[Se]>11?Se:n[we]<1||n[we]>Pe(n[Ee],n[Se])?we:n[Ae]<0||n[Ae]>24||24===n[Ae]&&(0!==n[Me]||0!==n[Le]||0!==n[Ce])?Ae:n[Me]<0||n[Me]>59?Me:n[Le]<0||n[Le]>59?Le:n[Ce]<0||n[Ce]>999?Ce:-1,m(e)._overflowDayOfYear&&(t<Ee||t>we)&&(t=we),m(e)._overflowWeeks&&-1===t&&(t=De),m(e)._overflowWeekday&&-1===t&&(t=ke),m(e).overflow=t),e}var _t=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tt=/Z|[+-]\d\d(?::?\d\d)?/,Et=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],St=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wt=/^\/?Date\((-?\d+)/i,At=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Mt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Lt(e){var t,n,r,i,a,o,s=e._i,u=_t.exec(s)||bt.exec(s);if(u){for(m(e).iso=!0,t=0,n=Et.length;t<n;t++)if(Et[t][1].exec(u[1])){i=Et[t][0],r=!1!==Et[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=St.length;t<n;t++)if(St[t][1].exec(u[3])){a=(u[2]||" ")+St[t][0];break}if(null==a)return void(e._isValid=!1)}if(!r&&null!=a)return void(e._isValid=!1);if(u[4]){if(!Tt.exec(u[4]))return void(e._isValid=!1);o="Z"}e._f=i+(a||"")+(o||""),It(e)}else e._isValid=!1}function Ct(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Dt(e){var t,n,r,i,a,o,s,u,l=At.exec(function(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}(e._i));if(l){if(n=l[4],r=l[3],i=l[2],a=l[5],o=l[6],s=l[7],u=[Ct(n),Oe.indexOf(r),parseInt(i,10),parseInt(a,10),parseInt(o,10)],s&&u.push(parseInt(s,10)),t=u,!function(e,t,n){return!e||$e.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}(l[1],t,e))return;e._a=t,e._tzm=function(e,t,n){if(e)return Mt[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(l[8],l[9],l[10]),e._d=Ge.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function kt(e,t,n){return null!=e?e:null!=t?t:n}function Pt(e){var t,n,r,a,o,s=[];if(!e._d){for(r=function(e){var t=new Date(i.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[we]&&null==e._a[Se]&&function(e){var t,n,r,i,a,o,s,u,l;null!=(t=e._w).GG||null!=t.W||null!=t.E?(a=1,o=4,n=kt(t.GG,e._a[Ee],qe(xt(),1,4).year),r=kt(t.W,1),((i=kt(t.E,1))<1||i>7)&&(u=!0)):(a=e._locale._week.dow,o=e._locale._week.doy,l=qe(xt(),a,o),n=kt(t.gg,e._a[Ee],l.year),r=kt(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+a,(t.e<0||t.e>6)&&(u=!0)):i=a),r<1||r>ze(n,a,o)?m(e)._overflowWeeks=!0:null!=u?m(e)._overflowWeekday=!0:(s=We(n,r,i,a,o),e._a[Ee]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(o=kt(e._a[Ee],r[Ee]),(e._dayOfYear>Ye(o)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),n=Ge(o,0,e._dayOfYear),e._a[Se]=n.getUTCMonth(),e._a[we]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ae]&&0===e._a[Me]&&0===e._a[Le]&&0===e._a[Ce]&&(e._nextDay=!0,e._a[Ae]=0),e._d=(e._useUTC?Ge:Ve).apply(null,s),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ae]=24),e._w&&void 0!==e._w.d&&e._w.d!==a&&(m(e).weekdayMismatch=!0)}}function It(e){if(e._f!==i.ISO_8601)if(e._f!==i.RFC_2822){e._a=[],m(e).empty=!0;var t,n,r,a,o,s,u=""+e._i,l=u.length,c=0;for(r=F(e._f,e._locale).match(I)||[],t=0;t<r.length;t++)a=r[t],(n=(u.match(me(a,e))||[])[0])&&((o=u.substr(0,u.indexOf(n))).length>0&&m(e).unusedInput.push(o),u=u.slice(u.indexOf(n)+n.length),c+=n.length),x[a]?(n?m(e).empty=!1:m(e).unusedTokens.push(a),be(a,n,e)):e._strict&&!n&&m(e).unusedTokens.push(a);m(e).charsLeftOver=l-c,u.length>0&&m(e).unusedInput.push(u),e._a[Ae]<=12&&!0===m(e).bigHour&&e._a[Ae]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[Ae]=function(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}(e._locale,e._a[Ae],e._meridiem),null!==(s=m(e).era)&&(e._a[Ee]=e._locale.erasConvertYear(s,e._a[Ee])),Pt(e),yt(e)}else Dt(e);else Lt(e)}function Ot(e){var t=e._i,n=e._f;return e._locale=e._locale||vt(e._l),null===t||void 0===n&&""===t?v({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),E(t)?new T(yt(t)):(d(t)?e._d=t:a(n)?function(e){var t,n,r,i,a,o,s=!1;if(0===e._f.length)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)a=0,o=!1,t=b({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],It(t),g(t)&&(o=!0),a+=m(t).charsLeftOver,a+=10*m(t).unusedTokens.length,m(t).score=a,s?a<r&&(r=a,n=t):(null==r||a<r||o)&&(r=a,n=t,o&&(s=!0));h(e,n||t)}(e):n?It(e):function(e){var t=e._i;l(t)?e._d=new Date(i.now()):d(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=wt.exec(e._i);null===t?(Lt(e),!1===e._isValid&&(delete e._isValid,Dt(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:i.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):a(t)?(e._a=f(t.slice(0),(function(e){return parseInt(e,10)})),Pt(e)):o(t)?function(e){if(!e._d){var t=H(e._i),n=void 0===t.day?t.date:t.day;e._a=f([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Pt(e)}}(e):c(t)?e._d=new Date(t):i.createFromInputFallback(e)}(e),g(e)||(e._d=null),e))}function Rt(e,t,n,r,i){var s,l={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(o(e)&&u(e)||a(e)&&0===e.length)&&(e=void 0),l._isAMomentObject=!0,l._useUTC=l._isUTC=i,l._l=n,l._i=e,l._f=t,l._strict=r,(s=new T(yt(Ot(l))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function xt(e,t,n,r){return Rt(e,t,n,r,!1)}i.createFromInputFallback=w("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var Nt=w("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=xt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()})),jt=w("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=xt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:v()}));function Ft(e,t){var n,r;if(1===t.length&&a(t[0])&&(t=t[0]),!t.length)return xt();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}var Ut=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Bt(e){var t=H(e),n=t.year||0,r=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,o=t.day||0,u=t.hour||0,l=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=function(e){var t,n,r=!1;for(t in e)if(s(e,t)&&(-1===Te.call(Ut,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<Ut.length;++n)if(e[Ut[n]]){if(r)return!1;parseFloat(e[Ut[n]])!==q(e[Ut[n]])&&(r=!0)}return!0}(t),this._milliseconds=+d+1e3*c+6e4*l+1e3*u*60*60,this._days=+o+7*a,this._months=+i+3*r+12*n,this._data={},this._locale=vt(),this._bubble()}function Yt(e){return e instanceof Bt}function Ht(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Vt(e,t){N(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+P(~~(e/60),2)+t+P(~~e%60,2)}))}Vt("Z",":"),Vt("ZZ",""),pe("Z",fe),pe("ZZ",fe),ye(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Kt(fe,e)}));var Gt=/([\+\-]|\d\d)/gi;function Kt(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(Gt)||["-",0,0])[1]+q(n[2]))?0:"+"===n[0]?r:-r}function Wt(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(E(e)||d(e)?e.valueOf():xt(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),i.updateOffset(n,!1),n):xt(e).local()}function qt(e){return-Math.round(e._d.getTimezoneOffset())}function zt(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var Xt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Qt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function $t(e,t){var n,r,i,a,o,u,l=e,d=null;return Yt(e)?l={ms:e._milliseconds,d:e._days,M:e._months}:c(e)||!isNaN(+e)?(l={},t?l[t]=+e:l.milliseconds=+e):(d=Xt.exec(e))?(n="-"===d[1]?-1:1,l={y:0,d:q(d[we])*n,h:q(d[Ae])*n,m:q(d[Me])*n,s:q(d[Le])*n,ms:q(Ht(1e3*d[Ce]))*n}):(d=Qt.exec(e))?(n="-"===d[1]?-1:1,l={y:Jt(d[2],n),M:Jt(d[3],n),w:Jt(d[4],n),d:Jt(d[5],n),h:Jt(d[6],n),m:Jt(d[7],n),s:Jt(d[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(a=xt(l.from),o=xt(l.to),i=a.isValid()&&o.isValid()?(o=Wt(o,a),a.isBefore(o)?u=Zt(a,o):((u=Zt(o,a)).milliseconds=-u.milliseconds,u.months=-u.months),u):{milliseconds:0,months:0},(l={}).ms=i.milliseconds,l.M=i.months),r=new Bt(l),Yt(e)&&s(e,"_locale")&&(r._locale=e._locale),Yt(e)&&s(e,"_isValid")&&(r._isValid=e._isValid),r}function Jt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Zt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function en(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(L(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),tn(this,$t(n,r),e),this}}function tn(e,t,n,r){var a=t._milliseconds,o=Ht(t._days),s=Ht(t._months);e.isValid()&&(r=null==r||r,s&&Fe(e,X(e,"Month")+s*n),o&&Q(e,"Date",X(e,"Date")+o*n),a&&e._d.setTime(e._d.valueOf()+a*n),r&&i.updateOffset(e,o||s))}$t.fn=Bt.prototype,$t.invalid=function(){return $t(NaN)};var nn=en(1,"add"),rn=en(-1,"subtract");function an(e){return"string"==typeof e||e instanceof String}function on(e,t){if(e.date()<t.date())return-on(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function sn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=vt(e))&&(this._locale=t),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var un=w("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ln(){return this._locale}var cn=1e3,dn=60*cn,fn=60*dn,hn=3506328*fn;function pn(e,t){return(e%t+t)%t}function mn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-hn:new Date(e,t,n).valueOf()}function gn(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-hn:Date.UTC(e,t,n)}function vn(e,t){return t.erasAbbrRegex(e)}function yn(){var e,t,n=[],r=[],i=[],a=[],o=this.eras();for(e=0,t=o.length;e<t;++e)r.push(ge(o[e].name)),n.push(ge(o[e].abbr)),i.push(ge(o[e].narrow)),a.push(ge(o[e].name)),a.push(ge(o[e].abbr)),a.push(ge(o[e].narrow));this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function _n(e,t){N(0,[e,e.length],0,t)}function bn(e,t,n,r,i){var a;return null==e?qe(this,r,i).year:(t>(a=ze(e,r,i))&&(t=a),Tn.call(this,e,t,n,r,i))}function Tn(e,t,n,r,i){var a=We(e,t,n,r,i),o=Ge(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}N("N",0,0,"eraAbbr"),N("NN",0,0,"eraAbbr"),N("NNN",0,0,"eraAbbr"),N("NNNN",0,0,"eraName"),N("NNNNN",0,0,"eraNarrow"),N("y",["y",1],"yo","eraYear"),N("y",["yy",2],0,"eraYear"),N("y",["yyy",3],0,"eraYear"),N("y",["yyyy",4],0,"eraYear"),pe("N",vn),pe("NN",vn),pe("NNN",vn),pe("NNNN",(function(e,t){return t.erasNameRegex(e)})),pe("NNNNN",(function(e,t){return t.erasNarrowRegex(e)})),ye(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?m(n).era=i:m(n).invalidEra=e})),pe("y",le),pe("yy",le),pe("yyy",le),pe("yyyy",le),pe("yo",(function(e,t){return t._eraYearOrdinalRegex||le})),ye(["y","yy","yyy","yyyy"],Ee),ye(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Ee]=n._locale.eraYearOrdinalParse(e,i):t[Ee]=parseInt(e,10)})),N(0,["gg",2],0,(function(){return this.weekYear()%100})),N(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),_n("gggg","weekYear"),_n("ggggg","weekYear"),_n("GGGG","isoWeekYear"),_n("GGGGG","isoWeekYear"),B("weekYear","gg"),B("isoWeekYear","GG"),G("weekYear",1),G("isoWeekYear",1),pe("G",ce),pe("g",ce),pe("GG",re,Z),pe("gg",re,Z),pe("GGGG",se,te),pe("gggg",se,te),pe("GGGGG",ue,ne),pe("ggggg",ue,ne),_e(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=q(e)})),_e(["gg","GG"],(function(e,t,n,r){t[r]=i.parseTwoDigitYear(e)})),N("Q",0,"Qo","quarter"),B("quarter","Q"),G("quarter",7),pe("Q",J),ye("Q",(function(e,t){t[Se]=3*(q(e)-1)})),N("D",["DD",2],"Do","date"),B("date","D"),G("date",9),pe("D",re),pe("DD",re,Z),pe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),ye(["D","DD"],we),ye("Do",(function(e,t){t[we]=q(e.match(re)[0])}));var En=z("Date",!0);N("DDD",["DDDD",3],"DDDo","dayOfYear"),B("dayOfYear","DDD"),G("dayOfYear",4),pe("DDD",oe),pe("DDDD",ee),ye(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=q(e)})),N("m",["mm",2],0,"minute"),B("minute","m"),G("minute",14),pe("m",re),pe("mm",re,Z),ye(["m","mm"],Me);var Sn=z("Minutes",!1);N("s",["ss",2],0,"second"),B("second","s"),G("second",15),pe("s",re),pe("ss",re,Z),ye(["s","ss"],Le);var wn,An,Mn=z("Seconds",!1);for(N("S",0,0,(function(){return~~(this.millisecond()/100)})),N(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),N(0,["SSS",3],0,"millisecond"),N(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),N(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),N(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),N(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),N(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),N(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),B("millisecond","ms"),G("millisecond",16),pe("S",oe,J),pe("SS",oe,Z),pe("SSS",oe,ee),wn="SSSS";wn.length<=9;wn+="S")pe(wn,le);function Ln(e,t){t[Ce]=q(1e3*("0."+e))}for(wn="S";wn.length<=9;wn+="S")ye(wn,Ln);An=z("Milliseconds",!1),N("z",0,0,"zoneAbbr"),N("zz",0,0,"zoneName");var Cn=T.prototype;function Dn(e){return e}Cn.add=nn,Cn.calendar=function(e,t){var n;1===arguments.length&&(arguments[0]?E(n=arguments[0])||d(n)||an(n)||c(n)||function(e){var t=a(e),n=!1;return t&&(n=0===e.filter((function(t){return!c(t)&&an(e)})).length),t&&n}(n)||function(e){var t,n,r=o(e)&&!u(e),i=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<a.length;t+=1)n=a[t],i=i||s(e,n);return r&&i}(n)||null==n?(e=arguments[0],t=void 0):function(e){var t,n,r=o(e)&&!u(e),i=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<a.length;t+=1)n=a[t],i=i||s(e,n);return r&&i}(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||xt(),l=Wt(r,this).startOf("day"),f=i.calendarFormat(this,l)||"sameElse",h=t&&(C(t[f])?t[f].call(this,r):t[f]);return this.format(h||this.localeData().calendar(f,this,xt(r)))},Cn.clone=function(){return new T(this)},Cn.diff=function(e,t,n){var r,i,a;if(!this.isValid())return NaN;if(!(r=Wt(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=Y(t)){case"year":a=on(this,r)/12;break;case"month":a=on(this,r);break;case"quarter":a=on(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-i)/864e5;break;case"week":a=(this-r-i)/6048e5;break;default:a=this-r}return n?a:W(a)},Cn.endOf=function(e){var t,n;if(void 0===(e=Y(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gn:mn,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=fn-pn(t+(this._isUTC?0:this.utcOffset()*dn),fn)-1;break;case"minute":t=this._d.valueOf(),t+=dn-pn(t,dn)-1;break;case"second":t=this._d.valueOf(),t+=cn-pn(t,cn)-1}return this._d.setTime(t),i.updateOffset(this,!0),this},Cn.format=function(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var t=j(this,e);return this.localeData().postformat(t)},Cn.from=function(e,t){return this.isValid()&&(E(e)&&e.isValid()||xt(e).isValid())?$t({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Cn.fromNow=function(e){return this.from(xt(),e)},Cn.to=function(e,t){return this.isValid()&&(E(e)&&e.isValid()||xt(e).isValid())?$t({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Cn.toNow=function(e){return this.to(xt(),e)},Cn.get=function(e){return C(this[e=Y(e)])?this[e]():this},Cn.invalidAt=function(){return m(this).overflow},Cn.isAfter=function(e,t){var n=E(e)?e:xt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=Y(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},Cn.isBefore=function(e,t){var n=E(e)?e:xt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=Y(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},Cn.isBetween=function(e,t,n,r){var i=E(e)?e:xt(e),a=E(t)?t:xt(t);return!!(this.isValid()&&i.isValid()&&a.isValid())&&(("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(a,n):!this.isAfter(a,n)))},Cn.isSame=function(e,t){var n,r=E(e)?e:xt(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=Y(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},Cn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Cn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Cn.isValid=function(){return g(this)},Cn.lang=un,Cn.locale=sn,Cn.localeData=ln,Cn.max=jt,Cn.min=Nt,Cn.parsingFlags=function(){return h({},m(this))},Cn.set=function(e,t){if("object"==typeof e){var n,r=function(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:V[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}(e=H(e));for(n=0;n<r.length;n++)this[r[n].unit](e[r[n].unit])}else if(C(this[e=Y(e)]))return this[e](t);return this},Cn.startOf=function(e){var t,n;if(void 0===(e=Y(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?gn:mn,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=pn(t+(this._isUTC?0:this.utcOffset()*dn),fn);break;case"minute":t=this._d.valueOf(),t-=pn(t,dn);break;case"second":t=this._d.valueOf(),t-=pn(t,cn)}return this._d.setTime(t),i.updateOffset(this,!0),this},Cn.subtract=rn,Cn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Cn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Cn.toDate=function(){return new Date(this.valueOf())},Cn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?j(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):C(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",j(n,"Z")):j(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Cn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r="moment",i="";return this.isLocal()||(r=0===this.utcOffset()?"moment.utc":"moment.parseZone",i="Z"),e="["+r+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=i+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(Cn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Cn.toJSON=function(){return this.isValid()?this.toISOString():null},Cn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Cn.unix=function(){return Math.floor(this.valueOf()/1e3)},Cn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Cn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Cn.eraName=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""},Cn.eraNarrow=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""},Cn.eraAbbr=function(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""},Cn.eraYear=function(){var e,t,n,r,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(n=a[e].since<=a[e].until?1:-1,r=this.clone().startOf("day").valueOf(),a[e].since<=r&&r<=a[e].until||a[e].until<=r&&r<=a[e].since)return(this.year()-i(a[e].since).year())*n+a[e].offset;return this.year()},Cn.year=He,Cn.isLeapYear=function(){return K(this.year())},Cn.weekYear=function(e){return bn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Cn.isoWeekYear=function(e){return bn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Cn.quarter=Cn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Cn.month=Ue,Cn.daysInMonth=function(){return Pe(this.year(),this.month())},Cn.week=Cn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Cn.isoWeek=Cn.isoWeeks=function(e){var t=qe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Cn.weeksInYear=function(){var e=this.localeData()._week;return ze(this.year(),e.dow,e.doy)},Cn.weeksInWeekYear=function(){var e=this.localeData()._week;return ze(this.weekYear(),e.dow,e.doy)},Cn.isoWeeksInYear=function(){return ze(this.year(),1,4)},Cn.isoWeeksInISOWeekYear=function(){return ze(this.isoWeekYear(),1,4)},Cn.date=En,Cn.day=Cn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},Cn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Cn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},Cn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Cn.hour=Cn.hours=ut,Cn.minute=Cn.minutes=Sn,Cn.second=Cn.seconds=Mn,Cn.millisecond=Cn.milliseconds=An,Cn.utcOffset=function(e,t,n){var r,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Kt(fe,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=qt(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),a!==e&&(!t||this._changeInProgress?tn(this,$t(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:qt(this)},Cn.utc=function(e){return this.utcOffset(0,e)},Cn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(qt(this),"m")),this},Cn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Kt(de,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},Cn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?xt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},Cn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Cn.isLocal=function(){return!!this.isValid()&&!this._isUTC},Cn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Cn.isUtc=zt,Cn.isUTC=zt,Cn.zoneAbbr=function(){return this._isUTC?"UTC":""},Cn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Cn.dates=w("dates accessor is deprecated. Use date instead.",En),Cn.months=w("months accessor is deprecated. Use month instead",Ue),Cn.years=w("years accessor is deprecated. Use year instead",He),Cn.zone=w("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),Cn.isDSTShifted=w("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var e,t={};return b(t,this),(t=Ot(t))._a?(e=t._isUTC?p(t._a):xt(t._a),this._isDSTShifted=this.isValid()&&function(e,t,n){var r,i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&q(e[r])!==q(t[r]))&&o++;return o+a}(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}));var kn=k.prototype;function Pn(e,t,n,r){var i=vt(),a=p().set(r,t);return i[n](a,e)}function In(e,t,n){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return Pn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=Pn(e,r,n,"month");return i}function On(e,t,n,r){"boolean"==typeof e?(c(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,c(t)&&(n=t,t=void 0),t=t||"");var i,a=vt(),o=e?a._week.dow:0,s=[];if(null!=n)return Pn(t,(n+o)%7,r,"day");for(i=0;i<7;i++)s[i]=Pn(t,(i+o)%7,r,"day");return s}kn.calendar=function(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return C(r)?r.call(t,n):r},kn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(I).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])},kn.invalidDate=function(){return this._invalidDate},kn.ordinal=function(e){return this._ordinal.replace("%d",e)},kn.preparse=Dn,kn.postformat=Dn,kn.relativeTime=function(e,t,n,r){var i=this._relativeTime[n];return C(i)?i(e,t,n,r):i.replace(/%d/i,e)},kn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return C(n)?n(t):n.replace(/%s/i,t)},kn.set=function(e){var t,n;for(n in e)s(e,n)&&(C(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},kn.eras=function(e,t){var n,r,a,o=this._eras||vt("en")._eras;for(n=0,r=o.length;n<r;++n){switch(typeof o[n].since){case"string":a=i(o[n].since).startOf("day"),o[n].since=a.valueOf()}switch(typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":a=i(o[n].until).startOf("day").valueOf(),o[n].until=a.valueOf()}}return o},kn.erasParse=function(e,t,n){var r,i,a,o,s,u=this.eras();for(e=e.toUpperCase(),r=0,i=u.length;r<i;++r)if(a=u[r].name.toUpperCase(),o=u[r].abbr.toUpperCase(),s=u[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return u[r];break;case"NNNN":if(a===e)return u[r];break;case"NNNNN":if(s===e)return u[r]}else if([a,o,s].indexOf(e)>=0)return u[r]},kn.erasConvertYear=function(e,t){var n=e.since<=e.until?1:-1;return void 0===t?i(e.since).year():i(e.since).year()+(t-e.offset)*n},kn.erasAbbrRegex=function(e){return s(this,"_erasAbbrRegex")||yn.call(this),e?this._erasAbbrRegex:this._erasRegex},kn.erasNameRegex=function(e){return s(this,"_erasNameRegex")||yn.call(this),e?this._erasNameRegex:this._erasRegex},kn.erasNarrowRegex=function(e){return s(this,"_erasNarrowRegex")||yn.call(this),e?this._erasNarrowRegex:this._erasRegex},kn.months=function(e,t){return e?a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Re).test(t)?"format":"standalone"][e.month()]:a(this._months)?this._months:this._months.standalone},kn.monthsShort=function(e,t){return e?a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Re.test(t)?"format":"standalone"][e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},kn.monthsParse=function(e,t,n){var r,i,a;if(this._monthsParseExact)return je.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},kn.monthsRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||Be.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=Ne),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},kn.monthsShortRegex=function(e){return this._monthsParseExact?(s(this,"_monthsRegex")||Be.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=xe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},kn.week=function(e){return qe(e,this._week.dow,this._week.doy).week},kn.firstDayOfYear=function(){return this._week.doy},kn.firstDayOfWeek=function(){return this._week.dow},kn.weekdays=function(e,t){var n=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Xe(n,this._week.dow):e?n[e.day()]:n},kn.weekdaysMin=function(e){return!0===e?Xe(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},kn.weekdaysShort=function(e){return!0===e?Xe(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},kn.weekdaysParse=function(e,t,n){var r,i,a;if(this._weekdaysParseExact)return nt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}},kn.weekdaysRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||rt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Ze),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},kn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||rt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=et),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},kn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||rt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=tt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},kn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},kn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},mt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===q(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),i.lang=w("moment.lang is deprecated. Use moment.locale instead.",mt),i.langData=w("moment.langData is deprecated. Use moment.localeData instead.",vt);var Rn=Math.abs;function xn(e,t,n,r){var i=$t(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Nn(e){return e<0?Math.floor(e):Math.ceil(e)}function jn(e){return 4800*e/146097}function Fn(e){return 146097*e/4800}function Un(e){return function(){return this.as(e)}}var Bn=Un("ms"),Yn=Un("s"),Hn=Un("m"),Vn=Un("h"),Gn=Un("d"),Kn=Un("w"),Wn=Un("M"),qn=Un("Q"),zn=Un("y");function Xn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Qn=Xn("milliseconds"),$n=Xn("seconds"),Jn=Xn("minutes"),Zn=Xn("hours"),er=Xn("days"),tr=Xn("months"),nr=Xn("years"),rr=Math.round,ir={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ar(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}var or=Math.abs;function sr(e){return(e>0)-(e<0)||+e}function ur(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,a,o,s,u=or(this._milliseconds)/1e3,l=or(this._days),c=or(this._months),d=this.asSeconds();return d?(e=W(u/60),t=W(e/60),u%=60,e%=60,n=W(c/12),c%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",a=sr(this._months)!==sr(d)?"-":"",o=sr(this._days)!==sr(d)?"-":"",s=sr(this._milliseconds)!==sr(d)?"-":"",i+"P"+(n?a+n+"Y":"")+(c?a+c+"M":"")+(l?o+l+"D":"")+(t||e||u?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(u?s+r+"S":"")):"P0D"}var lr=Bt.prototype;return lr.isValid=function(){return this._isValid},lr.abs=function(){var e=this._data;return this._milliseconds=Rn(this._milliseconds),this._days=Rn(this._days),this._months=Rn(this._months),e.milliseconds=Rn(e.milliseconds),e.seconds=Rn(e.seconds),e.minutes=Rn(e.minutes),e.hours=Rn(e.hours),e.months=Rn(e.months),e.years=Rn(e.years),this},lr.add=function(e,t){return xn(this,e,t,1)},lr.subtract=function(e,t){return xn(this,e,t,-1)},lr.as=function(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=Y(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+jn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Fn(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},lr.asMilliseconds=Bn,lr.asSeconds=Yn,lr.asMinutes=Hn,lr.asHours=Vn,lr.asDays=Gn,lr.asWeeks=Kn,lr.asMonths=Wn,lr.asQuarters=qn,lr.asYears=zn,lr.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12):NaN},lr._bubble=function(){var e,t,n,r,i,a=this._milliseconds,o=this._days,s=this._months,u=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*Nn(Fn(s)+o),o=0,s=0),u.milliseconds=a%1e3,e=W(a/1e3),u.seconds=e%60,t=W(e/60),u.minutes=t%60,n=W(t/60),u.hours=n%24,o+=W(n/24),i=W(jn(o)),s+=i,o-=Nn(Fn(i)),r=W(s/12),s%=12,u.days=o,u.months=s,u.years=r,this},lr.clone=function(){return $t(this)},lr.get=function(e){return e=Y(e),this.isValid()?this[e+"s"]():NaN},lr.milliseconds=Qn,lr.seconds=$n,lr.minutes=Jn,lr.hours=Zn,lr.days=er,lr.weeks=function(){return W(this.days()/7)},lr.months=tr,lr.years=nr,lr.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,a=ir;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(i=e),"object"==typeof t&&(a=Object.assign({},ir,t),null!=t.s&&null==t.ss&&(a.ss=t.s-1)),n=this.localeData(),r=function(e,t,n,r){var i=$t(e).abs(),a=rr(i.as("s")),o=rr(i.as("m")),s=rr(i.as("h")),u=rr(i.as("d")),l=rr(i.as("M")),c=rr(i.as("w")),d=rr(i.as("y")),f=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(f=f||c<=1&&["w"]||c<n.w&&["ww",c]),(f=f||l<=1&&["M"]||l<n.M&&["MM",l]||d<=1&&["y"]||["yy",d])[2]=t,f[3]=+e>0,f[4]=r,ar.apply(null,f)}(this,!i,a,n),i&&(r=n.pastFuture(+this,r)),n.postformat(r)},lr.toISOString=ur,lr.toString=ur,lr.toJSON=ur,lr.locale=sn,lr.localeData=ln,lr.toIsoString=w("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ur),lr.lang=un,N("X",0,0,"unix"),N("x",0,0,"valueOf"),pe("x",ce),pe("X",/[+-]?\d+(\.\d{1,3})?/),ye("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),ye("x",(function(e,t,n){n._d=new Date(q(e))})),i.version="2.29.1",t=xt,i.fn=Cn,i.min=function(){return Ft("isBefore",[].slice.call(arguments,0))},i.max=function(){return Ft("isAfter",[].slice.call(arguments,0))},i.now=function(){return Date.now?Date.now():+new Date},i.utc=p,i.unix=function(e){return xt(1e3*e)},i.months=function(e,t){return In(e,t,"months")},i.isDate=d,i.locale=mt,i.invalid=v,i.duration=$t,i.isMoment=E,i.weekdays=function(e,t,n){return On(e,t,n,"weekdays")},i.parseZone=function(){return xt.apply(null,arguments).parseZone()},i.localeData=vt,i.isDuration=Yt,i.monthsShort=function(e,t){return In(e,t,"monthsShort")},i.weekdaysMin=function(e,t,n){return On(e,t,n,"weekdaysMin")},i.defineLocale=gt,i.updateLocale=function(e,t){if(null!=t){var n,r,i=lt;null!=ct[e]&&null!=ct[e].parentLocale?ct[e].set(D(ct[e]._config,t)):(null!=(r=pt(e))&&(i=r._config),t=D(i,t),null==r&&(t.abbr=e),(n=new k(t)).parentLocale=ct[e],ct[e]=n),mt(e)}else null!=ct[e]&&(null!=ct[e].parentLocale?(ct[e]=ct[e].parentLocale,e===mt()&&mt(e)):null!=ct[e]&&delete ct[e]);return ct[e]},i.locales=function(){return A(ct)},i.weekdaysShort=function(e,t,n){return On(e,t,n,"weekdaysShort")},i.normalizeUnits=Y,i.relativeTimeRounding=function(e){return void 0===e?rr:"function"==typeof e&&(rr=e,!0)},i.relativeTimeThreshold=function(e,t){return void 0!==ir[e]&&(void 0===t?ir[e]:(ir[e]=t,"s"===e&&(ir.ss=t-1),!0))},i.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},i.prototype=Cn,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()}).call(this,n(161)(e))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),i=n(46),a=n(89),o=n(14),s=n(68),u=n(30),l=n(57),c=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=a.a;break;case 1:if(!n){o.destination=a.a;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new d(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new d(o,n,r,i)}return o}return r.a(t,e),t.prototype[s.a]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(o.a),d=function(e){function t(t,n,r,o){var s,u=e.call(this)||this;u._parentSubscriber=t;var l=u;return Object(i.a)(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.a&&(l=Object.create(n),Object(i.a)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(u))),u._context=l,u._next=s,u._error=r,u._complete=o,u}return r.a(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;u.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=u.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(l.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(l.a)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};u.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),u.a.useDeprecatedSynchronousErrorHandling)throw e;Object(l.a)(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!u.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return u.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Object(l.a)(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(c)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}));var r=n(1),i=n(5),a=n(7),o=n(56),s=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return r.a(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(i.a),u=(i.a,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(i.a));i.a;function l(e,t){if(!t.closed){if(e instanceof a.a)return e.subscribe(t);var n;try{n=Object(o.a)(e)(t)}catch(e){t.error(e)}return n}}},function(e,t,n){"use strict";var r=n(87),i=n(5),a=n(68),o=n(89);var s=n(41),u=n(66),l=n(30);n.d(t,"a",(function(){return c}));var c=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,s=function(e,t,n){if(e){if(e instanceof i.a)return e;if(e[a.a])return e[a.a]()}return e||t||n?new i.a(e,t,n):new i.a(o.a)}(e,t,n);if(r?s.add(r.call(s,this.source)):s.add(this.source||l.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),l.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){l.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),Object(r.a)(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=d(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[s.a]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Object(u.b)(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=d(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function d(e){if(e||(e=l.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(473),t),r.__exportStar(n(474),t),r.__exportStar(n(475),t),r.__exportStar(n(476),t),r.__exportStar(n(158),t),r.__exportStar(n(477),t),r.__exportStar(n(478),t),r.__exportStar(n(479),t),r.__exportStar(n(480),t),r.__exportStar(n(481),t),r.__exportStar(n(482),t),r.__exportStar(n(483),t),r.__exportStar(n(484),t),r.__exportStar(n(485),t),r.__exportStar(n(486),t),r.__exportStar(n(487),t),r.__exportStar(n(488),t),r.__exportStar(n(489),t),r.__exportStar(n(159),t),r.__exportStar(n(490),t)},function(e,t,n){"use strict";e.exports=(e,{include:t,exclude:n}={})=>{const r=e=>{const r=t=>"string"==typeof t?e===t:t.test(e);return t?t.some(r):!n||!n.some(r)};for(const[t,n]of(e=>{const t=new Set;do{for(const n of Reflect.ownKeys(e))t.add([e,n])}while((e=Reflect.getPrototypeOf(e))&&e!==Object.prototype);return t})(e.constructor.prototype)){if("constructor"===n||!r(n))continue;const i=Reflect.getOwnPropertyDescriptor(t,n);i&&"function"==typeof i.value&&(e[n]=e[n].bind(e))}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(493),t),r.__exportStar(n(500),t),r.__exportStar(n(163),t),r.__exportStar(n(503),t),r.__exportStar(n(504),t),r.__exportStar(n(505),t),r.__exportStar(n(165),t),r.__exportStar(n(559),t),r.__exportStar(n(560),t),r.__exportStar(n(561),t),r.__exportStar(n(562),t),r.__exportStar(n(563),t),r.__exportStar(n(564),t),r.__exportStar(n(134),t),r.__exportStar(n(189),t),r.__exportStar(n(565),t),r.__exportStar(n(184),t),r.__exportStar(n(566),t),r.__exportStar(n(190),t),r.__exportStar(n(567),t),r.__exportStar(n(164),t),r.__exportStar(n(91),t),r.__exportStar(n(99),t),r.__exportStar(n(568),t),r.__exportStar(n(569),t),r.__exportStar(n(60),t),r.__exportStar(n(570),t),r.__exportStar(n(571),t),r.__exportStar(n(572),t),r.__exportStar(n(573),t),r.__exportStar(n(574),t),r.__exportStar(n(575),t),r.__exportStar(n(192),t),r.__exportStar(n(135),t),r.__exportStar(n(576),t),r.__exportStar(n(191),t),r.__exportStar(n(577),t),r.__exportStar(n(578),t),r.__exportStar(n(579),t),r.__exportStar(n(580),t),r.__exportStar(n(581),t),r.__exportStar(n(582),t),r.__exportStar(n(583),t),r.__exportStar(n(584),t),r.__exportStar(n(585),t),r.__exportStar(n(193),t),r.__exportStar(n(586),t),r.__exportStar(n(587),t),r.__exportStar(n(588),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(943),t),r.__exportStar(n(944),t),r.__exportStar(n(282),t)},function(e,t,n){"use strict";n.r(t);var r=n(7),i=n(114),a=n(98),o=n(41),s=n(17),u=n(115),l=n(80),c=n(51),d=n(67),f=n(18),h=n(95),p=n(1),m=n(52),g=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return p.a(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(m.a),v=n(50),y=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p.a(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(v.a))(g),_=y,b=function(e){function t(t,n){void 0===t&&(t=T),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return p.a(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(v.a),T=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return p.a(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(m.a),E=n(96),S=n(14),w=n(5),A=n(37),M=n(66),L=n(39),C=n(32);function D(e){return!!e&&(e instanceof r.a||"function"==typeof e.lift&&"function"==typeof e.subscribe)}var k=n(45),P=n(47),I=n(42),O=n(69),R=n(117),x=n(22),N=n(87),j=n(19),F=n(24);function U(e,t,n){if(t){if(!Object(F.a)(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return U(e,n).apply(void 0,r).pipe(Object(x.a)((function(e){return Object(j.a)(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var a,o=this,s={context:o,subject:a,callbackFunc:e,scheduler:n};return new r.a((function(r){if(n){var i={args:t,subscriber:r,params:s};return n.schedule(B,0,i)}if(!a){a=new c.a;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.next(e.length<=1?e[0]:e),a.complete()}]))}catch(e){Object(N.a)(a)?a.error(e):console.warn(e)}}return a.subscribe(r)}))}}function B(e){var t=this,n=e.args,r=e.subscriber,i=e.params,a=i.callbackFunc,o=i.context,s=i.scheduler,u=i.subject;if(!u){u=i.subject=new c.a;try{a.apply(o,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(s.schedule(Y,0,{value:r,subject:u}))}]))}catch(e){u.error(e)}}this.add(u.subscribe(r))}function Y(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function H(e,t,n){if(t){if(!Object(F.a)(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return H(e,n).apply(void 0,r).pipe(Object(x.a)((function(e){return Object(j.a)(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var a={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new r.a((function(r){var i=a.context,o=a.subject;if(n)return n.schedule(V,0,{params:a,subscriber:r,context:i});if(!o){o=a.subject=new c.a;try{e.apply(i,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?o.error(n):(o.next(e.length<=1?e[0]:e),o.complete())}]))}catch(e){Object(N.a)(o)?o.error(e):console.warn(e)}}return o.subscribe(r)}))}}function V(e){var t=this,n=e.params,r=e.subscriber,i=e.context,a=n.callbackFunc,o=n.args,s=n.scheduler,u=n.subject;if(!u){u=n.subject=new c.a;try{a.apply(i,o.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(s.schedule(K,0,{err:r,subject:u}));else{var i=e.length<=1?e[0]:e;t.add(s.schedule(G,0,{value:i,subject:u}))}}]))}catch(e){this.add(s.schedule(K,0,{err:e,subject:u}))}}this.add(u.subscribe(r))}function G(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function K(e){var t=e.err;e.subject.error(t)}var W=n(82),q=n(55),z=n(84),X=n(25),Q=n(86),$=n(26);function J(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(Object(j.a)(n))return Z(n,null);if(Object(Q.a)(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return Z(r.map((function(e){return n[e]})),r)}}if("function"==typeof e[e.length-1]){var i=e.pop();return Z(e=1===e.length&&Object(j.a)(e[0])?e[0]:e,null).pipe(Object(x.a)((function(e){return i.apply(void 0,e)})))}return Z(e,null)}function Z(e,t){return new r.a((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),a=0,o=0,s=function(s){var u=Object($.a)(e[s]),l=!1;n.add(u.subscribe({next:function(e){l||(l=!0,o++),i[s]=e},error:function(e){return n.error(e)},complete:function(){++a!==r&&l||(o===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()}))}var ee=n(46);function te(e,t,n,i){return Object(ee.a)(n)&&(i=n,n=void 0),i?te(e,t,n).pipe(Object(x.a)((function(e){return Object(j.a)(e)?i.apply(void 0,e):i(e)}))):new r.a((function(r){!function e(t,n,r,i,a){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,a),o=function(){return s.removeEventListener(n,r,a)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var u=t;t.on(n,r),o=function(){return u.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var l=t;t.addListener(n,r),o=function(){return l.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var c=0,d=t.length;c<d;c++)e(t[c],n,r,i,a)}i.add(o)}(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function ne(e,t,n){return n?ne(e,t).pipe(Object(x.a)((function(e){return Object(j.a)(e)?n.apply(void 0,e):n(e)}))):new r.a((function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(e){return void n.error(e)}if(Object(ee.a)(t))return function(){return t(i,r)}}))}function re(e,t,n,i,a){var o,s;if(1==arguments.length){var u=e;s=u.initialState,t=u.condition,n=u.iterate,o=u.resultSelector||C.a,a=u.scheduler}else void 0===i||Object(F.a)(i)?(s=e,o=C.a,a=i):(s=e,o=i);return new r.a((function(e){var r=s;if(a)return a.schedule(ie,0,{subscriber:e,iterate:n,condition:t,resultSelector:o,state:r});for(;;){if(t){var i=void 0;try{i=t(r)}catch(t){return void e.error(t)}if(!i){e.complete();break}}var u=void 0;try{u=o(r)}catch(t){return void e.error(t)}if(e.next(u),e.closed)break;try{r=n(r)}catch(t){return void e.error(t)}}}))}function ie(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function ae(e,t,n){return void 0===t&&(t=X.a),void 0===n&&(n=X.a),Object(z.a)((function(){return e()?t:n}))}var oe=n(53);function se(e,t){return void 0===e&&(e=0),void 0===t&&(t=f.a),(!Object(oe.a)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=f.a),new r.a((function(n){return n.add(t.schedule(ue,e,{subscriber:n,counter:0,period:e})),n}))}function ue(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}var le=n(119),ce=new r.a(L.a);function de(){return ce}var fe=n(59);function he(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return X.a;var n=e[0],i=e.slice(1);return 1===e.length&&Object(j.a)(n)?he.apply(void 0,n):new r.a((function(e){var t=function(){return e.add(he.apply(void 0,i).subscribe(e))};return Object($.a)(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function pe(e,t){return t?new r.a((function(n){var r=Object.keys(e),i=new S.a;return i.add(t.schedule(me,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i})):new r.a((function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()}))}function me(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,a=e.obj;if(!r.closed)if(n<t.length){var o=t[n];r.next([o,a[o]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:a}))}else r.complete()}var ge=n(127),ve=n(56),ye=n(36);function _e(e,t,n){return[Object(ye.a)(t,n)(new r.a(Object(ve.a)(e))),Object(ye.a)(Object(ge.a)(t,n))(new r.a(Object(ve.a)(e)))]}var be=n(120);function Te(e,t,n){return void 0===e&&(e=0),new r.a((function(r){void 0===t&&(t=e,e=0);var i=0,a=e;if(n)return n.schedule(Ee,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(a++),r.closed)break}}))}function Ee(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}var Se=n(81),we=n(121);function Ae(e,t){return new r.a((function(n){var r,i;try{r=e()}catch(e){return void n.error(e)}try{i=t(r)}catch(e){return void n.error(e)}var a=(i?Object($.a)(i):X.a).subscribe(n);return function(){a.unsubscribe(),r&&r.unsubscribe()}}))}var Me=n(85),Le=n(122),Ce=n(30);n.d(t,"Observable",(function(){return r.a})),n.d(t,"ConnectableObservable",(function(){return i.a})),n.d(t,"GroupedObservable",(function(){return a.a})),n.d(t,"observable",(function(){return o.a})),n.d(t,"Subject",(function(){return s.a})),n.d(t,"BehaviorSubject",(function(){return u.a})),n.d(t,"ReplaySubject",(function(){return l.a})),n.d(t,"AsyncSubject",(function(){return c.a})),n.d(t,"asap",(function(){return d.a})),n.d(t,"asapScheduler",(function(){return d.b})),n.d(t,"async",(function(){return f.a})),n.d(t,"asyncScheduler",(function(){return f.b})),n.d(t,"queue",(function(){return h.a})),n.d(t,"queueScheduler",(function(){return h.b})),n.d(t,"animationFrame",(function(){return _})),n.d(t,"animationFrameScheduler",(function(){return y})),n.d(t,"VirtualTimeScheduler",(function(){return b})),n.d(t,"VirtualAction",(function(){return T})),n.d(t,"Scheduler",(function(){return E.a})),n.d(t,"Subscription",(function(){return S.a})),n.d(t,"Subscriber",(function(){return w.a})),n.d(t,"Notification",(function(){return A.a})),n.d(t,"NotificationKind",(function(){return A.b})),n.d(t,"pipe",(function(){return M.a})),n.d(t,"noop",(function(){return L.a})),n.d(t,"identity",(function(){return C.a})),n.d(t,"isObservable",(function(){return D})),n.d(t,"ArgumentOutOfRangeError",(function(){return k.a})),n.d(t,"EmptyError",(function(){return P.a})),n.d(t,"ObjectUnsubscribedError",(function(){return I.a})),n.d(t,"UnsubscriptionError",(function(){return O.a})),n.d(t,"TimeoutError",(function(){return R.a})),n.d(t,"bindCallback",(function(){return U})),n.d(t,"bindNodeCallback",(function(){return H})),n.d(t,"combineLatest",(function(){return W.b})),n.d(t,"concat",(function(){return q.a})),n.d(t,"defer",(function(){return z.a})),n.d(t,"empty",(function(){return X.b})),n.d(t,"forkJoin",(function(){return J})),n.d(t,"from",(function(){return $.a})),n.d(t,"fromEvent",(function(){return te})),n.d(t,"fromEventPattern",(function(){return ne})),n.d(t,"generate",(function(){return re})),n.d(t,"iif",(function(){return ae})),n.d(t,"interval",(function(){return se})),n.d(t,"merge",(function(){return le.a})),n.d(t,"never",(function(){return de})),n.d(t,"of",(function(){return fe.a})),n.d(t,"onErrorResumeNext",(function(){return he})),n.d(t,"pairs",(function(){return pe})),n.d(t,"partition",(function(){return _e})),n.d(t,"race",(function(){return be.a})),n.d(t,"range",(function(){return Te})),n.d(t,"throwError",(function(){return Se.a})),n.d(t,"timer",(function(){return we.a})),n.d(t,"using",(function(){return Ae})),n.d(t,"zip",(function(){return Me.b})),n.d(t,"scheduled",(function(){return Le.a})),n.d(t,"EMPTY",(function(){return X.a})),n.d(t,"NEVER",(function(){return ce})),n.d(t,"config",(function(){return Ce.a}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(900),t),r.__exportStar(n(901),t),r.__exportStar(n(237),t),r.__exportStar(n(902),t),r.__exportStar(n(238),t),r.__exportStar(n(903),t),r.__exportStar(n(904),t),r.__exportStar(n(905),t),r.__exportStar(n(906),t),r.__exportStar(n(907),t),r.__exportStar(n(908),t),r.__exportStar(n(909),t),r.__exportStar(n(910),t),r.__exportStar(n(911),t),r.__exportStar(n(239),t),r.__exportStar(n(912),t)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(19),i=n(86),a=n(46),o=n(69),s=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,s=this._ctorUnsubscribe,l=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var d=0;d<n.length;++d){n[d].remove(this)}if(Object(a.a)(l)){s&&(this._unsubscribe=void 0);try{l.call(this)}catch(e){t=e instanceof o.a?u(e.errors):[e]}}if(Object(r.a)(c)){d=-1;for(var f=c.length;++d<f;){var h=c[d];if(Object(i.a)(h))try{h.unsubscribe()}catch(e){t=t||[],e instanceof o.a?t=t.concat(u(e.errors)):t.push(e)}}}if(t)throw new o.a(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function u(e){return e.reduce((function(e,t){return e.concat(t instanceof o.a?t.errors:t)}),[])}},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(6);function a(e){return function(t){return t.lift(new o(e))}}var o=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.durationSelector))},e}(),s=function(e){function t(t,n){var r=e.call(this,t)||this;return r.durationSelector=n,r.hasValue=!1,r}return r.a(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=void 0;try{t=(0,this.durationSelector)(e)}catch(e){return this.destination.error(e)}var n=Object(i.c)(t,new i.a(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}},t.prototype.clearThrottle=function(){var e=this.value,t=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))},t.prototype.notifyNext=function(){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(i.b),u=n(18),l=n(121);function c(e,t){return void 0===t&&(t=u.a),a((function(){return Object(l.a)(e,t)}))}function d(e){return function(t){return t.lift(new f(e))}}var f=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.closingNotifier))},e}(),h=function(e){function t(t,n){var r=e.call(this,t)||this;return r.buffer=[],r.add(Object(i.c)(n,new i.a(r))),r}return r.a(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(){var e=this.buffer;this.buffer=[],this.destination.next(e)},t}(i.b),p=n(5);function m(e,t){return void 0===t&&(t=null),function(n){return n.lift(new g(e,t))}}var g=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t,this.subscriberClass=t&&e!==t?y:v}return e.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},e}(),v=function(e){function t(t,n){var r=e.call(this,t)||this;return r.bufferSize=n,r.buffer=[],r}return r.a(t,e),t.prototype._next=function(e){var t=this.buffer;t.push(e),t.length==this.bufferSize&&(this.destination.next(t),this.buffer=[])},t.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),e.prototype._complete.call(this)},t}(p.a),y=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return r.a(t,e),t.prototype._next=function(e){var t=this.bufferSize,n=this.startBufferEvery,r=this.buffers,i=this.count;this.count++,i%n==0&&r.push([]);for(var a=r.length;a--;){var o=r[a];o.push(e),o.length===t&&(r.splice(a,1),this.destination.next(o))}},t.prototype._complete=function(){for(var t=this.buffers,n=this.destination;t.length>0;){var r=t.shift();r.length>0&&n.next(r)}e.prototype._complete.call(this)},t}(p.a),_=n(24);function b(e){var t=arguments.length,n=u.a;Object(_.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var r=null;t>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return t>=3&&(i=arguments[2]),function(t){return t.lift(new T(e,r,i,n))}}var T=function(){function e(e,t,n,r){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new S(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),E=function(){return function(){this.buffer=[]}}(),S=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;o.bufferTimeSpan=n,o.bufferCreationInterval=r,o.maxBufferSize=i,o.scheduler=a,o.contexts=[];var s=o.openContext();if(o.timespanOnly=null==r||r<0,o.timespanOnly){var u={subscriber:o,context:s,bufferTimeSpan:n};o.add(s.closeAction=a.schedule(w,n,u))}else{var l={subscriber:o,context:s},c={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:o,scheduler:a};o.add(s.closeAction=a.schedule(M,n,l)),o.add(a.schedule(A,r,c))}return o}return r.a(t,e),t.prototype._next=function(e){for(var t,n=this.contexts,r=n.length,i=0;i<r;i++){var a=n[i],o=a.buffer;o.push(e),o.length==this.maxBufferSize&&(t=a)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,n=this.destination;t.length>0;){var r=t.shift();n.next(r.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:e,bufferTimeSpan:n};this.add(e.closeAction=this.scheduler.schedule(w,n,r))}},t.prototype.openContext=function(){var e=new E;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)},t}(p.a);function w(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function A(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,r=e.subscriber,i=e.scheduler,a=r.openContext();r.closed||(r.add(a.closeAction=i.schedule(M,n,{subscriber:r,context:a})),this.schedule(e,t))}function M(e){var t=e.subscriber,n=e.context;t.closeContext(n)}var L=n(14),C=n(29),D=n(35);function k(e,t){return function(n){return n.lift(new P(e,t))}}var P=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new I(e,this.openings,this.closingSelector))},e}(),I=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.closingSelector=r,i.contexts=[],i.add(Object(C.a)(i,n)),i}return r.a(t,e),t.prototype._next=function(e){for(var t=this.contexts,n=t.length,r=0;r<n;r++)t[r].buffer.push(e)},t.prototype._error=function(t){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var n=t.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector.call(this,e);t&&this.trySubscribe(t)}catch(e){this._error(e)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var n=e.buffer,r=e.subscription;this.destination.next(n),t.splice(t.indexOf(e),1),this.remove(r),r.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,n=new L.a,r={buffer:[],subscription:n};t.push(r);var i=Object(C.a)(this,e,r);!i||i.closed?this.closeBuffer(r):(i.context=r,this.add(i),n.add(i))},t}(D.a);function O(e){return function(t){return t.lift(new R(e))}}var R=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new x(e,this.closingSelector))},e}(),x=function(e){function t(t,n){var r=e.call(this,t)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return r.a(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},t.prototype.notifyNext=function(){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{t=(0,this.closingSelector)()}catch(e){return this.error(e)}e=new L.a,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(Object(i.c)(t,new i.a(this))),this.subscribing=!1},t}(i.b);function N(e){return function(t){var n=new j(e),r=t.lift(n);return n.caught=r}}var j=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new F(e,this.selector,this.caught))},e}(),F=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.selector=n,i.caught=r,i}return r.a(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle();var r=new i.a(this);this.add(r);var a=Object(i.c)(n,r);a!==r&&this.add(a)}},t}(i.b),U=n(82);function B(e){return function(t){return t.lift(new U.a(e))}}var Y=n(19),H=n(26);function V(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null;return"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(Y.a)(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(Object(H.a)([t].concat(e)),new U.a(n))}}var G=n(55);function K(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(G.a.apply(void 0,[t].concat(e)))}}var W=n(118),q=n(48);function z(e,t){return Object(q.b)(e,t,1)}function X(e,t){return z((function(){return e}),t)}function Q(e){return function(t){return t.lift(new $(e,t))}}var $=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new J(e,this.predicate,this.source))},e}(),J=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return r.a(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(p.a);function Z(e){return function(t){return t.lift(new ee(e))}}var ee=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new te(e,this.durationSelector))},e}(),te=function(e){function t(t,n){var r=e.call(this,t)||this;return r.durationSelector=n,r.hasValue=!1,r}return r.a(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var n=this.durationSubscription;this.value=e,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(i.c)(t,new i.a(this)))&&!n.closed&&this.add(this.durationSubscription=n)},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,n=this.durationSubscription;n&&(this.durationSubscription=void 0,n.unsubscribe(),this.remove(n)),this.value=void 0,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(i.b);function ne(e,t){return void 0===t&&(t=u.a),function(n){return n.lift(new re(e,t))}}var re=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new ie(e,this.dueTime,this.scheduler))},e}(),ie=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r.a(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ae,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(p.a);function ae(e){e.debouncedNext()}function oe(e){return void 0===e&&(e=null),function(t){return t.lift(new se(e))}}var se=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new ue(e,this.defaultValue))},e}(),ue=function(e){function t(t,n){var r=e.call(this,t)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r.a(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(p.a);function le(e){return e instanceof Date&&!isNaN(+e)}var ce=n(37);function de(e,t){void 0===t&&(t=u.a);var n=le(e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new fe(n,t))}}var fe=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new he(e,this.delay,this.scheduler))},e}(),he=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return r.a(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var a=Math.max(0,n[0].time-r.now());this.schedule(e,a)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new pe(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(ce.a.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(ce.a.createComplete()),this.unsubscribe()},t}(p.a),pe=function(){return function(e,t){this.time=e,this.notification=t}}(),me=n(7);function ge(e,t){return t?function(n){return new _e(n,t).lift(new ve(e))}:function(t){return t.lift(new ve(e))}}var ve=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new ye(e,this.delayDurationSelector))},e}(),ye=function(e){function t(t,n){var r=e.call(this,t)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return r.a(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){var t=this.index++;try{var n=this.delayDurationSelector(e,t);n&&this.tryDelay(n,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue},t.prototype.tryDelay=function(e,t){var n=Object(C.a)(this,e,t);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(D.a),_e=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subscriptionDelay=n,r}return r.a(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new be(e,this.source))},t}(me.a),be=function(e){function t(t,n){var r=e.call(this)||this;return r.parent=t,r.source=n,r.sourceSubscribed=!1,r}return r.a(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(p.a);function Te(){return function(e){return e.lift(new Ee)}}var Ee=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Se(e))},e}(),Se=function(e){function t(t){return e.call(this,t)||this}return r.a(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(p.a);function we(e,t){return function(n){return n.lift(new Ae(e,t))}}var Ae=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new Me(e,this.keySelector,this.flushes))},e}(),Me=function(e){function t(t,n,r){var a=e.call(this,t)||this;return a.keySelector=n,a.values=new Set,r&&a.add(Object(i.c)(r,new i.a(a))),a}return r.a(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t,n=this.destination;try{t=this.keySelector(e)}catch(e){return void n.error(e)}this._finalizeNext(t,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(i.b);function Le(e,t){return function(n){return n.lift(new Ce(e,t))}}var Ce=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new De(e,this.compare,this.keySelector))},e}(),De=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return r.a(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(e){return this.destination.error(e)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},t}(p.a);function ke(e,t){return Le((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))}var Pe=n(45),Ie=n(36),Oe=n(47);function Re(e){return void 0===e&&(e=je),function(t){return t.lift(new xe(e))}}var xe=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new Ne(e,this.errorFactory))},e}(),Ne=function(e){function t(t,n){var r=e.call(this,t)||this;return r.errorFactory=n,r.hasValue=!1,r}return r.a(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(p.a);function je(){return new Oe.a}var Fe=n(25);function Ue(e){return function(t){return 0===e?Object(Fe.b)():t.lift(new Be(e))}}var Be=function(){function e(e){if(this.total=e,this.total<0)throw new Pe.a}return e.prototype.call=function(e,t){return t.subscribe(new Ye(e,this.total))},e}(),Ye=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return r.a(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(p.a);function He(e,t){if(e<0)throw new Pe.a;var n=arguments.length>=2;return function(r){return r.pipe(Object(Ie.a)((function(t,n){return n===e})),Ue(1),n?oe(t):Re((function(){return new Pe.a})))}}var Ve=n(59);function Ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return Object(G.a)(t,Ve.a.apply(void 0,e))}}function Ke(e,t){return function(n){return n.lift(new We(e,t,n))}}var We=function(){function e(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}return e.prototype.call=function(e,t){return t.subscribe(new qe(e,this.predicate,this.thisArg,this.source))},e}(),qe=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.predicate=n,a.thisArg=r,a.source=i,a.index=0,a.thisArg=r||a,a}return r.a(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(p.a);function ze(){return function(e){return e.lift(new Xe)}}var Xe=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Qe(e))},e}(),Qe=function(e){function t(t){var n=e.call(this,t)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return r.a(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(i.c)(e,new i.a(this))))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i.b),$e=n(22);function Je(e,t){return t?function(n){return n.pipe(Je((function(n,r){return Object(H.a)(e(n,r)).pipe(Object($e.a)((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new Ze(e))}}var Ze=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new et(e,this.project))},e}(),et=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return r.a(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new i.a(this),n=this.destination;n.add(t);var r=Object(i.c)(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(i.b);function tt(e,t,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(r){return r.lift(new nt(e,t,n))}}var nt=function(){function e(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}return e.prototype.call=function(e,t){return t.subscribe(new rt(e,this.project,this.concurrent,this.scheduler))},e}(),rt=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.project=n,a.concurrent=r,a.scheduler=i,a.index=0,a.active=0,a.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(a.buffer=[]),a}return r.a(t,e),t.dispatch=function(e){var t=e.subscriber,n=e.result,r=e.value,i=e.index;t.subscribeToProjection(n,r,i)},t.prototype._next=function(e){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(e);try{var i=(0,this.project)(e,r);if(this.scheduler){var a={subscriber:this,result:i,value:e,index:r};this.destination.add(this.scheduler.schedule(t.dispatch,0,a))}else this.subscribeToProjection(i,e,r)}catch(e){n.error(e)}}else this.buffer.push(e)}},t.prototype.subscribeToProjection=function(e,t,n){this.active++,this.destination.add(Object(i.c)(e,new i.a(this)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this._next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(i.b);function it(e){return function(t){return t.lift(new at(e))}}var at=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new ot(e,this.callback))},e}(),ot=function(e){function t(t,n){var r=e.call(this,t)||this;return r.add(new L.a(n)),r}return r.a(t,e),t}(p.a);function st(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(n){return n.lift(new ut(e,n,!1,t))}}var ut=function(){function e(e,t,n,r){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=r}return e.prototype.call=function(e,t){return t.subscribe(new lt(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}(),lt=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;return o.predicate=n,o.source=r,o.yieldIndex=i,o.thisArg=a,o.index=0,o}return r.a(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete(),this.unsubscribe()},t.prototype._next=function(e){var t=this.predicate,n=this.thisArg,r=this.index++;try{t.call(n||this,e,r,this.source)&&this.notifyComplete(this.yieldIndex?r:e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(p.a);function ct(e,t){return function(n){return n.lift(new ut(e,n,!0,t))}}var dt=n(32);function ft(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Object(Ie.a)((function(t,n){return e(t,n,r)})):dt.a,Ue(1),n?oe(t):Re((function(){return new Oe.a})))}}var ht=n(98);function pt(){return function(e){return e.lift(new mt)}}var mt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new gt(e))},e}(),gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype._next=function(e){},t}(p.a);function vt(){return function(e){return e.lift(new yt)}}var yt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new _t(e))},e}(),_t=function(e){function t(t){return e.call(this,t)||this}return r.a(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(p.a);function bt(e){return function(t){return 0===e?Object(Fe.b)():t.lift(new Tt(e))}}var Tt=function(){function e(e){if(this.total=e,this.total<0)throw new Pe.a}return e.prototype.call=function(e,t){return t.subscribe(new Et(e,this.total))},e}(),Et=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r.a(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()},t}(p.a);function St(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Object(Ie.a)((function(t,n){return e(t,n,r)})):dt.a,bt(1),n?oe(t):Re((function(){return new Oe.a})))}}function wt(e){return function(t){return t.lift(new At(e))}}var At=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new Mt(e,this.value))},e}(),Mt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return r.a(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(p.a);function Lt(){return function(e){return e.lift(new Ct)}}var Ct=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Dt(e))},e}(),Dt=function(e){function t(t){return e.call(this,t)||this}return r.a(t,e),t.prototype._next=function(e){this.destination.next(ce.a.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(ce.a.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(ce.a.createComplete()),e.complete()},t}(p.a);function kt(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Pt(e,t,n))}}var Pt=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new It(e,this.accumulator,this.seed,this.hasSeed))},e}(),It=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.accumulator=n,a._seed=r,a.hasSeed=i,a.index=0,a}return r.a(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(p.a),Ot=n(66);function Rt(e,t){return arguments.length>=2?function(n){return Object(Ot.a)(kt(e,t),bt(1),oe(t))(n)}:function(t){return Object(Ot.a)(kt((function(t,n,r){return e(t,n,r+1)})),bt(1))(t)}}function xt(e){return Rt("function"==typeof e?function(t,n){return e(t,n)>0?t:n}:function(e,t){return e>t?e:t})}var Nt=n(119);function jt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(Nt.a.apply(void 0,[t].concat(e)))}}var Ft=n(83);function Ut(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?Object(q.b)((function(){return e}),t,n):("number"==typeof t&&(n=t),Object(q.b)((function(){return e}),n))}function Bt(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new Yt(e,t,n))}}var Yt=function(){function e(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}return e.prototype.call=function(e,t){return t.subscribe(new Ht(e,this.accumulator,this.seed,this.concurrent))},e}(),Ht=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.accumulator=n,a.acc=r,a.concurrent=i,a.hasValue=!1,a.hasCompleted=!1,a.buffer=[],a.active=0,a.index=0,a}return r.a(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,n=this.destination,r=void 0;try{r=(0,this.accumulator)(this.acc,e,t)}catch(e){return n.error(e)}this.active++,this._innerSub(r)}else this.buffer.push(e)},t.prototype._innerSub=function(e){var t=new i.a(this),n=this.destination;n.add(t);var r=Object(i.c)(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},t.prototype.notifyNext=function(e){var t=this.destination;this.acc=e,this.hasValue=!0,t.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},t}(i.b);function Vt(e){return Rt("function"==typeof e?function(t,n){return e(t,n)<0?t:n}:function(e,t){return e<t?e:t})}var Gt=n(114);function Kt(e,t){return function(n){var r;if(r="function"==typeof e?e:function(){return e},"function"==typeof t)return n.lift(new Wt(r,t));var i=Object.create(n,Gt.b);return i.source=n,i.subjectFactory=r,i}}var Wt=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}(),qt=n(116);function zt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&Object(Y.a)(e[0])&&(e=e[0]),function(t){return t.lift(new Xt(e))}}var Xt=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t.subscribe(new Qt(e,this.nextSources))},e}(),Qt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.nextSources=n,r}return r.a(t,e),t.prototype.notifyError=function(){this.subscribeToNextSource()},t.prototype.notifyComplete=function(){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource(),this.unsubscribe()},t.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();if(e){var t=new i.a(this),n=this.destination;n.add(t);var r=Object(i.c)(e,t);r!==t&&n.add(r)}else this.destination.complete()},t}(i.b);function $t(){return function(e){return e.lift(new Jt)}}var Jt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Zt(e))},e}(),Zt=function(e){function t(t){var n=e.call(this,t)||this;return n.hasPrev=!1,n}return r.a(t,e),t.prototype._next=function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)},t}(p.a),en=n(127);function tn(e,t){return function(n){return[Object(Ie.a)(e,t)(n),Object(Ie.a)(Object(en.a)(e,t))(n)]}}function nn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(t){return Object($e.a)(function(e,t){return function(n){for(var r=n,i=0;i<t;i++){var a=null!=r?r[e[i]]:void 0;if(void 0===a)return;r=a}return r}}(e,n))(t)}}var rn=n(17);function an(e){return e?Kt((function(){return new rn.a}),e):Kt(new rn.a)}var on=n(115);function sn(e){return function(t){return Kt(new on.a(e))(t)}}var un=n(51);function ln(){return function(e){return Kt(new un.a)(e)}}var cn=n(80);function dn(e,t,n,r){n&&"function"!=typeof n&&(r=n);var i="function"==typeof n?n:void 0,a=new cn.a(e,t,r);return function(e){return Kt((function(){return a}),i)(e)}}var fn=n(120);function hn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return 1===e.length&&Object(Y.a)(e[0])&&(e=e[0]),t.lift.call(fn.a.apply(void 0,[t].concat(e)))}}function pn(e){return void 0===e&&(e=-1),function(t){return 0===e?Object(Fe.b)():e<0?t.lift(new mn(-1,t)):t.lift(new mn(e-1,t))}}var mn=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new gn(e,this.count,this.source))},e}(),gn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return r.a(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this.source,n=this.count;if(0===n)return e.prototype.complete.call(this);n>-1&&(this.count=n-1),t.subscribe(this._unsubscribeAndRecycle())}},t}(p.a);function vn(e){return function(t){return t.lift(new yn(e))}}var yn=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new _n(e,this.notifier,t))},e}(),_n=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return r.a(t,e),t.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},t.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return e.prototype.complete.call(this)},t.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return e.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},t.prototype._unsubscribe=function(){var e=this.notifications,t=this.retriesSubscription;e&&(e.unsubscribe(),this.notifications=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,e.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},t.prototype.subscribeToRetries=function(){var t;this.notifications=new rn.a;try{t=(0,this.notifier)(this.notifications)}catch(t){return e.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=Object(i.c)(t,new i.a(this))},t}(i.b);function bn(e){return void 0===e&&(e=-1),function(t){return t.lift(new Tn(e,t))}}var Tn=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new En(e,this.count,this.source))},e}(),En=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.count=n,i.source=r,i}return r.a(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return e.prototype.error.call(this,t);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},t}(p.a);function Sn(e){return function(t){return t.lift(new wn(e,t))}}var wn=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new An(e,this.notifier,this.source))},e}(),An=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i}return r.a(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,a=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{n=new rn.a;try{r=(0,this.notifier)(n)}catch(t){return e.prototype.error.call(this,t)}a=Object(i.c)(r,new i.a(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=a,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(i.b),Mn=n(79);function Ln(e){return function(t){return t.lift(new Cn(e))}}var Cn=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new Dn(e),r=t.subscribe(n);return r.add(Object(i.c)(this.notifier,new i.a(n))),r},e}(),Dn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasValue=!1,t}return r.a(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(i.b);function kn(e,t){return void 0===t&&(t=u.a),function(n){return n.lift(new Pn(e,t))}}var Pn=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new In(e,this.period,this.scheduler))},e}(),In=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(On,n,{subscriber:i,period:n})),i}return r.a(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(p.a);function On(e){var t=e.subscriber,n=e.period;t.notifyNext(),this.schedule(e,n)}function Rn(e,t){return function(n){return n.lift(new xn(e,t))}}var xn=function(){function e(e,t){this.compareTo=e,this.comparator=t}return e.prototype.call=function(e,t){return t.subscribe(new Nn(e,this.compareTo,this.comparator))},e}(),Nn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.compareTo=n,i.comparator=r,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(n.subscribe(new jn(t,i))),i}return r.a(t,e),t.prototype._next=function(e){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(e),this.checkValues())},t.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},t.prototype.checkValues=function(){for(var e=this._a,t=this._b,n=this.comparator;e.length>0&&t.length>0;){var r=e.shift(),i=t.shift(),a=!1;try{a=n?n(r,i):r===i}catch(e){this.destination.error(e)}a||this.emit(!1)}},t.prototype.emit=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype.nextB=function(e){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(e),this.checkValues())},t.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},t}(p.a),jn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.parent=n,r}return r.a(t,e),t.prototype._next=function(e){this.parent.nextB(e)},t.prototype._error=function(e){this.parent.error(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},t}(p.a);function Fn(){return new rn.a}function Un(){return function(e){return Object(Mn.a)()(Kt(Fn)(e))}}function Bn(e,t,n){var r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,a=e.windowTime,o=void 0===a?Number.POSITIVE_INFINITY:a,s=e.refCount,u=e.scheduler,l=0,c=!1,d=!1;return function(e){var r;l++,!t||c?(c=!1,t=new cn.a(i,o,u),r=t.subscribe(this),n=e.subscribe({next:function(e){t.next(e)},error:function(e){c=!0,t.error(e)},complete:function(){d=!0,n=void 0,t.complete()}}),d&&(n=void 0)):r=t.subscribe(this),this.add((function(){l--,r.unsubscribe(),r=void 0,n&&!d&&s&&0===l&&(n.unsubscribe(),n=void 0,t=void 0)}))}}(r))}}function Yn(e){return function(t){return t.lift(new Hn(e,t))}}var Hn=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new Vn(e,this.predicate,this.source))},e}(),Vn=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return r.a(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.index++;this.predicate?this.tryNext(e,t):this.applySingleValue(e)},t.prototype.tryNext=function(e,t){try{this.predicate(e,t,this.source)&&this.applySingleValue(e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new Oe.a)},t}(p.a);function Gn(e){return function(t){return t.lift(new Kn(e))}}var Kn=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t.subscribe(new Wn(e,this.total))},e}(),Wn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return r.a(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(p.a);function qn(e){return function(t){return t.lift(new zn(e))}}var zn=function(){function e(e){if(this._skipCount=e,this._skipCount<0)throw new Pe.a}return e.prototype.call=function(e,t){return 0===this._skipCount?t.subscribe(new p.a(e)):t.subscribe(new Xn(e,this._skipCount))},e}(),Xn=function(e){function t(t,n){var r=e.call(this,t)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return r.a(t,e),t.prototype._next=function(e){var t=this._skipCount,n=this._count++;if(n<t)this._ring[n]=e;else{var r=n%t,i=this._ring,a=i[r];i[r]=e,this.destination.next(a)}},t}(p.a);function Qn(e){return function(t){return t.lift(new $n(e))}}var $n=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t.subscribe(new Jn(e,this.notifier))},e}(),Jn=function(e){function t(t,n){var r=e.call(this,t)||this;r.hasValue=!1;var a=new i.a(r);r.add(a),r.innerSubscription=a;var o=Object(i.c)(n,a);return o!==a&&(r.add(o),r.innerSubscription=o),r}return r.a(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},t.prototype.notifyComplete=function(){},t}(i.b);function Zn(e){return function(t){return t.lift(new er(e))}}var er=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new tr(e,this.predicate))},e}(),tr=function(e){function t(t,n){var r=e.call(this,t)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return r.a(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},t}(p.a);function nr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Object(_.a)(n)?(e.pop(),function(t){return Object(G.a)(e,t,n)}):function(t){return Object(G.a)(e,t)}}var rr=n(67),ir=n(53),ar=function(e){function t(t,n,r){void 0===n&&(n=0),void 0===r&&(r=rr.a);var i=e.call(this)||this;return i.source=t,i.delayTime=n,i.scheduler=r,(!Object(ir.a)(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=rr.a),i}return r.a(t,e),t.create=function(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=rr.a),new t(e,n,r)},t.dispatch=function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))},t.prototype._subscribe=function(e){var n=this.delayTime,r=this.source;return this.scheduler.schedule(t.dispatch,n,{source:r,subscriber:e})},t}(me.a);function or(e,t){return void 0===t&&(t=0),function(n){return n.lift(new sr(e,t))}}var sr=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new ar(t,this.delay,this.scheduler).subscribe(e)},e}();function ur(e,t){return"function"==typeof t?function(n){return n.pipe(ur((function(n,r){return Object(H.a)(e(n,r)).pipe(Object($e.a)((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new lr(e))}}var lr=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new cr(e,this.project))},e}(),cr=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return r.a(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this._innerSub(t)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new i.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(i.c)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(i.b);function dr(){return ur(dt.a)}function fr(e,t){return t?ur((function(){return e}),t):ur((function(){return e}))}function hr(e){return function(t){return t.lift(new pr(e))}}var pr=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new mr(e),r=Object(i.c)(this.notifier,new i.a(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),mr=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return r.a(t,e),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(i.b);function gr(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new vr(e,t))}}var vr=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new yr(e,this.predicate,this.inclusive))},e}(),yr=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return r.a(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void n.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(p.a),_r=n(39),br=n(46);function Tr(e,t,n){return function(r){return r.lift(new Er(e,t,n))}}var Er=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new Sr(e,this.nextOrObserver,this.error,this.complete))},e}(),Sr=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a._tapNext=_r.a,a._tapError=_r.a,a._tapComplete=_r.a,a._tapError=r||_r.a,a._tapComplete=i||_r.a,Object(br.a)(n)?(a._context=a,a._tapNext=n):n&&(a._context=n,a._tapNext=n.next||_r.a,a._tapError=n.error||_r.a,a._tapComplete=n.complete||_r.a),a}return r.a(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(p.a),wr={leading:!0,trailing:!1};function Ar(e,t){return void 0===t&&(t=wr),function(n){return n.lift(new Mr(e,!!t.leading,!!t.trailing))}}var Mr=function(){function e(e,t,n){this.durationSelector=e,this.leading=t,this.trailing=n}return e.prototype.call=function(e,t){return t.subscribe(new Lr(e,this.durationSelector,this.leading,this.trailing))},e}(),Lr=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.destination=t,a.durationSelector=n,a._leading=r,a._trailing=i,a._hasValue=!1,a}return r.a(t,e),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this._hasValue,t=this._sendValue;e&&(this.destination.next(t),this.throttle(t)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){var t=this.tryDurationSelector(e);t&&this.add(this._throttled=Object(i.c)(t,new i.a(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype.throttlingDone=function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()},t}(i.b);function Cr(e,t,n){return void 0===t&&(t=u.a),void 0===n&&(n=wr),function(r){return r.lift(new Dr(e,t,n.leading,n.trailing))}}var Dr=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new kr(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),kr=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;return o.duration=n,o.scheduler=r,o.leading=i,o.trailing=a,o._hasTrailingValue=!1,o._trailingValue=null,o}return r.a(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Pr,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(p.a);function Pr(e){e.subscriber.clearThrottle()}var Ir=n(84);function Or(e){return void 0===e&&(e=u.a),function(t){return Object(Ir.a)((function(){return t.pipe(kt((function(t,n){var r=t.current;return{value:n,current:e.now(),last:r}}),{current:e.now(),value:void 0,last:void 0}),Object($e.a)((function(e){var t=e.current,n=e.last,r=e.value;return new Rr(r,t-n)})))}))}}var Rr=function(){return function(e,t){this.value=e,this.interval=t}}(),xr=n(117);function Nr(e,t,n){return void 0===n&&(n=u.a),function(r){var i=le(e),a=i?+e-n.now():Math.abs(e);return r.lift(new jr(a,i,t,n))}}var jr=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new Fr(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),Fr=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;return o.absoluteTimeout=n,o.waitFor=r,o.withObservable=i,o.scheduler=a,o.scheduleTimeout(),o}return r.a(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Object(i.c)(t,new i.a(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},t}(i.b),Ur=n(81);function Br(e,t){return void 0===t&&(t=u.a),Nr(e,Object(Ur.a)(new xr.a),t)}function Yr(e){return void 0===e&&(e=u.a),Object($e.a)((function(t){return new Hr(t,e.now())}))}var Hr=function(){return function(e,t){this.value=e,this.timestamp=t}}();function Vr(e,t,n){return 0===n?[t]:(e.push(t),e)}function Gr(){return Rt(Vr,[])}function Kr(e){return function(t){return t.lift(new Wr(e))}}var Wr=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var n=new qr(e),r=t.subscribe(n);return r.closed||n.add(Object(i.c)(this.windowBoundaries,new i.a(n))),r},e}(),qr=function(e){function t(t){var n=e.call(this,t)||this;return n.window=new rn.a,t.next(n.window),n}return r.a(t,e),t.prototype.notifyNext=function(){this.openWindow()},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,n=this.window=new rn.a;t.next(n)},t}(i.b);function zr(e,t){return void 0===t&&(t=0),function(n){return n.lift(new Xr(e,t))}}var Xr=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t.subscribe(new Qr(e,this.windowSize,this.startWindowEvery))},e}(),Qr=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.destination=t,i.windowSize=n,i.startWindowEvery=r,i.windows=[new rn.a],i.count=0,t.next(i.windows[0]),i}return r.a(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,a=i.length,o=0;o<a&&!this.closed;o++)i[o].next(e);var s=this.count-r+1;if(s>=0&&s%t==0&&!this.closed&&i.shift().complete(),++this.count%t==0&&!this.closed){var u=new rn.a;i.push(u),n.next(u)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(p.a);function $r(e){var t=u.a,n=null,r=Number.POSITIVE_INFINITY;return Object(_.a)(arguments[3])&&(t=arguments[3]),Object(_.a)(arguments[2])?t=arguments[2]:Object(ir.a)(arguments[2])&&(r=Number(arguments[2])),Object(_.a)(arguments[1])?t=arguments[1]:Object(ir.a)(arguments[1])&&(n=Number(arguments[1])),function(i){return i.lift(new Jr(e,n,r,t))}}var Jr=function(){function e(e,t,n,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new ei(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},e}(),Zr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return r.a(t,e),t.prototype.next=function(t){this._numberOfNextedValues++,e.prototype.next.call(this,t)},Object.defineProperty(t.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),t}(rn.a),ei=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;o.destination=t,o.windowTimeSpan=n,o.windowCreationInterval=r,o.maxWindowSize=i,o.scheduler=a,o.windows=[];var s=o.openWindow();if(null!==r&&r>=0){var u={subscriber:o,window:s,context:null},l={windowTimeSpan:n,windowCreationInterval:r,subscriber:o,scheduler:a};o.add(a.schedule(ri,n,u)),o.add(a.schedule(ni,r,l))}else{var c={subscriber:o,window:s,windowTimeSpan:n};o.add(a.schedule(ti,n,c))}return o}return r.a(t,e),t.prototype._next=function(e){for(var t=this.windows,n=t.length,r=0;r<n;r++){var i=t[r];i.closed||(i.next(e),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.closed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new Zr;return this.windows.push(e),this.destination.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(p.a);function ti(e){var t=e.subscriber,n=e.windowTimeSpan,r=e.window;r&&t.closeWindow(r),e.window=t.openWindow(),this.schedule(e,n)}function ni(e){var t=e.windowTimeSpan,n=e.subscriber,r=e.scheduler,i=e.windowCreationInterval,a=n.openWindow(),o={action:this,subscription:null},s={subscriber:n,window:a,context:o};o.subscription=r.schedule(ri,t,s),this.add(o.subscription),this.schedule(e,i)}function ri(e){var t=e.subscriber,n=e.window,r=e.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),t.closeWindow(n)}function ii(e,t){return function(n){return n.lift(new ai(e,t))}}var ai=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t.subscribe(new oi(e,this.openings,this.closingSelector))},e}(),oi=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=Object(C.a)(i,n,n)),i}return r.a(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var n=t.length,r=0;r<n;r++)t[r].window.next(e)},t.prototype._error=function(t){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var a=n[i];a.window.error(t),a.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var n=t.length,r=-1;++r<n;){var i=t[r];i.window.complete(),i.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,n=-1;++n<t;){var r=e[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,n,r,i){if(e===this.openings){var a=void 0;try{a=(0,this.closingSelector)(t)}catch(e){return this.error(e)}var o=new rn.a,s=new L.a,u={window:o,subscription:s};this.contexts.push(u);var l=Object(C.a)(this,a,u);l.closed?this.closeWindow(this.contexts.length-1):(l.context=u,s.add(l)),this.destination.next(o)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,n=t[e],r=n.window,i=n.subscription;t.splice(e,1),r.complete(),i.unsubscribe()}},t}(D.a);function si(e){return function(t){return t.lift(new ui(e))}}var ui=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new li(e,this.closingSelector))},e}(),li=function(e){function t(t,n){var r=e.call(this,t)||this;return r.destination=t,r.closingSelector=n,r.openWindow(),r}return r.a(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.openWindow(i)},t.prototype.notifyError=function(e){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var n,r=this.window=new rn.a;this.destination.next(r);try{n=(0,this.closingSelector)()}catch(e){return this.destination.error(e),void this.window.error(e)}this.add(this.closingNotification=Object(C.a)(this,n))},t}(D.a);function ci(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;"function"==typeof e[e.length-1]&&(n=e.pop());var r=e;return t.lift(new di(r,n))}}var di=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new fi(e,this.observables,this.project))},e}(),fi=function(e){function t(t,n,r){var i=e.call(this,t)||this;i.observables=n,i.project=r,i.toRespond=[];var a=n.length;i.values=new Array(a);for(var o=0;o<a;o++)i.toRespond.push(o);for(o=0;o<a;o++){var s=n[o];i.add(Object(C.a)(i,s,void 0,o))}return i}return r.a(t,e),t.prototype.notifyNext=function(e,t,n){this.values[n]=t;var r=this.toRespond;if(r.length>0){var i=r.indexOf(n);-1!==i&&r.splice(i,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(D.a),hi=n(85);function pi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(hi.b.apply(void 0,[t].concat(e)))}}function mi(e){return function(t){return t.lift(new hi.a(e))}}n.d(t,"audit",(function(){return a})),n.d(t,"auditTime",(function(){return c})),n.d(t,"buffer",(function(){return d})),n.d(t,"bufferCount",(function(){return m})),n.d(t,"bufferTime",(function(){return b})),n.d(t,"bufferToggle",(function(){return k})),n.d(t,"bufferWhen",(function(){return O})),n.d(t,"catchError",(function(){return N})),n.d(t,"combineAll",(function(){return B})),n.d(t,"combineLatest",(function(){return V})),n.d(t,"concat",(function(){return K})),n.d(t,"concatAll",(function(){return W.a})),n.d(t,"concatMap",(function(){return z})),n.d(t,"concatMapTo",(function(){return X})),n.d(t,"count",(function(){return Q})),n.d(t,"debounce",(function(){return Z})),n.d(t,"debounceTime",(function(){return ne})),n.d(t,"defaultIfEmpty",(function(){return oe})),n.d(t,"delay",(function(){return de})),n.d(t,"delayWhen",(function(){return ge})),n.d(t,"dematerialize",(function(){return Te})),n.d(t,"distinct",(function(){return we})),n.d(t,"distinctUntilChanged",(function(){return Le})),n.d(t,"distinctUntilKeyChanged",(function(){return ke})),n.d(t,"elementAt",(function(){return He})),n.d(t,"endWith",(function(){return Ge})),n.d(t,"every",(function(){return Ke})),n.d(t,"exhaust",(function(){return ze})),n.d(t,"exhaustMap",(function(){return Je})),n.d(t,"expand",(function(){return tt})),n.d(t,"filter",(function(){return Ie.a})),n.d(t,"finalize",(function(){return it})),n.d(t,"find",(function(){return st})),n.d(t,"findIndex",(function(){return ct})),n.d(t,"first",(function(){return ft})),n.d(t,"groupBy",(function(){return ht.b})),n.d(t,"ignoreElements",(function(){return pt})),n.d(t,"isEmpty",(function(){return vt})),n.d(t,"last",(function(){return St})),n.d(t,"map",(function(){return $e.a})),n.d(t,"mapTo",(function(){return wt})),n.d(t,"materialize",(function(){return Lt})),n.d(t,"max",(function(){return xt})),n.d(t,"merge",(function(){return jt})),n.d(t,"mergeAll",(function(){return Ft.a})),n.d(t,"mergeMap",(function(){return q.b})),n.d(t,"flatMap",(function(){return q.a})),n.d(t,"mergeMapTo",(function(){return Ut})),n.d(t,"mergeScan",(function(){return Bt})),n.d(t,"min",(function(){return Vt})),n.d(t,"multicast",(function(){return Kt})),n.d(t,"observeOn",(function(){return qt.b})),n.d(t,"onErrorResumeNext",(function(){return zt})),n.d(t,"pairwise",(function(){return $t})),n.d(t,"partition",(function(){return tn})),n.d(t,"pluck",(function(){return nn})),n.d(t,"publish",(function(){return an})),n.d(t,"publishBehavior",(function(){return sn})),n.d(t,"publishLast",(function(){return ln})),n.d(t,"publishReplay",(function(){return dn})),n.d(t,"race",(function(){return hn})),n.d(t,"reduce",(function(){return Rt})),n.d(t,"repeat",(function(){return pn})),n.d(t,"repeatWhen",(function(){return vn})),n.d(t,"retry",(function(){return bn})),n.d(t,"retryWhen",(function(){return Sn})),n.d(t,"refCount",(function(){return Mn.a})),n.d(t,"sample",(function(){return Ln})),n.d(t,"sampleTime",(function(){return kn})),n.d(t,"scan",(function(){return kt})),n.d(t,"sequenceEqual",(function(){return Rn})),n.d(t,"share",(function(){return Un})),n.d(t,"shareReplay",(function(){return Bn})),n.d(t,"single",(function(){return Yn})),n.d(t,"skip",(function(){return Gn})),n.d(t,"skipLast",(function(){return qn})),n.d(t,"skipUntil",(function(){return Qn})),n.d(t,"skipWhile",(function(){return Zn})),n.d(t,"startWith",(function(){return nr})),n.d(t,"subscribeOn",(function(){return or})),n.d(t,"switchAll",(function(){return dr})),n.d(t,"switchMap",(function(){return ur})),n.d(t,"switchMapTo",(function(){return fr})),n.d(t,"take",(function(){return Ue})),n.d(t,"takeLast",(function(){return bt})),n.d(t,"takeUntil",(function(){return hr})),n.d(t,"takeWhile",(function(){return gr})),n.d(t,"tap",(function(){return Tr})),n.d(t,"throttle",(function(){return Ar})),n.d(t,"throttleTime",(function(){return Cr})),n.d(t,"throwIfEmpty",(function(){return Re})),n.d(t,"timeInterval",(function(){return Or})),n.d(t,"timeout",(function(){return Br})),n.d(t,"timeoutWith",(function(){return Nr})),n.d(t,"timestamp",(function(){return Yr})),n.d(t,"toArray",(function(){return Gr})),n.d(t,"window",(function(){return Kr})),n.d(t,"windowCount",(function(){return zr})),n.d(t,"windowTime",(function(){return $r})),n.d(t,"windowToggle",(function(){return ii})),n.d(t,"windowWhen",(function(){return si})),n.d(t,"withLatestFrom",(function(){return ci})),n.d(t,"zip",(function(){return pi})),n.d(t,"zipAll",(function(){return mi}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(491),t),r.__exportStar(n(492),t),r.__exportStar(n(162),t)},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));var r=n(1),i=n(7),a=n(5),o=n(14),s=n(42),u=n(123),l=n(68),c=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r.a(t,e),t}(a.a),d=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.a(t,e),t.prototype[l.a]=function(){return new c(this)},t.prototype.lift=function(e){var t=new f(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.a;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.a;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.a;return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.isStopped?(e.complete(),o.a.EMPTY):(this.observers.push(e),new u.a(this,e))},t.prototype.asObservable=function(){var e=new i.a;return e.source=this,e},t.create=function(e,t){return new f(e,t)},t}(i.a),f=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r.a(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):o.a.EMPTY},t}(d)},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n(52),i=new(n(50).a)(r.a),a=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(40),t),r.__exportStar(n(8),t),r.__exportStar(n(100),t),r.__exportStar(n(197),t),r.__exportStar(n(671),t),r.__exportStar(n(142),t)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return a})),n.d(t,"__rest",(function(){return o})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return l})),n.d(t,"__awaiter",(function(){return c})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return h})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return m})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return v})),n.d(t,"__spreadArray",(function(){return y})),n.d(t,"__await",(function(){return _})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return T})),n.d(t,"__asyncValues",(function(){return E})),n.d(t,"__makeTemplateObject",(function(){return S})),n.d(t,"__importStar",(function(){return A})),n.d(t,"__importDefault",(function(){return M})),n.d(t,"__classPrivateFieldGet",(function(){return L})),n.d(t,"__classPrivateFieldSet",(function(){return C}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var f=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function h(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function y(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof _?Promise.resolve(n.value.v).then(u,l):c(a[0][2],n)}catch(e){c(a[0][3],e)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function T(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var w=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&f(t,e,n);return w(t,e),t}function M(e){return e&&e.__esModule?e:{default:e}}function L(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function C(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),i=n(5);function a(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(e,t))}}var o=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}(),s=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.a(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(920),t),r.__exportStar(n(245),t),r.__exportStar(n(246),t),r.__exportStar(n(247),t),r.__exportStar(n(921),t),r.__exportStar(n(248),t),r.__exportStar(n(922),t),r.__exportStar(n(923),t),r.__exportStar(n(924),t),r.__exportStar(n(925),t),r.__exportStar(n(926),t),r.__exportStar(n(927),t),r.__exportStar(n(928),t),r.__exportStar(n(929),t),r.__exportStar(n(930),t),r.__exportStar(n(931),t),r.__exportStar(n(249),t),r.__exportStar(n(250),t),r.__exportStar(n(932),t),r.__exportStar(n(251),t),r.__exportStar(n(933),t),r.__exportStar(n(934),t),r.__exportStar(n(935),t),r.__exportStar(n(936),t),r.__exportStar(n(937),t),r.__exportStar(n(938),t),r.__exportStar(n(939),t)},function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(7),i=new r.a((function(e){return e.complete()}));function a(e){return e?function(e){return new r.a((function(t){return e.schedule((function(){return t.complete()}))}))}(e):i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),i=n(56),a=n(122);function o(e,t){return t?Object(a.a)(e,t):e instanceof r.a?e:new r.a(Object(i.a)(e))}},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return a})),n.d(t,"__rest",(function(){return o})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return l})),n.d(t,"__awaiter",(function(){return c})),n.d(t,"__generator",(function(){return d})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return g})),n.d(t,"__await",(function(){return v})),n.d(t,"__asyncGenerator",(function(){return y})),n.d(t,"__asyncDelegator",(function(){return _})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return T})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return S}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof v?Promise.resolve(n.value.v).then(u,l):c(a[0][2],n)}catch(e){c(a[0][3],e)}var n}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function _(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:v(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsItem=void 0;var r=n(2).__importDefault(n(3)),i=n(13);t.SettingsItem=function(e){var t=e.children,n=e.onClick,a=e.classNames;return r.default.createElement("div",{className:i.css("ds-settings-menu__item",a),onClick:n},t)}},function(e,t,n){"use strict";var r=n(1),i=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.a(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n(5).a),a=n(56),o=n(7);function s(e,t,n,r,s){if(void 0===s&&(s=new i(e,n,r)),!s.closed)return t instanceof o.a?t.subscribe(s):Object(a.a)(t)(s)}n.d(t,"a",(function(){return s}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsHeading=void 0;var r=n(2).__importDefault(n(3)),i=n(13),a=n(248);t.SettingsHeading=function(e){var t=e.children,n=e.classNames,o=e.onClick,s=e.withIcon,u=void 0===s||s;return r.default.createElement("div",{className:i.css("ds-settings-menu__heading",n),onClick:o},u&&r.default.createElement("span",{className:"icon-wrapper"},r.default.createElement(a.ChevronLeft,null)),t)}},function(e,t,n){"use strict";function r(e){return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(629),t),r.__exportStar(n(630),t),r.__exportStar(n(631),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsActiveItem=void 0;var r=n(2).__importDefault(n(3)),i=n(23);t.SettingsActiveItem=function(e){return e.isActive?r.default.createElement("span",{className:"ds-settings-menu__active-item"},r.default.createElement(i.CheckIcon,null)):null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n(5).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),i=n(5);function a(e,t){return function(n){return n.lift(new o(e,t))}}var o=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))},e}(),s=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r.a(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(i.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var r,i=n(25),a=n(59),o=n(81);r||(r={});var s=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Object(a.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(i.b)()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},function(e,t,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,"a",(function(){return i}));var i=r()},function(e,t,n){"use strict";function r(){}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(469),t),r.__exportStar(n(470),t),r.__exportStar(n(471),t),r.__exportStar(n(472),t),r.__exportStar(n(645),t),r.__exportStar(n(646),t),r.__exportStar(n(157),t),r.__exportStar(n(647),t)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(61),t),r.__exportStar(n(70),t),r.__exportStar(n(16),t),r.__exportStar(n(169),t),r.__exportStar(n(170),t),r.__exportStar(n(181),t),r.__exportStar(n(182),t),r.__exportStar(n(71),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(291),t),r.__exportStar(n(950),t),r.__exportStar(n(951),t),r.__exportStar(n(952),t),r.__exportStar(n(953),t),r.__exportStar(n(954),t),r.__exportStar(n(955),t),r.__exportStar(n(956),t)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n(1),i=n(22),a=n(26),o=n(6);function s(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(s((function(n,r){return Object(a.a)(e(n,r)).pipe(Object(i.a)((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new u(e,n))})}var u=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.project,this.concurrent))},e}(),l=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.a(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new o.a(this),n=this.destination;n.add(t);var r=Object(o.c)(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.b),c=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),i=n(124),a=n(88);function o(e,t){return t?Object(a.a)(e,t):new r.a(Object(i.a)(e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),i=n(96),a=function(e){function t(n,r){void 0===r&&(r=i.a.now);var a=e.call(this,n,(function(){return t.delegate&&t.delegate!==a?t.delegate.now():r()}))||this;return a.actions=[],a.active=!1,a.scheduled=void 0,a}return r.a(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1),i=n(17),a=n(14),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return r.a(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),a.a.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(i.a)},function(e,t,n){"use strict";var r=n(1),i=function(e){function t(t,n){return e.call(this)||this}return r.a(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(n(14).a);n.d(t,"a",(function(){return a}));var a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return r.a(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(i)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(19);function i(e){return!Object(r.a)(e)&&e-parseFloat(e)+1>=0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(788),t),r.__exportStar(n(144),t),r.__exportStar(n(211),t),r.__exportStar(n(74),t),r.__exportStar(n(846),t),r.__exportStar(n(217),t),r.__exportStar(n(867),t),r.__exportStar(n(220),t),r.__exportStar(n(877),t),r.__exportStar(n(879),t)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(59),i=n(118);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(i.a)()(r.a.apply(void 0,e))}},function(e,t,n){"use strict";var r=n(124),i=n(57),a=n(38),o=n(41),s=n(125),u=n(126),l=n(86);n.d(t,"a",(function(){return c}));var c=function(e){if(e&&"function"==typeof e[o.a])return c=e,function(e){var t=c[o.a]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Object(s.a)(e))return Object(r.a)(e);if(Object(u.a)(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,i.a),e};if(e&&"function"==typeof e[a.a])return t=e,function(e){for(var n=t[a.a]();;){var r=void 0;try{r=n.next()}catch(t){return e.error(t),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,c,d=Object(l.a)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+d+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(e,t,n){"use strict";function r(e){setTimeout((function(){throw e}),0)}n.d(t,"a",(function(){return r}))},function(e,t,n){var r;"undefined"!=typeof window&&(r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||e,a),u=i?i+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},l.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,r,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,a),!0;case 6:return c.fn.call(c.context,t,n,r,a,o),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,r);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,r){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||u(this,a);else{for(var s=0,l=[],c=o.length;s<c;s++)(o[s].fn!==t||r&&!o[s].once||n&&o[s].context!==n)&&l.push(o[s]);l.length?this._events[a]=1===l.length?l[0]:l:u(this,a)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&u(this,t)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,n){var r,i,a,o,s;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,i=/^([^\/?#]*)([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var u=i.exec(o.path);o.netLoc=u[1],o.path=u[2]}o.netLoc&&!o.path&&(o.path="/");var l={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=s.normalizePath(d)}else l.path=o.path,a.params||(l.params=o.params,a.query||(l.query=o.query));return null===l.path&&(l.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(l)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},"./node_modules/webworkify-webpack/index.js":function(e,t,n){function r(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}var i="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+i+").*?\\)";function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,r){var s={};s[r]=[];var u=t.toString(),l=u.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return s;for(var c,d=l[1],f=new RegExp("(\\\\n|\\W)"+o(d)+a,"g");c=f.exec(u);)"dll-reference"!==c[3]&&s[r].push(c[3]);for(f=new RegExp("\\("+o(d)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+a,"g");c=f.exec(u);)e[c[2]]||(s[r].push(c[1]),e[c[2]]=n(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var h,p=Object.keys(s),m=0;m<p.length;m++)for(var g=0;g<s[p[m]].length;g++)h=s[p[m]][g],isNaN(1*h)||(s[p[m]][g]=1*s[p[m]][g]);return s}function u(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}e.exports=function(e,t){t=t||{};var i={main:n.m},a=t.all?{main:Object.keys(i.main)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};u(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var l=a[o],c=n[l].pop();if(i[l]=i[l]||{},!i[l][c]&&e[l][c]){i[l][c]=!0,r[l]=r[l]||[],r[l].push(c);for(var d=s(e,e[l][c],l),f=Object.keys(d),h=0;h<f.length;h++)n[f[h]]=n[f[h]]||[],n[f[h]]=n[f[h]].concat(d[f[h]])}}return r}(i,e),o="";Object.keys(a).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;a[e][t];)t++;a[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a[e].map((function(t){return JSON.stringify(t)+": "+i[e][t].toString()})).join(",")+"});\n"})),o=o+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.main.map((function(e){return JSON.stringify(e)+": "+i.main[e].toString()})).join(",")+"}))(self);";var l=new window.Blob([o],{type:"text/javascript"});if(t.bare)return l;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(l),d=new window.Worker(c);return d.objectURL=c,d}},"./src/config.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"hlsDefaultConfig",(function(){return E})),n.d(t,"mergeConfig",(function(){return S})),n.d(t,"enableStreamingMode",(function(){return w}));var r=n("./src/controller/abr-controller.ts"),i=n("./src/controller/audio-stream-controller.ts"),a=n("./src/controller/audio-track-controller.ts"),o=n("./src/controller/subtitle-stream-controller.ts"),s=n("./src/controller/subtitle-track-controller.ts"),u=n("./src/controller/buffer-controller.ts"),l=n("./src/controller/timeline-controller.ts"),c=n("./src/controller/cap-level-controller.ts"),d=n("./src/controller/fps-controller.ts"),f=n("./src/controller/eme-controller.ts"),h=n("./src/utils/xhr-loader.ts"),p=n("./src/utils/fetch-loader.ts"),m=n("./src/utils/cues.ts"),g=n("./src/utils/mediakeys-helper.ts"),v=n("./src/utils/logger.ts");function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=b(b({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:h.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:r.default,bufferController:u.default,capLevelController:c.default,fpsController:d.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:g.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0},{cueHandler:m.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:o.SubtitleStreamController,subtitleTrackController:s.default,timelineController:l.TimelineController,audioStreamController:i.default,audioTrackController:a.default,emeController:f.default});function S(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return y({},e,t)}function w(e){var t=e.loader;t!==p.default&&t!==h.default?(v.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):Object(p.fetchSupported)()&&(e.loader=p.default,e.progressive=!0,e.enableSoftwareAES=!0,v.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/polyfills/number.ts"),i=n("./src/utils/ewma-bandwidth-estimator.ts"),a=n("./src/events.ts"),o=n("./src/utils/buffer-helper.ts"),s=n("./src/errors.ts"),u=n("./src/types/loader.ts"),l=n("./src/utils/logger.ts");function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;var t=e.config;this.bwEstimator=new i.default(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}var t,n,d,f=e.prototype;return f.registerListeners=function(){var e=this.hls;e.on(a.Events.FRAG_LOADING,this.onFragLoading,this),e.on(a.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.ERROR,this.onError,this)},f.unregisterListeners=function(){var e=this.hls;e.off(a.Events.FRAG_LOADING,this.onFragLoading,this),e.off(a.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.ERROR,this.onError,this)},f.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},f.onFragLoading=function(e,t){var n,r=t.frag;r.type===u.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=r,this.partCurrent=null!=(n=t.part)?n:null,this.timer=self.setInterval(this.onCheck,100)))},f.onLevelLoaded=function(e,t){var n=this.hls.config;t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},f._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,i=n.autoLevelEnabled,s=n.config,u=n.media;if(e&&u){var c=t?t.stats:e.stats,d=t?t.duration:e.duration;if(c.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!u.paused&&u.playbackRate&&u.readyState){var f=performance.now()-c.loading.start,h=Math.abs(u.playbackRate);if(!(f<=500*d/h)){var p=n.levels,m=n.minAutoLevel,g=p[e.level],v=c.total||Math.max(c.loaded,Math.round(d*g.maxBitrate/8)),y=Math.max(1,c.bwEstimate?c.bwEstimate/8:1e3*c.loaded/f),_=(v-c.loaded)/y,b=u.currentTime,T=(o.BufferHelper.bufferInfo(u,b,s.maxBufferHole).end-b)/h;if(!(T>=2*d/h||_<=T)){var E,S=Number.POSITIVE_INFINITY;for(E=e.level-1;E>m&&!((S=d*p[E].maxBitrate/(6.4*y))<T);E--);if(!(S>=_)){var w=this.bwEstimator.getEstimate();l.logger.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+E+"\n      Current BW estimate: "+(Object(r.isFiniteNumber)(w)?(w/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+_.toFixed(3)+" s\n      Estimated load time for the next fragment: "+S.toFixed(3)+" s\n      Time to underbuffer: "+T.toFixed(3)+" s"),n.nextLoadLevel=E,this.bwEstimator.sample(f,c.loaded),this.clearTimer(),e.loader&&(this.fragCurrent=this.partCurrent=null,e.loader.abort()),n.trigger(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:c})}}}}}},f.onFragLoaded=function(e,t){var n=t.frag,i=t.part;if(n.type===u.PlaylistLevelType.MAIN&&Object(r.isFiniteNumber)(n.sn)){var o=i?i.stats:n.stats,s=i?i.duration:n.duration;if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var l=this.hls.levels[n.level],c=(l.loaded?l.loaded.bytes:0)+o.loaded,d=(l.loaded?l.loaded.duration:0)+s;l.loaded={bytes:c,duration:d},l.realBitrate=Math.round(8*c/d)}if(n.bitrateTest){var f={stats:o,frag:n,part:i,id:n.type};this.onFragBuffered(a.Events.FRAG_BUFFERED,f),n.bitrateTest=!1}}},f.onFragBuffered=function(e,t){var n=t.frag,r=t.part,i=r?r.stats:n.stats;if(!i.aborted&&n.type===u.PlaylistLevelType.MAIN&&"initSegment"!==n.sn){var a=i.parsing.end-i.loading.start;this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},f.onError=function(e,t){switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},f.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},f.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,r=n.maxAutoLevel,i=n.config,a=n.minAutoLevel,s=n.media,u=t?t.duration:e?e.duration:0,c=s?s.currentTime:0,d=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,f=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,h=(o.BufferHelper.bufferInfo(s,c,i.maxBufferHole).end-c)/d,p=this.findBestLevel(f,a,r,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor);if(p>=0)return p;l.logger.trace((h?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var m=u?Math.min(u,i.maxStarvationDelay):i.maxStarvationDelay,g=i.abrBandWidthFactor,v=i.abrBandWidthUpFactor;if(!h){var y=this.bitrateTestDelay;y&&(m=(u?Math.min(u,i.maxLoadingDelay):i.maxLoadingDelay)-y,l.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*m)+" ms"),g=v=1)}return p=this.findBestLevel(f,a,r,h+m,g,v),Math.max(p,0)},f.findBestLevel=function(e,t,n,r,i,a){for(var o,s=this.fragCurrent,u=this.partCurrent,c=this.lastLoadedFragLevel,d=this.hls.levels,f=d[c],h=!(null==f||null===(o=f.details)||void 0===o||!o.live),p=null==f?void 0:f.codecSet,m=u?u.duration:s?s.duration:0,g=n;g>=t;g--){var v=d[g];if(v&&(!p||v.codecSet===p)){var y=v.details,_=(u?null==y?void 0:y.partTarget:null==y?void 0:y.averagetargetduration)||m,b=void 0;b=g<=c?i*e:a*e;var T=d[g].maxBitrate,E=T*_/b;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+g+"/"+Math.round(b)+"/"+T+"/"+_+"/"+r+"/"+E),b>T&&(!E||h&&!this.bitrateTestDelay||E<r))return g}}return-1},t=e,(n=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this.getNextABRAutoLevel();return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}}])&&c(t.prototype,n),d&&c(t,d),e}();t.default=d},"./src/controller/audio-stream-controller.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/polyfills/number.ts"),i=n("./src/controller/base-stream-controller.ts"),a=n("./src/events.ts"),o=n("./src/utils/buffer-helper.ts"),s=n("./src/controller/fragment-tracker.ts"),u=n("./src/types/level.ts"),l=n("./src/types/loader.ts"),c=n("./src/loader/fragment.ts"),d=n("./src/demux/chunk-cache.ts"),f=n("./src/demux/transmuxer-interface.ts"),h=n("./src/types/transmuxer.ts"),p=n("./src/controller/fragment-finders.ts"),m=n("./src/utils/discontinuities.ts"),g=n("./src/errors.ts"),v=n("./src/utils/logger.ts");function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){var t,n;function b(t,n){var r;return(r=e.call(this,t,n,"[audio-stream-controller]")||this).videoBuffer=null,r.videoTrackCC=-1,r.waitingVideoCC=-1,r.audioSwitch=!1,r.trackId=-1,r.waitingData=null,r.mainDetails=null,r.bufferFlushed=!1,r._registerListeners(),r}n=e,(t=b).prototype=Object.create(n.prototype),t.prototype.constructor=t,_(t,n);var T=b.prototype;return T.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},T._registerListeners=function(){var e=this.hls;e.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(a.Events.ERROR,this.onError,this),e.on(a.Events.BUFFER_RESET,this.onBufferReset,this),e.on(a.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},T._unregisterListeners=function(){var e=this.hls;e.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(a.Events.ERROR,this.onError,this),e.off(a.Events.BUFFER_RESET,this.onBufferReset,this),e.off(a.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},T.onInitPtsFound=function(e,t){var n=t.frag,r=t.id,a=t.initPTS;if("main"===r){var o=n.cc;this.initPTS[n.cc]=a,this.log("InitPTS for cc: "+o+" found from main: "+a),this.videoTrackCC=o,this.state===i.State.WAITING_INIT_PTS&&this.tick()}},T.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=i.State.STOPPED);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=i.State.IDLE):(this.loadedmetadata=!1,this.state=i.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},T.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_TRACK:var t,n=this.levels,r=this.trackId,a=null==n?void 0:null===(t=n[r])||void 0===t?void 0:t.details;if(a){if(this.waitForCdnTuneIn(a))break;this.state=i.State.WAITING_INIT_PTS}break;case i.State.FRAG_LOADING_WAITING_RETRY:var s,u=performance.now(),l=this.retryDate;(!l||u>=l||null!==(s=this.media)&&void 0!==s&&s.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=i.State.IDLE);break;case i.State.WAITING_INIT_PTS:var c=this.waitingData;if(c){var d=c.frag,f=c.part,h=c.cache,m=c.complete;if(void 0!==this.initPTS[d.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.FRAG_LOADING;var g={frag:d,part:f,payload:h.flush(),networkDetails:null};this._handleFragmentLoadProgress(g),m&&e.prototype._handleFragmentLoadComplete.call(this,g)}else if(this.videoTrackCC!==this.waitingVideoCC)v.logger.log("Waiting fragment cc ("+d.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var y=this.getLoadPosition(),_=o.BufferHelper.bufferInfo(this.mediaBuffer,y,this.config.maxBufferHole);Object(p.fragmentWithinToleranceTest)(_.end,this.config.maxFragLookUpTolerance,d)<0&&(v.logger.log("Waiting fragment cc ("+d.cc+") @ "+d.start+" cancelled because another fragment at "+_.end+" is needed"),this.clearWaitingFragment())}}else this.state=i.State.IDLE}this.onTickEnd()},T.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.IDLE)},T.onTickEnd=function(){var e=this.media;if(e&&e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length&&(this.loadedmetadata=!0),this.lastCurrentTime=e.currentTime}},T.doTickIdle=function(){var e,t,n=this.hls,r=this.levels,o=this.media,s=this.trackId,u=n.config;if(r&&r[s]&&(o||!this.startFragRequested&&u.startFragPrefetch)){var d=r[s].details;if(!d||d.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(d))this.state=i.State.WAITING_TRACK;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,c.ElementaryStreamTypes.AUDIO,l.PlaylistLevelType.AUDIO));var f=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,l.PlaylistLevelType.AUDIO);if(null!==f){var h=f.len,p=this.getMaxBufferLength(),m=this.audioSwitch;if(!(h>=p)||m){if(!m&&this._streamEnded(f,d))return n.trigger(a.Events.BUFFER_EOS,{type:"audio"}),void(this.state=i.State.ENDED);var g=d.fragments[0].start,v=f.end;if(m){var y=this.getLoadPosition();v=y,d.PTSKnown&&y<g&&(f.end>g||f.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),o.currentTime=g+.05)}var _=this.getNextFragment(v,d);_?"identity"!==(null===(e=_.decryptdata)||void 0===e?void 0:e.keyFormat)||null!==(t=_.decryptdata)&&void 0!==t&&t.key?this.loadFragment(_,d,v):this.loadKey(_,d):this.bufferFlushed=!0}}}}},T.getMaxBufferLength=function(){var t=e.prototype.getMaxBufferLength.call(this),n=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,l.PlaylistLevelType.MAIN);return null===n?t:Math.max(t,n.len)},T.onMediaDetaching=function(){this.videoBuffer=null,e.prototype.onMediaDetaching.call(this)},T.onAudioTracksUpdated=function(e,t){var n=t.audioTracks;this.resetTransmuxer(),this.levels=n.map((function(e){return new u.Level(e)}))},T.onAudioTrackSwitching=function(e,t){var n=!!t.url;this.trackId=t.id;var r=this.fragCurrent;null!=r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.audioSwitch=!0,this.state=i.State.IDLE):this.state=i.State.STOPPED,this.tick()},T.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},T.onLevelLoaded=function(e,t){this.mainDetails=t.details},T.onAudioTrackLoaded=function(e,t){var n,r=this.levels,a=t.details,o=t.id;if(r){this.log("Track "+o+" loaded ["+a.startSN+","+a.endSN+"],duration:"+a.totalduration);var s=r[o],u=0;if(a.live||null!==(n=s.details)&&void 0!==n&&n.live){var l=this.mainDetails;if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed||!l)return;!s.details&&a.hasProgramDateTime&&l.hasProgramDateTime?(Object(m.alignMediaPlaylistByPDT)(a,l),u=a.fragments[0].start):u=this.alignPlaylists(a,s.details)}s.details=a,this.levelLastLoaded=o,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(s.details,u),this.state!==i.State.WAITING_TRACK||this.waitForCdnTuneIn(a)||(this.state=i.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+o)},T._handleFragmentLoadProgress=function(e){var t,n=e.frag,r=e.part,a=e.payload,o=this.config,s=this.trackId,u=this.levels;if(u){var c=u[s];console.assert(c,"Audio track is defined on fragment load progress");var p=c.details;console.assert(p,"Audio track details are defined on fragment load progress");var m=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2",g=this.transmuxer;g||(g=this.transmuxer=new f.default(this.hls,l.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var y=this.initPTS[n.cc],_=null===(t=n.initSegment)||void 0===t?void 0:t.data;if(void 0!==y){var b=r?r.index:-1,T=-1!==b,E=new h.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,a.byteLength,b,T);g.push(a,_,m,"",n,r,p.totalduration,!1,E,y)}else v.logger.log("Unknown video PTS for cc "+n.cc+", waiting for video PTS before demuxing audio frag "+n.sn+" of ["+p.startSN+" ,"+p.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:n,part:r,cache:new d.default,complete:!1}).cache.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=i.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},T._handleFragmentLoadComplete=function(t){this.waitingData?this.waitingData.complete=!0:e.prototype._handleFragmentLoadComplete.call(this,t)},T.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},T.onBufferCreated=function(e,t){var n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},T.onFragBuffered=function(e,t){var n=t.frag,r=t.part;n.type===l.PlaylistLevelType.AUDIO&&(this.fragContextChanged(n)?this.warn("Fragment "+n.sn+(r?" p: "+r.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==n.sn&&(this.fragPrevious=n,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(n,r)))},T.onError=function(t,n){switch(n.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:case g.ErrorDetails.KEY_LOAD_ERROR:case g.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(l.PlaylistLevelType.AUDIO,n);break;case g.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case g.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==i.State.ERROR&&this.state!==i.State.STOPPED&&(this.state=n.fatal?i.State.ERROR:i.State.IDLE,this.warn(n.details+" while loading frag, switching to "+this.state+" state"));break;case g.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===n.parent&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var r=!0,a=this.getFwdBufferInfo(this.mediaBuffer,l.PlaylistLevelType.AUDIO);a&&a.len>.5&&(r=!this.reduceMaxBufferLength(a.len)),r&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},T.onBufferFlushed=function(e,t){t.type===c.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},T._handleTransmuxComplete=function(e){var t,n="audio",r=this.hls,o=e.remuxResult,s=e.chunkMeta,u=this.getCurrentContext(s);if(!u)return this.warn("The loading context changed while buffering fragment "+s.sn+" of level "+s.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(s.level);var l=u.frag,d=u.part,f=o.audio,h=o.text,p=o.id3,m=o.initSegment;if(!this.fragContextChanged(l)){if(this.state=i.State.PARSING,this.audioSwitch&&f&&this.completeAudioSwitch(),null!=m&&m.tracks&&(this._bufferInitSegment(m.tracks,l,s),r.trigger(a.Events.FRAG_PARSING_INIT_SEGMENT,{frag:l,id:n,tracks:m.tracks})),f){var g=f.startPTS,v=f.endPTS,_=f.startDTS,b=f.endDTS;d&&(d.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:g,endPTS:v,startDTS:_,endDTS:b}),l.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,g,v,_,b),this.bufferFragmentData(f,l,d,s)}if(null!=p&&null!==(t=p.samples)&&void 0!==t&&t.length){var T=y({frag:l,id:n},p);r.trigger(a.Events.FRAG_PARSING_METADATA,T)}if(h){var E=y({frag:l,id:n},h);r.trigger(a.Events.FRAG_PARSING_USERDATA,E)}}},T._bufferInitSegment=function(e,t,n){if(this.state===i.State.PARSING){e.video&&delete e.video;var r=e.audio;if(r){r.levelCodec=r.codec,r.id="audio",this.log("Init audio buffer, container:"+r.container+", codecs[parsed]=["+r.codec+"]"),this.hls.trigger(a.Events.BUFFER_CODECS,e);var o=r.initSegment;if(null!=o&&o.byteLength){var s={type:"audio",frag:t,part:null,chunkMeta:n,parent:t.type,data:o};this.hls.trigger(a.Events.BUFFER_APPENDING,s)}this.tick()}}},T.loadFragment=function(t,n,a){var o=this.fragmentTracker.getState(t);this.fragCurrent=t,(this.audioSwitch||o===s.FragmentState.NOT_LOADED||o===s.FragmentState.PARTIAL)&&("initSegment"===t.sn?this._loadInitSegment(t):n.live&&!Object(r.isFiniteNumber)(this.initPTS[t.cc])?(this.log("Waiting for video PTS in continuity counter "+t.cc+" of live stream before loading audio fragment "+t.sn+" of level "+this.trackId),this.state=i.State.WAITING_INIT_PTS):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,a)))},T.completeAudioSwitch=function(){var t=this.hls,n=this.media,r=this.trackId;n&&(this.log("Switching audio track : flushing all audio"),e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,t.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:r})},b}(i.default);t.default=b},"./src/controller/audio-track-controller.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/controller/base-playlist-controller.ts"),o=n("./src/types/loader.ts");function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function a(t){var n;return(n=e.call(this,t,"[audio-track-controller]")||this).tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.trackName="",n.selectDefaultTrack=!0,n.registerListeners(),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var l,c,d,f=a.prototype;return f.registerListeners=function(){var e=this.hls;e.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(r.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(r.Events.ERROR,this.onError,this)},f.unregisterListeners=function(){var e=this.hls;e.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(r.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(r.Events.ERROR,this.onError,this)},f.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,e.prototype.destroy.call(this)},f.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},f.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},f.onAudioTrackLoaded=function(e,t){var n=t.id,r=t.details,i=this.tracksInGroup[n];if(i){var a=i.details;i.details=t.details,this.log("audioTrack "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,t,a))}else this.warn("Invalid audio track id "+n)},f.onLevelLoading=function(e,t){this.switchLevel(t.level)},f.onLevelSwitching=function(e,t){this.switchLevel(t.level)},f.switchLevel=function(e){var t=this.hls.levels[e];if(null!=t&&t.audioGroupIds){var n=t.audioGroupIds[t.urlId];if(this.groupId!==n){this.groupId=n;var i=this.tracks.filter((function(e){return!n||e.groupId===n}));this.selectDefaultTrack&&!i.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=i;var a={audioTracks:i};this.log("Updating audio tracks, "+i.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(r.Events.AUDIO_TRACKS_UPDATED,a),this.selectInitialTrack()}}},f.onError=function(t,n){e.prototype.onError.call(this,t,n),!n.fatal&&n.context&&n.context.type===o.PlaylistContextType.AUDIO_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},f.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var n=t[this.trackId];this.log("Now switching to audio-track index "+e);var i=t[e],a=i.id,o=i.groupId,s=void 0===o?"":o,u=i.name,l=i.type,c=i.url;if(this.trackId=e,this.trackName=u,this.selectDefaultTrack=!1,this.hls.trigger(r.Events.AUDIO_TRACK_SWITCHING,{id:a,groupId:s,name:u,type:l,url:c}),!i.details||i.details.live){var d=this.switchParams(i.url,null==n?void 0:n.details);this.loadPlaylist(d)}}},f.selectInitialTrack=function(){var e=this.tracksInGroup;console.assert(e.length,"Initial audio track should be selected when tracks are known");var t=this.trackName,n=this.findTrackId(t)||this.findTrackId();-1!==n?this.setAudioTrack(n):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},f.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||e===r.name))return r.id}return-1},f.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var n=t.id,i=t.groupId,a=t.url;if(e)try{a=e.addDirectives(a)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist for id: "+n),this.clearTimer(),this.hls.trigger(r.Events.AUDIO_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:e||null})}},l=a,(c=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}])&&s(l.prototype,c),d&&s(l,d),a}(a.default);t.default=l},"./src/controller/base-playlist-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var r=n("./src/polyfills/number.ts"),i=n("./src/types/level.ts"),a=n("./src/controller/level-helper.ts"),o=n("./src/utils/logger.ts"),s=n("./src/errors.ts"),u=function(){function e(e,t){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=o.logger.log.bind(o.logger,t+":"),this.warn=o.logger.warn.bind(o.logger,t+":"),this.hls=e}var t=e.prototype;return t.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.onError=function(e,t){t.fatal&&t.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},t.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},t.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t){var n=null==t?void 0:t.renditionReports;if(n)for(var a=0;a<n.length;a++){var o=n[a],s=""+o.URI;if(s===e.substr(-s.length)){var u=parseInt(o["LAST-MSN"]),l=parseInt(o["LAST-PART"]);if(t&&this.hls.config.lowLatencyMode){var c=Math.min(t.age-t.partTarget,t.targetduration);void 0!==l&&c>t.partTarget&&(l+=1)}if(Object(r.isFiniteNumber)(u))return new i.HlsUrlParameters(u,Object(r.isFiniteNumber)(l)?l:void 0,i.HlsSkip.No)}}},t.loadPlaylist=function(e){},t.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},t.playlistLoaded=function(e,t,n){var r=this,i=t.details,o=t.stats,s=o.loading.end?Math.max(0,self.performance.now()-o.loading.end):0;if(i.advancedDateTime=Date.now()-s,i.live||null!=n&&n.live){if(i.reloaded(n),n&&this.log("live playlist "+e+" "+(i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:"MISSED")),n&&i.fragments.length>0&&Object(a.mergeDetails)(n,i),!this.canLoad||!i.live)return;var u,l=void 0,c=void 0;if(i.canBlockReload&&i.endSN&&i.advanced){var d=this.hls.config.lowLatencyMode,f=i.lastPartSn,h=i.endSN,p=i.lastPartIndex,m=f===h;-1!==p?(l=m?h+1:f,c=m?d?0:p:p+1):l=h+1;var g=i.age,v=g+i.ageHeader,y=Math.min(v-i.partTarget,1.5*i.targetduration);if(y>0){if(n&&y>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+y+" with playlist age: "+i.age),y=0;else{var _=Math.floor(y/i.targetduration);l+=_,void 0!==c&&(c+=Math.round(y%i.targetduration/i.partTarget)),this.log("CDN Tune-in age: "+i.ageHeader+"s last advanced "+g.toFixed(2)+"s goal: "+y+" skip sn "+_+" to part "+c)}i.tuneInGoal=y}if(u=this.getDeliveryDirectives(i,t.deliveryDirectives,l,c),d||!m)return void this.loadPlaylist(u)}else u=this.getDeliveryDirectives(i,t.deliveryDirectives,l,c);var b=Object(a.computeReloadInterval)(i,o);void 0!==l&&i.canBlockReload&&(b-=i.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(b)+" ms"),this.timer=self.setTimeout((function(){return r.loadPlaylist(u)}),b)}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,n,r){var a=Object(i.getSkipValue)(e,n);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,a=i.HlsSkip.No),new i.HlsUrlParameters(n,r,a)},t.retryLoadingOrFail=function(e){var t,n=this,r=this.hls.config,i=this.retryCount<r.levelLoadingMaxRetry;if(i)if(this.retryCount++,e.details.indexOf("LoadTimeOut")>-1&&null!==(t=e.context)&&void 0!==t&&t.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*r.levelLoadingRetryDelay,r.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return n.loadPlaylist()}),a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+e.details+'"')}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return i},e}()},"./src/controller/base-stream-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"State",(function(){return T})),n.d(t,"default",(function(){return E}));var r=n("./src/polyfills/number.ts"),i=n("./src/task-loop.ts"),a=n("./src/controller/fragment-tracker.ts"),o=n("./src/utils/buffer-helper.ts"),s=n("./src/utils/logger.ts"),u=n("./src/events.ts"),l=n("./src/errors.ts"),c=n("./src/types/transmuxer.ts"),d=n("./src/utils/mp4-tools.ts"),f=n("./src/utils/discontinuities.ts"),h=n("./src/controller/fragment-finders.ts"),p=n("./src/controller/level-helper.ts"),m=n("./src/loader/fragment-loader.ts"),g=n("./src/crypt/decrypter.ts"),v=n("./src/utils/time-ranges.ts"),y=n("./src/types/loader.ts");function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},E=function(e){var t,n;function i(t,n,r){var i;return(i=e.call(this)||this).hls=void 0,i.fragPrevious=null,i.fragCurrent=null,i.fragmentTracker=void 0,i.transmuxer=null,i._state=T.STOPPED,i.media=void 0,i.mediaBuffer=void 0,i.config=void 0,i.bitrateTest=!1,i.lastCurrentTime=0,i.nextLoadPosition=0,i.startPosition=0,i.loadedmetadata=!1,i.fragLoadError=0,i.retryDate=0,i.levels=null,i.fragmentLoader=void 0,i.levelLastLoaded=null,i.startFragRequested=!1,i.decrypter=void 0,i.initPTS=[],i.onvseeking=null,i.onvended=null,i.logPrefix="",i.log=void 0,i.warn=void 0,i.logPrefix=r,i.log=s.logger.log.bind(s.logger,r+":"),i.warn=s.logger.warn.bind(s.logger,r+":"),i.hls=t,i.fragmentLoader=new m.default(t.config),i.fragmentTracker=n,i.config=t.config,i.decrypter=new g.default(t,t.config),t.on(u.Events.KEY_LOADED,i.onKeyLoaded,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i)),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,b(t,n);var E,S,w,A=i.prototype;return A.doTick=function(){this.onTickEnd()},A.onTickEnd=function(){},A.startLoad=function(e){},A.stopLoad=function(){this.fragmentLoader.abort();var e=this.fragCurrent;e&&this.fragmentTracker.removeFragment(e),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=T.STOPPED},A._streamEnded=function(e,t){var n=this.fragCurrent,r=this.fragmentTracker;if(!t.live&&n&&n.sn===t.endSN&&!e.nextStart){var i=r.getState(n);return i===a.FragmentState.PARTIAL||i===a.FragmentState.OK}return!1},A.onMediaAttached=function(e,t){var n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.state===T.STOPPED&&this.startLoad(r.startPosition)},A.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},A.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,n=this.media,i=this.mediaBuffer,a=this.state,s=n?n.currentTime:0,u=o.BufferHelper.bufferInfo(i||n,s,e.maxBufferHole);if(this.log("media seeking to "+(Object(r.isFiniteNumber)(s)?s.toFixed(3):s)+", state: "+a),a===T.ENDED)this.resetLoadingState();else if(t&&!u.len){var l=e.maxFragLookUpTolerance,c=t.start-l,d=s>t.start+t.duration+l;(s<c||d)&&(d&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.loader.abort()),this.resetLoadingState())}n&&(this.lastCurrentTime=s),this.loadedmetadata||u.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()},A.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},A.onKeyLoaded=function(e,t){if(this.state===T.KEY_LOADING&&t.frag===this.fragCurrent&&this.levels){this.state=T.IDLE;var n=this.levels[t.frag.level].details;n&&this.loadFragment(t.frag,n,t.frag.start)}},A.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},A.onHandlerDestroyed=function(){this.state=T.STOPPED,this.hls.off(u.Events.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},A.loadKey=function(e,t){this.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=T.KEY_LOADING,this.fragCurrent=e,this.hls.trigger(u.Events.KEY_LOADING,{frag:e})},A.loadFragment=function(e,t,n){this._loadFragForPlayback(e,t,n)},A._loadFragForPlayback=function(e,t,n){var r=this;this._doFragLoad(e,t,n,(function(t){if(r.fragContextChanged(e))return r.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),void r.fragmentTracker.removeFragment(e);e.stats.chunkCount++,r._handleFragmentLoadProgress(t)})).then((function(t){if(t){r.fragLoadError=0;var n=r.state;if(!r.fragContextChanged(e))return"payload"in t&&(r.log("Loaded fragment "+e.sn+" of level "+e.level),r.hls.trigger(u.Events.FRAG_LOADED,t),r.state===T.BACKTRACKING)?(r.fragmentTracker.backtrack(e,t),void r.resetFragmentLoading(e)):void r._handleFragmentLoadComplete(t);(n===T.FRAG_LOADING||n===T.BACKTRACKING||!r.fragCurrent&&n===T.PARSING)&&(r.fragmentTracker.removeFragment(e),r.state=T.IDLE)}})).catch((function(t){r.warn(t),r.resetFragmentLoading(e)}))},A.flushMainBuffer=function(e,t,n){if(void 0===n&&(n=null),e-t){var r={startOffset:e,endOffset:t,type:n};this.fragLoadError=0,this.hls.trigger(u.Events.BUFFER_FLUSHING,r)}},A._loadInitSegment=function(e){var t=this;this._doFragLoad(e).then((function(n){if(!n||t.fragContextChanged(e)||!t.levels)throw new Error("init load aborted");return n})).then((function(n){var r=t.hls,i=n.payload,a=e.decryptdata;if(i&&i.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var o=self.performance.now();return t.decrypter.webCryptoDecrypt(new Uint8Array(i),a.key.buffer,a.iv.buffer).then((function(t){var i=self.performance.now();return r.trigger(u.Events.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:o,tdecrypt:i}}),n.payload=t,n}))}return n})).then((function(n){var r=t.fragCurrent,i=t.hls,a=t.levels;if(!a)throw new Error("init load aborted, missing levels");var o=a[e.level].details;console.assert(o,"Level details are defined when init segment is loaded");var s=e.stats;t.state=T.IDLE,t.fragLoadError=0,e.data=new Uint8Array(n.payload),s.parsing.start=s.buffering.start=self.performance.now(),s.parsing.end=s.buffering.end=self.performance.now(),n.frag===r&&i.trigger(u.Events.FRAG_BUFFERED,{stats:s,frag:r,part:null,id:e.type}),t.tick()})).catch((function(n){t.warn(n),t.resetFragmentLoading(e)}))},A.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},A.fragBufferedComplete=function(e,t){var n=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level+" "+v.default.toString(o.BufferHelper.getBuffered(n))),this.state=T.IDLE,this.tick()},A._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var n=e.frag,r=e.part,i=e.partsLoaded,a=!i||0===i.length||i.some((function(e){return!e})),o=new c.ChunkMetadata(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!a);t.flush(o)}},A._handleFragmentLoadProgress=function(e){},A._doFragLoad=function(e,t,n,i){var a=this;if(void 0===n&&(n=null),!this.levels)throw new Error("frag load aborted, missing levels");if(n=Math.max(e.start,n||0),this.config.lowLatencyMode&&t){var o=t.partList;if(o&&i){n>e.end&&t.fragmentHint&&(e=t.fragmentHint);var s=this.getNextPart(o,e,n);if(s>-1){var l=o[s];return this.log("Loading part sn: "+e.sn+" p: "+l.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+s+"-"+(o.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),this.nextLoadPosition=l.start+l.duration,this.state=T.FRAG_LOADING,this.hls.trigger(u.Events.FRAG_LOADING,{frag:e,part:o[s],targetBufferTime:n}),this.doFragPartsLoad(e,o,s,i).catch((function(e){return a.handleFragLoadError(e)}))}if(!e.url||this.loadedEndOfParts(o,n))return Promise.resolve(null)}}return this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),Object(r.isFiniteNumber)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=T.FRAG_LOADING,this.hls.trigger(u.Events.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragmentLoader.load(e,i).catch((function(e){return a.handleFragLoadError(e)}))},A.doFragPartsLoad=function(e,t,n,r){var i=this;return new Promise((function(a,o){var s=[];!function n(l){var c=t[l];i.fragmentLoader.loadPart(e,c,r).then((function(r){s[c.index]=r;var o=r.part;i.hls.trigger(u.Events.FRAG_LOADED,r);var d=t[l+1];if(!d||d.fragment!==e)return a({frag:e,part:o,partsLoaded:s});n(l+1)})).catch(o)}(n)}))},A.handleFragLoadError=function(e){var t=e.data;return t&&t.details===l.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(u.Events.ERROR,t),null},A._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===T.PARSING){var n=t.frag,r=t.part,i=t.level,a=self.performance.now();n.stats.parsing.end=a,r&&(r.stats.parsing.end=a),this.updateLevelTiming(n,r,i,e.partial)}else this.fragCurrent||(this.state=T.IDLE)},A.getCurrentContext=function(e){var t=this.levels,n=e.level,r=e.sn,i=e.part;if(!t||!t[n])return this.warn("Levels object was unset while buffering fragment "+r+" of level "+n+". The current chunk will not be buffered."),null;var a=t[n],o=i>-1?Object(p.getPartWith)(a,r,i):null,s=o?o.fragment:Object(p.getFragmentWithSN)(a,r,this.fragCurrent);return s?{frag:s,part:o,level:a}:null},A.bufferFragmentData=function(e,t,n,r){if(e&&this.state===T.PARSING){var i=e.data1,a=e.data2,o=i;if(i&&a&&(o=Object(d.appendUint8Array)(i,a)),o&&o.length){var s={type:e.type,frag:t,part:n,chunkMeta:r,parent:t.type,data:o};this.hls.trigger(u.Events.BUFFER_APPENDING,s),e.dropped&&e.independent&&!n&&this.flushBufferGap(t)}}},A.flushBufferGap=function(e){var t=this.media;if(t)if(o.BufferHelper.isBuffered(t,t.currentTime)){var n=t.currentTime,r=o.BufferHelper.bufferInfo(t,n,0),i=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),s=Math.max(Math.min(e.start-a,r.end-a),n+a);e.start-s>a&&this.flushMainBuffer(s,e.start)}else this.flushMainBuffer(0,e.start)},A.getFwdBufferInfo=function(e,t){var n=this.config,i=this.getLoadPosition();if(!Object(r.isFiniteNumber)(i))return null;var a=o.BufferHelper.bufferInfo(e,i,n.maxBufferHole);if(0===a.len&&void 0!==a.nextStart){var s=this.fragmentTracker.getBufferedFrag(i,t);if(s&&a.nextStart<s.end)return o.BufferHelper.bufferInfo(e,i,Math.max(a.nextStart,n.maxBufferHole))}return a},A.getMaxBufferLength=function(e){var t,n=this.config;return t=e?Math.max(8*n.maxBufferSize/e,n.maxBufferLength):n.maxBufferLength,Math.min(t,n.maxMaxBufferLength)},A.reduceMaxBufferLength=function(e){var t=this.config,n=e||t.maxBufferLength;return t.maxMaxBufferLength>=n&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},A.getNextFragment=function(e,t){var n,r,i=t.fragments,a=i.length;if(!a)return null;var o,s=this.config,u=i[0].start;if(t.live){var l=s.initialLiveManifestSize;if(a<l)return this.warn("Not enough fragments to start playback (have: "+a+", need: "+l+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(o=this.getInitialLiveFragment(t,i),this.startPosition=o?this.hls.liveSyncPosition||o.start:e)}else e<=u&&(o=i[0]);if(!o){var c=s.lowLatencyMode?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,c,t)}return null===(n=o)||void 0===n||!n.initSegment||null!==(r=o)&&void 0!==r&&r.initSegment.data||this.bitrateTest||(o=o.initSegment),o},A.getNextPart=function(e,t,n){for(var r=-1,i=!1,a=!0,o=0,s=e.length;o<s;o++){var u=e[o];if(a=a&&!u.independent,r>-1&&n<u.start)break;var l=u.loaded;!l&&(i||u.independent||a)&&u.fragment===t&&(r=o),i=l}return r},A.loadedEndOfParts=function(e,t){var n=e[e.length-1];return n&&t>n.start&&n.loaded},A.getInitialLiveFragment=function(e,t){var n=this.fragPrevious,r=null;if(n){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),r=Object(h.findFragmentByPDT)(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){var i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){var a=t[i-e.startSN];n.cc===a.cc&&(r=a,this.log("Live playlist, switching playlist, load frag with next SN: "+r.sn))}r||(r=Object(h.findFragWithCC)(t,n.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+r.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(r=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r},A.getFragmentAtPosition=function(e,t,n){var r,i=this.config,o=this.fragPrevious,s=n.fragments,u=n.endSN,l=n.fragmentHint,c=i.maxFragLookUpTolerance,d=!!(i.lowLatencyMode&&n.partList&&l);if(d&&l&&!this.bitrateTest&&(s=s.concat(l),u=l.sn),e<t){var f=e>t-c?0:c;r=Object(h.findFragmentByPTS)(o,s,e,f)}else r=s[s.length-1];if(r){var p=r.sn-n.startSN,m=o&&r.level===o.level,g=s[p+1];if(this.fragmentTracker.getState(r)===a.FragmentState.BACKTRACKED){r=null;for(var v=p;s[v]&&this.fragmentTracker.getState(s[v])===a.FragmentState.BACKTRACKED;)r=o?s[v--]:s[--v];r||(r=g)}else o&&r.sn===o.sn&&!d&&m&&(r.sn<u&&this.fragmentTracker.getState(g)!==a.FragmentState.OK?(this.log("SN "+r.sn+" just loaded, load next one: "+g.sn),r=g):r=null)}return r},A.synchronizeToLiveEdge=function(e){var t=this.config,n=this.media;if(n){var r=this.hls.liveSyncPosition,i=n.currentTime,a=e.fragments[0].start,o=e.edge,s=i>=a-t.maxFragLookUpTolerance&&i<=o;if(null!==r&&n.duration>r&&(i<r||!s)){var u=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!s&&n.readyState<4||i<o-u)&&(this.loadedmetadata||(this.nextLoadPosition=r),n.readyState&&(this.warn("Playback: "+i.toFixed(3)+" is located too far from the end of live sliding playlist: "+o+", reset currentTime to : "+r.toFixed(3)),n.currentTime=r))}}},A.alignPlaylists=function(e,t){var n=this.levels,i=this.levelLastLoaded,a=this.fragPrevious,o=null!==i?n[i]:null,s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;var u=e.fragments[0].start,l=!t,c=e.alignedSliding&&Object(r.isFiniteNumber)(u);if(l||!c&&!u){Object(f.alignStream)(a,o,e);var d=e.fragments[0].start;return this.log("Live playlist sliding: "+d.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(a?a.sn:"na")+" fragments: "+s),d}return u},A.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},A.setStartPosition=function(e,t){var n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){var i=e.startTimeOffset;Object(r.isFiniteNumber)(i)?(n=t+i,i<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log("Start time offset "+i+" found in playlist, adjust startPosition to "+n),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n},A.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},A.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part"+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},A.resetFragmentLoading=function(e){this.fragCurrent&&this.fragContextChanged(e)||(this.state=T.IDLE)},A.onFragmentOrKeyLoadError=function(e,t){if(!t.fatal){var n=t.frag;if(n&&n.type===e){var r=this.fragCurrent;console.assert(r&&n.sn===r.sn&&n.level===r.level&&n.urlId===r.urlId,"Frag load error must match current frag to retry");var i=this.config;if(this.fragLoadError+1<=i.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(n.level))return;var a=Math.min(Math.pow(2,this.fragLoadError)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);this.warn("Fragment "+n.sn+" of "+e+" "+n.level+" failed to load, retrying in "+a+"ms"),this.retryDate=self.performance.now()+a,this.fragLoadError++,this.state=T.FRAG_LOADING_WAITING_RETRY}else t.levelRetry?(e===y.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=T.IDLE):(s.logger.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=T.ERROR)}}},A.afterBufferFlushed=function(e,t,n){if(e){var r=o.BufferHelper.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===T.ENDED&&this.resetLoadingState()}},A.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=T.IDLE},A.resetLiveStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=this.levels?this.levels[e].details:null;if(null!=t&&t.live)return this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},A.updateLevelTiming=function(e,t,n,r){var i=this,a=n.details;console.assert(!!a,"level.details must be defined"),Object.keys(e.elementaryStreams).reduce((function(t,o){var s=e.elementaryStreams[o];if(s){var l=s.endPTS-s.startPTS;if(l<=0)return i.warn("Could not parse fragment "+e.sn+" "+o+" duration reliably ("+l+") resetting transmuxer to fallback to playlist timing"),i.resetTransmuxer(),t||!1;var c=r?0:Object(p.updateFragPTSDTS)(a,e,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return i.hls.trigger(u.Events.LEVEL_PTS_UPDATED,{details:a,level:n,drift:c,type:o,frag:e,start:s.startPTS,end:s.endPTS}),!0}return t}),!1)?(this.state=T.PARSED,this.hls.trigger(u.Events.FRAG_PARSED,{frag:e,part:t})):this.resetLoadingState()},A.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},E=i,(S=[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}])&&_(E.prototype,S),w&&_(E,w),i}(i.default)},"./src/controller/buffer-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts"),o=n("./src/errors.ts"),s=n("./src/utils/buffer-helper.ts"),u=n("./src/utils/mediasource-helper.ts"),l=n("./src/loader/fragment.ts"),c=n("./src/controller/buffer-operation-queue.ts"),d=Object(u.getMediaSource)(),f=/([ha]vc.)(?:\.[^.,]+)+/,h=function(){function e(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var e=t.hls,n=t.media,r=t.mediaSource;a.logger.log("[buffer-controller]: Media source opened"),n&&(t.updateMediaElementDuration(),e.trigger(i.Events.MEDIA_ATTACHED,{media:n})),r&&r.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){a.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){a.logger.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var t=e.prototype;return t.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},t.destroy=function(){this.unregisterListeners(),this.details=null},t.registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.BUFFER_RESET,this.onBufferReset,this),e.on(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.on(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(i.Events.BUFFER_EOS,this.onBufferEos,this),e.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(i.Events.FRAG_PARSED,this.onFragParsed,this),e.on(i.Events.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(i.Events.BUFFER_RESET,this.onBufferReset,this),e.off(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.off(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(i.Events.BUFFER_EOS,this.onBufferEos,this),e.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(i.Events.FRAG_PARSED,this.onFragParsed,this),e.off(i.Events.FRAG_CHANGED,this.onFragChanged,this)},t._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new c.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},t.onManifestParsed=function(e,t){var n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.details=null,a.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function(e,t){var n=this.media=t.media;if(n&&d){var r=this.mediaSource=new d;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(r),this._objectUrl=n.src}},t.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,n=this._objectUrl;if(t){if(a.logger.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){a.logger.warn("[buffer-controller]: onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):a.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(i.Events.MEDIA_DETACHED,void 0)},t.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach((function(t){var n=e.sourceBuffer[t];try{n&&(e.removeBufferListeners(t),e.mediaSource&&e.mediaSource.removeSourceBuffer(n),e.sourceBuffer[t]=void 0)}catch(e){a.logger.warn("[buffer-controller]: Failed to reset the "+t+" buffer",e)}})),this._initSourceBuffer()},t.onBufferCodecs=function(e,t){var n=this,r=this.getSourceBufferTypes().length;Object.keys(t).forEach((function(e){if(r){var i=n.tracks[e];if(i&&"function"==typeof i.buffer.changeType){var a=t[e],o=a.codec,s=a.levelCodec,u=a.container;if((i.levelCodec||i.codec).replace(f,"$1")!==(s||o).replace(f,"$1")){var l=u+";codecs="+(s||o);n.appendChangeType(e,l)}}}else n.pendingTracks[e]=t[e]})),r||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},t.appendChangeType=function(e,t){var n=this,r=this.operationQueue,i={execute:function(){var i=n.sourceBuffer[e];i&&(a.logger.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+t),i.changeType(t)),r.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){a.logger.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",t)}};r.append(i,e)},t.onBufferAppending=function(e,t){var n=this,r=this.hls,u=this.operationQueue,l=this.tracks,c=t.data,d=t.type,f=t.frag,h=t.part,p=t.chunkMeta,m=p.buffering[d],g=self.performance.now();m.start=g;var v=f.stats.buffering,y=h?h.stats.buffering:null;0===v.start&&(v.start=g),y&&0===y.start&&(y.start=g);var _=l.audio,b="audio"===d&&1===p.id&&"audio/mpeg"===(null==_?void 0:_.container),T={execute:function(){if(m.executeStart=self.performance.now(),b){var e=n.sourceBuffer[d];if(e){var t=f.start-e.timestampOffset;Math.abs(t)>=.1&&(a.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+f.start+" (delta: "+t+") sn: "+f.sn+")"),e.timestampOffset=f.start)}}n.appendExecutor(c,d)},onStart:function(){},onComplete:function(){var e=self.performance.now();m.executeEnd=m.end=e,0===v.first&&(v.first=e),y&&0===y.first&&(y.first=e);var t=n.sourceBuffer,r={};for(var a in t)r[a]=s.BufferHelper.getBuffered(t[a]);n.appendError=0,n.hls.trigger(i.Events.BUFFER_APPENDED,{type:d,frag:f,part:h,chunkMeta:p,parent:f.type,timeRanges:r})},onError:function(e){a.logger.error("[buffer-controller]: Error encountered while trying to append to the "+d+" SourceBuffer",e);var t={type:o.ErrorTypes.MEDIA_ERROR,parent:f.type,details:o.ErrorDetails.BUFFER_APPEND_ERROR,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=o.ErrorDetails.BUFFER_FULL_ERROR:(n.appendError++,t.details=o.ErrorDetails.BUFFER_APPEND_ERROR,n.appendError>r.config.appendErrorMaxRetry&&(a.logger.error("[buffer-controller]: Failed "+r.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),t.fatal=!0)),r.trigger(i.Events.ERROR,t)}};u.append(T,d)},t.onBufferFlushing=function(e,t){var n=this,r=this.operationQueue,o=function(e){return{execute:n.removeExecutor.bind(n,e,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(i.Events.BUFFER_FLUSHED,{type:e})},onError:function(t){a.logger.warn("[buffer-controller]: Failed to remove from "+e+" SourceBuffer",t)}}};t.type?r.append(o(t.type),t.type):this.getSourceBufferTypes().forEach((function(e){r.append(o(e),e)}))},t.onFragParsed=function(e,t){var n=this,r=t.frag,o=t.part,s=[],u=o?o.elementaryStreams:r.elementaryStreams;u[l.ElementaryStreamTypes.AUDIOVIDEO]?s.push("audiovideo"):(u[l.ElementaryStreamTypes.AUDIO]&&s.push("audio"),u[l.ElementaryStreamTypes.VIDEO]&&s.push("video")),0===s.length&&a.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+r.type+" level: "+r.level+" sn: "+r.sn),this.blockBuffers((function(){var e=self.performance.now();r.stats.buffering.end=e,o&&(o.stats.buffering.end=e);var t=o?o.stats:r.stats;n.hls.trigger(i.Events.FRAG_BUFFERED,{frag:r,part:o,stats:t,id:r.type})}),s)},t.onFragChanged=function(e,t){this.flushBackBuffer()},t.onBufferEos=function(e,t){var n=this;this.getSourceBufferTypes().reduce((function(e,r){var i=n.sourceBuffer[r];return t.type&&t.type!==r||i&&!i.ended&&(i.ended=!0,a.logger.log("[buffer-controller]: "+r+" sourceBuffer now EOS")),e&&!(i&&!i.ended)}),!0)&&this.blockBuffers((function(){var e=n.mediaSource;e&&"open"===e.readyState&&e.endOfStream()}))},t.onLevelUpdated=function(e,t){var n=t.details;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},t.flushBackBuffer=function(){var e=this.hls,t=this.details,n=this.media,a=this.sourceBuffer;if(n&&null!==t){var o=this.getSourceBufferTypes();if(o.length){var u=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if(Object(r.isFiniteNumber)(u)&&!(u<0)){var l=n.currentTime,c=t.levelTargetDuration,d=Math.max(u,c),f=Math.floor(l/c)*c-d;o.forEach((function(n){var r=a[n];if(r){var o=s.BufferHelper.getBuffered(r);o.length>0&&f>o.start(0)&&(e.trigger(i.Events.BACK_BUFFER_REACHED,{bufferEnd:f}),t.live&&e.trigger(i.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:f}),e.trigger(i.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:f,type:n}))}}))}}}},t.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,n=this.media,i=this.mediaSource,o=e.fragments[0].start+e.totalduration,s=n.duration,u=Object(r.isFiniteNumber)(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(a.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(e)):(o>u&&o>s||!Object(r.isFiniteNumber)(s))&&(a.logger.log("[buffer-controller]: Updating Media Source duration to "+o.toFixed(3)),i.duration=o)}},t.updateSeekableRange=function(e){var t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!=t&&t.setLiveSeekableRange){var r=Math.max(0,n[0].start),i=Math.max(r,r+e.totalduration);t.setLiveSeekableRange(r,i)}},t.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,n=this.pendingTracks,r=Object.keys(n).length;if(r&&!e||2===r){this.createSourceBuffers(n),this.pendingTracks={};var a=this.getSourceBufferTypes();if(0===a.length)return void this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach((function(e){t.executeNext(e)}))}},t.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");var r=0;for(var s in e)if(!t[s]){var u=e[s];if(!u)throw Error("source buffer exists for track "+s+", however track does not");var l=u.levelCodec||u.codec,c=u.container+";codecs="+l;a.logger.log("[buffer-controller]: creating sourceBuffer("+c+")");try{var d=t[s]=n.addSourceBuffer(c),f=s;this.addBufferListener(f,"updatestart",this._onSBUpdateStart),this.addBufferListener(f,"updateend",this._onSBUpdateEnd),this.addBufferListener(f,"error",this._onSBUpdateError),this.tracks[s]={buffer:d,codec:l,container:u.container,levelCodec:u.levelCodec,id:u.id},r++}catch(e){a.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+e.message),this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,mimeType:c})}}r&&this.hls.trigger(i.Events.BUFFER_CREATED,{tracks:this.tracks})},t._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},t._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},t._onSBUpdateError=function(e,t){a.logger.error("[buffer-controller]: "+e+" SourceBuffer error",t),this.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var n=this.operationQueue.current(e);n&&n.onError(t)},t.removeExecutor=function(e,t,n){var i=this.media,o=this.mediaSource,s=this.operationQueue,u=this.sourceBuffer[e];if(!i||!o||!u)return a.logger.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(e);var l=Object(r.isFiniteNumber)(i.duration)?i.duration:1/0,c=Object(r.isFiniteNumber)(o.duration)?o.duration:1/0,d=Math.max(0,t),f=Math.min(n,l,c);f>d?(a.logger.log("[buffer-controller]: Removing ["+d+","+f+"] from the "+e+" SourceBuffer"),console.assert(!u.updating,e+" sourceBuffer must not be updating"),u.remove(d,f)):s.shiftAndExecuteNext(e)},t.appendExecutor=function(e,t){var n=this.operationQueue,r=this.sourceBuffer[t];if(!r)return a.logger.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void n.shiftAndExecuteNext(t);r.ended=!1,console.assert(!r.updating,t+" sourceBuffer must not be updating"),r.appendBuffer(e)},t.blockBuffers=function(e,t){var n=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return a.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(e);var r=this.operationQueue,i=t.map((function(e){return r.appendBlocker(e)}));Promise.all(i).then((function(){e(),t.forEach((function(e){var t=n.sourceBuffer[e];t&&t.updating||r.shiftAndExecuteNext(e)}))}))},t.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},t.addBufferListener=function(e,t,n){var r=this.sourceBuffer[e];if(r){var i=n.bind(this,e);this.listeners[e].push({event:t,listener:i}),r.addEventListener(t,i)}},t.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach((function(e){t.removeEventListener(e.event,e.listener)}))},e}()},"./src/controller/buffer-operation-queue.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n("./src/utils/logger.ts"),i=function(){function e(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var t=e.prototype;return t.append=function(e,t){var n=this.queues[t];n.push(e),1===n.length&&this.buffers[t]&&this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,n=new Promise((function(e){t=e})),r={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(r,e),n},t.executeNext=function(e){var t=this.buffers,n=this.queues,i=t[e],a=n[e];if(a.length){var o=a[0];try{o.execute()}catch(t){r.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),o.onError(t),i&&i.updating||(a.shift(),this.executeNext(e))}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},e}()},"./src/controller/cap-level-controller.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/events.ts");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(e){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var t,n,a,o=e.prototype;return o.setStreamController=function(e){this.streamController=e},o.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},o.registerListeners=function(){var e=this.hls;e.on(r.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},o.unregisterListener=function(){var e=this.hls;e.off(r.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},o.onFpsDropLevelCapping=function(t,n){e.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},o.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null},o.onManifestParsed=function(e,t){var n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()},o.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},o.onMediaDetaching=function(){this.stopCapping()},o.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var e=this.hls.levels;if(e.length){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},o.getMaxLevel=function(t){var n=this,r=this.hls.levels;if(!r.length)return-1;var i=r.filter((function(r,i){return e.isLevelAllowed(i,n.restrictedLevels)&&i<=t}));return this.clientRect=null,e.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},o.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},o.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},o.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t},e.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},e.getMaxLevelByMediaSize=function(e,t,n){if(!e||!e.length)return-1;for(var r,i,a=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=n)&&(r=s,!(i=e[o+1])||r.width!==i.width||r.height!==i.height)){a=o;break}}return a},t=e,a=[{key:"contentScaleFactor",get:function(){var e=1;try{e=self.devicePixelRatio}catch(e){}return e}}],(n=[{key:"mediaWidth",get:function(){return this.getDimensions().width*e.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*e.contentScaleFactor}}])&&i(t.prototype,n),a&&i(t,a),e}();t.default=a},"./src/controller/eme-controller.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/utils/logger.ts"),o=n("./src/utils/mediakeys-helper.ts");function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(e){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=e,this._config=e.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var t,n,u,l=e.prototype;return l.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},l._registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this)},l._unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this)},l.getLicenseServerUrl=function(e){switch(e){case o.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},l._attemptKeySystemAccess=function(e,t,n){var r=this,i=function(e,t,n,r){switch(e){case o.KeySystems.WIDEVINE:return function(e,t,n){var r={audioCapabilities:[],videoCapabilities:[]};return e.forEach((function(e){r.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:n.audioRobustness||""})})),t.forEach((function(e){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:n.videoRobustness||""})})),[r]}(t,n,r);default:throw new Error("Unknown key-system: "+e)}}(e,t,n,this._drmSystemOptions);a.logger.log("Requesting encrypted media key-system access");var s=this.requestMediaKeySystemAccess(e,i);this.mediaKeysPromise=s.then((function(t){return r._onMediaKeySystemAccessObtained(e,t)})),s.catch((function(t){a.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))},l._onMediaKeySystemAccessObtained=function(e,t){var n=this;a.logger.log('Access for key-system "'+e+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(r);var i=Promise.resolve().then((function(){return t.createMediaKeys()})).then((function(t){return r.mediaKeys=t,a.logger.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated(),n._attemptSetMediaKeys(t),t}));return i.catch((function(e){a.logger.error("Failed to create media-keys:",e)})),i},l._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},l._onNewMediaKeySession=function(e){var t=this;a.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(n){t._onKeySessionMessage(e,n.message)}),!1)},l._onKeySessionMessage=function(e,t){a.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){a.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)}))},l.onMediaEncrypted=function(e){var t=this;if(a.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),!this.mediaKeysPromise)return a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var n=function(n){t._media&&(t._attemptSetMediaKeys(n),t._generateRequestWithPreferredKeySession(e.initDataType,e.initData))};this.mediaKeysPromise.then(n).catch(n)},l._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});a.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},l._generateRequestWithPreferredKeySession=function(e,t){var n=this,o=this._mediaKeysList[0];if(!o)return a.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(o.mediaKeysSessionInitialized)a.logger.warn("Key-Session already initialized but requested again");else{var s=o.mediaKeysSession;if(!s)return a.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return a.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});a.logger.log('Generating key-session request for "'+e+'" init data type'),o.mediaKeysSessionInitialized=!0,s.generateRequest(e,t).then((function(){a.logger.debug("Key-session generation succeeded")})).catch((function(e){a.logger.error("Error generating key-session request:",e),n.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},l._createLicenseXhr=function(e,t,n){var r=new XMLHttpRequest;r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,e,t,n);var i=this._licenseXhrSetup;if(i)try{i.call(this.hls,r,e),i=void 0}catch(e){a.logger.warn(e)}try{r.readyState||r.open("POST",e,!0),i&&i.call(this.hls,r,e)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return r},l._onLicenseRequestReadyStageChange=function(e,t,n,o){switch(e.readyState){case 4:if(200===e.status){this._requestLicenseFailureCount=0,a.logger.log("License request succeeded");var s=e.response,u=this._licenseResponseCallback;if(u)try{s=u.call(this.hls,e,t)}catch(e){a.logger.error(e)}o(s)}else{if(a.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var l=3-this._requestLicenseFailureCount+1;a.logger.warn("Retrying license request, "+l+" attempts left"),this._requestLicense(n,o)}}},l._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case o.KeySystems.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},l._requestLicense=function(e,t){a.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return a.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var o=this.getLicenseServerUrl(n.mediaKeySystemDomain),s=this._createLicenseXhr(o,e,t);a.logger.log("Sending license request to URL: "+o);var u=this._generateLicenseRequestChallenge(n,e);s.send(u)}catch(e){a.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},l.onMediaAttached=function(e,t){if(this._emeEnabled){var n=t.media;this._media=n,n.addEventListener("encrypted",this._onMediaEncrypted)}},l.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return e.setMediaKeys(null)})).catch((function(){})))},l.onManifestParsed=function(e,t){if(this._emeEnabled){var n=t.levels.map((function(e){return e.audioCodec})).filter((function(e){return!!e})),r=t.levels.map((function(e){return e.videoCodec})).filter((function(e){return!!e}));this._attemptKeySystemAccess(o.KeySystems.WIDEVINE,n,r)}},t=e,(n=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&s(t.prototype,n),u&&s(t,u),e}();t.default=u},"./src/controller/fps-controller.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/events.ts"),i=n("./src/utils/logger.ts"),a=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var n=this.hls.config;if(n.capLevelOnFPSDrop){var r=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=r,r&&"function"==typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,n){var a=performance.now();if(t){if(this.lastTime){var o=a-this.lastTime,s=n-this.lastDroppedFrames,u=t-this.lastDecodedFrames,l=1e3*s/o,c=this.hls;if(c.trigger(r.Events.FPS_DROP,{currentDropped:s,currentDecoded:u,totalDroppedFrames:n}),l>0&&s>c.config.fpsDroppedMonitoringThreshold*u){var d=c.currentLevel;i.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(r.Events.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},e}();t.default=a},"./src/controller/fragment-finders.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"findFragmentByPDT",(function(){return a})),n.d(t,"findFragmentByPTS",(function(){return o})),n.d(t,"fragmentWithinToleranceTest",(function(){return s})),n.d(t,"pdtWithinToleranceTest",(function(){return u})),n.d(t,"findFragWithCC",(function(){return l}));var r=n("./src/polyfills/number.ts"),i=n("./src/utils/binary-search.ts");function a(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!Object(r.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var i=0;i<e.length;++i){var a=e[i];if(u(t,n,a))return a}return null}function o(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var a=null;if(e?a=t[e.sn-t[0].sn+1]||null:0===n&&0===t[0].start&&(a=t[0]),a&&0===s(n,r,a))return a;var o=i.default.search(t,s.bind(null,n,r));return o||a}function s(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function u(e,t,n){var r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}function l(e,t){return i.default.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}},"./src/controller/fragment-tracker.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"FragmentState",(function(){return r})),n.d(t,"FragmentTracker",(function(){return o}));var r,i=n("./src/events.ts"),a=n("./src/types/loader.ts");!function(e){e.NOT_LOADED="NOT_LOADED",e.BACKTRACKED="BACKTRACKED",e.APPENDING="APPENDING",e.PARTIAL="PARTIAL",e.OK="OK"}(r||(r={}));var o=function(){function e(e){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(i.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.on(i.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(i.Events.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function(){var e=this.hls;e.off(i.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.off(i.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(i.Events.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},t.getAppendedFrag=function(e,t){if(t===a.PlaylistLevelType.MAIN){var n=this.activeFragment,r=this.activeParts;if(!n)return null;if(r)for(var i=r.length;i--;){var o=r[i],s=o?o.end:n.appendedPTS;if(o.start<=e&&void 0!==s&&e<=s)return i>9&&(this.activeParts=r.slice(i-9)),o}else if(n.start<=e&&void 0!==n.appendedPTS&&e<=n.appendedPTS)return n}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){for(var n=this.fragments,r=Object.keys(n),i=r.length;i--;){var a=n[r[i]];if((null==a?void 0:a.body.type)===t&&a.buffered){var o=a.body;if(o.start<=e&&e<=o.end)return o}}return null},t.detectEvictedFragments=function(e,t,n){var r=this;Object.keys(this.fragments).forEach((function(i){var a=r.fragments[i];if(a)if(a.buffered){var o=a.range[e];o&&o.time.some((function(e){var n=!r.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&r.removeFragment(a.body),n}))}else a.body.type===n&&r.removeFragment(a.body)}))},t.detectPartialFragments=function(e){var t=this,n=this.timeRanges,r=e.frag,i=e.part;if(n&&"initSegment"!==r.sn){var a=u(r),o=this.fragments[a];o&&(Object.keys(n).forEach((function(e){var a=r.elementaryStreams[e];if(a){var s=n[e],u=null!==i||!0===a.partial;o.range[e]=t.getBufferedTimes(r,i,u,s)}})),o.backtrack=o.loaded=null,Object.keys(o.range).length?o.buffered=!0:this.removeFragment(o.body))}},t.fragBuffered=function(e){var t=u(e),n=this.fragments[t];n&&(n.backtrack=n.loaded=null,n.buffered=!0)},t.getBufferedTimes=function(e,t,n,r){for(var i={time:[],partial:n},a=t?t.start:e.start,o=t?t.end:e.end,s=e.minEndPTS||o,u=e.maxStartPTS||a,l=0;l<r.length;l++){var c=r.start(l)-this.bufferPadding,d=r.end(l)+this.bufferPadding;if(u>=c&&s<=d){i.time.push({startPTS:Math.max(a,r.start(l)),endPTS:Math.min(o,r.end(l))});break}if(a<d&&o>c)i.partial=!0,i.time.push({startPTS:Math.max(a,r.start(l)),endPTS:Math.min(o,r.end(l))});else if(o<=c)break}return i},t.getPartialFragment=function(e){var t,n,r,i=null,a=0,o=this.bufferPadding,u=this.fragments;return Object.keys(u).forEach((function(l){var c=u[l];c&&s(c)&&(n=c.body.start-o,r=c.body.end+o,e>=n&&e<=r&&(t=Math.min(e-n,r-e),a<=t&&(i=c.body,a=t)))})),i},t.getState=function(e){var t=u(e),n=this.fragments[t];return n?n.buffered?s(n)?r.PARTIAL:r.OK:n.backtrack?r.BACKTRACKED:r.APPENDING:r.NOT_LOADED},t.backtrack=function(e,t){var n=u(e),r=this.fragments[n];if(!r||r.backtrack)return null;var i=r.backtrack=t||r.loaded;return r.loaded=null,i},t.getBacktrackData=function(e){var t=u(e),n=this.fragments[t];if(n){var r,i=n.backtrack;if(null!=i&&null!==(r=i.payload)&&void 0!==r&&r.byteLength)return i;this.removeFragment(e)}return null},t.isTimeBuffered=function(e,t,n){for(var r,i,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1},t.onFragLoaded=function(e,t){var n=t.frag,r=t.part;if("initSegment"!==n.sn&&!n.bitrateTest&&!r){var i=u(n);this.fragments[i]={body:n,loaded:t,backtrack:null,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var n=this,r=t.frag,i=t.part,o=t.timeRanges;if(r.type===a.PlaylistLevelType.MAIN)if(this.activeFragment=r,i){var s=this.activeParts;s||(this.activeParts=s=[]),s.push(i)}else this.activeParts=null;this.timeRanges=o,Object.keys(o).forEach((function(e){var t=o[e];if(n.detectEvictedFragments(e,t),!i)for(var a=0;a<t.length;a++)r.appendedPTS=Math.max(t.end(a),r.appendedPTS||0)}))},t.onFragBuffered=function(e,t){this.detectPartialFragments(t)},t.hasFragment=function(e){var t=u(e);return!!this.fragments[t]},t.removeFragmentsInRange=function(e,t,n){var r=this;Object.keys(this.fragments).forEach((function(i){var a=r.fragments[i];if(a&&a.buffered){var o=a.body;o.type===n&&o.start<t&&o.end>e&&r.removeFragment(o)}}))},t.removeFragment=function(e){var t=u(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),delete this.fragments[t]},t.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},e}();function s(e){var t,n;return e.buffered&&((null===(t=e.range.video)||void 0===t?void 0:t.partial)||(null===(n=e.range.audio)||void 0===n?void 0:n.partial))}function u(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}},"./src/controller/gap-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"STALL_MINIMUM_DURATION_MS",(function(){return s})),n.d(t,"MAX_START_GAP_JUMP",(function(){return u})),n.d(t,"SKIP_BUFFER_HOLE_STEP_SECONDS",(function(){return l})),n.d(t,"SKIP_BUFFER_RANGE_START",(function(){return c})),n.d(t,"default",(function(){return d}));var r=n("./src/utils/buffer-helper.ts"),i=n("./src/errors.ts"),a=n("./src/events.ts"),o=n("./src/utils/logger.ts"),s=250,u=2,l=.1,c=.05,d=function(){function e(e,t,n,r){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r}var t=e.prototype;return t.destroy=function(){this.hls=this.fragmentTracker=this.media=null},t.poll=function(e){var t=this.config,n=this.media,i=this.stalled,a=n.currentTime,l=n.seeking,c=this.seeking&&!l,d=!this.seeking&&l;if(this.seeking=l,a===e){if((d||c)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&r.BufferHelper.getBuffered(n).length){var f=r.BufferHelper.bufferInfo(n,a,0),h=f.len>0,p=f.nextStart||0;if(h||p){if(l){var m=f.len>u,g=!p||p-a>u&&!this.fragmentTracker.getPartialFragment(a);if(m||g)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var v,y=Math.max(p,f.start||0)-a,_=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,b=(null==_?void 0:null===(v=_.details)||void 0===v?void 0:v.live)?2*_.details.targetduration:u;if(y>0&&y<=b)return void this._trySkipBufferHole(null)}var T=self.performance.now();if(null!==i){var E=T-i;!l&&E>=s&&this._reportStall(f.len);var S=r.BufferHelper.bufferInfo(n,a,t.maxBufferHole);this._tryFixBufferStall(S,E)}else this.stalled=T}}}else if(this.moved=!0,null!==i){if(this.stallReported){var w=self.performance.now()-i;o.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(w)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,a=r.getPartialFragment(i);a&&this._trySkipBufferHole(a)||e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(o.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,o.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer (buffer="+e+")"),t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,n=this.hls,s=this.media,u=s.currentTime,d=0,f=r.BufferHelper.getBuffered(s),h=0;h<f.length;h++){var p=f.start(h);if(u+t.maxBufferHole>=d&&u<p){var m=Math.max(p+c,s.currentTime+l);return o.logger.warn("skipping hole, adjusting currentTime from "+u+" to "+m),this.moved=!0,this.stalled=null,s.currentTime=m,e&&n.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+u+" to "+m,frag:e}),m}d=f.end(h)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,r=n.currentTime,s=(this.nudgeRetry||0)+1;if(this.nudgeRetry=s,s<e.nudgeMaxRetry){var u=r+s*e.nudgeOffset;o.logger.warn("Nudging 'currentTime' from "+r+" to "+u),n.currentTime=u,t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else o.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}()},"./src/controller/id3-track-controller.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/events.ts"),i=n("./src/utils/texttrack-utils.ts"),a=n("./src/demux/id3.ts"),o=function(){function e(e){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=e,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners()},t._registerListeners=function(){var e=this.hls;e.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},t._unregisterListeners=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&(Object(i.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null)},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return Object(i.sendAddTrackEvent)(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var n=t.frag,r=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var i=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,o=0;o<r.length;o++){var s=a.getID3Frames(r[o].data);if(s){var u=r[o].pts,l=o<r.length-1?r[o+1].pts:n.end;l-u<=0&&(l=u+.25);for(var c=0;c<s.length;c++){var d=s[c];if(!a.isTimeStampFrame(d)){var f=new i(u,l,"");f.value=d,this.id3Track.addCue(f)}}}}}},t.onBufferFlushing=function(e,t){var n=t.startOffset,r=t.endOffset,a=t.type;if(!a||"audio"===a){var o=this.id3Track;o&&Object(i.removeCuesInRange)(o,n,r)}},e}();t.default=o},"./src/controller/latency-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./src/errors.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}var t,n,s,u=e.prototype;return u.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},u.registerListeners=function(){this.hls.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(i.Events.ERROR,this.onError,this)},u.unregisterListeners=function(){this.hls.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(i.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(i.Events.ERROR,this.onError)},u.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},u.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},u.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},u.onLevelUpdated=function(e,t){var n=t.details;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},u.onError=function(e,t){t.details===r.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,a.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},u.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var n=this.computeLatency();if(null!==n){this._latency=n;var r=this.config,i=r.lowLatencyMode,a=r.maxLiveSyncPlaybackRate;if(i&&1!==a){var o=this.targetLatency;if(null!==o){var s=n-o,u=s<Math.min(this.maxLatency,o+t.targetduration);if(t.live&&u&&s>.05&&this.forwardBufferLength>1){var l=Math.min(2,Math.max(1,a)),c=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;e.playbackRate=Math.min(l,Math.max(1,c))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},u.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},u.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},t=e,(n=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,n=e.partHoldBack,r=e.targetduration,i=this.config,a=i.liveSyncDuration,o=i.liveSyncDurationCount,s=i.lowLatencyMode,u=this.hls.userConfig,l=s&&n||t;(u.liveSyncDuration||u.liveSyncDurationCount||0===l)&&(l=void 0!==a?a:o*r);var c=r;return l+Math.min(1*this.stallCount,c)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;var r=n.edge,i=e-t-this.edgeStalled,a=r-n.totalduration,o=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,i),o)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var n=e.buffered.length;return n?e.buffered.end(n-1):t.edge-this.currentTime}}])&&o(t.prototype,n),s&&o(t,s),e}()},"./src/controller/level-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var r=n("./src/types/level.ts"),i=n("./src/events.ts"),a=n("./src/errors.ts"),o=n("./src/utils/codecs.ts"),s=n("./src/controller/level-helper.ts"),u=n("./src/controller/base-playlist-controller.ts"),l=n("./src/types/loader.ts");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),g=function(e){var t,n;function u(t){var n;return(n=e.call(this,t,"[level-controller]")||this)._levels=[],n._firstLevel=-1,n._startLevel=void 0,n.currentLevelIndex=-1,n.manualLevelIndex=-1,n.cleanPreviousListener=void 0,n.onParsedComplete=void 0,n._registerListeners(),n}n=e,(t=u).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var f,g,v,y=u.prototype;return y._registerListeners=function(){var e=this.hls;e.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(i.Events.ERROR,this.onError,this)},y._unregisterListeners=function(){var e=this.hls;e.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(i.Events.ERROR,this.onError,this)},y.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,e.prototype.destroy.call(this)},y.startLoad=function(){this._levels.forEach((function(e){e.loadError=0})),e.prototype.startLoad.call(this)},y.onManifestLoaded=function(e,t){var n,u,l=[],c=[],d=[],f={},h=!1,p=!1,g=!1;if(t.levels.forEach((function(e){var t=e.attrs;h=h||!(!e.width||!e.height),p=p||!!e.videoCodec,g=g||!!e.audioCodec,m&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0);var n=e.bitrate+"-"+e.attrs.RESOLUTION+"-"+e.attrs.CODECS;(u=f[n])?u.url.push(e.url):(u=new r.Level(e),f[n]=u,l.push(u)),t&&(t.AUDIO&&Object(s.addGroupId)(u,"audio",t.AUDIO),t.SUBTITLES&&Object(s.addGroupId)(u,"text",t.SUBTITLES))})),(h||p)&&g&&(l=l.filter((function(e){var t=e.videoCodec,n=e.width,r=e.height;return!!t||!(!n||!r)}))),l=l.filter((function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||Object(o.isCodecSupportedInMp4)(t,"audio"))&&(!n||Object(o.isCodecSupportedInMp4)(n,"video"))})),t.audioTracks&&(c=t.audioTracks.filter((function(e){return!e.audioCodec||Object(o.isCodecSupportedInMp4)(e.audioCodec,"audio")})),Object(s.assignTrackIdsByGroup)(c)),t.subtitles&&(d=t.subtitles,Object(s.assignTrackIdsByGroup)(d)),l.length>0){n=l[0].bitrate,l.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=l;for(var v=0;v<l.length;v++)if(l[v].bitrate===n){this._firstLevel=v,this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+n);break}var y=g&&!p,_={levels:l,audioTracks:c,subtitleTracks:d,firstLevel:this._firstLevel,stats:t.stats,audio:g,video:p,altAudio:!y&&c.some((function(e){return!!e.url}))};this.hls.trigger(i.Events.MANIFEST_PARSED,_),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},y.onError=function(t,n){if(e.prototype.onError.call(this,t,n),!n.fatal){var r=n.context,i=this._levels[this.currentLevelIndex];if(r&&(r.type===l.PlaylistContextType.AUDIO_TRACK&&i.audioGroupIds&&r.groupId===i.audioGroupIds[i.urlId]||r.type===l.PlaylistContextType.SUBTITLE_TRACK&&i.textGroupIds&&r.groupId===i.textGroupIds[i.urlId]))this.redundantFailover(this.currentLevelIndex);else{var o,s=!1,u=!0;switch(n.details){case a.ErrorDetails.FRAG_LOAD_ERROR:case a.ErrorDetails.FRAG_LOAD_TIMEOUT:case a.ErrorDetails.KEY_LOAD_ERROR:case a.ErrorDetails.KEY_LOAD_TIMEOUT:if(n.frag){var c=this._levels[n.frag.level];c?(c.fragmentError++,c.fragmentError>this.hls.config.fragLoadingMaxRetry&&(o=n.frag.level)):o=n.frag.level}break;case a.ErrorDetails.LEVEL_LOAD_ERROR:case a.ErrorDetails.LEVEL_LOAD_TIMEOUT:r&&(r.deliveryDirectives&&(u=!1),o=r.level),s=!0;break;case a.ErrorDetails.REMUX_ALLOC_ERROR:o=n.level,s=!0}void 0!==o?this.recoverLevel(n,o,s,u):this.recoverAudioFailOver(t,n)}}},y.recoverLevel=function(e,t,n,r){var i=e.details,a=this._levels[t];if(a.loadError++,n){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}if(r){var o=a.url.length;if(o>1&&a.loadError<o)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){var s=0===t?this._levels.length-1:t-1;this.currentLevelIndex!==s&&0===this._levels[s].loadError&&(this.warn(i+": switch to "+s),e.levelRetry=!0,this.hls.nextAutoLevel=s)}}},y.recoverAudioFailOver=function(e,t){var n,r,i=t.details;i!==a.ErrorDetails.FRAG_LOAD_ERROR&&i!==a.ErrorDetails.FRAG_LOAD_TIMEOUT&&i!==a.ErrorDetails.KEY_LOAD_ERROR&&i!==a.ErrorDetails.KEY_LOAD_TIMEOUT||(null===(r=t.frag)||void 0===r?void 0:r.type)===l.PlaylistLevelType.AUDIO&&void 0!==(n=this.getNextLevelWithAudioFailOver())&&this.switchLevelInAudioFailOver(t,n)},y.getNextLevelWithAudioFailOver=function(){var e,t=this,n=this.hls.audioTrack;if(-1!==n){for(var r,i,a,o,s,u,l=this.hls.audioTracks[n],c=d(this._levels.map((function(e,t){return{level:e,index:t}})).filter((function(e){return-1===e.level.audioGroupIds.indexOf(l.groupId)})).map((function(e){return{difference:e.index-t.hls.nextAutoLevel,index:e.index}})));!(u=c()).done;){var f=u.value;f.difference<0&&(!o||o.difference<f.difference)&&(o=f),f.difference>0&&(!s||s.difference<f.difference)&&(s=f)}var h=null!=(r=null===(i=o)||void 0===i?void 0:i.index)?r:null===(a=s)||void 0===a?void 0:a.index;void 0!==h&&(e=h)}return e},y.switchLevelInAudioFailOver=function(e,t){var n=this,r=e.details;if(this._levels[t].loadError++,-1===this.manualLevelIndex&&this.currentLevelIndex!==t){this.warn(r+": switch to "+t),this.hls.nextAutoLevel=t;var a=e.frag;if(a&&a.type===l.PlaylistLevelType.AUDIO&&"number"==typeof a.sn){var o=a.sn+2;this.warn("auto level will be restricted until fragment "+o+".");var s=function(){n.log("auto level restriction cancelled due to seeking."),n.cleanPreviousListener()}.bind(this),u=function(e,t){t.frag.sn>=o&&(n.log("auto level restriction lifted."),n.cleanPreviousListener())}.bind(this),c=function(e,r){n.log("restrict auto level to "+t+" until we play through fragment "+a.sn+". Currently on "+a.type),n.hls.nextAutoLevel=t};this.hls.media&&(this.hls.media.addEventListener("seeking",s),this.hls.on(i.Events.FRAG_CHANGED,u),this.hls.on(i.Events.FRAG_LOADED,c)),this.cleanPreviousListener&&this.cleanPreviousListener(),this.cleanPreviousListener=function(){n.hls.media&&(n.hls.media.removeEventListener("seeking",s),n.hls.off(i.Events.FRAG_CHANGED,u),n.hls.off(i.Events.FRAG_LOADED,c))}.bind(this)}}},y.redundantFailover=function(e){var t=this._levels[e],n=t.url.length;if(n>1){var r=(t.urlId+1)%n;this.warn("Switching to redundant URL-id "+r),this._levels.forEach((function(e){e.urlId=r})),this.level=e}},y.onFragLoaded=function(e,t){var n=t.frag;if(void 0!==n&&n.type===l.PlaylistLevelType.MAIN){var r=this._levels[n.level];void 0!==r&&(r.fragmentError=0,r.loadError=0)}},y.onLevelLoaded=function(e,t){var n,r,i=t.level,a=t.details,o=this._levels[i];if(!o)return this.warn("Invalid level index "+i),void(null!==(r=t.deliveryDirectives)&&void 0!==r&&r.skip&&(a.deltaUpdateFailed=!0));i===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0,this.retryCount=0),this.playlistLoaded(i,t,o.details)):null!==(n=t.deliveryDirectives)&&void 0!==n&&n.skip&&(a.deltaUpdateFailed=!0)},y.onAudioTrackSwitched=function(e,t){var n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=this.hls.audioTracks[t.id].groupId,a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===i){r=a;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},y.loadPlaylist=function(e){var t=this.currentLevelIndex,n=this._levels[t];if(this.canLoad&&n&&n.url.length>0){var r=n.urlId,a=n.url[r];if(e)try{a=e.addDirectives(a)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Attempt loading level index "+t+(e?" at sn "+e.msn+" part "+e.part:"")+" with URL-id "+r+" "+a),this.clearTimer(),this.hls.trigger(i.Events.LEVEL_LOADING,{url:a,level:t,id:r,deliveryDirectives:e||null})}},y.removeLevel=function(e,t){var n=function(e,n){return n!==t},r=this._levels.filter((function(r,i){return i!==e||r.url.length>1&&void 0!==t&&(r.url=r.url.filter(n),r.audioGroupIds&&(r.audioGroupIds=r.audioGroupIds.filter(n)),r.textGroupIds&&(r.textGroupIds=r.textGroupIds.filter(n)),r.urlId=0,!0)})).map((function(e,t){var n=e.details;return null!=n&&n.fragments&&n.fragments.forEach((function(e){e.level=t})),e}));this._levels=r,this.hls.trigger(i.Events.LEVELS_UPDATED,{levels:r})},f=u,(g=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t,n=this._levels;if(0!==n.length&&(this.currentLevelIndex!==e||null===(t=n[e])||void 0===t||!t.details)){if(e<0||e>=n.length){var r=e<0;if(this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.OTHER_ERROR,details:a.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:r,reason:"invalid level idx"}),r)return;e=Math.min(e,n.length-1)}this.clearTimer();var o=this.currentLevelIndex,s=n[o],u=n[e];this.log("switching to level "+e+" from "+o),this.currentLevelIndex=e;var l=c({},u,{level:e,maxBitrate:u.maxBitrate,uri:u.uri,urlId:u.urlId});delete l._urlId,this.hls.trigger(i.Events.LEVEL_SWITCHING,l);var d=u.details;if(!d||d.live){var f=this.switchParams(u.uri,null==s?void 0:s.details);this.loadPlaylist(f)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&h(f.prototype,g),v&&h(f,v),u}(u.default)},"./src/controller/level-helper.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"addGroupId",(function(){return a})),n.d(t,"assignTrackIdsByGroup",(function(){return o})),n.d(t,"updatePTS",(function(){return s})),n.d(t,"updateFragPTSDTS",(function(){return l})),n.d(t,"mergeDetails",(function(){return c})),n.d(t,"mapPartIntersection",(function(){return d})),n.d(t,"mapFragmentIntersection",(function(){return f})),n.d(t,"adjustSliding",(function(){return h})),n.d(t,"addSliding",(function(){return p})),n.d(t,"computeReloadInterval",(function(){return m})),n.d(t,"getFragmentWithSN",(function(){return g})),n.d(t,"getPartWith",(function(){return v}));var r=n("./src/polyfills/number.ts"),i=n("./src/utils/logger.ts");function a(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function o(e){var t={};e.forEach((function(e){var n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}function s(e,t,n){u(e[t],e[n])}function u(e,t){var n=t.startPTS;if(Object(r.isFiniteNumber)(n)){var i,a=0;t.sn>e.sn?(a=n-e.start,i=e):(a=e.start-n,i=t),i.duration!==a&&(i.duration=a)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function l(e,t,n,a,o,s){a-n<=0&&(i.logger.warn("Fragment should have a positive duration",t),a=n+t.duration,s=o+t.duration);var l=n,c=a,d=t.startPTS,f=t.endPTS;if(Object(r.isFiniteNumber)(d)){var h=Math.abs(d-n);Object(r.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(h,t.deltaPTS):t.deltaPTS=h,l=Math.max(n,d),n=Math.min(n,d),o=Math.min(o,t.startDTS),c=Math.min(a,f),a=Math.max(a,f),s=Math.max(s,t.endDTS)}t.duration=a-n;var p=n-t.start;t.appendedPTS=a,t.start=t.startPTS=n,t.maxStartPTS=l,t.startDTS=o,t.endPTS=a,t.minEndPTS=c,t.endDTS=s;var m,g=t.sn;if(!e||g<e.startSN||g>e.endSN)return 0;var v=g-e.startSN,y=e.fragments;for(y[v]=t,m=v;m>0;m--)u(y[m],y[m-1]);for(m=v;m<y.length-1;m++)u(y[m],y[m+1]);return e.fragmentHint&&u(y[y.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,p}function c(e,t){for(var n=null,a=e.fragments,o=a.length-1;o>=0;o--){var s=a[o].initSegment;if(s){n=s;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var u,c=0;if(f(e,t,(function(e,i){var a;e.relurl&&(c=e.cc-i.cc),Object(r.isFiniteNumber)(e.startPTS)&&Object(r.isFiniteNumber)(e.endPTS)&&(i.start=i.startPTS=e.startPTS,i.startDTS=e.startDTS,i.appendedPTS=e.appendedPTS,i.maxStartPTS=e.maxStartPTS,i.endPTS=e.endPTS,i.endDTS=e.endDTS,i.minEndPTS=e.minEndPTS,i.duration=e.endPTS-e.startPTS,i.duration&&(u=i),t.PTSKnown=t.alignedSliding=!0),i.elementaryStreams=e.elementaryStreams,i.loader=e.loader,i.stats=e.stats,i.urlId=e.urlId,e.initSegment?(i.initSegment=e.initSegment,n=e.initSegment):i.initSegment&&i.initSegment.relurl!=(null===(a=n)||void 0===a?void 0:a.relurl)||(i.initSegment=n)})),t.skippedSegments&&(t.deltaUpdateFailed=t.fragments.some((function(e){return!e})),t.deltaUpdateFailed)){i.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var p=t.skippedSegments;p--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}var m=t.fragments;if(c){i.logger.warn("discontinuity sliding from playlist, take drift into account");for(var g=0;g<m.length;g++)m[g].cc+=c;t.fragmentHint&&(t.fragmentHint.cc+=c)}t.skippedSegments&&(t.startCC=t.fragments[0].cc);for(var v=0;v<m.length;v++){var y,_=m[v];_.initSegment&&_.initSegment.relurl==(null===(y=n)||void 0===y?void 0:y.relurl)&&(_.initSegment=n)}d(e.partList,t.partList,(function(e,t){t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),u?l(t,u,u.startPTS,u.endPTS,u.startDTS,u.endDTS):h(e,t),m.length&&(t.totalduration=t.edge-m[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;var b=t.advancedDateTime;if(t.advanced&&b){var T=t.edge;t.driftStart||(t.driftStartTime=b,t.driftStart=T),t.driftEndTime=b,t.driftEnd=T}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function d(e,t,n){if(e&&t)for(var r=0,i=0,a=e.length;i<=a;i++){var o=e[i],s=t[i+r];o&&s&&o.index===s.index&&o.fragment.sn===s.fragment.sn?n(o,s):r--}}function f(e,t,n){for(var r=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(r?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,o=t.startSN-e.startSN,s=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,u=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=null,c=i;c<=a;c++){var d=u[o+c],f=s[c];if(r&&!f&&c<r&&(f=t.fragments[c]=d),d&&f)l=d,n(d,f);else if(f&&l){var h,p,m;(null===(h=f.initSegment)||void 0===h?void 0:h.relurl)==(null===(p=l)||void 0===p?void 0:null===(m=p.initSegment)||void 0===m?void 0:m.relurl)&&(f.initSegment=l.initSegment)}}}function h(e,t){var n=t.startSN+t.skippedSegments-e.startSN,r=e.fragments;n<0||n>=r.length||p(t,r[n].start)}function p(e,t){if(t){for(var n=e.fragments,r=e.skippedSegments;r<n.length;r++)n[r].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function m(e,t){var n,r=1e3*e.levelTargetDuration,i=r/2,a=e.age,o=a>0&&a<3*r,s=t.loading.end-t.loading.start,u=e.availabilityDelay;if(!1===e.updated)if(o){var l=333*e.misses;n=Math.max(Math.min(i,2*s),l),e.availabilityDelay=(e.availabilityDelay||0)+n}else n=i;else o?(u=Math.min(u||r/2,a),e.availabilityDelay=u,n=u+r-a):n=r-s;return Math.round(n)}function g(e,t,n){if(!e||!e.details)return null;var r=e.details,i=r.fragments[t-r.startSN];return i||((i=r.fragmentHint)&&i.sn===t?i:t<r.startSN&&n&&n.sn===t?n:null)}function v(e,t,n){if(!e||!e.details)return null;var r=e.details.partList;if(r)for(var i=r.length;i--;){var a=r[i];if(a.index===n&&a.fragment.sn===t)return a}return null}},"./src/controller/stream-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var r=n("./src/polyfills/number.ts"),i=n("./src/controller/base-stream-controller.ts"),a=n("./src/is-supported.ts"),o=n("./src/events.ts"),s=n("./src/utils/buffer-helper.ts"),u=n("./src/controller/fragment-tracker.ts"),l=n("./src/types/loader.ts"),c=n("./src/loader/fragment.ts"),d=n("./src/demux/transmuxer-interface.ts"),f=n("./src/types/transmuxer.ts"),h=n("./src/controller/gap-controller.ts"),p=n("./src/errors.ts"),m=n("./src/utils/logger.ts");function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){var t,n;function y(t,n){var r;return(r=e.call(this,t,n,"[stream-controller]")||this).audioCodecSwap=!1,r.gapController=null,r.level=-1,r._forceStartLoad=!1,r.altAudio=!1,r.audioOnly=!1,r.fragPlaying=null,r.onvplaying=null,r.onvseeked=null,r.fragLastKbps=0,r.stalled=!1,r.couldBacktrack=!1,r.audioCodecSwitch=!1,r.videoBuffer=null,r._registerListeners(),r}n=e,(t=y).prototype=Object.create(n.prototype),t.prototype.constructor=t,v(t,n);var _,b,T,E=y.prototype;return E._registerListeners=function(){var e=this.hls;e.on(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(o.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(o.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(o.Events.ERROR,this.onError,this),e.on(o.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(o.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(o.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(o.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(o.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E._unregisterListeners=function(){var e=this.hls;e.off(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(o.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(o.Events.ERROR,this.onError,this),e.off(o.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(o.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(o.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(o.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(o.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},E.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(n.config.testBandwidth?(r=0,this.bitrateTest=!0):r=n.nextAutoLevel),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=i.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=i.State.STOPPED},E.stopLoad=function(){this._forceStartLoad=!1,e.prototype.stopLoad.call(this)},E.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_LEVEL:var e,t=this.levels,n=this.level,r=null==t?void 0:null===(e=t[n])||void 0===e?void 0:e.details;if(r&&(!r.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(r))break;this.state=i.State.IDLE;break}break;case i.State.FRAG_LOADING_WAITING_RETRY:var a,o=self.performance.now(),s=this.retryDate;(!s||o>=s||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=i.State.IDLE)}this.onTickEnd()},E.onTickEnd=function(){e.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},E.doTickIdle=function(){var e,t,n=this.hls,r=this.levelLastLoaded,a=this.levels,s=this.media,d=n.config,f=n.nextLoadLevel;if(null!==r&&(s||!this.startFragRequested&&d.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&a&&a[f]){var h=a[f];this.level=n.nextLoadLevel=f;var p=h.details;if(!p||this.state===i.State.WAITING_LEVEL||p.live&&this.levelLastLoaded!==f)this.state=i.State.WAITING_LEVEL;else{var m=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:s,l.PlaylistLevelType.MAIN);if(null!==m&&!(m.len>=this.getMaxBufferLength(h.maxBitrate))){if(this._streamEnded(m,p)){var g={};return this.altAudio&&(g.type="video"),this.hls.trigger(o.Events.BUFFER_EOS,g),void(this.state=i.State.ENDED)}var v=m.end,y=this.getNextFragment(v,p);if(this.couldBacktrack&&!this.fragPrevious&&y&&"initSegment"!==y.sn){var _=y.sn-p.startSN;_>1&&(y=p.fragments[_-1],this.fragmentTracker.removeFragment(y))}if(y&&this.fragmentTracker.getState(y)===u.FragmentState.OK&&this.nextLoadPosition>v){var b=this.audioOnly&&!this.altAudio?c.ElementaryStreamTypes.AUDIO:c.ElementaryStreamTypes.VIDEO;this.afterBufferFlushed(s,b,l.PlaylistLevelType.MAIN),y=this.getNextFragment(this.nextLoadPosition,p)}y&&(!y.initSegment||y.initSegment.data||this.bitrateTest||(y=y.initSegment),"identity"!==(null===(e=y.decryptdata)||void 0===e?void 0:e.keyFormat)||null!==(t=y.decryptdata)&&void 0!==t&&t.key?this.loadFragment(y,p,v):this.loadKey(y,p))}}}},E.loadFragment=function(t,n,r){var i,a=this.fragmentTracker.getState(t);if(this.fragCurrent=t,a===u.FragmentState.BACKTRACKED){var o=this.fragmentTracker.getBacktrackData(t);if(o)return this._handleFragmentLoadProgress(o),void this._handleFragmentLoadComplete(o);a=u.FragmentState.NOT_LOADED}a===u.FragmentState.NOT_LOADED||a===u.FragmentState.PARTIAL?"initSegment"===t.sn?this._loadInitSegment(t):this.bitrateTest?(t.bitrateTest=!0,this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t)):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,r)):a===u.FragmentState.APPENDING?this.reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t):0===(null===(i=this.media)||void 0===i?void 0:i.buffered.length)&&this.fragmentTracker.removeAllFragments()},E.getAppendedFrag=function(e){var t=this.fragmentTracker.getAppendedFrag(e,l.PlaylistLevelType.MAIN);return t&&"fragment"in t?t.fragment:t},E.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,l.PlaylistLevelType.MAIN)},E.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},E.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},E.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var n,r=this.getAppendedFrag(t.currentTime);if(r&&r.start>1&&this.flushMainBuffer(0,r.start-1),!t.paused&&e){var i=e[this.hls.nextLoadLevel],a=this.fragLastKbps;n=a&&this.fragCurrent?this.fragCurrent.duration*i.maxBitrate/(1e3*a)+1:0}else n=0;var o=this.getBufferedFrag(t.currentTime+n);if(o){var s=this.followingBufferedFrag(o);if(s){this.abortCurrentFrag();var u=s.maxStartPTS?s.maxStartPTS:s.start,l=s.duration,c=Math.max(o.end,u+Math.min(Math.max(l-this.config.maxFragLookUpTolerance,.5*l),.75*l));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}},E.abortCurrentFrag=function(){var e=this.fragCurrent;this.fragCurrent=null,null!=e&&e.loader&&e.loader.abort(),this.state===i.State.KEY_LOADING&&(this.state=i.State.IDLE),this.nextLoadPosition=this.getLoadPosition()},E.flushMainBuffer=function(t,n){e.prototype.flushMainBuffer.call(this,t,n,this.altAudio?"video":null)},E.onMediaAttached=function(t,n){e.prototype.onMediaAttached.call(this,t,n);var r=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new h.default(this.config,r,this.fragmentTracker,this.hls)},E.onMediaDetaching=function(){var t=this.media;t&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),e.prototype.onMediaDetaching.call(this)},E.onMediaPlaying=function(){this.tick()},E.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:null;Object(r.isFiniteNumber)(t)&&this.log("Media seeked to "+t.toFixed(3)),this.tick()},E.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(o.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},E.onManifestParsed=function(e,t){var n,r=!1,i=!1;t.levels.forEach((function(e){(n=e.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(r=!0),-1!==n.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=r&&i&&!Object(a.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},E.onLevelLoading=function(e,t){var n=this.levels;if(n&&this.state===i.State.IDLE){var r=n[t.level];(!r.details||r.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(r.details))&&(this.state=i.State.WAITING_LEVEL)}},E.onLevelLoaded=function(e,t){var n,r=this.levels,a=t.level,s=t.details,u=s.totalduration;if(r){this.log("Level "+a+" loaded ["+s.startSN+","+s.endSN+"], cc ["+s.startCC+", "+s.endCC+"] duration:"+u);var l=this.fragCurrent;!l||this.state!==i.State.FRAG_LOADING&&this.state!==i.State.FRAG_LOADING_WAITING_RETRY||l.level!==t.level&&l.loader&&(this.state=i.State.IDLE,l.loader.abort());var c=r[a],d=0;if(s.live||null!==(n=c.details)&&void 0!==n&&n.live){if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed)return;d=this.alignPlaylists(s,c.details)}if(c.details=s,this.levelLastLoaded=a,this.hls.trigger(o.Events.LEVEL_UPDATED,{details:s,level:a}),this.state===i.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(s))return;this.state=i.State.IDLE}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,d),this.tick()}else this.warn("Levels were reset while loading level "+a)},E._handleFragmentLoadProgress=function(e){var t,n=e.frag,r=e.part,i=e.payload,a=this.levels;if(a){var o=a[n.level],s=o.details;if(s){var u=o.videoCodec,c=s.PTSKnown||!s.live,h=null===(t=n.initSegment)||void 0===t?void 0:t.data,p=this._getAudioCodec(o),m=this.transmuxer=this.transmuxer||new d.default(this.hls,l.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),g=r?r.index:-1,v=-1!==g,y=new f.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,i.byteLength,g,v),_=this.initPTS[n.cc];m.push(i,h,p,u,n,r,s.totalduration,c,y,_)}else this.warn("Dropping fragment "+n.sn+" of level "+n.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},E.onAudioTrackSwitching=function(e,t){var n=this.altAudio,r=!!t.url,i=t.id;if(!r){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;null!=a&&a.loader&&(this.log("Switching to main audio track, cancel main fragment load"),a.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var s=this.hls;n&&s.trigger(o.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),s.trigger(o.Events.AUDIO_TRACK_SWITCHED,{id:i})}},E.onAudioTrackSwitched=function(e,t){var n=t.id,r=!!this.hls.audioTracks[n].url;if(r){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r,this.tick()},E.onBufferCreated=function(e,t){var n,r,i=t.tracks,a=!1;for(var o in i){var s=i[o];if("main"===s.id){if(r=o,n=s,"video"===o){var u=i[o];u&&(this.videoBuffer=u.buffer)}}else a=!0}a&&n?(this.log("Alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},E.onFragBuffered=function(e,t){var n=t.frag,r=t.part;if(!n||n.type===l.PlaylistLevelType.MAIN){if(this.fragContextChanged(n))return this.warn("Fragment "+n.sn+(r?" p: "+r.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===i.State.PARSED&&(this.state=i.State.IDLE));var a=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}},E.onError=function(e,t){switch(t.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(l.PlaylistLevelType.MAIN,t);break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==i.State.ERROR&&(t.fatal?(this.warn(""+t.details),this.state=i.State.ERROR):t.levelRetry||this.state!==i.State.WAITING_LEVEL||(this.state=i.State.IDLE));break;case p.ErrorDetails.BUFFER_FULL_ERROR:if("main"===t.parent&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var n=!0,r=this.getFwdBufferInfo(this.media,l.PlaylistLevelType.MAIN);r&&r.len>.5&&(n=!this.reduceMaxBufferLength(r.len)),n&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},E.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){var n=s.BufferHelper.getBuffered(e);!this.loadedmetadata&&n.length?(this.loadedmetadata=!0,this.seekToStartPos()):t.poll(this.lastCurrentTime),this.lastCurrentTime=e.currentTime}},E.onFragLoadEmergencyAborted=function(){this.state=i.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},E.onBufferFlushed=function(e,t){var n=t.type;if(n!==c.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var r=(n===c.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(r,n,l.PlaylistLevelType.MAIN)}},E.onLevelsUpdated=function(e,t){this.levels=t.levels},E.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},E.seekToStartPos=function(){var e=this.media,t=e.currentTime,n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void m.logger.log("could not seek to "+n+", already seeking at "+t);var r=s.BufferHelper.getBuffered(e),i=(r.length?r.start(0):0)-n;i>0&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(m.logger.log("adjusting start position by "+i+" to match buffer start"),n+=i,this.startPosition=n),this.log("seek to target start position "+n+" from current time "+t),e.currentTime=n}},E._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},E._loadBitrateTestFrag=function(e){var t=this;this._doFragLoad(e).then((function(n){var r=t.hls;if(n&&!r.nextLoadLevel&&!t.fragContextChanged(e)){t.fragLoadError=0,t.state=i.State.IDLE,t.startFragRequested=!1,t.bitrateTest=!1;var a=e.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),r.trigger(o.Events.FRAG_LOADED,n)}}))},E._handleTransmuxComplete=function(e){var t,n="main",a=this.hls,s=e.remuxResult,u=e.chunkMeta,l=this.getCurrentContext(u);if(!l)return this.warn("The loading context changed while buffering fragment "+u.sn+" of level "+u.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(u.level);var d=l.frag,f=l.part,h=l.level,p=s.video,m=s.text,g=s.id3,v=s.initSegment,y=this.altAudio?void 0:s.audio;if(!this.fragContextChanged(d)){if(this.state=i.State.PARSING,v){v.tracks&&(this._bufferInitSegment(h,v.tracks,d,u),a.trigger(o.Events.FRAG_PARSING_INIT_SEGMENT,{frag:d,id:n,tracks:v.tracks}));var _=v.initPTS,b=v.timescale;Object(r.isFiniteNumber)(_)&&(this.initPTS[d.cc]=_,a.trigger(o.Events.INIT_PTS_FOUND,{frag:d,id:n,initPTS:_,timescale:b}))}if(p&&!1!==s.independent){if(h.details){var T=p.startPTS,E=p.endPTS,S=p.startDTS,w=p.endDTS;if(f)f.elementaryStreams[p.type]={startPTS:T,endPTS:E,startDTS:S,endDTS:w};else if(p.firstKeyFrame&&p.independent&&(this.couldBacktrack=!0),p.dropped&&p.independent){if(this.getLoadPosition()+this.config.maxBufferHole<T)return void this.backtrack(d);d.setElementaryStreamInfo(p.type,d.start,E,d.start,w,!0)}d.setElementaryStreamInfo(p.type,T,E,S,w),this.bufferFragmentData(p,d,f,u)}}else if(!1===s.independent)return void this.backtrack(d);if(y){var A=y.startPTS,M=y.endPTS,L=y.startDTS,C=y.endDTS;f&&(f.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:A,endPTS:M,startDTS:L,endDTS:C}),d.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,A,M,L,C),this.bufferFragmentData(y,d,f,u)}if(null!=g&&null!==(t=g.samples)&&void 0!==t&&t.length){var D={frag:d,id:n,samples:g.samples};a.trigger(o.Events.FRAG_PARSING_METADATA,D)}if(m){var k={frag:d,id:n,samples:m.samples};a.trigger(o.Events.FRAG_PARSING_USERDATA,k)}}},E._bufferInitSegment=function(e,t,n,r){var a=this;if(this.state===i.State.PARSING){this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;var s=t.audio,u=t.video,l=t.audiovideo;if(s){var c=e.audioCodec,d=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==s.metadata.channelCount&&-1===d.indexOf("firefox")&&(c="mp4a.40.5")),-1!==d.indexOf("android")&&"audio/mpeg"!==s.container&&(c="mp4a.40.2",this.log("Android: force audio codec to "+c)),e.audioCodec&&e.audioCodec!==c&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+c+'"'),s.levelCodec=c,s.id="main",this.log("Init audio buffer, container:"+s.container+", codecs[selected/level/parsed]=["+(c||"")+"/"+(e.audioCodec||"")+"/"+s.codec+"]")}u&&(u.levelCodec=e.videoCodec,u.id="main",this.log("Init video buffer, container:"+u.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+u.codec+"]")),l&&this.log("Init audiovideo buffer, container:"+l.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+l.codec+"]"),this.hls.trigger(o.Events.BUFFER_CODECS,t),Object.keys(t).forEach((function(e){var i=t[e].initSegment;null!=i&&i.byteLength&&a.hls.trigger(o.Events.BUFFER_APPENDING,{type:e,data:i,frag:n,part:null,chunkMeta:r,parent:n.type})})),this.tick()}},E.backtrack=function(e){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(e);var t=this.fragmentTracker.backtrack(e);this.fragPrevious=null,this.nextLoadPosition=e.start,t?this.resetFragmentLoading(e):this.state=i.State.BACKTRACKING},E.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){var n=e.currentTime;if(s.BufferHelper.isBuffered(e,n)?t=this.getAppendedFrag(n):s.BufferHelper.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){var r=this.fragPlaying,i=t.level;r&&t.sn===r.sn&&r.level===i&&t.urlId===r.urlId||(this.hls.trigger(o.Events.FRAG_CHANGED,{frag:t}),r&&r.level===i||this.hls.trigger(o.Events.LEVEL_SWITCHED,{level:i}),this.fragPlaying=t)}}},_=y,(b=[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getAppendedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;if(e){var t=this.getAppendedFrag(e.currentTime);return this.followingBufferedFrag(t)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&g(_.prototype,b),T&&g(_,T),y}(i.default)},"./src/controller/subtitle-stream-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"SubtitleStreamController",(function(){return m}));var r=n("./src/events.ts"),i=n("./src/utils/logger.ts"),a=n("./src/utils/buffer-helper.ts"),o=n("./src/controller/fragment-finders.ts"),s=n("./src/utils/discontinuities.ts"),u=n("./src/controller/level-helper.ts"),l=n("./src/controller/fragment-tracker.ts"),c=n("./src/controller/base-stream-controller.ts"),d=n("./src/types/loader.ts"),f=n("./src/types/level.ts");function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){var t,n;function m(t,n){var r;return(r=e.call(this,t,n,"[subtitle-stream-controller]")||this).levels=[],r.currentTrackId=-1,r.tracksBuffered=[],r.mainDetails=null,r._registerListeners(),r}n=e,(t=m).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var g,v,y,_=m.prototype;return _.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},_._registerListeners=function(){var e=this.hls;e.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(r.Events.ERROR,this.onError,this),e.on(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(r.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(r.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},_._unregisterListeners=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(r.Events.ERROR,this.onError,this),e.off(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(r.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(r.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},_.startLoad=function(){this.stopLoad(),this.state=c.State.IDLE,this.setInterval(500),this.tick()},_.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},_.onLevelLoaded=function(e,t){this.mainDetails=t.details},_.onSubtitleFragProcessed=function(e,t){var n=t.frag,r=t.success;if(this.fragPrevious=n,this.state=c.State.IDLE,r){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var a,o=n.start,s=0;s<i.length;s++)if(o>=i[s].start&&o<=i[s].end){a=i[s];break}var u=n.start+n.duration;a?a.end=u:(a={start:o,end:u},i.push(a)),this.fragmentTracker.fragBuffered(n)}}},_.onBufferFlushing=function(e,t){var n=t.startOffset,r=t.endOffset;if(0===n&&r!==Number.POSITIVE_INFINITY){var i=this.currentTrackId,a=this.levels;if(!a.length||!a[i]||!a[i].details)return;var o=r-a[i].details.targetduration;if(o<=0)return;t.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach((function(e){for(var t=0;t<e.length;)if(e[t].end<=o)e.shift();else{if(!(e[t].start<o))break;e[t].start=o,t++}})),this.fragmentTracker.removeFragmentsInRange(n,o,d.PlaylistLevelType.SUBTITLE)}},_.onError=function(e,t){var n,r=t.frag;r&&r.type===d.PlaylistLevelType.SUBTITLE&&(null!==(n=this.fragCurrent)&&void 0!==n&&n.loader&&this.fragCurrent.loader.abort(),this.state=c.State.IDLE)},_.onSubtitleTracksUpdated=function(e,t){var n=this,r=t.subtitleTracks;this.tracksBuffered=[],this.levels=r.map((function(e){return new f.Level(e)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(e){n.tracksBuffered[e.id]=[]})),this.mediaBuffer=null},_.onSubtitleTrackSwitch=function(e,t){if(this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId){var n=this.levels[this.currentTrackId];null!=n&&n.details?(this.mediaBuffer=this.mediaBufferTimeRanges,this.setInterval(500)):this.mediaBuffer=null}else this.clearInterval()},_.onSubtitleTrackLoaded=function(e,t){var n,r=t.details,i=t.id,a=this.currentTrackId,l=this.levels;if(l.length){var d=l[a];if(!(i>=l.length||i!==a)&&d){if(this.mediaBuffer=this.mediaBufferTimeRanges,r.live||null!==(n=d.details)&&void 0!==n&&n.live){var f=this.mainDetails;if(r.deltaUpdateFailed||!f)return;var h=f.fragments[0];d.details?0===this.alignPlaylists(r,d.details)&&h&&Object(u.addSliding)(r,h.start):r.hasProgramDateTime&&f.hasProgramDateTime?Object(s.alignMediaPlaylistByPDT)(r,f):h&&Object(u.addSliding)(r,h.start)}d.details=r,this.levelLastLoaded=i,this.tick(),r.live&&!this.fragCurrent&&this.media&&this.state===c.State.IDLE&&(Object(o.findFragmentByPTS)(null,r.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),d.details=void 0))}}},_._handleFragmentLoadComplete=function(e){var t=e.frag,n=e.payload,i=t.decryptdata,a=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i&&i.key&&i.iv&&"AES-128"===i.method){var o=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).then((function(e){var n=performance.now();a.trigger(r.Events.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:o,tdecrypt:n}})}))}},_.doTick=function(){if(this.media){if(this.state===c.State.IDLE){var e,t=this.currentTrackId,n=this.levels;if(!n.length||!n[t]||!n[t].details)return;var s=n[t].details,u=s.targetduration,d=this.config,f=this.media,h=a.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,f.currentTime-u,d.maxBufferHole),p=h.end;if(h.len>this.getMaxBufferLength()+u)return;console.assert(s,"Subtitle track details are defined on idle subtitle stream controller tick");var m,g=s.fragments,v=g.length,y=s.edge,_=this.fragPrevious;if(p<y){var b=d.maxFragLookUpTolerance;_&&s.hasProgramDateTime&&(m=Object(o.findFragmentByPDT)(g,_.endProgramDateTime,b)),m||!(m=Object(o.findFragmentByPTS)(_,g,p,b))&&_&&_.start<g[0].start&&(m=g[0])}else m=g[v-1];null!==(e=m)&&void 0!==e&&e.encrypted?(i.logger.log("Loading key for "+m.sn),this.state=c.State.KEY_LOADING,this.hls.trigger(r.Events.KEY_LOADING,{frag:m})):m&&this.fragmentTracker.getState(m)===l.FragmentState.NOT_LOADED&&this.loadFragment(m,s,p)}}else this.state=c.State.IDLE},_.loadFragment=function(t,n,r){this.fragCurrent=t,e.prototype.loadFragment.call(this,t,n,r)},g=m,(v=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&h(g.prototype,v),y&&h(g,y),m}(c.default)},"./src/controller/subtitle-track-controller.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/events.ts"),i=n("./src/utils/texttrack-utils.ts"),a=n("./src/controller/base-playlist-controller.ts"),o=n("./src/types/loader.ts");function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){var t,n;function a(t){var n;return(n=e.call(this,t,"[subtitle-track-controller]")||this).media=null,n.tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.selectDefaultTrack=!0,n.queuedDefaultTrack=-1,n.trackChangeListener=function(){return n.onTextTracksChanged()},n.asyncPollTrackChange=function(){return n.pollTrackChange(0)},n.useTextTrackPolling=!1,n.subtitlePollingInterval=-1,n.subtitleDisplay=!0,n.registerListeners(),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var l,d,f,h=a.prototype;return h.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,e.prototype.destroy.call(this)},h.registerListeners=function(){var e=this.hls;e.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(r.Events.ERROR,this.onError,this)},h.unregisterListeners=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(r.Events.ERROR,this.onError,this)},h.onMediaAttached=function(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},h.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},h.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),c(this.media.textTracks).forEach((function(e){Object(i.clearCurrentCues)(e)})),this.subtitleTrack=-1,this.media=null)},h.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},h.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},h.onSubtitleTrackLoaded=function(e,t){var n=t.id,r=t.details,i=this.trackId,a=this.tracksInGroup[i];if(a){var o=a.details;a.details=t.details,this.log("subtitle track "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,t,o))}else this.warn("Invalid subtitle track id "+n)},h.onLevelLoading=function(e,t){this.switchLevel(t.level)},h.onLevelSwitching=function(e,t){this.switchLevel(t.level)},h.switchLevel=function(e){var t=this.hls.levels[e];if(null!=t&&t.textGroupIds){var n=t.textGroupIds[t.urlId];if(this.groupId!==n){var i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,a=this.tracks.filter((function(e){return!n||e.groupId===n}));this.tracksInGroup=a;var o=this.findTrackId(null==i?void 0:i.name)||this.findTrackId();this.groupId=n;var s={subtitleTracks:a};this.log("Updating subtitle tracks, "+a.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(r.Events.SUBTITLE_TRACKS_UPDATED,s),-1!==o&&this.setSubtitleTrack(o,i)}}},h.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||e===r.name))return r.id}return-1},h.onError=function(t,n){e.prototype.onError.call(this,t,n),!n.fatal&&n.context&&n.context.type===o.PlaylistContextType.SUBTITLE_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},h.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var n=t.id,i=t.groupId,a=t.url;if(e)try{a=e.addDirectives(a)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+n),this.hls.trigger(r.Events.SUBTITLE_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:e||null})}},h.toggleTrackModes=function(e){var t=this,n=this.media,r=this.subtitleDisplay,i=this.trackId;if(n){var a=c(n.textTracks),o=a.filter((function(e){return e.groupId===t.groupId}));if(-1===e)[].slice.call(a).forEach((function(e){e.mode="disabled"}));else{var s=o[i];s&&(s.mode="disabled")}var u=o[e];u&&(u.mode=r?"showing":"hidden")}},h.setSubtitleTrack=function(e,t){var n,i=this.tracksInGroup;if(this.media){if(this.trackId!==e&&this.toggleTrackModes(e),!(this.trackId===e&&(-1===e||null!==(n=i[e])&&void 0!==n&&n.details)||e<-1||e>=i.length)){this.clearTimer();var a=i[e];if(this.log("Switching to subtitle track "+e),this.trackId=e,a){var o=a.id,s=a.groupId,u=void 0===s?"":s,l=a.name,c=a.type,d=a.url;this.hls.trigger(r.Events.SUBTITLE_TRACK_SWITCH,{id:o,groupId:u,name:l,type:c,url:d});var f=this.switchParams(a.url,null==t?void 0:t.details);this.loadPlaylist(f)}else this.hls.trigger(r.Events.SUBTITLE_TRACK_SWITCH,{id:e})}}else this.queuedDefaultTrack=e},h.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=c(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},l=a,(d=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}])&&s(l.prototype,d),f&&s(l,f),a}(a.default);function c(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"subtitles"===r.kind&&r.label&&t.push(e[n])}return t}t.default=l},"./src/controller/timeline-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"TimelineController",(function(){return f}));var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/utils/cea-608-parser.ts"),o=n("./src/utils/output-filter.ts"),s=n("./src/utils/webvtt-parser.ts"),u=n("./src/utils/texttrack-utils.ts"),l=n("./src/utils/imsc1-ttml-parser.ts"),c=n("./src/types/loader.ts"),d=n("./src/utils/logger.ts"),f=function(){function e(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var t=new o.default(this,"textTrack1"),n=new o.default(this,"textTrack2"),r=new o.default(this,"textTrack3"),s=new o.default(this,"textTrack4");this.cea608Parser1=new a.default(1,t,n),this.cea608Parser2=new a.default(3,r,s)}e.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(i.Events.FRAG_LOADING,this.onFragLoading,this),e.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=e.prototype;return t.destroy=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(i.Events.FRAG_LOADING,this.onFragLoading,this),e.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},t.addCues=function(e,t,n,r,a){for(var o,s,u,l,c=!1,d=a.length;d--;){var f=a[d],h=(o=f[0],s=f[1],u=t,l=n,Math.min(s,l)-Math.max(o,u));if(h>=0&&(f[0]=Math.min(f[0],t),f[1]=Math.max(f[1],n),c=!0,h/(n-t)>.5))return}if(c||a.push([t,n]),this.config.renderTextTracksNatively){var p=this.captionsTracks[e];this.Cues.newCue(p,t,n,r)}else{var m=this.Cues.newCue(null,t,n,r);this.hls.trigger(i.Events.CUES_PARSED,{type:"captions",cues:m,track:e})}},t.onInitPtsFound=function(e,t){var n=this,r=t.frag,a=t.id,o=t.initPTS,s=t.timescale,u=this.unparsedVttFrags;"main"===a&&(this.initPTS[r.cc]=o,this.timescale[r.cc]=s),u.length&&(this.unparsedVttFrags=[],u.forEach((function(e){n.onFragLoaded(i.Events.FRAG_LOADED,e)})))},t.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(r[e])return r}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,n=this.captionsTracks,r=this.media,i=t[e],a=i.label,o=i.languageCode,s=this.getExistingTrack(e);if(s)n[e]=s,Object(u.clearCurrentCues)(n[e]),Object(u.sendAddTrackEvent)(n[e],r);else{var l=this.createTextTrack("captions",a,o);l&&(l[e]=!0,n[e]=l)}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},t.createTextTrack=function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},t.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},t.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){Object(u.clearCurrentCues)(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)Object(u.clearCurrentCues)(t[n])}},t.onSubtitleTracksUpdated=function(e,t){var n=this;this.textTracks=[];var r=t.subtitleTracks||[],a=r.some((function(e){return e.textCodec===l.IMSC1_CODEC}));if(this.config.enableWebVTT||a&&this.config.enableIMSC1){var o=this.tracks&&r&&this.tracks.length===r.length;if(this.tracks=r||[],this.config.renderTextTracksNatively){var s=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,t){var r;if(t<s.length){for(var i=null,a=0;a<s.length;a++)if(h(s[a],e)){i=s[a];break}i&&(r=i)}r?Object(u.clearCurrentCues)(r):(r=n.createTextTrack("subtitles",e.name,e.lang))&&(r.mode="disabled"),r&&(r.groupId=e.groupId,n.textTracks.push(r))}))}else if(!o&&this.tracks&&this.tracks.length){var c=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:c})}}},t.onManifestLoaded=function(e,t){var n=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var r="textTrack"+t[1],i=n.captionsProperties[r];i&&(i.label=e.name,e.lang&&(i.languageCode=e.lang),i.media=e)}}))},t.onFragLoading=function(e,t){var n=this.cea608Parser1,r=this.cea608Parser2,i=this.lastSn,a=this.lastPartIndex;if(this.enabled&&n&&r&&t.frag.type===c.PlaylistLevelType.MAIN){var o,s,u=t.frag.sn,l=null!=(o=null==t?void 0:null===(s=t.part)||void 0===s?void 0:s.index)?o:-1;u===i+1||u===i&&l===a+1||(n.reset(),r.reset()),this.lastSn=u,this.lastPartIndex=l}},t.onFragLoaded=function(e,t){var n=t.frag,a=t.payload,o=this.initPTS,s=this.unparsedVttFrags;if(n.type===c.PlaylistLevelType.SUBTITLE)if(a.byteLength){if(!Object(r.isFiniteNumber)(o[n.cc]))return s.push(t),void(o.length&&this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Missing initial subtitle PTS")}));var u=n.decryptdata;if(null==u||null==u.key||"AES-128"!==u.method){var d=this.tracks[n.level],f=this.vttCCs;f[n.cc]||(f[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),d&&d.textCodec===l.IMSC1_CODEC?this._parseIMSC1(n,a):this._parseVTTs(n,a,f)}}else this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})},t._parseIMSC1=function(e,t){var n=this,r=this.hls;Object(l.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],(function(t){n._appendCues(t,e.level),r.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){d.logger.log("Failed to parse IMSC1: "+t),r.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))},t._parseVTTs=function(e,t,n){var r=this,a=this.hls;Object(s.parseWebVTT)(t,this.initPTS[e.cc],this.timescale[e.cc],n,e.cc,e.start,(function(t){r._appendCues(t,e.level),a.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(n){r._fallbackToIMSC1(e,t),d.logger.log("Failed to parse VTT cue: "+n),a.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:n})}))},t._fallbackToIMSC1=function(e,t){var n=this,r=this.tracks[e.level];r.textCodec||Object(l.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],(function(){r.textCodec=l.IMSC1_CODEC,n._parseIMSC1(e,t)}),(function(){r.textCodec="wvtt"}))},t._appendCues=function(e,t){var n=this.hls;if(this.config.renderTextTracksNatively){var r=this.textTracks[t];if("disabled"===r.mode)return;e.forEach((function(e){return Object(u.addCueToTrack)(r,e)}))}else{var a=this.tracks[t].default?"default":"subtitles"+t;n.trigger(i.Events.CUES_PARSED,{type:"subtitles",cues:e,track:a})}},t.onFragDecrypted=function(e,t){var n=t.frag;if(n.type===c.PlaylistLevelType.SUBTITLE){if(!Object(r.isFiniteNumber)(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(t);this.onFragLoaded(i.Events.FRAG_LOADED,t)}},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(e,t){var n=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&n&&r)for(var i=0;i<t.samples.length;i++){var a=t.samples[i].bytes;if(a){var o=this.extractCea608Data(a);n.addData(t.samples[i].pts,o[0]),r.addData(t.samples[i].pts,o[1])}}},t.onBufferFlushing=function(e,t){var n=t.startOffset,r=t.endOffset,i=t.endOffsetSubtitles,a=t.type,o=this.media;if(o&&!(o.currentTime<r)){if(!a||"video"===a){var s=this.captionsTracks;Object.keys(s).forEach((function(e){return Object(u.removeCuesInRange)(s[e],n,r)}))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==i){var l=this.textTracks;Object.keys(l).forEach((function(e){return Object(u.removeCuesInRange)(l[e],n,i)}))}}},t.extractCea608Data=function(e){for(var t=31&e[0],n=2,r=[[],[]],i=0;i<t;i++){var a=e[n++],o=127&e[n++],s=127&e[n++],u=3&a;0===o&&0===s||0!=(4&a)&&(0!==u&&1!==u||(r[u].push(o),r[u].push(s)))}return r},e}();function h(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}},"./src/crypt/aes-crypto.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));var r=function(){function e(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}()},"./src/crypt/aes-decryptor.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"removePadding",(function(){return i})),n.d(t,"default",(function(){return a}));var r=n("./src/utils/typed-array.ts");function i(e){var t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?Object(r.sliceUint8)(e,0,t-n):e}var a=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},t.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],f=new Uint32Array(256),h=0,p=0,m=0;for(m=0;m<256;m++)f[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,e[h]=g,t[g]=h;var v=f[h],y=f[v],_=f[y],b=257*f[g]^16843008*g;r[h]=b<<24|b>>>8,i[h]=b<<16|b>>>16,a[h]=b<<8|b>>>24,o[h]=b,b=16843009*_^65537*y^257*v^16843008*h,u[g]=b<<24|b>>>8,l[g]=b<<16|b>>>16,c[g]=b<<8|b>>>24,d[g]=b,h?(h=v^f[f[f[_^v]]],p^=f[f[p]]):h=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,u,l=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(l),d=this.invKeySchedule=new Uint32Array(l),f=this.sBox,h=this.rcon,p=this.invSubMix,m=p[0],g=p[1],v=p[2],y=p[3];for(a=0;a<l;a++)a<i?s=c[a]=t[a]:(u=s,a%i==0?(u=f[(u=u<<8|u>>>24)>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u],u^=h[a/i|0]<<24):i>6&&a%i==4&&(u=f[u>>>24]<<24|f[u>>>16&255]<<16|f[u>>>8&255]<<8|f[255&u]),c[a]=s=(c[a-i]^u)>>>0);for(o=0;o<l;o++)a=l-o,u=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?u:m[f[u>>>24]]^g[f[u>>>16&255]]^v[f[u>>>8&255]]^y[f[255&u]],d[o]=d[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n){for(var r,i,a,o,s,u,l,c,d,f,h,p,m,g,v=this.keySize+6,y=this.invKeySchedule,_=this.invSBox,b=this.invSubMix,T=b[0],E=b[1],S=b[2],w=b[3],A=this.uint8ArrayToUint32Array_(n),M=A[0],L=A[1],C=A[2],D=A[3],k=new Int32Array(e),P=new Int32Array(k.length),I=this.networkToHostOrderSwap;t<k.length;){for(d=I(k[t]),f=I(k[t+1]),h=I(k[t+2]),p=I(k[t+3]),s=d^y[0],u=p^y[1],l=h^y[2],c=f^y[3],m=4,g=1;g<v;g++)r=T[s>>>24]^E[u>>16&255]^S[l>>8&255]^w[255&c]^y[m],i=T[u>>>24]^E[l>>16&255]^S[c>>8&255]^w[255&s]^y[m+1],a=T[l>>>24]^E[c>>16&255]^S[s>>8&255]^w[255&u]^y[m+2],o=T[c>>>24]^E[s>>16&255]^S[u>>8&255]^w[255&l]^y[m+3],s=r,u=i,l=a,c=o,m+=4;r=_[s>>>24]<<24^_[u>>16&255]<<16^_[l>>8&255]<<8^_[255&c]^y[m],i=_[u>>>24]<<24^_[l>>16&255]<<16^_[c>>8&255]<<8^_[255&s]^y[m+1],a=_[l>>>24]<<24^_[c>>16&255]<<16^_[s>>8&255]<<8^_[255&u]^y[m+2],o=_[c>>>24]<<24^_[s>>16&255]<<16^_[u>>8&255]<<8^_[255&l]^y[m+3],P[t]=I(r^M),P[t+1]=I(o^L),P[t+2]=I(a^C),P[t+3]=I(i^D),M=d,L=f,C=h,D=p,t+=4}return P.buffer},e}()},"./src/crypt/decrypter.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var r=n("./src/crypt/aes-crypto.ts"),i=n("./src/crypt/fast-aes-key.ts"),a=n("./src/crypt/aes-decryptor.ts"),o=n("./src/utils/logger.ts"),s=n("./src/utils/mp4-tools.ts"),u=n("./src/utils/typed-array.ts"),l=function(){function e(e,t,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var a=self.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(e){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var t=e.prototype;return t.destroy=function(){this.observer=null},t.isSync=function(){return this.config.enableSoftwareAES},t.flush=function(){var e=this.currentResult;if(e){var t=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Object(a.removePadding)(t):t}this.reset()},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,n,r){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(e),t,n);var i=this.flush();i&&r(i.buffer)}else this.webCryptoDecrypt(new Uint8Array(e),t,n).then(r)},t.softwareDecrypt=function(e,t,n){var r=this.currentIV,i=this.currentResult,o=this.remainderData;this.logOnce("JS AES decrypt"),o&&(e=Object(s.appendUint8Array)(o,e),this.remainderData=null);var l=this.getValidChunk(e);if(!l.length)return null;r&&(n=r);var c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new a.default),c.expandKey(t);var d=i;return this.currentResult=c.decrypt(l.buffer,0,n),this.currentIV=Object(u.sliceUint8)(l,-16).buffer,d||null},t.webCryptoDecrypt=function(e,t,n){var a=this,o=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new i.default(o,t)),this.fastAesKey.expandKey().then((function(t){return o?new r.default(o,n).decrypt(e.buffer,t):Promise.reject(new Error("web crypto not initialized"))})).catch((function(r){return a.onWebCryptoError(r,e,t,n)}))},t.onWebCryptoError=function(e,t,n,r){return o.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",e),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(t,n,r)},t.getValidChunk=function(e){var t=e,n=e.length-e.length%16;return n!==e.length&&(t=Object(u.sliceUint8)(e,0,n),this.remainderData=Object(u.sliceUint8)(e,n)),t},t.logOnce=function(e){this.logEnabled&&(o.logger.log("[decrypter.ts]: "+e),this.logEnabled=!1)},e}()},"./src/crypt/fast-aes-key.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));var r=function(){function e(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}()},"./src/demux/aacdemuxer.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/demux/base-audio-demuxer.ts"),i=n("./src/demux/adts.ts"),a=n("./src/utils/logger.ts"),o=n("./src/demux/id3.ts");function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){var t,n;function r(t,n){var r;return(r=e.call(this)||this).observer=void 0,r.config=void 0,r.observer=t,r.config=n,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var u=r.prototype;return u.resetInitSegment=function(t,n,r){e.prototype.resetInitSegment.call(this,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}},r.probe=function(e){if(!e)return!1;for(var t=(o.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(i.probe(e,t))return a.logger.log("ADTS sync word found !"),!0;return!1},u.canParse=function(e,t){return i.canParse(e,t)},u.appendFrame=function(e,t,n){i.initTrackConfig(e,this.observer,t,n,e.manifestCodec);var r=i.appendFrame(e,t,n,this.initPTS,this.frameIndex);if(r&&0===r.missing)return r},r}(r.default);u.minProbeByteLength=9,t.default=u},"./src/demux/adts.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"getAudioConfig",(function(){return o})),n.d(t,"isHeaderPattern",(function(){return s})),n.d(t,"getHeaderLength",(function(){return u})),n.d(t,"getFullFrameLength",(function(){return l})),n.d(t,"canGetFrameLength",(function(){return c})),n.d(t,"isHeader",(function(){return d})),n.d(t,"canParse",(function(){return f})),n.d(t,"probe",(function(){return h})),n.d(t,"initTrackConfig",(function(){return p})),n.d(t,"getFrameDuration",(function(){return m})),n.d(t,"parseFrameHeader",(function(){return g})),n.d(t,"appendFrame",(function(){return v}));var r=n("./src/utils/logger.ts"),i=n("./src/errors.ts"),a=n("./src/events.ts");function o(e,t,n,o){var s,u,l,c,d=navigator.userAgent.toLowerCase(),f=o,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=1+((192&t[n+2])>>>6);var p=(60&t[n+2])>>>2;if(!(p>h.length-1))return l=(1&t[n+2])<<2,l|=(192&t[n+3])>>>6,r.logger.log("manifest codec:"+o+", ADTS type:"+s+", samplingIndex:"+p),/firefox/i.test(d)?p>=6?(s=5,c=new Array(4),u=p-3):(s=2,c=new Array(2),u=p):-1!==d.indexOf("android")?(s=2,c=new Array(2),u=p):(s=5,c=new Array(4),o&&(-1!==o.indexOf("mp4a.40.29")||-1!==o.indexOf("mp4a.40.5"))||!o&&p>=6?u=p-3:((o&&-1!==o.indexOf("mp4a.40.2")&&(p>=6&&1===l||/vivaldi/i.test(d))||!o&&1===l)&&(s=2,c=new Array(2)),u=p)),c[0]=s<<3,c[0]|=(14&p)>>1,c[1]|=(1&p)<<7,c[1]|=l<<3,5===s&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[p],channelCount:l,codec:"mp4a.40."+s,manifestCodec:f};e.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+p})}function s(e,t){return 255===e[t]&&240==(246&e[t+1])}function u(e,t){return 1&e[t+1]?7:9}function l(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e,t){return t+5<e.length}function d(e,t){return t+1<e.length&&s(e,t)}function f(e,t){return c(e,t)&&s(e,t)&&l(e,t)<=e.length-t}function h(e,t){if(d(e,t)){var n=u(e,t);if(t+n>=e.length)return!1;var r=l(e,t);if(r<=n)return!1;var i=t+r;return i===e.length||d(e,i)}return!1}function p(e,t,n,i,a){if(!e.samplerate){var s=o(t,n,i,a);if(!s)return;e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,r.logger.log("parsed codec:"+e.codec+", rate:"+s.samplerate+", channels:"+s.channelCount)}}function m(e){return 9216e4/e}function g(e,t,n,r,i){var a=u(e,t),o=l(e,t);if((o-=a)>0)return{headerLength:a,frameLength:o,stamp:n+r*i}}function v(e,t,n,r,i){var a=g(t,n,r,i,m(e.samplerate));if(a){var o,s=a.frameLength,u=a.headerLength,l=a.stamp,c=u+s,d=Math.max(0,n+c-t.length);d?(o=new Uint8Array(c-u)).set(t.subarray(n+u,t.length),0):o=t.subarray(n+u,n+c);var f={unit:o,pts:l};return d||e.samples.push(f),{sample:f,length:c,missing:d}}}},"./src/demux/base-audio-demuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"initPTSFn",(function(){return l}));var r=n("./src/polyfills/number.ts"),i=n("./src/demux/id3.ts"),a=n("./src/demux/dummy-demuxed-track.ts"),o=n("./src/utils/mp4-tools.ts"),s=n("./src/utils/typed-array.ts"),u=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var t=e.prototype;return t.resetInitSegment=function(e,t,n){this._id3Track={type:"id3",id:0,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(){},t.resetContiguity=function(){},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,n){},t.demux=function(e,t){this.cachedData&&(e=Object(o.appendUint8Array)(this.cachedData,e),this.cachedData=null);var n,r,u=i.getID3Data(e,0),c=u?u.length:0,d=this._audioTrack,f=this._id3Track,h=u?i.getTimeStamp(u):void 0,p=e.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=l(h,t)),u&&u.length>0&&f.samples.push({pts:this.initPTS,dts:this.initPTS,data:u}),r=this.initPTS;c<p;){if(this.canParse(e,c)){var m=this.appendFrame(d,e,c);m?(this.frameIndex++,r=m.sample.pts,n=c+=m.length):c=p}else i.canParse(e,c)?(u=i.getID3Data(e,c),f.samples.push({pts:r,dts:r,data:u}),n=c+=u.length):c++;if(c===p&&n!==p){var g=Object(s.sliceUint8)(e,n);this.cachedData?this.cachedData=Object(o.appendUint8Array)(this.cachedData,g):this.cachedData=g}}return{audioTrack:d,avcTrack:Object(a.dummyTrack)(),id3Track:f,textTrack:Object(a.dummyTrack)()}},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:Object(a.dummyTrack)(),id3Track:this._id3Track,textTrack:Object(a.dummyTrack)()}},t.destroy=function(){},e}(),l=function(e,t){return Object(r.isFiniteNumber)(e)?90*e:9e4*t};t.default=u},"./src/demux/chunk-cache.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));var r=function(){function e(){this.chunks=[],this.dataLength=0}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e,t=this.chunks,n=this.dataLength;return t.length?(e=1===t.length?t[0]:function(e,t){for(var n=new Uint8Array(t),r=0,i=0;i<e.length;i++){var a=e[i];n.set(a,r),r+=a.length}return n}(t,n),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},e}()},"./src/demux/dummy-demuxed-track.ts":function(e,t,n){"use strict";function r(){return{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}n.r(t),n.d(t,"dummyTrack",(function(){return r}))},"./src/demux/exp-golomb.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/utils/logger.ts"),i=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&r.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,n=8,r=0;r<e;r++)0!==n&&(n=(t+this.readEG()+256)%256),t=0===n?t:n},t.readSPS=function(){var e,t,n,r=0,i=0,a=0,o=0,s=this.readUByte.bind(this),u=this.readBits.bind(this),l=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),f=this.skipEG.bind(this),h=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);s();var m=s();if(u(5),d(3),s(),h(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){var g=l();if(3===g&&d(1),h(),h(),d(1),c())for(t=3!==g?8:12,n=0;n<t;n++)c()&&p(n<6?16:64)}h();var v=l();if(0===v)l();else if(1===v)for(d(1),f(),f(),e=l(),n=0;n<e;n++)f();h(),d(1);var y=l(),_=l(),b=u(1);0===b&&d(1),d(1),c()&&(r=l(),i=l(),a=l(),o=l());var T=[1,1];if(c()&&c())switch(s()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(y+1)-2*r-2*i),height:(2-b)*(_+1)*16-(b?2:4)*(a+o),pixelRatio:T}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},"./src/demux/id3.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"isHeader",(function(){return i})),n.d(t,"isFooter",(function(){return a})),n.d(t,"getID3Data",(function(){return o})),n.d(t,"canParse",(function(){return u})),n.d(t,"getTimeStamp",(function(){return l})),n.d(t,"isTimeStampFrame",(function(){return c})),n.d(t,"getID3Frames",(function(){return f})),n.d(t,"decodeFrame",(function(){return h})),n.d(t,"utf8ArrayToStr",(function(){return y})),n.d(t,"testables",(function(){return _}));var r,i=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},a=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},o=function(e,t){for(var n=t,r=0;i(e,t);)r+=10,r+=s(e,t+6),a(e,t+10)&&(r+=10),t+=r;if(r>0)return e.subarray(n,n+r)},s=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},u=function(e,t){return i(e,t)&&s(e,t+6)+10<=e.length-t},l=function(e){for(var t=f(e),n=0;n<t.length;n++){var r=t[n];if(c(r))return v(r)}},c=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},d=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=s(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},f=function(e){for(var t=0,n=[];i(e,t);){for(var r=s(e,t+6),o=(t+=10)+r;t+8<o;){var u=d(e.subarray(t)),l=h(u);l&&n.push(l),t+=u.size+10}a(e,t)&&(t+=10)}return n},h=function(e){return"PRIV"===e.type?p(e):"W"===e.type[0]?g(e):m(e)},p=function(e){if(!(e.size<2)){var t=y(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}},m=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,n=y(e.data.subarray(t),!0);t+=n.length+1;var r=y(e.data.subarray(t));return{key:e.type,info:n,data:r}}var i=y(e.data.subarray(1));return{key:e.type,data:i}}},g=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,n=y(e.data.subarray(t),!0);t+=n.length+1;var r=y(e.data.subarray(t));return{key:e.type,info:n,data:r}}var i=y(e.data);return{key:e.type,data:i}},v=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},y=function(e,t){void 0===t&&(t=!1);var n=b();if(n){var r=n.decode(e);if(t){var i=r.indexOf("\0");return-1!==i?r.substring(0,i):r}return r.replace(/\0/g,"")}for(var a,o,s,u=e.length,l="",c=0;c<u;){if(0===(a=e[c++])&&t)return l;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(a);break;case 12:case 13:o=e[c++],l+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=e[c++],s=e[c++],l+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&s)<<0)}}return l},_={decodeTextFrame:m};function b(){return r||void 0===self.TextDecoder||(r=new self.TextDecoder("utf-8")),r}},"./src/demux/mp3demuxer.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/demux/base-audio-demuxer.ts"),i=n("./src/demux/id3.ts"),a=n("./src/utils/logger.ts"),o=n("./src/demux/mpegaudio.ts");function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var u=r.prototype;return u.resetInitSegment=function(t,n,r){e.prototype.resetInitSegment.call(this,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}},r.probe=function(e){if(!e)return!1;for(var t=(i.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(o.probe(e,t))return a.logger.log("MPEG Audio sync word found !"),!0;return!1},u.canParse=function(e,t){return o.canParse(e,t)},u.appendFrame=function(e,t,n){if(null!==this.initPTS)return o.appendFrame(e,t,n,this.initPTS,this.frameIndex)},r}(r.default);u.minProbeByteLength=4,t.default=u},"./src/demux/mp4demuxer.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/utils/mp4-tools.ts"),i=n("./src/demux/dummy-demuxed-track.ts"),a=function(){function e(e,t){this.remainderData=null,this.config=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.resetContiguity=function(){},e.probe=function(e){return Object(r.findBox)({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length>0},t.demux=function(e){var t=e,n=Object(i.dummyTrack)();if(this.config.progressive){this.remainderData&&(t=Object(r.appendUint8Array)(this.remainderData,e));var a=Object(r.segmentValidRange)(t);this.remainderData=a.remainder,n.samples=a.valid||new Uint8Array}else n.samples=t;return{audioTrack:Object(i.dummyTrack)(),avcTrack:n,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},t.flush=function(){var e=Object(i.dummyTrack)();return e.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:Object(i.dummyTrack)(),avcTrack:e,id3Track:Object(i.dummyTrack)(),textTrack:Object(i.dummyTrack)()}},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}();a.minProbeByteLength=1024,t.default=a},"./src/demux/mpegaudio.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"appendFrame",(function(){return u})),n.d(t,"parseHeader",(function(){return l})),n.d(t,"isHeaderPattern",(function(){return c})),n.d(t,"isHeader",(function(){return d})),n.d(t,"canParse",(function(){return f})),n.d(t,"probe",(function(){return h}));var r=null,i=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],a=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],o=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],s=[0,1,1,4];function u(e,t,n,r,i){if(!(n+24>t.length)){var a=l(t,n);if(a&&n+a.frameLength<=t.length){var o=r+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(n,n+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength,missing:0}}}}function l(e,t){var n=e[t+1]>>3&3,u=e[t+1]>>1&3,l=e[t+2]>>4&15,c=e[t+2]>>2&3;if(1!==n&&0!==l&&15!==l&&3!==c){var d=e[t+2]>>1&1,f=e[t+3]>>6,h=1e3*i[14*(3===n?3-u:3===u?3:4)+l-1],p=a[3*(3===n?0:2===n?1:2)+c],m=3===f?1:2,g=o[n][u],v=s[u],y=8*g*v,_=Math.floor(g*h/p+d)*v;if(null===r){var b=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);r=b?parseInt(b[1]):0}return!!r&&r<=87&&2===u&&h>=224e3&&0===f&&(e[t+3]=128|e[t+3]),{sampleRate:p,channelCount:m,frameLength:_,samplesPerFrame:y}}}function c(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function d(e,t){return t+1<e.length&&c(e,t)}function f(e,t){return c(e,t)&&4<=e.length-t}function h(e,t){if(t+1<e.length&&c(e,t)){var n=l(e,t),r=4;null!=n&&n.frameLength&&(r=n.frameLength);var i=t+r;return i===e.length||d(e,i)}return!1}},"./src/demux/sample-aes.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/crypt/decrypter.ts"),i=n("./src/demux/tsdemuxer.ts"),a=function(){function e(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new r.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,t)},t.decryptAacSample=function(e,t,n,r){var i=e[t].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){var o=new Uint8Array(a);i.set(o,16),r||s.decryptAacSamples(e,t+1,n)}))},t.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},t.getAvcDecryptedUnit=function(e,t){for(var n=new Uint8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)e.set(n.subarray(r,r+16),i);return e},t.decryptAvcSample=function(e,t,n,r,a,o){var s=Object(i.discardEPB)(a.data),u=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(u.buffer,(function(i){a.data=l.getAvcDecryptedUnit(s,i),o||l.decryptAvcSamples(e,t,n+1,r)}))},t.decryptAvcSamples=function(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var a=i[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,a,o),!o)return}}}},e}();t.default=a},"./src/demux/transmuxer-interface.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return d}));var r=n("./node_modules/webworkify-webpack/index.js"),i=n("./src/events.ts"),a=n("./src/demux/transmuxer.ts"),o=n("./src/utils/logger.ts"),s=n("./src/errors.ts"),u=n("./src/utils/mediasource-helper.ts"),l=n("./node_modules/eventemitter3/index.js"),c=Object(u.getMediaSource)()||{isTypeSupported:function(){return!1}},d=function(){function e(e,t,n,u){var d=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=e,this.id=t,this.onTransmuxComplete=n,this.onFlush=u;var f=e.config,h=function(t,n){(n=n||{}).frag=d.frag,n.id=d.id,e.trigger(t,n)};this.observer=new l.EventEmitter,this.observer.on(i.Events.FRAG_DECRYPTED,h),this.observer.on(i.Events.ERROR,h);var p={mp4:c.isTypeSupported("video/mp4"),mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"')},m=navigator.vendor;if(f.enableWorker&&"undefined"!=typeof Worker){var g;o.logger.log("demuxing in webworker");try{g=this.worker=r("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),g.addEventListener("message",this.onwmsg),g.onerror=function(t){e.trigger(i.Events.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(t.message+"  ("+t.filename+":"+t.lineno+")")})},g.postMessage({cmd:"init",typeSupported:p,vendor:m,id:t,config:JSON.stringify(f)})}catch(e){o.logger.warn("Error in worker:",e),o.logger.error("Error while initializing DemuxerWorker, fallback to inline"),g&&self.URL.revokeObjectURL(g.objectURL),this.transmuxer=new a.default(this.observer,p,f,m,t),this.worker=null}}else this.transmuxer=new a.default(this.observer,p,f,m,t)}var t=e.prototype;return t.destroy=function(){var e=this.worker;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null;else{var t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}var n=this.observer;n&&n.removeAllListeners(),this.observer=null},t.push=function(e,t,n,r,i,s,u,l,c,d){var f,h,p=this;c.transmuxing.start=self.performance.now();var m=this.transmuxer,g=this.worker,v=s?s.start:i.start,y=i.decryptdata,_=this.frag,b=!(_&&i.cc===_.cc),T=!(_&&c.level===_.level),E=_?c.sn-_.sn:-1,S=this.part?c.part-this.part.index:1,w=!T&&(1===E||0===E&&1===S),A=self.performance.now();(T||E||0===i.stats.parsing.start)&&(i.stats.parsing.start=A),!s||!S&&w||(s.stats.parsing.start=A);var M=!(_&&(null===(f=i.initSegment)||void 0===f?void 0:f.url)===(null===(h=_.initSegment)||void 0===h?void 0:h.url)),L=new a.TransmuxState(b,w,l,T,v,M);if(!w||b||M){o.logger.log("[transmuxer-interface, "+i.type+"]: Starting new transmux session for sn: "+c.sn+" p: "+c.part+" level: "+c.level+" id: "+c.id+"\n        discontinuity: "+b+"\n        trackSwitch: "+T+"\n        contiguous: "+w+"\n        accurateTimeOffset: "+l+"\n        timeOffset: "+v+"\n        initSegmentChange: "+M);var C=new a.TransmuxConfig(n,r,t,u,d);this.configureTransmuxer(C)}if(this.frag=i,this.part=s,g)g.postMessage({cmd:"demux",data:e,decryptdata:y,chunkMeta:c,state:L},e instanceof ArrayBuffer?[e]:[]);else if(m){var D=m.push(e,y,c,L);Object(a.isPromise)(D)?D.then((function(e){p.handleTransmuxComplete(e)})):this.handleTransmuxComplete(D)}},t.flush=function(e){var t=this;e.transmuxing.start=self.performance.now();var n=this.transmuxer,r=this.worker;if(r)r.postMessage({cmd:"flush",chunkMeta:e});else if(n){var i=n.flush(e);Object(a.isPromise)(i)?i.then((function(n){t.handleFlushResult(n,e)})):this.handleFlushResult(i,e)}},t.handleFlushResult=function(e,t){var n=this;e.forEach((function(e){n.handleTransmuxComplete(e)})),this.onFlush(t)},t.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},t.configureTransmuxer=function(e){var t=this.worker,n=this.transmuxer;t?t.postMessage({cmd:"configure",config:e}):n&&n.configure(e)},t.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},e}()},"./src/demux/transmuxer-worker.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("./src/demux/transmuxer.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts"),o=n("./node_modules/eventemitter3/index.js");function s(e){var t=new o.EventEmitter,n=function(t,n){e.postMessage({event:t,data:n})};t.on(i.Events.FRAG_DECRYPTED,n),t.on(i.Events.ERROR,n),e.addEventListener("message",(function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.transmuxer=new r.default(t,o.typeSupported,s,o.vendor,o.id),Object(a.enableLogs)(s.debug),n("init",null);break;case"configure":e.transmuxer.configure(o.config);break;case"demux":var l=e.transmuxer.push(o.data,o.decryptdata,o.chunkMeta,o.state);Object(r.isPromise)(l)?l.then((function(t){u(e,t)})):u(e,l);break;case"flush":var d=o.chunkMeta,f=e.transmuxer.flush(d);Object(r.isPromise)(f)?f.then((function(t){c(e,t,d)})):c(e,f,d)}}))}function u(e,t){if((n=t.remuxResult).audio||n.video||n.text||n.id3||n.initSegment){var n,r=[],i=t.remuxResult,a=i.audio,o=i.video;a&&l(r,a),o&&l(r,o),e.postMessage({event:"transmuxComplete",data:t},r)}}function l(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function c(e,t,n){t.forEach((function(t){u(e,t)})),e.postMessage({event:"flush",data:n})}},"./src/demux/transmuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y})),n.d(t,"isPromise",(function(){return b})),n.d(t,"TransmuxConfig",(function(){return T})),n.d(t,"TransmuxState",(function(){return E}));var r,i=n("./src/events.ts"),a=n("./src/errors.ts"),o=n("./src/crypt/decrypter.ts"),s=n("./src/demux/aacdemuxer.ts"),u=n("./src/demux/mp4demuxer.ts"),l=n("./src/demux/tsdemuxer.ts"),c=n("./src/demux/mp3demuxer.ts"),d=n("./src/remux/mp4-remuxer.ts"),f=n("./src/remux/passthrough-remuxer.ts"),h=n("./src/demux/chunk-cache.ts"),p=n("./src/utils/mp4-tools.ts"),m=n("./src/utils/logger.ts");try{r=self.performance.now.bind(self.performance)}catch(e){m.logger.debug("Unable to use Performance API on this environment"),r=self.Date.now}var g=[{demux:l.default,remux:d.default},{demux:u.default,remux:f.default},{demux:s.default,remux:d.default},{demux:c.default,remux:d.default}],v=1024;g.forEach((function(e){var t=e.demux;v=Math.max(v,t.minProbeByteLength)}));var y=function(){function e(e,t,n,r,i){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new h.default,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r,this.id=i}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,n,i){var a=this,o=n.transmuxing;o.executeStart=r();var s=new Uint8Array(e),u=this.cache,l=this.config,c=this.currentTransmuxState,d=this.transmuxConfig;i&&(this.currentTransmuxState=i);var f=function(e,t){var n=null;return e.byteLength>0&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(n=t),n}(s,t);if(f&&"AES-128"===f.method){var h=this.getDecrypter();if(!l.enableSoftwareAES)return this.decryptionPromise=h.webCryptoDecrypt(s,f.key.buffer,f.iv.buffer).then((function(e){var t=a.push(e,null,n);return a.decryptionPromise=null,t})),this.decryptionPromise;var m=h.softwareDecrypt(s,f.key.buffer,f.iv.buffer);if(!m)return o.executeEnd=r(),_(n);s=new Uint8Array(m)}var g=i||c,v=g.contiguous,y=g.discontinuity,b=g.trackSwitch,T=g.accurateTimeOffset,E=g.timeOffset,S=g.initSegmentChange,w=d.audioCodec,A=d.videoCodec,M=d.defaultInitPts,L=d.duration,C=d.initSegmentData;if((y||b||S)&&this.resetInitSegment(C,w,A,L),(y||S)&&this.resetInitialTimestamp(M),v||this.resetContiguity(),this.needsProbing(s,y,b)){if(u.dataLength){var D=u.flush();s=Object(p.appendUint8Array)(D,s)}this.configureTransmuxer(s,d)}var k=this.transmux(s,f,E,T,n),P=this.currentTransmuxState;return P.contiguous=!0,P.discontinuity=!1,P.trackSwitch=!1,o.executeEnd=r(),k},t.flush=function(e){var t=this,n=e.transmuxing;n.executeStart=r();var o=this.decrypter,s=this.cache,u=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then((function(){return t.flush(e)}));var c=[],d=u.timeOffset;if(o){var f=o.flush();f&&c.push(this.push(f,null,e))}var h=s.dataLength;s.reset();var p=this.demuxer,m=this.remuxer;if(!p||!m)return h>=v&&this.observer.emit(i.Events.ERROR,i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),n.executeEnd=r(),[_(e)];var g=p.flush(d);return b(g)?g.then((function(n){return t.flushRemux(c,n,e),c})):(this.flushRemux(c,g,e),c)},t.flushRemux=function(e,t,n){var i=t.audioTrack,a=t.avcTrack,o=t.id3Track,s=t.textTrack,u=this.currentTransmuxState,l=u.accurateTimeOffset,c=u.timeOffset;m.logger.log("[transmuxer.ts]: Flushed fragment "+n.sn+(n.part>-1?" p: "+n.part:"")+" of level "+n.level);var d=this.remuxer.remux(i,a,o,s,c,l,!0,this.id);e.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=r()},t.resetInitialTimestamp=function(e){var t=this.demuxer,n=this.remuxer;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},t.resetInitSegment=function(e,t,n,r){var i=this.demuxer,a=this.remuxer;i&&a&&(i.resetInitSegment(t,n,r),a.resetInitSegment(e,t,n))},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function(e,t,n,r,i){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,r,i):this.transmuxUnencrypted(e,n,r,i)},t.transmuxUnencrypted=function(e,t,n,r){var i=this.demuxer.demux(e,t,!1,!this.config.progressive),a=i.audioTrack,o=i.avcTrack,s=i.id3Track,u=i.textTrack;return{remuxResult:this.remuxer.remux(a,o,s,u,t,n,!1,this.id),chunkMeta:r}},t.transmuxSampleAes=function(e,t,n,r,i){var a=this;return this.demuxer.demuxSampleAes(e,t,n).then((function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.avcTrack,e.id3Track,e.textTrack,n,r,!1,a.id),chunkMeta:i}}))},t.configureTransmuxer=function(e,t){for(var n,r=this.config,i=this.observer,a=this.typeSupported,o=this.vendor,s=t.audioCodec,l=t.defaultInitPts,c=t.duration,d=t.initSegmentData,h=t.videoCodec,p=0,v=g.length;p<v;p++)if(g[p].demux.probe(e)){n=g[p];break}n||(m.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),n={demux:u.default,remux:f.default});var y=this.demuxer,_=this.remuxer,b=n.remux,T=n.demux;_&&_ instanceof b||(this.remuxer=new b(i,r,a,o)),y&&y instanceof T||(this.demuxer=new T(i,r,a),this.probe=T.probe),this.resetInitSegment(d,s,h,c),this.resetInitialTimestamp(l)},t.needsProbing=function(e,t,n){return!this.demuxer||!this.remuxer||t||n},t.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new o.default(this.observer,this.config)),e},e}(),_=function(e){return{remuxResult:{},chunkMeta:e}};function b(e){return"then"in e&&e.then instanceof Function}var T=function(e,t,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i},E=function(e,t,n,r,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=a}},"./src/demux/tsdemuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"discardEPB",(function(){return b}));var r=n("./src/demux/adts.ts"),i=n("./src/demux/mpegaudio.ts"),a=n("./src/demux/exp-golomb.ts"),o=n("./src/demux/id3.ts"),s=n("./src/demux/sample-aes.ts"),u=n("./src/events.ts"),l=n("./src/utils/mp4-tools.ts"),c=n("./src/utils/logger.ts"),d=n("./src/errors.ts"),f={video:1,audio:2,id3:3,text:4},h=function(){function e(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=n}e.probe=function(t){var n=e.syncOffset(t);return!(n<0||(n&&c.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),0))},e.syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:f[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var t=e.prototype;return t.resetInitSegment=function(t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",r),this._audioTrack=e.createTrack("audio",r),this._id3Track=e.createTrack("id3",r),this._txtTrack=e.createTrack("text",r),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=n,this._duration=r},t.resetTimeStamp=function(){},t.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,n=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},t.demux=function(t,n,r,i){var a;void 0===r&&(r=!1),void 0===i&&(i=!1),r||(this.sampleAes=null);var o=this._avcTrack,s=this._audioTrack,f=this._id3Track,h=o.pid,p=o.pesData,y=s.pid,_=f.pid,b=s.pesData,T=f.pesData,E=!1,S=this.pmtParsed,w=this._pmtId,A=t.length;if(this.remainderData&&(A=(t=Object(l.appendUint8Array)(this.remainderData,t)).length,this.remainderData=null),A<188&&!i)return this.remainderData=t,{audioTrack:s,avcTrack:o,id3Track:f,textTrack:this._txtTrack};var M=Math.max(0,e.syncOffset(t));(A-=(A+M)%188)<t.byteLength&&!i&&(this.remainderData=new Uint8Array(t.buffer,A,t.buffer.byteLength-A));for(var L=M;L<A;L+=188)if(71===t[L]){var C=!!(64&t[L+1]),D=((31&t[L+1])<<8)+t[L+2],k=void 0;if((48&t[L+3])>>4>1){if((k=L+5+t[L+4])===L+188)continue}else k=L+4;switch(D){case h:C&&(p&&(a=v(p))&&this.parseAVCPES(a,!1),p={data:[],size:0}),p&&(p.data.push(t.subarray(k,L+188)),p.size+=L+188-k);break;case y:C&&(b&&(a=v(b))&&(s.isAAC?this.parseAACPES(a):this.parseMPEGPES(a)),b={data:[],size:0}),b&&(b.data.push(t.subarray(k,L+188)),b.size+=L+188-k);break;case _:C&&(T&&(a=v(T))&&this.parseID3PES(a),T={data:[],size:0}),T&&(T.data.push(t.subarray(k,L+188)),T.size+=L+188-k);break;case 0:C&&(k+=t[k]+1),w=this._pmtId=m(t,k);break;case w:C&&(k+=t[k]+1);var P=g(t,k,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,r);(h=P.avc)>0&&(o.pid=h),(y=P.audio)>0&&(s.pid=y,s.isAAC=P.isAAC),(_=P.id3)>0&&(f.pid=_),E&&!S&&(c.logger.log("reparse from beginning"),E=!1,L=M-188),S=this.pmtParsed=!0;break;case 17:case 8191:break;default:E=!0}}else this.observer.emit(u.Events.ERROR,u.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});o.pesData=p,s.pesData=b,f.pesData=T;var I={audioTrack:s,avcTrack:o,id3Track:f,textTrack:this._txtTrack};return i&&this.extractRemainingSamples(I),I},t.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},t.extractRemainingSamples=function(e){var t,n=e.audioTrack,r=e.avcTrack,i=e.id3Track,a=r.pesData,o=n.pesData,s=i.pesData;a&&(t=v(a))?(this.parseAVCPES(t,!0),r.pesData=null):r.pesData=a,o&&(t=v(o))?(n.isAAC?this.parseAACPES(t):this.parseMPEGPES(t),n.pesData=null):(null!=o&&o.size&&c.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=o),s&&(t=v(s))?(this.parseID3PES(t),i.pesData=null):i.pesData=s},t.demuxSampleAes=function(e,t,n){var r=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new s.default(this.observer,this.config,t);return this.decrypt(r,i)},t.decrypt=function(e,t){return new Promise((function(n){var r=e.audioTrack,i=e.avcTrack;r.samples&&r.isAAC?t.decryptAacSamples(r.samples,0,(function(){i.samples?t.decryptAvcSamples(i.samples,0,0,(function(){n(e)})):n(e)})):i.samples&&t.decryptAvcSamples(i.samples,0,0,(function(){n(e)}))}))},t.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},t.parseAVCPES=function(e,t){var n,r=this,i=this._avcTrack,s=this.parseAVCNALu(e.data),u=this.avcSample,l=!1;e.data=null,u&&s.length&&!i.audFound&&(y(u,i),u=this.avcSample=p(!1,e.pts,e.dts,"")),s.forEach((function(t){switch(t.type){case 1:n=!0,u||(u=r.avcSample=p(!0,e.pts,e.dts,"")),u.frame=!0;var s=t.data;if(l&&s.length>4){var c=new a.default(s).readSliceType();2!==c&&4!==c&&7!==c&&9!==c||(u.key=!0)}break;case 5:n=!0,u||(u=r.avcSample=p(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:n=!0;var d=new a.default(b(t.data));d.readUByte();for(var f=0,h=0,m=!1,g=0;!m&&d.bytesAvailable>1;){f=0;do{f+=g=d.readUByte()}while(255===g);h=0;do{h+=g=d.readUByte()}while(255===g);if(4===f&&0!==d.bytesAvailable){if(m=!0,181===d.readUByte()&&49===d.readUShort()&&1195456820===d.readUInt()&&3===d.readUByte()){for(var v=d.readUByte(),T=31&v,E=[v,d.readUByte()],S=0;S<T;S++)E.push(d.readUByte()),E.push(d.readUByte()),E.push(d.readUByte());_(r._txtTrack.samples,{type:3,pts:e.pts,bytes:E})}}else if(5===f&&0!==d.bytesAvailable){if(m=!0,h>16){for(var w=[],A=0;A<16;A++)w.push(d.readUByte().toString(16)),3!==A&&5!==A&&7!==A&&9!==A||w.push("-");for(var M=h-16,L=new Uint8Array(M),C=0;C<M;C++)L[C]=d.readUByte();_(r._txtTrack.samples,{pts:e.pts,payloadType:f,uuid:w.join(""),userData:Object(o.utf8ArrayToStr)(L),userDataBytes:L})}}else if(h<d.bytesAvailable)for(var D=0;D<h;D++)d.readUByte()}break;case 7:if(n=!0,l=!0,!i.sps){var k=new a.default(t.data).readSPS();i.width=k.width,i.height=k.height,i.pixelRatio=k.pixelRatio,i.sps=[t.data],i.duration=r._duration;for(var P=t.data.subarray(1,4),I="avc1.",O=0;O<3;O++){var R=P[O].toString(16);R.length<2&&(R="0"+R),I+=R}i.codec=I}break;case 8:n=!0,i.pps||(i.pps=[t.data]);break;case 9:n=!1,i.audFound=!0,u&&y(u,i),u=r.avcSample=p(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}u&&n&&u.units.push(t)})),t&&u&&(y(u,i),this.avcSample=null)},t.getLastNalUnit=function(){var e,t,n=this.avcSample;if(!n||0===n.units.length){var r=this._avcTrack.samples;n=r[r.length-1]}if(null!==(e=n)&&void 0!==e&&e.units){var i=n.units;t=i[i.length-1]}return t},t.parseAVCNALu=function(e){var t,n,r=e.byteLength,i=this._avcTrack,a=i.naluState||0,o=a,s=[],u=0,l=-1,c=0;for(-1===a&&(l=0,c=31&e[0],a=0,u=1);u<r;)if(t=e[u++],a)if(1!==a)if(t)if(1===t){if(l>=0){var d={data:e.subarray(l,u-a-1),type:c};s.push(d)}else{var f=this.getLastNalUnit();if(f&&(o&&u<=4-o&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-o)),(n=u-a-1)>0)){var h=new Uint8Array(f.data.byteLength+n);h.set(f.data,0),h.set(e.subarray(0,n),f.data.byteLength),f.data=h}}u<r?(l=u,c=31&e[u],a=0):a=-1}else a=0;else a=3;else a=t?0:2;else a=t?0:1;if(l>=0&&a>=0){var p={data:e.subarray(l,r),type:c,state:a};s.push(p)}if(0===s.length){var m=this.getLastNalUnit();if(m){var g=new Uint8Array(m.data.byteLength+e.byteLength);g.set(m.data,0),g.set(e,m.data.byteLength),m.data=g}}return i.naluState=a,s},t.parseAACPES=function(e){var t,n,i,a,o,s=0,l=this._audioTrack,f=this.aacOverFlow,h=e.data;if(f){this.aacOverFlow=null;var p=f.sample.unit.byteLength,m=Math.min(f.missing,p),g=p-m;f.sample.unit.set(h.subarray(0,m),g),l.samples.push(f.sample),s=f.missing}for(t=s,n=h.length;t<n-1&&!r.isHeader(h,t);t++);if(t===s||(t<n-1?(i="AAC PES did not start with ADTS header,offset:"+t,a=!1):(i="no ADTS header found in AAC PES",a=!0),c.logger.warn("parsing error:"+i),this.observer.emit(u.Events.ERROR,u.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:a,reason:i}),!a)){if(r.initTrackConfig(l,this.observer,h,t,this.audioCodec),void 0!==e.pts)o=e.pts;else{if(!f)return void c.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var v=r.getFrameDuration(l.samplerate);o=f.sample.pts+v}for(var y=0;t<n;){if(r.isHeader(h,t)){if(t+5<n){var _=r.appendFrame(l,h,t,o,y);if(_){if(!_.missing){t+=_.length,y++;continue}this.aacOverFlow=_}}break}t++}}},t.parseMPEGPES=function(e){var t=e.data,n=t.length,r=0,a=0,o=e.pts;if(void 0!==o)for(;a<n;)if(i.isHeader(t,a)){var s=i.appendFrame(this._audioTrack,t,a,o,r);if(!s)break;a+=s.length,r++}else a++;else c.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},t.parseID3PES=function(e){void 0!==e.pts?this._id3Track.samples.push(e):c.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},e}();function p(e,t,n,r){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:r,length:0}}function m(e,t){return(31&e[t+10])<<8|e[t+11]}function g(e,t,n,r){var i={audio:-1,avc:-1,id3:-1,isAAC:!0},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var o=(31&e[t+1])<<8|e[t+2];switch(e[t]){case 207:if(!r){c.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===i.audio&&(i.audio=o);break;case 21:-1===i.id3&&(i.id3=o);break;case 219:if(!r){c.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===i.avc&&(i.avc=o);break;case 3:case 4:n?-1===i.audio&&(i.audio=o,i.isAAC=!1):c.logger.log("MPEG audio found, not supported in this browser");break;case 36:c.logger.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return i}function v(e){var t,n,r,i,a,o=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&s.length>1;){var u=new Uint8Array(s[0].length+s[1].length);u.set(s[0]),u.set(s[1],s[0].length),s[0]=u,s.splice(1,1)}if(1===((t=s[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;var l=t[7];192&l&&(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?i-(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(c.logger.warn(Math.round((i-a)/9e4)+"s delta between PTS and DTS, align them"),i=a):a=i);var d=(r=t[8])+9;if(e.size<=d)return null;e.size-=d;for(var f=new Uint8Array(e.size),h=0,p=s.length;h<p;h++){var m=(t=s[h]).byteLength;if(d){if(d>m){d-=m;continue}t=t.subarray(d),m-=d,d=0}f.set(t,o),o+=m}return n&&(n-=r+3),{data:f,pts:i,dts:a,len:n}}return null}function y(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var n=t.samples,r=n.length;if(!r)return void t.dropped++;var i=n[r-1];e.pts=i.pts,e.dts=i.dts}t.samples.push(e)}e.debug.length&&c.logger.log(e.pts+"/"+e.dts+":"+e.debug)}function _(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)}function b(e){for(var t=e.byteLength,n=[],r=1;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;var i=t-n.length,a=new Uint8Array(i),o=0;for(r=0;r<i;o++,r++)o===n[0]&&(o++,n.shift()),a[r]=e[o];return a}h.minProbeByteLength=188,t.default=h},"./src/errors.ts":function(e,t,n){"use strict";var r,i;n.r(t),n.d(t,"ErrorTypes",(function(){return r})),n.d(t,"ErrorDetails",(function(){return i})),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(r||(r={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown"}(i||(i={}))},"./src/events.ts":function(e,t,n){"use strict";var r;n.r(t),n.d(t,"Events",(function(){return r})),function(e){e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached"}(r||(r={}))},"./src/hls.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=n("./src/loader/playlist-loader.ts"),a=n("./src/loader/key-loader.ts"),o=n("./src/controller/id3-track-controller.ts"),s=n("./src/controller/latency-controller.ts"),u=n("./src/controller/level-controller.ts"),l=n("./src/controller/fragment-tracker.ts"),c=n("./src/controller/stream-controller.ts"),d=n("./src/is-supported.ts"),f=n("./src/utils/logger.ts"),h=n("./src/config.ts"),p=n("./node_modules/eventemitter3/index.js"),m=n("./src/events.ts"),g=n("./src/errors.ts");function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t){void 0===t&&(t={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new p.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this._media=null,this.url=null;var n=this.config=Object(h.mergeConfig)(e.DefaultConfig,t);this.userConfig=t,Object(f.enableLogs)(n.debug),this._autoLevelCapping=-1,n.progressive&&Object(h.enableStreamingMode)(n);var r=n.abrController,d=n.bufferController,m=n.capLevelController,g=n.fpsController,v=this.abrController=new r(this),y=this.bufferController=new d(this),_=this.capLevelController=new m(this),b=new g(this),T=new i.default(this),E=new a.default(this),S=new o.default(this),w=this.levelController=new u.default(this),A=new l.FragmentTracker(this),M=this.streamController=new c.default(this,A);_.setStreamController(M),b.setStreamController(M);var L=[w,M];this.networkControllers=L;var C=[T,E,v,y,_,b,S,A];this.audioTrackController=this.createController(n.audioTrackController,null,L),this.createController(n.audioStreamController,A,L),this.subtitleTrackController=this.createController(n.subtitleTrackController,null,L),this.createController(n.subtitleStreamController,A,L),this.createController(n.timelineController,null,C),this.emeController=this.createController(n.emeController,null,C),this.latencyController=this.createController(s.default,null,C),this.coreComponents=C}e.isSupported=function(){return Object(d.isSupported)()};var t,n,y,_=e.prototype;return _.createController=function(e,t,n){if(e){var r=t?new e(this,t):new e(this);return n&&n.push(r),r}return null},_.on=function(e,t,n){void 0===n&&(n=this),this._emitter.on(e,t,n)},_.once=function(e,t,n){void 0===n&&(n=this),this._emitter.once(e,t,n)},_.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},_.off=function(e,t,n,r){void 0===n&&(n=this),this._emitter.off(e,t,n,r)},_.listeners=function(e){return this._emitter.listeners(e)},_.emit=function(e,t,n){return this._emitter.emit(e,t,n)},_.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){f.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(m.Events.ERROR,{type:g.ErrorTypes.OTHER_ERROR,details:g.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,error:t})}return!1},_.listenerCount=function(e){return this._emitter.listenerCount(e)},_.destroy=function(){f.logger.log("destroy"),this.trigger(m.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(e){return e.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(e){return e.destroy()})),this.coreComponents.length=0},_.attachMedia=function(e){f.logger.log("attachMedia"),this._media=e,this.trigger(m.Events.MEDIA_ATTACHING,{media:e})},_.detachMedia=function(){f.logger.log("detachMedia"),this.trigger(m.Events.MEDIA_DETACHING,void 0),this._media=null},_.loadSource=function(e){this.stopLoad();var t=this.media,n=this.url,i=this.url=r.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});f.logger.log("loadSource:"+i),t&&n&&n!==i&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(t)),this.trigger(m.Events.MANIFEST_LOADING,{url:e})},_.startLoad=function(e){void 0===e&&(e=-1),f.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},_.stopLoad=function(){f.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},_.swapAudioCodec=function(){f.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},_.recoverMediaError=function(){f.logger.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},_.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},t=e,y=[{key:"version",get:function(){return"1.0.11-doris.0"}},{key:"Events",get:function(){return m.Events}},{key:"ErrorTypes",get:function(){return g.ErrorTypes}},{key:"ErrorDetails",get:function(){return g.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:h.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}],(n=[{key:"levels",get:function(){var e=this.levelController.levels;return e||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){f.logger.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){f.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){f.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){f.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){f.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(f.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var n=e.length,r=0;r<n;r++)if(e[r].maxBitrate>t)return r;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&v(t.prototype,n),y&&v(t,y),e}();y.defaultConfig=void 0},"./src/is-supported.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"isSupported",(function(){return a})),n.d(t,"changeTypeSupported",(function(){return o}));var r=n("./src/utils/mediasource-helper.ts");function i(){return self.SourceBuffer||self.WebKitSourceBuffer}function a(){var e=Object(r.getMediaSource)();if(!e)return!1;var t=i(),n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!a}function o(){var e,t=i();return"function"==typeof(null==t?void 0:null===(e=t.prototype)||void 0===e?void 0:e.changeType)}},"./src/loader/fragment-loader.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c})),n.d(t,"LoadError",(function(){return f}));var r=n("./src/polyfills/number.ts"),i=n("./src/errors.ts");function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return o(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s(r,e)})(e)}function o(e,t,n){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=Math.pow(2,17),c=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(e,t){var n=this,r=e.url;if(!r)return Promise.reject(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(r?"part list":"url")));this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(r,u){n.loader&&n.loader.destroy();var c=n.loader=e.loader=o?new o(a):new s(a),h=d(e),p={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:l};e.stats=c.stats,c.load(h,p,{onSuccess:function(t,i,a,o){n.resetLoader(e,c),r({frag:e,part:null,payload:t.data,networkDetails:o})},onError:function(t,r,a){n.resetLoader(e,c),u(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:t,networkDetails:a}))},onAbort:function(t,r,a){n.resetLoader(e,c),u(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:a}))},onTimeout:function(t,r,a){n.resetLoader(e,c),u(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,networkDetails:a}))},onProgress:function(n,r,i,a){t&&t({frag:e,part:null,payload:i,networkDetails:a})}})}))},t.loadPart=function(e,t,n){var r=this;this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(u,c){r.loader&&r.loader.destroy();var h=r.loader=e.loader=o?new o(a):new s(a),p=d(e,t),m={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:l};t.stats=h.stats,h.load(p,m,{onSuccess:function(i,a,o,s){r.resetLoader(e,h),r.updateStatsFromPart(e,t);var l={frag:e,part:t,payload:i.data,networkDetails:s};n(l),u(l)},onError:function(n,a,o){r.resetLoader(e,h),c(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:n,networkDetails:o}))},onAbort:function(n,a,o){e.stats.aborted=t.stats.aborted,r.resetLoader(e,h),c(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,networkDetails:o}))},onTimeout:function(n,a,o){r.resetLoader(e,h),c(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,networkDetails:o}))}})}))},t.updateStatsFromPart=function(e,t){var n=e.stats,r=t.stats,i=r.total;if(n.loaded+=r.loaded,i){var a=Math.round(e.duration/t.duration),o=Math.min(Math.round(n.loaded/i),a),s=(a-o)*Math.round(n.loaded/o);n.total=n.loaded+s}else n.total=Math.max(n.loaded,n.total);var u=n.loading,l=r.loading;u.start?u.first+=l.first-l.start:(u.start=l.start,u.first=l.first),u.end=l.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},e}();function d(e,t){void 0===t&&(t=null);var n=t||e,i={frag:e,part:t,responseType:"arraybuffer",url:n.url,rangeStart:0,rangeEnd:0},a=n.byteRangeStartOffset,o=n.byteRangeEndOffset;return Object(r.isFiniteNumber)(a)&&Object(r.isFiniteNumber)(o)&&(i.rangeStart=a,i.rangeEnd=o),i}var f=function(e){var t,n;function r(t){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=e.call.apply(e,[this].concat(i))||this).data=void 0,n.data=t,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n),r}(a(Error))},"./src/loader/fragment.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ElementaryStreamTypes",(function(){return r})),n.d(t,"BaseSegment",(function(){return h})),n.d(t,"Fragment",(function(){return p})),n.d(t,"Part",(function(){return m}));var r,i=n("./src/polyfills/number.ts"),a=n("./node_modules/url-toolkit/src/url-toolkit.js"),o=n("./src/utils/logger.ts"),s=n("./src/loader/level-key.ts"),u=n("./src/loader/load-stats.ts");function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}!function(e){e.AUDIO="audio",e.VIDEO="video",e.AUDIOVIDEO="audiovideo"}(r||(r={}));var h=function(){function e(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[r.AUDIO]=null,t[r.VIDEO]=null,t[r.AUDIOVIDEO]=null,t),this.baseurl=e}return e.prototype.setByteRange=function(e,t){var n=e.split("@",2),r=[];1===n.length?r[0]=t?t.byteRangeEndOffset:0:r[0]=parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},f(e,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),e}(),p=function(e){function t(t,n){var r;return(r=e.call(this,n)||this)._decryptdata=null,r.rawProgramDateTime=null,r.programDateTime=null,r.tagList=[],r.duration=0,r.sn=0,r.levelkey=void 0,r.type=void 0,r.loader=null,r.level=-1,r.cc=0,r.startPTS=void 0,r.endPTS=void 0,r.appendedPTS=void 0,r.startDTS=void 0,r.endDTS=void 0,r.start=0,r.deltaPTS=void 0,r.maxStartPTS=void 0,r.minEndPTS=void 0,r.stats=new u.LoadStats,r.urlId=0,r.data=void 0,r.bitrateTest=!1,r.title=null,r.initSegment=null,r.type=t,r}l(t,e);var n=t.prototype;return n.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},n.setDecryptDataFromLevelKey=function(e,t){var n=e;return"AES-128"===(null==e?void 0:e.method)&&e.uri&&!e.iv&&((n=s.LevelKey.fromURI(e.uri)).method=e.method,n.iv=this.createInitializationVector(t),n.keyFormat="identity"),n},n.setElementaryStreamInfo=function(e,t,n,r,i,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,n),s.startDTS=Math.min(s.startDTS,r),s.endDTS=Math.max(s.endDTS,i)):o[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:i,partial:a}},n.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[r.AUDIO]=null,e[r.VIDEO]=null,e[r.AUDIOVIDEO]=null},f(t,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&o.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(i.isFiniteNumber)(this.programDateTime))return null;var e=Object(i.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;return!(null===(e=this.decryptdata)||void 0===e||!e.keyFormat||!this.decryptdata.uri)}}]),t}(h),m=function(e){function t(t,n,r,i,a){var o;(o=e.call(this,r)||this).fragOffset=0,o.duration=0,o.gap=!1,o.independent=!1,o.relurl=void 0,o.fragment=void 0,o.index=void 0,o.stats=new u.LoadStats,o.duration=t.decimalFloatingPoint("DURATION"),o.gap=t.bool("GAP"),o.independent=t.bool("INDEPENDENT"),o.relurl=t.enumeratedString("URI"),o.fragment=n,o.index=i;var s=t.enumeratedString("BYTERANGE");return s&&o.setByteRange(s,a),a&&(o.fragOffset=a.fragOffset+a.duration),o}return l(t,e),f(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),t}(h)},"./src/loader/key-loader.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/utils/logger.ts"),o=function(){function e(e){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){this.hls.on(r.Events.KEY_LOADING,this.onKeyLoading,this)},t._unregisterListeners=function(){this.hls.off(r.Events.KEY_LOADING,this.onKeyLoading)},t.destroy=function(){for(var e in this._unregisterListeners(),this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={}},t.onKeyLoading=function(e,t){var n=t.frag,i=n.type,o=this.loaders[i];if(n.decryptdata){var s=n.decryptdata.uri;if(s!==this.decrypturl||null===this.decryptkey){var u=this.hls.config;if(o&&(a.logger.warn("abort previous key loader for type:"+i),o.abort()),!s)return void a.logger.warn("key uri is falsy");var l=u.loader,c=n.loader=this.loaders[i]=new l(u);this.decrypturl=s,this.decryptkey=null;var d={url:s,frag:n,responseType:"arraybuffer"},f={timeout:u.fragLoadingTimeOut,maxRetry:0,retryDelay:u.fragLoadingRetryDelay,maxRetryDelay:u.fragLoadingMaxRetryTimeout,highWaterMark:0},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(d,f,h)}else this.decryptkey&&(n.decryptdata.key=this.decryptkey,this.hls.trigger(r.Events.KEY_LOADED,{frag:n}))}else a.logger.warn("Missing decryption data on fragment in onKeyLoading")},t.loadsuccess=function(e,t,n){var i=n.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(r.Events.KEY_LOADED,{frag:i})):a.logger.error("after key load, decryptdata unset")},t.loaderror=function(e,t){var n=t.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.loadtimeout=function(e,t){var n=t.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},e}()},"./src/loader/level-details.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LevelDetails",(function(){return a}));var r=n("./src/polyfills/number.ts");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=e}var t,n,a;return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},t=e,(n=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(r.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!==(e=this.fragments)&&void 0!==e&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&i(t.prototype,n),a&&i(t,a),e}()},"./src/loader/level-key.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LevelKey",(function(){return a}));var r=n("./node_modules/url-toolkit/src/url-toolkit.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(e,t){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=t?Object(r.buildAbsoluteURL)(e,t,{alwaysNormalize:!0}):e}var t,n,a;return e.fromURL=function(t,n){return new e(t,n)},e.fromURI=function(t){return new e(t)},t=e,(n=[{key:"uri",get:function(){return this._uri}}])&&i(t.prototype,n),a&&i(t,a),e}()},"./src/loader/load-stats.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"LoadStats",(function(){return r}));var r=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var r=n("./src/polyfills/number.ts"),i=n("./node_modules/url-toolkit/src/url-toolkit.js"),a=n("./src/loader/fragment.ts"),o=n("./src/loader/level-details.ts"),s=n("./src/loader/level-key.ts"),u=n("./src/utils/attr-list.ts"),l=n("./src/utils/logger.ts"),c=n("./src/utils/codecs.ts"),d=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,f=/#EXT-X-MEDIA:(.*)/g,h=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),p=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),m=/\.(mp4|m4s|m4v|m4a)$/i,g=function(){function e(){}return e.findGroup=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}},e.convertAVC1ToAVCOTI=function(e){var t=e.split(".");if(t.length>2){var n=t.shift()+".";return n+=parseInt(t.shift()).toString(16),n+=("000"+parseInt(t.shift()).toString(16)).substr(-4)}return e},e.resolve=function(e,t){return i.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,n){var r,i=[],a={},o=!1;for(d.lastIndex=0;null!=(r=d.exec(t));)if(r[1]){var s=new u.AttrList(r[1]),l={attrs:s,bitrate:s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),name:s.NAME,url:e.resolve(r[2],n)},c=s.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),v((s.CODECS||"").split(/[ ,]+/).filter((function(e){return e})),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=e.convertAVC1ToAVCOTI(l.videoCodec)),i.push(l)}else if(r[3]){var f=new u.AttrList(r[3]);f["DATA-ID"]&&(o=!0,a[f["DATA-ID"]]=f)}return{levels:i,sessionData:o?a:null}},e.parseMasterPlaylistMedia=function(t,n,r,i){var a;void 0===i&&(i=[]);var o=[],s=0;for(f.lastIndex=0;null!==(a=f.exec(t));){var l=new u.AttrList(a[1]);if(l.TYPE===r){var c={attrs:l,bitrate:0,id:s++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:r,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?e.resolve(l.URI,n):""};if(i.length){var d=e.findGroup(i,c.groupId)||i[0];y(c,d,"audioCodec"),y(c,d,"textCodec")}o.push(c)}}return o},e.parseLevelPlaylist=function(e,t,n,c,d){var f,g,v,y=new o.LevelDetails(t),T=y.fragments,E=null,S=0,w=0,A=0,M=0,L=null,C=new a.Fragment(c,t),D=-1,k=!1;for(h.lastIndex=0,y.m3u8=e;null!==(f=h.exec(e));){k&&(k=!1,(C=new a.Fragment(c,t)).start=A,C.sn=S,C.cc=M,C.level=n,E&&(C.initSegment=E,C.rawProgramDateTime=E.rawProgramDateTime));var P=f[1];if(P){C.duration=parseFloat(P);var I=(" "+f[2]).slice(1);C.title=I||null,C.tagList.push(I?["INF",P,I]:["INF",P])}else if(f[3])Object(r.isFiniteNumber)(C.duration)&&(C.start=A,v&&(C.levelkey=v),C.sn=S,C.level=n,C.cc=M,C.urlId=d,T.push(C),C.relurl=(" "+f[3]).slice(1),_(C,L),L=C,A+=C.duration,S++,w=0,k=!0);else if(f[4]){var O=(" "+f[4]).slice(1);L?C.setByteRange(O,L):C.setByteRange(O)}else if(f[5])C.rawProgramDateTime=(" "+f[5]).slice(1),C.tagList.push(["PROGRAM-DATE-TIME",C.rawProgramDateTime]),-1===D&&(D=T.length);else{if(!(f=f[0].match(p))){l.logger.warn("No matches on slow regex match for level playlist!");continue}for(g=1;g<f.length&&void 0===f[g];g++);var R=(" "+f[g]).slice(1),x=(" "+f[g+1]).slice(1),N=f[g+2]?(" "+f[g+2]).slice(1):"";switch(R){case"PLAYLIST-TYPE":y.type=x.toUpperCase();break;case"MEDIA-SEQUENCE":S=y.startSN=parseInt(x);break;case"SKIP":var j=new u.AttrList(x),F=j.decimalInteger("SKIPPED-SEGMENTS");if(Object(r.isFiniteNumber)(F)){y.skippedSegments=F;for(var U=F;U--;)T.unshift(null);S+=F}var B=j.enumeratedString("RECENTLY-REMOVED-DATERANGES");B&&(y.recentlyRemovedDateranges=B.split("\t"));break;case"TARGETDURATION":y.targetduration=parseFloat(x);break;case"VERSION":y.version=parseInt(x);break;case"EXTM3U":break;case"ENDLIST":y.live=!1;break;case"#":(x||N)&&C.tagList.push(N?[x,N]:[x]);break;case"DIS":M++;case"GAP":C.tagList.push([R]);break;case"BITRATE":C.tagList.push([R,x]);break;case"DISCONTINUITY-SEQ":M=parseInt(x);break;case"KEY":var Y,H=new u.AttrList(x),V=H.enumeratedString("METHOD"),G=H.URI,K=H.hexadecimalInteger("IV"),W=H.enumeratedString("KEYFORMATVERSIONS"),q=H.enumeratedString("KEYID"),z=null!=(Y=H.enumeratedString("KEYFORMAT"))?Y:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready"].indexOf(z)>-1){l.logger.warn("Keyformat "+z+" is not supported from the manifest");continue}if("identity"!==z)continue;V&&(v=s.LevelKey.fromURL(t,G),G&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(V)>=0&&(v.method=V,v.keyFormat=z,q&&(v.keyID=q),W&&(v.keyFormatVersions=W),v.iv=K));break;case"START":var X=new u.AttrList(x).decimalFloatingPoint("TIME-OFFSET");Object(r.isFiniteNumber)(X)&&(y.startTimeOffset=X);break;case"MAP":var Q=new u.AttrList(x);if(C.duration){var $=new a.Fragment(c,t);b($,Q,n,v),E=$,C.initSegment=E,C.rawProgramDateTime=E.rawProgramDateTime}else b(C,Q,n,v),E=C,k=!0;break;case"SERVER-CONTROL":var J=new u.AttrList(x);y.canBlockReload=J.bool("CAN-BLOCK-RELOAD"),y.canSkipUntil=J.optionalFloat("CAN-SKIP-UNTIL",0),y.canSkipDateRanges=y.canSkipUntil>0&&J.bool("CAN-SKIP-DATERANGES"),y.partHoldBack=J.optionalFloat("PART-HOLD-BACK",0),y.holdBack=J.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var Z=new u.AttrList(x);y.partTarget=Z.decimalFloatingPoint("PART-TARGET");break;case"PART":var ee=y.partList;ee||(ee=y.partList=[]);var te=w>0?ee[ee.length-1]:void 0,ne=w++,re=new a.Part(new u.AttrList(x),C,t,ne,te);ee.push(re),C.duration+=re.duration;break;case"PRELOAD-HINT":var ie=new u.AttrList(x);y.preloadHint=ie;break;case"RENDITION-REPORT":var ae=new u.AttrList(x);y.renditionReports=y.renditionReports||[],y.renditionReports.push(ae);break;default:l.logger.warn("line parsed but not handled: "+f)}}}L&&!L.relurl?(T.pop(),A-=L.duration,y.partList&&(y.fragmentHint=L)):y.partList&&(_(C,L),C.cc=M,y.fragmentHint=C),y.fragmentHint&&v&&(y.fragmentHint.levelkey=v);var oe=T.length,se=T[0],ue=T[oe-1];if((A+=y.skippedSegments*y.targetduration)>0&&oe&&ue){y.averagetargetduration=A/oe;var le=ue.sn;y.endSN="initSegment"!==le?le:0,se&&(y.startCC=se.cc,se.initSegment||y.fragments.every((function(e){return e.relurl&&(t=e.relurl,m.test(null!=(n=null===(r=i.parseURL(t))||void 0===r?void 0:r.path)?n:""));var t,n,r}))&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(C=new a.Fragment(c,t)).relurl=ue.relurl,C.level=n,C.sn="initSegment",se.initSegment=C,y.needSidxRanges=!0))}else y.endSN=0,y.startCC=0;return y.fragmentHint&&(A+=y.fragmentHint.duration),y.totalduration=A,y.endCC=M,D>0&&function(e,t){for(var n=e[t],r=t;r--;){var i=e[r];if(!i)return;i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(T,D),y},e}();function v(e,t){["video","audio","text"].forEach((function(n){var r=e.filter((function(e){return Object(c.isCodecType)(e,n)}));if(r.length){var i=r.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[n+"Codec"]=i.length>0?i[0]:r[0],e=e.filter((function(e){return-1===r.indexOf(e)}))}})),t.unknownCodecs=e}function y(e,t,n){var r=t[n];r&&(e[n]=r)}function _(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(r.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function b(e,t,n,r){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",r&&(e.levelkey=r),e.initSegment=null}},"./src/loader/playlist-loader.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/errors.ts"),o=n("./src/utils/logger.ts"),s=n("./src/utils/mp4-tools.ts"),u=n("./src/loader/m3u8-parser.ts"),l=n("./src/types/loader.ts"),c=n("./src/utils/attr-list.ts");function d(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}var f=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return e.loader=i,this.loaders[e.type]=i,i},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var n=t.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:l.PlaylistContextType.MANIFEST,url:n,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var n=t.id,r=t.level,i=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:null,level:r,responseType:"text",type:l.PlaylistContextType.LEVEL,url:i,deliveryDirectives:a})},t.onAudioTrackLoading=function(e,t){var n=t.id,r=t.groupId,i=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:r,level:null,responseType:"text",type:l.PlaylistContextType.AUDIO_TRACK,url:i,deliveryDirectives:a})},t.onSubtitleTrackLoading=function(e,t){var n=t.id,r=t.groupId,i=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:r,level:null,responseType:"text",type:l.PlaylistContextType.SUBTITLE_TRACK,url:i,deliveryDirectives:a})},t.load=function(e){var t,n,r,i,a,s,u=this.hls.config,c=this.getInternalLoader(e);if(c){var d=c.context;if(d&&d.url===e.url)return void o.logger.trace("[playlist-loader]: playlist request ongoing");o.logger.log("[playlist-loader]: aborting previous loader for type: "+e.type),c.abort()}switch(e.type){case l.PlaylistContextType.MANIFEST:n=u.manifestLoadingMaxRetry,r=u.manifestLoadingTimeOut,i=u.manifestLoadingRetryDelay,a=u.manifestLoadingMaxRetryTimeout;break;case l.PlaylistContextType.LEVEL:case l.PlaylistContextType.AUDIO_TRACK:case l.PlaylistContextType.SUBTITLE_TRACK:n=0,r=u.levelLoadingTimeOut;break;default:n=u.levelLoadingMaxRetry,r=u.levelLoadingTimeOut,i=u.levelLoadingRetryDelay,a=u.levelLoadingMaxRetryTimeout}if(c=this.createInternalLoader(e),null!==(t=e.deliveryDirectives)&&void 0!==t&&t.part&&(e.type===l.PlaylistContextType.LEVEL&&null!==e.level?s=this.hls.levels[e.level].details:e.type===l.PlaylistContextType.AUDIO_TRACK&&null!==e.id?s=this.hls.audioTracks[e.id].details:e.type===l.PlaylistContextType.SUBTITLE_TRACK&&null!==e.id&&(s=this.hls.subtitleTracks[e.id].details),s)){var f=s.partTarget,h=s.targetduration;f&&h&&(r=Math.min(1e3*Math.max(3*f,.8*h),r))}var p={timeout:r,maxRetry:n,retryDelay:i,maxRetryDelay:a,highWaterMark:0},m={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(e,p,m)},t.loadsuccess=function(e,t,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this.handleSidxRequest(e,n),void this.handlePlaylistLoaded(e,t,n,r);this.resetInternalLoader(n.type);var i=e.data;0===i.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(e,t,n,r):this.handleMasterPlaylist(e,t,n,r)):this.handleManifestParsingError(e,n,"no EXTM3U delimiter",r)},t.loaderror=function(e,t,n){void 0===n&&(n=null),this.handleNetworkError(t,n,!1,e)},t.loadtimeout=function(e,t,n){void 0===n&&(n=null),this.handleNetworkError(t,n,!0)},t.handleMasterPlaylist=function(e,t,n,r){var a=this.hls,s=e.data,l=d(e,n),f=u.default.parseMasterPlaylist(s,l),h=f.levels,p=f.sessionData;if(h.length){var m=h.map((function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}})),g=h.map((function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}})),v=u.default.parseMasterPlaylistMedia(s,l,"AUDIO",m),y=u.default.parseMasterPlaylistMedia(s,l,"SUBTITLES",g),_=u.default.parseMasterPlaylistMedia(s,l,"CLOSED-CAPTIONS");v.length&&(v.some((function(e){return!e.url}))||!h[0].audioCodec||h[0].attrs.AUDIO||(o.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),v.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new c.AttrList({}),bitrate:0,url:""}))),a.trigger(i.Events.MANIFEST_LOADED,{levels:h,audioTracks:v,subtitles:y,captions:_,url:l,stats:t,networkDetails:r,sessionData:p})}else this.handleManifestParsingError(e,n,"no level found in manifest",r)},t.handleTrackOrLevelPlaylist=function(e,t,n,o){var s=this.hls,f=n.id,h=n.level,p=n.type,m=d(e,n),g=Object(r.isFiniteNumber)(f)?f:0,v=Object(r.isFiniteNumber)(h)?h:g,y=function(e){switch(e.type){case l.PlaylistContextType.AUDIO_TRACK:return l.PlaylistLevelType.AUDIO;case l.PlaylistContextType.SUBTITLE_TRACK:return l.PlaylistLevelType.SUBTITLE;default:return l.PlaylistLevelType.MAIN}}(n),_=u.default.parseLevelPlaylist(e.data,m,v,y,g);if(_.fragments.length){if(p===l.PlaylistContextType.MANIFEST){var b={attrs:new c.AttrList({}),bitrate:0,details:_,name:"",url:m};s.trigger(i.Events.MANIFEST_LOADED,{levels:[b],audioTracks:[],url:m,stats:t,networkDetails:o,sessionData:null})}if(t.parsing.end=performance.now(),_.needSidxRanges){var T,E=null===(T=_.fragments[0].initSegment)||void 0===T?void 0:T.url;this.load({url:E,isSidxRequest:!0,type:p,level:h,levelDetails:_,id:f,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else n.levelDetails=_,this.handlePlaylistLoaded(e,t,n,o)}else s.trigger(i.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:m,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},t.handleSidxRequest=function(e,t){var n=Object(s.parseSegmentIndex)(new Uint8Array(e.data));if(n){var r=n.references,i=t.levelDetails;r.forEach((function(e,t){var r=e.info,a=i.fragments[t];0===a.byteRange.length&&a.setByteRange(String(1+r.end-r.start)+"@"+String(r.start)),a.initSegment&&a.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}))}},t.handleManifestParsingError=function(e,t,n,r){this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:t.type===l.PlaylistContextType.MANIFEST,url:e.url,reason:n,response:e,context:t,networkDetails:r})},t.handleNetworkError=function(e,t,n,r){void 0===n&&(n=!1),o.logger.warn("[playlist-loader]: A network "+(n?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var s=a.ErrorDetails.UNKNOWN,u=!1,c=this.getInternalLoader(e);switch(e.type){case l.PlaylistContextType.MANIFEST:s=n?a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:a.ErrorDetails.MANIFEST_LOAD_ERROR,u=!0;break;case l.PlaylistContextType.LEVEL:s=n?a.ErrorDetails.LEVEL_LOAD_TIMEOUT:a.ErrorDetails.LEVEL_LOAD_ERROR,u=!1;break;case l.PlaylistContextType.AUDIO_TRACK:s=n?a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case l.PlaylistContextType.SUBTITLE_TRACK:s=n?a.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:a.ErrorDetails.SUBTITLE_LOAD_ERROR,u=!1}c&&this.resetInternalLoader(e.type);var d={type:a.ErrorTypes.NETWORK_ERROR,details:s,fatal:u,url:e.url,loader:c,context:e,networkDetails:t};r&&(d.response=r),this.hls.trigger(i.Events.ERROR,d)},t.handlePlaylistLoaded=function(e,t,n,r){var a=n.type,o=n.level,s=n.id,u=n.groupId,c=n.loader,d=n.levelDetails,f=n.deliveryDirectives;if(null!=d&&d.targetduration){if(c)switch(d.live&&(c.getCacheAge&&(d.ageHeader=c.getCacheAge()||0),c.getCacheAge&&!isNaN(d.ageHeader)||(d.ageHeader=0)),a){case l.PlaylistContextType.MANIFEST:case l.PlaylistContextType.LEVEL:this.hls.trigger(i.Events.LEVEL_LOADED,{details:d,level:o||0,id:s||0,stats:t,networkDetails:r,deliveryDirectives:f});break;case l.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(i.Events.AUDIO_TRACK_LOADED,{details:d,id:s||0,groupId:u||"",stats:t,networkDetails:r,deliveryDirectives:f});break;case l.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(i.Events.SUBTITLE_TRACK_LOADED,{details:d,id:s||0,groupId:u||"",stats:t,networkDetails:r,deliveryDirectives:f})}}else this.handleManifestParsingError(e,n,"invalid target duration",r)},e}();t.default=f},"./src/polyfills/number.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"isFiniteNumber",(function(){return r})),n.d(t,"MAX_SAFE_INTEGER",(function(){return i}));var r=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(e,t,n){"use strict";n.r(t);var r=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}();t.default=r},"./src/remux/mp4-generator.ts":function(e,t,n){"use strict";n.r(t);var r=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,u,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t=8,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=r.length,o=a;a--;)t+=r[a].byteLength;var s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),a=0,t=8;a<o;a++)s.set(r[a],t),t+=r[a].byteLength;return s},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))},e.moov=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)},e.sdtp=function(t){var n,r,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,r,i,a=[],o=[];for(n=0;n<t.sps.length;n++)i=(r=t.sps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)i=(r=t.pps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),u=t.width,l=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,a=t.width,o=t.height,s=Math.floor(i/(r+1)),u=Math.floor(i%(r+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,o>>8&255,255&o,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),a=t.id,o=Math.floor(n/(r+1)),s=Math.floor(n%(r+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var r,i,a,o,s,u,l=t.samples||[],c=l.length,d=12+16*c,f=new Uint8Array(d);for(n+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)a=(i=l[r]).duration,o=i.size,s=i.flags,u=i.cts,f.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var n=e.moov(t),r=new Uint8Array(e.FTYP.byteLength+n.byteLength);return r.set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}();i.types=void 0,i.HDLR_TYPES=void 0,i.STTS=void 0,i.STSC=void 0,i.STCO=void 0,i.STSZ=void 0,i.VMHD=void 0,i.SMHD=void 0,i.STSD=void 0,i.FTYP=void 0,i.DINF=void 0,t.default=i},"./src/remux/mp4-remuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m})),n.d(t,"normalizePts",(function(){return g}));var r=n("./src/polyfills/number.ts"),i=n("./src/remux/aac-helper.ts"),a=n("./src/remux/mp4-generator.ts"),o=n("./src/events.ts"),s=n("./src/errors.ts"),u=n("./src/utils/logger.ts"),l=n("./src/types/loader.ts"),c=n("./src/utils/timescale-conversion.ts");function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=null,h=null,p=!1,m=function(){function e(e,t,n,r){if(void 0===r&&(r=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===f){var i=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);f=i?parseInt(i[1]):0}if(null===h){var a=navigator.userAgent.match(/Safari\/(\d+)/i);h=a?parseInt(a[1]):0}p=!!f&&f<75||!!h&&h<600}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){u.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){u.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){u.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,n=e.reduce((function(e,n){var r=n.pts-e;return r<-4294967296?(t=!0,g(e,n.pts)):r>0?e:n.pts}),e[0].pts);return t&&u.logger.debug("PTS rollover detected"),n},t.remux=function(e,t,n,r,i,a,o,s){var c,d,f,h,p,m,v=i,y=i,_=e.pid>-1,b=t.pid>-1,T=t.samples.length,E=e.samples.length>0,S=T>1;if((!_||E)&&(!b||S)||this.ISGenerated||o){this.ISGenerated||(f=this.generateIS(e,t,i));var w=this.isVideoContiguous,A=-1;if(S&&(A=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!w&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,A>0){u.logger.warn("[mp4-remuxer]: Dropped "+A+" out of "+T+" video samples due to a missing keyframe");var M=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(A),t.dropped+=A,y+=(t.samples[0].pts-M)/(t.timescale||9e4)}else-1===A&&(u.logger.warn("[mp4-remuxer]: No keyframe found out of "+T+" video samples"),m=!1);if(this.ISGenerated){if(E&&S){var L=this.getVideoStartPts(t.samples),C=(g(e.samples[0].pts,L)-L)/t.inputTimeScale;v+=Math.max(0,C),y+=Math.max(0,-C)}if(E){if(e.samplerate||(u.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),f=this.generateIS(e,t,i)),d=this.remuxAudio(e,v,this.isAudioContiguous,a,b||S||s===l.PlaylistLevelType.AUDIO?y:void 0),S){var D=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(u.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),f=this.generateIS(e,t,i)),c=this.remuxVideo(t,y,w,D)}}else S&&(c=this.remuxVideo(t,y,w,0));c&&(c.firstKeyFrame=A,c.independent=-1!==A)}}return this.ISGenerated&&(n.samples.length&&(p=this.remuxID3(n,i)),r.samples.length&&(h=this.remuxText(r,i))),{audio:d,video:c,initSegment:f,independent:m,text:h,id3:p}},t.generateIS=function(e,t,n){var i,o,s,u=e.samples,l=t.samples,c=this.typeSupported,d={},f=!Object(r.isFiniteNumber)(this._initPTS),h="audio/mp4";if(f&&(i=o=1/0),e.config&&u.length&&(e.timescale=e.samplerate,e.isAAC||(c.mpeg?(h="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3")),d.audio={id:"audio",container:h,codec:e.codec,initSegment:!e.isAAC&&c.mpeg?new Uint8Array(0):a.default.initSegment([e]),metadata:{channelCount:e.channelCount}},f&&(s=e.inputTimeScale,i=o=u[0].pts-Math.round(s*n))),t.sps&&t.pps&&l.length&&(t.timescale=t.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:a.default.initSegment([t]),metadata:{width:t.width,height:t.height}},f)){s=t.inputTimeScale;var p=this.getVideoStartPts(l),m=Math.round(s*n);o=Math.min(o,g(l[0].dts,p)-m),i=Math.min(i,p-m)}if(Object.keys(d).length)return this.ISGenerated=!0,f&&(this._initPTS=i,this._initDTS=o),{tracks:d,initPTS:i,timescale:s}},t.remuxVideo=function(e,t,n,r){var i,l,h,m=e.inputTimeScale,y=e.samples,_=[],b=y.length,T=this._initPTS,E=this.nextAvcDts,S=8,w=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,M=0,L=!1;n&&null!==E||(E=t*m-(y[0].pts-g(y[0].dts,y[0].pts)));for(var C=0;C<b;C++){var D=y[C];D.pts=g(D.pts-T,E),D.dts=g(D.dts-T,E),D.dts>D.pts&&(M=Math.max(Math.min(M,D.pts-D.dts),-18e3)),D.dts<y[C>0?C-1:C].dts&&(L=!0)}L&&y.sort((function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r})),l=y[0].dts,h=y[y.length-1].dts;var k=Math.round((h-l)/(b-1));if(M<0){if(M<-2*k){u.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(c.toMsFromMpegTsClock)(-k,!0)+" ms");for(var P=M,I=0;I<b;I++)y[I].dts=P=Math.max(P,y[I].pts-k),y[I].pts=Math.max(P,y[I].pts)}else{u.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(c.toMsFromMpegTsClock)(M,!0)+" ms to overcome this issue");for(var O=0;O<b;O++)y[O].dts=y[O].dts+M}l=y[0].dts}if(n){var R=l-E,x=R>k;if(x||R<-1){x?u.logger.warn("AVC: "+Object(c.toMsFromMpegTsClock)(R,!0)+" ms ("+R+"dts) hole between fragments detected, filling it"):u.logger.warn("AVC: "+Object(c.toMsFromMpegTsClock)(-R,!0)+" ms ("+R+"dts) overlapping between fragments detected"),l=E;var N=y[0].pts-R;y[0].dts=l,y[0].pts=N,u.logger.log("Video: First PTS/DTS adjusted: "+Object(c.toMsFromMpegTsClock)(N,!0)+"/"+Object(c.toMsFromMpegTsClock)(l,!0)+", delta: "+Object(c.toMsFromMpegTsClock)(R,!0)+" ms")}}p&&(l=Math.max(0,l));for(var j=0,F=0,U=0;U<b;U++){for(var B=y[U],Y=B.units,H=Y.length,V=0,G=0;G<H;G++)V+=Y[G].data.length;F+=V,j+=H,B.length=V,B.dts=Math.max(B.dts,l),B.pts=Math.max(B.pts,B.dts,0),w=Math.min(B.pts,w),A=Math.max(B.pts,A)}h=y[b-1].dts;var K,W=F+4*j+8;try{K=new Uint8Array(W)}catch(e){return void this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:W,reason:"fail allocating video mdat "+W})}var q=new DataView(K.buffer);q.setUint32(0,W),K.set(a.default.types.mdat,4);for(var z=0;z<b;z++){for(var X=y[z],Q=X.units,$=0,J=0,Z=Q.length;J<Z;J++){var ee=Q[J],te=ee.data,ne=ee.data.byteLength;q.setUint32(S,ne),S+=4,K.set(te,S),S+=ne,$+=4+ne}if(z<b-1)i=y[z+1].dts-X.dts;else{var re=this.config,ie=X.dts-y[z>0?z-1:z].dts;if(re.stretchShortVideoTrack&&null!==this.nextAudioPts){var ae=Math.floor(re.maxBufferHole*m),oe=(r?w+r*m:this.nextAudioPts)-X.pts;oe>ae?((i=oe-ie)<0&&(i=ie),u.logger.log("[mp4-remuxer]: It is approximately "+oe/90+" ms to the next segment; using duration "+i/90+" ms for the last video frame.")):i=ie}else i=ie}var se=Math.round(X.pts-X.dts);_.push(new v(X.key,i,$,se))}if(_.length&&f&&f<70){var ue=_[0].flags;ue.dependsOn=2,ue.isNonSync=0}console.assert(void 0!==i,"mp4SampleDuration must be computed"),this.nextAvcDts=E=h+i,this.isVideoContiguous=!0;var le={data1:a.default.moof(e.sequenceNumber++,l,d({},e,{samples:_})),data2:K,startPTS:w/m,endPTS:(A+i)/m,startDTS:l/m,endDTS:E/m,type:"video",hasAudio:!1,hasVideo:!0,nb:_.length,dropped:e.dropped};return e.samples=[],e.dropped=0,console.assert(K.length,"MDAT length must not be zero"),le},t.remuxAudio=function(e,t,n,r,l){var c=e.inputTimeScale,f=c/(e.samplerate?e.samplerate:c),h=e.isAAC?1024:1152,p=h*f,m=this._initPTS,y=!e.isAAC&&this.typeSupported.mpeg,_=[],b=e.samples,T=y?0:8,E=this.nextAudioPts||-1,S=t*c;if(this.isAudioContiguous=n=n||b.length&&E>0&&(r&&Math.abs(S-E)<9e3||Math.abs(g(b[0].pts-m,S)-E)<20*p),b.forEach((function(e){e.pts=g(e.pts-m,S)})),!n||E<0){if(!(b=b.filter((function(e){return e.pts>=0}))).length)return;E=0===l?0:r?Math.max(0,S):b[0].pts}if(e.isAAC)for(var w=void 0!==l,A=this.config.maxAudioFramesDrift,M=0,L=E;M<b.length;M++){var C=b[M],D=C.pts,k=D-L,P=Math.abs(1e3*k/c);if(k<=-A*p&&w)0===M&&(u.logger.warn("Audio frame @ "+(D/c).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*k/c)+" ms."),this.nextAudioPts=E=L=D);else if(k>=A*p&&P<1e4&&w){var I=Math.round(k/p);(L=D-I*p)<0&&(I--,L+=p),0===M&&(this.nextAudioPts=E=L),u.logger.warn("[mp4-remuxer]: Injecting "+I+" audio frame @ "+(L/c).toFixed(3)+"s due to "+Math.round(1e3*k/c)+" ms gap.");for(var O=0;O<I;O++){var R=Math.max(L,0),x=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);x||(u.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),x=C.unit.subarray()),b.splice(M,0,{unit:x,pts:R}),L+=p,M++}}C.pts=L,L+=p}for(var N,j=null,F=null,U=0,B=b.length;B--;)U+=b[B].unit.byteLength;for(var Y=0,H=b.length;Y<H;Y++){var V=b[Y],G=V.unit,K=V.pts;if(null!==F)_[Y-1].duration=Math.round((K-F)/f);else{if(n&&e.isAAC&&(K=E),j=K,!(U>0))return;U+=T;try{N=new Uint8Array(U)}catch(e){return void this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}y||(new DataView(N.buffer).setUint32(0,U),N.set(a.default.types.mdat,4))}N.set(G,T);var W=G.byteLength;T+=W,_.push(new v(!0,h,W,0)),F=K}var q=_.length;if(q){var z=_[_.length-1];this.nextAudioPts=E=F+f*z.duration;var X=y?new Uint8Array(0):a.default.moof(e.sequenceNumber++,j/f,d({},e,{samples:_}));e.samples=[];var Q=j/c,$=E/c,J={data1:X,data2:N,startPTS:Q,endPTS:$,startDTS:Q,endDTS:$,type:"audio",hasAudio:!0,hasVideo:!1,nb:q};return this.isAudioContiguous=!0,console.assert(N.length,"MDAT length must not be zero"),J}},t.remuxEmptyAudio=function(e,t,n,r){var a=e.inputTimeScale,o=a/(e.samplerate?e.samplerate:a),s=this.nextAudioPts,l=(null!==s?s:r.startDTS*a)+this._initDTS,c=r.endDTS*a+this._initDTS,d=1024*o,f=Math.ceil((c-l)/d),h=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(u.logger.warn("[mp4-remuxer]: remux empty Audio"),h){for(var p=[],m=0;m<f;m++){var g=l+m*d;p.push({unit:h,pts:g,dts:g})}return e.samples=p,this.remuxAudio(e,t,n,!1)}u.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},t.remuxID3=function(e,t){var n=e.samples.length;if(n){for(var r=e.inputTimeScale,i=this._initPTS,a=this._initDTS,o=0;o<n;o++){var s=e.samples[o];s.pts=g(s.pts-i,t*r)/r,s.dts=g(s.dts-a,t*r)/r}var u=e.samples;return e.samples=[],{samples:u}}},t.remuxText=function(e,t){var n=e.samples.length;if(n){for(var r=e.inputTimeScale,i=this._initPTS,a=0;a<n;a++){var o=e.samples[a];o.pts=g(o.pts-i,t*r)/r}e.samples.sort((function(e,t){return e.pts-t.pts}));var s=e.samples;return e.samples=[],{samples:s}}},e}();function g(e,t){var n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}var v=function(e,t,n,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=r,this.flags=new y(e)},y=function(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}},"./src/remux/passthrough-remuxer.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/polyfills/number.ts"),i=n("./src/utils/mp4-tools.ts"),a=n("./src/loader/fragment.ts"),o=n("./src/utils/logger.ts"),s=function(){function e(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndDTS=null},t.resetNextTimestamp=function(){this.lastEndDTS=null},t.resetInitSegment=function(e,t,n){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,n=this.videoCodec;if(!e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var r=this.initData=Object(i.parseInitSegment)(e);t||(t=l(r.audio,a.ElementaryStreamTypes.AUDIO)),n||(n=l(r.video,a.ElementaryStreamTypes.VIDEO));var s={};r.audio&&r.video?s.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:r.audio?s.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:r.video?s.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:o.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s},t.remux=function(e,t,n,a,s){var l=this.initPTS,c=this.lastEndDTS,d={audio:void 0,video:void 0,text:a,id3:n,initSegment:void 0};Object(r.isFiniteNumber)(c)||(c=this.lastEndDTS=s||0);var f=t.samples;if(!f||!f.length)return d;var h={initPTS:void 0,timescale:1},p=this.initData;if(p&&p.length||(this.generateInitSegment(f),p=this.initData),!p||!p.length)return o.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1),Object(r.isFiniteNumber)(l)||(this.initPTS=h.initPTS=l=u(p,f,c));var m=Object(i.getDuration)(f,p),g=c,v=m+g;Object(i.offsetStartDTS)(p,f,l),m>0?this.lastEndDTS=v:(o.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var y=!!p.audio,_=!!p.video;if(_){var b,T,E=null===(b=p.video)||void 0===b?void 0:b.id,S=null===(T=p.video)||void 0===T?void 0:T.timescale;E&&S&&(a.samples=Object(i.parseVideoSegmentTextTrackSamples)(f,E),a.timescale=S)}a.samples.length&&this.remuxText(a);var w="";y&&(w+="audio"),_&&(w+="video");var A={data1:f,startPTS:g,startDTS:g,endPTS:v,endDTS:v,type:w,hasAudio:y,hasVideo:_,nb:1,dropped:0};if(null!=this.initPTS)for(var M=Object(i.parseId3TrackSamples)(f),L=0;L<M.length;L++){var C=M[L];null!=C&&null!=C.timescale&&(C.pts=C.pts/C.timescale-this.initPTS,C.dts=C.dts/C.timescale-this.initPTS,C.duration=null!=C.duration?C.duration/C.timescale:void 0,n.samples.push(C))}return d.audio="audio"===A.type?A:void 0,d.video="audio"!==A.type?A:void 0,d.text=a,d.id3=n,d.initSegment=h,d},t.remuxText=function(e){e.samples.sort((function(e,t){return e.pts-t.pts}));var t,n=e.samples.length,r=e.timescale,i=this.initPTS;if(n&&i)for(var a=0;a<n;a++)(t=e.samples[a]).pts=t.pts/r},e}(),u=function(e,t,n){return Object(i.getStartDTS)(e,t)-n};function l(e,t){var n=null==e?void 0:e.codec;return n&&n.length>4?n:"hvc1"===n?"hvc1.1.c.L120.90":"av01"===n?"av01.0.04M.08":"avc1"===n||t===a.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}t.default=s},"./src/task-loop.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));var r=function(){function e(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.onHandlerDestroyed=function(){},t.hasInterval=function(){return!!this._tickInterval},t.hasNextTick=function(){return!!this._tickTimer},t.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},t.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},t.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},t.doTick=function(){},e}()},"./src/types/level.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i;function a(e,t){var n=e.canSkipUntil,r=e.canSkipDateRanges,a=e.endSN;return n&&(void 0!==t?t-a:0)<n?r?i.v2:i.Yes:i.No}n.r(t),n.d(t,"HlsSkip",(function(){return i})),n.d(t,"getSkipValue",(function(){return a})),n.d(t,"HlsUrlParameters",(function(){return o})),n.d(t,"Level",(function(){return s})),function(e){e.No="",e.Yes="YES",e.v2="v2"}(i||(i={}));var o=function(){function e(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.toString()},e}(),s=function(){function e(e){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this.attrs=e.attrs,this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter((function(e){return e})).join(",").replace(/\.[^.,]+/g,"")}var t,n,i;return t=e,(n=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){var t=e%this.url.length;this._urlId!==t&&(this.details=void 0,this._urlId=t)}}])&&r(t.prototype,n),i&&r(t,i),e}()},"./src/types/loader.ts":function(e,t,n){"use strict";var r,i;n.r(t),n.d(t,"PlaylistContextType",(function(){return r})),n.d(t,"PlaylistLevelType",(function(){return i})),function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(r||(r={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(i||(i={}))},"./src/types/transmuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ChunkMetadata",(function(){return r}));var r=function(e,t,n,r,i,a){void 0===r&&(r=0),void 0===i&&(i=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=i,this.partial=a}},"./src/utils/attr-list.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"AttrList",(function(){return a}));var r=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(){function e(t){for(var n in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){var n=this[e];return n?parseFloat(n):t},t.enumeratedString=function(e){return this[e]},t.bool=function(e){return"YES"===this[e]},t.decimalResolution=function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(i.lastIndex=0;null!==(t=i.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n},e}()},"./src/utils/binary-search.ts":function(e,t,n){"use strict";n.r(t),t.default={search:function(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){var o=t(a=e[i=(n+r)/2|0]);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}}},"./src/utils/buffer-helper.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"BufferHelper",(function(){return a}));var r=n("./src/utils/logger.ts"),i={length:0,start:function(){return 0},end:function(){return 0}},a=function(){function e(){}return e.isBuffered=function(t,n){try{if(t)for(var r=e.getBuffered(t),i=0;i<r.length;i++)if(n>=r.start(i)&&n<=r.end(i))return!0}catch(e){}return!1},e.bufferInfo=function(t,n,r){try{if(t){var i,a=e.getBuffered(t),o=[];for(i=0;i<a.length;i++)o.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(o,n,r)}}catch(e){}return{len:0,start:n,end:n,nextStart:void 0}},e.bufferedInfo=function(e,t,n){t=Math.max(0,t),e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end}));var r=[];if(n)for(var i=0;i<e.length;i++){var a=r.length;if(a){var o=r[a-1].end;e[i].start-o<n?e[i].end>o&&(r[a-1].end=e[i].end):r.push(e[i])}else r.push(e[i])}else r=e;for(var s,u=0,l=t,c=t,d=0;d<r.length;d++){var f=r[d].start,h=r[d].end;if(t+n>=f&&t<h)l=f,u=(c=h)-t;else if(t+n<f){s=f;break}}return{len:u,start:l||0,end:c||0,nextStart:s}},e.getBuffered=function(e){try{return e.buffered}catch(e){return r.logger.log("failed to get media.buffered",e),i}},e}()},"./src/utils/cea-608-parser.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Row",(function(){return y})),n.d(t,"CaptionScreen",(function(){return _}));var r,i=n("./src/utils/logger.ts"),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(e){var t=e;return a.hasOwnProperty(e)&&(t=a[e]),String.fromCharCode(t)},s=15,u=100,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(r||(r={}));var p=function(){function e(){this.time=null,this.verboseLevel=r.ERROR}return e.prototype.log=function(e,t){this.verboseLevel>=e&&i.logger.log(this.time+" ["+e+"] "+t)},e}(),m=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},g=function(){function e(e,t,n,r,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),v=function(){function e(e,t,n,r,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new g(t,n,r,i,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),y=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<u;t++)this.chars.push(new v);this.logger=e,this.pos=0,this.currPenState=new g}var t=e.prototype;return t.equals=function(e){for(var t=!0,n=0;n<u;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<u;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<u;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(r.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(this.logger.log(r.DEBUG,"Too large cursor position "+this.pos),this.pos=u)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=o(e);this.pos>=u?this.logger.log(r.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<u;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,n=0;n<u;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),_=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<s;t++)this.rows.push(new y(e));this.logger=e,this.currRow=s-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<s;e++)this.rows[e].clear();this.currRow=s-1},t.equals=function(e){for(var t=!0,n=0;n<s;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<s;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(r.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(r.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<s;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var o=a.rows[i].cueStartTime,u=this.logger.time;if(o&&null!==u&&o<u)for(var l=0;l<this.nrRollUpRows;l++)this.rows[t-this.nrRollUpRows+l+1].copy(a.rows[i+l])}}this.currRow=t;var c=this.rows[this.currRow];if(null!==e.indent){var d=e.indent,f=Math.max(d-1,0);c.setCursor(e.indent),e.color=c.chars[f].penState.foreground}var h={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(h)},t.setBkgData=function(e){this.logger.log(r.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(r.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(r.INFO,"Rolling up")}else this.logger.log(r.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<s;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.getTextAndFormat=function(){return this.rows},e}(),b=function(){function e(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new _(n),this.nonDisplayedMemory=new _(n),this.lastOutputScreen=new _(n),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(r.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(r.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(r.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(r.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(r.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(r.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(r.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(r.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(r.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(r.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(r.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(r.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(r.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(r.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(this.logger.log(r.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(r.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(r.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(r.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),T=function(){function e(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var r=new p;this.channels=[null,new b(e,t,r),new b(e+1,n,r)],this.cmdHistory={a:null,b:null},this.logger=r}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var n,i,a,o=!1;this.logger.time=e;for(var s=0;s<t.length;s+=2)if(i=127&t[s],a=127&t[s+1],0!==i||0!==a){if(this.logger.log(r.DATA,"["+m([t[s],t[s+1]])+"] -> ("+m([i,a])+")"),(n=this.parseCmd(i,a))||(n=this.parseMidrow(i,a)),n||(n=this.parsePAC(i,a)),n||(n=this.parseBackgroundAttributes(i,a)),!n&&(o=this.parseChars(i,a))){var u=this.currentChannel;u&&u>0?this.channels[u].insertChars(o):this.logger.log(r.WARNING,"No channel found yet. TEXT-MODE?")}n||o||this.logger.log(r.WARNING,"Couldn't parse cleaned data "+m([i,a])+" orig: "+m([t[s],t[s+1]]))}},t.parseCmd=function(e,t){var n=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(S(e,t,n))return E(null,null,n),this.logger.log(r.DEBUG,"Repeated command ("+m([e,t])+") is dropped"),!0;var i=20===e||21===e||23===e?1:2,a=this.channels[i];return 20===e||21===e||28===e||29===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),E(e,t,n),this.currentChannel=i,!0},t.parseMidrow=function(e,t){var n=0;if((17===e||25===e)&&t>=32&&t<=47){if((n=17===e?1:2)!==this.currentChannel)return this.logger.log(r.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[n];return!!i&&(i.ccMIDROW(t),this.logger.log(r.DEBUG,"MIDROW ("+m([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var n,r=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(S(e,t,r))return E(null,null,r),!0;var i=e<=23?1:2;n=t>=64&&t<=95?1===i?l[e]:d[e]:1===i?c[e]:f[e];var a=this.channels[i];return!!a&&(a.setPAC(this.interpretPAC(n,t)),E(e,t,r),this.currentChannel=i,!0)},t.interpretPAC=function(e,t){var n,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},t.parseChars=function(e,t){var n,i,a=null,s=null;if(e>=25?(n=2,s=e-8):(n=1,s=e),s>=17&&s<=19?(i=17===s?t+80:18===s?t+112:t+144,this.logger.log(r.INFO,"Special char '"+o(i)+"' in channel "+n),a=[i]):e>=32&&e<=127&&(a=0===t?[e]:[e,t]),a){var u=m(a);this.logger.log(r.DEBUG,"Char codes =  "+u.join(",")),E(e,t,this.cmdHistory)}return a},t.parseBackgroundAttributes=function(e,t){var n;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;var r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=h[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));var i=e<=23?1:2;return this.channels[i].setBkgData(r),E(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}},e}();function E(e,t,n){n.a=e,n.b=t}function S(e,t,n){return n.a===e&&n.b===t}t.default=T},"./src/utils/codecs.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"isCodecType",(function(){return i})),n.d(t,"isCodecSupportedInMp4",(function(){return a}));var r={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function i(e,t){var n=r[t];return!!n&&!0===n[e.slice(0,4)]}function a(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},"./src/utils/cues.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/utils/vttparser.ts"),i=n("./src/utils/webvtt-parser.ts"),a=n("./src/utils/texttrack-utils.ts"),o=/\s/,s={newCue:function(e,t,n,s){for(var u,l,c,d,f,h=[],p=self.VTTCue||self.TextTrackCue,m=0;m<s.rows.length;m++)if(c=!0,d=0,f="",!(u=s.rows[m]).isEmpty()){for(var g=0;g<u.chars.length;g++)o.test(u.chars[g].uchar)&&c?d++:(f+=u.chars[g].uchar,c=!1);u.cueStartTime=t,t===n&&(n+=1e-4),d>=16?d--:d++;var v=Object(r.fixLineBreaks)(f.trim()),y=Object(i.generateCueId)(t,n,v);e&&e.cues&&e.cues.getCueById(y)||((l=new p(t,n,v)).id=y,l.line=m+1,l.align="left",l.position=10+Math.min(80,10*Math.floor(8*d/32)),h.push(l))}return e&&h.length&&(h.sort((function(e,t){return"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line})),h.forEach((function(t){return Object(a.addCueToTrack)(e,t)}))),h}};t.default=s},"./src/utils/discontinuities.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"findFirstFragWithCC",(function(){return o})),n.d(t,"shouldAlignOnDiscontinuities",(function(){return s})),n.d(t,"findDiscontinuousReferenceFrag",(function(){return u})),n.d(t,"adjustSlidingStart",(function(){return c})),n.d(t,"alignStream",(function(){return d})),n.d(t,"alignPDT",(function(){return f})),n.d(t,"alignFragmentByPDTDelta",(function(){return h})),n.d(t,"alignMediaPlaylistByPDT",(function(){return p}));var r=n("./src/polyfills/number.ts"),i=n("./src/utils/logger.ts"),a=n("./src/controller/level-helper.ts");function o(e,t){for(var n=null,r=0,i=e.length;r<i;r++){var a=e[r];if(a&&a.cc===t){n=a;break}}return n}function s(e,t,n){return!(!t.details||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}function u(e,t){var n=e.fragments,r=t.fragments;if(r.length&&n.length){var a=o(n,r[0].cc);if(a&&(!a||a.startPTS))return a;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function l(e,t){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function c(e,t){for(var n=t.fragments,r=0,i=n.length;r<i;r++)l(n[r],e);t.fragmentHint&&l(t.fragmentHint,e),t.alignedSliding=!0}function d(e,t,n){t&&(function(e,t,n){if(s(e,n,t)){var a=u(n.details,t);a&&Object(r.isFiniteNumber)(a.start)&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level "+t.url),c(a.start,t))}}(e,n,t),!n.alignedSliding&&t.details&&f(n,t.details),n.alignedSliding||!t.details||n.skippedSegments||Object(a.adjustSliding)(t.details,n))}function f(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var n=t.fragments[0].programDateTime,a=e.fragments[0].programDateTime,o=(a-n)/1e3+t.fragments[0].start;o&&Object(r.isFiniteNumber)(o)&&(i.logger.log("Adjusting PTS using programDateTime delta "+(a-n)+"ms, sliding:"+o.toFixed(3)+" "+e.url+" "),c(o,e))}}function h(e,t){var n=e.programDateTime;if(n){var r=(n-t)/1e3;e.start=e.startPTS=r,e.endPTS=r+e.duration}}function p(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var n=t.fragments[0].programDateTime-1e3*t.fragments[0].start;e.fragments.forEach((function(e){h(e,n)})),e.fragmentHint&&h(e.fragmentHint,n),e.alignedSliding=!0}}},"./src/utils/ewma-bandwidth-estimator.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/utils/ewma.ts"),i=function(){function e(e,t,n){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new r.default(e),this.fast_=new r.default(t)}var t=e.prototype;return t.update=function(e,t){var n=this.slow_,i=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new r.default(e,n.getEstimate(),n.getTotalWeight())),this.fast_.halfLife!==t&&(this.fast_=new r.default(t,i.getEstimate(),i.getTotalWeight()))},t.sample=function(e,t){var n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();t.default=i},"./src/utils/ewma.ts":function(e,t,n){"use strict";n.r(t);var r=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}var t=e.prototype;return t.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}();t.default=r},"./src/utils/fetch-loader.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"fetchSupported",(function(){return c}));var r=n("./src/polyfills/number.ts"),i=n("./src/loader/load-stats.ts"),a=n("./src/demux/chunk-cache.ts");function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)})(e)}function s(e,t,n){return(s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}var d=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||f,this.controller=new self.AbortController,this.stats=new i.LoadStats}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},t.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(e,t,n){var i=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var o=function(e,t){var n={method:"GET",mode:"cors",credentials:"same-origin",signal:t};return e.rangeEnd&&(n.headers=new self.Headers({Range:"bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)})),n}(e,this.controller.signal),s=n.onProgress,u="arraybuffer"===e.responseType,l=u?"byteLength":"length";this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,o),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){i.abortInternal(),n.onTimeout(a,e,i.response)}),t.timeout),self.fetch(this.request).then((function(n){if(i.response=i.loader=n,!n.ok){var o=n.status,l=n.statusText;throw new h(l||"fetch, bad network response",o,n)}return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(n.headers.get("Content-Length")||"0"),s&&Object(r.isFiniteNumber)(t.highWaterMark)?i.loadProgressively(n,a,e,t.highWaterMark,s):u?n.arrayBuffer():n.text()})).then((function(o){var u=i.response;self.clearTimeout(i.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first),a.loaded=a.total=o[l];var c={url:u.url,data:o};s&&!Object(r.isFiniteNumber)(t.highWaterMark)&&s(a,e,o,u),n.onSuccess(c,a,e,u)})).catch((function(t){if(self.clearTimeout(i.requestTimeout),!a.aborted){var r=t.code||0;n.onError({code:r,text:t.message},e,t.details)}}))},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},t.loadProgressively=function(e,t,n,r,i){void 0===r&&(r=0);var o=new a.default,s=e.body.getReader();return function a(){return s.read().then((function(s){if(s.done)return o.dataLength&&i(t,n,o.flush(),e),Promise.resolve(new ArrayBuffer(0));var u=s.value,l=u.length;return t.loaded+=l,l<r||o.dataLength?(o.push(u),o.dataLength>=r&&i(t,n,o.flush(),e)):i(t,n,u,e),a()})).catch((function(){return Promise.reject()}))}()},e}();function f(e,t){return new self.Request(e.url,t)}var h=function(e){var t,n;function r(t,n,r){var i;return(i=e.call(this,t)||this).code=void 0,i.details=void 0,i.code=n,i.details=r,i}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n),r}(o(Error));t.default=d},"./src/utils/imsc1-ttml-parser.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"IMSC1_CODEC",(function(){return c})),n.d(t,"parseIMSC1",(function(){return p}));var r=n("./src/utils/mp4-tools.ts"),i=n("./src/utils/vttparser.ts"),a=n("./src/utils/vttcue.ts"),o=n("./src/demux/id3.ts"),s=n("./src/utils/timescale-conversion.ts"),u=n("./src/utils/webvtt-parser.ts");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c="stpp.ttml.im1t",d=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,f=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,h={left:"start",center:"center",right:"end",start:"start",end:"end"};function p(e,t,n,i,c){var d=Object(r.findBox)(new Uint8Array(e),["mdat"]);if(0!==d.length){var f=d[0],p=Object(o.utf8ArrayToStr)(new Uint8Array(e,f.start,f.end-f.start)),b=Object(s.toTimescaleFromScale)(t,1,n);try{i(function(e,t){var n=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");var r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(r).reduce((function(e,t){return e[t]=n.getAttribute("ttp:"+t)||r[t],e}),{}),o="preserve"!==n.getAttribute("xml:space"),s=g(m(n,"styling","style")),c=g(m(n,"layout","region")),d=m(n,"body","[begin]");return[].map.call(d,(function(e){var n=function e(t,n){return[].slice.call(t.childNodes).reduce((function(t,r,i){var a;return"br"===r.nodeName&&i?t+"\n":null!==(a=r.childNodes)&&void 0!==a&&a.length?e(r,n):n?t+r.textContent.trim().replace(/\s+/g," "):t+r.textContent}),"")}(e,o);if(!n||!e.hasAttribute("begin"))return null;var r=_(e.getAttribute("begin"),i),d=_(e.getAttribute("dur"),i),f=_(e.getAttribute("end"),i);if(null===r)throw y(e);if(null===f){if(null===d)throw y(e);f=r+d}var p=new a.default(r-t,f-t,n);p.id=Object(u.generateCueId)(p.startTime,p.endTime,p.text);var m=c[e.getAttribute("region")],g=s[e.getAttribute("style")];p.position=10,p.size=80;var b=function(e,t){var n="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(r,i){var a=v(t,n,i)||v(e,n,i);return a&&(r[i]=a),r}),{})}(m,g),T=b.textAlign;if(T){var E=h[T];E&&(p.lineAlign=E),p.align=T}return l(p,b),p})).filter((function(e){return null!==e}))}(p,b))}catch(e){c(e)}}else c(new Error("Could not parse IMSC1 mdat"))}function m(e,t,n){var r=e.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function g(e){return e.reduce((function(e,t){var n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function v(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function y(e){return new Error("Could not parse ttml timestamp "+e)}function _(e,t){if(!e)return null;var n=Object(i.parseTimeStamp)(e);return null===n&&(d.test(e)?n=function(e,t){var n=d.exec(e),r=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/t.frameRate}(e,t):f.test(e)&&(n=function(e,t){var n=f.exec(e),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}(e,t))),n}},"./src/utils/logger.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"enableLogs",(function(){return s})),n.d(t,"logger",(function(){return u}));var r=function(){},i={trace:r,debug:r,log:r,warn:r,info:r,error:r},a=i;function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach((function(t){a[t]=e[t]?e[t].bind(e):function(e){var t=self.console[e];return t?t.bind(self.console,"["+e+"] >"):r}(t)}))}function s(e){if(self.console&&!0===e||"object"==typeof e){o(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=i}}else a=i}var u=i},"./src/utils/mediakeys-helper.ts":function(e,t,n){"use strict";var r;n.r(t),n.d(t,"KeySystems",(function(){return r})),n.d(t,"requestMediaKeySystemAccess",(function(){return i})),function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(r||(r={}));var i="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":function(e,t,n){"use strict";function r(){return self.MediaSource||self.WebKitMediaSource}n.r(t),n.d(t,"getMediaSource",(function(){return r}))},"./src/utils/mp4-tools.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"bin2str",(function(){return c})),n.d(t,"readNullTerminatedString",(function(){return d})),n.d(t,"readUint16",(function(){return f})),n.d(t,"readUint32",(function(){return h})),n.d(t,"writeUint32",(function(){return p})),n.d(t,"findBox",(function(){return m})),n.d(t,"parseId3TrackSamples",(function(){return g})),n.d(t,"parseSegmentIndex",(function(){return v})),n.d(t,"parseInitSegment",(function(){return y})),n.d(t,"getStartDTS",(function(){return _})),n.d(t,"getDuration",(function(){return b})),n.d(t,"computeRawDurationFromSamples",(function(){return T})),n.d(t,"offsetStartDTS",(function(){return E})),n.d(t,"segmentValidRange",(function(){return S})),n.d(t,"appendUint8Array",(function(){return w})),n.d(t,"parseUserData",(function(){return A})),n.d(t,"parseSei",(function(){return M})),n.d(t,"parseVideoSegmentTextTrackSamples",(function(){return L})),n.d(t,"parseCaptionNals",(function(){return C})),n.d(t,"parseTfhd",(function(){return D})),n.d(t,"parseTfdt",(function(){return k})),n.d(t,"parseSamples",(function(){return P})),n.d(t,"findSeiNals",(function(){return I})),n.d(t,"parseTrun",(function(){return O})),n.d(t,"parseSampleFlags",(function(){return R})),n.d(t,"mapToSample",(function(){return x})),n.d(t,"discardEmulationPreventionBytes",(function(){return N})),n.d(t,"toUnsigned",(function(){return j}));var r=n("./src/utils/typed-array.ts"),i=n("./src/loader/fragment.ts"),a=4,o=128,s=Math.pow(2,32)-1,u=[].push,l=["https://aomedia.org/emsg/ID3","https://developer.apple.com/streaming/emsg-id3"];function c(e){return String.fromCharCode.apply(null,e)}function d(e,t){for(var n=t;"\0"!==String.fromCharCode(e[n])&&n<e.byteLength;)n++;return c(new Uint8Array(e.subarray(t,n)))}function f(e,t){"data"in e&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n}function h(e,t){"data"in e&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n}function p(e,t,n){"data"in e&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function m(e,t){var n,r,i,a=[];if(!t.length)return a;"data"in e?(n=e.data,r=e.start,i=e.end):(r=0,i=(n=e).byteLength);for(var o=r;o<i;){var s=h(n,o),l=s>1?o+s:i;if(c(n.subarray(o+4,o+8))===t[0])if(1===t.length)a.push({data:n,start:o+8,end:l});else{var d=m({data:n,start:o+8,end:l},t.slice(1));d.length&&u.apply(a,d)}o=l}return a}function g(e){return m(e,["emsg"]).map((function(e){try{var t=e.data.subarray(e.start,e.end),n=0,r=new DataView(t.buffer,t.byteOffset,t.byteLength);if(1!==r.getUint8(n))return;n+=4;var i=r.getUint32(n);n+=4;var a=Number(r.getBigUint64(n));n+=8;var o=r.getUint32(n);n+=4;var s=r.getUint32(n),u=d(t,n+=4);if(!l.includes(u))return;var c=d(t,n+=u.length+1);return n+=c.length+1,{timescale:i,pts:a,dts:a,duration:4294967295!==o?o:void 0,id:s,schemeIdUri:u,value:c,data:new Uint8Array(t.subarray(n,t.byteLength))}}catch(e){return}}))}function v(e){var t=m(e,["moov"])[0],n=t?t.end:null,r=m(e,["sidx"]);if(!r||!r[0])return null;var i=[],a=r[0],o=a.data[0],s=0===o?8:16,u=h(a,s);s+=4,s+=0===o?8:16,s+=2;var l=a.end+0,c=f(a,s);s+=2;for(var d=0;d<c;d++){var p=s,g=h(a,p);p+=4;var v=2147483647&g;if(1==(2147483648&g)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var y=h(a,p);p+=4,i.push({referenceSize:v,subsegmentDuration:y,info:{duration:y/u,start:l,end:l+v-1}}),l+=v,s=p+=4}return{earliestPresentationTime:0,timescale:u,version:o,referencesCount:c,references:i,moovEndOffset:n}}function y(e){for(var t=[],n=m(e,["moov","trak"]),r=0;r<n.length;r++){var a=n[r],o=m(a,["tkhd"])[0];if(o){var s=o.data[o.start],u=0===s?12:20,l=h(o,u),d=m(a,["mdia","mdhd"])[0];if(d){var f=h(d,u=0===(s=d.data[d.start])?12:20),p=m(a,["mdia","hdlr"])[0];if(p){var g=c(p.data.subarray(p.start+8,p.start+12)),v={soun:i.ElementaryStreamTypes.AUDIO,vide:i.ElementaryStreamTypes.VIDEO}[g];if(v){var y=m(a,["mdia","minf","stbl","stsd"])[0],_=void 0;y&&(_=c(y.data.subarray(y.start+12,y.start+16))),t[l]={timescale:f,type:v},t[v]={timescale:f,id:l,codec:_}}}}}}return m(e,["moov","mvex","trex"]).forEach((function(e){var n=h(e,4),r=t[n];r&&(r.default={duration:h(e,12),flags:h(e,20)})})),t}function _(e,t){return m(t,["moof","traf"]).reduce((function(t,n){var r=m(n,["tfdt"])[0],i=r.data[r.start],a=m(n,["tfhd"]).reduce((function(t,n){var a=h(n,4),o=e[a];if(o){var s=h(r,4);1===i&&(s*=Math.pow(2,32),s+=h(r,8));var u=s/(o.timescale||9e4);if(isFinite(u)&&(null===t||u<t))return u}return t}),null);return null!==a&&isFinite(a)&&(null===t||a<t)?a:t}),null)||0}function b(e,t){for(var n=0,r=0,a=0,o=m(e,["moof","traf"]),s=0;s<o.length;s++){var u=o[s],l=m(u,["tfhd"])[0],c=t[h(l,4)];if(c){var d=c.default,f=h(l,0)|(null==d?void 0:d.flags),p=null==d?void 0:d.duration;8&f&&(p=h(l,2&f?12:8));for(var g=c.timescale||9e4,y=m(u,["trun"]),_=0;_<y.length;_++)n=p?p*h(y[_],4):T(y[_]),c.type===i.ElementaryStreamTypes.VIDEO?r+=n/g:c.type===i.ElementaryStreamTypes.AUDIO&&(a+=n/g)}}if(0===r&&0===a){var b=v(e);if(null!=b&&b.references)return b.references.reduce((function(e,t){return e+t.info.duration||0}),0)}return r||a}function T(e){var t=h(e,0),n=8;1&t&&(n+=4),4&t&&(n+=4);for(var r=0,i=h(e,4),a=0;a<i;a++)256&t&&(r+=h(e,n),n+=4),512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4);return r}function E(e,t,n){m(t,["moof","traf"]).forEach((function(t){m(t,["tfhd"]).forEach((function(r){var i=h(r,4),a=e[i];if(a){var o=a.timescale||9e4;m(t,["tfdt"]).forEach((function(e){var t=e.data[e.start],r=h(e,4);if(0===t)p(e,4,r-n*o);else{r*=Math.pow(2,32),r+=h(e,8),r-=n*o,r=Math.max(r,0);var i=Math.floor(r/(s+1)),a=Math.floor(r%(s+1));p(e,4,i),p(e,8,a)}}))}}))}))}function S(e){var t={valid:null,remainder:null},n=m(e,["moof"]);if(!n)return t;if(n.length<2)return t.remainder=e,t;var i=n[n.length-1];return t.valid=Object(r.sliceUint8)(e,0,i.start-8),t.remainder=Object(r.sliceUint8)(e,i.start-8),t}function w(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function A(e){return e.payload?181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:new Uint8Array(e.payload.subarray(8,e.payload.length-1)):null}function M(e){for(var t=0,n={payloadType:-1,payloadSize:0,payload:null},r=0,i=0;t<e.byteLength&&e[t]!==o;){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&r===a){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}t+=i,r=0,i=0}return n}function L(e,t){return C(e,t).map((function(e){var t=A(M(e.escapedRBSP));return{type:3,trackId:e.trackId,pts:e.pts,dts:e.dts,bytes:t}}))}function C(e,t){var n=[],r=m(e,["moof","traf"]),i=m(e,["mdat"]),a=[];return i.forEach((function(e,t){var n=r[t];a.push({mdat:e,traf:n})})),a.forEach((function(e){var r,i=e.mdat,a=i.data.subarray(i.start,i.end),o=e.traf,s=o.data.subarray(o.start,o.end),u=D(m(s,["tfhd"])[0]),l=u.trackId,c=m(s,["tfdt"]),d=c.length>0?k(c[0]).baseMediaDecodeTime:0,f=m(s,["trun"]);t===l&&f.length>0&&(r=I(a,P(f,d,u),l),n=n.concat(r))})),n}function D(e){var t=e.data.subarray(e.start,e.end),n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:n.getUint32(4),baseDataOffset:void 0,sampleDescriptionIndex:void 0,defaultSampleDuration:void 0,defaultSampleSize:void 0,defaultSampleFlags:void 0,durationIsEmpty:void 0,baseDataOffsetIsMoof:void 0},i=1&r.flags[2],a=2&r.flags[2],o=8&r.flags[2],s=16&r.flags[2],u=32&r.flags[2],l=65536&r.flags[0],c=131072&r.flags[0],d=8;return i&&(d+=4,r.baseDataOffset=n.getUint32(d),d+=4),a&&(r.sampleDescriptionIndex=n.getUint32(d),d+=4),o&&(r.defaultSampleDuration=n.getUint32(d),d+=4),s&&(r.defaultSampleSize=n.getUint32(d),d+=4),u&&(r.defaultSampleFlags=n.getUint32(d)),l&&(r.durationIsEmpty=!0),!i&&c&&(r.baseDataOffsetIsMoof=!0),r}function k(e){var t=e.data.subarray(e.start,e.end),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:j(t[4]<<24|t[5]<<16|t[6]<<8|t[7])};return 1===n.version&&(n.baseMediaDecodeTime*=Math.pow(2,32),n.baseMediaDecodeTime+=j(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),n}function P(e,t,n){var r=t,i=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,o=n.trackId,s=[];return e.forEach((function(e){var t=O(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=r+e.compositionTimeOffset,r+=e.duration})),s=s.concat(t)})),s}function I(e,t,n){var r,i=new DataView(e.buffer,e.byteOffset,e.byteLength),a=[],o=void 0,s=0,u=i.getUint32(0);for(s=0;s+4<e.length;s+=u)if(u=i.getUint32(s),s+=4,!(u<=0))switch(31&e[s]){case 6:var l=e.subarray(s+1,s+1+u),c=x(s,t);if(o={nalUnitType:"sei_rbsp",size:u,data:l,escapedRBSP:N(l),trackId:n,pts:void 0,dts:void 0},c)o.pts=c.pts,o.dts=c.dts,r=c;else{if(!r){this.log("We've encountered a nal unit without data. See mux.js#233.");break}o.pts=r.pts,o.dts=r.dts}a.push(o)}return a}function O(e){var t,n=e.data.subarray(e.start,e.end),r={version:n[0],flags:new Uint8Array(n.subarray(1,4)),samples:[],dataOffset:void 0},i=new DataView(n.buffer,n.byteOffset,n.byteLength),a=1&r.flags[2],o=4&r.flags[2],s=1&r.flags[1],u=2&r.flags[1],l=4&r.flags[1],c=8&r.flags[1],d=i.getUint32(4),f=8;for(a&&(r.dataOffset=i.getInt32(f),f+=4),o&&d&&(t={flags:R(n.subarray(f,f+4)),duration:void 0,size:void 0,compositionTimeOffset:void 0,dts:void 0,pts:void 0,trackId:void 0},f+=4,s&&(t.duration=i.getUint32(f),f+=4),u&&(t.size=i.getUint32(f),f+=4),c&&(t.compositionTimeOffset=i.getUint32(f),f+=4),r.samples.push(t),d--);d--;)t={flags:void 0,duration:void 0,size:void 0,compositionTimeOffset:void 0,dts:void 0,pts:void 0,trackId:void 0},s&&(t.duration=i.getUint32(f),f+=4),u&&(t.size=i.getUint32(f),f+=4),l&&(t.flags=R(n.subarray(f,f+4)),f+=4),c&&(t.compositionTimeOffset=i.getUint32(f),f+=4),r.samples.push(t);return r}function R(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}}function x(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(null!=i&&i.size&&n<i.size)return i;n-=null!=i&&i.size?i.size:0}return null}function N(e){for(var t=e.byteLength,n=[],r=1;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;var i=t-n.length,a=new Uint8Array(i),o=0;for(r=0;r<i;o++,r++)o===n[0]&&(o++,n.shift()),a[r]=e[o];return a}function j(e){return e>>>0}},"./src/utils/output-filter.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));var r=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[]},e}()},"./src/utils/texttrack-utils.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"sendAddTrackEvent",(function(){return i})),n.d(t,"addCueToTrack",(function(){return a})),n.d(t,"clearCurrentCues",(function(){return o})),n.d(t,"removeCuesInRange",(function(){return s})),n.d(t,"getCuesInRange",(function(){return u}));var r=n("./src/utils/logger.ts");function i(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function a(e,t){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){r.logger.debug("[texttrack-utils]: "+n);var i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}"disabled"===n&&(e.mode=n)}function o(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function s(e,t,n){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&e.cues.length>0)for(var i=u(e.cues,t,n),a=0;a<i.length;a++)e.removeCue(i[a]);"disabled"===r&&(e.mode=r)}function u(e,t,n){var r=[],i=function(e,t){if(t<e[0].startTime)return 0;var n=e.length-1;if(t>e[n].endTime)return-1;for(var r=0,i=n;r<=i;){var a=Math.floor((i+r)/2);if(t<e[a].startTime)i=a-1;else{if(!(t>e[a].startTime&&r<n))return a;r=a+1}}return e[r].startTime-t<t-e[i].startTime?r:i}(e,t);if(i>-1)for(var a=i,o=e.length;a<o;a++){var s=e[a];if(s.startTime>=t&&s.endTime<=n)r.push(s);else if(s.startTime>n)return r}return r}},"./src/utils/time-ranges.ts":function(e,t,n){"use strict";n.r(t),t.default={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}}},"./src/utils/timescale-conversion.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"toTimescaleFromBase",(function(){return i})),n.d(t,"toTimescaleFromScale",(function(){return a})),n.d(t,"toMsFromMpegTsClock",(function(){return o})),n.d(t,"toMpegTsClockFromTimescale",(function(){return s}));var r=9e4;function i(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);var i=e*t*n;return r?Math.round(i):i}function a(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=!1),i(e,t,1/n,r)}function o(e,t){return void 0===t&&(t=!1),i(e,1e3,1/r,t)}function s(e,t){return void 0===t&&(t=1),i(e,r,1/t)}},"./src/utils/typed-array.ts":function(e,t,n){"use strict";function r(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}n.r(t),n.d(t,"sliceUint8",(function(){return r}))},"./src/utils/vttcue.ts":function(e,t,n){"use strict";n.r(t),t.default=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;var n=t.toLowerCase();return!!~e.indexOf(n)&&n}function r(e){return n(t,e)}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var o in a)e[o]=a[o]}return e}function a(t,a,o){var s=this,u={enumerable:!0};s.hasBeenReset=!1;var l="",c=!1,d=t,f=a,h=o,p=null,m="",g=!0,v="auto",y="start",_=50,b="middle",T=50,E="middle";Object.defineProperty(s,"id",i({},u,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},u,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(s,"startTime",i({},u,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},u,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},u,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},u,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},u,{get:function(){return m},set:function(t){var r=function(t){return n(e,t)}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");m=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},u,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},u,{get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},u,{get:function(){return y},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},u,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},u,{get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},u,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},u,{get:function(){return E},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),s.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}()},"./src/utils/vttparser.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"parseTimeStamp",(function(){return a})),n.d(t,"fixLineBreaks",(function(){return d})),n.d(t,"VTTParser",(function(){return f}));var r=n("./src/utils/vttcue.ts"),i=function(){function e(){}return e.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},e}();function a(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(r||0)}var n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}var o=function(){function e(){this.values=Object.create(null)}var t=e.prototype;return t.set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},t.get=function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1},e}();function s(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);2===o.length&&t(o[0],o[1])}}var u=new r.default(0,0,""),l="middle"===u.align?"middle":"center";function c(e,t,n){var r=e;function i(){var t=a(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function c(){e=e.replace(/^\s+/,"")}if(c(),t.startTime=i(),c(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),c(),t.endTime=i(),c(),function(e,t){var r=new o;s(e,(function(e,t){var i;switch(e){case"region":for(var a=n.length-1;a>=0;a--)if(n[a].id===t){r.set(e,n[a].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",l,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",l,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",l,"end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===u.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",l);var a=r.get("position","auto");"auto"===a&&50===u.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function d(e){return e.replace(/<br(?: \/)?>/gi,"\n")}var f=function(){function e(){this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var t=e.prototype;return t.parse=function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=d(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(i=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var o=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:i=n(),t.state){case"HEADER":/:/.test(i)?s(i,(function(e,t){}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new r.default(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{c(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var u=-1!==i.indexOf("--\x3e");if(!i||u&&(o=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function(){try{if((this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state||"BADWEBVTT"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){this.onparsingerror&&this.onparsingerror(e)}return this.onflush&&this.onflush(),this},e}()},"./src/utils/webvtt-parser.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"generateCueId",(function(){return f})),n.d(t,"parseWebVTT",(function(){return p}));var r=n("./src/polyfills/number.ts"),i=n("./src/utils/vttparser.ts"),a=n("./src/demux/id3.ts"),o=n("./src/utils/timescale-conversion.ts"),s=n("./src/remux/mp4-remuxer.ts"),u=/\r\n|\n\r|\n|\r/g,l=function(e,t,n){return void 0===n&&(n=0),e.substr(n,t.length)===t},c=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),a=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(r.isFiniteNumber)(t)&&Object(r.isFiniteNumber)(n)&&Object(r.isFiniteNumber)(i)&&Object(r.isFiniteNumber)(a)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,t+=6e4*i,t+=36e5*a},d=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function f(e,t,n){return d(e.toString())+d(t.toString())+d(n)}var h=function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!==(a=i)&&void 0!==a&&a.new;){var a;e.ccOffset+=r.start-i.start,r.new=!1,i=e[(r=i).prevCC]}e.presentationOffset=n};function p(e,t,n,r,d,p,m,g){var v,y=new i.VTTParser,_=Object(a.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(u,"\n").split("\n"),b=[],T=Object(o.toMpegTsClockFromTimescale)(t,n),E="00:00.000",S=0,w=0,A=!0,M=!1;y.oncue=function(e){var t=r[d],n=r.ccOffset,i=(S-T)/9e4;if(null!=t&&t.new&&(void 0!==w?n=r.ccOffset=t.start:h(r,d,i)),i&&(n=i-r.presentationOffset),M){var a=e.endTime-e.startTime,o=Object(s.normalizePts)(9e4*(e.startTime+n-w),9e4*p)/9e4;e.startTime=o,e.endTime=o+a}var u=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(u)),e.id||(e.id=f(e.startTime,e.endTime,u)),e.endTime>0&&b.push(e)},y.onparsingerror=function(e){v=e},y.onflush=function(){v?g(v):m(b)},_.forEach((function(e){if(A){if(l(e,"X-TIMESTAMP-MAP=")){A=!1,M=!0,e.substr(16).split(",").forEach((function(e){l(e,"LOCAL:")?E=e.substr(6):l(e,"MPEGTS:")&&(S=parseInt(e.substr(7)))}));try{w=c(E)/1e3}catch(e){M=!1,v=e}return}""===e&&(A=!1)}y.parse(e+"\n")})),y.flush()}},"./src/utils/xhr-loader.ts":function(e,t,n){"use strict";n.r(t);var r=n("./src/utils/logger.ts"),i=n("./src/loader/load-stats.ts"),a=/^age:\s*[\d.]+\s*$/m,o=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new i.LoadStats,this.retryDelay=0}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e=this.config,t=this.context;if(e){var n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(n,t.url)}catch(e){n.open("GET",t.url,!0),i(n,t.url)}n.readyState||n.open("GET",t.url,!0)}catch(e){return void this.callbacks.onError({code:n.status,text:e.message},t,n)}t.rangeEnd&&n.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=t.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),n.send()}},t.readystatechange=function(){var e=this.context,t=this.loader,n=this.stats;if(e&&t){var i=t.readyState,a=this.config;if(!n.aborted&&i>=2)if(self.clearTimeout(this.requestTimeout),0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start)),4===i){t.onreadystatechange=null,t.onprogress=null;var o=t.status;if(o>=200&&o<300){var s,u;if(n.loading.end=Math.max(self.performance.now(),n.loading.first),u="arraybuffer"===e.responseType?(s=t.response).byteLength:(s=t.responseText).length,n.loaded=n.total=u,!this.callbacks)return;var l=this.callbacks.onProgress;if(l&&l(n,e,s,t),!this.callbacks)return;var c={url:t.responseURL,data:s};this.callbacks.onSuccess(c,n,e,t)}else n.retry>=a.maxRetry||o>=400&&o<499?(r.logger.error(o+" while loading "+e.url),this.callbacks.onError({code:o,text:t.statusText},e,t)):(r.logger.warn(o+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},t.loadtimeout=function(){r.logger.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e=null;if(this.loader&&a.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},e}();t.default=o}}).default},e.exports=r())},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(24),i=n(49),a=n(88);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Object(r.a)(n)?(e.pop(),Object(a.a)(e,n)):Object(i.a)(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSequenceEqual=void 0;var r=function(e,t){return e===t};t.isSequenceEqual=function(e,t,n){if(void 0===n&&(n=r),e===t)return!0;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(506),t),r.__exportStar(n(166),t),r.__exportStar(n(167),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(870),t),r.__exportStar(n(222),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(957),t),r.__exportStar(n(961),t),r.__exportStar(n(962),t)},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.VIDEO_ERROR="CR-001",e.UNAUTHORIZED="CR-002",e.FORBIDDEN="CR-003",e.CONFLICT="CR-004",e.REFRESH_TOKEN_EXPIRED="CR-005",e.NO_AD_TAG_PARAMS="CR-006"}(r=t.ErrorCodes||(t.ErrorCodes={})),t.BEACON_ERRORS={401:{key:"UNAUTHORIZED",title:"errorAccessingVideo",message:"youreNotAllowedVideoForbidden",code:r.UNAUTHORIZED},403:{key:"FORBIDDEN",title:"eventNotAvailableInTerritory",message:"youreNotAllowedVideoForbidden",code:r.FORBIDDEN},409:{key:"CONFLICT",title:"watchingVideoOnAnotherDevice",message:"toWatchHereCloseOtherSessions",code:r.CONFLICT},default:{key:"VIDEO_ERROR",title:"errorAccessingVideo",message:"pleaseTryAgainVideoError",code:r.VIDEO_ERROR}},t.TOKEN_REFRESH_ERROR={key:"REFRESH_TOKEN_EXPIRED",title:"refreshTokenExpiredLoginRequired",message:"refreshTokenExpiredReauthenticate",code:r.REFRESH_TOKEN_EXPIRED},t.NO_AD_TAG_PARAMS_ERROR={key:"NO_AD_TAG_PARAMS",title:"noAdTagParamsErrorTitle",message:"noAdTagParamsErrorMessage",code:r.NO_AD_TAG_PARAMS},t.API_KEY="897ba858-ad19-4c15-bed6-68cb35c68ba1",t.BEACON_INTERVAL=5e3,t.LOGGER_OPTIONS={apiKey:t.API_KEY,appName:"chromecast",realm:"_chromecast",environment:"production",version:"2.30.0"},t.ERROR_MESSAGE_NAMESPACE="urn:x-cast:dce.chromecast.error",t.REALM_MESSAGE_NAMESPACE="urn:x-cast:dce.chromecast.realm",t.TOKEN_KEYS={authentication:"authToken",refresh:"refresh"},t.UNIVISION_REALM="dce.univision",t.HLS_CONTENT_TYPE="application/x-mpegURL"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(454),i=n(1072),a=n(450),o=n(453),s=n(452),u=n(449),l=n(455),c=n(64),d=n(460),f=n(156),h=n(1074),p=e=>e&&document.body.classList.add(`realm--${e.replace(/\./g,"-")}`),m=new URLSearchParams(window.location.search).get("realm");p(m);const g={$beacon:null,$http:null,$logger:new i.Logger(c.LOGGER_OPTIONS),$storage:new o.LocalStorageProvider("dice-chromecast"),$translation:null,realm:m,lastTimeUpdateSent:Date.now(),setRealm:p,domain:"",gamNetworkId:"unknown",gamProductName:"unknown",muxEnvironmentKey:"c603cae0cab019beb85f1c4c3"};t.initState=async e=>{var t,n,o,p,m;const{$storage:v}=g,{baseUrl:y,beacon:_,realm:b,authorisationToken:T,refreshToken:E}=e;try{h.validateBeaconPayload(_)}catch(e){throw f.setSimpleError("Invalid Beacon Payload",e.message),e}if(!T)throw new Error("authorisationToken is required.");v.set("realm",b),v.set("apiKey",c.API_KEY),v.set(c.TOKEN_KEYS.refresh,E),v.set(c.TOKEN_KEYS.authentication,T),g.$http=new a.Http({baseUrl:y,storageProvider:v}),g.$beacon=new r.Beacon({http:g.$http,onError:f.beaconOnError,url:_.endpoint});const S=_.progress||0;g.$beacon.video={type:_.action===d.Action.LIVE?l.EContentType.LIVE:l.EContentType.VOD,id:parseInt(_.video,10),watchProgress:S};const w=new s.Realm({defaultTheme:s.DEFAULT_THEME,http:g.$http,name:b,storageProvider:v}),A=await w.fetch();return g.domain=null!==(n=null===(t=A.domains)||void 0===t?void 0:t[0])&&void 0!==n?n:g.domain,g.gamNetworkId=null!==(o=A.settings.gamNetworkId)&&void 0!==o?o:g.gamNetworkId,g.gamProductName=null!==(p=A.settings.gamProductName)&&void 0!==p?p:g.gamProductName,g.muxEnvironmentKey=null!==(m=A.settings.videoAnalyticsKey)&&void 0!==m?m:g.muxEnvironmentKey,g.$translation=new u.Translation({storageProvider:v,http:g.$http}),await g.$translation.fetch(),g.$logger=new i.Logger(Object.assign(Object.assign({},c.LOGGER_OPTIONS),{realm:b})),g},t.default=g},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(32);function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(e)}function a(e){return 0===e.length?r.a:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}},function(e,t,n){"use strict";var r=n(1),i=1,a=function(){return Promise.resolve()}(),o={};function s(e){return e in o&&(delete o[e],!0)}var u=function(e){var t=i++;return o[t]=!0,a.then((function(){return s(t)&&e()})),t},l=function(e){s(e)},c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.a(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=u(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(l(n),t.scheduled=void 0)},t}(n(52).a),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(n(50).a);n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h}));var f=new d(c),h=f},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(510),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(544),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(610),t),r.__exportStar(n(621),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(798),t),r.__exportStar(n(799),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(212),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(832),t),r.__exportStar(n(213),t),r.__exportStar(n(833),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(940),t),r.__exportStar(n(941),t),r.__exportStar(n(942),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenuItem=void 0;var r=n(2).__importStar(n(3)),i=n(13);t.ContextMenuItem=function(e){var t=e.onClick,n=e.children,a=e.isLabel,o=i.css("ds-context-menu__item",a&&"ds-context-menu__label");return r.createElement("div",{className:o,onClick:t},n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DICE_APP_HEADER=t.TIME_OFFSET_STORAGE_KEY=t.HTTPContentTypes=t.HTTPHeaders=t.APPLICATION_JSON=t.REFRESH_TOKEN_KEY=t.AUTH_TOKEN_KEY=void 0,t.AUTH_TOKEN_KEY="authToken",t.REFRESH_TOKEN_KEY="refresh",t.APPLICATION_JSON="application/json",function(e){e.ACCEPT="Accept",e.AUTHORIZATION="Authorization",e.DATE="Date",e.CONTENT_TYPE="Content-Type",e.ACCEPT_LANGUAGE="Accept-Language",e.REALM="Realm",e.API_KEY="x-api-key",e.APP_VERSION="x-app-var",e.APP="app"}(t.HTTPHeaders||(t.HTTPHeaders={})),function(e){e.JSON="application/json",e.FORM_DATA="multipart/form-data"}(t.HTTPContentTypes||(t.HTTPContentTypes={})),t.TIME_OFFSET_STORAGE_KEY="timeOffset",t.DICE_APP_HEADER="dice"},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),i=n(5);function a(){return function(e){return e.lift(new o(e))}}var o=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new s(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),s=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r.a(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),i=n(17),a=n(95),o=n(14),s=n(116),u=n(42),l=n(123),c=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.a(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new d(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new u.a;if(this.isStopped||this.hasError?t=o.a.EMPTY:(this.observers.push(e),t=new l.a(this,e)),i&&e.add(e=new s.a(e,i)),n)for(var c=0;c<a&&!e.closed;c++)e.next(r[c]);else for(c=0;c<a&&!e.closed;c++)e.next(r[c].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||a.a).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return i>t&&(a=Math.max(a,i-t)),a>0&&r.splice(0,a),r},t}(i.a),d=function(){return function(e,t){this.time=e,this.value=t}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(7);function i(e,t){return t?new r.a((function(n){return t.schedule(a,0,{error:e,subscriber:n})})):new r.a((function(t){return t.error(e)}))}function a(e){var t=e.error;e.subscriber.error(t)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));var r=n(1),i=n(24),a=n(19),o=n(35),s=n(29),u=n(49),l={};function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=void 0,r=void 0;return Object(i.a)(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(a.a)(e[0])&&(e=e[0]),Object(u.a)(e,r).lift(new d(n))}var d=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.resultSelector))},e}(),f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r.a(t,e),t.prototype._next=function(e){this.values.push(l),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Object(s.a)(this,r,void 0,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=this.values,i=r[n],a=this.toRespond?i===l?--this.toRespond:this.toRespond:0;r[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(48),i=n(32);function a(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Object(r.b)(i.a,e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(7),i=n(26),a=n(25);function o(e){return new r.a((function(t){var n;try{n=e()}catch(e){return void t.error(e)}return(n?Object(i.a)(n):Object(a.b)()).subscribe(t)}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var r=n(1),i=n(49),a=n(19),o=n(5),s=n(38),u=n(6);function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),Object(i.a)(e,void 0).lift(new c(n))}var c=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.resultSelector))},e}(),d=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.resultSelector=n,i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:void 0,i}return r.a(t,e),t.prototype._next=function(e){var t=this.iterators;Object(a.a)(e)?t.push(new h(e)):"function"==typeof e[s.a]?t.push(new f(e[s.a]())):t.push(new p(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe());else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){if("function"==typeof(o=e[r]).hasValue&&!o.hasValue())return}var i=!1,a=[];for(r=0;r<t;r++){var o,s=(o=e[r]).next();if(o.hasCompleted()&&(i=!0),s.done)return void n.complete();a.push(s.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),i&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.a),f=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},e}(),h=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[s.a]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),p=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r.a(t,e),t.prototype[s.a]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Object(u.c)(this.observable,new u.a(this))},t}(u.b)},function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(5);function i(e){for(;e;){var t=e,n=t.closed,i=t.destination,a=t.isStopped;if(n||a)return!1;e=i&&i instanceof r.a?i:null}return!0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(7),i=n(14);function a(e,t){return new r.a((function(n){var r=new i.a,a=0;return r.add(t.schedule((function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(30),i=n(57),a={closed:!0,next:function(e){},error:function(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModelName=t.context=t.player=void 0;const r=n(27),i=n(157),a=n(466),o=n(110);Object.defineProperty(t,"getModelName",{enumerable:!0,get:function(){return o.getModelName}});const s=cast.framework.CastReceiverContext.getInstance(),u=s.getPlayerManager(),l=new a.Interceptor(u,s);document.body.classList.remove("ds-chromecast--loading"),t.player=l.player,t.context=(0,o.bindToContext)(s),r.__exportStar(n(211),t),r.__exportStar(n(217),t);u.setMessageInterceptor(cast.framework.messages.MessageType.LOAD,e=>r.__awaiter(void 0,void 0,void 0,(function*(){yield l.load(e)}))),u.setMessageInterceptor(cast.framework.messages.MessageType.PLAY,l.play),u.setMessageInterceptor(cast.framework.messages.MessageType.PAUSE,l.pause),u.setMessageInterceptor(cast.framework.messages.MessageType.SEEK,l.seek),u.setMessageInterceptor(cast.framework.messages.MessageType.SET_VOLUME,l.volumeChange),u.setMessageInterceptor(cast.framework.messages.MessageType.MEDIA_STATUS,l.getMediaStatus),u.setMessageInterceptor(cast.framework.messages.MessageType.EDIT_TRACKS_INFO,l.setTrack),u.setMessageInterceptor(cast.framework.messages.MessageType.STOP,l.stop),t.context.addCustomMessageListener(i.DORIS_CAST_CHANNEL,l.customMessages.messageInterceptor);const{queueMessageHandler:c}=l;t.context.addCustomMessageListener("urn:x-cast:com.doris.cast.queue",c.listener)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasKeyOfType=void 0;var r=n(164);t.hasKeyOfType=function(e,t,n){return(0,r.hasKey)(e,t)&&typeof e[t]===n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLVideoHandlerBase=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=n(8),u=n(100),l=n(16),c=n(10),d=n(137),f=n(186),h=new l.LoggerFileNameDecorator("HTMLVideoHandlerBase"),p=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o._bufferedRanges=[],o._canControlVolume=!0,o._hasPlayed=!1,o._isPictureInPictureActive=!1,o._onMediaError=a.NEVER,(0,i.default)(o),o._fullscreenChangeSource=new a.Subject,o._pictureInPictureChangeSource=new a.Subject,o._textTrackController=new f.TextTrackController({elementSource:o._elementSource,textTrackContainer:n.htmlTextTrackContainer,useHTMLTextTracks:n.useHTMLTextTracks}),o.testVolumeControlSupport().then((function(e){o._canControlVolume=e})),o}return r.__extends(t,e),t.prototype.addTextTracks=function(e){var t=this;e.forEach((function(e){t._textTrackController.addTextTrack(e)}))},t.prototype.destroy=function(){this.startDestroying(),this._textTrackController.destroy(),this._pictureInPictureChangeSource.complete(),this._fullscreenChangeSource.complete();var t=this.getElement();t&&(t.removeAttribute("src"),t.load(),this.removeElement(t)),e.prototype.destroy.call(this)},t.prototype.exitFullscreen=function(){var t;e.prototype.exitFullscreen.call(this);var n=this.getElement();n&&(Boolean(n.requestFullscreen)&&document.fullscreenElement?document.exitFullscreen():n.webkitEnterFullScreen&&n.webkitDisplayingFullscreen&&(null===(t=n.webkitExitFullScreen)||void 0===t||t.call(n)))},t.prototype.exitPictureInPicture=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,e.prototype.exitPictureInPicture.call(this)];case 1:return t.sent(),[4,this.togglePictureInPicture(!1)];case 2:return t.sent(),[2]}}))}))},t.prototype.getBufferedRanges=function(){return this._bufferedRanges},t.prototype.getCanControlVolume=function(){return this._canControlVolume},t.prototype.getCurrentLevel=function(){},t.prototype.getCurrentLevelVariant=function(){return-1},t.prototype.getCurrentTextTrack=function(){return this._textTrackController.getCurrentTextTrack()},t.prototype.getCurrentTime=function(e){var t,n;return e&&this.getIsSeeking()&&void 0!==this._seekingTo?this._seekingTo:null!==(n=null===(t=this.getElement())||void 0===t?void 0:t.currentTime)&&void 0!==n?n:0},t.prototype.getDimensions=function(){var e,t,n=this.getElement();return{videoHeight:null!==(e=null==n?void 0:n.videoHeight)&&void 0!==e?e:0,videoWidth:null!==(t=null==n?void 0:n.videoWidth)&&void 0!==t?t:0}},t.prototype.getDuration=function(){var e,t;return null!==(t=null===(e=this.getElement())||void 0===e?void 0:e.duration)&&void 0!==t?t:0},t.prototype.getFrameRate=function(){},t.prototype.getFullscreenElement=function(){return this.getElement()},t.prototype.getHasEnded=function(){var e,t;return null!==(t=null===(e=this.getElement())||void 0===e?void 0:e.ended)&&void 0!==t&&t},t.prototype.getHasPlayed=function(){return this._hasPlayed},t.prototype.getIsBuffering=function(){return this.getReadyState()<s.ReadyStates.HAVE_FUTURE_DATA},t.prototype.getIsFullscreenActive=function(){e.prototype.getIsFullscreenActive.call(this);var t=this.getElement();return"fullscreenElement"in document?Boolean(document.fullscreenElement):(0,c.hasKey)(document,"webkitFullscreenElement")?Boolean(document.webkitFullscreenElement):Boolean(null==t?void 0:t.webkitDisplayingFullscreen)},t.prototype.getIsFullscreenSupported=function(){var e=this.getElement();return Boolean((null==e?void 0:e.requestFullscreen)||(null==e?void 0:e.webkitEnterFullScreen))},t.prototype.getIsMuted=function(){var e,t;return null!==(t=null===(e=this.getElement())||void 0===e?void 0:e.muted)&&void 0!==t&&t},t.prototype.getIsPaused=function(){var e,t;return null===(t=null===(e=this.getElement())||void 0===e?void 0:e.paused)||void 0===t||t},t.prototype.getIsPictureInPictureActive=function(){return this._isPictureInPictureActive},t.prototype.getIsPictureInPictureSupported=function(){var e=this.getElement();return void 0!==e&&(null!=e.requestPictureInPicture||(0,c.isWebkitAndHasPip)(e))},t.prototype.getIsPlaying=function(){return!this.getIsPaused()&&!this.getIsBuffering()},t.prototype.getIsSeeking=function(){var e,t;return null!==(t=null===(e=this.getElement())||void 0===e?void 0:e.seeking)&&void 0!==t&&t},t.prototype.getLevelVariants=function(){return 0},t.prototype.getLevels=function(){return[]},t.prototype.getPlaybackRate=function(){var e,t;return null!==(t=null===(e=this.getElement())||void 0===e?void 0:e.playbackRate)&&void 0!==t?t:1},t.prototype.getReadyState=function(){var e,t;return null!==(t=null===(e=this.getElement())||void 0===e?void 0:e.readyState)&&void 0!==t?t:s.ReadyStates.HAVE_NOTHING},t.prototype.getSeekableRange=function(){var e=this.getElement();return e&&e.seekable.length>0?{start:e.seekable.start(0),end:e.seekable.end(0)}:{start:0,end:0}},t.prototype.getSourceUrl=function(){var e;return null===(e=this.getElement())||void 0===e?void 0:e.src},t.prototype.getStartDate=function(){var e=this.getElement();if(e&&(0,c.isWebkitVideoElement)(e)){var t=e.getStartDate();return(0,c.isValidDate)(t)?t:void 0}},t.prototype.getTextTracks=function(){return this._textTrackController.getTextTracks()},t.prototype.getVolume=function(){var e,t;return null!==(t=null===(e=this.getElement())||void 0===e?void 0:e.volume)&&void 0!==t?t:1},t.prototype.load=function(t){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,e.prototype.load.call(this,t)];case 1:if(r.sent(),this.isDestroying)throw new u.LoadInterruptedError;return n=this.createEl(),this._elementSource.next(n),void 0!==this._config.muted&&this.setIsMuted(this._config.muted),void 0!==this._config.volume&&this.setVolume(this._config.volume),[2]}}))}))},t.prototype.pause=function(){var e;null===(e=this.getElement())||void 0===e||e.pause()},t.prototype.play=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.playWithoutAutoPlayError()];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),this.emitError({type:s.ErrorTypes.AUTO_PLAY_FAILURE,message:(0,c.errorToString)(e)}),[3,3];case 3:return[2]}}))}))},t.prototype.requestFullscreen=function(){e.prototype.requestFullscreen.call(this);var t=this.getElement();t&&(t.requestFullscreen&&!document.fullscreenElement?t.requestFullscreen():t.webkitEnterFullScreen&&!t.webkitDisplayingFullscreen&&(t.webkitEnterFullScreen(),this._fullscreenChangeSource.next({isFullscreenActive:!0})))},t.prototype.requestPictureInPicture=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,e.prototype.requestPictureInPicture.call(this)];case 1:return t.sent(),[4,this.togglePictureInPicture(!0)];case 2:return t.sent(),[2]}}))}))},t.prototype.reset=function(){this._hasPlayed=!1;var t=this.getElement();t&&(t.removeAttribute("src"),t.load(),this.removeElement(t)),e.prototype.reset.call(this)},t.prototype.seekTo=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return(t=this.getElement())?(n="number"==typeof e?e:this.dateToTime(e),i=this.getSeekableRange(),a=i.start,s=i.end,(u=(0,c.clamp)(n,a,s))!==n&&h.info("Seeking adjusted to ".concat(u," as ").concat(n," was outside the seekable range!")),t.currentTime=this._seekingTo=u,[4,this.onSeeked.pipe((0,o.take)(1)).toPromise()]):[3,2];case 1:r.sent(),this._seekingTo=void 0,r.label=2;case 2:return[2]}}))}))},t.prototype.setCurrentLevel=function(e){},t.prototype.setCurrentLevelVariant=function(e){},t.prototype.setCurrentTextTrack=function(t){e.prototype.setCurrentTextTrack.call(this,t),this._textTrackController.setCurrentTextTrack(t)},t.prototype.setHtmlTextTrackContainer=function(t){e.prototype.setHtmlTextTrackContainer.call(this,t),this._textTrackController.setTextTrackContainer(t)},t.prototype.setIsMuted=function(e){var t=this.getElement();t&&(t.muted=e)},t.prototype.setPlaybackRate=function(e){var t=this.getElement();t&&(t.playbackRate=e)},t.prototype.setVolume=function(e){var t=this.getElement();t&&(t.volume=(0,c.clamp)(e,0,1))},t.prototype.configureEvents=function(){var t=this;e.prototype.configureEvents.call(this);var n=(0,c.nativeEventMapper)(this._elementSource),i=(0,c.nativeEventMapper)((0,a.of)(document.body));this._onFullscreenChange=(0,a.merge)(this._fullscreenChangeSource,i(s.EventTypes.FULLSCREEN_CHANGE,(function(){return{isFullscreenActive:t.getIsFullscreenActive()}})),this._elementSource.pipe((0,c.switchMapDefined)((function(e){return(0,c.isWebkitVideoElement)(e)?(0,a.fromEvent)(e,"webkitendfullscreen").pipe((0,o.map)((function(){return{isFullscreenActive:!1}}))):a.NEVER}))),(0,a.fromEvent)(document,"webkitfullscreenchange").pipe((0,o.map)((function(){return{isFullscreenActive:t.getIsFullscreenActive()}})))).pipe((0,o.distinctUntilChanged)((function(e,t){return e.isFullscreenActive===t.isFullscreenActive}))),this._onCanPlay=n(s.EventTypes.CAN_PLAY),this._onCanPlayThrough=n(s.EventTypes.CAN_PLAY_THROUGH),this._onDurationChange=n(s.EventTypes.DURATION_CHANGE,(function(){return{duration:t.getDuration(),isLive:t.getIsLive(),seekableDuration:t.getSeekableDuration(),seekableRange:t.getSeekableRange()}})),this._onEmptied=n(s.EventTypes.EMPTIED),this._onEnded=n(s.EventTypes.ENDED),this._onLoadStart=n(s.EventTypes.LOAD_START),this._onLoadedData=n(s.EventTypes.LOADED_DATA),this._onLoadedMetadata=n(s.EventTypes.LOADED_METADATA,(function(){return r.__assign({duration:t.getDuration(),isLive:t.getIsLive(),startDate:t.getStartDate()},t.getDimensions())})),this._onMediaError=this._elementSource.pipe((0,c.switchMapDefined)((function(e){return(0,a.fromEvent)(e,s.EventTypes.ERROR)})),(0,o.share)()),this._onPause=n(s.EventTypes.PAUSE),this._onPictureInPictureChange=(0,a.merge)(this._pictureInPictureChangeSource,this._elementSource.pipe((0,c.switchMapDefined)((function(e){return null!=e.requestPictureInPicture?(0,a.merge)((0,a.fromEvent)(e,"enterpictureinpicture").pipe((0,o.map)((function(e){return{nativeEvent:e,isPictureInPictureActive:!0}}))),(0,a.fromEvent)(e,"leavepictureinpicture").pipe((0,o.map)((function(e){return{nativeEvent:e,isPictureInPictureActive:!1}})))):(0,c.isWebkitVideoElement)(e)?(0,a.fromEvent)(e,"webkitpresentationmodechanged").pipe((0,o.map)((function(t){return{nativeEvent:t,isPictureInPictureActive:e.webkitPresentationMode!==s.WebkitPresentationMode.INLINE}}))):a.NEVER})))),this._onPlay=n(s.EventTypes.PLAY),this._onPlaying=n(s.EventTypes.PLAYING),this._onProgress=n(s.EventTypes.PROGRESS,(function(){var e=t.getElement();return{bufferedRanges:e?(0,c.parseTimeRanges)(e.buffered):[]}})),this._onRateChange=n(s.EventTypes.RATE_CHANGE,(function(){return{playbackRate:t.getPlaybackRate()}})),this._onResize=n(s.EventTypes.RESIZE,(function(){return t.getDimensions()})),this._onSeeked=n(s.EventTypes.SEEKED,(function(){return{currentTime:t.getCurrentTime()}})),this._onSeeking=n(s.EventTypes.SEEKING,(function(){return{seekingTo:t.getCurrentTime()}})),this._onStalled=n(s.EventTypes.STALLED),this._onTextTrackChange=this._textTrackController.onTextTrackChange,this._onTimeUpdate=n(s.EventTypes.TIME_UPDATE,(function(){return{currentDate:t.getCurrentDate(),currentTime:t.getCurrentTime(),isAtLiveEdge:t.getIsAtLiveEdge()}})),this._onVolumeChange=n(s.EventTypes.VOLUME_CHANGE,(function(){return{isMuted:t.getIsMuted(),volume:t.getVolume()}})),this._onWaiting=n(s.EventTypes.WAITING),this._onDurationChange=this.patchDurationChangeEvent(this._onDurationChange),this._onPlaying=this.patchPlayingEvent(this._onPlaying)},t.prototype.handleAutoPlay=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:switch(r.trys.push([0,16,,17]),e){case s.AutoPlayOptions.YES:return[3,1];case s.AutoPlayOptions.MUTED:return[3,3];case s.AutoPlayOptions.ANY:return[3,5]}return[3,15];case 1:return[4,this.play()];case 2:return r.sent(),[3,15];case 3:return this.setIsMuted(!0),[4,this.play()];case 4:return r.sent(),[3,15];case 5:return r.trys.push([5,7,,14]),[4,this.playWithoutAutoPlayError()];case 6:return r.sent(),[3,14];case 7:if(t=r.sent(),!1!==this.getIsMuted())return[3,12];this.setIsMuted(!0),r.label=8;case 8:return r.trys.push([8,10,,11]),[4,this.play()];case 9:return r.sent(),[3,11];case 10:throw n=r.sent(),this.setIsMuted(!1),n;case 11:return[3,13];case 12:throw t;case 13:return[3,14];case 14:return[3,15];case 15:return[3,17];case 16:return r.sent(),h.debug("Built-in autoplay failed."),[3,17];case 17:return[2]}}))}))},t.prototype.init=function(){var t=this;e.prototype.init.call(this),this._onMediaError.subscribe(this.handleMediaError),this.onPlaying.subscribe((function(){t._hasPlayed=!0})),this.onProgress.subscribe((function(e){var n=e.bufferedRanges;t._bufferedRanges=n})),this.onPictureInPictureChange.subscribe((function(e){var n=e.isPictureInPictureActive;t._isPictureInPictureActive=n}))},t.prototype.createEl=function(){var e=document.createElement("video");return e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("crossorigin","anonymous"),e.setAttribute("preload","metadata"),this._parent.prepend?this._parent.prepend(e):this._parent.appendChild(e),e},t.prototype.handleMediaError=function(e){var t,n=this.getElement();if(null!=(null==n?void 0:n.error)){var r=n.error,i=["A media error has occurred.",null!==(t=r.message)&&void 0!==t?t:void 0,null!=r.code?"(code: ".concat(r.code,")"):void 0].filter((function(e){return void 0!==e})).join(" ");this.emitError({type:s.ErrorTypes.MEDIA_ERROR,message:i,nativeEvent:e})}},t.prototype.patchDurationChangeEvent=function(e){var t=this;return(0,a.merge)(e,this._onProgress.pipe((0,o.map)((function(){return{duration:t.getDuration(),isLive:t.getIsLive(),seekableDuration:t.getSeekableDuration(),seekableRange:t.getSeekableRange()}})))).pipe((0,o.distinctUntilChanged)(c.compareDurationChangeEvents))},t.prototype.patchPlayingEvent=function(e){var t=this,n=(0,a.merge)(this._onCanPlay,this._onSeeked).pipe((0,o.switchMap)((function(){return(0,a.of)({},a.asyncScheduler).pipe((0,o.takeUntil)(e))})),(0,o.filter)((function(){return t.getIsPlaying()})),(0,o.share)());return(0,a.merge)(e,n)},t.prototype.playWithoutAutoPlayError=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return(null==(e=this.getElement())?void 0:e.paused)?[4,e.play()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.removeElement=function(e){this._elementDestroyingSource.next(),(0,c.removeElement)(e),this.getIsPictureInPictureActive()&&(this._pictureInPictureChangeSource.next({isPictureInPictureActive:!1}),this.togglePictureInPicture(!1,e,!0)),this._elementSource.next(void 0)},t.prototype.testVolumeControlSupport=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(n){switch(n.label){case 0:return e=document.createElement("video"),t=.5,e.volume=t,e.volume===t?[3,1]:[2,!1];case 1:return[4,new Promise((function(e){return window.setTimeout(e,0)}))];case 2:return n.sent(),[2,e.volume===t]}}))}))},t.prototype.togglePictureInPicture=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return void 0===n&&(n=this.getIsPictureInPictureActive()),void 0===e&&(e=!n),void 0===t&&(t=this.getElement()),t?!e||n?[3,4]:null==t.requestPictureInPicture?[3,2]:[4,t.requestPictureInPicture()]:[3,8];case 1:return r.sent(),[3,4];case 2:return(0,c.isWebkitVideoElement)(t)?[4,t.webkitSetPresentationMode(s.WebkitPresentationMode.PIP)]:[3,4];case 3:r.sent(),r.label=4;case 4:return e||!n?[3,8]:null!=t.requestPictureInPicture&&(0,c.canExitPip)(document)?[4,document.exitPictureInPicture()]:[3,6];case 5:return r.sent(),[3,8];case 6:return(0,c.isWebkitVideoElement)(t)?[4,t.webkitSetPresentationMode(s.WebkitPresentationMode.INLINE)]:[3,8];case 7:r.sent(),r.label=8;case 8:return[2]}}))}))},t}(d.SourceHandlerBase);t.HTMLVideoHandlerBase=p},function(e,t,n){var r,i;i=this,void 0===(r=function(){return i.languageMappingList={ach:{nativeName:"Lwo",englishName:"Acholi"},ady:{nativeName:"Адыгэбзэ",englishName:"Adyghe"},af:{nativeName:"Afrikaans",englishName:"Afrikaans"},"af-NA":{nativeName:"Afrikaans (Namibia)",englishName:"Afrikaans (Namibia)"},"af-ZA":{nativeName:"Afrikaans (South Africa)",englishName:"Afrikaans (South Africa)"},ak:{nativeName:"Tɕɥi",englishName:"Akan"},ar:{nativeName:"العربية",englishName:"Arabic"},"ar-AR":{nativeName:"العربية",englishName:"Arabic"},"ar-MA":{nativeName:"العربية",englishName:"Arabic (Morocco)"},"ar-SA":{nativeName:"العربية (السعودية)",englishName:"Arabic (Saudi Arabia)"},"ay-BO":{nativeName:"Aymar aru",englishName:"Aymara"},az:{nativeName:"Azərbaycan dili",englishName:"Azerbaijani"},"az-AZ":{nativeName:"Azərbaycan dili",englishName:"Azerbaijani"},"be-BY":{nativeName:"Беларуская",englishName:"Belarusian"},bg:{nativeName:"Български",englishName:"Bulgarian"},"bg-BG":{nativeName:"Български",englishName:"Bulgarian"},bn:{nativeName:"বাংলা",englishName:"Bengali"},"bn-IN":{nativeName:"বাংলা (ভারত)",englishName:"Bengali (India)"},"bn-BD":{nativeName:"বাংলা(বাংলাদেশ)",englishName:"Bengali (Bangladesh)"},"bs-BA":{nativeName:"Bosanski",englishName:"Bosnian"},ca:{nativeName:"Català",englishName:"Catalan"},"ca-ES":{nativeName:"Català",englishName:"Catalan"},cak:{nativeName:"Maya Kaqchikel",englishName:"Kaqchikel"},"ck-US":{nativeName:"ᏣᎳᎩ (tsalagi)",englishName:"Cherokee"},cs:{nativeName:"Čeština",englishName:"Czech"},"cs-CZ":{nativeName:"Čeština",englishName:"Czech"},cy:{nativeName:"Cymraeg",englishName:"Welsh"},"cy-GB":{nativeName:"Cymraeg",englishName:"Welsh"},da:{nativeName:"Dansk",englishName:"Danish"},"da-DK":{nativeName:"Dansk",englishName:"Danish"},de:{nativeName:"Deutsch",englishName:"German"},"de-AT":{nativeName:"Deutsch (Österreich)",englishName:"German (Austria)"},"de-DE":{nativeName:"Deutsch (Deutschland)",englishName:"German (Germany)"},"de-CH":{nativeName:"Deutsch (Schweiz)",englishName:"German (Switzerland)"},dsb:{nativeName:"Dolnoserbšćina",englishName:"Lower Sorbian"},el:{nativeName:"Ελληνικά",englishName:"Greek"},"el-GR":{nativeName:"Ελληνικά",englishName:"Greek (Greece)"},en:{nativeName:"English",englishName:"English"},"en-GB":{nativeName:"English (UK)",englishName:"English (UK)"},"en-AU":{nativeName:"English (Australia)",englishName:"English (Australia)"},"en-CA":{nativeName:"English (Canada)",englishName:"English (Canada)"},"en-IE":{nativeName:"English (Ireland)",englishName:"English (Ireland)"},"en-IN":{nativeName:"English (India)",englishName:"English (India)"},"en-PI":{nativeName:"English (Pirate)",englishName:"English (Pirate)"},"en-UD":{nativeName:"English (Upside Down)",englishName:"English (Upside Down)"},"en-US":{nativeName:"English (US)",englishName:"English (US)"},"en-ZA":{nativeName:"English (South Africa)",englishName:"English (South Africa)"},"en@pirate":{nativeName:"English (Pirate)",englishName:"English (Pirate)"},eo:{nativeName:"Esperanto",englishName:"Esperanto"},"eo-EO":{nativeName:"Esperanto",englishName:"Esperanto"},es:{nativeName:"Español",englishName:"Spanish"},"es-AR":{nativeName:"Español (Argentine)",englishName:"Spanish (Argentina)"},"es-419":{nativeName:"Español (Latinoamérica)",englishName:"Spanish (Latin America)"},"es-CL":{nativeName:"Español (Chile)",englishName:"Spanish (Chile)"},"es-CO":{nativeName:"Español (Colombia)",englishName:"Spanish (Colombia)"},"es-EC":{nativeName:"Español (Ecuador)",englishName:"Spanish (Ecuador)"},"es-ES":{nativeName:"Español (España)",englishName:"Spanish (Spain)"},"es-LA":{nativeName:"Español (Latinoamérica)",englishName:"Spanish (Latin America)"},"es-NI":{nativeName:"Español (Nicaragua)",englishName:"Spanish (Nicaragua)"},"es-MX":{nativeName:"Español (México)",englishName:"Spanish (Mexico)"},"es-US":{nativeName:"Español (Estados Unidos)",englishName:"Spanish (United States)"},"es-VE":{nativeName:"Español (Venezuela)",englishName:"Spanish (Venezuela)"},et:{nativeName:"eesti keel",englishName:"Estonian"},"et-EE":{nativeName:"Eesti (Estonia)",englishName:"Estonian (Estonia)"},eu:{nativeName:"Euskara",englishName:"Basque"},"eu-ES":{nativeName:"Euskara",englishName:"Basque"},fa:{nativeName:"فارسی",englishName:"Persian"},"fa-IR":{nativeName:"فارسی",englishName:"Persian"},"fb-LT":{nativeName:"Leet Speak",englishName:"Leet"},ff:{nativeName:"Fulah",englishName:"Fulah"},fi:{nativeName:"Suomi",englishName:"Finnish"},"fi-FI":{nativeName:"Suomi",englishName:"Finnish"},"fo-FO":{nativeName:"Føroyskt",englishName:"Faroese"},fr:{nativeName:"Français",englishName:"French"},"fr-CA":{nativeName:"Français (Canada)",englishName:"French (Canada)"},"fr-FR":{nativeName:"Français (France)",englishName:"French (France)"},"fr-BE":{nativeName:"Français (Belgique)",englishName:"French (Belgium)"},"fr-CH":{nativeName:"Français (Suisse)",englishName:"French (Switzerland)"},"fy-NL":{nativeName:"Frysk",englishName:"Frisian (West)"},ga:{nativeName:"Gaeilge",englishName:"Irish"},"ga-IE":{nativeName:"Gaeilge (Gaelic)",englishName:"Irish (Gaelic)"},gl:{nativeName:"Galego",englishName:"Galician"},"gl-ES":{nativeName:"Galego",englishName:"Galician"},"gn-PY":{nativeName:"Avañe'ẽ",englishName:"Guarani"},"gu-IN":{nativeName:"ગુજરાતી",englishName:"Gujarati"},"gx-GR":{nativeName:"Ἑλληνική ἀρχαία",englishName:"Classical Greek"},he:{nativeName:"עברית‏",englishName:"Hebrew"},"he-IL":{nativeName:"עברית‏",englishName:"Hebrew"},hi:{nativeName:"हिन्दी",englishName:"Hindi"},"hi-IN":{nativeName:"हिन्दी",englishName:"Hindi"},hr:{nativeName:"Hrvatski",englishName:"Croatian"},"hr-HR":{nativeName:"Hrvatski",englishName:"Croatian"},hsb:{nativeName:"Hornjoserbšćina",englishName:"Upper Sorbian"},ht:{nativeName:"Kreyòl",englishName:"Haitian Creole"},hu:{nativeName:"Magyar",englishName:"Hungarian"},"hu-HU":{nativeName:"Magyar",englishName:"Hungarian"},"hy-AM":{nativeName:"Հայերեն",englishName:"Armenian"},id:{nativeName:"Bahasa Indonesia",englishName:"Indonesian"},"id-ID":{nativeName:"Bahasa Indonesia",englishName:"Indonesian"},is:{nativeName:"Íslenska",englishName:"Icelandic"},"is-IS":{nativeName:"Íslenska (Iceland)",englishName:"Icelandic (Iceland)"},it:{nativeName:"Italiano",englishName:"Italian"},"it-IT":{nativeName:"Italiano",englishName:"Italian"},ja:{nativeName:"日本語",englishName:"Japanese"},"ja-JP":{nativeName:"日本語",englishName:"Japanese"},"jv-ID":{nativeName:"Basa Jawa",englishName:"Javanese"},"ka-GE":{nativeName:"ქართული",englishName:"Georgian"},"kk-KZ":{nativeName:"Қазақша",englishName:"Kazakh"},km:{nativeName:"ភាសាខ្មែរ",englishName:"Khmer"},"km-KH":{nativeName:"ភាសាខ្មែរ",englishName:"Khmer"},kab:{nativeName:"Taqbaylit",englishName:"Kabyle"},kn:{nativeName:"ಕನ್ನಡ",englishName:"Kannada"},"kn-IN":{nativeName:"ಕನ್ನಡ (India)",englishName:"Kannada (India)"},ko:{nativeName:"한국어",englishName:"Korean"},"ko-KR":{nativeName:"한국어 (韩国)",englishName:"Korean (Korea)"},"ku-TR":{nativeName:"Kurdî",englishName:"Kurdish"},la:{nativeName:"Latin",englishName:"Latin"},"la-VA":{nativeName:"Latin",englishName:"Latin"},lb:{nativeName:"Lëtzebuergesch",englishName:"Luxembourgish"},"li-NL":{nativeName:"Lèmbörgs",englishName:"Limburgish"},lt:{nativeName:"Lietuvių",englishName:"Lithuanian"},"lt-LT":{nativeName:"Lietuvių",englishName:"Lithuanian"},lv:{nativeName:"Latviešu",englishName:"Latvian"},"lv-LV":{nativeName:"Latviešu",englishName:"Latvian"},mai:{nativeName:"मैथिली, মৈথিলী",englishName:"Maithili"},"mg-MG":{nativeName:"Malagasy",englishName:"Malagasy"},mk:{nativeName:"Македонски",englishName:"Macedonian"},"mk-MK":{nativeName:"Македонски (Македонски)",englishName:"Macedonian (Macedonian)"},ml:{nativeName:"മലയാളം",englishName:"Malayalam"},"ml-IN":{nativeName:"മലയാളം",englishName:"Malayalam"},"mn-MN":{nativeName:"Монгол",englishName:"Mongolian"},mr:{nativeName:"मराठी",englishName:"Marathi"},"mr-IN":{nativeName:"मराठी",englishName:"Marathi"},ms:{nativeName:"Bahasa Melayu",englishName:"Malay"},"ms-MY":{nativeName:"Bahasa Melayu",englishName:"Malay"},mt:{nativeName:"Malti",englishName:"Maltese"},"mt-MT":{nativeName:"Malti",englishName:"Maltese"},my:{nativeName:"ဗမာစကာ",englishName:"Burmese"},no:{nativeName:"Norsk",englishName:"Norwegian"},nb:{nativeName:"Norsk (bokmål)",englishName:"Norwegian (bokmal)"},"nb-NO":{nativeName:"Norsk (bokmål)",englishName:"Norwegian (bokmal)"},ne:{nativeName:"नेपाली",englishName:"Nepali"},"ne-NP":{nativeName:"नेपाली",englishName:"Nepali"},nl:{nativeName:"Nederlands",englishName:"Dutch"},"nl-BE":{nativeName:"Nederlands (België)",englishName:"Dutch (Belgium)"},"nl-NL":{nativeName:"Nederlands (Nederland)",englishName:"Dutch (Netherlands)"},"nn-NO":{nativeName:"Norsk (nynorsk)",englishName:"Norwegian (nynorsk)"},oc:{nativeName:"Occitan",englishName:"Occitan"},"or-IN":{nativeName:"ଓଡ଼ିଆ",englishName:"Oriya"},pa:{nativeName:"ਪੰਜਾਬੀ",englishName:"Punjabi"},"pa-IN":{nativeName:"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",englishName:"Punjabi (India)"},pl:{nativeName:"Polski",englishName:"Polish"},"pl-PL":{nativeName:"Polski",englishName:"Polish"},"ps-AF":{nativeName:"پښتو",englishName:"Pashto"},pt:{nativeName:"Português",englishName:"Portuguese"},"pt-BR":{nativeName:"Português (Brasil)",englishName:"Portuguese (Brazil)"},"pt-PT":{nativeName:"Português (Portugal)",englishName:"Portuguese (Portugal)"},"qu-PE":{nativeName:"Qhichwa",englishName:"Quechua"},"rm-CH":{nativeName:"Rumantsch",englishName:"Romansh"},ro:{nativeName:"Română",englishName:"Romanian"},"ro-RO":{nativeName:"Română",englishName:"Romanian"},ru:{nativeName:"Русский",englishName:"Russian"},"ru-RU":{nativeName:"Русский",englishName:"Russian"},"sa-IN":{nativeName:"संस्कृतम्",englishName:"Sanskrit"},"se-NO":{nativeName:"Davvisámegiella",englishName:"Northern Sámi"},"si-LK":{nativeName:"පළාත",englishName:"Sinhala (Sri Lanka)"},sk:{nativeName:"Slovenčina",englishName:"Slovak"},"sk-SK":{nativeName:"Slovenčina (Slovakia)",englishName:"Slovak (Slovakia)"},sl:{nativeName:"Slovenščina",englishName:"Slovenian"},"sl-SI":{nativeName:"Slovenščina",englishName:"Slovenian"},"so-SO":{nativeName:"Soomaaliga",englishName:"Somali"},sq:{nativeName:"Shqip",englishName:"Albanian"},"sq-AL":{nativeName:"Shqip",englishName:"Albanian"},sr:{nativeName:"Српски",englishName:"Serbian"},"sr-RS":{nativeName:"Српски (Serbia)",englishName:"Serbian (Serbia)"},su:{nativeName:"Basa Sunda",englishName:"Sundanese"},sv:{nativeName:"Svenska",englishName:"Swedish"},"sv-SE":{nativeName:"Svenska",englishName:"Swedish"},sw:{nativeName:"Kiswahili",englishName:"Swahili"},"sw-KE":{nativeName:"Kiswahili",englishName:"Swahili (Kenya)"},ta:{nativeName:"தமிழ்",englishName:"Tamil"},"ta-IN":{nativeName:"தமிழ்",englishName:"Tamil"},te:{nativeName:"తెలుగు",englishName:"Telugu"},"te-IN":{nativeName:"తెలుగు",englishName:"Telugu"},tg:{nativeName:"забо́ни тоҷикӣ́",englishName:"Tajik"},"tg-TJ":{nativeName:"тоҷикӣ",englishName:"Tajik"},th:{nativeName:"ภาษาไทย",englishName:"Thai"},"th-TH":{nativeName:"ภาษาไทย (ประเทศไทย)",englishName:"Thai (Thailand)"},tl:{nativeName:"Filipino",englishName:"Filipino"},"tl-PH":{nativeName:"Filipino",englishName:"Filipino"},tlh:{nativeName:"tlhIngan-Hol",englishName:"Klingon"},tr:{nativeName:"Türkçe",englishName:"Turkish"},"tr-TR":{nativeName:"Türkçe",englishName:"Turkish"},"tt-RU":{nativeName:"татарча",englishName:"Tatar"},uk:{nativeName:"Українська",englishName:"Ukrainian"},"uk-UA":{nativeName:"Українська",englishName:"Ukrainian"},ur:{nativeName:"اردو",englishName:"Urdu"},"ur-PK":{nativeName:"اردو",englishName:"Urdu"},uz:{nativeName:"O'zbek",englishName:"Uzbek"},"uz-UZ":{nativeName:"O'zbek",englishName:"Uzbek"},vi:{nativeName:"Tiếng Việt",englishName:"Vietnamese"},"vi-VN":{nativeName:"Tiếng Việt",englishName:"Vietnamese"},"xh-ZA":{nativeName:"isiXhosa",englishName:"Xhosa"},yi:{nativeName:"ייִדיש",englishName:"Yiddish"},"yi-DE":{nativeName:"ייִדיש (German)",englishName:"Yiddish (German)"},zh:{nativeName:"中文",englishName:"Chinese"},"zh-Hans":{nativeName:"中文简体",englishName:"Chinese Simplified"},"zh-Hant":{nativeName:"中文繁體",englishName:"Chinese Traditional"},"zh-CN":{nativeName:"中文（中国）",englishName:"Chinese Simplified (China)"},"zh-HK":{nativeName:"中文（香港）",englishName:"Chinese Traditional (Hong Kong)"},"zh-SG":{nativeName:"中文（新加坡）",englishName:"Chinese Simplified (Singapore)"},"zh-TW":{nativeName:"中文（台灣）",englishName:"Chinese Traditional (Taiwan)"},"zu-ZA":{nativeName:"isiZulu",englishName:"Zulu"}}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MILLISECONDS=t.MINUTE=t.HOUR=t.DAY=void 0,t.DAY=86400,t.HOUR=3600,t.MINUTE=60,t.MILLISECONDS=1e3},function(e,t,n){"use strict";var r=n(1),i=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.a(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(n(52).a),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t}(n(50).a);n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var o=new a(i),s=o},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=r.__importStar(n(20)),a=n(10),o=n(199),s="DORIS_DEVICE";t.Fairplay=function(e,t){var n=this;this.xDrmInfo={},this.getCertificate=function(){return r.__awaiter(n,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return this.xDrmInfo.system=i.KeySystems.FAIRPLAY,[4,fetch(this.licenseUrl,{method:"GET",cache:"no-cache",headers:{Accept:"*/*",Authorization:this.token,"X-DRM-INFO":btoa(JSON.stringify(this.xDrmInfo))}})];case 1:return[4,t.sent().text()];case 2:return e=t.sent(),[2,new Uint8Array(a.stringToUint16Array(window.atob(e)))]}}))}))},this.getLicense=function(e){return r.__awaiter(n,void 0,void 0,(function(){var t,n,i,a;return r.__generator(this,(function(r){switch(r.label){case 0:return t=e.target,n=o.base64EncodeUint8Array(e.message),i=JSON.stringify({content_id:t.contentId,device_id:this.deviceId,challenge:n,cro:this.token}),this.xDrmInfo.key_ids=[t.contentId],[4,fetch(this.licenseUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",Authorization:this.token,"X-DRM-INFO":btoa(JSON.stringify(this.xDrmInfo))},body:i})];case 1:return[4,r.sent().json()];case 2:return a=r.sent(),[2,o.base64DecodeUint8Array(a.response.trim())]}}))}))};var u=window.localStorage.getItem(s);this.token=e,this.licenseUrl=t,u?this.deviceId=u:(this.deviceId=o.uuid(),window.localStorage.setItem(s,this.deviceId))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return f}));var r=n(1),i=n(5),a=n(14),o=n(7),s=n(17);function u(e,t,n,r){return function(i){return i.lift(new l(e,t,n,r))}}var l=function(){function e(e,t,n,r){this.keySelector=e,this.elementSelector=t,this.durationSelector=n,this.subjectSelector=r}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),c=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;return o.keySelector=n,o.elementSelector=r,o.durationSelector=i,o.subjectSelector=a,o.groups=null,o.attemptedToUnsubscribe=!1,o.count=0,o}return r.a(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(t);if(this.elementSelector)try{r=this.elementSelector(e)}catch(e){this.error(e)}else r=e;if(!i){i=this.subjectSelector?this.subjectSelector():new s.a,n.set(t,i);var a=new f(t,i,this);if(this.destination.next(a),this.durationSelector){var o=void 0;try{o=this.durationSelector(new f(t,i))}catch(e){return void this.error(e)}this.add(o.subscribe(new d(t,i,this)))}}i.closed||i.next(r)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,n){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(i.a),d=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.key=t,i.group=n,i.parent=r,i}return r.a(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(i.a),f=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return r.a(t,e),t.prototype._subscribe=function(e){var t=new a.a,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new h(n)),t.add(r.subscribe(e)),t},t}(o.a),h=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return r.a(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(a.a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEqual=void 0;var r=n(60);t.isEqual=function(e,t){if("object"==typeof e&&"object"==typeof t){for(var n in e){var i=e[n],a=t[n];if(Array.isArray(i)&&Array.isArray(a)){if(!(0,r.isSequenceEqual)(i,a))return!1}else if(i!==a)return!1}return!0}return e===t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(537),t),r.__exportStar(n(133),t),r.__exportStar(n(538),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=t.CookieStorage=t.isSupported=t.storage=void 0;var r=o(n(540)),i=o(n(183)),a=o(n(542));function o(e){return e&&e.__esModule?e:{default:e}}var s=null;(0,r.default)("localStorage")?t.storage=s=window.localStorage:(0,r.default)("sessionStorage")?t.storage=s=window.sessionStorage:(0,r.default)("cookieStorage")?t.storage=s=new i.default:t.storage=s=new a.default,t.default=s,t.storage=s,t.isSupported=r.default,t.CookieStorage=i.default,t.MemoryStorage=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(632),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21);r.__exportStar(n(777),t),r.__exportStar(n(778),t),r.__exportStar(n(779),t),r.__exportStar(n(780),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21);r.__exportStar(n(781),t),r.__exportStar(n(785),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(203);t.formatDrmParams=function(e){return{token:r.formatJwtToken(e.jwtToken),licenseServerUrl:e.url}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(807),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(819),t),r.__exportStar(n(820),t),r.__exportStar(n(821),t),r.__exportStar(n(822),t),r.__exportStar(n(823),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSettingsContext=t.SettingsContextProvider=t.SettingsContext=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(13),s={hideAudioTracks:!1,qualityLevelsOptions:{hideQualityLevels:!1,showBitrate:!1,showLevelVariants:!1},hideTextTracks:!1,showSettingsControl:!0};t.SettingsContext=i.default.createContext(s);t.SettingsContextProvider=function(e){var n=a.useVideoContext().state,u=n.textTracks,l=n.audioTracks,c=n.levels,d=n.isCasting,f=e.playbackSpeeds,h=e.hideAudioTracks,p=e.qualityLevelsOptions,m=e.hideTextTracks,g=e.children,v=r.__read(i.default.useState(null!=p?p:s.qualityLevelsOptions),2),y=v[0],_=v[1],b=r.__read(i.default.useState(null!=m?m:s.hideTextTracks),2),T=b[0],E=b[1],S=r.__read(i.default.useState(null!=h?h:s.hideAudioTracks),2),w=S[0],A=S[1],M=r.__read(i.default.useState(f),2),L=M[0],C=M[1],D=r.__read(i.default.useState(s.showSettingsControl),2),k=D[0],P=D[1];i.default.useEffect((function(){T&&!L&&w&&y.hideQualityLevels?P(!1):P(!0)}),[T,y,L,w]),i.default.useEffect((function(){var e=o.getTextTrackTypes(u).length>0;(!e||m)&&!T?E(!0):e&&T&&!m&&E(!1)}),[m,u,T]),i.default.useEffect((function(){var e=l.length>1;e&&!h||w?e&&w&&!h&&A(!1):A(!0)}),[w,l,h]),i.default.useEffect((function(){var e=c.length>2,t=!0===y.hideQualityLevels;(!e||d||(null==p?void 0:p.hideQualityLevels))&&!t?_(r.__assign(r.__assign({},y),{hideQualityLevels:!0})):t&&e&&!d&&!(null==p?void 0:p.hideQualityLevels)&&_(r.__assign(r.__assign({},y),{hideQualityLevels:!1}))}),[y,c,p,d]),i.default.useEffect((function(){(null==f?void 0:f.length)&&!d||!L?(null==f?void 0:f.length)&&!L&&!d&&C(f):C(void 0)}),[d,f,L]);var I={hideAudioTracks:w,qualityLevelsOptions:y,hideTextTracks:T,playbackSpeeds:L,showSettingsControl:k};return i.default.createElement(t.SettingsContext.Provider,{value:I},g)},t.useSettingsContext=function(){var e=i.default.useContext(t.SettingsContext);if(!e)throw new Error("SettingsContext must be used inside its Provider");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(958),t),r.__exportStar(n(959),t),r.__exportStar(n(960),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(27);r.__exportStar(n(1008),t),r.__exportStar(n(1011),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeObjectsProperties=t.getRandomString=t.pick=void 0;t.pick=(e,t)=>(e=>null!=e)(e)?e:t,t.getRandomString=()=>Math.random().toString(18).substring(2,9),t.mergeObjectsProperties=(e,t,n)=>Object.assign(Object.assign({},e&&e[n]||{}),t&&t[n]||{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLanguageFont=t.getRealmFontSize=t.getRealmCustomizations=t.getFontName=void 0,t.getFontName=e=>null==e?void 0:e.substr(e.lastIndexOf("/")+1).replace(".ttf",""),t.getRealmCustomizations=e=>{var t,n,r,i,a,o;return{fonts:{cardTitle:{scale:(null===(r=null===(n=null===(t=null==e?void 0:e.customizations)||void 0===t?void 0:t.fonts)||void 0===n?void 0:n.cardTitle)||void 0===r?void 0:r.scale)||1,weight:(null===(o=null===(a=null===(i=null==e?void 0:e.customizations)||void 0===i?void 0:i.fonts)||void 0===a?void 0:a.cardTitle)||void 0===o?void 0:o.weight)||"normal"}}}},t.getRealmFontSize=(e,t)=>e*(t||1),t.getLanguageFont=({realmDataRaw:e,languageCode:n,languageRegion:r,theme:i})=>{const a=null==e?void 0:e.realmLanguages.find(({language:e,region:t})=>e===n&&t===r),o=null==a?void 0:a.primaryFontUrl,s=(null==a?void 0:a.secondaryFontUrl)||o,u=(null==a?void 0:a.tertiaryFontUrl)||s,l=o||(null==e?void 0:e.settings.PRIMARY_FONT_URL)||i.fonts.primaryUrl,c=s||(null==e?void 0:e.settings.SECONDARY_FONT_URL)||i.fonts.secondaryUrl,d=s||(null==e?void 0:e.settings.SECONDARY_FONT_BOLD)||i.fonts.secondaryBoldUrl,f=u||(null==e?void 0:e.settings.TERTIARY_FONT_URL)||i.fonts.tertiaryUrl;return{primaryUrl:l,primaryName:t.getFontName(l),secondaryUrl:c,secondaryName:t.getFontName(c),secondaryBoldUrl:d,secondaryBoldName:t.getFontName(d),tertiaryUrl:f,tertiaryName:t.getFontName(f)}}},function(e,t,n){"use strict";n.r(t);var r="NOT_FOUND";var i=function(e,t){return e===t};function a(e,t){var n,a,o="object"==typeof t?t:{equalityCheck:t},s=o.equalityCheck,u=void 0===s?i:s,l=o.maxSize,c=void 0===l?1:l,d=o.resultEqualityCheck,f=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}(u),h=1===c?(n=f,{get:function(e){return a&&n(a.key,e)?a.value:r},put:function(e,t){a={key:e,value:t}},getEntries:function(){return a?[a]:[]},clear:function(){a=void 0}}):function(e,t){var n=[];function i(e){var i=n.findIndex((function(n){return t(e,n.key)}));if(i>-1){var a=n[i];return i>0&&(n.splice(i,1),n.unshift(a)),a.value}return r}return{get:i,put:function(t,a){i(t)===r&&(n.unshift({key:t,value:a}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(c,f);function p(){var t=h.get(arguments);if(t===r){if(t=e.apply(null,arguments),d){var n=h.getEntries().find((function(e){return d(e.value,t)}));n&&(t=n.value)}h.put(arguments,t)}return t}return p.clearCache=function(){return h.clear()},p}function o(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a,s=0,u={memoizeOptions:void 0},l=r.pop();if("object"==typeof l&&(u=l,l=r.pop()),"function"!=typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var c=u,d=c.memoizeOptions,f=void 0===d?n:d,h=Array.isArray(f)?f:[f],p=o(r),m=e.apply(void 0,[function(){return s++,l.apply(null,arguments)}].concat(h)),g=e((function(){for(var e=[],t=p.length,n=0;n<t;n++)e.push(p[n].apply(null,arguments));return a=m.apply(null,e)}));return Object.assign(g,{resultFunc:l,memoizedResultFunc:m,dependencies:p,lastResult:function(){return a},recomputations:function(){return s},resetRecomputations:function(){return s=0}}),g}}n.d(t,"createSelectorCreator",(function(){return s})),n.d(t,"createSelector",(function(){return u})),n.d(t,"createStructuredSelector",(function(){return l})),n.d(t,"defaultMemoize",(function(){return a})),n.d(t,"defaultEqualityCheck",(function(){return i}));var u=s(a),l=function(e,t){if(void 0===t&&(t=u),"object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t,r){return e[n[r]]=t,e}),{})}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n(1),i=n(17),a=n(7),o=n(5),s=n(14),u=n(79),l=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.a(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new s.a).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.a.EMPTY)),e},t.prototype.refCount=function(){return Object(u.a)()(this)},t}(a.a),c=function(){var e=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r.a(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.b);o.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(1),i=n(17),a=n(42),o=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return r.a(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new a.a;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i.a)},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));var r=n(1),i=n(5),a=n(37);function o(e,t){return void 0===t&&(t=0),function(n){return n.lift(new s(e,t))}}var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))},e}(),u=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return r.a(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new l(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(a.a.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(a.a.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(a.a.createComplete()),this.unsubscribe()},t}(i.a),l=function(){return function(e,t){this.notification=e,this.destination=t}}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(83);function i(){return Object(r.a)(1)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),i=n(24),a=n(83),o=n(49);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,s=null,u=e[e.length-1];return Object(i.a)(u)?(s=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof u&&(n=e.pop()),null===s&&1===e.length&&e[0]instanceof r.a?e[0]:Object(a.a)(n)(Object(o.a)(e,s))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(1),i=n(19),a=n(49),o=n(35),s=n(29);function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Object(i.a)(e[0]))return e[0];e=e[0]}return Object(a.a)(e,void 0).lift(new l)}var l=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new c(e))},e}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r.a(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Object(s.a)(this,r,void 0,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var i=this.subscriptions[r];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(t)},t}(o.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),i=n(18),a=n(53),o=n(24);function s(e,t,n){void 0===e&&(e=0);var s=-1;return Object(a.a)(t)?s=Number(t)<1?1:Number(t):Object(o.a)(t)&&(n=t),Object(o.a)(n)||(n=i.a),new r.a((function(t){var r=Object(a.a)(e)?e:+e-n.now();return n.schedule(u,r,{index:0,period:s,subscriber:t})}))}function u(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}},function(e,t,n){"use strict";var r=n(7),i=n(14),a=n(41);var o=n(88),s=n(38);var u=n(126),l=n(125);function c(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[a.a]}(e))return function(e,t){return new r.a((function(n){var r=new i.a;return r.add(t.schedule((function(){var i=e[a.a]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(Object(u.a)(e))return function(e,t){return new r.a((function(n){var r=new i.a;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(Object(l.a)(e))return Object(o.a)(e,t);if(function(e){return e&&"function"==typeof e[s.a]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.a((function(n){var r,a=new i.a;return a.add((function(){r&&"function"==typeof r.return&&r.return()})),a.add(t.schedule((function(){r=e[s.a](),a.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),a}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}n.d(t,"a",(function(){return c}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),i=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r.a(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n(14).a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}n.d(t,"a",(function(){return r}))},function(e,t,n){var r;window,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s="./index.js")}({"./externals/base64.js":function(e,t,n){var r,i,o,u,l,c={encode:function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},decode:function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&e[n++]):r<240?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")}},d={};r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){for(var t=0,n=[],i=0|e.length/3;0<i--;){var a=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(r.charAt(63&a>>18)),n.push(r.charAt(63&a>>12)),n.push(r.charAt(63&a>>6)),n.push(r.charAt(63&a))}return 2==e.length-t?(a=(e[t]<<16)+(e[t+1]<<8),n.push(r.charAt(63&a>>18)),n.push(r.charAt(63&a>>12)),n.push(r.charAt(63&a>>6)),n.push("=")):1==e.length-t&&(a=e[t]<<16,n.push(r.charAt(63&a>>18)),n.push(r.charAt(63&a>>12)),n.push("==")),n.join("")},o=function(){for(var e=[],t=0;t<r.length;++t)e[r.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),u=function(e){for(var t=0,n=[],r=0|e.length/4;0<r--;){var i=(o[e.charCodeAt(t)]<<18)+(o[e.charCodeAt(t+1)]<<12)+(o[e.charCodeAt(t+2)]<<6)+o[e.charCodeAt(t+3)];n.push(255&i>>16),n.push(255&i>>8),n.push(255&i),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n},l={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},d.decodeArray=function(e){var t=u(e);return new Uint8Array(t)},d.encodeASCII=function(e){var t=l.encode(e);return i(t)},d.decodeASCII=function(e){var t=u(e);return l.decode(t)},d.encode=function(e){var t=c.encode(e);return i(t)},d.decode=function(e){var t=u(e);return c.decode(t)},t.decode=d.decode,t.decodeArray=d.decodeArray,t.encode=d.encode,t.encodeASCII=d.encodeASCII},"./externals/cea608-parser.js":function(e,t,n){!function(e){"use strict";var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},r={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},i={17:2,18:4,21:6,22:8,23:10,19:13,20:15},a={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},o={25:2,26:4,29:6,30:8,31:10,27:13,28:15},s=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],u={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},l=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},c=function(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};c.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var d=function(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new c(t,n,r,i,a)};d.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var f=function(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new d);this.pos=0,this.currPenState=new c};f.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(u.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>32&&(u.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);this.pos>=32?u.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var h=function(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new f);this.currRow=14,this.nrRollUpRows=null,this.reset()};h.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){u.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){u.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){u.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){u.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),u.log("INFO","Rolling up")}else u.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+': "'+a+'"'):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var p=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new h,this.nonDisplayedMemory=new h,this.lastOutputScreen=new h,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,u.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";u.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(u.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){u.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){u.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){u.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){u.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){u.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){u.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){u.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){u.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){u.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){u.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){u.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(u.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,u.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){u.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}u.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=u.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var m=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new p(1,t),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};m.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,a=!1;this.lastTime=e,u.setTime(e);for(var o=0;o<t.length;o+=2)r=127&t[o],i=127&t[o+1],r>=16&&r<=31&&r===this.lastCmdA&&i===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,u.log("DEBUG","Repeated command ("+l([r,i])+") is dropped")):0!==r||0!==i?(u.log("DATA","["+l([t[o],t[o+1]])+"] -> ("+l([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),n||(a=this.parseChars(r,i))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(a):u.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,u.log("WARNING","Couldn't parse cleaned data "+l([r,i])+" orig: "+l([t[o],t[o+1]])))):this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;n=20===e||21===e||23===e?1:2;var r=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?r.cc_RCL():33===t?r.cc_BS():34===t?r.cc_AOF():35===t?r.cc_AON():36===t?r.cc_DER():37===t?r.cc_RU(2):38===t?r.cc_RU(3):39===t?r.cc_RU(4):40===t?r.cc_FON():41===t?r.cc_RDC():42===t?r.cc_TR():43===t?r.cc_RTD():44===t?r.cc_EDM():45===t?r.cc_CR():46===t?r.cc_ENM():47===t&&r.cc_EOC():r.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return u.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(t),u.log("DEBUG","MIDROW ("+l([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var n,s=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;n=e<=23?1:2,s=64<=t&&t<=95?1===n?r[e]:a[e]:1===n?i[e]:o[e];var u=this.interpretPAC(s,t);return this.channels[n-1].setPAC(u),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var r=null,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),17<=a&&a<=19){var o=t;o=17===a?t+80:18===a?t+112:t+144,u.log("INFO","Special char '"+n(o)+"' in channel "+r),i=[o],this.lastCmdA=e,this.lastCmdB=t}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null);if(i){var s=l(i);u.log("DEBUG","Char codes =  "+s.join(","))}return i},parseBackgroundAttributes:function(e,t){var n,r,i;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=s[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};var g=function(e,t,n){for(var r=[],i=t;i<n;i++)i+2<n&&0===e.getUint8(i)&&0===e.getUint8(i+1)&&3===e.getUint8(i+2)?(r.push(0),r.push(0),i+=2):r.push(e.getUint8(i));return new DataView(new Uint8Array(r).buffer)},v=function(e,t,n,r){return!(4!==e||t<8)&&181===n.getUint8(r)&&49===n.getUint16(r+1)&&1195456820===n.getUint32(r+3)&&3===n.getUint8(r+7)},y=function(e,t){return(127&e)>0||(127&t)>0},_=function(e,t){for(var n,r=0;r<e.byteLength;){var i,a=0,o=0;do{a+=i=e.getUint8(r++)}while(255===i);do{o+=i=e.getUint8(r++)}while(255===i);if(v(a,o,e,r))for(var s=r+10,u=s+3*(31&e.getUint8(s-2)),l=s;l<u;l+=3){var c=e.getUint8(l);if(4&c){var d=3&c;if(0===(n=d)||1===n){var f=e.getUint8(l+1),h=e.getUint8(l+2);y(f,h)&&t[d].push(f,h)}}}r+=o}};e.logger=u,e.PenState=c,e.CaptionScreen=h,e.Cea608Parser=m,e.extractCea608DataFromSample=function(e,t,n){for(var r=0,i=[[],[]],a=t;a<t+n-5;a++){if(r=e.getUint32(a),6===(31&e.getUint8(a+4))){var o=g(e,a+5,a+r+3);_(o,i)}a+=r+3}return i}}(t)},"./externals/xml2json.js":function(e,t,n){"use strict";n.r(t),t.default=function(e){void 0===(e=e||{}).escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1);var t={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function n(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function r(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function i(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(t,n,r))break}return i!=e.length}function a(t,n,r){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&i(e.arrayAccessFormPaths,t,n,r)&&(t[n]=[t[n]])}function o(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function s(n,r,a,o){return!(r==t.ELEMENT_NODE&&e.xmlElementsFilter.length>0)||i(e.xmlElementsFilter,n,a,o)}function u(r,l){if(r.nodeType==t.DOCUMENT_NODE){for(var c=new Object,d=r.childNodes,f=0;f<d.length;f++)(p=d[f]).nodeType==t.ELEMENT_NODE&&(e.ignoreRoot?c=u(p):(c={})[m=n(p)]=u(p));return c}if(r.nodeType==t.ELEMENT_NODE){(c=new Object).__cnt=0;var h=[];for(d=r.childNodes,f=0;f<d.length;f++){var p,m=n(p=d[f]);if(p.nodeType!=t.COMMENT_NODE){var g=l+"."+m;if(s(c,p.nodeType,m,g))if(c.__cnt++,null==c[m]){var v=u(p,g);("#text"!=m||/[^\s]/.test(v))&&((y={})[m]=v,h.push(y)),c[m]=v,a(c,m,g)}else{var y;null!=c[m]&&(c[m]instanceof Array||(c[m]=[c[m]],a(c,m,g))),v=u(p,g),("#text"!=m||/[^\s]/.test(v))&&((y={})[m]=v,h.push(y)),c[m][c[m].length]=v}}}c.__children=h;for(var _=n(r),b=0;b<r.attributes.length;b++){var T=r.attributes[b];c.__cnt++;for(var E=T.value,S=0,w=e.matchers.length;S<w;S++){var A=e.matchers[S];A.test(T,_)&&(E=A.converter(T.value))}c[e.attributePrefix+T.name]=E}var M=function(e){return e.prefix}(r);return null!=M&&""!=M&&(c.__cnt++,c.__prefix=M),null!=c["#text"]&&(c.__text=c["#text"],c.__text instanceof Array&&(c.__text=c.__text.join("\n")),e.stripWhitespaces&&(c.__text=c.__text.trim()),delete c["#text"],"property"==e.arrayAccessForm&&delete c["#text_asArray"],c.__text=function(t,n,r){if(e.datetimeAccessFormPaths.length>0){var a=r.split(".#")[0];return i(e.datetimeAccessFormPaths,t,n,a)?o(t):t}return t}(c.__text,m,l+"."+m)),null!=c["#cdata-section"]&&(c.__cdata=c["#cdata-section"],delete c["#cdata-section"],"property"==e.arrayAccessForm&&delete c["#cdata-section_asArray"]),0==c.__cnt&&"text"==e.emptyNodeForm?c="":1==c.__cnt&&null!=c.__text?c=c.__text:1!=c.__cnt||null==c.__cdata||e.keepCData?c.__cnt>1&&null!=c.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==c.__text||""==c.__text.trim())&&delete c.__text:c=c.__cdata,delete c.__cnt,!e.enableToStringFunc||null==c.__text&&null==c.__cdata||(c.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),c}if(r.nodeType==t.TEXT_NODE||r.nodeType==t.CDATA_SECTION_NODE)return r.nodeValue}function l(t,n,i,a){var o="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=i)for(var s=0;s<i.length;s++){var u=i[s],l=t[u];e.escapeMode&&(l=r(l)),o+=" "+u.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?o+='"'+l+'"':o+="'"+l+"'"}return o+=a?"/>":">"}function c(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function d(t,n){return"property"==e.arrayAccessForm&&(r=n.toString(),i="_asArray",-1!==r.indexOf(i,r.length-i.length))||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function;var r,i}function f(e){var t=0;if(e instanceof Object)for(var n in e)d(e,n)||t++;return t}function h(t,n,r){return 0==e.jsonPropertiesFilter.length||""==r||i(e.jsonPropertiesFilter,t,n,r)}function p(t){var n=[];if(t instanceof Object)for(var r in t)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(e.attributePrefix)&&n.push(r);return n}function m(t){var n="";return t instanceof Object?n+=function(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=r(t.__text):n+=t.__text),n}(t):null!=t&&(e.escapeMode?n+=r(t):n+=t),n}function g(e,t){return""===e?t:e+"."+t}function v(e,t,n,r){var i="";if(0==e.length)i+=l(e,t,n,!0);else for(var a=0;a<e.length;a++)i+=l(e[a],t,p(e[a]),!1),i+=y(e[a],g(r,t)),i+=c(e[a],t);return i}function y(e,t){var n="";if(f(e)>0)for(var r in e)if(!d(e,r)&&(""==t||h(e,r,g(t,r)))){var i=e[r],a=p(i);null==i||null==i?n+=l(i,r,a,!0):i instanceof Object?i instanceof Array?n+=v(i,r,a,t):i instanceof Date?(n+=l(i,r,a,!1),n+=i.toISOString(),n+=c(i,r)):f(i)>0||null!=i.__text||null!=i.__cdata?(n+=l(i,r,a,!1),n+=y(i,g(t,r)),n+=c(i,r)):n+=l(i,r,a,!0):(n+=l(i,r,a,!1),n+=m(i),n+=c(i,r))}return n+=m(e)}this.parseXmlString=function(e){var t;if(window.ActiveXObject||window,void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?o(e):e},this.xml2json=function(e){return u(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return y(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}}},"./index.js":function(e,t,n){"use strict";n.r(t);var r=n("./index_mediaplayerOnly.js");n.d(t,"MediaPlayer",(function(){return r.MediaPlayer}));var i=n("./src/streaming/utils/Capabilities.js");n.d(t,"supportsMediaSource",(function(){return i.supportsMediaSource}));var a=n("./src/streaming/metrics/MetricsReporting.js");n.d(t,"MetricsReporting",(function(){return a.default}));var o=n("./src/streaming/protection/Protection.js");n.d(t,"Protection",(function(){return o.default}));var s=n("./src/streaming/MediaPlayerFactory.js");n.d(t,"MediaPlayerFactory",(function(){return s.default}));var u=n("./src/core/Debug.js");n.d(t,"Debug",(function(){return u.default})),dashjs.Protection=o.default,dashjs.MetricsReporting=a.default,dashjs.MediaPlayerFactory=s.default,dashjs.Debug=u.default,dashjs.supportsMediaSource=i.supportsMediaSource,t.default=dashjs},"./index_mediaplayerOnly.js":function(e,t,n){"use strict";n.r(t),function(e){var r=n("./src/streaming/MediaPlayer.js");n.d(t,"MediaPlayer",(function(){return r.default}));var i=n("./src/core/FactoryMaker.js");n.d(t,"FactoryMaker",(function(){return i.default}));var a=n("./src/core/Debug.js");n.d(t,"Debug",(function(){return a.default}));var o=n("./src/core/Version.js"),s=(n("./node_modules/es6-promise/auto.js"),"undefined"!=typeof window&&window||e),u=s.dashjs;u||(u=s.dashjs={}),u.MediaPlayer=r.default,u.FactoryMaker=i.default,u.Debug=a.default,u.Version=Object(o.getVersionString)(),t.default=u}.call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/base64-js/index.js":function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=l(e),r=n[0],o=n[1],s=new a(function(e,t,n){return 3*(t+n)/4-n}(0,r,o)),u=0,c=o>0?r-4:r,d=0;d<c;d+=4)t=i[e.charCodeAt(d)]<<18|i[e.charCodeAt(d+1)]<<12|i[e.charCodeAt(d+2)]<<6|i[e.charCodeAt(d+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===o&&(t=i[e.charCodeAt(d)]<<2|i[e.charCodeAt(d+1)]>>4,s[u++]=255&t),1===o&&(t=i[e.charCodeAt(d)]<<10|i[e.charCodeAt(d+1)]<<4|i[e.charCodeAt(d+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(c(e,o,o+16383>s?s:o+16383));return 1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"./node_modules/codem-isoboxer/dist/iso_boxer.js":function(e,t,n){var r={parseBuffer:function(e){return new i(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(a.prototype._boxProcessors[e]=t)},createFile:function(){return new i},createBox:function(e,t,n){var r=a.create(e);return t&&t.append(r,n),r},createFullBox:function(e,t,n){var i=r.createBox(e,t,n);return i.version=0,i.flags=0,i},Utils:{}};r.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var a=e.getUint8(i++);a<128||(a<224?(a=(31&a)<<6,a|=63&e.getUint8(i++)):a<240?(a=(15&a)<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++)):(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++))),r.push(String.fromCharCode(a))}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},r.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},r.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var a=0;a<e.boxes.length;a++)if(r===e.boxes[a].type){i=a+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)},t.parseBuffer=r.parseBuffer,t.addBoxProcessor=r.addBoxProcessor,t.createFile=r.createFile,t.createBox=r.createBox,t.createFullBox=r.createFullBox,t.Utils=r.Utils,r.Cursor=function(e){this.offset=void 0===e?0:e};var i=function(e){this._cursor=new r.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=a.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[r],e,t,n)}},i.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},i.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)};var a=function(){this._cursor=new r.Cursor};a.parse=function(e){var t=new a;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},a.create=function(e){var t=new a;return t.type=e,t.boxes=[],t},a.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],a.prototype._boxProcessors={},a.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},a.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},a.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},a.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},a.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},a.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},a.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(a.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},a.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},a.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);t=r*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},a.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((t=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(i+2));break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,r},a.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},a.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},a.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},a.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(t>0){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},a.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return e>0&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?r.Utils.dataViewToString(t):t},a.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},a.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},a.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(a.parse(this))},a.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},a.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},a.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},a.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:r=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},a.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},a.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r)},a.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},a.prototype._writeUTF8String=function(e){var t=r.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)n.setUint8(i,t[i]);else this.size+=t.length},a.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},a.prototype._boxProcessors.avc1=a.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},a.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)}))},a.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},a.prototype._boxProcessors.free=a.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},a.prototype._boxProcessors.ftyp=a.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},a.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},a.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},a.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},a.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},a.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},a.prototype._boxProcessors.mp4a=a.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},a.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},a.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},a.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},a.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},a.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},a.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)}))},a.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},a.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,(function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)}))}))},a.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,(function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)}))}))},a.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},a.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},a.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},a.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},a.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)}))},a.prototype._boxProcessors["url "]=a.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},a.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},a.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},a.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},a.prototype._boxProcessors.vtte=function(){}},"./node_modules/core-util-is/lib/util.js":function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/es6-promise/auto.js":function(e,t,n){"use strict";e.exports=n("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},"./node_modules/es6-promise/dist/es6-promise.js":function(e,t,n){(function(t,n){var r;r=function(){"use strict";function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,a=void 0,o=void 0,s=function(e,t){p[i]=e,p[i+1]=t,2===(i+=2)&&(o?o(m):b())},u="undefined"!=typeof window?window:void 0,l=u||{},c=l.MutationObserver||l.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var e=setTimeout;return function(){return e(m,1)}}var p=new Array(1e3);function m(){for(var e=0;e<i;e+=2)(0,p[e])(p[e+1]),p[e]=void 0,p[e+1]=void 0;i=0}var g,v,y,_,b=void 0;function T(e,t){var n=this,r=new this.constructor(w);void 0===r[S]&&j(r);var i=n._state;if(i){var a=arguments[i-1];s((function(){return x(i,r,a,n._result)}))}else O(n,r,e,t);return r}function E(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(w);return D(t,e),t}d?b=function(){return t.nextTick(m)}:c?(v=0,y=new c(m),_=document.createTextNode(""),y.observe(_,{characterData:!0}),b=function(){_.data=v=++v%2}):f?((g=new MessageChannel).port1.onmessage=m,b=function(){return g.port2.postMessage(0)}):b=void 0===u?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(m)}:h()}catch(e){return h()}}():h();var S=Math.random().toString(36).substring(2);function w(){}var A=void 0,M=1,L=2;function C(t,n,r){n.constructor===t.constructor&&r===T&&n.constructor.resolve===E?function(e,t){t._state===M?P(e,t._result):t._state===L?I(e,t._result):O(t,void 0,(function(t){return D(e,t)}),(function(t){return I(e,t)}))}(t,n):void 0===r?P(t,n):e(r)?function(e,t,n){s((function(e){var r=!1,i=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?D(e,n):P(e,n))}),(function(t){r||(r=!0,I(e,t))}),e._label);!r&&i&&(r=!0,I(e,i))}),e)}(t,n,r):P(t,n)}function D(e,t){if(e===t)I(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(r=t),null===r||"object"!==i&&"function"!==i)P(e,t);else{var n=void 0;try{n=t.then}catch(t){return void I(e,t)}C(e,t,n)}var r,i}function k(e){e._onerror&&e._onerror(e._result),R(e)}function P(e,t){e._state===A&&(e._result=t,e._state=M,0!==e._subscribers.length&&s(R,e))}function I(e,t){e._state===A&&(e._state=L,e._result=t,s(k,e))}function O(e,t,n,r){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+M]=n,i[a+L]=r,0===a&&e._state&&s(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?x(n,r,i,a):i(a);e._subscribers.length=0}}function x(t,n,r,i){var a=e(r),o=void 0,s=void 0,u=!0;if(a){try{o=r(i)}catch(e){u=!1,s=e}if(n===o)return void I(n,new TypeError("A promises callback cannot return that same promise."))}else o=i;n._state!==A||(a&&u?D(n,o):!1===u?I(n,s):t===M?P(n,o):t===L&&I(n,o))}var N=0;function j(e){e[S]=N++,e._state=void 0,e._result=void 0,e._subscribers=[]}var F=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(w),this.promise[S]||j(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&P(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===A&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===E){var i=void 0,a=void 0,o=!1;try{i=e.then}catch(e){o=!0,a=e}if(i===T&&e._state!==A)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===U){var s=new n(w);o?I(s,a):C(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===A&&(this._remaining--,e===L?I(r,n):this._result[t]=n),0===this._remaining&&P(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;O(e,void 0,(function(e){return n._settledAt(M,t,e)}),(function(e){return n._settledAt(L,t,e)}))},e}(),U=function(){function t(e){this[S]=N++,this._result=this._state=void 0,this._subscribers=[],w!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){D(e,t)}),(function(t){I(e,t)}))}catch(t){I(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return e(t)?this.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):this.then(t,t)},t}();return U.prototype.then=T,U.all=function(e){return new F(this,e).promise},U.race=function(e){var t=this;return r(e)?new t((function(n,r){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},U.resolve=E,U.reject=function(e){var t=new this(w);return I(t,e),t},U._setScheduler=function(e){o=e},U._setAsap=function(e){s=e},U._asap=s,U.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=U},U.Promise=U,U},e.exports=r()}).call(this,n("./node_modules/process/browser.js"),n("./node_modules/webpack/buildin/global.js"))},"./node_modules/fast-deep-equal/index.js":function(e,t,n){"use strict";var r=Array.isArray,i=Object.keys,a=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var o,s,u,l=r(t),c=r(n);if(l&&c){if((s=t.length)!=n.length)return!1;for(o=s;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(l!=c)return!1;var d=t instanceof Date,f=n instanceof Date;if(d!=f)return!1;if(d&&f)return t.getTime()==n.getTime();var h=t instanceof RegExp,p=n instanceof RegExp;if(h!=p)return!1;if(h&&p)return t.toString()==n.toString();var m=i(t);if((s=m.length)!==i(n).length)return!1;for(o=s;0!=o--;)if(!a.call(n,m[o]))return!1;for(o=s;0!=o--;)if(!e(t[u=m[o]],n[u]))return!1;return!0}return t!=t&&n!=n}},"./node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*u-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*m}},"./node_modules/imsc/src/main/js/doc.js":function(e,t,n){!function(e,t,n,r,i){function a(e,t,n,r){var i=r&&"seq"===r.timeContainer,o=0;r&&(o=i&&n?n.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+o:o;var s=t.begin,u=null;for(var l in t.sets)a(e,t.sets[l],u,t),s="seq"===t.timeContainer?t.sets[l].end:Math.max(s,t.sets[l].end),u=t.sets[l];if("contents"in t)for(var c in t.contents)a(e,t.contents[c],u,t),s="seq"===t.timeContainer?t.contents[c].end:Math.max(s,t.contents[c].end),u=t.contents[c];else s=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,o+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=o+t.explicit_end:t.end=s,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function o(e){this.node=e}function s(){this.events=[],this.head=null,this.body=null}function u(){this.styling=null,this.layout=null}function l(){this.styles={}}function c(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function d(){this.regions={}}function f(e){this.kind=e}function h(e){this.id=e}function p(e){this.regionID=e}function m(e){this.styleAttrs=e}function g(e){this.sets=e}function v(e){this.contents=e}function y(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n}function _(){f.call(this,"body")}function b(){f.call(this,"div")}function T(){f.call(this,"p")}function E(){f.call(this,"span")}function S(){f.call(this,"span")}function w(){f.call(this,"br")}function A(){}function M(){}function L(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function C(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function D(e,t){var n={};if(null!==e)for(var i in e.attributes){var a=e.attributes[i].uri+" "+e.attributes[i].local,o=r.byQName[a];if(void 0!==o){var s=o.parse(e.attributes[i].value);null!==s?(n[a]=s,o===r.byName.zIndex&&x(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):N(t,"Cannot parse styling attribute "+a+" --\x3e "+e.attributes[i].value)}}return n}function k(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function P(e,t,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),i}function I(e,t,n){for(;t.styleRefs.length>0;){var r=t.styleRefs.pop();r in e.styles?(I(e,e.styles[r],n),R(e.styles[r].styleAttrs,t.styleAttrs)):N(n,"Non-existant style id referenced")}}function O(e,t,n,r){for(var i=t.length-1;i>=0;i--){var a=t[i];a in e.styles?R(e.styles[a].styleAttrs,n):N(r,"Non-existant style id referenced")}}function R(e,t){for(var n in e)n in t||(t[n]=e[n])}function x(e,t){if(e&&e.warn&&e.warn(t))throw t}function N(e,t){if(e&&e.error&&e.error(t))throw t}function j(e,t){throw e&&e.fatal&&e.fatal(t),t}function F(e,t){for(var n,r=0,i=e.length-1;r<=i;){var a=e[n=Math.floor((r+i)/2)];if(a<t)r=n+1;else{if(!(a>t))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}e.fromXML=function(e,r,i){var f=t.parser(!0,{xmlns:!0}),h=[],p=[],m=[],g=0,v=null;f.onclosetag=function(e){if(h[0]instanceof l)for(var t in h[0].styles)I(h[0],h[0].styles[t],r);else if(h[0]instanceof T||h[0]instanceof E){if(h[0].contents.length>1){var a,s=[h[0].contents[0]];for(a=1;a<h[0].contents.length;a++)h[0].contents[a]instanceof S&&s[s.length-1]instanceof S?s[s.length-1].text+=h[0].contents[a].text:s.push(h[0].contents[a]);h[0].contents=s}h[0]instanceof E&&1===h[0].contents.length&&h[0].contents[0]instanceof S&&(h[0].text=h[0].contents[0].text,delete h[0].contents)}else h[0]instanceof o&&(h[0].node.uri===n.ns_tt&&"metadata"===h[0].node.local?g--:g>0&&i&&"onCloseTag"in i&&i.onCloseTag());m.shift(),p.shift(),h.shift()},f.ontext=function(e){if(void 0===h[0]);else if(h[0]instanceof E||h[0]instanceof T){var t=new S;t.initFromText(v,h[0],e,m[0],r),h[0].contents.push(t)}else h[0]instanceof o&&g>0&&i&&"onText"in i&&i.onText(e)},f.onopentag=function(e){var t=e.attributes["xml:space"];t?m.unshift(t.value):0===m.length?m.unshift("default"):m.unshift(m[0]);var a=e.attributes["xml:lang"];if(a?p.unshift(a.value):0===p.length?p.unshift(""):p.unshift(p[0]),e.uri===n.ns_tt)if("tt"===e.local)null!==v&&j(r,"Two <tt> elements at ("+this.line+","+this.column+")"),(v=new s).initFromNode(e,r),h.unshift(v);else if("head"===e.local)h[0]instanceof s||j(r,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==v.head&&j("Second <head> element at ("+this.line+","+this.column+")"),v.head=new u,h.unshift(v.head);else if("styling"===e.local)h[0]instanceof u||j(r,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==v.head.styling&&j("Second <styling> element at ("+this.line+","+this.column+")"),v.head.styling=new l,h.unshift(v.head.styling);else if("style"===e.local){var f;h[0]instanceof l?((f=new c).initFromNode(e,r),f.id?v.head.styling.styles[f.id]=f:N(r,"<style> element missing @id attribute"),h.unshift(f)):h[0]instanceof A?((f=new c).initFromNode(e,r),R(f.styleAttrs,h[0].styleAttrs),h.unshift(f)):j(r,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===e.local)h[0]instanceof u||j(r,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==v.head.layout&&j(r,"Second <layout> element at "+this.line+","+this.column+")"),v.head.layout=new d,h.unshift(v.head.layout);else if("region"===e.local){h[0]instanceof d||j(r,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var y=new A;y.initFromNode(v,e,r),!y.id||y.id in v.head.layout.regions?N(r,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):v.head.layout.regions[y.id]=y,h.unshift(y)}else if("body"===e.local){h[0]instanceof s||j(r,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==v.body&&j(r,"Second <body> element at "+this.line+","+this.column+")");var S=new _;S.initFromNode(v,e,r),v.body=S,h.unshift(S)}else if("div"===e.local){h[0]instanceof b||h[0]instanceof _||j(r,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var L=new b;L.initFromNode(v,h[0],e,r),h[0].contents.push(L),h.unshift(L)}else if("p"===e.local){h[0]instanceof b||j(r,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var C=new T;C.initFromNode(v,h[0],e,r),h[0].contents.push(C),h.unshift(C)}else if("span"===e.local){h[0]instanceof E||h[0]instanceof T||j(r,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var D=new E;D.initFromNode(v,h[0],e,m[0],r),h[0].contents.push(D),h.unshift(D)}else if("br"===e.local){h[0]instanceof E||h[0]instanceof T||j(r,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var k=new w;k.initFromNode(v,h[0],e,r),h[0].contents.push(k),h.unshift(k)}else if("set"===e.local){h[0]instanceof E||h[0]instanceof T||h[0]instanceof b||h[0]instanceof _||h[0]instanceof A||h[0]instanceof w||j(r,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var P=new M;P.initFromNode(v,h[0],e,r),h[0].sets.push(P),h.unshift(P)}else h.unshift(new o(e));else h.unshift(new o(e));if(h[0]instanceof o)if(e.uri===n.ns_tt&&"metadata"===e.local)g++;else if(g>0&&i&&"onOpenTag"in i){var I=[];for(var O in e.attributes)I[e.attributes[O].uri+" "+e.attributes[O].local]={uri:e.attributes[O].uri,local:e.attributes[O].local,value:e.attributes[O].value};i.onOpenTag(e.uri,e.local,I)}},f.write(e).close(),null!==v.head?delete v.head.styling:v.head=new u,null===v.head.layout&&(v.head.layout=new d);var y=!1;for(var L in v.head.layout.regions){y=!0;break}if(!y){var C=A.prototype.createDefaultRegion();v.head.layout.regions[C.id]=C}for(var D in v.head.layout.regions)a(v,v.head.layout.regions[D],null,null);return v.body&&a(v,v.body,null,null),v},s.prototype.initFromNode=function(e,t){this.cellResolution=function(e,t){var r=k(e,n.ns_ttp,"cellResolution"),i=15,a=32;if(null!==r){var o=/(\d+) (\d+)/.exec(r);null!==o?(a=parseInt(o[1]),i=parseInt(o[2])):x(t,"Malformed cellResolution value (using initial value instead)")}return{w:a,h:i}}(e,t);var r=function(e,t){var r,i=k(e,n.ns_ttp,"frameRate"),a=30;null!==i&&(null!==(r=/(\d+)/.exec(i))?a=parseInt(r[1]):x(t,"Malformed frame rate attribute (using initial value instead)"));var o=k(e,n.ns_ttp,"frameRateMultiplier"),s=1;null!==o&&(null!==(r=/(\d+) (\d+)/.exec(o))?s=parseInt(r[1])/parseInt(r[2]):x(t,"Malformed frame rate multiplier attribute (using initial value instead)"));var u=s*a,l=1,c=k(e,n.ns_ttp,"tickRate");return null===c?null!==i&&(l=u):null!==(r=/(\d+)/.exec(c))?l=parseInt(r[1]):x(t,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:u,tickRate:l}}(e,t);this.effectiveFrameRate=r.effectiveFrameRate,this.tickRate=r.tickRate,this.aspectRatio=function(e,t){var r=k(e,n.ns_ittp,"aspectRatio"),i=null;if(null!==r){var a=/(\d+) (\d+)/.exec(r);if(null!==a){var o=parseInt(a[1]),s=parseInt(a[2]);0!==o&&0!==s?i=o/s:N(t,"Illegal aspectRatio values (ignoring)")}else N(t,"Malformed aspectRatio attribute (ignoring)")}return i}(e,t);var a=k(e,n.ns_ttp,"timeBase");null!==a&&"media"!==a&&j(t,"Unsupported time base");var o=function(e,t){var r=k(e,n.ns_tts,"extent");if(null===r)return null;var a=r.split(" ");if(2!==a.length)return x(t,"Malformed extent (ignoring)"),null;var o=i.parseLength(a[0]),s=i.parseLength(a[1]);return s&&o?{h:s,w:o}:(x(t,"Malformed extent values (ignoring)"),null)}(e,t);null===o?this.pxDimensions={h:480,w:640}:("px"===o.h.unit&&"px"===o.w.unit||j(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:o.h.value,w:o.w.value})},s.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=F(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var n=F(this.events,e.end);n.found||this.events.splice(n.index,0,e.end)}}},s.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},s.prototype.getMediaTimeEvents=function(){return this.events},c.prototype.initFromNode=function(e,t){this.id=L(e),this.styleAttrs=D(e,t),this.styleRefs=C(e)},h.prototype.initFromNode=function(e,t,n,r){this.id=L(n)},p.prototype.initFromNode=function(e,t,n,r){this.regionID=function(e){return e&&"region"in e.attributes?e.attributes.region.value:""}(n)},m.prototype.initFromNode=function(e,t,n,r){this.styleAttrs=D(n,r),null!==e.head&&null!==e.head.styling&&O(e.head.styling,C(n),this.styleAttrs,r)},g.prototype.initFromNode=function(e,t,n,r){this.sets=[]},v.prototype.initFromNode=function(e,t,n,r){this.contents=[]},y.prototype.initFromNode=function(e,t,n,r){var i=function(e,t,n,r){var i=null;n&&"begin"in n.attributes&&null===(i=P(e.tickRate,e.effectiveFrameRate,n.attributes.begin.value))&&x(r,"Malformed begin value "+n.attributes.begin.value+" (using 0)");var a=null;n&&"dur"in n.attributes&&null===(a=P(e.tickRate,e.effectiveFrameRate,n.attributes.dur.value))&&x(r,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var o=null;return n&&"end"in n.attributes&&null===(o=P(e.tickRate,e.effectiveFrameRate,n.attributes.end.value))&&x(r,"Malformed end value (ignoring)"),{explicit_begin:i,explicit_end:o,explicit_dur:a}}(e,0,n,r);this.explicit_begin=i.explicit_begin,this.explicit_end=i.explicit_end,this.explicit_dur=i.explicit_dur,this.timeContainer=function(e,t){var n=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return n&&"par"!==n?"seq"===n?"seq":(N(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,r)},_.prototype.initFromNode=function(e,t,n){m.prototype.initFromNode.call(this,e,null,t,n),y.prototype.initFromNode.call(this,e,null,t,n),g.prototype.initFromNode.call(this,e,null,t,n),p.prototype.initFromNode.call(this,e,null,t,n),v.prototype.initFromNode.call(this,e,null,t,n)},b.prototype.initFromNode=function(e,t,n,r){m.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r),p.prototype.initFromNode.call(this,e,t,n,r),v.prototype.initFromNode.call(this,e,t,n,r)},T.prototype.initFromNode=function(e,t,n,r){m.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r),p.prototype.initFromNode.call(this,e,t,n,r),v.prototype.initFromNode.call(this,e,t,n,r)},E.prototype.initFromNode=function(e,t,n,r,i){m.prototype.initFromNode.call(this,e,t,n,i),y.prototype.initFromNode.call(this,e,t,n,i),g.prototype.initFromNode.call(this,e,t,n,i),p.prototype.initFromNode.call(this,e,t,n,i),v.prototype.initFromNode.call(this,e,t,n,i),this.space=r},S.prototype.initFromText=function(e,t,n,r,i){y.prototype.initFromNode.call(this,e,t,null,i),this.text=n,this.space=r},w.prototype.initFromNode=function(e,t,n,r){p.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r)},A.prototype.createDefaultRegion=function(){var e=new A;return h.call(e,""),m.call(e,{}),g.call(e,[]),y.call(e,0,Number.POSITIVE_INFINITY,null),e},A.prototype.initFromNode=function(e,t,n){h.prototype.initFromNode.call(this,e,null,t,n),m.prototype.initFromNode.call(this,e,null,t,n),y.prototype.initFromNode.call(this,e,null,t,n),g.prototype.initFromNode.call(this,e,null,t,n),null!==e.head&&null!==e.head.styling&&O(e.head.styling,C(t),this.styleAttrs,n)},M.prototype.initFromNode=function(e,t,n,r){y.prototype.initFromNode.call(this,e,t,n,r);var i=D(n,r);for(var a in this.qname=null,this.value=null,i){if(this.qname){N(r,"More than one style specified on set");break}this.qname=a,this.value=i[a]}}}(t,"undefined"==typeof sax?n("./node_modules/sax/lib/sax.js"):sax,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?n("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?n("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/html.js":function(e,t,n){!function(e,t,n){function r(e,t,s){var l;if("region"===s.kind?(l=document.createElement("div")).style.position="absolute":"body"===s.kind?l=document.createElement("div"):"div"===s.kind?l=document.createElement("div"):"p"===s.kind?l=document.createElement("p"):"span"===s.kind?l=document.createElement("span"):"br"===s.kind&&(l=document.createElement("br")),l){for(var c in l.style.margin="0",u){var d=u[c],f=s.styleAttrs[d.qname];void 0!==f&&null!==d.map&&d.map(e,l,s,f)}var h=l;if("region"===s.kind){var p=s.styleAttrs[n.byName.writingMode.qname];"lrtb"===p||"lr"===p?(e.ipd="lr",e.bpd="tb"):"rltb"===p||"rl"===p?(e.ipd="rl",e.bpd="tb"):"tblr"===p?(e.ipd="tb",e.bpd="lr"):"tbrl"!==p&&"tb"!==p||(e.ipd="tb",e.bpd="rl")}var m=s.styleAttrs[n.byName.linePadding.qname];if(m&&m>0){var g=Math.ceil(m*e.h)+"px";"tb"===e.bpd?(h.style.paddingLeft=g,h.style.paddingRight=g):(h.style.paddingTop=g,h.style.paddingBottom=g),e.lp=m}var v=s.styleAttrs[n.byName.multiRowAlign.qname];if(v&&"auto"!==v){var y=document.createElement("span");y.style.display="inline-block",y.style.textAlign=v,l.appendChild(y),h=y,e.mra=v}if(s.styleAttrs[n.byName.fillLineGap.qname]&&(e.flg=!0),"span"===s.kind&&s.text)if(e.lp||e.mra||e.flg)for(var _="",b=0;b<s.text.length;b++){_+=s.text.charAt(b);var T=s.text.charCodeAt(b);if(T<55296||T>56319||b===s.text.length){var E=document.createElement("span");E.textContent=_,l.appendChild(E),_=""}}else l.textContent=s.text;for(var S in t.appendChild(l),s.contents)r(e,h,s.contents[S]);var w=[];if((e.lp||e.mra||e.flg)&&"p"===s.kind&&(o(e,h,w,null),e.mra&&(function(e){for(var t=0;t<e.length-1;t++){var n=e[t].elements.length;if(0!==n&&!1===e[t].br){var r=document.createElement("br"),i=e[t].elements[n-1].node;i.parentElement.insertBefore(r,i.nextSibling)}}}(w),e.mra=null),e.lp&&(function(e,t,n){for(var r in e){var i=e[r].elements.length,a=e[r].elements[e[r].start_elem],o=e[r].elements[e[r].end_elem],s=Math.ceil(t)+"px",u="-"+Math.ceil(t)+"px";0!==i&&("lr"===n.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=s,a.node.style.marginLeft=u):"rl"===n.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=s,a.node.style.marginRight=u):"tb"===n.ipd&&(a.node.style.borderTopColor=a.bgcolor||"#00000000",a.node.style.borderTopStyle="solid",a.node.style.borderTopWidth=s,a.node.style.marginTop=u),"lr"===n.ipd?(o.node.style.borderRightColor=o.bgcolor||"#00000000",o.node.style.borderRightStyle="solid",o.node.style.borderRightWidth=s,o.node.style.marginRight=u):"rl"===n.ipd?(o.node.style.borderLeftColor=o.bgcolor||"#00000000",o.node.style.borderLeftStyle="solid",o.node.style.borderLeftWidth=s,o.node.style.marginLeft=u):"tb"===n.ipd&&(o.node.style.borderBottomColor=o.bgcolor||"#00000000",o.node.style.borderBottomStyle="solid",o.node.style.borderBottomWidth=s,o.node.style.marginBottom=u))}}(w,e.lp*e.h,e),e.lp=null),e.flg)){var A=a(h.getBoundingClientRect(),e);!function(e,t,n,r){for(var i=Math.sign(n-t),a=0;a<=e.length;a++){var o,s,u;if(o=0===a?t:a===e.length?n:(e[a].before+e[a-1].after)/2,a>0)for(var l=0;l<e[a-1].elements.length;l++)null!==e[a-1].elements[l].bgcolor&&(u=e[a-1].elements[l],i*(u.after-o)<0&&(s=Math.ceil(Math.abs(o-u.after))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingRight=s:"rl"===r.bpd?u.node.style.paddingLeft=s:"tb"===r.bpd&&(u.node.style.paddingBottom=s)));if(a<e.length)for(var c=0;c<e[a].elements.length;c++)null!==(u=e[a].elements[c]).bgcolor&&i*(u.before-o)>0&&(s=Math.ceil(Math.abs(u.before-o))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingLeft=s:"rl"===r.bpd?u.node.style.paddingRight=s:"tb"===r.bpd&&(u.node.style.paddingTop=s))}}(w,A.before,A.after,e),e.flg=null}if("region"===s.kind&&(o(e,h,w),"tb"===e.bpd&&e.enableRollUp&&s.contents.length>0&&"after"===s.styleAttrs[n.byName.displayAlign.qname])){var M=new i(""===s.id?"_":s.id,w);if(e.currentISDState[M.id]=M,e.previousISDState&&M.id in e.previousISDState&&e.previousISDState[M.id].plist.length>0&&M.plist.length>1&&M.plist[M.plist.length-2].text===e.previousISDState[M.id].plist[e.previousISDState[M.id].plist.length-1].text){var L=l.firstElementChild,C=M.plist[M.plist.length-1].after-M.plist[M.plist.length-1].before;L.style.bottom="-"+C+"px",L.style.transition="transform 0.4s",L.style.position="relative",L.style.transform="translateY(-"+C+"px)"}}}else!function(e,t){if(e&&e.error&&e.error(t))throw t}(e.errorHandler,"Error processing ISD element kind: "+s.kind)}function i(e,t){this.id=e,this.plist=t}function a(e,t){var n={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function o(e,t,n,r){var i,s,u,l,c=t.style.backgroundColor||r;if(0===t.childElementCount)if("span"===t.localName){var d=t.getBoundingClientRect();if(0===d.height||0===d.width)return;var f=a(d,e);if(0!==n.length&&(i=f.before,s=f.after,u=n[n.length-1].before,l=n[n.length-1].after,s<l&&i>u||l<=s&&u>=i)){var h=Math.sign(f.after-f.before),p=Math.sign(f.end-f.start);h*(f.before-n[n.length-1].before)<0&&(n[n.length-1].before=f.before),h*(f.after-n[n.length-1].after)>0&&(n[n.length-1].after=f.after),p*(f.start-n[n.length-1].start)<0&&(n[n.length-1].start=f.start,n[n.length-1].start_elem=n[n.length-1].elements.length),p*(f.end-n[n.length-1].end)>0&&(n[n.length-1].end=f.end,n[n.length-1].end_elem=n[n.length-1].elements.length)}else n.push({before:f.before,after:f.after,start:f.start,end:f.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1});n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:c,before:f.before,after:f.after})}else"br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var m=t.firstChild;m;)m.nodeType===Node.ELEMENT_NODE&&o(e,m,n,c),m=m.nextSibling}function s(e,t){this.qname=e,this.map=t}e.render=function(e,t,n,i,a,o,s,u,l){var c=i||t.clientHeight,d=a||t.clientWidth;if(null!==e.aspectRatio){var f=c*e.aspectRatio;f>d?c=Math.round(d/e.aspectRatio):d=f}var h=document.createElement("div");h.style.position="relative",h.style.width=d+"px",h.style.height=c+"px",h.style.margin="auto",h.style.top=0,h.style.bottom=0,h.style.left=0,h.style.right=0,h.style.zIndex=0;var p={h:c,w:d,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:o||!1,isd:e,errorHandler:s,previousISDState:u,enableRollUp:l||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(var m in t.appendChild(h),e.contents)r(p,h,e.contents[m]);return p.currentISDState};var u=[new s("http://www.w3.org/ns/ttml#styling backgroundColor",(function(e,t,n,r){0!==r[3]&&(t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")})),new s("http://www.w3.org/ns/ttml#styling color",(function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"})),new s("http://www.w3.org/ns/ttml#styling direction",(function(e,t,n,r){t.style.direction=r})),new s("http://www.w3.org/ns/ttml#styling display",(function(e,t,n,r){})),new s("http://www.w3.org/ns/ttml#styling displayAlign",(function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end")})),new s("http://www.w3.org/ns/ttml#styling extent",(function(e,t,n,r){e.regionH=r.h*e.h,e.regionW=r.w*e.w;var i=0,a=0,o=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];o&&(i=(o[0]+o[2])*e.h,a=(o[1]+o[3])*e.w),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-a+"px"})),new s("http://www.w3.org/ns/ttml#styling fontFamily",(function(e,t,n,r){var i=[];for(var a in r)"monospaceSerif"===r[a]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[a]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[a]?i.push("monospace"):"sansSerif"===r[a]?i.push("sans-serif"):"serif"===r[a]?i.push("serif"):"monospaceSansSerif"===r[a]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[a]?i.push("serif"):i.push(r[a]);t.style.fontFamily=i.join(",")})),new s("http://www.w3.org/ns/ttml#styling fontSize",(function(e,t,n,r){t.style.fontSize=r*e.h+"px"})),new s("http://www.w3.org/ns/ttml#styling fontStyle",(function(e,t,n,r){t.style.fontStyle=r})),new s("http://www.w3.org/ns/ttml#styling fontWeight",(function(e,t,n,r){t.style.fontWeight=r})),new s("http://www.w3.org/ns/ttml#styling lineHeight",(function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r*e.h+"px"})),new s("http://www.w3.org/ns/ttml#styling opacity",(function(e,t,n,r){t.style.opacity=r})),new s("http://www.w3.org/ns/ttml#styling origin",(function(e,t,n,r){t.style.top=r.h*e.h+"px",t.style.left=r.w*e.w+"px"})),new s("http://www.w3.org/ns/ttml#styling overflow",(function(e,t,n,r){t.style.overflow=r})),new s("http://www.w3.org/ns/ttml#styling padding",(function(e,t,n,r){var i=[];i[0]=r[0]*e.h+"px",i[1]=r[3]*e.w+"px",i[2]=r[2]*e.h+"px",i[3]=r[1]*e.w+"px",t.style.padding=i.join(" ")})),new s("http://www.w3.org/ns/ttml#styling showBackground",null),new s("http://www.w3.org/ns/ttml#styling textAlign",(function(e,t,r,i){var a,o=r.styleAttrs[n.byName.direction.qname];a="start"===i?"rtl"===o?"right":"left":"end"===i?"rtl"===o?"left":"right":i,t.style.textAlign=a})),new s("http://www.w3.org/ns/ttml#styling textDecoration",(function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through")})),new s("http://www.w3.org/ns/ttml#styling textOutline",(function(e,t,n,r){t.style.textShadow="none"===r?"":"rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness*e.h+"px"})),new s("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(e,t,n,r){var i;i="bidiOverride"===r?"bidi-override":r,t.style.unicodeBidi=i})),new s("http://www.w3.org/ns/ttml#styling visibility",(function(e,t,n,r){t.style.visibility=r})),new s("http://www.w3.org/ns/ttml#styling wrapOption",(function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"})),new s("http://www.w3.org/ns/ttml#styling writingMode",(function(e,t,n,r){"lrtb"===r||"lr"===r?t.style.writingMode="horizontal-tb":"rltb"===r||"rl"===r?t.style.writingMode="horizontal-tb":"tblr"===r?t.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.style.writingMode="vertical-rl")})),new s("http://www.w3.org/ns/ttml#styling zIndex",(function(e,t,n,r){t.style.zIndex=r})),new s("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",(function(e,t,n,r){if(null!==e.imgResolver&&null!==r){var i=document.createElement("img"),a=e.imgResolver(r,i);a&&(i.src=a),i.height=e.regionH,i.width=e.regionW,t.appendChild(i)}})),new s("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden")}))],l={};for(var c in u)l[u[c].qname]=u[c]}(t,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?n("./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/isd.js":function(e,t,n){!function(e,t,n){function r(e,t,i,s,u,l,c,d,f){if(t<c.begin||t>=c.end)return null;var h="regionID"in c&&""!==c.regionID?c.regionID:l;if(null!==u&&h!==i.id&&(!("contents"in c)||"contents"in c&&0===c.contents.length||""!==h))return null;var p=new a(c);for(var m in c.sets)t<c.sets[m].begin||t>=c.sets[m].end||(p.styleAttrs[c.sets[m].qname]=c.sets[m].value);var g,v={};for(var y in p.styleAttrs)if(v[y]=!0,y===n.byName.writingMode.qname&&!(n.byName.direction.qname in p.styleAttrs)){var _=p.styleAttrs[y];"lrtb"===_||"lr"===_?p.styleAttrs[n.byName.direction.qname]="ltr":"rltb"!==_&&"rl"!==_||(p.styleAttrs[n.byName.direction.qname]="rtl")}if(null!==u)for(var b in n.all){var T=n.all[b];if(T.qname===n.byName.textDecoration.qname){var E=u.styleAttrs[T.qname],S=p.styleAttrs[T.qname],w=[];void 0===S?w=E:-1===S.indexOf("none")?((-1===S.indexOf("noUnderline")&&-1!==E.indexOf("underline")||-1!==S.indexOf("underline"))&&w.push("underline"),(-1===S.indexOf("noLineThrough")&&-1!==E.indexOf("lineThrough")||-1!==S.indexOf("lineThrough"))&&w.push("lineThrough"),(-1===S.indexOf("noOverline")&&-1!==E.indexOf("overline")||-1!==S.indexOf("overline"))&&w.push("overline")):w.push("none"),p.styleAttrs[T.qname]=w}else T.inherit&&T.qname in u.styleAttrs&&!(T.qname in p.styleAttrs)&&(p.styleAttrs[T.qname]=u.styleAttrs[T.qname])}for(var A in n.all){var M=n.all[A];M.qname in p.styleAttrs||("region"===p.kind||!1===M.inherit&&null!==M.initial)&&(p.styleAttrs[M.qname]=M.parse(M.initial),v[M.qname]=!0)}for(var L in n.all){var C=n.all[L];if(C.qname in v&&null!==C.compute){var D=C.compute(e,u,p,p.styleAttrs[C.qname],f);null!==D?p.styleAttrs[C.qname]=D:o(d,"Style '"+C.qname+"' on element '"+p.kind+"' cannot be computed")}}if("none"===p.styleAttrs[n.byName.display.qname])return null;for(var k in null===u?g=null===s?[]:[s]:"contents"in c&&(g=c.contents),g){var P=r(e,t,i,s,p,h,g[k],d,f);null!==P&&p.contents.push(P.element)}for(var I in p.styleAttrs)-1===n.byQName[I].applies.indexOf(p.kind)&&delete p.styleAttrs[I];if("span"===p.kind&&p.text&&"default"===p.space){var O=p.text.replace(/\s+/g," ");p.text=O}if("p"===p.kind){var R=[];!function e(t,n){if("contents"in t)for(var r in t.contents)e(t.contents[r],n);else n.push(t)}(p,R);for(var x=0,N="after_br",j=0;;)if("after_br"===N)x>=R.length||"br"===R[x].kind?(N="before_br",j=x,x--):("preserve"!==R[x].space&&(R[x].text=R[x].text.replace(/^\s+/g,"")),R[x].text.length>0?(N="looking_br",x++):R.splice(x,1));else if("before_br"===N)if(x<0||"br"===R[x].kind){if(N="after_br",(x=j+1)>=R.length)break}else if("preserve"!==R[x].space&&(R[x].text=R[x].text.replace(/\s+$/g,"")),R[x].text.length>0){if(N="after_br",(x=j+1)>=R.length)break}else R.splice(x,1),x--;else x>=R.length||"br"===R[x].kind?(N="before_br",j=x,x--):x++;!function e(t){if("br"===t.kind)return!1;if("text"in t)return 0===t.text.length;if("contents"in t){for(var n=t.contents.length;n--;)e(t.contents[n])&&t.contents.splice(n,1);return 0===t.contents.length}}(p)}return"div"===p.kind&&n.byName.backgroundImage.qname in p.styleAttrs||"br"===p.kind||"contents"in p&&p.contents.length>0||"span"===p.kind&&null!==p.text||"region"===p.kind&&"always"===p.styleAttrs[n.byName.showBackground.qname]?{region_id:h,element:p}:null}function i(e){this.contents=[],this.aspectRatio=e.aspectRatio}function a(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space)}function o(e,t){if(e&&e.error&&e.error(t))throw t}e.generateISD=function(e,t,n){var a=new i(e),o={};for(var s in e.head.layout.regions){var u=r(e,t,e.head.layout.regions[s],e.body,null,"",e.head.layout.regions[s],n,o);null!==u&&a.contents.push(u.element)}return a}}(t,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?n("./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/main.js":function(e,t,n){t.generateISD=n("./node_modules/imsc/src/main/js/isd.js").generateISD,t.fromXML=n("./node_modules/imsc/src/main/js/doc.js").fromXML,t.renderHTML=n("./node_modules/imsc/src/main/js/html.js").render},"./node_modules/imsc/src/main/js/names.js":function(e,t,n){!function(e){e.ns_tt="http://www.w3.org/ns/ttml",e.ns_tts="http://www.w3.org/ns/ttml#styling",e.ns_ttp="http://www.w3.org/ns/ttml#parameter",e.ns_xml="http://www.w3.org/XML/1998/namespace",e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",e.ns_ebutts="urn:ebu:tt:style"}(t)},"./node_modules/imsc/src/main/js/styles.js":function(e,t,n){!function(e,t,n){function r(e,t,n,r,i,a,o,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=a,this.initial=n,this.applies=r,this.parse=o,this.compute=s}for(var i in e.all=[new r(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new r(t.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new r(t.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"displayAlign","before",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null}),(function(e,t,n,r,i){var a,o;if("auto"===r)a=1;else if("%"===r.h.unit)a=r.h.value/100;else{if("px"!==r.h.unit)return null;a=r.h.value/e.pxDimensions.h}if("auto"===r)o=1;else if("%"===r.w.unit)o=r.w.value/100;else{if("px"!==r.w.unit)return null;o=r.w.value/e.pxDimensions.w}return{h:a,w:o}})),new r(t.ns_tts,"fontFamily","default",["span"],!0,!0,(function(e){var t=e.split(","),n=[];for(var r in t)"'"!==t[r].charAt(0)&&'"'!==t[r].charAt(0)&&"default"===t[r]?n.push("monospaceSerif"):n.push(t[r]);return n}),null),new r(t.ns_tts,"fontSize","1c",["span"],!0,!0,n.parseLength,(function(t,n,r,i,a){var o;if("%"===i.unit)o=null!==n?n.styleAttrs[e.byName.fontSize.qname]*i.value/100:i.value/100/t.cellResolution.h;else if("em"===i.unit)o=null!==n?n.styleAttrs[e.byName.fontSize.qname]*i.value:i.value/t.cellResolution.h;else if("c"===i.unit)o=i.value/t.cellResolution.h;else{if("px"!==i.unit)return null;o=i.value/t.pxDimensions.h}return o})),new r(t.ns_tts,"fontStyle","normal",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"fontWeight","normal",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(e){return"normal"===e?e:n.parseLength(e)}),(function(t,n,r,i,a){var o;if("normal"===i)o=i;else if("%"===i.unit)o=r.styleAttrs[e.byName.fontSize.qname]*i.value/100;else if("em"===i.unit)o=r.styleAttrs[e.byName.fontSize.qname]*i.value;else if("c"===i.unit)o=i.value/t.cellResolution.h;else{if("px"!==i.unit)return null;o=i.value/t.pxDimensions.h}return o})),new r(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new r(t.ns_tts,"origin","auto",["region"],!1,!0,(function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null}),(function(e,t,n,r,i){var a,o;if("auto"===r)a=0;else if("%"===r.h.unit)a=r.h.value/100;else{if("px"!==r.h.unit)return null;a=r.h.value/e.pxDimensions.h}if("auto"===r)o=0;else if("%"===r.w.unit)o=r.w.value/100;else{if("px"!==r.w.unit)return null;o=r.w.value/e.pxDimensions.w}return{h:a,w:o}})),new r(t.ns_tts,"overflow","hidden",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"padding","0px",["region"],!1,!0,(function(e){var t=e.split(" ");if(t.length>4)return null;var r=[];for(var i in t){var a=n.parseLength(t[i]);if(!a)return null;r.push(a)}return r}),(function(t,n,r,i,a){var o;if(1===i.length)o=[i[0],i[0],i[0],i[0]];else if(2===i.length)o=[i[0],i[1],i[0],i[1]];else if(3===i.length)o=[i[0],i[1],i[2],i[1]];else{if(4!==i.length)return null;o=[i[0],i[1],i[2],i[3]]}var s=r.styleAttrs[e.byName.writingMode.qname];if("lrtb"===s||"lr"===s)o=[o[0],o[3],o[2],o[1]];else if("rltb"===s||"rl"===s)o=[o[0],o[1],o[2],o[3]];else if("tblr"===s)o=[o[3],o[0],o[1],o[2]];else{if("tbrl"!==s&&"tb"!==s)return null;o=[o[3],o[2],o[1],o[0]]}var u=[];for(var l in o)if(0===o[l].value)u[l]=0;else if("%"===o[l].unit)u[l]="0"===l||"2"===l?r.styleAttrs[e.byName.extent.qname].h*o[l].value/100:r.styleAttrs[e.byName.extent.qname].w*o[l].value/100;else if("em"===o[l].unit)u[l]=r.styleAttrs[e.byName.fontSize.qname]*o[l].value;else if("c"===o[l].unit)u[l]=o[l].value/t.cellResolution.h;else{if("px"!==o[l].unit)return null;u[l]="0"===l||"2"===l?o[l].value/t.pxDimensions.h:o[l].value/t.pxDimensions.w}return u})),new r(t.ns_tts,"showBackground","always",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"textAlign","start",["p"],!0,!0,(function(e){return e}),(function(e,t,n,r,i){return"left"===r?"start":"right"===r?"end":r})),new r(t.ns_tts,"textDecoration","none",["span"],!0,!0,(function(e){return e.split(" ")}),null),new r(t.ns_tts,"textOutline","none",["span"],!0,!0,(function(e){if("none"===e)return e;var t={},r=e.split(" ");if(0===r.length||r.length>2)return null;var i=n.parseColor(r[0]);if(t.color=i,null!==i&&r.shift(),1!==r.length)return null;var a=n.parseLength(r[0]);return a?(t.thickness=a,t):null}),(function(t,n,r,i,a){if("none"===i)return i;var o={};if(null===i.color?o.color=r.styleAttrs[e.byName.color.qname]:o.color=i.color,"%"===i.thickness.unit)o.thickness=r.styleAttrs[e.byName.fontSize.qname]*i.thickness.value/100;else if("em"===i.thickness.unit)o.thickness=r.styleAttrs[e.byName.fontSize.qname]*i.thickness.value;else if("c"===i.thickness.unit)o.thickness=i.thickness.value/t.cellResolution.h;else{if("px"!==i.thickness.unit)return null;o.thickness=i.thickness.value/t.pxDimensions.h}return o})),new r(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"zIndex","auto",["region"],!1,!0,(function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t}),null),new r(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,(function(e,t,n,r,i){return"c"===r.unit?r.value/e.cellResolution.h:null})),new r(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(e){return e}),null),new r(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(e){return e}),null),new r(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(e){return"true"===e}),null),new r(t.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(e){return"true"===e}),null)],e.byQName={},e.all)e.byQName[e.all[i].qname]=e.all[i];for(var a in e.byName={},e.all)e.byName[e.all[a].name]=e.all[a]}(t,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscUtils?n("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/utils.js":function(e,t,n){!function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var a,o=null,s=i[e.toLowerCase()];return void 0!==s?o=s:null!==(a=t.exec(e))?o=[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),void 0!==a[4]?parseInt(a[4],16):255]:null!==(a=n.exec(e))?o=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),255]:null!==(a=r.exec(e))&&(o=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),parseInt(a[4])]),o};var a=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t,n=null;return null!==(t=a.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n}}(t)},"./node_modules/inherits/inherits_browser.js":function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},"./node_modules/isarray/index.js":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"./node_modules/node-libs-browser/node_modules/buffer/index.js":function(e,t,n){"use strict";(function(e){var r=n("./node_modules/base64-js/index.js"),i=n("./node_modules/ieee754/index.js"),a=n("./node_modules/isarray/index.js");function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=s(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var d=!0,f=0;f<u;f++)if(l(e,a+f)!==l(t,f)){d=!1;break}if(d)return a}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function b(e,t,n,r){return H(B(t,e.length-n),e,n,r)}function T(e,t,n,r){return H(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return T(e,t,n,r)}function S(e,t,n,r){return H(Y(t),e,n,r)}function w(e,t,n,r){return H(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,l=e[i],c=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=L)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=L));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=e.slice(t,n),d=0;d<s;++d)if(l[d]!==c[d]){a=l[d],o=c[d];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function k(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var a="",o=t;o<n;++o)a+=(r=e[o])<16?"0"+r.toString(16):r.toString(16);return a}function P(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function x(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function N(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,a){return a||N(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,a){return a||N(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||I(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):x(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):x(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=u.isBuffer(e)?e:B(new u(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function Y(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/node-libs-browser/node_modules/events/events.js":function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}v(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&v(e,"error",t,n)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,a,o,s;if(l(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,s=u,console&&console.warn&&console.warn(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)a(u,this,t);else{var l=u.length,c=g(u,l);for(n=0;n<l;++n)a(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if(l(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"./node_modules/node-libs-browser/node_modules/timers-browserify/main.js":function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("./node_modules/setimmediate/setImmediate.js"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/path-browserify/index.js":function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o=a>=0?arguments[a]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,i="/"===o.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var a=t.isAbsolute(e),o="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!a).join("/"))||a||(e="."),e&&o&&(e+="/"),(a?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),a=r(n.split("/")),o=Math.min(i.length,a.length),s=o,u=0;u<o;u++)if(i[u]!==a[u]){s=u;break}var l=[];for(u=s;u<i.length;u++)l.push("..");return(l=l.concat(a.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,a=0,o=e.length-1;o>=0;--o){var s=e.charCodeAt(o);if(47!==s)-1===r&&(i=!1,r=o+1),46===s?-1===t?t=o:1!==a&&(a=1):-1!==t&&(a=-1);else if(!i){n=o+1;break}}return-1===t||-1===r||0===a||1===a&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/process-nextick-args/index.js":function(e,t,n){"use strict";(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick((function(){e.apply(null,a)}))}}}:e.exports=t}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/process/browser.js":function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,l=[],c=!1,d=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=s(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++d<t;)u&&u[d].run();d=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/readable-stream/duplex-browser.js":function(e,t,n){e.exports=n("./node_modules/readable-stream/lib/_stream_duplex.js")},"./node_modules/readable-stream/lib/_stream_duplex.js":function(e,t,n){"use strict";var r=n("./node_modules/process-nextick-args/index.js"),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=d;var a=n("./node_modules/core-util-is/lib/util.js");a.inherits=n("./node_modules/inherits/inherits_browser.js");var o=n("./node_modules/readable-stream/lib/_stream_readable.js"),s=n("./node_modules/readable-stream/lib/_stream_writable.js");a.inherits(d,o);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];d.prototype[c]||(d.prototype[c]=s.prototype[c])}function d(e){if(!(this instanceof d))return new d(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},"./node_modules/readable-stream/lib/_stream_passthrough.js":function(e,t,n){"use strict";e.exports=a;var r=n("./node_modules/readable-stream/lib/_stream_transform.js"),i=n("./node_modules/core-util-is/lib/util.js");function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}i.inherits=n("./node_modules/inherits/inherits_browser.js"),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},"./node_modules/readable-stream/lib/_stream_readable.js":function(e,t,n){"use strict";(function(t,r){var i=n("./node_modules/process-nextick-args/index.js");e.exports=_;var a,o=n("./node_modules/isarray/index.js");_.ReadableState=y,n("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter;var s=function(e,t){return e.listeners(t).length},u=n("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),l=n("./node_modules/safe-buffer/index.js").Buffer,c=t.Uint8Array||function(){},d=n("./node_modules/core-util-is/lib/util.js");d.inherits=n("./node_modules/inherits/inherits_browser.js");var f=n(0),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var p,m=n("./node_modules/readable-stream/lib/internal/streams/BufferList.js"),g=n("./node_modules/readable-stream/lib/internal/streams/destroy.js");d.inherits(_,u);var v=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var r=t instanceof(a=a||n("./node_modules/readable-stream/lib/_stream_duplex.js"));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function _(e){if(a=a||n("./node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof _))return new _(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function b(e,t,n,r,i){var a,o=e._readableState;return null===t?(o.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,w(e)}}(e,o)):(i||(a=function(e,t){var n,r;return r=t,l.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):T(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?T(e,o,t,!1):M(e,o)):T(e,o,t,!1))):r||(o.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function T(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&w(e)),M(e,t)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=g.destroy,_.prototype._undestroy=g.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),b(this,e,t,!1,n)},_.prototype.unshift=function(e){return b(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return p||(p=n("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var E=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=E?e=E:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function w(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(A,e):A(e))}function A(e){h("emit readable"),e.emit("readable"),k(e)}function M(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(L,e,t))}function L(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function C(e){h("readable nexttick read 0"),e.read(0)}function D(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),k(e),t.flowing&&!t.reading&&e.read(0)}function k(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0==(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0==(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++i}return t.length-=i,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function I(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function R(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):w(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&I(this),null;var r,i=t.needReadable;return h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",i=!0),t.ended||t.reading?h("reading or ended",i=!1):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(n,t))),null===(r=e>0?P(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&I(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,h("pipe count=%d opts=%j",a.pipesCount,t);var u=t&&!1===t.end||e===r.stdout||e===r.stderr?_:c;function l(t,r){h("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,h("cleanup"),e.removeListener("close",v),e.removeListener("finish",y),e.removeListener("drain",d),e.removeListener("error",g),e.removeListener("unpipe",l),n.removeListener("end",c),n.removeListener("end",_),n.removeListener("data",m),f=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function c(){h("onend"),e.end()}a.endEmitted?i.nextTick(u):n.once("end",u),e.on("unpipe",l);var d=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,k(e))}}(n);e.on("drain",d);var f=!1,p=!1;function m(t){h("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==R(a.pipes,e))&&!f&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function g(t){h("onerror",t),_(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",y),_()}function y(){h("onfinish"),e.removeListener("close",v),_()}function _(){h("unpipe"),n.unpipe(e)}return n.on("data",m),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",g),e.once("close",v),e.once("finish",y),e.emit("pipe",n),a.flowing||(h("pipe resume"),n.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=R(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},_.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&w(this):i.nextTick(C,this))}return n},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(D,e,t))}(this,e)),this},_.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(h("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){h("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<v.length;a++)e.on(v[a],this.emit.bind(this,v[a]));return this._read=function(t){h("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=P}).call(this,n("./node_modules/webpack/buildin/global.js"),n("./node_modules/process/browser.js"))},"./node_modules/readable-stream/lib/_stream_transform.js":function(e,t,n){"use strict";e.exports=o;var r=n("./node_modules/readable-stream/lib/_stream_duplex.js"),i=n("./node_modules/core-util-is/lib/util.js");function a(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){u(e,t,n)})):u(this,null,null)}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n("./node_modules/inherits/inherits_browser.js"),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},"./node_modules/readable-stream/lib/_stream_writable.js":function(e,t,n){"use strict";(function(t,r,i){var a=n("./node_modules/process-nextick-args/index.js");function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var s,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:a.nextTick;y.WritableState=v;var l=n("./node_modules/core-util-is/lib/util.js");l.inherits=n("./node_modules/inherits/inherits_browser.js");var c,d={deprecate:n("./node_modules/util-deprecate/browser.js")},f=n("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),h=n("./node_modules/safe-buffer/index.js").Buffer,p=i.Uint8Array||function(){},m=n("./node_modules/readable-stream/lib/internal/streams/destroy.js");function g(){}function v(e,t){s=s||n("./node_modules/readable-stream/lib/_stream_duplex.js"),e=e||{};var r=t instanceof s;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,l=e.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(a.nextTick(i,r),a.nextTick(w,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),w(e,t))}(e,n,r,t,i);else{var o=E(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),r?u(b,e,n,o,i):b(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(e){if(s=s||n("./node_modules/readable-stream/lib/_stream_duplex.js"),!(c.call(y,this)||this instanceof s))return new y(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function _(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function b(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),w(e,t)}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,_(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,d=n.callback;if(_(e,t,!1,t.objectMode?1:l.length,l,c,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),w(e,t)}))}function w(e,t){var n=E(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}l.inherits(y,f),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===y&&e&&e._writableState instanceof v}})):c=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(r=e,h.isBuffer(r)||r instanceof p);return s&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=g),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),a.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),a.nextTick(r,o),i=!1),i}(this,i,e,n))&&(i.pendingcb++,o=function(e,t,n,r,i,a){if(!n){var o=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n)),t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,s,r,i,a);return u}(this,i,s,e,t,n)),o},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||T(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?a.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n("./node_modules/process/browser.js"),n("./node_modules/node-libs-browser/node_modules/timers-browserify/main.js").setImmediate,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/readable-stream/lib/internal/streams/BufferList.js":function(e,t,n){"use strict";var r=n("./node_modules/safe-buffer/index.js").Buffer,i=n(1);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,a=r.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=a,i=s,t.copy(n,i),s+=o.data.length,o=o.next;return a},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},"./node_modules/readable-stream/lib/internal/streams/destroy.js":function(e,t,n){"use strict";var r=n("./node_modules/process-nextick-args/index.js");function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"./node_modules/readable-stream/lib/internal/streams/stream-browser.js":function(e,t,n){e.exports=n("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter},"./node_modules/readable-stream/passthrough.js":function(e,t,n){e.exports=n("./node_modules/readable-stream/readable-browser.js").PassThrough},"./node_modules/readable-stream/readable-browser.js":function(e,t,n){(t=e.exports=n("./node_modules/readable-stream/lib/_stream_readable.js")).Stream=t,t.Readable=t,t.Writable=n("./node_modules/readable-stream/lib/_stream_writable.js"),t.Duplex=n("./node_modules/readable-stream/lib/_stream_duplex.js"),t.Transform=n("./node_modules/readable-stream/lib/_stream_transform.js"),t.PassThrough=n("./node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/readable-stream/transform.js":function(e,t,n){e.exports=n("./node_modules/readable-stream/readable-browser.js").Transform},"./node_modules/readable-stream/writable-browser.js":function(e,t,n){e.exports=n("./node_modules/readable-stream/lib/_stream_writable.js")},"./node_modules/safe-buffer/index.js":function(e,t,n){var r=n("./node_modules/node-libs-browser/node_modules/buffer/index.js"),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},"./node_modules/sax/lib/sax.js":function(e,t,n){(function(e){!function(t){t.parser=function(e,t){return new a(e,t)},t.SAXParser=a,t.SAXStream=s,t.createStream=function(e,t){return new s(e,t)},t.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(e,n){if(!(this instanceof a))return new a(e,n);!function(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""}(this),this.q=this.c="",this.bufferCheckPosition=t.MAX_BUFFER_LENGTH,this.opt=n||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!e,this.noscript=!(!e&&!this.opt.noscript),this.state=C.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(v)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),k(this,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),a.prototype={end:function(){x(this)},write:function(e){if(this.error)throw this.error;if(this.closed)return R(this,"Cannot write after close. Assign an onready handler.");if(null===e)return x(this);"object"==typeof e&&(e=e.toString());for(var n=0,r="";r=G(e,n++),this.c=r,r;)switch(this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++),this.state){case C.BEGIN:if(this.state=C.BEGIN_WHITESPACE,"\ufeff"===r)continue;V(this,r);continue;case C.BEGIN_WHITESPACE:V(this,r);continue;case C.TEXT:if(this.sawRoot&&!this.closedRoot){for(var a=n-1;r&&"<"!==r&&"&"!==r;)(r=G(e,n++))&&this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++);this.textNode+=e.substring(a,n-1)}"<"!==r||this.sawRoot&&this.closedRoot&&!this.strict?(!w(u,r)||this.sawRoot&&!this.closedRoot||N(this,"Text data outside of root node."),"&"===r?this.state=C.TEXT_ENTITY:this.textNode+=r):(this.state=C.OPEN_WAKA,this.startTagPosition=this.position);continue;case C.SCRIPT:"<"===r?this.state=C.SCRIPT_ENDING:this.script+=r;continue;case C.SCRIPT_ENDING:"/"===r?this.state=C.CLOSE_TAG:(this.script+="<"+r,this.state=C.SCRIPT);continue;case C.OPEN_WAKA:if("!"===r)this.state=C.SGML_DECL,this.sgmlDecl="";else if(S(u,r));else if(S(y,r))this.state=C.OPEN_TAG,this.tagName=r;else if("/"===r)this.state=C.CLOSE_TAG,this.tagName="";else if("?"===r)this.state=C.PROC_INST,this.procInstName=this.procInstBody="";else{if(N(this,"Unencoded <"),this.startTagPosition+1<this.position){var o=this.position-this.startTagPosition;r=new Array(o).join(" ")+r}this.textNode+="<"+r,this.state=C.TEXT}continue;case C.SGML_DECL:(this.sgmlDecl+r).toUpperCase()===h?(P(this,"onopencdata"),this.state=C.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+r==="--"?(this.state=C.COMMENT,this.comment="",this.sgmlDecl=""):(this.sgmlDecl+r).toUpperCase()===p?(this.state=C.DOCTYPE,(this.doctype||this.sawRoot)&&N(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===r?(P(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=C.TEXT):S(d,r)?(this.state=C.SGML_DECL_QUOTED,this.sgmlDecl+=r):this.sgmlDecl+=r;continue;case C.SGML_DECL_QUOTED:r===this.q&&(this.state=C.SGML_DECL,this.q=""),this.sgmlDecl+=r;continue;case C.DOCTYPE:">"===r?(this.state=C.TEXT,P(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=r,"["===r?this.state=C.DOCTYPE_DTD:S(d,r)&&(this.state=C.DOCTYPE_QUOTED,this.q=r));continue;case C.DOCTYPE_QUOTED:this.doctype+=r,r===this.q&&(this.q="",this.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:this.doctype+=r,"]"===r?this.state=C.DOCTYPE:S(d,r)&&(this.state=C.DOCTYPE_DTD_QUOTED,this.q=r);continue;case C.DOCTYPE_DTD_QUOTED:this.doctype+=r,r===this.q&&(this.state=C.DOCTYPE_DTD,this.q="");continue;case C.COMMENT:"-"===r?this.state=C.COMMENT_ENDING:this.comment+=r;continue;case C.COMMENT_ENDING:"-"===r?(this.state=C.COMMENT_ENDED,this.comment=O(this.opt,this.comment),this.comment&&P(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+r,this.state=C.COMMENT);continue;case C.COMMENT_ENDED:">"!==r?(N(this,"Malformed comment"),this.comment+="--"+r,this.state=C.COMMENT):this.state=C.TEXT;continue;case C.CDATA:"]"===r?this.state=C.CDATA_ENDING:this.cdata+=r;continue;case C.CDATA_ENDING:"]"===r?this.state=C.CDATA_ENDING_2:(this.cdata+="]"+r,this.state=C.CDATA);continue;case C.CDATA_ENDING_2:">"===r?(this.cdata&&P(this,"oncdata",this.cdata),P(this,"onclosecdata"),this.cdata="",this.state=C.TEXT):"]"===r?this.cdata+="]":(this.cdata+="]]"+r,this.state=C.CDATA);continue;case C.PROC_INST:"?"===r?this.state=C.PROC_INST_ENDING:S(u,r)?this.state=C.PROC_INST_BODY:this.procInstName+=r;continue;case C.PROC_INST_BODY:if(!this.procInstBody&&S(u,r))continue;"?"===r?this.state=C.PROC_INST_ENDING:this.procInstBody+=r;continue;case C.PROC_INST_ENDING:">"===r?(P(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=C.TEXT):(this.procInstBody+="?"+r,this.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:S(_,r)?this.tagName+=r:(j(this),">"===r?B(this):"/"===r?this.state=C.OPEN_TAG_SLASH:(w(u,r)&&N(this,"Invalid character in tag name"),this.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:">"===r?(B(this,!0),Y(this)):(N(this,"Forward-slash in opening tag not followed by >"),this.state=C.ATTRIB);continue;case C.ATTRIB:if(S(u,r))continue;">"===r?B(this):"/"===r?this.state=C.OPEN_TAG_SLASH:S(y,r)?(this.attribName=r,this.attribValue="",this.state=C.ATTRIB_NAME):N(this,"Invalid attribute name");continue;case C.ATTRIB_NAME:"="===r?this.state=C.ATTRIB_VALUE:">"===r?(N(this,"Attribute without value"),this.attribValue=this.attribName,U(this),B(this)):S(u,r)?this.state=C.ATTRIB_NAME_SAW_WHITE:S(_,r)?this.attribName+=r:N(this,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if("="===r)this.state=C.ATTRIB_VALUE;else{if(S(u,r))continue;N(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",P(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===r?B(this):S(y,r)?(this.attribName=r,this.state=C.ATTRIB_NAME):(N(this,"Invalid attribute name"),this.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(S(u,r))continue;S(d,r)?(this.q=r,this.state=C.ATTRIB_VALUE_QUOTED):(N(this,"Unquoted attribute value"),this.state=C.ATTRIB_VALUE_UNQUOTED,this.attribValue=r);continue;case C.ATTRIB_VALUE_QUOTED:if(r!==this.q){"&"===r?this.state=C.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=r;continue}U(this),this.q="",this.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:S(u,r)?this.state=C.ATTRIB:">"===r?B(this):"/"===r?this.state=C.OPEN_TAG_SLASH:S(y,r)?(N(this,"No whitespace between attributes"),this.attribName=r,this.attribValue="",this.state=C.ATTRIB_NAME):N(this,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(w(f,r)){"&"===r?this.state=C.ATTRIB_VALUE_ENTITY_U:this.attribValue+=r;continue}U(this),">"===r?B(this):this.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(this.tagName)">"===r?Y(this):S(_,r)?this.tagName+=r:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=C.SCRIPT):(w(u,r)&&N(this,"Invalid tagname in closing tag"),this.state=C.CLOSE_TAG_SAW_WHITE);else{if(S(u,r))continue;w(y,r)?this.script?(this.script+="</"+r,this.state=C.SCRIPT):N(this,"Invalid tagname in closing tag."):this.tagName=r}continue;case C.CLOSE_TAG_SAW_WHITE:if(S(u,r))continue;">"===r?Y(this):N(this,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:var s,l;switch(this.state){case C.TEXT_ENTITY:s=C.TEXT,l="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:s=C.ATTRIB_VALUE_QUOTED,l="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:s=C.ATTRIB_VALUE_UNQUOTED,l="attribValue"}";"===r?(this[l]+=H(this),this.entity="",this.state=s):S(this.entity.length?T:b,r)?this.entity+=r:(N(this,"Invalid character in entity name"),this[l]+="&"+this.entity+r,this.entity="",this.state=s);continue;default:throw new Error(this,"Unknown state: "+this.state)}return this.position>=this.bufferCheckPosition&&function(e){for(var n=Math.max(t.MAX_BUFFER_LENGTH,10),r=0,a=0,o=i.length;a<o;a++){var s=e[i[a]].length;if(s>n)switch(i[a]){case"textNode":I(e);break;case"cdata":P(e,"oncdata",e.cdata),e.cdata="";break;case"script":P(e,"onscript",e.script),e.script="";break;default:R(e,"Max buffer length exceeded: "+i[a])}r=Math.max(r,s)}var u=t.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=u+e.position}(this),this},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;I(e=this),""!==e.cdata&&(P(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(P(e,"onscript",e.script),e.script="")}};try{r=n("./node_modules/stream-browserify/index.js").Stream}catch(e){r=function(){}}var o=t.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function s(e,t){if(!(this instanceof s))return new s(e,t);r.apply(this),this._parser=new a(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,o.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})}))}s.prototype=Object.create(r.prototype,{constructor:{value:s}}),s.prototype.write=function(t){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var r=n("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;this._decoder=new r("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===o.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),r.prototype.on.call(n,e,t)};var u="\r\n\t ",l="0124356789",c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",d="'\"",f=u+">",h="[CDATA[",p="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",v={xml:m,xmlns:g};u=E(u),l=E(l),c=E(c);var y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function E(e){return e.split("").reduce((function(e,t){return e[t]=!0,e}),{})}function S(e,t){return function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}(e)?!!t.match(e):e[t]}function w(e,t){return!S(e,t)}d=E(d),f=E(f);var A,M,L,C=0;for(var D in t.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var n=t.ENTITIES[e],r="number"==typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=r})),t.STATE)t.STATE[t.STATE[D]]=D;function k(e,t,n){e[t]&&e[t](n)}function P(e,t,n){e.textNode&&I(e),k(e,t,n)}function I(e){e.textNode=O(e.opt,e.textNode),e.textNode&&k(e,"ontext",e.textNode),e.textNode=""}function O(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function R(e,t){return I(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,k(e,"onerror",t),e}function x(e){return e.sawRoot&&!e.closedRoot&&N(e,"Unclosed root tag"),e.state!==C.BEGIN&&e.state!==C.BEGIN_WHITESPACE&&e.state!==C.TEXT&&R(e,"Unexpected end"),I(e),e.c="",e.closed=!0,k(e,"onend"),a.call(e,e.strict,e.opt),e}function N(e,t){if("object"!=typeof e||!(e instanceof a))throw new Error("bad call to strictFail");e.strict&&R(e,t)}function j(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,P(e,"onopentagstart",n)}function F(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function U(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=F(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==m)N(e,"xml: prefix must be bound to "+m+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==g)N(e,"xmlns: prefix must be bound to "+g+"\nActual: "+e.attribValue);else{var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,P(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function B(e,t){if(e.opt.xmlns){var n=e.tag,r=F(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(N(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){P(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var a=0,o=e.attribList.length;a<o;a++){var s=e.attribList[a],u=s[0],l=s[1],c=F(u,!0),d=c.prefix,f=c.local,h=""===d?"":n.ns[d]||"",p={name:u,value:l,prefix:d,local:f,uri:h};d&&"xmlns"!==d&&!h&&(N(e,"Unbound namespace prefix: "+JSON.stringify(d)),p.uri=d),e.tag.attributes[u]=p,P(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),P(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=C.TEXT:e.state=C.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function Y(e){if(!e.tagName)return N(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=C.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=C.SCRIPT);P(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--&&e.tags[t].name!==r;)N(e,"Unexpected close tag");if(t<0)return N(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=C.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,P(e,"onclosetag",e.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var u=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==u.ns&&Object.keys(a.ns).forEach((function(t){var n=a.ns[t];P(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=C.TEXT}function H(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(N(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function V(e,t){"<"===t?(e.state=C.OPEN_WAKA,e.startTagPosition=e.position):w(u,t)&&(N(e,"Non-whitespace before first tag."),e.textNode=t,e.state=C.TEXT)}function G(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}C=t.STATE,String.fromCodePoint||(A=String.fromCharCode,M=Math.floor,L=function(){var e,t,n=16384,r=[],i=-1,a=arguments.length;if(!a)return"";for(var o="";++i<a;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||s>1114111||M(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?r.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,r.push(e,t)),(i+1===a||r.length>n)&&(o+=A.apply(null,r),r.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:L,configurable:!0,writable:!0}):String.fromCodePoint=L)}(t)}).call(this,n("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/setimmediate/setImmediate.js":function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,a,o,s,u=1,l={},c=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){a.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[u]=i,r(u),u++},f.clearImmediate=h}function h(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("./node_modules/webpack/buildin/global.js"),n("./node_modules/process/browser.js"))},"./node_modules/stream-browserify/index.js":function(e,t,n){e.exports=i;var r=n("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter;function i(){r.call(this)}n("./node_modules/inherits/inherits_browser.js")(i,r),i.Readable=n("./node_modules/readable-stream/readable-browser.js"),i.Writable=n("./node_modules/readable-stream/writable-browser.js"),i.Duplex=n("./node_modules/readable-stream/duplex-browser.js"),i.Transform=n("./node_modules/readable-stream/transform.js"),i.PassThrough=n("./node_modules/readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",u));var o=!1;function s(){o||(o=!0,e.end())}function u(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",i),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},"./node_modules/string_decoder/lib/string_decoder.js":function(e,t,n){"use strict";var r=n("./node_modules/safe-buffer/index.js").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=o(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=o(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},"./node_modules/util-deprecate/browser.js":function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./src/core/Debug.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),o=1,s=2,u=3,l=4,c=5;function d(e){e=e||{};var t,n,a,d,f=this.context,h=Object(r.default)(f).getInstance(),p=e.settings,m=[];function g(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[o,this].concat(t))}function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[s,this].concat(t))}function _(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[u,this].concat(t))}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[l,this].concat(t))}function T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[c,this].concat(t))}function E(e,t){var r="",o=null;n&&(o=(new Date).getTime(),r+="["+(o-d)+"]"),a&&t&&t.getClassName&&(r+="["+t.getClassName()+"]",t.getType&&(r+="["+t.getType()+"]")),r.length>0&&(r+=" ");for(var s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];Array.apply(null,u).forEach((function(e){r+=e+" "})),m[e]&&p.get().debug.logLevel>=e&&m[e](r),p&&p.get().debug.dispatchEvent&&h.trigger(i.default.LOG,{message:r,level:e})}return t={getLogger:function(e){return{fatal:v.bind(e),error:y.bind(e),warn:_.bind(e),info:b.bind(e),debug:T.bind(e)}},setLogTimestampVisible:function(e){n=e},setCalleeNameVisible:function(e){a=e}},n=!0,a=!0,d=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(m[o]=g(window.console.error),m[s]=g(window.console.error),m[u]=g(window.console.warn),m[l]=g(window.console.info),m[c]=g(window.console.debug)),t}d.__dashjs_factory_name="Debug";var f=a.default.getSingletonFactory(d);f.LOG_LEVEL_NONE=0,f.LOG_LEVEL_FATAL=o,f.LOG_LEVEL_ERROR=s,f.LOG_LEVEL_WARNING=u,f.LOG_LEVEL_INFO=l,f.LOG_LEVEL_DEBUG=c,a.default.updateSingletonFactory(d.__dashjs_factory_name,f),t.default=f},"./src/core/EventBus.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/MediaPlayerEvents.js"),a=0;function o(){var e={};function t(t,n,r){var i=-1;return e[t]?(e[t].some((function(e,t){if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0})),i):i}return{on:function(n,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!n)throw new Error("event type cannot be null or undefined");if(!r||"function"!=typeof r)throw new Error("listener must be a function: "+r);var s=o.priority||a;if(!(t(n,r,i)>=0)){e[n]=e[n]||[];var u={callback:r,scope:i,priority:s};i&&i.getStreamId&&(u.streamId=i.getStreamId()),i&&i.getType&&(u.mediaType=i.getType()),o&&o.mode&&(u.mode=o.mode),e[n].some((function(t,r){if(t&&s>t.priority)return e[n].splice(r,0,u),!0}))||e[n].push(u)}},off:function(n,r,i){if(n&&r&&e[n]){var a=t(n,r,i);a<0||(e[n][a]=null)}},trigger:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e[t]){if((n=n||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=t,r.streamId&&(n.streamId=r.streamId),r.mediaType&&(n.mediaType=r.mediaType),e[t].filter((function(e){return!(!e||r.streamId&&e.streamId&&e.streamId!==r.streamId||r.mediaType&&e.mediaType&&e.mediaType!==r.mediaType||r.mode&&e.mode&&e.mode!==r.mode||!e.mode&&r.mode&&r.mode===i.default.EVENT_MODE_ON_RECEIVE)})).forEach((function(e){return e&&e.callback.call(e.scope,n)}))}},reset:function(){e={}}}}o.__dashjs_factory_name="EventBus";var s=r.default.getSingletonFactory(o);s.EVENT_PRIORITY_LOW=a,s.EVENT_PRIORITY_HIGH=5e3,r.default.updateSingletonFactory(o.__dashjs_factory_name,s),t.default=s},"./src/core/FactoryMaker.js":function(e,t,n){"use strict";n.r(t);var r=function(){var e,t=[],n={},r={};function i(e,n){for(var r in t){var i=t[r];if(i.context===e&&i.name===n)return i.instance}return null}function a(e,t){return t[e]}function o(e,t,n){e in n&&(n[e]=t)}function s(t,n,r){var i,a=t.__dashjs_factory_name,o=n[a];if(o){var s=o.instance;if(!o.override)return s.apply({context:n,factory:e},r);for(var u in i=t.apply({context:n},r),s=s.apply({context:n,factory:e,parent:i},r))i.hasOwnProperty(u)&&(i[u]=s[u])}else i=t.apply({context:n},r);return i.getClassName=function(){return a},i}return e={extend:function(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n})},getSingletonInstance:i,setSingletonInstance:function(e,n,r){for(var i in t){var a=t[i];if(a.context===e&&a.name===n)return void(t[i].instance=r)}t.push({name:n,context:e,instance:r})},deleteSingletonInstances:function(e){t=t.filter((function(t){return t.context!==e}))},getSingletonFactory:function(e){var r=a(e.__dashjs_factory_name,n);return r||(r=function(n){var r;return void 0===n&&(n={}),{getInstance:function(){return r||(r=i(n,e.__dashjs_factory_name)),r||(r=s(e,n,arguments),t.push({name:e.__dashjs_factory_name,context:n,instance:r})),r}}},n[e.__dashjs_factory_name]=r),r},getSingletonFactoryByName:function(e){return a(e,n)},updateSingletonFactory:function(e,t){o(e,t,n)},getClassFactory:function(e){var t=a(e.__dashjs_factory_name,r);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return s(e,t,arguments)}}},r[e.__dashjs_factory_name]=t),t},getClassFactoryByName:function(e){return a(e,r)},updateClassFactory:function(e,t){o(e,t,r)}}}();t.default=r},"./src/core/Settings.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Utils.js"),a=n("./src/core/Debug.js"),o=n("./src/streaming/constants/Constants.js"),s=n("./src/streaming/vo/metrics/HTTPRequest.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){var e,t,n=this.context,r=Object(u.default)(n).getInstance(),f={"streaming.delay.liveDelay":l.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":l.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":l.default.SETTING_UPDATED_CATCHUP_ENABLED},h={debug:{logLevel:a.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,eventControllerRefreshDelay:150,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1,replaceCodecs:[]},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0,downgradePlayReadyPSSH:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,enableLiveSeekableRangeFix:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0},liveCatchup:{maxDrift:NaN,playbackRate:NaN,playbackBufferMin:.5,enabled:null,latencyThreshold:60,mode:o.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:o.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:o.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:o.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:1e4,retryIntervals:(e={},d(e,s.HTTPRequest.MPD_TYPE,500),d(e,s.HTTPRequest.XLINK_EXPANSION_TYPE,500),d(e,s.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),d(e,s.HTTPRequest.INIT_SEGMENT_TYPE,1e3),d(e,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),d(e,s.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),d(e,s.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),d(e,s.HTTPRequest.LICENSE,1e3),d(e,s.HTTPRequest.OTHER_TYPE,1e3),d(e,"lowLatencyReductionFactor",10),e),retryAttempts:(t={},d(t,s.HTTPRequest.MPD_TYPE,3),d(t,s.HTTPRequest.XLINK_EXPANSION_TYPE,1),d(t,s.HTTPRequest.MEDIA_SEGMENT_TYPE,3),d(t,s.HTTPRequest.INIT_SEGMENT_TYPE,3),d(t,s.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),d(t,s.HTTPRequest.INDEX_SEGMENT_TYPE,3),d(t,s.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),d(t,s.HTTPRequest.LICENSE,3),d(t,s.HTTPRequest.OTHER_TYPE,3),d(t,"lowLatencyMultiplyFactor",5),t),abr:{movingAverageMethod:o.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:o.default.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!1},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:o.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:o.default.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]}},errors:{recoverAttempts:{mediaErrorDecode:5}}},p=i.default.clone(h);return{get:function(){return p},update:function(e){"object"===c(e)&&function e(t,n,a){for(var o in t)t.hasOwnProperty(o)&&(n.hasOwnProperty(o)?"object"!==c(t[o])||t[o]instanceof Array||null===t[o]?(n[o]=i.default.clone(t[o]),f[a+o]&&r.trigger(f[a+o])):e(t[o],n[o],a.slice()+o+"."):console.error("Settings parameter "+a+o+" is not supported"))}(e,p,"")},reset:function(){p=i.default.clone(h)}}}f.__dashjs_factory_name="Settings";var h=r.default.getSingletonFactory(f);t.default=h},"./src/core/Utils.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/path-browserify/index.js"),i=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"mixin",value:function(t,n,r){var i,o={};if(t)for(var s in n)n.hasOwnProperty(s)&&(i=n[s],s in t&&(t[s]===i||s in o&&o[s]===i)||("object"===a(t[s])&&null!==t[s]?t[s]=e.mixin(t[s],i,r):t[s]=r(i)));return t}},{key:"clone",value:function(t){if(!t||"object"!==a(t))return t;var n;if(t instanceof Array){n=[];for(var r=0,i=t.length;r<i;++r)r in t&&n.push(e.clone(t[r]))}else n={};return e.mixin(n,t,e.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(e,t){try{if(!t||0===t.length)return e;var n=new URL(e);return t.forEach((function(e){e.key&&e.value&&n.searchParams.set(e.key,e.value)})),n.href}catch(t){return e}}},{key:"parseHttpHeaders",value:function(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],o=a.indexOf(": ");o>0&&(t[a.substring(0,o)]=a.substring(o+2))}return t}},{key:"generateUuid",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}},{key:"generateHashCode",value:function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}},{key:"getRelativeUrl",value:function(e,t){try{var n=new URL(e),r=new URL(t);if(n.protocol=r.protocol,n.origin!==r.origin)return t;var a=i.a.relative(n.pathname.substr(0,n.pathname.lastIndexOf("/")),r.pathname.substr(0,r.pathname.lastIndexOf("/"))),o=0===a.length?1:0;return a+=r.pathname.substr(r.pathname.lastIndexOf("/")+o,r.pathname.length-1),r.pathname.length<a.length?r.pathname:a}catch(e){return t}}}],(n=null)&&o(t.prototype,n),r&&o(t,r),e}();t.default=s},"./src/core/Version.js":function(e,t,n){"use strict";n.r(t),n.d(t,"getVersionString",(function(){return i}));var r="4.4.1";function i(){return r}},"./src/core/errors/Errors.js":function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var u=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=a(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,e.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,e.SEGMENT_BASE_LOADER_ERROR_CODE=15,e.TIME_SYNC_FAILED_ERROR_CODE=16,e.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,e.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,e.APPEND_ERROR_CODE=20,e.REMOVE_ERROR_CODE=21,e.DATA_UPDATE_FAILED_ERROR_CODE=22,e.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,e.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,e.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,e.DOWNLOAD_ERROR_ID_SIDX_CODE=26,e.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,e.DOWNLOAD_ERROR_ID_XLINK_CODE=29,e.MANIFEST_ERROR_ID_PARSE_CODE=31,e.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,e.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,e.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,e.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",e.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",e.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",e.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",e.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",e.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",e.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",e.APPEND_ERROR_MESSAGE="chunk is not defined",e.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",e.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",e.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",e.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",e.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",e.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",e}return n}(n("./src/core/errors/ErrorsBase.js").default));t.default=u},"./src/core/errors/ErrorsBase.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},"./src/core/events/CoreEvents.js":function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=a(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",e.BUFFERING_COMPLETED="bufferingCompleted",e.BUFFER_CLEARED="bufferCleared",e.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",e.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",e.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",e.CURRENT_TRACK_CHANGED="currentTrackChanged",e.DATA_UPDATE_COMPLETED="dataUpdateCompleted",e.INBAND_EVENTS="inbandEvents",e.INITIAL_STREAM_SWITCH="initialStreamSwitch",e.INIT_FRAGMENT_LOADED="initFragmentLoaded",e.INIT_FRAGMENT_NEEDED="initFragmentNeeded",e.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",e.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",e.LOADING_COMPLETED="loadingCompleted",e.LOADING_PROGRESS="loadingProgress",e.LOADING_DATA_PROGRESS="loadingDataProgress",e.LOADING_ABANDONED="loadingAborted",e.MANIFEST_UPDATED="manifestUpdated",e.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",e.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",e.QUOTA_EXCEEDED="quotaExceeded",e.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",e.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",e.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",e.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",e.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",e.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",e.SOURCE_BUFFER_ERROR="sourceBufferError",e.STREAMS_COMPOSED="streamsComposed",e.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",e.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",e.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",e.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",e.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",e.URL_RESOLUTION_FAILED="urlResolutionFailed",e.VIDEO_CHUNK_RECEIVED="videoChunkReceived",e.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",e.XLINK_ELEMENT_LOADED="xlinkElementLoaded",e.XLINK_READY="xlinkReady",e.SEEK_TARGET="seekTarget",e.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",e.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",e.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",e}return n}(n("./src/core/events/EventsBase.js").default);t.default=u},"./src/core/events/Events.js":function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var u=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=a(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.apply(this,arguments)}return n}(n("./src/core/events/CoreEvents.js").default));t.default=u},"./src/core/events/EventsBase.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},"./src/dash/DashAdapter.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dash/constants/DashConstants.js"),i=n("./src/dash/vo/RepresentationInfo.js"),a=n("./src/dash/vo/MediaInfo.js"),o=n("./src/dash/vo/StreamInfo.js"),s=n("./src/dash/vo/ManifestInfo.js"),u=n("./src/dash/vo/Event.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/dash/models/DashManifestModel.js"),d=n("./src/dash/models/PatchManifestModel.js");function f(){var e,t,n,l,f,h,p,m=this.context,g="urn:dvb:dash:profile:dvb-dash:2014";function v(e,n,i){var a,o=t.getAdaptationsForType(l[0].mpd.manifest,e,n);if(!o||0===o.length)return null;if(o.length>1&&i){var s=b(i,n);if(f[i.id]&&f[i.id][n])for(var u=0,c=o.length;u<c;u++)if(y(f[i.id][n],s[u]))return o[u];for(var d=0,h=o.length;d<h;d++)if(a=o[d],t.getRolesForAdaptation(a).filter((function(e){return e.value===r.default.MAIN}))[0])return o[d]}return o[0]}function y(e,t){if(!e||!t)return!1;var n=e.id===t.id,r=e.codec===t.codec,i=e.viewpoint===t.viewpoint,a=e.lang===t.lang,o=e.roles.toString()===t.roles.toString(),s=e.accessibility.toString()===t.accessibility.toString(),u=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&s&&u}function _(e,n,r,i,a,o){var s,u,l,c,d,f,p=[];if(!i||0===i.length)return[];var m=t.getAdaptationsForPeriod(n);for(c=0,f=i.length;c<f;c++)if(s=i[c],u=L(m[l=t.getIndexForAdaptation(s,e,r.index)]),o){var g=u.accessibility.length;for(d=0;d<g;d++)if(u){var v=u.accessibility[d];if(0===v.indexOf("cea-608:")){var y=v.substring(8).split(";");if("CC"===y[0].substring(0,2))for(d=0;d<y.length;d++)u||(u=L.call(this,m[l])),C(u,y[d].substring(0,3),y[d].substring(4)),p.push(u),u=null;else for(d=0;d<y.length;d++)u||(u=L.call(this,m[l])),C(u,"CC"+(d+1),y[d]),p.push(u),u=null}else 0===v.indexOf("cea-608")&&(C(u,h.CC1,"eng"),p.push(u),u=null)}}else a===h.IMAGE?(u.type=h.IMAGE,p.push(u),u=null):u&&p.push(u);return p}function b(e,n,r){var i=l,a=r,o=[];if(a)k(),i=T(a);else{if(!(l.length>0))return o;a=l[0].mpd.manifest}var s=M(e,i),u=t.getAdaptationsForType(a,e?e.index:null,n);return o=_(a,s,e,u,n),n===h.TEXT&&(u=t.getAdaptationsForType(a,e?e.index:null,h.VIDEO),o=o.concat(_(a,s,e,u,n,!0))),o}function T(e){var n=E(e);return t.getRegularPeriods(n)}function E(e){var n=w(e);return t.getMpd(n)}function S(){l=[],f={}}function w(e){return e||(l.length>0?l[0].mpd.manifest:null)}function A(e){try{var n=M(e.streamInfo,l),r=t.getAdaptationsForPeriod(n);return e&&e.streamInfo&&void 0!==e.streamInfo.id&&r?r[e.index]:null}catch(e){return null}}function M(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e&&e.id===i.id)return i}return null}function L(e){if(!e)return null;var n,r=new a.default,i=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];if(r.id=e.id,r.index=e.index,r.type=e.type,r.streamInfo=D(e.period),r.representationCount=t.getRepresentationCount(i),r.labels=t.getLabelsForAdaptation(i),r.lang=t.getLanguageForAdaptation(i),n=t.getViewpointForAdaptation(i),r.viewpoint=n?n.value:void 0,r.accessibility=t.getAccessibilityForAdaptation(i).map((function(e){var t=e.value,n=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==p&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n})),r.audioChannelConfiguration=t.getAudioChannelConfigurationForAdaptation(i).map((function(e){return e.value})),0===r.audioChannelConfiguration.length&&Array.isArray(i.Representation_asArray)&&i.Representation_asArray.length>0&&(r.audioChannelConfiguration=t.getAudioChannelConfigurationForRepresentation(i.Representation_asArray[0]).map((function(e){return e.value}))),r.roles=t.getRolesForAdaptation(i).map((function(e){return e.value})),r.codec=t.getCodec(i),r.mimeType=t.getMimeType(i),r.contentProtection=t.getContentProtectionData(i),r.bitrateList=t.getBitrateListForAdaptation(i),r.selectionPriority=t.getSelectionPriority(i),r.contentProtection){var o=r.contentProtection.map((function(e){return t.getKID(e)})).filter((function(e){return null!==e}));if(o.length){var s=o[0];r.contentProtection.forEach((function(e){e.keyId=s}))}}return r.isText=t.getIsText(i),r.supplementalProperties=t.getSupplementalProperties(i),r.isFragmented=t.getIsFragmented(i),r.isEmbedded=!1,r}function C(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=h.TEXT,e.codec="cea-608-in-SEI",e.isEmbedded=!0,e.isFragmented=!1,e.lang=n,e.roles=["caption"]}function D(e){var n,r,i=new o.default;return i.id=e.id,i.index=e.index,i.start=e.start,i.duration=e.duration,i.manifestInfo=(n=e.mpd,(r=new s.default).dvrWindowSize=n.timeShiftBufferDepth,r.loadedTime=n.manifest.loadedTime,r.availableFrom=n.availabilityStartTime,r.minBufferTime=n.manifest.minBufferTime,r.maxFragmentDuration=n.maxSegmentDuration,r.duration=t.getDuration(n.manifest),r.isDynamic=t.getIsDynamic(n.manifest),r.serviceDescriptions=t.getServiceDescriptions(n.manifest),r.protocol=n.manifest.protocol,r),i.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(i.start+i.duration-i.manifestInfo.duration)<1,i}function k(){if(!h)throw new Error("setConfig function has to be called previously")}function P(e){return l.length>0?l[0].mpd.manifest.Period_asArray[e]:null}function I(e,t,n){var r,i,a,o,s;if(e)for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)for(a=r[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(i=a[s]).id)return n?s:i;return null}return e={getBandwidthForRepresentation:function(e,t){var n;return(n=I(P(t),e))?n.bandwidth:null},getIndexForRepresentation:function(e,t){return function(e,t){var n=I(e,t,!0);return null!==n?n:-1}(P(t),e)},getMaxIndexForBufferType:function(e,n){return function(e,n){var r,i,a,o;if(!e||!n)return-1;for(i=e.AdaptationSet_asArray,o=0;o<i.length;o+=1)if(r=i[o],a=r.Representation_asArray,t.getIsTypeOf(r,n))return a.length;return-1}(P(n),e)},convertRepresentationToRepresentationInfo:function(e){if(e){var n=new i.default,r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],a=t.getRepresentationFor(e.index,r);return n.id=e.id,n.quality=e.index,n.bandwidth=t.getBandwidth(a),n.fragmentDuration=e.segmentDuration||(e.segments&&e.segments.length>0?e.segments[0].duration:NaN),n.MSETimeOffset=e.MSETimeOffset,n.mediaInfo=L(e.adaptation),n}return null},getStreamsInfo:function(e,t){var n=[],r=l;if(e&&(k(),r=T(e)),r.length>0){(!t||t>r.length)&&(t=r.length);for(var i=0;i<t;i++)n.push(D(r[i]))}return n},getMediaInfoForType:function(e,n){if(0===l.length||!e)return null;var r=M(e,l);if(!r)return null;var i=t.getAdaptationsForPeriod(r),a=v(e.index,n,e);return a?L(i[t.getIndexForAdaptation(a,l[0].mpd.manifest,e.index)]):null},getAllMediaInfoForType:b,getAdaptationForType:v,getRealAdaptation:function(e,n){var r,i,a=M(e,l);return r=n?n.id:null,l.length>0&&a&&(i=r?t.getAdaptationForId(r,l[0].mpd.manifest,a.index):t.getAdaptationForIndex(n?n.index:null,l[0].mpd.manifest,a.index)),i},getProducerReferenceTimes:function(e,n){var r,i,a=M(e,l);return r=n?n.id:null,l.length>0&&a&&(i=r?t.getAdaptationForId(r,l[0].mpd.manifest,a.index):t.getAdaptationForIndex(n?n.index:null,l[0].mpd.manifest,a.index)),i?t.getProducerReferenceTimesForAdaptation(i):[]},getRealPeriodByIndex:function(e){return t.getRealPeriodForIndex(e,l[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(e){try{return t.getEssentialPropertiesForRepresentation(e)}catch(e){return[]}},getVoRepresentations:function(e){var n=A(e);return t.getRepresentationsForAdaptation(n)},getEventsFor:function(e,n){var r=[];if(l.length>0){var s=l[0].mpd.manifest;e instanceof o.default?r=t.getEventsForPeriod(M(e,l)):e instanceof a.default?r=t.getEventStreamForAdaptationSet(s,A(e)):e instanceof i.default&&(r=t.getEventStreamForRepresentation(s,n))}return r},getEvent:function(e,t,n,r){try{if(!e||!t||isNaN(n)||!r)return null;var i=e.scheme_id_uri,a=e.value;if(!t[i+"/"+a])return null;var o,s=new u.default,l=e.timescale||1,c=r.adaptation.period.start,d=t[i+"/"+a],f=isNaN(r.presentationTimeOffset)?isNaN(d.presentationTimeOffset)?0:d.presentationTimeOffset:r.presentationTimeOffset,h=e.presentation_time_delta/l;o=0===e.version?c+n-f+h:c-f+h;var p=e.event_duration,m=e.id,g=e.message_data;return s.eventStream=d,s.eventStream.value=a,s.eventStream.timescale=l,s.duration=p,s.id=m,s.calculatedPresentationTime=o,s.messageData=g,s.presentationTimeDelta=h,s}catch(e){return null}},getMpd:E,setConfig:function(e){e&&(e.constants&&(h=e.constants),e.cea608parser&&(p=e.cea608parser),e.errHandler&&t.setConfig({errHandler:e.errHandler}),e.BASE64&&t.setConfig({BASE64:e.BASE64}))},updatePeriods:function(e){if(!e)return null;k(),l=T(e)},getIsTextTrack:function(e){return t.getIsText(e)},getUTCTimingSources:function(){var e=w();return t.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=l.length>0?l[0].mpd:null;return t.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){var n=E(e);return t.getAvailabilityStartTime(n)},getIsTypeOf:function(e,n){return t.getIsTypeOf(e,n)},getIsDynamic:function(e){var n=w(e);return t.getIsDynamic(n)},getDuration:function(e){var n=w(e);return t.getDuration(n)},getRegularPeriods:T,getLocation:function(e){return t.getLocation(e)},getPatchLocation:function(e){var n=t.getPatchLocation(e),r=t.getPublishTime(e);if(!n||!r)return null;if(n.hasOwnProperty("ttl")&&r){var i=1e3*parseFloat(n.ttl);if(r.getTime()+i<=(new Date).getTime())return null}return n.__text},getManifestUpdatePeriod:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.getManifestUpdatePeriod(e,n)},getPublishTime:function(e){return t.getPublishTime(e)},getIsDVB:function(e){return t.hasProfile(e,g)},getIsPatch:function(e){return n.getIsPatch(e)},getBaseURLsFromElement:function(e){return t.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return t.getRepresentationSortFunction()},getCodec:function(e,n,r){return t.getCodec(e,n,r)},getPeriodById:function(e){if(!e||0===l.length)return null;var t=l.filter((function(t){return t.id===e}));return t&&t.length>0?t[0]:null},setCurrentMediaInfo:function(e,t,n){f[e]=f[e]||{},f[e][t]=f[e][t]||{},f[e][t]=n},isPatchValid:function(e,r){var i=t.getId(e),a=n.getMpdId(r),o=t.getPublishTime(e),s=n.getPublishTime(r),u=n.getOriginalPublishTime(r);return!!(i&&a&&i==a&&o&&u&&o.getTime()==u.getTime()&&s&&o.getTime()<s.getTime())},applyPatchToManifest:function(e,t){n.getPatchOperations(t).forEach((function(t){var n=t.getMpdTarget(e);if(null!==n){var r=n.name,i=n.target,a=n.leaf;if(t.xpath.findsAttribute())switch(t.action){case"add":case"replace":i[r]=t.value;break;case"remove":delete i[r]}else{var o=(i[r+"_asArray"]||[]).indexOf(a),s="prepend"===t.position||"before"===t.position;if(("remove"===t.action||"replace"===t.action)&&(delete i[r],-1!=o)){var u=i[r+"_asArray"];u.splice(o,1),u.length>1?i[r]=u:1==u.length?i[r]=u[0]:delete i[r+"_asArray"]}"add"!==t.action&&"replace"!==t.action||Object.keys(t.value).forEach((function(e){var n=t.value[e],a=i[e+"_asArray"]||[];if(0===a.length&&i[e]&&a.push(i[e]),0===a.length)a=n;else{var u=a.length;u=e==r&&-1!=o?o+(s?0:1)+("replace"==t.action?-1:0):s?0:a.length,a.splice.apply(a,[u,0].concat(n))}i[e+"_asArray"]=a,i[e]=1==a.length?a[0]:a}))}}}))},areMediaInfosEqual:y,reset:S},t=Object(c.default)(m).getInstance(),n=Object(d.default)(m).getInstance(),S(),e}f.__dashjs_factory_name="DashAdapter",t.default=l.default.getSingletonFactory(f)},"./src/dash/DashHandler.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/vo/FragmentRequest.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/MediaPlayerEvents.js"),s=n("./src/dash/utils/SegmentsUtils.js"),u=n("./src/dash/constants/DashConstants.js"),l=.5;function c(e){var t,n,a,c,d,f=(e=e||{}).eventBus,h=e.debug,p=e.urlUtils,m=e.type,g=e.streamInfo,v=e.segmentsController,y=e.timelineConverter,_=e.baseURLController;function b(){return m}function T(){a=null}function E(e,t,n){var r,i,a=_.resolve(n.path);return a&&t!==a.url&&p.isRelative(t)?(r=a.url,i=a.serviceLocation,t&&(r=p.resolve(t,r))):r=t,!p.isRelative(r)&&(e.url=r,e.serviceLocation=i,!0)}function S(e,t){if(null==t)return null;var n=new r.default,a=t.representation,o=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].bandwidth,u=t.media;return u=Object(s.replaceTokenForTemplate)(u,"Number",t.replacementNumber),u=Object(s.replaceTokenForTemplate)(u,"Time",t.replacementTime),u=Object(s.replaceTokenForTemplate)(u,"Bandwidth",o),u=Object(s.replaceIDForTemplate)(u,a.id),u=Object(s.unescapeDollarsInTemplate)(u),n.mediaType=b(),n.type=i.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=t.mediaRange,n.startTime=t.presentationStartTime,n.mediaStartTime=t.mediaStartTime,n.duration=t.duration,n.timescale=a.timescale,n.availabilityStartTime=t.availabilityStartTime,n.availabilityEndTime=t.availabilityEndTime,n.availabilityTimeComplete=a.availabilityTimeComplete,n.wallStartTime=t.wallStartTime,n.quality=a.index,n.index=t.index,n.mediaInfo=e,n.adaptationIndex=a.adaptation.index,n.representationId=a.id,E(n,u,a)?n:void 0}function w(e,t,r){var i=null;if(!t||!t.segmentInfoType)return i;var o=v.getSegmentByTime(t,r);return o&&(a=o,n.debug("Index for time "+r+" is "+o.index),i=S(e,o)),i}function A(){n.debug("Dynamic stream complete"),d=!0}return t={initialize:function(e){c=e,d=!1,v.initialize(e)},getStreamId:function(){return g.id},getType:b,getStreamInfo:function(){return g},getInitRequest:function(e,t){return t?function(e,t,n){var a=new r.default,o=t.adaptation.period,u=o.start;if(a.mediaType=n,a.type=i.HTTPRequest.INIT_SEGMENT_TYPE,a.range=t.range,a.availabilityStartTime=y.calcAvailabilityStartTimeFromPresentationTime(u,t,c),a.availabilityEndTime=y.calcAvailabilityEndTimeFromPresentationTime(u+o.duration,t,c),a.quality=t.index,a.mediaInfo=e,a.representationId=t.id,E(a,t.initialization,t))return a.url=Object(s.replaceTokenForTemplate)(a.url,"Bandwidth",t.bandwidth),a}(e,t,b()):null},getSegmentRequestForTime:w,getCurrentIndex:function(){return a?a.index:-1},getNextSegmentRequest:function(e,t){var r=null;if(!t||!t.segmentInfoType)return null;var i=a?a.index+1:0,o=v.getSegmentByIndex(t,i,a?a.mediaStartTime:-1);if(o)r=S(e,o),a=o;else{if(c&&!d)return n.debug(b()+" No segment found at index: "+i+". Wait for next loop"),null;d=!0}return r},isLastSegmentRequested:function(e,t){if(!e||!a)return!1;if(d)return!0;if(!isFinite(e.adaptation.period.duration))return!1;if(a.presentationStartTime+a.duration>t)return!1;if(e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.numberOfSegments)&&!isNaN(a.index)&&a.index>=e.mediaFinishedInformation.numberOfSegments-1){if(!c||e.segmentInfoType===u.default.SEGMENT_TEMPLATE)return!0;if(c&&e.segmentInfoType===u.default.SEGMENT_LIST&&e.adaptation.period.nextPeriodId)return!0}return!!(c&&e.adaptation.period.nextPeriodId&&e.segmentInfoType===u.default.SEGMENT_TIMELINE&&e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&a&&!isNaN(a.mediaStartTime)&&!isNaN(a.duration)&&a.mediaStartTime+a.duration>=e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function(){T(),f.off(o.default.DYNAMIC_TO_STATIC,A,t)},getNextSegmentRequestIdempotent:function(e,t){var n=a?a.index+1:0,r=v.getSegmentByIndex(t,n,a?a.mediaStartTime:-1);return r?S(e,r):null},getValidTimeCloseToTargetTime:function(e,t,n,r){try{if(isNaN(e)||!t||!n)return NaN;if(e<0&&(e=0),isNaN(r)&&(r=l),w(t,n,e))return e;for(var i=n.adaptation.period.start,a=n.adaptation.period.start+n.adaptation.period.duration,o=Math.min(e+r,a),s=Math.max(e-r,i),u=NaN,c=null;o<=a||s>=i;){var d=null,f=null;if(o<=a&&(d=w(t,n,o)),s>=i&&(f=w(t,n,s)),f){u=s,c=f;break}if(d){u=o,c=d;break}o+=r,s-=r}if(c){var h=c.startTime+c.duration;return e>=c.startTime&&h-e>r?e:e<c.startTime?c.startTime:Math.min(h-r,u)}return u}catch(e){return NaN}},getValidTimeAheadOfTargetTime:function(e,t,n,r){try{if(isNaN(e)||!t||!n)return NaN;if(e<0&&(e=0),isNaN(r)&&(r=l),w(t,n,e))return e;if(n.adaptation.period.start+n.adaptation.period.duration<e)return NaN;for(var i=Math.min(n.adaptation.period.start+n.adaptation.period.duration,e+30),a=Math.min(e+r,i),o=NaN,s=null;a<=i;){var u=null;if(a<=i&&(u=w(t,n,a)),u){o=a,s=u;break}a+=r}if(s){var c=s.startTime+s.duration;return e>=s.startTime&&c-e>r?e:e<s.startTime?s.startTime:Math.min(c-r,o)}return o}catch(e){return NaN}}},n=h.getLogger(t),T(),f.on(o.default.DYNAMIC_TO_STATIC,A,t),t}c.__dashjs_factory_name="DashHandler",t.default=a.default.getClassFactory(c)},"./src/dash/DashMetrics.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/constants/MetricsConstants.js"),s=n("./src/dash/utils/Round10.js"),u=n("./src/streaming/models/MetricsModel.js"),l=n("./src/core/Utils.js"),c=n("./src/streaming/vo/metrics/PlayList.js");function d(e){e=e||{};var t,n,a,d,f=this.context,h=e.metricsModel;function p(e){var t=h.getMetricsFor(e,!0);if(!t)return null;var n,r=t.HttpList,i=null;if(!r||r.length<=0)return null;for(n=r.length-1;n>=0;){if(r[n].responsecode){i=r[n];break}n--}return i}function m(e){var t=h.getMetricsFor(e,!0);return t&&t.HttpList?t.HttpList:[]}function g(e,t){if(!e)return null;var n=e[t];return n&&0!==n.length?n[n.length-1]:null}return t={getCurrentRepresentationSwitch:function(e){return g(h.getMetricsFor(e,!0),o.default.TRACK_SWITCH)},getCurrentBufferState:function(e){return g(h.getMetricsFor(e,!0),o.default.BUFFER_STATE)},getCurrentBufferLevel:function(e){var t=g(h.getMetricsFor(e,!0),o.default.BUFFER_LEVEL);return t?s.default.round10(t.level/1e3,-3):0},getCurrentHttpRequest:p,getHttpRequests:m,getCurrentDroppedFrames:function(){return g(h.getMetricsFor(r.default.VIDEO,!0),o.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return g(h.getMetricsFor(e,!0),o.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return g(e?h.getMetricsFor(e,!0):h.getMetricsFor(r.default.VIDEO,!0)||h.getMetricsFor(r.default.AUDIO,!0),o.default.DVR_INFO)},getCurrentManifestUpdate:function(){return g(h.getMetricsFor(r.default.STREAM),o.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){if(!t)return null;var n={},r=p(e);r&&(n=l.default.parseHttpHeaders(r._responseHeaders));var i=n[t.toLowerCase()];return void 0===i?null:i},getLatestMPDRequestHeaderValueByID:function(e){if(!e)return null;var t,n,a,o={};for(a=(t=m(r.default.STREAM)).length-1;a>=0;a--)if((n=t[a]).type===i.HTTPRequest.MPD_TYPE){o=l.default.parseHttpHeaders(n._responseHeaders);break}var s=o[e.toLowerCase()];return void 0===s?null:s},addRepresentationSwitch:function(e,t,n,r,i){h.addRepresentationSwitch(e,t,n,r,i)},addDVRInfo:function(e,t,n,r){h.addDVRInfo(e,t,n,r)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();h.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){if(e){var t=this.getCurrentManifestUpdate();h.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration)}},addManifestUpdateRepresentationInfo:function(e,t){if(e){var n=this.getCurrentManifestUpdate();h.addManifestUpdateRepresentationInfo(n,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType)}},addManifestUpdate:function(e){h.addManifestUpdate(r.default.STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,n,r,i){h.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,n,e.duration,r,i,e.fileLoaderType)},addSchedulingInfo:function(e,t){h.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,n){h.addRequestsQueue(e,t,n)},addBufferLevel:function(e,t,n){h.addBufferLevel(e,t,n)},addBufferState:function(e,t,n){h.addBufferState(e,t,n)},addDroppedFrames:function(e){h.addDroppedFrames(r.default.VIDEO,e)},addPlayList:function(){d&&(h.addPlayList(d),d=null)},addDVBErrors:function(e){h.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(d=new c.PlayList).start=new Date,d.mstart=e,d.starttype=t},createPlaylistTraceMetrics:function(e,t,r){!0===n&&(n=!1,(a=new c.PlayListTrace).representationid=e,a.start=new Date,a.mstart=t,a.playbackspeed=null!==r?r.toString():null)},updatePlayListTraceMetrics:function(e){if(a)for(var t in a)a[t]=e[t]},pushPlayListTraceMetrics:function(e,t){if(!1===n&&d&&a&&a.start){var r=a.start,i=e.getTime()-r.getTime();a.duration=i,a.stopreason=t,d.trace.push(a),n=!0}},clearAllCurrentMetrics:function(){h.clearAllCurrentMetrics()}},h=h||Object(u.default)(f).getInstance({settings:e.settings}),n=!0,a=null,d=null,t}d.__dashjs_factory_name="DashMetrics",t.default=a.default.getSingletonFactory(d)},"./src/dash/SegmentBaseLoader.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dash/vo/Segment.js"),i=n("./src/streaming/vo/DashJSError.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/vo/FragmentRequest.js"),s=n("./src/streaming/net/URLLoader.js");function u(){var e,t,n,a,u,l,c,d,f,h,p,m,g,v=this.context;function y(e,t,n){n({segments:e,representation:t,error:e?void 0:new i.default(f.SEGMENT_BASE_LOADER_ERROR_CODE,f.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function _(e){if(e.url){var t=new o.default;return t.setInfo(e),t}}return e={setConfig:function(r){r.baseURLController&&(g=r.baseURLController),r.dashMetrics&&(l=r.dashMetrics),r.mediaPlayerModel&&(c=r.mediaPlayerModel),r.errHandler&&(n=r.errHandler),r.boxParser&&(a=r.boxParser),r.debug&&(t=r.debug.getLogger(e)),r.requestModifier&&(u=r.requestModifier),r.errors&&(f=r.errors),r.urlUtils&&(m=r.urlUtils),r.constants&&(h=r.constants),r.dashConstants&&(p=r.dashConstants)},initialize:function(){d=Object(s.default)(v).create({errHandler:n,dashMetrics:l,mediaPlayerModel:c,requestModifier:u,boxParser:a,errors:f,urlUtils:m,constants:h,dashConstants:p})},loadInitialization:function(e,n){return new Promise((function(r){!function e(n,r,i,o){var s=null,u=n?g.resolve(n.path):null,l=o||{init:!0,url:u?u.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:r};t.debug("Start searching for initialization.");var c=_(l);d.load({request:c,success:function(t){if(l.bytesLoaded=l.range.end,!(s=a.findInitRange(t)))return l.range.end=l.bytesLoaded+l.bytesToLoad,e(n,r,i,l);n.range=s,i(n)},error:function(){i(n)}}),t.debug("Perform init search: "+l.url)}(e,n,r)}))},loadSegments:function(e,n,i){return new Promise((function(o){!function e(n,i,o,s,u,l){if(o&&(void 0===o.start||void 0===o.end)){var c=o?o.toString().split("-"):null;o=c?{start:parseFloat(c[0]),end:parseFloat(c[1])}:null}u=u||y;var f=null,h=null,p=!!o,m=n?g.resolve(n.path):null,v={init:!1,url:m?m.url:void 0,range:p?o:{start:0,end:1500},searching:!p,bytesLoaded:l?l.bytesLoaded:0,bytesToLoad:1500,mediaType:i},b=_(v);d.load({request:b,success:function(o){var l=v.bytesToLoad,c=o.byteLength;if(v.bytesLoaded=v.range.end-v.range.start,f=a.parse(o),(h=f.getBox("sidx"))&&h.isComplete){var d,p,m=h.references;if(null!=m&&m.length>0&&(d=1===m[0].reference_type),d){var g,y,_,b;t.debug("Initiate multiple SIDX load."),v.range.end=v.range.start+h.size;var T=[],E=0,S=(h.offset||v.range.start)+h.size,w=function(e){e?(T=T.concat(e),++E>=y&&(T.sort((function(e,t){return e.startTime-t.startTime<0?-1:0})),u(T,n,s))):u(null,n,s)};for(g=0,y=m.length;g<y;g++)_=S,b=S+m[g].referenced_size-1,S+=m[g].referenced_size,e(n,i,{start:_,end:b},s,w,v)}else t.debug("Parsing segments from SIDX. representation "+i+" - id: "+n.id+" for range : "+v.range.start+" - "+v.range.end),p=function(e,t){for(var n,i,a,o,s=e.references,u=s.length,l=e.timescale,c=e.earliest_presentation_time,d=t.range.start+e.offset+e.first_offset+e.size,f=[],h=0;h<u;h++)a=s[h].subsegment_duration,o=s[h].referenced_size,(n=new r.default).duration=a,n.startTime=c,n.timescale=l,i=d+o-1,n.mediaRange=d+"-"+i,f.push(n),c+=a,d+=o;return f}(h,v),u(p,n,s)}else{if(h)v.range.start=h.offset||v.range.start,v.range.end=v.range.start+(h.size||l);else{if(c<v.bytesLoaded)return void u(null,n,s);var A=f.getLastBox();A&&A.size?(v.range.start=A.offset+A.size,v.range.end=v.range.start+l):v.range.end+=l}e(n,i,v.range,s,null,v)}},error:function(){u(null,n,s)}}),t.debug("Perform SIDX load for type ".concat(i," : ").concat(v.url," with range ").concat(v.range.start," - ").concat(v.range.end))}(e,n,i,o)}))},reset:function(){d&&(d.abort(),d=null)}}}u.__dashjs_factory_name="SegmentBaseLoader",t.default=a.default.getSingletonFactory(u)},"./src/dash/WebmSegmentBaseLoader.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/utils/EBMLParser.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/dash/vo/Segment.js"),s=n("./src/streaming/vo/FragmentRequest.js"),u=n("./src/streaming/net/URLLoader.js"),l=n("./src/streaming/vo/DashJSError.js");function c(){var e,t,n,a,c,d,f,h,p,m,g=this.context;function v(e,i,a,s){var u,l,c,d,f,h,p,m;for(c=[],f=0,h=(l=function(e){var t,i,a=[],o=Object(r.default)(g).create({data:e});for(o.consumeTagAndSize(n.Segment.Cues);o.moreData()&&o.consumeTagAndSize(n.Segment.Cues.CuePoint,!0);){for((t={}).CueTime=o.parseTag(n.Segment.Cues.CuePoint.CueTime),t.CueTracks=[];o.moreData()&&o.consumeTag(n.Segment.Cues.CuePoint.CueTrackPositions,!0);){var s=o.getMatroskaCodedNum(),u=o.getPos();if((i={}).Track=o.parseTag(n.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=o.parseTag(n.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),t.CueTracks.push(i),o.setPos(u+s)}if(0===t.CueTracks.length)throw new Error("Mandatory cuetrack not found");a.push(t)}if(0===a.length)throw new Error("mandatory cuepoint not found");return a}(e)).length;f<h;f+=1)d=new o.default,u=0,u=f<l.length-1?l[f+1].CueTime-l[f].CueTime:s-l[f].CueTime,d.duration=u,d.startTime=l[f].CueTime,d.timescale=1e3,p=l[f].CueTracks[0].ClusterPosition+i,m=f<l.length-1?l[f+1].CueTracks[0].ClusterPosition+i-1:a-1,d.mediaRange=p+"-"+m,c.push(d);return t.debug("Parsed cues: "+c.length+" cues."),c}function y(e){var t=new s.default;return t.setInfo(e),t}return e={setConfig:function(n){if(!(n.baseURLController&&n.dashMetrics&&n.mediaPlayerModel&&n.errHandler))throw new Error(i.default.MISSING_CONFIG_ERROR);m=n.baseURLController,d=n.dashMetrics,f=n.mediaPlayerModel,a=n.errHandler,p=n.errors,t=n.debug.getLogger(e),c=n.requestModifier},initialize:function(){h=Object(u.default)(g).create({errHandler:a,dashMetrics:d,mediaPlayerModel:f,requestModifier:c,errors:p})},loadInitialization:function(e,n){return new Promise((function(r){var i=null,a=e?m.resolve(e.path):null,o=e?e.range.split("-"):null,s={range:{start:o?parseFloat(o[0]):null,end:o?parseFloat(o[1]):null},request:i,url:a?a.url:void 0,init:!0,mediaType:n};t.info("Start loading initialization."),i=y(s),h.load({request:i,success:function(){r(e)},error:function(){r(e)}}),t.debug("Perform init load: "+s.url)}))},loadSegments:function(e,i,a){return new Promise((function(o){var s=null,u=e?m.resolve(e.path):null,c=u?u.url:void 0;s=y({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:s,url:c,init:!1,mediaType:i}),t.debug("Parsing ebml header"),h.load({request:s,success:function(i){!function(e,i,a,o){if(e&&0!==e.byteLength){var s,u,l,c,d=Object(r.default)(g).create({data:e}),f=a?a.split("-"):null,p=null,m={url:i,range:{start:f?parseFloat(f[0]):null,end:f?parseFloat(f[1]):null},request:p};for(t.debug("Parse EBML header: "+m.url),d.skipOverElement(n.EBML),d.consumeTag(n.Segment),l=d.getMatroskaCodedNum(),l+=d.getPos(),c=d.getPos();d.moreData()&&!d.consumeTagAndSize(n.Segment.Info,!0);)if(!(d.skipOverElement(n.Segment.SeekHead,!0)||d.skipOverElement(n.Segment.Tracks,!0)||d.skipOverElement(n.Segment.Cues,!0)||d.skipOverElement(n.Void,!0)))throw new Error("no valid top level element found");for(;void 0===s;){var _=d.getMatroskaCodedNum(!0),b=d.getMatroskaCodedNum();switch(_){case n.Segment.Info.Duration.tag:s=d[n.Segment.Info.Duration.parse](b);break;default:d.setPos(d.getPos()+b)}}p=y(m),h.load({request:p,success:function(e){u=v(e,c,l,s),o(u)},error:function(){t.error("Download Error: Cues "+m.url),o(null)}}),t.debug("Perform cues load: "+m.url+" bytes="+m.range.start+"-"+m.range.end)}else o(null)}(i,c,a,(function(t){o({segments:t,representation:e,error:t?void 0:new l.default(p.SEGMENT_BASE_LOADER_ERROR_CODE,p.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}))},error:function(){o({representation:e,error:new l.default(p.SEGMENT_BASE_LOADER_ERROR_CODE,p.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})}))},reset:function(){h&&(h.abort(),h=null)}},n={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},e}c.__dashjs_factory_name="WebmSegmentBaseLoader",t.default=a.default.getSingletonFactory(c)},"./src/dash/constants/DashConstants.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime"}}])&&r(t.prototype,n),i&&r(t,i),e}());t.default=i},"./src/dash/controllers/RepresentationController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/MediaPlayerEvents.js"),o=n("./src/dash/utils/SegmentsUtils.js");function s(e){var t,n,i,s,u,l=(e=e||{}).eventBus,c=e.events,d=e.abrController,f=e.dashMetrics,h=e.playbackController,p=e.timelineConverter,m=e.type,g=e.streamInfo,v=e.dashConstants,y=e.segmentsController,_=e.isDynamic;function b(){return m}function T(){if(!(d&&f&&h&&p))throw new Error(r.default.MISSING_CONFIG_ERROR)}function E(){return i}function S(){return u}function w(){n=null,i=!0,s=[]}function A(e){return new Promise((function(t,n){var r=e.hasInitialization(),i=e.hasSegments(),a=[];a.push(y.updateInitData(e,r)),a.push(y.updateSegmentData(e,i)),Promise.all(a).then((function(n){var r;n[0]&&!n[0].error&&(e=function(e,t){return t&&!t.error&&t.representation?t.representation:e}(e,n[0])),n[1]&&!n[1].error&&(e=function(e,t){if(t&&!t.error){var n,r,i,a,s=t.segments,u=[],l=0;for(n=0,r=s?s.length:0;n<r;n++)i=s[n],(a=Object(o.getTimeBasedSegment)(p,_,e,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,l))&&(u.push(a),a=null,l++);return u.length>0&&(e.segments=u),e}}(e,n[1])),(r=e).mediaFinishedInformation=y.getMediaFinishedInformation(r),function(e){if(E()){var t,n,r=f.getCurrentManifestUpdate(),i=!1;if(r){for(var a=0;a<r.representationInfo.length;a++)if((t=r.representationInfo[a]).index===e.index&&t.mediaType===b()){i=!0;break}i||f.addManifestUpdateRepresentationInfo(e,b())}if(function(){for(var e=0,t=s.length;e<t;e++){var n=s[e].segmentInfoType;if(!s[e].hasInitialization()||(n===v.SEGMENT_BASE||n===v.BASE_URL)&&!s[e].segments)return!1}return!0}()){d.setPlaybackQuality(m,g,(n=u,s.indexOf(n)));var o=f.getCurrentDVRInfo(m);o&&f.updateManifestUpdateInfo({latency:o.range.end-h.getTime()}),f.getCurrentRepresentationSwitch(S().adaptation.type)||M(),C()}}}(e),t()})).catch((function(e){n(e)}))}))}function M(){T();var e=new Date,t=S(),n=1e3*h.getTime();t&&f.addRepresentationSwitch(t.adaptation.type,e,n,t.id),l.trigger(a.default.REPRESENTATION_SWITCH,{mediaType:m,streamId:g.id,currentRepresentation:t,numberOfRepresentations:s.length},{streamId:g.id,mediaType:m})}function L(e){return null==e||e>=s.length?null:s[e]}function C(e){i=!1,l.trigger(c.DATA_UPDATE_COMPLETED,{data:n,currentRepresentation:u,error:e},{streamId:g.id,mediaType:m})}function D(e){u=e}function k(e){if(e.newDuration){var t=S();t&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}}return t={getStreamId:function(){return g.id},getType:b,getData:function(){return n},isUpdating:E,updateData:function(e,t,a,o,u){if(T(),i=!0,s=t,D(L(u)),n=e,a!==r.default.VIDEO&&a!==r.default.AUDIO&&(a!==r.default.TEXT||!o))return C(),Promise.resolve();for(var l=[],c=0,d=s.length;c<d;c++){var f=s[c];l.push(A(f))}return Promise.all(l)},getCurrentRepresentation:S,getRepresentationForQuality:L,prepareQualityChange:function(e){D(L(e)),M()},reset:function(){l.off(a.default.MANIFEST_VALIDITY_CHANGED,k,t),w()}},w(),l.on(a.default.MANIFEST_VALIDITY_CHANGED,k,t),t}s.__dashjs_factory_name="RepresentationController",t.default=i.default.getClassFactory(s)},"./src/dash/controllers/SegmentBaseController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/dash/SegmentBaseLoader.js"),a=n("./src/dash/WebmSegmentBaseLoader.js");function o(e){e=e||{};var t,n,r,o=this.context,s=e.eventBus,u=e.events,l=e.dashMetrics,c=e.mediaPlayerModel,d=e.errHandler,f=e.baseURLController,h=e.debug,p=e.boxParser,m=e.requestModifier,g=e.errors;function v(e){return"webm"===(e?e.split("/")[1]:"").toLowerCase()}return t={initialize:function(){n.initialize(),r.initialize()},getSegmentBaseInitSegment:function(e){return v(e.representation.mimeType)?r.loadInitialization(e.representation,e.mediaType):n.loadInitialization(e.representation,e.mediaType)},getSegmentList:function(e){return v(e.mimeType)?r.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null):n.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null)},reset:function(){n.reset(),r.reset()}},n=Object(i.default)(o).getInstance(),r=Object(a.default)(o).getInstance(),n.setConfig({baseURLController:f,dashMetrics:l,mediaPlayerModel:c,errHandler:d,eventBus:s,events:u,errors:g,debug:h,boxParser:p,requestModifier:m}),r.setConfig({baseURLController:f,dashMetrics:l,mediaPlayerModel:c,errHandler:d,eventBus:s,events:u,errors:g,debug:h,requestModifier:m}),t}o.__dashjs_factory_name="SegmentBaseController";var s=r.default.getSingletonFactory(o);t.default=s},"./src/dash/controllers/SegmentsController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/dash/utils/TimelineSegmentsGetter.js"),a=n("./src/dash/utils/TemplateSegmentsGetter.js"),o=n("./src/dash/utils/ListSegmentsGetter.js"),s=n("./src/dash/utils/SegmentBaseGetter.js");function u(e){e=e||{};var t,n,r=this.context,u=e.dashConstants,l=e.type,c=e.segmentBaseController;function d(e){return e?e.segments?n[u.SEGMENT_BASE]:n[e.segmentInfoType]:null}return t={initialize:function(t){n[u.SEGMENT_TIMELINE]=Object(i.default)(r).create(e,t),n[u.SEGMENT_TEMPLATE]=Object(a.default)(r).create(e,t),n[u.SEGMENT_LIST]=Object(o.default)(r).create(e,t),n[u.SEGMENT_BASE]=Object(s.default)(r).create(e,t)},updateInitData:function(e,t){return t?Promise.resolve():c.getSegmentBaseInitSegment({representation:e,mediaType:l})},updateSegmentData:function(e,t){return t?Promise.resolve():c.getSegmentList({mimeType:e.mimeType,representation:e,mediaType:l})},getSegmentByIndex:function(e,t,n){var r=d(e);return r?r.getSegmentByIndex(e,t,n):null},getSegmentByTime:function(e,t){var n=d(e);return n?n.getSegmentByTime(e,t):null},getMediaFinishedInformation:function(e){var t=d(e);return t?t.getMediaFinishedInformation(e):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},n={},t}u.__dashjs_factory_name="SegmentsController";var l=r.default.getClassFactory(u);t.default=l},"./src/dash/models/DashManifestModel.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/dash/vo/Representation.js"),o=n("./src/dash/vo/AdaptationSet.js"),s=n("./src/dash/vo/Period.js"),u=n("./src/dash/vo/Mpd.js"),l=n("./src/dash/vo/UTCTiming.js"),c=n("./src/dash/vo/Event.js"),d=n("./src/dash/vo/BaseURL.js"),f=n("./src/dash/vo/EventStream.js"),h=n("./src/dash/vo/ProducerReferenceTime.js"),p=n("./src/streaming/utils/ObjectUtils.js"),m=n("./src/streaming/utils/URLUtils.js"),g=n("./src/core/FactoryMaker.js"),v=n("./src/core/Debug.js"),y=n("./src/streaming/vo/DashJSError.js"),_=n("./src/core/errors/Errors.js"),b=n("./src/streaming/thumbnail/ThumbnailTracks.js");function T(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=S(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function E(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(){var e,t,n,g,S=this.context,w=Object(m.default)(S).getInstance(),A=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function M(e,t){if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.Representation_asArray&&e.Representation_asArray.length){var n=j(e.Representation_asArray[0]);if(n&&n.length>0&&b.THUMBNAILS_SCHEME_ID_URIS.indexOf(n[0].schemeIdUri)>=0)return t===r.default.IMAGE}if(e.ContentComponent_asArray&&e.ContentComponent_asArray.length>0){if(e.ContentComponent_asArray.length>1)return t===r.default.MUXED;if(e.ContentComponent_asArray[0].contentType===t)return!0}var a=t===r.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(t);if(e.Representation_asArray&&e.Representation_asArray.length){var o=e.Representation_asArray[0].codecs;if(a.test(o))return!0}if(e.hasOwnProperty(i.default.MIME_TYPE))return a.test(e.mimeType);if(e.Representation_asArray)for(var s,u=0;u<e.Representation_asArray.length;u++)if((s=e.Representation_asArray[u]).hasOwnProperty(i.default.MIME_TYPE))return a.test(s.mimeType);return!1}function L(e){if(!e)throw new Error("adaptation is not defined");if(e.hasOwnProperty(i.default.SEGMENT_TEMPLATE)||e.hasOwnProperty(i.default.SEGMENT_TIMELINE)||e.hasOwnProperty(i.default.SEGMENT_LIST)||e.hasOwnProperty(i.default.SEGMENT_BASE))return!0;if(e.Representation_asArray&&e.Representation_asArray.length>0){var t=e.Representation_asArray[0];if(t.hasOwnProperty(i.default.SEGMENT_TEMPLATE)||t.hasOwnProperty(i.default.SEGMENT_TIMELINE)||t.hasOwnProperty(i.default.SEGMENT_LIST)||t.hasOwnProperty(i.default.SEGMENT_BASE))return!0}return!1}function C(e){return M(e,r.default.AUDIO)}function D(e){return M(e,r.default.VIDEO)}function k(e){return M(e,r.default.TEXT)}function P(e){return M(e,r.default.IMAGE)}function I(){return function(e,t){return e.bandwidth-t.bandwidth}}function O(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort((function(e,t){return e.bandwidth-t.bandwidth})),e}function R(e,t){return e&&e.Period_asArray&&A(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function x(e){return e&&e.Period_asArray?e.Period_asArray:[]}function N(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===i.default.DYNAMIC),t}function j(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map((function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}})):null}function F(e){if(!e||!e.S_asArray)return NaN;var t=e.S_asArray[0],n=e.S_asArray[1];return t.hasOwnProperty("d")?t.d:n.t-t.t}function U(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=s.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty(i.default.ID)&&e.id.length>0&&"__proto__"!==e.id&&(n=e.id),n}function B(e,t){var n,a=[];if(!e)return a;for(n=0;n<e.length;n++){var o=new f.default;if(o.timescale=1,o.representation=t,!e[n].hasOwnProperty(r.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");o.schemeIdUri=e[n].schemeIdUri,e[n].hasOwnProperty(i.default.TIMESCALE)&&(o.timescale=e[n].timescale),e[n].hasOwnProperty(i.default.VALUE)&&(o.value=e[n].value),a.push(o)}return a}function Y(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],r=!1;return n.some((function(n){if(n){var a=new d.default,o=n.__text||n;return w.isRelative(o)&&(r=!0,e.baseUri&&(o=w.resolve(o,e.baseUri))),a.url=o,n.hasOwnProperty(i.default.SERVICE_LOCATION)&&n.serviceLocation.length?a.serviceLocation=n.serviceLocation:a.serviceLocation=o,n.hasOwnProperty(i.default.DVB_PRIORITY)&&(a.dvb_priority=n[i.default.DVB_PRIORITY]),n.hasOwnProperty(i.default.DVB_WEIGHT)&&(a.dvb_weight=n[i.default.DVB_WEIGHT]),n.hasOwnProperty(i.default.AVAILABILITY_TIME_OFFSET)&&(a.availabilityTimeOffset=n[i.default.AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty(i.default.AVAILABILITY_TIME_COMPLETE)&&(a.availabilityTimeComplete="false"!==n[i.default.AVAILABILITY_TIME_COMPLETE]),t.push(a),r}})),t}return e={getIsTypeOf:M,getIsText:k,getIsFragmented:L,getProducerReferenceTimesForAdaptation:function(e){var t=e&&e.hasOwnProperty(i.default.PRODUCERREFERENCETIME_ASARRAY)?e[i.default.PRODUCERREFERENCETIME_ASARRAY]:[];(e&&e.hasOwnProperty(i.default.REPRESENTATION_ASARRAY)?e[i.default.REPRESENTATION_ASARRAY]:[]).forEach((function(e){e.hasOwnProperty(i.default.PRODUCERREFERENCETIME_ASARRAY)&&t.push.apply(t,E(e[i.default.PRODUCERREFERENCETIME_ASARRAY]))}));var n=[];return t.forEach((function(e){var t=new h.default;e.hasOwnProperty(i.default.ID)&&(t[i.default.ID]=e[i.default.ID],e.hasOwnProperty(i.default.WALL_CLOCK_TIME)&&(t[i.default.WALL_CLOCK_TIME]=e[i.default.WALL_CLOCK_TIME],e.hasOwnProperty(i.default.PRESENTATION_TIME)&&(t[i.default.PRESENTATION_TIME]=e[i.default.PRESENTATION_TIME],n.push(t))))})),n},getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(i.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(i.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,n){var r=R(t,n);return r.length>0&&A(e)?r[e]:null},getIndexForAdaptation:function(e,t,n){if(!e)return-1;for(var r=R(t,n),i=0;i<r.length;i++)if(Object(p.default)(S).getInstance().areEqual(r[i],e))return i;return-1},getAdaptationForId:function(e,t,n){var r,a,o=R(t,n);for(r=0,a=o.length;r<a;r++)if(o[r].hasOwnProperty(i.default.ID)&&o[r].id===e)return o[r];return null},getAdaptationsForType:function(e,t,n){var r,i,a=R(e,t),o=[];for(r=0,i=a.length;r<i;r++)M(a[r],n)&&o.push(O(a[r]));return o},getRealPeriods:x,getRealPeriodForIndex:function(e,t){var n=x(t);return n.length>0&&A(e)?n[e]:null},getCodec:function(e,t,n){var r=null;if(e&&e.Representation_asArray&&e.Representation_asArray.length>0){var i=A(t)&&t>=0&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0];i&&(r=i.mimeType+';codecs="'+i.codecs+'"',n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'))}return r&&(r=r.replace(/\sprofiles=[^;]*/g,"")),r},getSelectionPriority:function(e){try{var t=e&&void 0!==e.selectionPriority?parseInt(e.selectionPriority):1;return isNaN(t)?1:t}catch(e){return 1}},getMimeType:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(i.default.CENC_DEFAULT_KID)?e[i.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(i.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:N,getId:function(e){return e&&e[i.default.ID]||null},hasProfile:function(e,t){var n=!1;return e&&e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n},getDuration:function(e){return e&&e.hasOwnProperty(i.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return e&&e.hasOwnProperty(i.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getPublishTime:function(e){return e&&e.hasOwnProperty(i.default.PUBLISH_TIME)?new Date(e[i.default.PUBLISH_TIME]):null},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){var t=O(e);return(t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray:[]).map((function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}}))},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&A(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,n,r,o,s=[],u=function(e){if(e&&e.period&&A(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&A(e.index))return O(t.AdaptationSet_asArray[e.index])}}(e);if(u&&u.Representation_asArray){if(e&&e.period&&A(e.period.index)){var l=Y(e.period.mpd.manifest);l&&(n=l[0])}for(var c=0,d=u.Representation_asArray.length;c<d;++c){var f=u.Representation_asArray[c],h=new a.default;if(h.index=c,h.adaptation=e,f.hasOwnProperty(i.default.ID)&&(h.id=f.id),f.hasOwnProperty(i.default.CODECS)&&(h.codecs=f.codecs),f.hasOwnProperty(i.default.MIME_TYPE)&&(h.mimeType=f[i.default.MIME_TYPE]),f.hasOwnProperty(i.default.CODEC_PRIVATE_DATA)&&(h.codecPrivateData=f.codecPrivateData),f.hasOwnProperty(i.default.BANDWITH)&&(h.bandwidth=f.bandwidth),f.hasOwnProperty(i.default.WIDTH)&&(h.width=f.width),f.hasOwnProperty(i.default.HEIGHT)&&(h.height=f.height),f.hasOwnProperty(i.default.SCAN_TYPE)&&(h.scanType=f.scanType),f.hasOwnProperty(i.default.MAX_PLAYOUT_RATE)&&(h.maxPlayoutRate=f.maxPlayoutRate),f.hasOwnProperty(i.default.SEGMENT_BASE)?(t=f.SegmentBase,h.segmentInfoType=i.default.SEGMENT_BASE):f.hasOwnProperty(i.default.SEGMENT_LIST)?(t=f.SegmentList).hasOwnProperty(i.default.SEGMENT_TIMELINE)?h.segmentInfoType=i.default.SEGMENT_TIMELINE:h.segmentInfoType=i.default.SEGMENT_LIST:f.hasOwnProperty(i.default.SEGMENT_TEMPLATE)?((t=f.SegmentTemplate).hasOwnProperty(i.default.SEGMENT_TIMELINE)?h.segmentInfoType=i.default.SEGMENT_TIMELINE:h.segmentInfoType=i.default.SEGMENT_TEMPLATE,t.hasOwnProperty(i.default.INITIALIZATION_MINUS)&&(h.initialization=t.initialization.split("$Bandwidth$").join(f.bandwidth).split("$RepresentationID$").join(f.id))):h.segmentInfoType=i.default.BASE_URL,h.essentialProperties=j(f),t){if(t.hasOwnProperty(i.default.INITIALIZATION)){var p=t.Initialization;p.hasOwnProperty(i.default.SOURCE_URL)&&(h.initialization=p.sourceURL),p.hasOwnProperty(i.default.RANGE)&&(h.range=p.range)}else k(u)&&L(u)&&u.mimeType&&-1===u.mimeType.indexOf("application/mp4")&&(h.range=0);t.hasOwnProperty(i.default.TIMESCALE)&&(h.timescale=t.timescale),t.hasOwnProperty(i.default.DURATION)?h.segmentDuration=t.duration/h.timescale:f.hasOwnProperty(i.default.SEGMENT_TEMPLATE)&&(t=f.SegmentTemplate).hasOwnProperty(i.default.SEGMENT_TIMELINE)&&(h.segmentDuration=F(t.SegmentTimeline)/h.timescale),t.hasOwnProperty(i.default.MEDIA)&&(h.media=t.media),t.hasOwnProperty(i.default.START_NUMBER)&&(h.startNumber=t.startNumber),t.hasOwnProperty(i.default.INDEX_RANGE)&&(h.indexRange=t.indexRange),t.hasOwnProperty(i.default.PRESENTATION_TIME_OFFSET)&&(h.presentationTimeOffset=t.presentationTimeOffset/h.timescale),t.hasOwnProperty(i.default.AVAILABILITY_TIME_OFFSET)?h.availabilityTimeOffset=t.availabilityTimeOffset:n&&void 0!==n.availabilityTimeOffset&&(h.availabilityTimeOffset=n.availabilityTimeOffset),t.hasOwnProperty(i.default.AVAILABILITY_TIME_COMPLETE)?h.availabilityTimeComplete="false"!==t.availabilityTimeComplete:n&&void 0!==n.availabilityTimeComplete&&(h.availabilityTimeComplete=n.availabilityTimeComplete)}h.MSETimeOffset=(o=void 0,o=(r=h).presentationTimeOffset,r.adaptation.period.start-o),h.path=[e.period.index,e.index,c],s.push(h)}}return s},getAdaptationsForPeriod:function(e){var n,a,s,u=e&&A(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,l=[];if(u&&u.AdaptationSet_asArray)for(s=0;s<u.AdaptationSet_asArray.length;s++)a=u.AdaptationSet_asArray[s],n=new o.default,a.hasOwnProperty(i.default.ID)&&(n.id=a.id),n.index=s,n.period=e,M(a,r.default.MUXED)?n.type=r.default.MUXED:C(a)?n.type=r.default.AUDIO:D(a)?n.type=r.default.VIDEO:k(a)?n.type=r.default.TEXT:P(a)?n.type=r.default.IMAGE:t.warn("Unknown Adaptation stream type"),l.push(n);return l},getRegularPeriods:function(e){var a,o,u=!!e&&N(e.manifest),l=[],c=null,d=null,f=null,h=null;for(o=0,a=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;o<a;o++)(d=e.manifest.Period_asArray[o]).hasOwnProperty(i.default.START)?(h=new s.default).start=d.start:null!==c&&c.hasOwnProperty(i.default.DURATION)&&null!==f?(h=new s.default).start=parseFloat((f.start+f.duration).toFixed(5)):0!==o||u||((h=new s.default).start=0),null!==f&&isNaN(f.duration)&&(null!==h?f.duration=parseFloat((h.start-f.start).toFixed(5)):t.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==h&&(h.id=U(d,o),h.index=o,h.mpd=e,d.hasOwnProperty(i.default.DURATION)&&(h.duration=d.duration),f&&(f.nextPeriodId=h.id),l.push(h),c=d,f=h),d=null,h=null;return 0===l.length?l:(null!==f&&isNaN(f.duration)&&(f.duration=parseFloat((function(e){!function(){if(!n||!n.hasOwnProperty("error"))throw new Error(r.default.MISSING_CONFIG_ERROR)}();var t,i=N(e.mpd.manifest);return e.mpd.manifest.mediaPresentationDuration?t=e.mpd.manifest.mediaPresentationDuration:e.duration?t=e.duration:i?t=Number.POSITIVE_INFINITY:n.error(new y.default(_.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),t}(f)-f.start).toFixed(5))),l)},getMpd:function(e){var t=new u.default;return e&&(t.manifest=e,e.hasOwnProperty(i.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(i.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(i.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(i.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(i.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(i.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(i.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration),e.hasOwnProperty(i.default.PUBLISH_TIME)&&(t.publishTime=new Date(e.publishTime))),t},getEventsForPeriod:function(e){var t,n,a=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,o=a?a.Period_asArray:null,s=o&&e&&A(e.index)?o[e.index].EventStream_asArray:null,u=[];if(s)for(t=0;t<s.length;t++){var l=new f.default;if(l.period=e,l.timescale=1,!s[t].hasOwnProperty(r.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(l.schemeIdUri=s[t][r.default.SCHEME_ID_URI],s[t].hasOwnProperty(i.default.TIMESCALE)&&(l.timescale=s[t][i.default.TIMESCALE]),s[t].hasOwnProperty(i.default.VALUE)&&(l.value=s[t][i.default.VALUE]),s[t].hasOwnProperty(i.default.PRESENTATION_TIME_OFFSET)&&(l.presentationTimeOffset=s[t][i.default.PRESENTATION_TIME_OFFSET]),n=0;s[t].Event_asArray&&n<s[t].Event_asArray.length;n++){var d=s[t].Event_asArray[n],h=new c.default;h.presentationTime=0,h.eventStream=l,d.hasOwnProperty(i.default.PRESENTATION_TIME)&&(h.presentationTime=d.presentationTime);var p=l.presentationTimeOffset?l.presentationTimeOffset/l.timescale:0;h.calculatedPresentationTime=h.presentationTime/l.timescale+e.start-p,d.hasOwnProperty(i.default.DURATION)&&(h.duration=d.duration/l.timescale),d.hasOwnProperty(i.default.ID)?h.id=d.id:h.id=null,d.Signal&&d.Signal.Binary?h.messageData=g.decodeArray(d.Signal.Binary.toString()):h.messageData=d.messageData||d.__cdata||d.__text,u.push(h)}}return u},getEssentialPropertiesForRepresentation:j,getEventStreamForAdaptationSet:function(e,t){var n,r,i;return e&&e.Period_asArray&&t&&t.period&&A(t.period.index)&&(r=e.Period_asArray[t.period.index])&&r.AdaptationSet_asArray&&A(t.index)&&(i=r.AdaptationSet_asArray[t.index])&&(n=i.InbandEventStream_asArray),B(n,null)},getEventStreamForRepresentation:function(e,t){var n,r,i,a;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&A(t.adaptation.period.index)&&(r=e.Period_asArray[t.adaptation.period.index])&&r.AdaptationSet_asArray&&A(t.adaptation.index)&&(i=r.AdaptationSet_asArray[t.adaptation.index])&&i.Representation_asArray&&A(t.index)&&(a=i.Representation_asArray[t.index])&&(n=a.InbandEventStream_asArray),B(n,t)},getUTCTimingSources:function(e){var t=N(e),n=!!e&&e.hasOwnProperty(i.default.AVAILABILITY_START_TIME),a=e?e.UTCTiming_asArray:null,o=[];return(t||n)&&a&&a.forEach((function(e){var t=new l.default;e.hasOwnProperty(r.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(i.default.VALUE)&&(t.value=e.value.toString(),o.push(t)))})),o},getBaseURLsFromElement:Y,getRepresentationSortFunction:I,getLocation:function(e){if(e&&e.hasOwnProperty(r.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getPatchLocation:function(e){if(e&&e.hasOwnProperty(i.default.PATCH_LOCATION))return e.PatchLocation=e.PatchLocation_asArray[0],e.PatchLocation},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(i.default.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(i.default.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(i.default.SERVICE_DESCRIPTION)){var n,r=T(e.ServiceDescription_asArray);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=null,s=null,u=null,l=null,c=null,d=null;for(var f in a)a.hasOwnProperty(f)&&(f===i.default.ID?o=a[f]:f===i.default.SERVICE_DESCRIPTION_SCOPE?s=a[f].schemeIdUri:f===i.default.SERVICE_DESCRIPTION_LATENCY?u={target:parseInt(a[f].target),max:parseInt(a[f].max),min:parseInt(a[f].min),referenceId:parseInt(a[f].referenceId)}:f===i.default.SERVICE_DESCRIPTION_PLAYBACK_RATE?l={max:parseFloat(a[f].max),min:parseFloat(a[f].min)}:f===i.default.SERVICE_DESCRIPTION_OPERATING_QUALITY?c={mediaType:a[f].mediaType,max:parseInt(a[f].max),min:parseInt(a[f].min),target:parseInt(a[f].target),type:a[f].type,maxQualityDifference:parseInt(a[f].maxQualityDifference)}:f===i.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH&&(d={mediaType:a[f].mediaType,max:parseInt(a[f].max),min:parseInt(a[f].min),target:parseInt(a[f].target)}));t.push({id:o,schemeIdUri:s,latency:u,playbackRate:l,operatingQuality:c,operatingBandwidth:d})}}catch(e){r.e(e)}finally{r.f()}}return t},getSupplementalProperties:function(e){var t={};if(e&&e.hasOwnProperty(i.default.SUPPLEMENTAL_PROPERTY)){var n,a=T(e.SupplementalProperty_asArray);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.hasOwnProperty(r.default.SCHEME_ID_URI)&&o.hasOwnProperty(i.default.VALUE)&&(t[o[r.default.SCHEME_ID_URI]]=o[i.default.VALUE])}}catch(e){a.e(e)}finally{a.f()}}return t},setConfig:function(e){e&&(e.errHandler&&(n=e.errHandler),e.BASE64&&(g=e.BASE64))}},t=Object(v.default)(S).getInstance().getLogger(e),e}A.__dashjs_factory_name="DashManifestModel",t.default=g.default.getSingletonFactory(A)},"./src/dash/models/PatchManifestModel.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dash/constants/DashConstants.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/core/Debug.js"),o=n("./src/dash/vo/SimpleXPath.js"),s=n("./src/dash/vo/PatchOperation.js");function u(){var e,t,n=this.context;return e={getIsPatch:function(e){return e&&e.hasOwnProperty(r.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function(e){return e&&e.hasOwnProperty(r.default.PUBLISH_TIME)?new Date(e[r.default.PUBLISH_TIME]):null},getOriginalPublishTime:function(e){return e&&e.hasOwnProperty(r.default.ORIGINAL_PUBLISH_TIME)?new Date(e[r.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(e){return e&&e[r.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function(e){return e?(e.__children||[]).map((function(e){var n=Object.keys(e)[0];if("add"!==n&&"remove"!==n&&"replace"!==n)return t.warn("Ignoring node of invalid action: ".concat(n)),null;var r=e[n],i=r.sel;if("add"===n&&r.type){if(!r.type.startsWith("@"))return t.warn("Ignoring add action for prefixed namespace declaration: ".concat(r.type,"=").concat(r.__text)),null;i="".concat(i,"/").concat(r.type)}var a=new o.default(i);if(!a.isValid())return t.warn("Ignoring action with invalid selector: ".concat(n," - ").concat(i)),null;var u=null;a.findsAttribute()?u=r.__text||"":"remove"!==n&&(u=r.__children.reduce((function(e,t){var n=Object.keys(t)[0];return"#text"!==n&&(e[n]=e[n]||[],e[n].push(t[n])),e}),{}));var l=new s.default(n,a,u);return"add"===n&&(l.position=r.pos),l})).filter((function(e){return!!e})):[]}},t=Object(a.default)(n).getInstance().getLogger(e),e}u.__dashjs_factory_name="PatchManifestModel",t.default=i.default.getSingletonFactory(u)},"./src/dash/parser/DashParser.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/dash/parser/objectiron.js"),a=n("./externals/xml2json.js"),o=n("./src/dash/parser/matchers/StringMatcher.js"),s=n("./src/dash/parser/matchers/DurationMatcher.js"),u=n("./src/dash/parser/matchers/DateTimeMatcher.js"),l=n("./src/dash/parser/matchers/NumericMatcher.js"),c=n("./src/dash/parser/maps/RepresentationBaseValuesMap.js"),d=n("./src/dash/parser/maps/SegmentValuesMap.js");function f(e){e=e||{};var t,n,r,f,h,p=this.context,m=e.debug;return t={parse:function(e){var t,r=window.performance.now();if(!(t=f.xml_str2json(e)))throw new Error("parsing the manifest failed");var i=window.performance.now();t.Patch?((t=t.Patch).add_asArray&&t.add_asArray.forEach((function(e){return h.run(e)})),t.replace_asArray&&t.replace_asArray.forEach((function(e){return h.run(e)}))):(t=t.MPD,h.run(t));var a=window.performance.now();return n.info("Parsing complete: ( xml2json: "+(i-r).toPrecision(3)+"ms, objectiron: "+(a-i).toPrecision(3)+"ms, total: "+((a-r)/1e3).toPrecision(3)+"s)"),t.protocol="DASH",t},getMatchers:function(){return r},getIron:function(){return h}},n=m.getLogger(t),r=[new s.default,new u.default,new l.default,new o.default],f=new a.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:r}),h=Object(i.default)(p).create({adaptationset:new c.default,period:new d.default}),t}f.__dashjs_factory_name="DashParser",t.default=r.default.getClassFactory(f)},"./src/dash/parser/maps/CommonProperty.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._merge=(n=t)&&n.length&&n.charAt(0)===n.charAt(0).toUpperCase()}var t,n,i;return t=e,(n=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},"./src/dash/parser/maps/MapNode.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dash/parser/maps/CommonProperty.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t||"",this._properties=[],this._children=i||[],Array.isArray(n)&&n.forEach((function(e){a._properties.push(new r.default(e))}))}var t,n,a;return t=e,(n=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&i(t.prototype,n),a&&i(t,a),e}();t.default=a},"./src/dash/parser/maps/RepresentationBaseValuesMap.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dash/parser/maps/MapNode.js"),i=n("./src/dash/constants/DashConstants.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=s(n);function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=[i.default.PROFILES,i.default.WIDTH,i.default.HEIGHT,i.default.SAR,i.default.FRAMERATE,i.default.AUDIO_SAMPLING_RATE,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.MAXIMUM_SAP_PERIOD,i.default.START_WITH_SAP,i.default.MAX_PLAYOUT_RATE,i.default.CODING_DEPENDENCY,i.default.SCAN_TYPE,i.default.FRAME_PACKING,i.default.AUDIO_CHANNEL_CONFIGURATION,i.default.CONTENT_PROTECTION,i.default.ESSENTIAL_PROPERTY,i.default.SUPPLEMENTAL_PROPERTY,i.default.INBAND_EVENT_STREAM];return t.call(this,i.default.ADAPTATION_SET,e,[new r.default(i.default.REPRESENTATION,e,[new r.default(i.default.SUB_REPRESENTATION,e)])])}return n}(r.default);t.default=c},"./src/dash/parser/maps/SegmentValuesMap.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dash/parser/maps/MapNode.js"),i=n("./src/dash/constants/DashConstants.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=s(n);function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=[i.default.SEGMENT_BASE,i.default.SEGMENT_TEMPLATE,i.default.SEGMENT_LIST];return t.call(this,i.default.PERIOD,e,[new r.default(i.default.ADAPTATION_SET,e,[new r.default(i.default.REPRESENTATION,e)])])}return n}(r.default);t.default=c},"./src/dash/parser/matchers/BaseMatcher.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._test=t,this._converter=n}var t,n,i;return t=e,(n=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},"./src/dash/parser/matchers/DateTimeMatcher.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dash/parser/matchers/BaseMatcher.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=60,c=60,d=1e3,f=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,e);var t=o(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,(function(e){return f.test(e.value)}),(function(e){var t,n=f.exec(e);if(t=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&parseFloat(n[7])*d||0),n[9]&&n[10]){var r=parseInt(n[9],10)*c+parseInt(n[10],10);t+=("+"===n[8]?-1:1)*r*l*d}return new Date(t)}))}return n}(r.default);t.default=h},"./src/dash/parser/matchers/DurationMatcher.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dash/parser/matchers/BaseMatcher.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/constants/DashConstants.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,f=31536e3,h=2592e3,p=86400,m=3600,g=60,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=u(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,(function(e){for(var t=[a.default.MIN_BUFFER_TIME,a.default.MEDIA_PRESENTATION_DURATION,a.default.MINIMUM_UPDATE_PERIOD,a.default.TIMESHIFT_BUFFER_DEPTH,a.default.MAX_SEGMENT_DURATION,a.default.MAX_SUBSEGMENT_DURATION,a.default.SUGGESTED_PRESENTATION_DELAY,a.default.START,i.default.START_TIME,a.default.DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return d.test(e.value);return!1}),(function(e){var t=d.exec(e),n=parseFloat(t[3]||0)*f+parseFloat(t[5]||0)*h+parseFloat(t[7]||0)*p+parseFloat(t[9]||0)*m+parseFloat(t[11]||0)*g+parseFloat(t[13]||0);return void 0!==t[1]&&(n=-n),n}))}return n}(r.default);t.default=v},"./src/dash/parser/matchers/NumericMatcher.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dash/parser/matchers/BaseMatcher.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,e);var t=o(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,(function(e){return l.test(e.value)}),(function(e){return parseFloat(e)}))}return n}(r.default);t.default=c},"./src/dash/parser/matchers/StringMatcher.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dash/parser/matchers/BaseMatcher.js"),i=n("./src/dash/constants/DashConstants.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=u(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,(function(e,t){var n,r=(o(n={},i.default.MPD,[i.default.ID,i.default.PROFILES]),o(n,i.default.PERIOD,[i.default.ID]),o(n,i.default.BASE_URL,[i.default.SERVICE_LOCATION,i.default.BYTE_RANGE]),o(n,i.default.SEGMENT_BASE,[i.default.INDEX_RANGE]),o(n,i.default.INITIALIZATION,[i.default.RANGE]),o(n,i.default.REPRESENTATION_INDEX,[i.default.RANGE]),o(n,i.default.SEGMENT_LIST,[i.default.INDEX_RANGE]),o(n,i.default.BITSTREAM_SWITCHING,[i.default.RANGE]),o(n,i.default.SEGMENT_URL,[i.default.MEDIA_RANGE,i.default.INDEX_RANGE]),o(n,i.default.SEGMENT_TEMPLATE,[i.default.INDEX_RANGE,i.default.MEDIA,i.default.INDEX,i.default.INITIALIZATION_MINUS,i.default.BITSTREAM_SWITCHING_MINUS]),o(n,i.default.ASSET_IDENTIFIER,[i.default.VALUE,i.default.ID]),o(n,i.default.EVENT_STREAM,[i.default.VALUE]),o(n,i.default.ADAPTATION_SET,[i.default.PROFILES,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.CONTENT_TYPE]),o(n,i.default.FRAME_PACKING,[i.default.VALUE,i.default.ID]),o(n,i.default.AUDIO_CHANNEL_CONFIGURATION,[i.default.VALUE,i.default.ID]),o(n,i.default.CONTENT_PROTECTION,[i.default.VALUE,i.default.ID]),o(n,i.default.ESSENTIAL_PROPERTY,[i.default.VALUE,i.default.ID]),o(n,i.default.SUPPLEMENTAL_PROPERTY,[i.default.VALUE,i.default.ID]),o(n,i.default.INBAND_EVENT_STREAM,[i.default.VALUE,i.default.ID]),o(n,i.default.ACCESSIBILITY,[i.default.VALUE,i.default.ID]),o(n,i.default.ROLE,[i.default.VALUE,i.default.ID]),o(n,i.default.RATING,[i.default.VALUE,i.default.ID]),o(n,i.default.VIEWPOINT,[i.default.VALUE,i.default.ID]),o(n,i.default.CONTENT_COMPONENT,[i.default.CONTENT_TYPE]),o(n,i.default.REPRESENTATION,[i.default.ID,i.default.DEPENDENCY_ID,i.default.MEDIA_STREAM_STRUCTURE_ID]),o(n,i.default.SUBSET,[i.default.ID]),o(n,i.default.METRICS,[i.default.METRICS_MINUS]),o(n,i.default.REPORTING,[i.default.VALUE,i.default.ID]),n);if(r.hasOwnProperty(t)){var a=r[t];return void 0!==a&&a.indexOf(e.name)>=0}return!1}),(function(e){return String(e)}))}return n}(r.default);t.default=d},"./src/dash/parser/objectiron.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){function t(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function n(e,n,r){for(var a=0,o=e.length;a<o;++a){var s=e[a];if(n[s.name])if(r[s.name]){if(s.merge){var u=n[s.name],l=r[s.name];"object"===i(u)&&"object"===i(l)?t(u,l):r[s.name]=u+l}}else r[s.name]=n[s.name]}}function r(e,t){for(var i=0,a=e.children.length;i<a;++i){var o=e.children[i],s=t[o.name+"_asArray"];if(s)for(var u=0,l=s.length;u<l;++u){var c=s[u];n(e.properties,t,c),r(o,c)}}}return{run:function(t){if(null===t||"object"!==i(t))return t;if(t.Period_asArray&&"period"in e)for(var n=e.period,a=t.Period_asArray,o=0,s=a.length;o<s;++o){var u=a[o];if(r(n,u),"adaptationset"in e){var l=u.AdaptationSet_asArray;if(l)for(var c=e.adaptationset,d=0,f=l.length;d<f;++d)r(c,l[d])}}return t}}}a.__dashjs_factory_name="ObjectIron";var o=r.default.getClassFactory(a);t.default=o},"./src/dash/utils/ListSegmentsGetter.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/utils/SegmentsUtils.js");function o(e,t){var n=(e=e||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function o(e,i){if(r(),!e)return null;var o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,s=o.SegmentURL_asArray.length,u=e&&!isNaN(e.startNumber)?e.startNumber:1,l=Math.max(u-1,0),c=Math.max(i-l,0),d=null;if(c<s){var f=o.SegmentURL_asArray[c];(d=Object(a.getIndexBasedSegment)(n,t,e,i))&&(d.replacementTime=(u+i-1)*e.segmentDuration,d.media=f.media?f.media:"",d.mediaRange=f.mediaRange,d.indexRange=f.indexRange)}return d}return{getSegmentByIndex:o,getSegmentByTime:function(e,t){if(r(),!e)return null;var i=e.segmentDuration;if(isNaN(i))return null;var a=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return o(e,Math.floor(a/i))},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!e)return t;var n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,r=e&&!isNaN(e.startNumber)?e.startNumber:1,i=Math.max(r-1,0);return t.numberOfSegments=i+n.SegmentURL_asArray.length,t}}}o.__dashjs_factory_name="ListSegmentsGetter";var s=r.default.getClassFactory(o);t.default=s},"./src/dash/utils/Round10.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"default",(function(){return i}));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"round10",value:function(e,t){return function(e,t,n){return void 0===n||0==+n?Math[e](t):(n=+n,null===(t=+t)||isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))}("round",e,t)}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}()},"./src/dash/utils/SegmentBaseGetter.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js");function a(e){var t=(e=e||{}).timelineConverter;function n(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function r(e,t){if(n(),!e)return null;var r,i=e.segments?e.segments.length:-1;if(t<i&&(r=e.segments[t])&&r.index===t)return r;for(var a=0;a<i;a++)if((r=e.segments[a])&&r.index===t)return r;return null}return{getSegmentByIndex:r,getSegmentByTime:function(e,t){return n(),r(e,function(e,t){if(!e)return-1;var n,r,i,a,o,s=e.segments,u=s?s.length:null,l=-1;if(s&&u>0)for(o=0;o<u;o++)if(r=s[o],i=r.presentationStartTime,a=r.duration,t+(n=a/2)>=i&&t-n<i+a){l=r.index;break}return l}(e,t))},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&e.segments?(t.numberOfSegments=e.segments.length,t):t}}}a.__dashjs_factory_name="SegmentBaseGetter";var o=r.default.getClassFactory(a);t.default=o},"./src/dash/utils/SegmentsUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"unescapeDollarsInTemplate",(function(){return a})),n.d(t,"replaceIDForTemplate",(function(){return o})),n.d(t,"replaceTokenForTemplate",(function(){return s})),n.d(t,"getIndexBasedSegment",(function(){return c})),n.d(t,"getTimeBasedSegment",(function(){return d}));var r=n("./src/dash/vo/Segment.js");function i(e,t){for(;e.length<t;)e="0"+e;return e}function a(e){return e?e.split("$$").join("$"):e}function o(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)}function s(e,t,n){var r,a,o,s,u,l,c=t.length,d="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((a=e.indexOf("$",r+c))<0)return e;if((o=e.indexOf("%0",r+c))>r&&o<a)switch(s=e.charAt(a-1),u=parseInt(e.substring(o+d,a-1),10),s){case"d":case"i":case"u":l=i(n.toString(),u);break;case"x":l=i(n.toString(16),u);break;case"X":l=i(n.toString(16),u).toUpperCase();break;case"o":l=i(n.toString(8),u);break;default:return e}else l=n;e=e.substring(0,r)+l+e.substring(a+1)}}function u(e,t,n,i,a,o,s,u){var l,c=new r.default;return c.representation=e,c.duration=t,c.presentationStartTime=n,c.mediaStartTime=i,c.availabilityStartTime=a.calcAvailabilityStartTimeFromPresentationTime(o,e,s),c.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(o+t,e,s),c.wallStartTime=a.calcWallTimeForSegment(c,s),c.replacementNumber=(l=u,c.representation.startNumber+l),c.index=u,c}function l(e,t,n,r){var i=t.adaptation.period;if(isFinite(i.duration)&&i.start+i.duration<=n.presentationStartTime)return!1;if(r){if("INF"===t.availabilityTimeOffset)return!0;var a=e.getClientReferenceTime();return n.availabilityStartTime.getTime()<=a&&(!isFinite(n.availabilityEndTime)||n.availabilityEndTime.getTime()>=a)}return!0}function c(e,t,n,r){var i,a,o;i=n.segmentDuration,isNaN(i)&&(i=n.adaptation.period.duration),a=parseFloat((n.adaptation.period.start+r*i).toFixed(5)),o=parseFloat((a+i).toFixed(5));var s=u(n,i,a,e.calcMediaTimeFromPresentationTime(a,n),e,o,t,r);return l(e,n,s,t)?s:null}function d(e,t,n,r,i,a,o,c,d,f){var h,p,m=r/a,g=i/a;return h=e.calcPresentationTimeFromMediaTime(m,n),l(e,n,p=u(n,g,h,m,e,h+g,t,d),t)?(p.replacementTime=f||r,o=s(o,"Number",p.replacementNumber),o=s(o,"Time",p.replacementTime),p.media=o,p.mediaRange=c,p):null}},"./src/dash/utils/TemplateSegmentsGetter.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/utils/SegmentsUtils.js");function o(e,t){var n=(e=e||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function o(e,i){if(r(),!e)return null;var o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate;i=Math.max(i,0);var s=Object(a.getIndexBasedSegment)(n,t,e,i);if(s){s.replacementTime=Math.round((i-1)*e.segmentDuration*e.timescale,10);var u=o.media;u=Object(a.replaceTokenForTemplate)(u,"Number",s.replacementNumber),u=Object(a.replaceTokenForTemplate)(u,"Time",s.replacementTime),s.media=u}return s}return{getSegmentByIndex:o,getSegmentByTime:function(e,t){if(r(),!e)return null;var i=e.segmentDuration;if(isNaN(i))return null;var a=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return o(e,Math.floor(a/i))},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!e)return t;var n=e.segmentDuration;return isNaN(n)?t.numberOfSegments=1:t.numberOfSegments=Math.ceil(e.adaptation.period.duration/n),t}}}o.__dashjs_factory_name="TemplateSegmentsGetter";var s=r.default.getClassFactory(o);t.default=s},"./src/dash/utils/TimelineConverter.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/dash/constants/DashConstants.js"),s=n("./src/dash/models/DashManifestModel.js"),u=n("./src/core/Settings.js"),l=n("./src/streaming/constants/Constants.js"),c=n("./src/streaming/MediaPlayerEvents.js"),d=n("./src/streaming/constants/ConformanceViolationConstants.js");function f(){var e,t,n,a,f=this.context,h=Object(r.default)(f).getInstance(),p=Object(u.default)(f).getInstance();function m(e){a=e}function g(e,t,n,r){var i,a=t.adaptation.period.mpd,o=a.availabilityStartTime;if(r)i=n&&a.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(o.getTime()+1e3*(e+a.timeShiftBufferDepth)):a.availabilityEndTime;else if(n){var s=t.availabilityTimeOffset;i=new Date(o.getTime()+1e3*(e-s))}else i=o;return i}function v(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*a)/1e3}function y(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function _(e){var n={start:NaN,end:NaN},r=e[0].getAdapter().getRegularPeriods()[0],i=v(new Date,r);if(!e||0===e.length)return{range:n,now:i};e.forEach((function(e){var r=e.getAdapter(),a=r.getMediaInfoForType(e.getStreamInfo(),l.default.VIDEO)||r.getMediaInfoForType(e.getStreamInfo(),l.default.AUDIO),s=r.getVoRepresentations(a)[0],u={start:NaN,end:NaN};if(s)if(s.segmentInfoType===o.default.SEGMENT_TIMELINE)u=function(e){var n,r,i,a,o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],s=t.getRepresentationFor(e.index,o),u=s.SegmentTemplate.SegmentTimeline,l=s.SegmentTemplate.timescale,c=u.S_asArray,d={start:0,end:0},f=0;for(d.start=y(c[0].t/l,e),i=0,a=c.length;i<a;i++)n=c[i],r=0,n.hasOwnProperty("r")&&(r=n.r),f+=n.d/l*(1+r);return d.end=d.start+f,d}(s);else{var c=s.adaptation.period;u.start=c.start,u.end=Math.max(i,c.start+c.duration)}!isNaN(u.start)&&(isNaN(n.start)||n.start>u.start)&&(n.start=u.start),!isNaN(u.end)&&(isNaN(n.end)||n.end<u.end)&&(n.end=u.end)})),n.end=Math.min(i,n.end);var a=T(e,n.end,!0);return n.end=isNaN(a)?n.end:a,n.start=r&&r.mpd&&r.mpd.timeShiftBufferDepth&&!isNaN(r.mpd.timeShiftBufferDepth)&&!isNaN(n.end)?Math.max(n.end-r.mpd.timeShiftBufferDepth,n.start):n.start,n.start=T(e,n.start),{range:n,now:i}}function b(e,t){n=e-t.end}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var r=0,i=!1,a=NaN;!i&&r<e.length;){var o=e[r].getStreamInfo();o.start<=t&&(!isFinite(o.duration)||o.start+o.duration>=t)?(a=t,i=!0):!n&&o.start>t&&(isNaN(a)||o.start<a)?a=o.start:n&&o.start+o.duration<t&&(isNaN(a)||o.start+o.duration>a)&&(a=o.start+o.duration),r+=1}return a}catch(e){return t}}function E(e){void 0===e.offset||isNaN(e.offset)||m(e.offset/1e3)}function S(){a=0,n=0}function w(){h.off(i.default.UPDATE_TIME_SYNC_OFFSET,E,this),S()}return e={initialize:function(){S(),h.on(i.default.UPDATE_TIME_SYNC_OFFSET,E,this)},getClientTimeOffset:function(){return a},setClientTimeOffset:m,getClientReferenceTime:function(){return Date.now()-1e3*n+1e3*a},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return g(e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return g(e,t,n,!0)},calcPresentationTimeFromWallTime:v,calcPresentationTimeFromMediaTime:y,calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcWallTimeForSegment:function(e,t){var n,r,i;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i},calcTimeShiftBufferWindow:function(e,t){if(!t)return function(e){var t={start:NaN,end:NaN},n=0,r=NaN;return e.forEach((function(e){var t=e.getStreamInfo();n+=t.duration,(isNaN(r)||t.start<r)&&(r=t.start)})),t.start=r,t.end=r+n,t}(e);if(p.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var n=_(e);return b(n.now,n.range),n.range}return function(e){var t={start:NaN,end:NaN};if(!e||0===e.length)return t;var n=e[0].getAdapter().getRegularPeriods()[0],r=v(new Date,n),i=n.mpd.timeShiftBufferDepth,a=isNaN(i)?0:r-i;if(t.start=T(e,a),t.end=!isNaN(t.start)&&r<t.start?r:T(e,r,!0),!isNaN(i)&&t.end<r-i&&(t.end=NaN),p.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var o=_(e);if(o.range.end<t.start)return h.trigger(c.default.CONFORMANCE_VIOLATION,{level:d.default.LEVELS.WARNING,event:d.default.EVENTS.INVALID_DVR_WINDOW}),b(o.now,o.range),o.range}return t}(e)},reset:w},t=Object(s.default)(f).getInstance(),w(),e}f.__dashjs_factory_name="TimelineConverter",t.default=a.default.getSingletonFactory(f)},"./src/dash/utils/TimelineSegmentsGetter.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/utils/SegmentsUtils.js");function o(e,t){var n=(e=e||{}).timelineConverter,r=e.dashMetrics;function o(){if(!n)throw new Error(i.default.MISSING_CONFIG_ERROR)}function s(e,t){var n,r,i,a,o,s,l,c=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,d=c.SegmentTimeline,f=c.SegmentURL_asArray,h=0,p=0,m=-1;l=e.timescale;var g=!1;for(i=0,a=(n=d.S_asArray).length;i<a&&!g;i++)for(s=0,(r=n[i]).hasOwnProperty("r")&&(s=r.r),r.hasOwnProperty("t")&&(p=(h=r.t)/l),s<0&&(s=u(e,n[i+1],r,l,p)),o=0;o<=s&&!g;o++)(g=t(h,p,c,f,r,l,++m,i))&&(e.segmentDuration=r.d/l),p=(h+=r.d)/l}function u(e,t,i,a,o){var s;if(t&&t.hasOwnProperty("t"))s=t.t/a;else try{var u=0;if(isNaN(e.adaptation.period.start)||isNaN(e.adaptation.period.duration)||!isFinite(e.adaptation.period.duration)){var l=r.getCurrentDVRInfo();u=isNaN(l.end)?0:l.end}else u=e.adaptation.period.start+e.adaptation.period.duration;s=n.calcMediaTimeFromPresentationTime(u,e),e.segmentDuration=i.d/a}catch(e){s=0}return Math.max(Math.ceil((s-o)/(i.d/a))-1,0)}return{getSegmentByIndex:function(e,r,i){if(o(),!e)return null;var u=null,l=!1;return s(e,(function(r,o,s,c,d,f,h,p){if(l||i<0){var m=s.media,g=d.mediaRange;return c&&(m=c[p].media||"",g=c[p].mediaRange),u=Object(a.getTimeBasedSegment)(n,t,e,r,d.d,f,m,g,h,d.tManifest),!0}return o>=i-.5*d.d/f&&(l=!0),!1})),u},getSegmentByTime:function(e,r){if(o(),!e)return null;void 0===r&&(r=null);var i=null,u=n.calcMediaTimeFromPresentationTime(r,e);return s(e,(function(r,o,s,l,c,d,f,h){if(u<o+c.d/d&&u>=o){var p=s.media,m=c.mediaRange;return l&&(p=l[h].media||"",m=l[h].mediaRange),i=Object(a.getTimeBasedSegment)(n,t,e,r,c.d,d,p,m,f,c.tManifest),!0}return!1})),i},getMediaFinishedInformation:function(e){if(!e)return 0;var t,n,r,i,a,o,s,l=(e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList).SegmentTimeline,c=0,d=0,f=0;for(s=e.timescale,i=(t=l.S_asArray).length,r=0;r<i;r++)for(o=0,(n=t[r]).hasOwnProperty("r")&&(o=n.r),n.hasOwnProperty("t")&&(d=(c=n.t)/s),o<0&&(o=u(e,t[r+1],n,s,d)),a=0;a<=o;a++)f++,d=(c+=n.d)/s;return{numberOfSegments:f,mediaTimeOfLastSignaledSegment:d}}}}o.__dashjs_factory_name="TimelineSegmentsGetter";var s=r.default.getClassFactory(o);t.default=s},"./src/dash/vo/AdaptationSet.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.period=null,this.index=-1,this.type=null}},"./src/dash/vo/BaseURL.js":function(e,t,n){"use strict";n.r(t);var r=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t||"",this.serviceLocation=n||t||"",this.dvb_priority=r||1,this.dvb_weight=i||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};r.DEFAULT_DVB_PRIORITY=1,r.DEFAULT_DVB_WEIGHT=1,t.default=r},"./src/dash/vo/Event.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN}},"./src/dash/vo/EventStream.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},"./src/dash/vo/ManifestInfo.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null}},"./src/dash/vo/MediaInfo.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1}},"./src/dash/vo/Mpd.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN}},"./src/dash/vo/PatchOperation.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.action=t,this.xpath=n,this.value=r,this.position=null}var t,n,i;return t=e,(n=[{key:"getMpdTarget",value:function(e){var t="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(e,t)}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},"./src/dash/vo/Period.js":function(e,t,n){"use strict";n.r(t);var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};r.DEFAULT_ID="defaultId",t.default=r},"./src/dash/vo/ProducerReferenceTime.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},"./src/dash/vo/Representation.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dash/constants/DashConstants.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}var t,n,a;return t=e,(n=[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==r.default.BASE_URL&&this.segmentInfoType!==r.default.SEGMENT_BASE&&!this.indexRange}}])&&i(t.prototype,n),a&&i(t,a),e}();t.default=a},"./src/dash/vo/RepresentationInfo.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null}},"./src/dash/vo/Segment.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},"./src/dash/vo/SimpleXPath.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.valid="/"==t[0],this.path=t.split("/").filter((function(e){return 0!==e.length})).map((function(e){var t={name:e},r=e.indexOf("[");if(-1!=r){t.name=e.substring(0,r);var i=e.substring(r+1,e.length-1);n.valid=n.valid&&-1==i.indexOf("[");var a=i.indexOf("=");-1!=a?(t.attribute={name:i.substring(1,a),value:i.substring(a+1)},-1!=["'",'"'].indexOf(t.attribute.value[0])&&(t.attribute.value=t.attribute.value.substring(1,t.attribute.value.length-1))):t.position=parseInt(i,10)-1}return t}))}var t,n,i;return t=e,(n=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(e,t){for(var n=null,r=e,i=1,a="MPD";i<this.path.length&&null!==r;){n=r;var o=this.path[i];if(a=o.name,i!==this.path.length-1||!a.startsWith("@")){var s=n[a+"_asArray"]||[];0===s.length&&n[a]&&s.push(n[a]),o.position?r=s[o.position]||null:o.attribute?function(){var e=o.attribute;r=s.filter((function(t){return t[e.name]==e.value}))[0]||null}():r=s[0]||null}i++}return null===r?null:a.startsWith("@")?{name:a.substring(1),leaf:r,target:r}:{name:a,leaf:r,target:t?n:r}}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},"./src/dash/vo/StreamInfo.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0}},"./src/dash/vo/UTCTiming.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""}},"./src/streaming/FragmentLoader.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/net/URLLoader.js"),a=n("./src/streaming/vo/HeadRequest.js"),o=n("./src/streaming/vo/DashJSError.js"),s=n("./src/core/FactoryMaker.js");function u(e){e=e||{};var t,n,s=this.context,u=e.eventBus,l=e.events,c=e.urlUtils,d=e.errors,f=e.streamId;return t={checkForExistence:function(e){var t=function(t){u.trigger(l.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var r=new a.default(e.url);n.load({request:r,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)},load:function(e){var r=function(n,r){u.trigger(l.LOADING_COMPLETED,{request:e,response:n||null,error:r||null,sender:t})};e?n.load({request:e,progress:function(n){u.trigger(l.LOADING_PROGRESS,{request:e,stream:n.stream,streamId:f}),n.data&&u.trigger(l.LOADING_DATA_PROGRESS,{request:e,response:n.data||null,error:null,sender:t})},success:function(e){r(e)},error:function(e,t,n){r(void 0,new o.default(d.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,t))},abort:function(e){e&&u.trigger(l.LOADING_ABANDONED,{mediaType:e.mediaType,request:e,sender:t})}}):r(void 0,new o.default(d.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,d.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){n&&n.abort()},reset:function(){n&&(n.abort(),n=null)}},n=Object(i.default)(s).create({errHandler:e.errHandler,errors:d,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:c,constants:r.default,boxParser:e.boxParser,dashConstants:e.dashConstants,requestTimeout:e.settings.get().streaming.fragmentRequestTimeout}),t}u.__dashjs_factory_name="FragmentLoader",t.default=s.default.getClassFactory(u)},"./src/streaming/ManifestLoader.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/streaming/controllers/XlinkController.js"),o=n("./src/streaming/net/URLLoader.js"),s=n("./src/streaming/utils/URLUtils.js"),u=n("./src/streaming/vo/TextRequest.js"),l=n("./src/streaming/vo/DashJSError.js"),c=n("./src/streaming/vo/metrics/HTTPRequest.js"),d=n("./src/core/EventBus.js"),f=n("./src/core/events/Events.js"),h=n("./src/core/errors/Errors.js"),p=n("./src/core/FactoryMaker.js"),m=n("./src/dash/parser/DashParser.js");function g(e){e=e||{};var t,n,p,g,v,y=this.context,_=e.debug,b=Object(d.default)(y).getInstance(),T=Object(s.default)(y).getInstance(),E=e.mssHandler,S=e.errHandler;function w(e){b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return t={load:function(e){var t=new u.default(e,c.HTTPRequest.MPD_TYPE);p.load({request:t,success:function(t,i,a){var o,s,u;if(g)if(a&&a!==e?(s=T.parseBaseUrl(a),o=a):(T.isRelative(e)&&(e=T.resolve(e,window.location.href)),s=T.parseBaseUrl(e)),"No Content"!=i)if(null===v&&(v=function(e){var t=null;return e.indexOf("SmoothStreamingMedia")>-1?(E&&(t=E.createMssParser(),E.registerEvents()),t):e.indexOf("MPD")>-1||e.indexOf("Patch")>-1?Object(m.default)(y).create({debug:_}):t}(t)),null!==v){g.setMatchers(v.getMatchers()),g.setIron(v.getIron());try{u=v.parse(t)}catch(t){return void b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))})}u?(u.url=o||e,u.originalUrl||(u.originalUrl=u.url),u.hasOwnProperty(r.default.LOCATION)&&(s=T.parseBaseUrl(u.Location_asArray[0]),n.debug("BaseURI set by Location to: "+s)),u.baseUri=s,u.loadedTime=new Date,g.resolveManifestOnLoad(u),b.trigger(f.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:t})):b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))})}else b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))});else b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(t,n,r){b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(e,", ").concat(r))})}})},reset:function(){b.off(f.default.XLINK_READY,w,t),E&&E.reset(),g&&(g.reset(),g=null),p&&(p.abort(),p=null)}},n=_.getLogger(t),b.on(f.default.XLINK_READY,w,t),p=Object(o.default)(y).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:T,constants:r.default,dashConstants:i.default,errors:h.default}),g=Object(a.default)(y).create({errHandler:S,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),v=null,t}g.__dashjs_factory_name="ManifestLoader";var v=p.default.getClassFactory(g);t.default=v},"./src/streaming/ManifestUpdater.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/streaming/MediaPlayerEvents.js"),o=n("./src/core/FactoryMaker.js"),s=n("./src/core/Debug.js"),u=n("./src/core/errors/Errors.js"),l=n("./src/dash/constants/DashConstants.js"),c=n("./src/streaming/utils/URLUtils.js");function d(){var e,t,n,o,d,f,h,p,m,g,v,y,_=this.context,b=Object(r.default)(_).getInstance(),T=Object(c.default)(_).getInstance();function E(){n=NaN,h=!1,d=!0,f=!1,S()}function S(){null!==o&&(clearTimeout(o),o=null)}function w(e){S(),f||(isNaN(e)&&!isNaN(n)&&(e=1e3*n),isNaN(e)||(t.debug("Refresh manifest in "+e+" milliseconds."),o=setTimeout(L,e)))}function A(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h=!0;var t=m.getValue(),n=t.url,r=g.getPatchLocation(t),i=g.getLocation(t);r&&!e?n=r:i&&(n=i),T.isRelative(n)&&(n=T.resolve(n,t.url)),p.load(n)}function M(e){if(e){if(g.getIsPatch(e)){var r=e;e=m.getValue();var a=g.isPatchValid(e,r),o=a;if(a){var s=g.getPublishTime(e);o=g.applyPatchToManifest(e,r);var u=g.getPublishTime(e);o=s.getTime()!=u.getTime()}if(!o)return t.debug("Patch provided is invalid, performing full manifest refresh"),void A(!0);e.loadedTime=new Date}}else(e=m.getValue()).loadedTime=new Date;if(m.getValue()&&m.getValue().type===l.default.DYNAMIC&&e.type===l.default.STATIC)return b.trigger(i.default.DYNAMIC_TO_STATIC),h=!1,void(f=!0);m.setValue(e);var c=new Date,p=(c.getTime()-e.loadedTime.getTime())/1e3;1e3*(n=g.getManifestUpdatePeriod(e,p))>2147483647&&(n=2147483.647),b.trigger(i.default.MANIFEST_UPDATED,{manifest:e}),t.info("Manifest has been refreshed at "+c+"["+c.getTime()/1e3+"] "),d||w()}function L(){d||(h?w(y.get().streaming.manifestUpdateRetryInterval):A())}function C(e){e.error?e.error.code===u.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&v.error(e.error):M(e.manifest)}function D(){d=!1,w()}function k(){(d=!y.get().streaming.scheduling.scheduleWhilePaused)&&S()}function P(){h=!1}return e={initialize:function(){E(),b.on(i.default.STREAMS_COMPOSED,P,this),b.on(a.default.PLAYBACK_STARTED,D,this),b.on(a.default.PLAYBACK_PAUSED,k,this),b.on(i.default.INTERNAL_MANIFEST_LOADED,C,this)},setManifest:function(e){M(e)},refreshManifest:A,getIsUpdating:function(){return h},setConfig:function(e){e&&(e.manifestModel&&(m=e.manifestModel),e.adapter&&(g=e.adapter),e.manifestLoader&&(p=e.manifestLoader),e.errHandler&&(v=e.errHandler),e.settings&&(y=e.settings))},reset:function(){b.off(a.default.PLAYBACK_STARTED,D,this),b.off(a.default.PLAYBACK_PAUSED,k,this),b.off(i.default.STREAMS_COMPOSED,P,this),b.off(i.default.INTERNAL_MANIFEST_LOADED,C,this),E()}},t=Object(s.default)(_).getInstance().getLogger(e),e}d.__dashjs_factory_name="ManifestUpdater",t.default=o.default.getClassFactory(d)},"./src/streaming/MediaPlayer.js":function(e,t,n){"use strict";n.r(t);var r=n("./externals/cea608-parser.js"),i=n.n(r),a=n("./src/streaming/constants/Constants.js"),o=n("./src/dash/constants/DashConstants.js"),s=n("./src/streaming/constants/MetricsConstants.js"),u=n("./src/streaming/controllers/PlaybackController.js"),l=n("./src/streaming/controllers/StreamController.js"),c=n("./src/streaming/controllers/GapController.js"),d=n("./src/streaming/controllers/CatchupController.js"),f=n("./src/streaming/controllers/ServiceDescriptionController.js"),h=n("./src/streaming/controllers/MediaController.js"),p=n("./src/streaming/controllers/BaseURLController.js"),m=n("./src/streaming/ManifestLoader.js"),g=n("./src/streaming/utils/ErrorHandler.js"),v=n("./src/streaming/utils/Capabilities.js"),y=n("./src/streaming/utils/CapabilitiesFilter.js"),_=n("./src/streaming/utils/RequestModifier.js"),b=n("./src/streaming/models/URIFragmentModel.js"),T=n("./src/streaming/models/ManifestModel.js"),E=n("./src/streaming/models/MediaPlayerModel.js"),S=n("./src/streaming/controllers/AbrController.js"),w=n("./src/streaming/net/SchemeLoaderFactory.js"),A=n("./src/streaming/models/VideoModel.js"),M=n("./src/streaming/models/CmcdModel.js"),L=n("./src/streaming/utils/DOMStorage.js"),C=n("./src/core/Debug.js"),D=n("./src/core/errors/Errors.js"),k=n("./src/core/EventBus.js"),P=n("./src/core/events/Events.js"),I=n("./src/streaming/MediaPlayerEvents.js"),O=n("./src/core/FactoryMaker.js"),R=n("./src/core/Settings.js"),x=n("./src/core/Version.js"),N=n("./src/dash/controllers/SegmentBaseController.js"),j=n("./src/dash/DashAdapter.js"),F=n("./src/dash/DashMetrics.js"),U=n("./src/dash/utils/TimelineConverter.js"),B=n("./src/streaming/vo/metrics/HTTPRequest.js"),Y=n("./externals/base64.js"),H=n.n(Y),V=n("./node_modules/codem-isoboxer/dist/iso_boxer.js"),G=n.n(V),K=n("./src/streaming/vo/DashJSError.js"),W=n("./src/streaming/utils/SupervisorTools.js"),q=n("./src/streaming/ManifestUpdater.js"),z=n("./src/streaming/utils/URLUtils.js"),X=n("./src/streaming/utils/BoxParser.js"),Q=n("./src/streaming/text/TextController.js"),$=n("./src/streaming/models/CustomParametersModel.js");function J(){var e,t,n,r,Y,V,J,Z,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,de,fe,he,pe,me,ge,ve,ye,_e,be,Te,Ee,Se,we,Ae,Me,Le,Ce="You must first call initialize() and set a source before calling this method",De="You must first call initialize() and set a valid source and view before calling this method",ke="You must first call attachView() to set the video element before calling this method",Pe="You must first call attachSource() with a valid source before calling this method",Ie="MediaPlayer not initialized!",Oe=this.context,Re=Object(k.default)(Oe).getInstance(),xe=Object(R.default)(Oe).getInstance(),Ne=Object(C.default)(Oe).getInstance({settings:xe});function je(){Qe(null),ze(null),r=null,ie&&(ie.reset(),ie=null),ae&&(ae.reset(),ae=null),ce&&(ce.reset(),ce=null),xe.reset(),se&&(se.reset(),se=null)}function Fe(){return!!n&&!!we.getElement()}function Ue(){return Object(x.getVersionString)()}function Be(){if(!J)throw De;return ye.isPaused()}function Ye(e){var t=me&&me.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,n=Te.getCurrentDVRInfo(t);if(!n)return 0;var r=ye.getLiveDelay(),i=n.range.start+e;return i>n.range.end-r&&(i=n.range.end-r),i}function He(e){if(!J)throw De;var t=qe().currentTime;if(void 0!==e)t=me.getTimeRelativeToStreamId(t,e);else if(ye.getIsDynamic()){var n=me&&me.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,r=Te.getCurrentDVRInfo(n);t=null===r||0===t?0:Math.max(0,t-r.range.start)}return t}function Ve(){if(!J)throw De;var e=qe().duration;if(ye.getIsDynamic()){var t=me&&me.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,n=Te.getCurrentDVRInfo(t);e=n?n.range.end-n.range.start:0}return e}function Ge(e){Object(W.checkParameterType)(e,"boolean"),Z=e}function Ke(){ce.restoreDefaultUTCTimingSources()}function We(){return Te}function qe(){if(!we.getElement())throw ke;return we.getElement()}function ze(e){if(!Y)throw Ie;we.setElement(e),e&&(et(),function(){if(!ae){var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(Oe).create();ae=t.createMetricsReporting({debug:Ne,eventBus:Re,mediaElement:qe(),adapter:ue,dashMetrics:Te,mediaPlayerModel:le,events:P.default,constants:a.default,metricsConstants:s.default})}}}(),function(){if(!oe){var e=dashjs.MssHandler;"function"==typeof e&&(D.default.extend(e.errors),oe=e(Oe).create({eventBus:Re,mediaPlayerModel:le,dashMetrics:Te,manifestModel:Ee,playbackController:ye,streamController:me,protectionController:ie,baseURLController:fe,errHandler:de,events:P.default,constants:a.default,debug:Ne,initSegmentType:B.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:H.a,ISOBoxer:G.a,settings:xe}))}}(),me&&me.switchToVideoElement()),J&&Je(),rt()}function Xe(e){if(!V)throw Ce;var t=me.getActiveStreamInfo();return t?re.getTracksFor(e,t.id):[]}function Qe(e){if(!Y)throw Ie;"string"==typeof e&&Ae.initialize(e),n=e,(V||J)&&Je(),Fe()&&rt()}function $e(){if(!V)throw Ce;var e=me.getActiveStreamInfo();return e?me.getStreamById(e.id):null}function Je(){J=!1,V=!1,ue.reset(),me.reset(),ve.reset(),be.reset(),ye.reset(),_e.reset(),ee.reset(),re.reset(),Le.reset(),ie&&(xe.get().streaming.protection.keepProtectionMediaKeys?ie.stop():(ie.reset(),ie=null,et())),ge.reset(),Se.reset()}function Ze(){return Object(m.default)(Oe).create({debug:Ne,errHandler:de,dashMetrics:Te,mediaPlayerModel:le,requestModifier:Object(_.default)(Oe).getInstance(),mssHandler:oe,settings:xe})}function et(){if(ie)return ie;var e=dashjs.Protection;if("function"==typeof e){var t=e(Oe).create();return P.default.extend(e.events),I.default.extend(e.events,{publicOnly:!0}),D.default.extend(e.errors),he||(he=Object(v.default)(Oe).getInstance()),ie=t.createProtectionSystem({debug:Ne,errHandler:de,videoModel:we,customParametersModel:ce,capabilities:he,eventBus:Re,events:P.default,BASE64:H.a,constants:a.default,cmcdModel:Se,settings:xe})}return null}function tt(){if(!Y)throw Ie;if(se)return se;var e=dashjs.OfflineController;if("function"==typeof e){P.default.extend(e.events),I.default.extend(e.events,{publicOnly:!0}),D.default.extend(e.errors);var t=Ze(),n=Object(q.default)(Oe).create();return n.setConfig({manifestModel:Ee,adapter:ue,manifestLoader:t,errHandler:de}),se=e(Oe).create({debug:Ne,manifestUpdater:n,baseURLController:fe,manifestLoader:t,manifestModel:Ee,mediaPlayerModel:le,abrController:ee,playbackController:ye,adapter:ue,errHandler:de,dashMetrics:Te,timelineConverter:ne,segmentBaseController:Le,schemeLoaderFactory:te,eventBus:Re,events:P.default,errors:D.default,constants:a.default,settings:xe,dashConstants:o.default,urlUtils:Object(z.default)(Oe).getInstance()})}return null}function nt(e){var t=me&&me.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,n=Te.getCurrentDVRInfo(t);return n?e+(n.manifestInfo.availableFrom.getTime()/1e3+n.range.start):0}function rt(){var e;se&&se.resetRecords(),!V&&n&&(V=!0,t.info("Streaming Initialized"),e=Ze(),me||(me=Object(l.default)(Oe).getInstance()),ge||(ge=Object(Q.default)(Oe).create({errHandler:de,manifestModel:Ee,adapter:ue,mediaController:re,videoModel:we,settings:xe})),pe.setConfig({capabilities:he,customParametersModel:ce,adapter:ue,settings:xe,manifestModel:Ee,errHandler:de}),me.setConfig({capabilities:he,capabilitiesFilter:pe,manifestLoader:e,manifestModel:Ee,mediaPlayerModel:le,customParametersModel:ce,protectionController:ie,textController:ge,adapter:ue,dashMetrics:Te,errHandler:de,timelineConverter:ne,videoModel:we,playbackController:ye,serviceDescriptionController:_e,abrController:ee,mediaController:re,settings:xe,baseURLController:fe,uriFragmentModel:Ae,segmentBaseController:Le}),ve.setConfig({settings:xe,playbackController:ye,streamController:me,videoModel:we,timelineConverter:ne,adapter:ue}),ye.setConfig({streamController:me,serviceDescriptionController:_e,dashMetrics:Te,adapter:ue,videoModel:we,timelineConverter:ne,settings:xe}),be.setConfig({streamController:me,playbackController:ye,mediaPlayerModel:le,dashMetrics:Te,videoModel:we,settings:xe}),ee.setConfig({streamController:me,domStorage:Me,mediaPlayerModel:le,customParametersModel:ce,dashMetrics:Te,adapter:ue,videoModel:we,settings:xe}),Se.setConfig({abrController:ee,dashMetrics:Te,playbackController:ye}),ee.initialize(),me.initialize(Z,r),ge.initialize(),ve.initialize(),be.initialize(),Se.initialize(),Le.initialize(),"string"==typeof n?me.load(n):me.loadWithManifest(n)),!J&&Fe()&&(J=!0,t.info("Playback Initialized"))}return e={initialize:function(e,n,r){he||(he=Object(v.default)(Oe).getInstance()).setConfig({settings:xe}),de||(de=Object(g.default)(Oe).getInstance()),he.supportsMediaSource()?(Y||(Y=!0,ne=Object(U.default)(Oe).getInstance(),ee||(ee=Object(S.default)(Oe).getInstance()).setConfig({settings:xe}),te||(te=Object(w.default)(Oe).getInstance()),ye||(ye=Object(u.default)(Oe).getInstance()),re||(re=Object(h.default)(Oe).getInstance()),me||(me=Object(l.default)(Oe).getInstance()),ve||(ve=Object(c.default)(Oe).getInstance()),be||(be=Object(d.default)(Oe).getInstance()),_e||(_e=Object(f.default)(Oe).getInstance()),pe||(pe=Object(y.default)(Oe).getInstance()),ue=Object(j.default)(Oe).getInstance(),Ee=Object(T.default)(Oe).getInstance(),Se=Object(M.default)(Oe).getInstance(),Te=Object(F.default)(Oe).getInstance({settings:xe}),Me=Object(L.default)(Oe).getInstance({settings:xe}),ue.setConfig({constants:a.default,cea608parser:i.a,errHandler:de,BASE64:H.a}),fe||(fe=Object(p.default)(Oe).create()),fe.setConfig({adapter:ue}),_e.setConfig({adapter:ue}),Le||(Le=Object(N.default)(Oe).getInstance({dashMetrics:Te,mediaPlayerModel:le,errHandler:de,baseURLController:fe,events:P.default,eventBus:Re,debug:Ne,boxParser:Object(X.default)(Oe).getInstance(),requestModifier:Object(_.default)(Oe).getInstance(),errors:D.default})),re.setConfig({domStorage:Me,settings:xe,customParametersModel:ce}),le.setConfig({playbackController:ye,serviceDescriptionController:_e}),Ke(),Ge(void 0===r||r),tt()),e&&ze(e),n&&Qe(n),t.info("[dash.js "+Ue()+"] MediaPlayer has been initialized")):de.error(new K.default(D.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,D.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(he=e.capabilities),e.capabilitiesFilter&&(pe=e.capabilitiesFilter),e.streamController&&(me=e.streamController),e.textController&&(ge=e.textController),e.gapController&&(ve=e.gapController),e.playbackController&&(ye=e.playbackController),e.serviceDescriptionController&&(_e=e.serviceDescriptionController),e.catchupController&&(be=e.catchupController),e.mediaPlayerModel&&(le=e.mediaPlayerModel),e.customParametersModel&&(ce=e.customParametersModel),e.abrController&&(ee=e.abrController),e.schemeLoaderFactory&&(te=e.schemeLoaderFactory),e.mediaController&&(re=e.mediaController),e.settings&&(xe=e.settings))},on:function(e,t,n,r){Re.on(e,t,n,r)},off:function(e,t,n){Re.off(e,t,n)},extend:function(e,t,n){O.default.extend(e,t,n,Oe)},attachView:ze,attachSource:Qe,isReady:Fe,play:function(){if(!J)throw De;(!Z||Be()&&J)&&ye.play()},isPaused:Be,pause:function(){if(!J)throw De;ye.pause()},isSeeking:function(){if(!J)throw De;return ye.isSeeking()},isDynamic:function(){if(!J)throw De;return ye.getIsDynamic()},getLowLatencyModeEnabled:function(){if(!J)throw De;return ye.getLowLatencyModeEnabled()},seek:function(e){if(!J)throw De;if(Object(W.checkParameterType)(e,"number"),isNaN(e))throw a.default.BAD_ARGUMENT_ERROR;var t=ye.getIsDynamic()?Ye(e):e;ye.seek(t)},setPlaybackRate:function(e){qe().playbackRate=e},getPlaybackRate:function(){return qe().playbackRate},setMute:function(e){Object(W.checkParameterType)(e,"boolean"),qe().muted=e},isMuted:function(){return qe().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw a.default.BAD_ARGUMENT_ERROR;qe().volume=e},getVolume:function(){return qe().volume},time:He,duration:Ve,timeAsUTC:function(){if(!J)throw De;return He()<0?NaN:nt(He())},durationAsUTC:function(){if(!J)throw De;return nt(Ve())},getActiveStream:$e,getDVRWindowSize:function(){var e=me&&me.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,t=Te.getCurrentDVRInfo(e);return t?t.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:Ye,getTargetLiveDelay:function(){if(!J)throw De;return ye.getLiveDelay()},convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},formatUTC:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new Date(1e3*e),a=i.toLocaleDateString(t),o=i.toLocaleTimeString(t,{hour12:n});return r?o+" "+a:o},getVersion:Ue,getDebug:function(){return Ne},getBufferLength:function(e){var n=[a.default.VIDEO,a.default.AUDIO,a.default.TEXT];if(e){if(-1!==n.indexOf(e)){var r=We().getCurrentBufferLevel(e);return r||NaN}return t.warn("getBufferLength requested for invalid type"),NaN}var i=n.map((function(e){return Xe(e).length>0?We().getCurrentBufferLevel(e):Number.MAX_VALUE})).reduce((function(e,t){return Math.min(e,t)}));return i===Number.MAX_VALUE?NaN:i},getTTMLRenderingDiv:function(){return we?we.getTTMLRenderingDiv():null},getVideoElement:qe,getSource:function(){if(!n)throw Pe;return n},updateSource:function(e){n=e,me.load(n)},getCurrentLiveLatency:function(){if(!Y)throw Ie;return J?ye.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(e){if(!V)throw Ce;return ee.getTopBitrateInfoFor(e)},setAutoPlay:Ge,getAutoPlay:function(){return Z},getDashMetrics:We,getQualityFor:function(e){if(!V)throw Ce;if(e===a.default.IMAGE){var t=$e();if(!t)return-1;var n=t.getThumbnailController();return n?n.getCurrentTrackIndex():-1}return ee.getQualityFor(e)},setQualityFor:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!V)throw Ce;if(e===a.default.IMAGE){var r=$e();if(!r)return;var i=r.getThumbnailController();i&&i.setTrackByIndex(t)}ee.setPlaybackQuality(e,me.getActiveStreamInfo(),t,{forceReplace:n})},updatePortalSize:function(){ee.setElementSize(),ee.setWindowResizeEventCalled(!0)},enableText:function(e){var t=me.getActiveStreamInfo();return!(!t||!ge)&&ge.enableText(t.id,e)},enableForcedTextStreaming:function(e){return!!ge&&ge.enableForcedTextStreaming(e)},isTextEnabled:function(){var e=me.getActiveStreamInfo();return!(!e||!ge)&&ge.isTextEnabled(e)},setTextTrack:function(e){if(!J)throw De;var t=me.getActiveStreamInfo();t&&ge&&ge.setTextTrack(t.id,e)},getBitrateInfoListFor:function(e){if(!V)throw Ce;var t=$e();return t?t.getBitrateListFor(e):[]},getStreamsFromManifest:function(e){if(!V)throw Ce;return ue.getStreamsInfo(e)},getTracksFor:Xe,getTracksForTypeFromManifest:function(e,t,n){if(!V)throw Ce;return(n=n||ue.getStreamsInfo(t,1)[0])?ue.getAllMediaInfoForType(n,e,t):[]},getCurrentTrackFor:function(e){if(!V)throw Ce;var t=me.getActiveStreamInfo();return re.getCurrentTrackFor(e,t.id)},setInitialMediaSettingsFor:function(e,t){if(!Y)throw Ie;re.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!Y)throw Ie;return re.getInitialSettings(e)},setCurrentTrack:function(e){if(!V)throw Ce;re.setTrack(e)},addABRCustomRule:function(e,t,n){ce.addAbrCustomRule(e,t,n)},removeABRCustomRule:function(e){ce.removeAbrCustomRule(e)},removeAllABRCustomRule:function(){ce.removeAllAbrCustomRule()},getABRCustomRules:function(){return ce.getAbrCustomRules()},getAverageThroughput:function(e){var t=ee.getThroughputHistory(),n=ye.getIsDynamic();return t?t.getAverageThroughput(e,n):0},retrieveManifest:function(e,t){var n=Ze(),r=this;Re.on(P.default.INTERNAL_MANIFEST_LOADED,(function e(i){i.error?t(null,i.error):t(i.manifest),Re.off(P.default.INTERNAL_MANIFEST_LOADED,e,r),n.reset()}),r),Ae.initialize(e),n.load(e)},addUTCTimingSource:function(e,t){ce.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){ce.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){ce.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Ke,setXHRWithCredentialsForType:function(e,t){ce.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return ce.getXHRWithCredentialsForType(e)},getProtectionController:function(){return et()},attachProtectionController:function(e){ie=e},setProtectionData:function(e){r=e,me&&me.setProtectionData(r)},registerLicenseRequestFilter:function(e){ce.registerLicenseRequestFilter(e)},registerLicenseResponseFilter:function(e){ce.registerLicenseResponseFilter(e)},unregisterLicenseRequestFilter:function(e){ce.unregisterLicenseRequestFilter(e)},unregisterLicenseResponseFilter:function(e){ce.unregisterLicenseResponseFilter(e)},registerCustomCapabilitiesFilter:function(e){ce.registerCustomCapabilitiesFilter(e)},unregisterCustomCapabilitiesFilter:function(e){ce.unregisterCustomCapabilitiesFilter(e)},setCustomInitialTrackSelectionFunction:function(e){ce.setCustomInitialTrackSelectionFunction(e)},resetCustomInitialTrackSelectionFunction:function(){ce.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(e){if(!we.getElement())throw ke;we.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=me.getActiveStreamInfo();if(e&&ge)return ge.getCurrentTrackIdx(e.id)},provideThumbnail:function(e,t){if("function"==typeof t)if(e<0)t(null);else{var n=ye.getIsDynamic()?Ye(e):e,r=me.getStreamForTime(n);if(null!==r){var i=r.getThumbnailController();if(i)return i.provide(n,t);t(null)}else t(null)}},getDashAdapter:function(){return ue},getOfflineController:function(){return tt()},getSettings:function(){return xe.get()},updateSettings:function(e){xe.update(e)},resetSettings:function(){xe.reset()},reset:je,destroy:function(){je(),O.default.deleteSingletonInstances(Oe)}},t=Ne.getLogger(e),Y=!1,J=!1,V=!1,Z=!0,ie=null,se=null,r=null,ue=null,Le=null,P.default.extend(I.default),le=Object(E.default)(Oe).getInstance(),ce=Object($.default)(Oe).getInstance(),we=Object(A.default)(Oe).getInstance(),Ae=Object(b.default)(Oe).getInstance(),e}J.__dashjs_factory_name="MediaPlayer";var Z=O.default.getClassFactory(J);Z.events=I.default,Z.errors=D.default,O.default.updateClassFactory(J.__dashjs_factory_name,Z),t.default=Z},"./src/streaming/MediaPlayerEvents.js":function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var u=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=a(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).AST_IN_FUTURE="astInFuture",e.BUFFER_EMPTY="bufferStalled",e.BUFFER_LOADED="bufferLoaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.DYNAMIC_TO_STATIC="dynamicToStatic",e.ERROR="error",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",e.LOG="log",e.MANIFEST_LOADED="manifestLoaded",e.METRICS_CHANGED="metricsChanged",e.METRIC_CHANGED="metricChanged",e.METRIC_ADDED="metricAdded",e.METRIC_UPDATED="metricUpdated",e.PERIOD_SWITCH_STARTED="periodSwitchStarted",e.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",e.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",e.QUALITY_CHANGE_RENDERED="qualityChangeRendered",e.TRACK_CHANGE_RENDERED="trackChangeRendered",e.STREAM_INITIALIZING="streamInitializing",e.STREAM_UPDATED="streamUpdated",e.STREAM_ACTIVATED="streamActivated",e.STREAM_DEACTIVATED="streamDeactivated",e.STREAM_INITIALIZED="streamInitialized",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TEXT_TRACKS_ADDED="allTextTracksAdded",e.TEXT_TRACK_ADDED="textTrackAdded",e.TTML_PARSED="ttmlParsed",e.TTML_TO_PARSE="ttmlToParse",e.CAPTION_RENDERED="captionRendered",e.CAPTION_CONTAINER_RESIZE="captionContainerResize",e.CAN_PLAY="canPlay",e.CAN_PLAY_THROUGH="canPlayThrough",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_LOADED_DATA="playbackLoadedData",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_STALLED="playbackStalled",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e.PLAYBACK_WAITING="playbackWaiting",e.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",e.EVENT_MODE_ON_START="eventModeOnStart",e.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",e.CONFORMANCE_VIOLATION="conformanceViolation",e.REPRESENTATION_SWITCH="representationSwitch",e.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",e}return n}(n("./src/core/events/EventsBase.js").default));t.default=u},"./src/streaming/MediaPlayerFactory.js":function(e,t,n){"use strict";n.r(t);var r,i=n("./src/streaming/MediaPlayer.js"),a=function(){var e,t="application/dash+xml";function n(n,r,a){if(!n||!/^VIDEO$/i.test(n.nodeName))return null;if(n._dashjs_player)return n._dashjs_player;var o,s=n.id||n.name||"video element";if(!(r=r||[].slice.call(n.querySelectorAll("source")).filter((function(e){return e.type==t}))[0])&&n.src)(r=document.createElement("source")).src=n.src;else if(!r&&!n.src)return null;return a=a||{},(o=Object(i.default)(a).create()).initialize(n,r.src,n.autoplay),e||(e=o.getDebug().getLogger()),e.debug("Converted "+s+" to dash.js player and added content: "+r.src),n._dashjs_player=o,o}function r(e){return/^VIDEO$/i.test(e.nodeName)?e:r(e.parentNode)}return{create:n,createAll:function(e,i){var a=[];e=e||"[data-dashjs-player]";for(var o=(i=i||document).querySelectorAll(e),s=0;s<o.length;s++){var u=n(o[s],null);a.push(u)}for(var l=i.querySelectorAll('source[type="'+t+'"]'),c=0;c<l.length;c++){var d=n(r(l[c]),null);a.push(d)}return a}}}();!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?a.createAll():r=window.setInterval((function(){window.dashjs&&(window.clearInterval(r),a.createAll())}),500):window.addEventListener("load",(function e(){window.removeEventListener("load",e),a.createAll()}))),t.default=a},"./src/streaming/SourceBufferSink.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/Debug.js"),i=n("./src/streaming/vo/DashJSError.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/core/errors/Errors.js"),s=n("./src/core/Settings.js"),u=n("./src/streaming/constants/Constants.js"),l=n("./src/streaming/vo/metrics/HTTPRequest.js"),c=n("./src/core/events/Events.js"),d=.1,f=.01,h=50;function p(e){var t,n,a,p,m,g,v=this.context,y=Object(s.default)(v).getInstance(),_=e.textController,b=e.eventBus,T=[],E=[],S=!1,w=e.mediaSource,A=null;function M(e){return new Promise((function(t){N((function(){p.changeType&&p.changeType(e),t()}))}))}function L(e){return p=_.getTextSourceBuffer(e),Promise.resolve()}function C(){if("function"==typeof p.addEventListener)try{p.addEventListener("updateend",R,!1),p.addEventListener("error",x,!1),p.addEventListener("abort",x,!1)}catch(e){g=setInterval(R,h)}else g=setInterval(R,h)}function D(e){return new Promise((function(t){p&&y.get().streaming.buffer.useAppendWindow?N((function(){try{if(!p)return void t();var n=w.duration,r=0;e&&!isNaN(e.start)&&!isNaN(e.duration)&&isFinite(e.duration)&&(n=e.start+e.duration),e&&!isNaN(e.start)&&(r=e.start),p.appendWindowEnd===n&&p.appendWindowStart===r||(p.appendWindowStart=0,p.appendWindowEnd=n+f,p.appendWindowStart=Math.max(r-d,0),a.debug("Updated append window for ".concat(m.type,". Set start to ").concat(p.appendWindowStart," and end to ").concat(p.appendWindowEnd))),t()}catch(e){a.warn("Failed to set append window"),t()}})):t()}))}function k(e){return new Promise((function(t){p?N((function(){try{p.timestampOffset===e||isNaN(e)||(p.timestampOffset=e,a.debug("Set MSE timestamp offset to ".concat(e))),t()}catch(e){t()}})):t()}))}function P(){return new Promise((function(e){N((function(){var t=p.appendWindowStart,n=p.appendWindowEnd;p&&(p.abort(),p.appendWindowStart=t,p.appendWindowEnd=n),e()}))}))}function I(){if(!S&&E.length>0){S=!0;var e=E[0];E.splice(0,1);var t=function(){S=!1,E.length>0&&I.call(this),e&&e.data&&e.data.segmentType&&e.data.segmentType!==l.HTTPRequest.INIT_SEGMENT_TYPE&&delete e.data.bytes,e.promise.resolve({chunk:e.data})};try{A=e.request,0===e.data.bytes.byteLength?t.call(this):(p.appendBuffer?p.appendBuffer(e.data.bytes):p.append(e.data.bytes,e.data),N(t.bind(this)))}catch(t){a.fatal('SourceBuffer append failed "'+t+'"'),E.length>0?I():S=!1,delete e.data.bytes,e.promise.reject({chunk:e.data,error:new i.default(t.code,t.message)})}}}function O(){T.length>0&&(p.updating||(T.shift()(),O()))}function R(){p.updating||O()}function x(e){var t,r,i=e.target||{};t=c.default.SOURCE_BUFFER_ERROR,r={error:i,lastRequestAppended:A}||{},b.trigger(t,r,{streamId:m.streamInfo.id,mediaType:n})}function N(e){T.push(e),p.updating||O()}return t={getType:function(){return n},getAllBufferRanges:function(){try{return p.buffered}catch(e){return a.error("getAllBufferRanges exception: "+e.message),null}},getBuffer:function(){return p},append:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(r,a){e?(E.push({data:e,promise:{resolve:r,reject:a},request:n}),N(I.bind(t))):a({chunk:e,error:new i.default(o.default.APPEND_ERROR_CODE,o.default.APPEND_ERROR_MESSAGE)})}))},remove:function(e){return new Promise((function(t,n){var r=e.start,a=e.end;r>=0&&a>r?N((function(){try{p.remove(r,a),N((function(){t({from:r,to:a,unintended:!1}),e.resolve&&e.resolve()}))}catch(t){n({from:r,to:a,unintended:!1,error:new i.default(o.default.REMOVE_ERROR_CODE,o.default.REMOVE_ERROR_MESSAGE)}),e.reject&&e.reject(t)}})):t()}))},abort:function(){return new Promise((function(e){try{E=[],"open"===w.readyState?N((function(){try{p&&p.abort(),e()}catch(t){e()}})):p&&p.setTextTrack&&"ended"===w.readyState?(p.abort(),e()):e()}catch(t){e()}}))},reset:function(){if(p){try{T=[],function(){try{"function"==typeof p.removeEventListener&&(p.removeEventListener("updateend",R,!1),p.removeEventListener("error",x,!1),p.removeEventListener("abort",x,!1)),clearInterval(g)}catch(e){a.error(e)}}(),S=!1,E=[],p.getClassName&&"TextSourceBuffer"===p.getClassName()||(a.debug("Removing sourcebuffer from media source"),w.removeSourceBuffer(p))}catch(e){}p=null}A=null},updateTimestampOffset:k,initializeForStreamSwitch:function(e,t,r){n=(m=e).type;var i=m.codec;!function(e){p=e.getBuffer()}(r),C();var a=[];return a.push(P),a.push(D(m.streamInfo)),a.push(M(i)),t&&void 0!==t.MSETimeOffset&&a.push(k(t.MSETimeOffset)),Promise.all(a)},initializeForFirstUse:function(e,t,r){n=(m=t).type;var i=m.codec;try{if(i.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return L(e);p=w.addSourceBuffer(i),C();var a=[];return a.push(D(m.streamInfo)),r&&void 0!==r.MSETimeOffset&&a.push(k(r.MSETimeOffset)),Promise.all(a)}catch(t){return m.type==u.default.TEXT&&!m.isFragmented||-1!==i.indexOf('codecs="stpp')||-1!==i.indexOf('codecs="vtt')?L(e):Promise.reject(t)}},updateAppendWindow:D,changeType:M},a=Object(r.default)(v).getInstance().getLogger(t),t}p.__dashjs_factory_name="SourceBufferSink";var m=a.default.getClassFactory(p);t.default=m},"./src/streaming/Stream.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/streaming/StreamProcessor.js"),o=n("./src/streaming/controllers/FragmentController.js"),s=n("./src/streaming/thumbnail/ThumbnailController.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js"),c=n("./src/core/Debug.js"),d=n("./src/core/errors/Errors.js"),f=n("./src/core/FactoryMaker.js"),h=n("./src/streaming/vo/DashJSError.js"),p=n("./src/streaming/utils/BoxParser.js"),m=n("./src/streaming/utils/URLUtils.js"),g=n("./src/streaming/controllers/BlacklistController.js"),v=[r.default.VIDEO,r.default.AUDIO,r.default.TEXT,r.default.MUXED,r.default.IMAGE];function y(e){e=e||{};var t,n,f,y,_,b,T,E,S,w,A,M,L,C,D,k,P,I,O=this.context,R=Object(u.default)(O).getInstance(),x=Object(m.default)(O).getInstance(),N=e.manifestModel,j=e.mediaPlayerModel,F=e.dashMetrics,U=e.manifestUpdater,B=e.adapter,Y=e.timelineConverter,H=e.capabilities,V=e.errHandler,G=e.abrController,K=e.playbackController,W=e.eventController,q=e.mediaController,z=e.protectionController,X=e.textController,Q=e.videoModel,$=e.streamInfo,J=e.settings;function Z(t,o){return new Promise((function(u,c){se(),w=!0,le();var p,m=Q.getElement();v.forEach((function(o){(o!==r.default.VIDEO||!m||m&&/^VIDEO$/i.test(m.nodeName))&&function(t,o){var u,c=B.getAllMediaInfoForType($,t),d=[],h=null;if(c&&0!==c.length){t===r.default.VIDEO&&(T=!0),t===r.default.AUDIO&&(E=!0);for(var p=0,m=c.length;p<m;p++)h=c[p],t===r.default.TEXT&&h.isEmbedded&&(X.addEmbeddedTrack($,h),d.push(h)),ee(h)&&q.addTrack(h);if(d.length>0&&(q.setInitialMediaSettingsForType(t,$),X.setInitialSettings(q.getInitialSettings(t)),X.addMediaInfosToBuffer($,t,d)),0!==(c=c.filter((function(e){return!e.isEmbedded}))).length)if(t!==r.default.IMAGE){R.trigger(l.default.STREAM_INITIALIZING,{streamInfo:$,mediaInfo:h}),q.setInitialMediaSettingsForType(t,$);var g=function(t,n){var i=t&&t.length>0?t[0]:null,o=A.getModel(i?i.type:null),s=i?i.type:null,u=i?i.mimeType:null,l=i?i.isFragmented:null,c=Object(a.default)(O).create({streamInfo:$,type:s,mimeType:u,timelineConverter:Y,adapter:B,manifestModel:N,mediaPlayerModel:j,fragmentModel:o,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,segmentBaseController:e.segmentBaseController,abrController:G,playbackController:K,mediaController:q,textController:X,errHandler:V,settings:J,boxParser:D,segmentBlacklistController:L});c.initialize(n,T,l),f.push(c);for(var d=0;d<t.length;d++)c.addMediaInfo(t[d]);return s===r.default.TEXT&&X.addMediaInfosToBuffer($,s,t,o),c}(c,o);(u=q.getCurrentTrackFor(t,$.id))&&(G.updateTopQualityIndex(u),g.selectMediaInfo(t===r.default.TEXT&&u.isEmbedded?c[0]:u))}else(M=Object(s.default)(O).create({streamInfo:$,adapter:B,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:k,eventBus:R,events:l.default,dashConstants:i.default,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController})).initialize()}else n.info("No "+t+" data.")}(o,t)})),(p=o,new Promise((function(e){var t={},n=f.map((function(e){return e.createBufferSinks(p)}));Promise.all(n).then((function(n){n.forEach((function(e){e&&(t[e.getType()]=e)})),e(t)})).catch((function(){e(t)}))}))).then((function(e){if(w=!1,0===f.length){var t="No streams to play.";V.error(new h.default(d.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t,N.getValue())),n.fatal(t)}else ce();X.createTracks($),u(e)})).catch((function(e){c(e)}))}))}function ee(e){var t,i=e?e.type:null;return i===r.default.MUXED?(t="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",n.fatal(t),V.error(new h.default(d.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,t,N.getValue())),!1):!(i!==r.default.TEXT&&i!==r.default.IMAGE&&e.contentProtection&&!H.supportsEncryptedMedia()&&(V.error(new h.default(d.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,d.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function te(e){for(var t=f?f.length:0,n=0;n<t;n++){var r=f[n].getFragmentModel();r.abortRequests(),r.resetInitialSettings(),f[n].reset(!1,e)}X&&X.deactivateStream($),f=[],_=!1,b=!1,be(!1),re(!1),R.trigger(l.default.STREAM_DEACTIVATED,{streamInfo:$})}function ne(e){te(e),y=!1,T=!1,E=!1,S={},w=!1,P=!1,I=[]}function re(e){P=e}function ie(){return $?$.start:NaN}function ae(){return $?$.id:null}function oe(){return $}function se(){if(!Q||!G)throw new Error(r.default.MISSING_CONFIG_ERROR)}function ue(e){e.error&&(V.error(e.error),n.fatal(e.error.message))}function le(){if(W){var e=B.getEventsFor($);W.addInlineEvents(e)}}function ce(){for(var e=f.length,t=S.audio||S.video?new h.default(d.default.DATA_UPDATE_FAILED_ERROR_CODE,d.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<e;n++)if(f[n].isUpdating()||w)return;if(z){z.clearMediaInfoArray();for(var i=0;i<e&&f[i];i++){var a=f[i].getType(),o=f[i].getMediaInfo();if(a===r.default.AUDIO||a===r.default.VIDEO||a===r.default.TEXT&&o.isFragmented){var s=f[i].getMediaInfo();s&&z.initializeForMedia(s)}}}t?V.error(t):y||(y=!0,Q.waitForReadyState(r.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(function(){R.trigger(l.default.STREAM_INITIALIZED,{streamInfo:$})})))}function de(){var e=ge(),t=e.length;if(0!==t){for(var i=0;i<t;i++)if(!e[i].isBufferingCompleted()&&(e[i].getType()===r.default.AUDIO||e[i].getType()===r.default.VIDEO))return void n.debug("onBufferingCompleted - One streamProcessor has finished but",e[i].getType(),"one is not buffering completed");n.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),b=!0,R.trigger(l.default.STREAM_BUFFERING_COMPLETED,{streamInfo:$},{streamInfo:$})}else n.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function fe(e){S[e.mediaType]=e.error,ce()}function he(e){W&&W.addInbandEvents(e.events)}function pe(e){return e&&e.type?me(e.type):null}function me(e){return e?ge().filter((function(t){return t.getType()===e}))[0]:null}function ge(){for(var e,t,n=[],i=0;i<f.length;i++)(e=(t=f[i]).getType())!==r.default.AUDIO&&e!==r.default.VIDEO&&e!==r.default.TEXT||n.push(t);return n}function ve(e,t){var n=oe(),r=t.getStreamInfo();if(!r||!n)return!0;var i=B.getAdaptationForType(r.index,e,r),a=B.getAdaptationForType(n.index,e,n);return i&&a?!(!ye(a)&&ye(i)):!i&&!a}function ye(e){return!!e&&!!(e.ContentProtection||e.Representation&&e.Representation.length>0&&e.Representation[0].ContentProtection)}function _e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||!e.hasOwnProperty("getStreamInfo"))return!1;var r=e.getStreamInfo(),i=n?n.getStreamInfo():oe();if(!r||!i)return!1;var a=B.getAdaptationForType(r.index,t,r),o=B.getAdaptationForType(i.index,t,i);if(!a||!o)return!a&&!o;var s=a&&o&&a.mimeType===o.mimeType,u=o.Representation_asArray.map((function(e){return e.codecs})),l=a.Representation_asArray.map((function(e){return e.codecs})),c=l.some((function(e){return u.indexOf(e)>-1})),d=l.some((function(e){return u.some((function(t){return H.codecRootCompatibleWithCodec(t,e)}))}));return c||d&&s}function be(e){C=e}function Te(){return C}return t={initialize:function(){R.on(l.default.BUFFERING_COMPLETED,de,t),R.on(l.default.DATA_UPDATE_COMPLETED,fe,t),R.on(l.default.INBAND_EVENTS,he,t),z&&(R.on(l.default.KEY_ERROR,ue,t),R.on(l.default.SERVER_CERTIFICATE_UPDATED,ue,t),R.on(l.default.LICENSE_REQUEST_COMPLETE,ue,t),R.on(l.default.KEY_SYSTEM_SELECTED,ue,t),R.on(l.default.KEY_SESSION_CREATED,ue,t),R.on(l.default.KEY_STATUSES_CHANGED,ue,t)),X.initializeForStream($),R.trigger(l.default.STREAM_UPDATED,{streamInfo:$})},getStreamId:function(){return $?$.id:null},activate:function(e,t){return new Promise((function(n,r){if(!_)return Te()?(_=!0,R.trigger(l.default.STREAM_ACTIVATED,{streamInfo:$}),void n(t)):void function(e,t){return Z(e,t)}(e,t).then((function(e){_=!0,R.trigger(l.default.STREAM_ACTIVATED,{streamInfo:$}),n(e)})).catch((function(e){r(e)}));n(t)}))},deactivate:te,getIsActive:function(){return _},getDuration:function(){return $?$.duration:NaN},getStartTime:ie,getId:ae,getStreamInfo:oe,getHasAudioTrack:function(){return E},getHasVideoTrack:function(){return T},startPreloading:function(e,t){return new Promise((function(r,i){Te()?i():(n.info("[startPreloading] Preloading next stream with id ".concat(ae())),be(!0),Z(e,t).then((function(){for(var e=0;e<f.length&&f[e];e++)f[e].setExplicitBufferingTime(ie()),f[e].getScheduleController().startScheduleTimer();r()})).catch((function(){be(!1),i()})))}))},getThumbnailController:function(){return M},getBitrateListFor:function(e){if(se(),e===r.default.IMAGE)return M?M.getBitrateList():[];var t=function(e){for(var t=null,n=0;n<f.length;n++)if((t=f[n]).getType()===e)return t.getMediaInfo();return null}(e);return G.getBitrateList(t)},updateData:function(e){return new Promise((function(t){w=!0,$=e,W&&le();for(var n=[],r=0,i=f.length;r<i;r++){var a=f[r],o=a.getMediaInfo();n.push(a.updateStreamInfo($));var s=B.getAllMediaInfoForType($,a.getType());if(s){a.clearMediaInfoArray();for(var u=0;u<s.length;u++){var c=s[u];a.addMediaInfo(s[u]),B.areMediaInfosEqual(o,c)&&(G.updateTopQualityIndex(c),n.push(a.selectMediaInfo(c)))}}}Promise.all(n).then((function(){for(n=[];I.length>0;){var e=I.pop(),t=e.newMediaInfo,r=pe(e.oldMediaInfo);if(!r)return;n.push(r.prepareTrackSwitch()),r.selectMediaInfo(t)}return Promise.all(n)})).then((function(){w=!1,ce(),R.trigger(l.default.STREAM_UPDATED,{streamInfo:$}),t()}))}))},reset:function(e){A&&(A.reset(),A=null),G&&$&&G.clearDataForStream($.id),L&&(L.reset(),L=null),ne(e),$=null,R.off(l.default.DATA_UPDATE_COMPLETED,fe,t),R.off(l.default.BUFFERING_COMPLETED,de,t),R.off(l.default.INBAND_EVENTS,he,t),z&&(R.off(l.default.KEY_ERROR,ue,t),R.off(l.default.SERVER_CERTIFICATE_UPDATED,ue,t),R.off(l.default.LICENSE_REQUEST_COMPLETE,ue,t),R.off(l.default.KEY_SYSTEM_SELECTED,ue,t),R.off(l.default.KEY_SESSION_CREATED,ue,t),R.off(l.default.KEY_STATUSES_CHANGED,ue,t))},getProcessors:ge,setMediaSource:function(e){for(var t=0;t<f.length;)ee(f[t].getMediaInfo())?(f[t].setMediaSource(e),t++):(f[t].reset(),f.splice(t,1));if(0===f.length){var r="No streams to play.";V.error(new h.default(d.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,r+"nostreams",N.getValue())),n.fatal(r)}},isMediaCodecCompatible:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _e(e,r.default.VIDEO,t)&&_e(e,r.default.AUDIO,t)},isProtectionCompatible:function(e){return!e||ve(r.default.VIDEO,e)&&ve(r.default.AUDIO,e)},getPreloaded:Te,getIsEndedEventSignaled:function(){return P},setIsEndedEventSignaled:re,getAdapter:function(){return B},getHasFinishedBuffering:function(){return b},setPreloaded:be,startScheduleControllers:function(){for(var e=f.length,t=0;t<e&&f[t];t++)f[t].getScheduleController().startScheduleTimer()},prepareTrackChange:function(e){if(_&&$){b=!1;var t=e.newMediaInfo,i=N.getValue();B.setCurrentMediaInfo($.id,t.type,t);var a=pe(t);if(a){var o=K.getTime();n.info("Stream -  Process track changed at current time "+o),i.refreshManifestOnSwitchTrack?(I.push(e),U.getIsUpdating()||(n.debug("Stream -  Refreshing manifest for switch track"),U.refreshManifest())):a.selectMediaInfo(t).then((function(){t.type!==r.default.VIDEO&&t.type!==r.default.AUDIO||G.updateTopQualityIndex(t),a.prepareTrackSwitch()}))}}},prepareQualityChange:function(e){var t=me(e.mediaType);t&&t.prepareQualityChange(e)}},function(){try{k=Object(c.default)(O).getInstance(),n=k.getLogger(t),ne(),D=Object(p.default)(O).getInstance(),L=Object(g.default)(O).create({updateEventName:l.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:l.default.SEGMENT_LOCATION_BLACKLIST_ADD}),A=Object(o.default)(O).create({streamInfo:$,mediaPlayerModel:j,dashMetrics:F,errHandler:V,settings:J,boxParser:D,dashConstants:i.default,urlUtils:x})}catch(e){throw e}}(),t}y.__dashjs_factory_name="Stream",t.default=f.default.getClassFactory(y)},"./src/streaming/StreamProcessor.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/streaming/constants/MetricsConstants.js"),o=n("./src/streaming/models/FragmentModel.js"),s=n("./src/streaming/controllers/BufferController.js"),u=n("./src/streaming/text/NotFragmentedTextBufferController.js"),l=n("./src/streaming/controllers/ScheduleController.js"),c=n("./src/dash/controllers/RepresentationController.js"),d=n("./src/core/FactoryMaker.js"),f=n("./src/streaming/utils/SupervisorTools.js"),h=n("./src/core/EventBus.js"),p=n("./src/core/events/Events.js"),m=n("./src/dash/DashHandler.js"),g=n("./src/core/errors/Errors.js"),v=n("./src/streaming/vo/DashJSError.js"),y=n("./src/core/Debug.js"),_=n("./src/streaming/utils/RequestModifier.js"),b=n("./src/streaming/utils/URLUtils.js"),T=n("./src/streaming/utils/BoxParser.js"),E=n("./src/streaming/vo/metrics/PlayList.js"),S=n("./src/dash/controllers/SegmentsController.js"),w=n("./src/streaming/vo/metrics/HTTPRequest.js");function A(e){e=e||{};var t,n,d,A,M,L,C,D,k,P,I,O,R,x=this.context,N=Object(h.default)(x).getInstance(),j=e.streamInfo,F=e.type,U=e.errHandler,B=e.mimeType,Y=e.timelineConverter,H=e.adapter,V=e.manifestModel,G=e.mediaPlayerModel,K=e.fragmentModel,W=e.abrController,q=e.playbackController,z=e.mediaController,X=e.textController,Q=e.dashMetrics,$=e.settings,J=e.boxParser,Z=e.segmentBlacklistController;function ee(){return j.id}function te(){return F}function ne(){return H.getIsTextTrack(D.getData())}function re(){M=[],A=null,R=0,k=!1,P=!1}function ie(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.sender)if(q.getIsManifestUpdateInProgress())oe();else if((!ne()||X.isTextEnabled())&&L&&e.representationId&&!L.appendInitSegmentFromCache(e.representationId)){var n=D.getCurrentRepresentation();if(0===n.range)return void ae();var r=I?I.getInitRequest(A,n):null;r?K.executeRequest(r):t&&(C.setInitSegmentRequired(!0),oe())}}function ae(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(q.getIsManifestUpdateInProgress()||L.getIsPruningInProgress())oe();else{var a=function(){var e,t=be();if(isNaN(R)||te()===r.default.TEXT&&!X.isTextEnabled())return null;var n=k;if(I){var i=D&&t?D.getRepresentationForQuality(t.quality):null;e=n?I.getSegmentRequestForTime(A,i,R):I.getNextSegmentRequest(A,i)}return e}();a?(k=!1,function(e){isNaN(e.startTime+e.duration)||(R=e.startTime+e.duration),e.delayLoadingTime=(new Date).getTime()+C.getTimeToLoadDelay(),C.setTimeToLoadDelay(0),function(e){var t=e.url;return e.range&&(t=t.concat("_",e.range)),Z.contains(t)}(e)?(n.warn("Fragment request url ".concat(e.url," for stream id ").concat(j.id," and media type ").concat(F," is on the ignore list and will be skipped")),oe()):(n.debug("Next fragment request url for stream id ".concat(j.id," and media type ").concat(F," is ").concat(e.url)),K.executeRequest(e))}(a)):function(e){var t,r=D.getCurrentRepresentation();if($.get().streaming.gaps.enableSeekFix&&(k||0===q.getTime())&&(d?d&&r.segmentInfoType===i.default.SEGMENT_TIMELINE&&(t=I.getValidTimeAheadOfTargetTime(R,A,r,$.get().streaming.gaps.threshold)):t=I.getValidTimeAheadOfTargetTime(R,A,r,$.get().streaming.gaps.threshold),!isNaN(t)&&t!==R))return void(q.isSeeking()||0===q.getTime()?(n.warn("Adjusting playback time ".concat(t," because of gap in the manifest. Seeking by ").concat(t-R)),q.seek(t,!1,!1)):(n.warn("Adjusting buffering time ".concat(t," because of gap in the manifest. Adjusting time by ").concat(t-R)),Me(t),e&&oe()));if(I.isLastSegmentRequested(r,R)){var a=I.getCurrentIndex();return n.debug("Segment requesting for stream ".concat(j.id," has finished")),N.trigger(p.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:a},{streamId:j.id,mediaType:F}),L.segmentRequestingCompleted(a),void C.clearScheduleTimer()}e&&oe()}(t)}}function oe(){C.startScheduleTimer(q.getLowLatencyModeEnabled()?$.get().streaming.scheduling.lowLatencyTimeout:$.get().streaming.scheduling.defaultTimeout)}function se(e){e.error||(C.setCurrentRepresentation(H.convertRepresentationToRepresentationInfo(e.currentRepresentation)),L.getIsBufferingCompleted()||L.updateBufferTimestampOffset(e.currentRepresentation))}function ue(e){Q.addBufferState(F,e.state,C.getBufferTarget()),e.state!==a.default.BUFFER_EMPTY||q.isSeeking()||(n.info("Buffer is empty! Stalling!"),Q.pushPlayListTraceMetrics(new Date,E.PlayListTrace.REBUFFERING_REASON))}function le(e){K.syncExecutedRequestsWithBufferedRange(L.getBuffer().getAllBufferRanges(),j.duration),e.quotaExceeded&&e.from>q.getTime()&&Me(e.from),e.hasEnoughSpaceToAppend&&e.quotaExceeded&&C.startScheduleTimer()}function ce(e){if(e&&e.lastRequestAppended&&e.lastRequestAppended.url){var t=e.lastRequestAppended.url;e.lastRequestAppended.range&&(t=t.concat("_",e.lastRequestAppended.range)),n.warn("Blacklisting segment with url ".concat(t)),Z.add(t)}}function de(){we(),P=!1}function fe(e){n.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),q.isSeeking()||C.getSwitchStrack()||P||(n.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),e.request&&e.request.isInitializationRequest()?C.setInitSegmentRequired(!0):Me(e.request.startTime+e.request.duration/2),C.startScheduleTimer(0))}function he(e){n.info("OnFragmentLoadingCompleted for stream id "+j.id+" and media type "+F+" - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),ne()&&C.startScheduleTimer(0),e.error&&e.request.serviceLocation&&function(e){n.info("Fragment loading completed with an error"),e&&e.request&&e.request.type&&(e.request.type===w.HTTPRequest.INIT_SEGMENT_TYPE?ie({representationId:e.request.representationId,sender:{}},!1):e.request.type===w.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Me(e.request.startTime+e.request.duration/2),ae({},!1)))}(e)}function pe(){Me(q.getTime()),_e().startScheduleTimer()}function me(e){var t=e.currentTrackInfo;if(t){var n=M.find((function(e){return e.index===t.index&&e.lang===t.lang}));n&&ye(n).then((function(){L.setIsBufferingCompleted(!1),Me(q.getTime()),C.setInitSegmentRequired(!0),C.startScheduleTimer()}))}}function ge(e){Me(e.quotaExceededTime),C.clearScheduleTimer()}function ve(){return L?L.getBuffer():null}function ye(e){e===A||e&&A&&e.type!==A.type||(A=e);var t=H.getRealAdaptation(j,A),n=H.getVoRepresentations(A);if(D){var i,a=D.getData(),o=W.getMaxAllowedIndexFor(F,j.id),s=W.getMinAllowedIndexFor(F,j.id),u=null;return null!==a&&a.id===t.id||F===r.default.TEXT?i=W.getQualityFor(F,j.id):(u=W.getThroughputHistory().getAverageThroughput(F,d)||W.getInitialBitrateFor(F,j.id),i=W.getQualityForBitrate(A,u,j.id)),void 0!==s&&i<s&&(i=s),i>o&&(i=o),D.updateData(t,n,F,A.isFragmented,i)}return Promise.resolve()}function _e(){return C}function be(e){var t;return void 0!==e?(Object(f.checkInteger)(e),t=D?D.getRepresentationForQuality(e):null):t=D?D.getCurrentRepresentation():null,H.convertRepresentationToRepresentationInfo(t)}function Te(){return!!L&&L.getIsBufferingCompleted()}function Ee(e){var t=e.chunk,n=t.bytes,r=t.quality,i=be(r),a=D&&i?D.getRepresentationForQuality(i.quality):null;if(i&&a){var s=H.getEventsFor(i.mediaInfo),u=H.getEventsFor(i,a);if(s&&s.length>0||u&&u.length>0){var l=function(e,t,n,r){try{for(var i={},a=[],o=n.concat(r),s=0,u=o.length;s<u;s++)i[o[s].schemeIdUri+"/"+o[s].value]=o[s];var l=Object(T.default)(x).getInstance().parse(e),c=l.getBoxes("emsg");if(!c||0===c.length)return a;for(var d=l.getBox("sidx"),f=!d||isNaN(d.earliest_presentation_time)||isNaN(d.timescale)?t&&!isNaN(t.mediaStartTime)?t.mediaStartTime:0:d.earliest_presentation_time/d.timescale,h=Math.max(f,0),p=D.getCurrentRepresentation(),m=0,g=c.length;m<g;m++){var v=H.getEvent(c[m],i,h,p);v&&a.push(v)}return a}catch(e){return[]}}(n,K.getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,quality:r,index:t.index})[0],s,u);N.trigger(p.default.INBAND_EVENTS,{events:l},{streamId:j.id})}}}function Se(){var e=q.getTime();$.get().streaming.buffer.flushBufferAtTrackSwitch&&q.seek(e+.001,!1,!0),Me(e),L.setSeekTarget(e),C.startScheduleTimer()}function we(){var e=q.getTime(),t=L.getContinuousBufferTimeForTargetTime(e);Me(isNaN(t)?e:t),C.startScheduleTimer()}function Ae(e){e&&!isNaN(e.time)&&(Me(e.time),L.setSeekTarget(e.time))}function Me(e){R=e,k=!0}return t={initialize:function(n,a,o){O=Object(S.default)(x).create({events:p.default,eventBus:N,streamInfo:j,timelineConverter:Y,dashConstants:i.default,segmentBaseController:e.segmentBaseController,type:F}),I=Object(m.default)(x).create({streamInfo:j,type:F,timelineConverter:Y,dashMetrics:Q,mediaPlayerModel:G,baseURLController:e.baseURLController,errHandler:U,segmentsController:O,settings:$,boxParser:J,events:p.default,eventBus:N,errors:g.default,debug:Object(y.default)(x).getInstance(),requestModifier:Object(_.default)(x).getInstance(),dashConstants:i.default,constants:r.default,urlUtils:Object(b.default)(x).getInstance()}),d=j.manifestInfo.isDynamic,I.initialize(d),W.registerStreamType(F,t),D=Object(c.default)(x).create({streamInfo:j,type:F,abrController:W,dashMetrics:Q,playbackController:q,timelineConverter:Y,dashConstants:i.default,events:p.default,eventBus:N,errors:g.default,isDynamic:d,segmentsController:O}),(L=function(e,t){return e?e!==r.default.TEXT||t?Object(s.default)(x).create({streamInfo:j,type:e,mediaPlayerModel:G,manifestModel:V,fragmentModel:K,errHandler:U,mediaController:z,representationController:D,adapter:H,textController:X,abrController:W,playbackController:q,settings:$}):Object(u.default)(x).create({streamInfo:j,type:e,mimeType:B,fragmentModel:K,textController:X,errHandler:U,settings:$}):(U.error(new v.default(g.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,g.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(F,o))&&L.initialize(n),(C=Object(l.default)(x).create({streamInfo:j,type:F,mimeType:B,adapter:H,dashMetrics:Q,mediaPlayerModel:G,fragmentModel:K,abrController:W,playbackController:q,textController:X,mediaController:z,bufferController:L,settings:$})).initialize(a),R=0,k=!1},getStreamId:ee,getType:te,isUpdating:function(){return!!D&&D.isUpdating()},getBufferController:function(){return L},getFragmentModel:function(){return K},getScheduleController:_e,getRepresentationController:function(){return D},getRepresentationInfo:be,getBufferLevel:function(){return L?L.getBufferLevel():0},isBufferingCompleted:Te,createBufferSinks:function(e){var t=ve();return t?Promise.resolve(t):L?L.createBufferSink(A,e):Promise.resolve(null)},updateStreamInfo:function(e){return j=e,Te()?Promise.resolve():L.updateAppendWindow()},getStreamInfo:function(){return j},selectMediaInfo:ye,clearMediaInfoArray:function(){M=[]},addMediaInfo:function(e){-1===M.indexOf(e)&&M.push(e)},prepareTrackSwitch:function(){return new Promise((function(e){n.debug("Preparing track switch for type ".concat(F));var t=F===r.default.TEXT||$.get().streaming.trackSwitchMode[F]===r.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&q.getTimeToStreamEnd(j)>$.get().streaming.buffer.stallThreshold;if(L.getIsBufferingCompleted()&&!t)return L.prepareForNonReplacementTrackSwitch(A.codec).then((function(){N.trigger(p.default.BUFFERING_COMPLETED,{},{streamId:j.id,mediaType:F})})).catch((function(){N.trigger(p.default.BUFFERING_COMPLETED,{},{streamId:j.id,mediaType:F})})),void e();C.clearScheduleTimer(),C.setSwitchTrack(!0),t?(N.trigger(p.default.BUFFER_REPLACEMENT_STARTED,{mediaType:F,streamId:j.id},{mediaType:F,streamId:j.id}),K.abortRequests(),L.prepareForReplacementTrackSwitch(A.codec).then((function(){var e=be();return L.updateBufferTimestampOffset(e)})).then((function(){Se(),e()})).catch((function(){Se(),e()}))):L.prepareForNonReplacementTrackSwitch(A.codec).then((function(){we(),e()})).catch((function(){we(),e()}))}))},prepareQualityChange:function(e){n.debug("Preparing quality switch for type ".concat(F));var t=e.newQuality;P=!0,C.clearScheduleTimer();var r=be(t);C.setCurrentRepresentation(r),D.prepareQualityChange(t),K.abortRequests(),L.updateBufferTimestampOffset(r).then((function(){e.reason&&e.reason.forceReplace?(N.trigger(p.default.BUFFER_REPLACEMENT_STARTED,{mediaType:F,streamId:j.id},{mediaType:F,streamId:j.id}),L.prepareForReplacementQualitySwitch().then((function(){Se(),P=!1})).catch((function(){Se(),P=!1}))):$.get().streaming.buffer.fastSwitchEnabled?function(e){var t=q.getTime(),n=K.getRequests({state:o.default.FRAGMENT_MODEL_EXECUTED,time:t+1.5,threshold:0})[0];if(n&&!ne()){var r=L.getBufferLevel(),i=W.getAbandonmentStateFor(j.id,F);n.quality<e.quality&&r>=1.5&&i!==a.default.ABANDON_LOAD?(Me(t+1.5),C.setCheckPlaybackQuality(!1),C.startScheduleTimer()):de()}else C.startScheduleTimer();P=!1}(r):de(),Q.pushPlayListTraceMetrics(new Date,E.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),Q.createPlaylistTraceMetrics(r.id,1e3*q.getTime(),q.getPlaybackRate())}))},getMediaInfo:function(){return A},getMediaSource:function(){return L.getMediaSource()},setMediaSource:function(e){L.setMediaSource(e)},getBuffer:ve,setExplicitBufferingTime:Me,finalisePlayList:function(e,t){Q.pushPlayListTraceMetrics(e,t)},probeNextRequest:function(){var e=be(),t=D&&e?D.getRepresentationForQuality(e.quality):null;return I.getNextSegmentRequestIdempotent(A,t)},prepareInnerPeriodPlaybackSeeking:function(e){return new Promise((function(t){C.clearScheduleTimer(),K.abortRequests(),L.prepareForPlaybackSeek().then((function(){var t=L.getAllRangesWithSafetyFactor(e.seekTime);return L.clearBuffers(t)})).then((function(){var n=L.getContinuousBufferTimeForTargetTime(e.seekTime);if(!isNaN(n)&&!isNaN(j.duration)&&isFinite(j.duration)&&n>=j.start+j.duration)L.setIsBufferingCompleted(!0),t();else{var r=isNaN(n)?e.seekTime:n;Me(r),L.setSeekTarget(r);var i=[];i.push(L.updateAppendWindow());var a=be();i.push(L.updateBufferTimestampOffset(a)),Promise.all(i).then((function(){C.setInitSegmentRequired(!0),C.setCheckPlaybackQuality(!1),C.startScheduleTimer(),t()}))}})).catch((function(e){n.error(e)}))}))},prepareOuterPeriodPlaybackSeeking:function(){return new Promise((function(e,t){try{C.clearScheduleTimer(),K.abortRequests(),L.prepareForPlaybackSeek().then((function(){return L.pruneAllSafely()})).then((function(){e()}))}catch(e){t(e)}}))},reset:function(e,n){I&&I.reset(),L&&(L.reset(e,n),L=null),C&&(C.reset(),C=null),D&&(D.reset(),D=null),O&&(O=null),W&&W.unRegisterStreamType(ee(),F),N.off(p.default.DATA_UPDATE_COMPLETED,se,t),N.off(p.default.INIT_FRAGMENT_NEEDED,ie,t),N.off(p.default.MEDIA_FRAGMENT_NEEDED,ae,t),N.off(p.default.MEDIA_FRAGMENT_LOADED,Ee,t),N.off(p.default.BUFFER_LEVEL_STATE_CHANGED,ue,t),N.off(p.default.BUFFER_CLEARED,le,t),N.off(p.default.SEEK_TARGET,Ae,t),N.off(p.default.FRAGMENT_LOADING_ABANDONED,fe,t),N.off(p.default.FRAGMENT_LOADING_COMPLETED,he,t),N.off(p.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,pe,t),N.off(p.default.SET_NON_FRAGMENTED_TEXT,me,t),N.off(p.default.QUOTA_EXCEEDED,ge,t),N.off(p.default.SOURCE_BUFFER_ERROR,ce,t),re(),F=null,j=null}},n=Object(y.default)(x).getInstance().getLogger(t),re(),N.on(p.default.DATA_UPDATE_COMPLETED,se,t,{priority:h.default.EVENT_PRIORITY_HIGH}),N.on(p.default.INIT_FRAGMENT_NEEDED,ie,t),N.on(p.default.MEDIA_FRAGMENT_NEEDED,ae,t),N.on(p.default.MEDIA_FRAGMENT_LOADED,Ee,t),N.on(p.default.BUFFER_LEVEL_STATE_CHANGED,ue,t),N.on(p.default.BUFFER_CLEARED,le,t),N.on(p.default.SEEK_TARGET,Ae,t),N.on(p.default.FRAGMENT_LOADING_ABANDONED,fe,t),N.on(p.default.FRAGMENT_LOADING_COMPLETED,he,t),N.on(p.default.QUOTA_EXCEEDED,ge,t),N.on(p.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,pe,t),N.on(p.default.SET_NON_FRAGMENTED_TEXT,me,t),N.on(p.default.SOURCE_BUFFER_ERROR,ce,t),t}A.__dashjs_factory_name="StreamProcessor",t.default=d.default.getClassFactory(A)},"./src/streaming/XlinkLoader.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/vo/DashJSError.js"),i=n("./src/streaming/net/URLLoader.js"),a=n("./src/streaming/vo/metrics/HTTPRequest.js"),o=n("./src/streaming/vo/TextRequest.js"),s=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/core/errors/Errors.js");function d(e){e=e||{};var t="urn:mpeg:dash:resolve-to-zero:2013",n=this.context,l=Object(s.default)(n).getInstance(),d=Object(i.default)(n).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,errors:c.default});return{load:function(e,n,i){var s=function(t,a){n.resolved=!0,n.resolvedContent=t||null,l.trigger(u.default.XLINK_ELEMENT_LOADED,{element:n,resolveObject:i,error:t||a?null:new r.default(c.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,c.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})};if(e===t)s(null,!0);else{var f=new o.default(e,a.HTTPRequest.XLINK_EXPANSION_TYPE);d.load({request:f,success:function(e){s(e)},error:function(){s(null)}})}},reset:function(){d&&(d.abort(),d=null)}}}d.__dashjs_factory_name="XlinkLoader",t.default=l.default.getClassFactory(d)},"./src/streaming/constants/ConformanceViolationConstants.js":function(e,t,n){"use strict";n.r(t),t.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}}},"./src/streaming/constants/Constants.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&r(t.prototype,n),i&&r(t,i),e}());t.default=i},"./src/streaming/constants/MetricsConstants.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&r(t.prototype,n),i&&r(t,i),e}());t.default=i},"./src/streaming/constants/ProtectionConstants.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,n,i;return t=e,(n=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&r(t.prototype,n),i&&r(t,i),e}());t.default=i},"./src/streaming/controllers/AbrController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/rules/abr/ABRRulesCollection.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/streaming/constants/MetricsConstants.js"),o=n("./src/streaming/vo/BitrateInfo.js"),s=n("./src/streaming/models/FragmentModel.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js"),c=n("./src/core/FactoryMaker.js"),d=n("./src/streaming/rules/RulesContext.js"),f=n("./src/streaming/rules/SwitchRequest.js"),h=n("./src/streaming/rules/SwitchRequestHistory.js"),p=n("./src/streaming/rules/DroppedFramesHistory.js"),m=n("./src/streaming/rules/ThroughputHistory.js"),g=n("./src/core/Debug.js"),v=n("./src/streaming/vo/metrics/HTTPRequest.js"),y=n("./src/streaming/utils/SupervisorTools.js"),_=n("./src/streaming/MediaPlayerEvents.js"),b=1e3,T=100,E=0;function S(){var e,t,n,c,S,w,A,M,L,C,D,k,P,I,O,R,x,N,j,F,U,B,Y,H,V,G,K=this.context,W=Object(g.default)(K).getInstance(),q=Object(u.default)(K).getInstance();function z(){S={},w={},M={},A={},j={},B={},Y={},H={},void 0===C&&(C=!1),F&&F.reset(),N=void 0,F=void 0,U=void 0,clearTimeout(L),L=null}function X(t){var r=t.request.mediaType,i=t.streamId;if(r&&i&&A[i]&&G.get().streaming.abr.autoSwitchBitrate[r]){var o=A[i][r];if(o){var u=Object(d.default)(K).create({abrController:e,streamProcessor:o,currentRequest:t.request,useBufferOccupancyABR:B[r],useL2AABR:Y[r],useLoLPABR:H[r],videoModel:I}),l=n.shouldAbandonFragment(u,i);if(l.quality>f.default.NO_CHANGE){var h=o.getFragmentModel();h.getRequests({state:s.default.FRAGMENT_MODEL_LOADING,index:t.request.index})[0]&&(h.abortRequests(),M[i][r].state=a.default.ABANDON_LOAD,j[i][r].reset(),j[i][r].push({oldValue:ee(r,i),newValue:l.quality,confidence:1,reason:l.reason}),te(r,c.getActiveStreamInfo(),l.quality,l.reason),clearTimeout(L),L=setTimeout((function(){M[i][r].state=a.default.ALLOW_LOAD,L=null}),G.get().streaming.abandonLoadTimeout))}}}}function Q(e){e.mediaType===i.default.VIDEO&&(void 0!==N&&F.push(e.streamId,N,I.getPlaybackQuality()),N=e.newQuality)}function $(e){var n,r;e.metric!==a.default.HTTP_REQUEST||!e.value||e.value.type!==v.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==i.default.AUDIO&&e.mediaType!==i.default.VIDEO||U.push(e.mediaType,e.value,G.get().streaming.abr.useDeadTimeLatency),e.metric!==a.default.BUFFER_LEVEL||e.mediaType!==i.default.AUDIO&&e.mediaType!==i.default.VIDEO||(n=e.mediaType,r=.001*e.value.level,G.get().streaming.abr.ABRStrategy===i.default.ABR_STRATEGY_DYNAMIC&&function(e,n){try{var r=O.getStableBufferTime(),i=r,a=.5*r,o=B[e],s=n>(o?a:i);B[e]=s,s!==o&&(s?t.info("["+e+"] switching from throughput to buffer occupancy ABR rule (buffer: "+n.toFixed(3)+")."):t.info("["+e+"] switching from buffer occupancy to throughput ABR rule (buffer: "+n.toFixed(3)+")."))}catch(e){t.error(e)}}(n,r))}function J(e,t){try{return S[t]=S[t]||{},S[t].hasOwnProperty(e)||(S[t][e]=0),function(e,t,n){if(t!==i.default.VIDEO||!G.get().streaming.abr.limitBitrateByPortal||!A[n]||!A[n][t])return e;C||ae();var r=A[n][t].getStreamInfo(),a=P.getAdaptationForType(r.index,t,r).Representation,o=e;if(D>0&&k>0){for(;o>0&&a[o]&&D<a[o].width&&D-a[o-1].width<a[o].width-D;)o-=1;for(;o<a.length-1&&a[o].width===a[o+1].width;)o+=1}return o}(function(e,t,n){var r=S[n][t],i=G.get().streaming.abr.maxRepresentationRatio[t];return isNaN(i)||i>=1||i<0?e:Math.min(e,Math.round(r*i))}(function(e,t){var n=S[t][e],r=n;if(!A[t]||!A[t][e])return r;var i=Z(e,t);void 0!==i&&(r=Math.max(n,i));var a=function(e,t){try{var n=O.getAbrBitrateParameter("maxBitrate",e);return n>-1?re(A[t][e].getMediaInfo(),n,t):void 0}catch(e){return}}(e,t);return void 0!==a&&(r=Math.min(r,a)),r}(e,t),e,t),e,t)}catch(e){return}}function Z(e,t){try{return function(e,t){try{var n=O.getAbrBitrateParameter("minBitrate",e);if(n>-1){var r=A[t][e].getMediaInfo(),i=ie(r),a=re(r,n,t);return i[a]&&a<i.length-1&&i[a].bitrate<1e3*n&&a++,a}return}catch(e){return}}(e,t)}catch(e){return}}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return t||(t=c.getActiveStreamInfo().id),e&&A[t]&&A[t][e]&&t?(w[t]=w[t]||{},w[t].hasOwnProperty(e)||(w[t][e]=E),w[t][e]):E}catch(e){return E}}function te(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t&&t.id&&e){var i=t.id,a=ee(e,i);Object(y.checkInteger)(n);var o=J(e,i);n!==a&&n>=0&&n<=o&&ne(e,a,n,o,r,i)}}function ne(e,n,r,i,a,o){if(e&&A[o]&&A[o][e]){var s=A[o][e].getStreamInfo(),u=s&&s.manifestInfo&&s.manifestInfo.isDynamic,c=V.getCurrentBufferLevel(e);t.info("Stream ID: "+o+" ["+e+"] switch from "+n+" to "+r+"/"+i+" (buffer: "+c+") "+(a?JSON.stringify(a):".")),w[o]=w[o]||{},w[o][e]=r;var d=function(e,t,n){if(t&&A&&A[e]&&A[e][t]){var r=ie(A[e][t].getMediaInfo());return r[n]?r[n]:null}return null}(o,e,r);q.trigger(l.default.QUALITY_CHANGE_REQUESTED,{oldQuality:n,newQuality:r,reason:a,streamInfo:s,bitrateInfo:d,maxIdx:i,mediaType:e},{streamId:s.id,mediaType:e});var f=U.getAverageThroughput(e,u);isNaN(f)||x.setSavedBitrateSettings(e,f)}}function re(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e&&e.type?A[n][e.type].getRepresentationInfo():null;if(G.get().streaming.abr.useDeadTimeLatency&&r&&i&&i.fragmentDuration){r/=1e3;var a=i.fragmentDuration;if(r>a)return 0;t*=1-r/a}for(var o=ie(e),s=o.length-1;s>=0;s--)if(1e3*t>=o[s].bitrate)return s;return E}function ie(e){var t=[];if(!e||!e.bitrateList)return t;for(var n,r=e.bitrateList,i=e.type,a=0,s=r.length;a<s;a++)(n=new o.default).mediaType=i,n.qualityIndex=a,n.bitrate=r[a].bandwidth,n.width=r[a].width,n.height=r[a].height,n.scanType=r[a].scanType,t.push(n);return t}function ae(){if(I){var e=G.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;D=I.getClientWidth()*e,k=I.getClientHeight()*e}}return e={initialize:function(){F=Object(p.default)(K).create(),U=Object(m.default)(K).create({settings:G}),(n=Object(r.default)(K).create({dashMetrics:V,customParametersModel:R,mediaPlayerModel:O,settings:G})).initialize(),q.on(_.default.QUALITY_CHANGE_RENDERED,Q,e),q.on(_.default.METRIC_ADDED,$,e),q.on(l.default.LOADING_PROGRESS,X,e)},isPlayingAtTopQuality:function(e){var t=e?e.id:null,n=ee(i.default.AUDIO,t),r=ee(i.default.VIDEO,t);return n===J(i.default.AUDIO,t)&&r===J(i.default.VIDEO,t)},updateTopQualityIndex:function(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return S[n]=S[n]||{},S[n][t]=r,r},clearDataForStream:function(e){F&&F.clearForStream(e),A[e]&&delete A[e],j[e]&&delete j[e],M[e]&&delete M[e]},getThroughputHistory:function(){return U},getBitrateList:ie,getQualityForBitrate:re,getTopBitrateInfoFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t||(t=c.getActiveStreamInfo().id),e&&A&&A[t]&&A[t][e]){var n=J(e,t),r=ie(A[t][e].getMediaInfo());return r[n]?r[n]:null}return null},getMinAllowedIndexFor:Z,getMaxAllowedIndexFor:J,getInitialBitrateFor:function(e,t){if(function(){if(!x||!x.hasOwnProperty("getSavedBitrateSettings"))throw new Error(i.default.MISSING_CONFIG_ERROR)}(),e===i.default.TEXT)return NaN;var n=x.getSavedBitrateSettings(e),r=O.getAbrBitrateParameter("initialBitrate",e),a=G.get().streaming.abr.initialRepresentationRatio[e];if(-1===r)if(a>-1){var o=A[t][e].getStreamInfo(),s=P.getAdaptationForType(o.index,e,o).Representation;r=Array.isArray(s)?s[Math.max(Math.round(s.length*a)-1,0)].bandwidth/1e3:0}else r=isNaN(n)?e===i.default.VIDEO?b:T:n;return r},getQualityFor:ee,getAbandonmentStateFor:function(e,t){return M[e]&&M[e][t]?M[e][t].state:null},setPlaybackQuality:te,checkPlaybackQuality:function(t,r){try{if(!(t&&A&&A[r]&&A[r][t]))return!1;if(F){var i=I.getPlaybackQuality();i&&F.push(r,N,i)}if(!G.get().streaming.abr.autoSwitchBitrate[t])return!1;var o=ee(t,r),s=Object(d.default)(K).create({abrController:e,switchHistory:j[r][t],droppedFramesHistory:F,streamProcessor:A[r][t],currentValue:o,useBufferOccupancyABR:B[t],useL2AABR:Y[t],useLoLPABR:H[t],videoModel:I}),u=Z(t,r),l=J(t,r),c=n.getMaxQuality(s),h=c.quality;return void 0!==u&&(h>f.default.NO_CHANGE?h:o)<u&&(h=u),h>l&&(h=l),j[r][t].push({oldValue:o,newValue:h}),h>f.default.NO_CHANGE&&h!==o&&(M[r][t].state===a.default.ALLOW_LOAD||h>o)&&(ne(t,o,h,l,c.reason,r),!0)}catch(e){return!1}},setElementSize:ae,setWindowResizeEventCalled:function(e){C=e},registerStreamType:function(e,t){var n=t.getStreamInfo().id;A[n]||(A[n]={}),j[n]||(j[n]={}),M[n]||(M[n]={}),j[n][e]=Object(h.default)(K).create(),A[n][e]=t,M[n][e]={},M[n][e].state=a.default.ALLOW_LOAD,function(e){var t=G.get().streaming.abr.ABRStrategy;t===i.default.ABR_STRATEGY_L2A?(B[e]=!1,H[e]=!1,Y[e]=!0):t===i.default.ABR_STRATEGY_LoLP?(B[e]=!1,H[e]=!0,Y[e]=!1):t===i.default.ABR_STRATEGY_BOLA?(B[e]=!0,H[e]=!1,Y[e]=!1):t===i.default.ABR_STRATEGY_THROUGHPUT?(B[e]=!1,H[e]=!1,Y[e]=!1):t===i.default.ABR_STRATEGY_DYNAMIC&&(B[e]=!(!B||!B[e])&&B[e],H[e]=!1,Y[e]=!1)}(e),e===i.default.VIDEO&&ae()},unRegisterStreamType:function(e,t){try{A[e]&&A[e][t]&&delete A[e][t],j[e]&&j[e][t]&&delete j[e][t],M[e]&&M[e][t]&&delete M[e][t]}catch(e){}},setConfig:function(e){e&&(e.streamController&&(c=e.streamController),e.domStorage&&(x=e.domStorage),e.mediaPlayerModel&&(O=e.mediaPlayerModel),e.customParametersModel&&(R=e.customParametersModel),e.dashMetrics&&(V=e.dashMetrics),e.adapter&&(P=e.adapter),e.videoModel&&(I=e.videoModel),e.settings&&(G=e.settings))},reset:function(){z(),q.off(l.default.LOADING_PROGRESS,X,e),q.off(_.default.QUALITY_CHANGE_RENDERED,Q,e),q.off(_.default.METRIC_ADDED,$,e),n&&n.reset()}},t=W.getLogger(e),z(),e}S.__dashjs_factory_name="AbrController";var w=c.default.getSingletonFactory(S);w.QUALITY_DEFAULT=E,c.default.updateSingletonFactory(S.__dashjs_factory_name,w),t.default=w},"./src/streaming/controllers/BaseURLController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/models/BaseURLTreeModel.js"),i=n("./src/streaming/utils/BaseURLSelector.js"),a=n("./src/streaming/utils/URLUtils.js"),o=n("./src/dash/vo/BaseURL.js"),s=n("./src/core/FactoryMaker.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js");function c(){var e,t,n,s,c=this.context,d=Object(u.default)(c).getInstance(),f=Object(a.default)(c).getInstance();function h(e){n.invalidateSelectedIndexes(e.entry)}return e={reset:function(){n.reset(),s.reset()},initialize:function(e){var r;n.setConfig({adapter:t}),r=e,n.update(r),s.chooseSelector(t.getIsDVB(r))},resolve:function(e){var t=n.getForPath(e).reduce((function(e,t){var n=s.select(t);return n?(f.isRelative(n.url)?e.url=f.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e.availabilityTimeOffset=n.availabilityTimeOffset,e.availabilityTimeComplete=n.availabilityTimeComplete,e):new o.default}),new o.default);if(!f.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(n=e.baseURLTreeModel),e.baseURLSelector&&(s=e.baseURLSelector),e.adapter&&(t=e.adapter)}},n=Object(r.default)(c).create(),s=Object(i.default)(c).create(),d.on(l.default.SERVICE_LOCATION_BLACKLIST_CHANGED,h,e),e}c.__dashjs_factory_name="BaseURLController",t.default=s.default.getClassFactory(c)},"./src/streaming/controllers/BlacklistController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/EventBus.js");function a(e){var t;e=e||{};var n=[],r=Object(i.default)(this.context).getInstance(),a=e.updateEventName,o=e.addBlacklistEventName;function s(e){-1===n.indexOf(e)&&(n.push(e),r.trigger(a,{entry:e}))}function u(e){s(e.entry)}return t={add:s,contains:function(e){return!!(n.length&&e&&e.length)&&-1!==n.indexOf(e)},reset:function(){n=[]}},o&&r.on(o,u,t),t}a.__dashjs_factory_name="BlackListController",t.default=r.default.getClassFactory(a)},"./src/streaming/controllers/BufferController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/streaming/models/FragmentModel.js"),o=n("./src/streaming/SourceBufferSink.js"),s=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/core/Debug.js"),d=n("./src/streaming/utils/InitCache.js"),f=n("./src/streaming/vo/DashJSError.js"),h=n("./src/core/errors/Errors.js"),p=n("./src/streaming/vo/metrics/HTTPRequest.js"),m=n("./src/streaming/MediaPlayerEvents.js"),g=.5,v=.01,y=22,_="BufferController";function b(e){e=e||{};var t,n,l,b,T,E,S,w,A,M,L,C,D,k,P,I,O,R,x=this.context,N=Object(s.default)(x).getInstance(),j=e.errHandler,F=e.fragmentModel,U=e.representationController,B=e.adapter,Y=e.textController,H=e.abrController,V=e.playbackController,G=e.streamInfo,K=e.type,W=e.settings;function q(e){E=e}function z(e){return B.convertRepresentationToRepresentationInfo(U.getRepresentationForQuality(e))}function X(e){W.get().streaming.cacheInitSegments&&(n.info("Init fragment finished loading saving to",K+"'s init cache"),P.save(e.chunk)),n.debug("Append Init fragment",K," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),$(e.chunk)}function Q(e){$(e.chunk,e.request)}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;A.append(e,t).then((function(e){Z(e)})).catch((function(e){Z(e)})),e.mediaInfo.type===r.default.VIDEO&&Te(u.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function J(e){if(e&&e.length>0)for(var t=0,r=e.length;t<r;t++)n.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",V.getTime())}function Z(e){if(e.error)return e.error.code===y&&function(){if(k=!0,T=.8*_e(),n.warn("Quota exceeded, Critical Buffer: "+T),T>0){var e=Math.max(.2*T,1),t=T-e,r=Math.min(W.get().streaming.buffer.bufferTimeAtTopQuality,.9*t),i=Math.min(W.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*t),a={streaming:{buffer:{bufferToKeep:parseFloat(e.toFixed(5)),bufferTimeAtTopQuality:parseFloat(r.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(i.toFixed(5))}}};W.update(a)}}(),void(e.error.code!==y&&be()||(n.warn("Clearing playback buffer to overcome quota exceed situation"),Te(u.default.QUOTA_EXCEEDED,{criticalBufferLevel:T,quotaExceededTime:e.chunk.start}),de(ce())));if(A&&(oe(),k=!1,(L=e.chunk)&&L.endFragment)){L&&!isNaN(L.index)&&(S=Math.max(L.index,S),se());var t=A.getAllBufferRanges();L.segmentType===p.HTTPRequest.MEDIA_SEGMENT_TYPE&&(J(t),ne(),function(){if(!isNaN(R))if(K===r.default.AUDIO||K===r.default.VIDEO){var e=V.getTime(),t=ae(e,0),n=ae(R,0);if(t&&n&&t.start===n.start)R=NaN;else{var i=U.getCurrentRepresentation().segmentDuration,a=ae(R,i);a&&(W.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(e-R)>i?R<=a.end&&V.seek(Math.max(R,a.start),!1,!0):e<a.start&&V.seek(a.start,!1,!0))}}else R=NaN}()),L&&Te(u.default.BYTES_APPENDED_END_FRAGMENT,{quality:L.quality,startTime:L.start,index:L.index,bufferedRanges:t,segmentType:L.segmentType,mediaType:K})}}function ee(){return new Promise((function(e,t){var n=te();if(!n||0===n.length)return ne(),void e();de(n).then((function(){e()})).catch((function(e){t(e)}))}))}function te(e){var t=[],n=A.getAllBufferRanges();if(!n||0===n.length)return t;if(!e&&0!==e||isNaN(e))t.push({start:n.start(0),end:n.end(n.length-1)+g});else{var r=function(e,t){var n=W.get().streaming.buffer.bufferToKeep,r=t.start(0);if(e-r>n){var i=Math.max(0,e-n),o=F.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:e,threshold:v})[0];if(o&&(i=Math.min(o.startTime,i)),i>0)return{start:r,end:i}}return null}(e,n),i=function(e,t){var n=t.end(t.length-1)+g,r=G.manifestInfo.duration>=W.get().streaming.buffer.longFormContentDurationThreshold?W.get().streaming.buffer.bufferTimeAtTopQualityLongForm:W.get().streaming.buffer.bufferTimeAtTopQuality;if(n-e>r){var i=e+r,o=F.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:e,threshold:v})[0];if(o&&(i=Math.max(o.startTime+o.duration,i)),i<n)return{start:i,end:n}}return null}(e,n);r&&t.push(r),i&&t.push(i)}return t}function ne(){(!O||K===r.default.TEXT&&Y.isTextEnabled())&&oe()}function re(){ue()}function ie(){ue(),R=NaN}function ae(e,t){var n,r,i=A.getAllBufferRanges(),a=0,o=0,s=null,u=null,l=0,c=isNaN(t)?.15:t;if(null!=i){for(r=0,n=i.length;r<n;r++)if(a=i.start(r),o=i.end(r),null===s)l=Math.abs(a-e),e>=a&&e<o?(s=a,u=o):l<=c&&(s=a,u=o);else{if(!((l=a-u)<=c))break;u=o}if(null!==s)return{start:s,end:u}}return null}function oe(){if(V){var e=W.get().streaming.gaps.jumpGaps&&!isNaN(W.get().streaming.gaps.smallGapLimit)?W.get().streaming.gaps.smallGapLimit:NaN;b=Math.max(function(e,t){var n;return W.get().streaming.gaps.jumpGaps&&(t=W.get().streaming.gaps.smallGapLimit),null===(n=ae(e,t))?0:n.end-e}(V.getTime()||0,e),0),Te(u.default.BUFFER_LEVEL_UPDATED,{mediaType:K,bufferLevel:b}),ue()}}function se(){var e=S>=w-1,t=V.getTimeToStreamEnd(G)-b<=0;!e&&!t||l||(ye(!0),n.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(G.id," and type ").concat(K)))}function ue(){K!==r.default.AUDIO&&K!==r.default.VIDEO||((!V.getLowLatencyModeEnabled()&&b<W.get().streaming.buffer.stallThreshold||0===b)&&!l?le(i.default.BUFFER_EMPTY):(l||b>=W.get().streaming.buffer.stallThreshold||V.getLowLatencyModeEnabled()&&b>0)&&le(i.default.BUFFER_LOADED))}function le(e){M===e||e===i.default.BUFFER_EMPTY&&0===V.getTime()||K===r.default.TEXT&&!Y.isTextEnabled()||(M=e,Te(u.default.BUFFER_LEVEL_STATE_CHANGED,{state:e}),Te(e===i.default.BUFFER_LOADED?u.default.BUFFER_LOADED:u.default.BUFFER_EMPTY),n.debug(e===i.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function ce(){var e=[],t=A.getAllBufferRanges();if(!t||0===t.length)return e;var n=V.getTime(),r=Math.max(0,n-W.get().streaming.buffer.bufferToKeep),i=F.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:v})[0];if(i)r=Math.min(i.startTime,r);else if(0===n&&V.getIsDynamic())return[];if(t.start(0)<=r){for(var o={start:0,end:r},s=0;s<t.length&&t.end(s)<=r;s++)o.end=t.end(s);o.start<o.end&&e.push(o)}return e}function de(e){return new Promise((function(t,n){if(e&&A&&0!==e.length){var r=[];e.forEach((function(e){r.push(function(e){return new Promise((function(t,n){e.resolve=t,e.reject=n,I.push(e)}))}(e))})),D||fe(),Promise.all(r).then((function(){t()})).catch((function(e){n(e)}))}else t()}))}function fe(){try{if(0===I.length||!A)return n.debug("Nothing to prune, halt pruning"),I=[],void(D=!1);var e=A.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return n.debug("SourceBuffer is empty (or does not exist), halt pruning"),I=[],void(D=!1);var t=I.shift();n.debug("".concat(K,": Removing buffer from: ").concat(t.start," to ").concat(t.end)),D=!0,V.getTime()<t.end&&ye(!1),A.remove(t).then((function(e){he(e)})).catch((function(e){he(e)}))}catch(e){D=!1}}function he(e){n.debug("onRemoved buffer from:",e.from,"to",e.to),J(A.getAllBufferRanges()),0===I.length&&(D=!1,oe()),e.unintended&&(n.warn("Detected unintended removal from:",e.from,"to",e.to,"setting streamprocessor time to",e.from),Te(u.default.SEEK_TARGET,{time:e.from})),D?fe():(O?O=!1:oe(),Te(u.default.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:be(),quotaExceeded:k}))}function pe(e){return new Promise((function(t){e&&void 0!==e.MSETimeOffset&&A&&A.updateTimestampOffset?A.updateTimestampOffset(e.MSETimeOffset).then((function(){t()})).catch((function(){t()})):t()}))}function me(){return A&&!l?A.updateAppendWindow(G):Promise.resolve()}function ge(){++C*(W.get().streaming.wallclockTimeUpdateInterval/1e3)>=W.get().streaming.buffer.bufferPruningInterval&&(C=0,A&&K!==r.default.TEXT&&(l||de(ce())))}function ve(){ue()}function ye(e){l!==e&&((l=e)?Te(u.default.BUFFERING_COMPLETED):w=Number.POSITIVE_INFINITY)}function _e(){try{var e,t,n=A.getAllBufferRanges(),r=0;if(!n)return r;for(t=0,e=n.length;t<e;t++)r+=n.end(t)-n.start(t);return r}catch(e){return 0}}function be(){var e=_e();return isNaN(e)||e<T}function Te(e,t){var n=t||{};N.trigger(e,n,{streamId:G.id,mediaType:K})}function Ee(e,t){if(T=Number.POSITIVE_INFINITY,M=void 0,w=Number.POSITIVE_INFINITY,S=0,L=null,l=!1,D=!1,k=!1,b=0,C=0,I=[],R=NaN,A){var n=A;A=null,e||t||n.abort().then((function(){n.reset(t),n=null}))}O=!1}return t={initialize:function(e){q(e),N.on(u.default.INIT_FRAGMENT_LOADED,X,t),N.on(u.default.MEDIA_FRAGMENT_LOADED,Q,t),N.on(u.default.WALLCLOCK_TIME_UPDATED,ge,t),N.on(m.default.PLAYBACK_PLAYING,ie,t),N.on(m.default.PLAYBACK_PROGRESS,ne,t),N.on(m.default.PLAYBACK_TIME_UPDATED,ne,t),N.on(m.default.PLAYBACK_RATE_CHANGED,ve,t),N.on(m.default.PLAYBACK_STALLED,re,t)},getStreamId:function(){return G.id},getType:function(){return K},getBufferControllerType:function(){return _},createBufferSink:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(i,a){if(P&&e&&E){var s=H.getQualityFor(K,G.id);A=Object(o.default)(x).create({mediaSource:E,textController:Y,eventBus:N}),function(e,t,n){var i=z(n);return t&&t[K]&&(K===r.default.VIDEO||K===r.default.AUDIO)?A.initializeForStreamSwitch(e,i,t[K]):A.initializeForFirstUse(G,e,i)}(e,t,s).then((function(){return pe(z(s))})).then((function(){i(A)})).catch((function(e){n.fatal("Caught error on create SourceBuffer: "+e),j.error(new f.default(h.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,h.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+K)),a(e)}))}else i(null)}))},getBuffer:function(){return A},getBufferLevel:function(){return b},getRangeAt:ae,setMediaSource:q,getMediaSource:function(){return E},appendInitSegmentFromCache:function(e){var t=P.extract(G.id,e);return!!t&&(n.info("Append Init fragment",K," with representationId:",t.representationId," and quality:",t.quality,", data size:",t.bytes.byteLength),$(t),!0)},getIsBufferingCompleted:function(){return l},setIsBufferingCompleted:ye,getIsPruningInProgress:function(){return D},reset:function(e,t){N.off(u.default.INIT_FRAGMENT_LOADED,X,this),N.off(u.default.MEDIA_FRAGMENT_LOADED,Q,this),N.off(u.default.WALLCLOCK_TIME_UPDATED,ge,this),N.off(m.default.PLAYBACK_PLAYING,ie,this),N.off(m.default.PLAYBACK_PROGRESS,ne,this),N.off(m.default.PLAYBACK_TIME_UPDATED,ne,this),N.off(m.default.PLAYBACK_RATE_CHANGED,ve,this),N.off(m.default.PLAYBACK_STALLED,re,this),Ee(e,t)},prepareForPlaybackSeek:function(){return l&&ye(!1),A.abort()},prepareForReplacementTrackSwitch:function(e){return new Promise((function(t,n){A.abort().then((function(){return me()})).then((function(){return A.changeType(e)})).then((function(){return ee()})).then((function(){ye(!1),t()})).catch((function(e){n(e)}))}))},prepareForNonReplacementTrackSwitch:function(e){return new Promise((function(t,n){me().then((function(){return A.changeType(e)})).then((function(){t()})).catch((function(e){n(e)}))}))},prepareForReplacementQualitySwitch:function(){return new Promise((function(e,t){A.abort().then((function(){return me()})).then((function(){return ee()})).then((function(){ye(!1),e()})).catch((function(e){t(e)}))}))},updateAppendWindow:me,getAllRangesWithSafetyFactor:te,getContinuousBufferTimeForTargetTime:function(e){try{var t=e,n=A.getAllBufferRanges();if(!n||0===n.length)return NaN;for(var r=0;t===e&&r<n.length;){var i=n.start(r),a=n.end(r);t>=i&&t<=a&&(t=a),r+=1}return t===e?NaN:t}catch(e){}},clearBuffers:de,pruneAllSafely:ee,updateBufferTimestampOffset:pe,setSeekTarget:function(e){R=e},segmentRequestingCompleted:function(e){isNaN(e)||(w=e,se())}},n=Object(c.default)(x).getInstance().getLogger(t),P=Object(d.default)(x).getInstance(),Ee(),t}b.__dashjs_factory_name=_,t.default=l.default.getClassFactory(b)},"./src/streaming/controllers/CatchupController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/EventBus.js"),o=n("./src/streaming/constants/Constants.js"),s=n("./src/streaming/MediaPlayerEvents.js"),u=n("./src/core/events/Events.js"),l=n("./src/streaming/constants/MetricsConstants.js");function c(){var e,t,n,r,c,d,f,h,p,m,g,v=this.context,y=Object(a.default)(v).getInstance();function _(){t=!1;var e="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",r=/safari/.test(e)&&!/chrome/.test(e);n=r?.25:.02}function b(){t=!1}function T(e){if(e.streamId===d.getActiveStreamInfo().id&&m){var t=f.getLiveDelay();f.getBufferLevel()>t/2&&(m=!1)}}function E(e){e.streamId===d.getActiveStreamInfo().id&&(m=e.state===l.default.BUFFER_EMPTY)}function S(){h.getCatchupModeEnabled()||r.setPlaybackRate(1)}function w(){f.getIsDynamic()&&h.getCatchupModeEnabled()&&h.getCatchupPlaybackRate()>0&&!f.isPaused()&&!f.isSeeking()&&function(){try{var e=h.getLiveCatchupLatencyThreshold();if(!f.getTime()>0||t||!isNaN(e)&&f.getCurrentLiveLatency()>=e)return!1;if(M()===o.default.LIVE_CATCHUP_MODE_LOLP){var n=f.getBufferLevel(),r=c.get().streaming.liveCatchup.playbackBufferMin;return function(e,t){try{return Math.abs(A())>0||e<t}catch(e){return!1}}(n,r)}return function(){try{return Math.abs(A())>0}catch(e){return!1}}()}catch(e){return!1}}()&&function(){var e,i,a;if(!t&&r){var s,u=r.getPlaybackRate(),l=h.getCatchupPlaybackRate(),v=f.getBufferLevel(),y=A(),_=h.getCatchupMaxDrift();if(!isNaN(_)&&_>0&&y>_)g.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),t=!0,e=d&&d.hasVideoTrack()?o.default.VIDEO:o.default.AUDIO,i=p.getCurrentDVRInfo(e),(a=i?i.range:null)&&!isNaN(a.end)&&f.seek(a.end-f.getLiveDelay(),!0,!1);else{var b=f.getCurrentLiveLatency(),T=f.getLiveDelay();if(M()===o.default.LIVE_CATCHUP_MODE_LOLP){var E=c.get().streaming.liveCatchup.playbackBufferMin;s=function(e,t,r,i,a,o){var s,u=e;if(a<i){var l=5*(a-i),c=2*u/(1+Math.pow(Math.E,-l));s=1-u+c,g.debug("[LoL+ playback control_buffer-based] bufferLevel: "+a+", newRate: "+s)}else{if(Math.abs(t-r)<=.02*r)s=1;else{var d=5*(t-r),f=2*u/(1+Math.pow(Math.E,-d));s=1-u+f}g.debug("[LoL+ playback control_latency-based] latency: "+t+", newRate: "+s)}return Math.abs(o-s)<=n&&(s=null),s}(l,b,T,E,v,u)}else s=function(e,t,r,i,a){if(m)return 1;var o=e,s=t-r,u=5*s,l=2*o/(1+Math.pow(Math.E,-u)),c=1-o+l;return f.getPlaybackStalled()&&i<=r/2&&s>0&&(c=1),Math.abs(a-c)<=n&&(c=null),c}(l,b,T,v,u);s&&(g.debug("[CatchupController]: Setting playback rate to ".concat(s)),r.setPlaybackRate(s))}}}()}function A(){return f.getCurrentLiveLatency()-f.getLiveDelay()}function M(){var e=c.get().streaming.liveCatchup.playbackBufferMin;return c.get().streaming.liveCatchup.mode!==o.default.LIVE_CATCHUP_MODE_LOLP||null===e||isNaN(e)?o.default.LIVE_CATCHUP_MODE_DEFAULT:o.default.LIVE_CATCHUP_MODE_LOLP}return e={reset:function(){y.off(s.default.BUFFER_LEVEL_UPDATED,T,e),y.off(s.default.BUFFER_LEVEL_STATE_CHANGED,E,e),y.off(s.default.PLAYBACK_PROGRESS,w,e),y.off(s.default.PLAYBACK_TIME_UPDATED,w,e),y.off(s.default.PLAYBACK_SEEKED,w,e),y.off(u.default.SETTING_UPDATED_CATCHUP_ENABLED,S,e),_(),r.setPlaybackRate(1,!0)},setConfig:function(e){e&&(e.settings&&(c=e.settings),e.videoModel&&(r=e.videoModel),e.streamController&&(d=e.streamController),e.playbackController&&(f=e.playbackController),e.dashMetrics&&(p=e.dashMetrics),e.mediaPlayerModel&&(h=e.mediaPlayerModel))},initialize:function(){y.on(s.default.BUFFER_LEVEL_UPDATED,T,e),y.on(s.default.BUFFER_LEVEL_STATE_CHANGED,E,e),y.on(s.default.PLAYBACK_PROGRESS,w,e),y.on(s.default.PLAYBACK_TIME_UPDATED,w,e),y.on(s.default.PLAYBACK_SEEKED,b,e),y.on(u.default.SETTING_UPDATED_CATCHUP_ENABLED,S,e)}},g=Object(i.default)(v).getInstance().getLogger(e),_(),e}c.__dashjs_factory_name="CatchupController",t.default=r.default.getSingletonFactory(c)},"./src/streaming/controllers/EventController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/EventBus.js"),o=n("./src/streaming/MediaPlayerEvents.js"),s=n("./src/streaming/net/XHRLoader.js");function u(){var e,t,n,r,u,l,c,d,f,h,p,m="urn:mpeg:dash:event:2012",g=1,v="urn:mpeg:dash:event:callback:2015",y=1,_=300,b={DISCARDED:"discarded",UPDATED:"updated",ADDED:"added"},T=this.context,E=Object(a.default)(T).getInstance();function S(){if(!c||!d)throw new Error("setConfig function has to be called previously")}function w(){p=!1,n={},r={},u=null,h=!1,l=Date.now()/1e3}function A(){try{null!==u&&p&&(clearInterval(u),u=null,p=!1,function(){try{k(r),k(n)}catch(e){}}())}catch(e){throw e}}function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.eventStream.schemeIdUri,i=e.eventStream.value,a=e.id,o=b.DISCARDED;t[r]||(t[r]=[]);var s=t[r].findIndex((function(e){return(!i||e.eventStream.value&&e.eventStream.value===i)&&e.id===a}));return-1===s?(t[r].push(e),o=b.ADDED):n&&(t[r][s]=e,o=b.UPDATED),o}function L(e){try{if(e.eventStream.value==g){var t,n=e.calculatedPresentationTime;t=4294967295==e.calculatedPresentationTime?NaN:e.calculatedPresentationTime+e.duration,E.trigger(o.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:n,newDuration:t,newManifestValidAfter:NaN},{mode:o.default.EVENT_MODE_ON_START})}}catch(e){}}function C(){try{if(!h){h=!0;var e=d.getTime(),t=e-l;t=l>0?Math.max(0,t):0,D(r,t,e),D(n,t,e),l=e,h=!1}}catch(e){h=!1}}function D(e,n,r){try{P(e,(function(i){if(void 0!==i){var a=isNaN(i.duration)?0:i.duration;i.calculatedPresentationTime<=r&&i.calculatedPresentationTime+n+a>=r?I(i,e,o.default.EVENT_MODE_ON_START):(function(e,t,n){try{return e-t>n}catch(e){return!1}}(r,a+n,i.calculatedPresentationTime)||function(e){try{var t=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime>t}catch(e){return!1}}(i))&&(t.debug("Deleting event ".concat(i.id," as it is expired or invalid")),O(e,i))}}))}catch(e){}}function k(e){try{var t=d.getTime();P(e,(function(n){var r=n.eventStream&&n.eventStream.period&&!isNaN(n.eventStream.period.duration)?n.eventStream.period.duration:NaN,i=n.eventStream&&n.eventStream.period&&!isNaN(n.eventStream.period.start)?n.eventStream.period.start:NaN;if(!isNaN(r)&&!isNaN(i)){var a=n.calculatedPresentationTime;Math.abs(a-t)<_&&I(n,e,o.default.EVENT_MODE_ON_START)}}))}catch(e){}}function P(e,t){try{if(e)for(var n=Object.keys(e),r=0;r<n.length;r++)e[n[r]].forEach((function(e){void 0!==e&&t(e)}))}catch(e){}}function I(e,n,r){try{var i=d.getTime(),a=e.id;if(r===o.default.EVENT_MODE_ON_RECEIVE)return t.debug("Received event ".concat(a)),void E.trigger(e.eventStream.schemeIdUri,{event:e},{mode:r});e.eventStream.schemeIdUri===m&&e.eventStream.value==g?0===e.duration&&0===e.presentationTimeDelta||(t.debug("Starting manifest refresh event ".concat(a," at ").concat(i)),O(n,e),function(){try{S(),c.refreshManifest()}catch(e){}}()):e.eventStream.schemeIdUri===v&&e.eventStream.value==y?(t.debug("Starting callback event ".concat(a," at ").concat(i)),O(n,e),function(e){try{Object(s.default)(T).create({}).load({method:"get",url:e,request:{responseType:"arraybuffer"}})}catch(e){throw e}}(e.messageData)):(t.debug("Starting event ".concat(a," at ").concat(i)),O(n,e),E.trigger(e.eventStream.schemeIdUri,{event:e},{mode:r}))}catch(e){}}function O(e,t){var n=t.eventStream.schemeIdUri,r=t.eventStream.value,i=t.id;e[n]=e[n].filter((function(e){return r&&e.eventStream.value&&e.eventStream.value!==r||e.id!==i})),0===e[n].length&&delete e[n]}return e={addInlineEvents:function(e){try{if(S(),e)for(var r=0;r<e.length;r++){var i=e[r],a=M(i,n,!0);a===b.ADDED?(t.debug("Added inline event with id ".concat(i.id)),I(i,e,o.default.EVENT_MODE_ON_RECEIVE)):a===b.UPDATED&&t.debug("Updated inline event with id ".concat(i.id))}}catch(e){throw e}},addInbandEvents:function(e){try{S();for(var n=0;n<e.length;n++){var i=e[n];M(i,r,!1)===b.ADDED?(i.eventStream.schemeIdUri===m&&void 0===r[i.id]&&L(i),t.debug("Added inband event with id "+i.id),I(i,e,o.default.EVENT_MODE_ON_RECEIVE)):t.debug("Inband event with scheme_id_uri ".concat(i.eventStream.schemeIdUri,", value ").concat(i.eventStream.value," and id ").concat(i.id," was ignored because it has been added before."))}C()}catch(e){throw e}},getInbandEvents:function(){return r},getInlineEvents:function(){return n},start:function(){try{S(),t.debug("Start Event Controller");var e=f.get().streaming.eventControllerRefreshDelay;p||isNaN(e)||(p=!0,u=setInterval(C,e))}catch(e){throw e}},setConfig:function(e){try{if(!e)return;e.manifestUpdater&&(c=e.manifestUpdater),e.playbackController&&(d=e.playbackController),e.settings&&(f=e.settings)}catch(e){throw e}},reset:function(){A(),w()}},t=Object(i.default)(T).getInstance().getLogger(e),w(),e}u.__dashjs_factory_name="EventController",t.default=r.default.getSingletonFactory(u)},"./src/streaming/controllers/FragmentController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/DataChunk.js"),a=n("./src/streaming/models/FragmentModel.js"),o=n("./src/streaming/FragmentLoader.js"),s=n("./src/streaming/utils/RequestModifier.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js"),c=n("./src/streaming/MediaPlayerEvents.js"),d=n("./src/core/errors/Errors.js"),f=n("./src/core/FactoryMaker.js"),h=n("./src/core/Debug.js");function p(e){e=e||{};var t,n,f,p=this.context,m=Object(u.default)(p).getInstance(),g=e.errHandler,v=e.mediaPlayerModel,y=e.dashMetrics,_=Object(h.default)(p).getInstance(),b=e.streamInfo;function T(){return b.id}function E(){for(var e in f)f[e].reset();f={}}function S(e){if(e.sender){var t=e.request,a=e.response,o=t.isInitializationRequest(),s=t.mediaInfo.streamInfo;if(e.error&&(t.mediaType===r.default.AUDIO||t.mediaType===r.default.VIDEO||t.mediaType===r.default.TEXT&&t.mediaInfo.isFragmented)&&m.trigger(l.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation}),a&&s){var u=function(e,t,n,r){var a=new i.default;return a.streamId=n,a.mediaInfo=t.mediaInfo,a.segmentType=t.type,a.start=t.startTime,a.duration=t.duration,a.end=a.start+a.duration,a.bytes=e,a.index=t.index,a.quality=t.quality,a.representationId=t.representationId,a.endFragment=r,a}(a,t,b.id,e.type!==l.default.FRAGMENT_LOADING_PROGRESS);m.trigger(o?l.default.INIT_FRAGMENT_LOADED:l.default.MEDIA_FRAGMENT_LOADED,{chunk:u,request:t},{streamId:s.id,mediaType:t.mediaType})}else n.warn("No "+t.mediaType+" bytes to push or stream is inactive.")}}return t={getStreamId:T,getModel:function(t){var n=f[t];return n||(n=Object(a.default)(p).create({streamInfo:b,type:t,dashMetrics:y,fragmentLoader:Object(o.default)(p).create({dashMetrics:y,mediaPlayerModel:v,errHandler:g,requestModifier:Object(s.default)(p).getInstance(),settings:e.settings,boxParser:e.boxParser,eventBus:m,events:l.default,errors:d.default,dashConstants:e.dashConstants,urlUtils:e.urlUtils,streamId:T()}),debug:_,eventBus:m,events:l.default}),f[t]=n),n},reset:function(){m.off(c.default.FRAGMENT_LOADING_COMPLETED,S,this),m.off(c.default.FRAGMENT_LOADING_PROGRESS,S,this),E()}},n=_.getLogger(t),E(),m.on(c.default.FRAGMENT_LOADING_COMPLETED,S,t),m.on(c.default.FRAGMENT_LOADING_PROGRESS,S,t),t}p.__dashjs_factory_name="FragmentController",t.default=f.default.getClassFactory(p)},"./src/streaming/controllers/GapController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/events/Events.js"),o=n("./src/core/EventBus.js"),s=100,u=10,l=.1;function c(){var e,t,n,r,c,d,f,h,p,m,g,v,y=this.context,_=Object(o.default)(y).getInstance();function b(){v.debug("Stopping the gap controller"),c&&(clearInterval(c),c=null),function(){_.off(a.default.WALLCLOCK_TIME_UPDATED,A,this),_.off(a.default.INITIAL_STREAM_SWITCH,w,this),_.off(a.default.PLAYBACK_SEEKING,T,this),_.off(a.default.BUFFER_REPLACEMENT_STARTED,E,e),_.off(a.default.TRACK_CHANGE_RENDERED,S,e)}(),c=null,d=NaN,r=0,m=null,g={}}function T(){m&&(clearTimeout(m),m=null)}function E(e){try{if(e.streamId!==h.getActiveStreamInfo().id||!e.mediaType)return;e.streamId===h.getActiveStreamInfo().id&&(g[e.mediaType]=!0)}catch(e){v.error(e)}}function S(e){e&&e.mediaType&&(g[e.mediaType]=!1)}function w(){c||function(){try{c||(v.debug("Starting the gap controller"),c=setInterval((function(){M()&&L(f.getTime())}),s))}catch(e){}}()}function A(){if(M(n.get().streaming.gaps.enableSeekFix)&&++r>=u){var e=f.getTime();t===e?L(e,!0):(t=e,d=NaN),r=0}}function M(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!h.getActiveStream())return!1;var t,r,i=Object.keys(g).some((function(e){return g[e]})),a=!!e&&(t=h.getActiveStream(),r=parseFloat((t.getStartTime()+t.getDuration()).toFixed(5)),f.getTime()+n.get().streaming.gaps.threshold>=r);return!i&&n.get().streaming.gaps.jumpGaps&&h.getActiveStreamProcessors().length>0&&(!f.isSeeking()||a)&&!f.isPaused()&&!h.getIsStreamSwitchInProgress()&&!h.getHasMediaOrInitialisationError()}function L(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n.get().streaming.gaps.enableStallFix,a=n.get().streaming.gaps.stallSeek,o=n.get().streaming.gaps.smallGapLimit,s=n.get().streaming.gaps.jumpLargeGaps,u=p.getBufferRange(),c=NaN,g=!1;if(t=function(e,t){try{if(!e||e.length<=1&&t>0)return NaN;for(var r=NaN,i=0;isNaN(r)&&i<e.length;){var a=i>0?e.end(i-1):0;t<e.start(i)&&a-t<n.get().streaming.gaps.threshold&&(r=i),i+=1}return r}catch(e){return null}}(u,e),!isNaN(t)){var y=u.start(t),_=y-e;_>0&&(_<=o||s)&&(c=y)}var b=f.getTimeToStreamEnd();if(isNaN(c)&&r&&isFinite(b)&&!isNaN(b)&&b<o&&(c=parseFloat(f.getStreamEndTime().toFixed(5)),g=!0),i&&isNaN(c)&&r&&isNaN(t)&&function(e,t){for(var n=0,r=e.length;n<r;n++)if(t>=e.start(n)&&t<=e.end(n))return!0;return!1}(u,e)&&(0===a?(v.warn("Toggle play pause to break stall"),p.pause(),p.play()):(v.warn("Jumping ".concat(a,"s to break stall")),c=e+a)),c>0&&d!==c&&c>e&&!m){var T=c-e;if(g){var E=h.getStreamForTime(c),S=E&&!!E.getPreloaded();v.warn("Jumping to end of stream because of gap from ".concat(e," to ").concat(c,". Gap duration: ").concat(T)),f.seek(c,!0,S)}else{var w=f.getIsDynamic(),A=t>0?u.end(t-1):e,M=w?1e3*Math.max(0,T-l):0;m=window.setTimeout((function(){f.seek(c,!0,!0),v.warn("Jumping gap occuring in period ".concat(h.getActiveStream().getStreamId()," starting at ").concat(A," and ending at ").concat(c,". Jumping by: ").concat(c-A)),m=null}),M)}d=c}}return e={reset:b,setConfig:function(e){e&&(e.settings&&(n=e.settings),e.playbackController&&(f=e.playbackController),e.streamController&&(h=e.streamController),e.videoModel&&(p=e.videoModel))},initialize:function(){!function(){_.on(a.default.WALLCLOCK_TIME_UPDATED,A,this),_.on(a.default.INITIAL_STREAM_SWITCH,w,this),_.on(a.default.PLAYBACK_SEEKING,T,this),_.on(a.default.BUFFER_REPLACEMENT_STARTED,E,e),_.on(a.default.TRACK_CHANGE_RENDERED,S,e)}()}},v=Object(i.default)(y).getInstance().getLogger(e),b(),e}c.__dashjs_factory_name="GapController",t.default=r.default.getSingletonFactory(c)},"./src/streaming/controllers/MediaController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/EventBus.js"),o=n("./src/core/FactoryMaker.js"),s=n("./src/core/Debug.js");function u(){var e,t,n,o,u,l,c,d,f=this.context,h=Object(a.default)(f).getInstance();function p(e,t){return e&&n[t]&&n[t][e]?n[t][e].list:[]}function m(e,t){return e&&n[t]&&n[t][e]?n[t][e].current:null}function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.streamInfo){var a=e.type,s=e.streamInfo.id,u=m(a,s);if(n[s]&&n[s][a]&&!_(e,u)&&(n[s][a].current=e,n[s][a].current&&(a!==r.default.TEXT||a===r.default.TEXT&&e.isFragmented)&&h.trigger(i.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:u,newMediaInfo:e,switchMode:o.get().streaming.trackSwitchMode[a]},{streamId:s}),!t)){var c=function(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration};return t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0?t:null}(e);if(!c||!n[s][a].storeLastSettings)return;c.roles&&(c.role=c.roles[0],delete c.roles),c.accessibility&&(c.accessibility=c.accessibility[0]),c.audioChannelConfiguration&&(c.audioChannelConfiguration=c.audioChannelConfiguration[0]),l[a]=c,d.setSavedMediaSettings(a,c)}}}function v(e,t){e&&t&&(u[e]=t)}function y(e){return e?u[e]:null}function _(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.codec===t.codec,o=e.roles.toString()===t.roles.toString(),s=e.accessibility.toString()===t.accessibility.toString(),u=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&a&&r&&i&&o&&s&&u}function b(){n={},l={},u={audio:null,video:null,text:null}}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!e.lang||t.lang.match(e.lang),a=void 0===e.index||null===e.index||t.index===e.index,o=!e.viewpoint||e.viewpoint===t.viewpoint,s=!e.role||!!t.roles.filter((function(t){return t===e.role}))[0],u=!e.accessibility||!!t.accessibility.filter((function(t){return t===e.accessibility}))[0],l=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter((function(t){return t===e.audioChannelConfiguration}))[0];return i&&a&&o&&(s||t.type===r.default.AUDIO&&n)&&u&&l}function E(e){var t,n=0,r=[];return e.forEach((function(e){(t=Math.max.apply(Math,e.bitrateList.map((function(e){return e.bandwidth}))))>n?(n=t,r=[e]):t===n&&r.push(e)})),r}function S(e){var t,n=1/0,r=[];return e.forEach((function(e){var i=e.bitrateList.reduce((function(e,t){var n=Math.max(1,t.width*t.height);return e+t.bandwidth/n}),0);(t=i/e.bitrateList.length)<n?(n=t,r=[e]):t===n&&r.push(e)})),r}function w(e){var t,n=0,r=[];return e.forEach((function(e){(t=e.representationCount)>n?(n=t,r=[e]):t===n&&r.push(e)})),r}function A(e,n){if(e===r.default.TEXT)return n[0];var i,a=o.get().streaming.selectionModeForInitialTrack,s=c.getCustomInitialTrackSelectionFunction();if(s&&"function"==typeof s)i=s(n);else switch(a){case r.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:i=function(e){var t,n,r=(t=0,n=[],e.forEach((function(e){isNaN(e.selectionPriority)||(e.selectionPriority>t?(t=e.selectionPriority,n=[e]):e.selectionPriority===t&&n.push(e))})),n);return r.length>1&&(r=E(r)),r.length>1&&(r=w(r)),r}(n);break;case r.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:i=function(e){var t=E(e);return t.length>1&&(t=w(t)),t}(n);break;case r.default.TRACK_SELECTION_MODE_FIRST_TRACK:i=M(n);break;case r.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:i=function(e){var t=S(e);return t.length>1&&(t=E(t)),t}(n);break;case r.default.TRACK_SELECTION_MODE_WIDEST_RANGE:i=function(e){var t=w(e);return t.length>1&&(t=E(e)),t}(n);break;default:t.warn("Track selection mode ".concat(a," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),i=M(n)}return i.length>0?i[0]:n[0]}function M(e){return e[0]}return e={setInitialMediaSettingsForType:function(e,t){var n=l[e]||y(e),r=p(e,t.id),i=[];n||(n=d.getSavedMediaSettings(e),v(e,n)),r&&0!==r.length&&(n&&r.forEach((function(t){T(n,t,!!l[e])&&i.push(t)})),0===i.length?g(A(e,r),!0):i.length>1?g(A(e,i,l[e])):g(i[0]))},addTrack:function(e){if(e){var t=e.type;if((i=t)===r.default.AUDIO||i===r.default.VIDEO||i===r.default.TEXT||i===r.default.IMAGE){var i,a=e.streamInfo.id;n[a]||(n[a]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var o=n[a][t].list,s=0,u=o.length;s<u;++s)if(_(o[s],e))return;o.push(e)}}},getTracksFor:p,getCurrentTrackFor:m,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,r=e.streamInfo.id;return n[r]&&n[r][t]&&_(n[r][t].current,e)},setTrack:g,selectInitialTrack:A,setInitialSettings:v,getInitialSettings:y,getTracksWithHighestBitrate:E,getTracksWithHighestEfficiency:S,getTracksWithWidestRange:w,isTracksEqual:_,matchSettings:T,saveTextSettingsDisabled:function(){d.setSavedMediaSettings(r.default.TEXT,null)},setConfig:function(e){e&&(e.domStorage&&(d=e.domStorage),e.settings&&(o=e.settings),e.customParametersModel&&(c=e.customParametersModel))},reset:b},t=Object(s.default)(f).getInstance().getLogger(e),b(),e}u.__dashjs_factory_name="MediaController";var l=o.default.getSingletonFactory(u);o.default.updateSingletonFactory(u.__dashjs_factory_name,l),t.default=l},"./src/streaming/controllers/MediaSourceController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js");function a(){var e,t,n,r=this.context;function a(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&"open"===t.readyState&&(null===e&&isNaN(e)||t.duration!==e&&(function(e){for(var t=e.sourceBuffers,n=0;n<t.length;n++)if(t[n].updating)return!0;return!1}(t)?setTimeout(a.bind(null,e),50):(r&&n.info("Set MediaSource duration:"+e),t.duration=e)))}return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?t=new MediaSource:e&&(t=new WebKitMediaSource),t},attachMediaSource:function(e){var n=window.URL.createObjectURL(t);return e.setSource(n),n},detachMediaSource:function(e){e.setSource(null)},setDuration:a,setSeekable:function(e,r,i){if(t&&"open"===t.readyState&&!(e<0||r<=e))if("function"==typeof t.setLiveSeekableRange&&"function"==typeof t.clearLiveSeekableRange)t.clearLiveSeekableRange(),t.setLiveSeekableRange(e,r);else if(i)try{var o=function(e){for(var t=0,n=e.sourceBuffers,r=0;r<n.length;r++)if(n[r].buffered.length>0){var i=n[r].buffered.end(n[r].buffered.length-1);t=Math.max(i,t)}return t}(t),s=Math.max(r,o);(!isFinite(t.duration)||t.duration<s)&&a(s,!1)}catch(e){n.error("Failed to set MediaSource duration! "+e.toString())}},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var t=e.sourceBuffers,r=0;r<t.length;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}n.info("call to mediaSource endOfStream"),e.endOfStream()}}},n=Object(i.default)(r).getInstance().getLogger(e),e}a.__dashjs_factory_name="MediaSourceController",t.default=r.default.getSingletonFactory(a)},"./src/streaming/controllers/PlaybackController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),o=n("./src/core/FactoryMaker.js"),s=n("./src/core/Debug.js"),u=n("./src/streaming/MediaPlayerEvents.js"),l=n("./src/streaming/constants/MetricsConstants.js"),c=500;function d(){var e,t,n,o,d,f,h,p,m,g,v,y,_,b,T,E,S,w,A,M,L,C,D,k=this.context,P=Object(i.default)(k).getInstance();function I(){N(),_=!1,g=0,T=0,L=!1,E=!0,S=!1,C=!1,w=NaN,h&&(P.off(a.default.DATA_UPDATE_COMPLETED,z,e),P.off(a.default.LOADING_PROGRESS,fe,e),P.off(a.default.MANIFEST_UPDATED,ge,e),P.off(a.default.STREAMS_COMPOSED,ve,e),P.off(u.default.PLAYBACK_ENDED,ce,e),P.off(u.default.STREAM_INITIALIZING,pe,e),P.off(u.default.REPRESENTATION_SWITCH,me,e),P.off(u.default.BUFFER_LEVEL_STATE_CHANGED,$,e),q(),h.removeEventListener("canplay",X),h.removeEventListener("canplaythrough",Q),h.removeEventListener("play",J),h.removeEventListener("waiting",Z),h.removeEventListener("playing",ee),h.removeEventListener("pause",te),h.removeEventListener("error",de),h.removeEventListener("seeking",ne),h.removeEventListener("seeked",re),h.removeEventListener("timeupdate",ie),h.removeEventListener("progress",ae),h.removeEventListener("ratechange",oe),h.removeEventListener("loadedmetadata",se),h.removeEventListener("loadeddata",ue),h.removeEventListener("stalled",he),h.removeEventListener("ended",le)),m=null,h=null,v=null,y=null}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return parseFloat((R(e)-F()).toFixed(5))}function R(e){var t=e||v;return t.start+t.duration}function x(){v&&h&&h.getElement()?h.play():_=!0}function N(){v&&h&&h.pause()}function j(e,n,r){v&&h&&e!==(isNaN(w)?h.getTime():w)&&((A=!0===r)||(w=e),t.info("Requesting seek to time: "+e+(A?" (internal)":"")),h.setCurrentTime(e,n))}function F(){return v&&h?h.getTime():null}function U(){return v&&h?h.isPaused():null}function B(){return v&&h?h.isSeeking():null}function Y(){return v&&h?h.isStalled():null}function H(){return v&&h?h.getPlaybackRate():null}function V(){return v&&h?h.getEnded():null}function G(){return y}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!U()&&y&&0!==h.getReadyState()&&!B()&&!L){e||(e=n.hasVideoTrack()?r.default.VIDEO:r.default.AUDIO);var i=F(),a=function(e,t){var n=d.getCurrentDVRInfo(t),r=n?n.range:null;return r?e>r.end?Math.max(r.end-g,r.start):e>0&&e+.25<r.start&&Math.abs(e-r.start)<31536e4?S?Math.max(r.end-g,r.start):r.start:e:NaN}(i,e);!isNaN(a)&&a!==i&&!B()&&(Y()||M||1===h.getReadyState())&&(t.debug("UpdateCurrentTime: Seek to actual time: ".concat(a," from currentTime: ").concat(i)),j(a,!1,!1))}}function W(){null===m&&(m=setInterval((function(){var e;P.trigger(a.default.WALLCLOCK_TIME_UPDATED,{isDynamic:y,time:new Date}),G()&&(n.addDVRMetric(),U()?(e=Date.now(),(!b||e>b+c)&&(b=e,ie())):K())}),D.get().streaming.wallclockTimeUpdateInterval))}function q(){clearInterval(m),m=null}function z(e){var t=f.convertRepresentationToRepresentationInfo(e.currentRepresentation),n=t?t.mediaInfo.streamInfo:null;null!==n&&v.id===n.id&&(v=n)}function X(){P.trigger(a.default.CAN_PLAY)}function Q(){P.trigger(a.default.CAN_PLAY_THROUGH)}function $(e){e.streamId===n.getActiveStreamInfo().id&&(M=e.state===l.default.BUFFER_EMPTY,D.get().streaming.buffer.setStallState&&h.setStallState(e.mediaType,e.state===l.default.BUFFER_EMPTY))}function J(){t.info("Native video element event: play"),K(),W(),P.trigger(a.default.PLAYBACK_STARTED,{startTime:F()})}function Z(){t.info("Native video element event: waiting"),P.trigger(a.default.PLAYBACK_WAITING,{playingTime:F()})}function ee(){t.info("Native video element event: playing"),A=!1,P.trigger(a.default.PLAYBACK_PLAYING,{playingTime:F()})}function te(){t.info("Native video element event: pause"),P.trigger(a.default.PLAYBACK_PAUSED,{ended:V()})}function ne(){if(!A){var e=F();isNaN(w)||w===e||(e=w),w=NaN,t.info("Seeking to: "+e),W(),P.trigger(a.default.PLAYBACK_SEEKING,{seekTime:e,streamId:v.id})}}function re(){t.info("Native video element event: seeked"),A=!1,P.trigger(a.default.PLAYBACK_SEEKED)}function ie(){v&&P.trigger(a.default.PLAYBACK_TIME_UPDATED,{timeToEnd:O(),time:F(),streamId:v.id})}function ae(){P.trigger(a.default.PLAYBACK_PROGRESS,{streamId:v.id})}function oe(){var e=H();t.info("Native video element event: ratechange: ",e),P.trigger(a.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function se(){t.info("Native video element event: loadedmetadata"),P.trigger(a.default.PLAYBACK_METADATA_LOADED),W()}function ue(){t.info("Native video element event: loadeddata"),P.trigger(a.default.PLAYBACK_LOADED_DATA)}function le(){t.info("Native video element event: ended"),N(),q();var e=n?n.getActiveStreamInfo():null;e&&P.trigger(a.default.PLAYBACK_ENDED,{isLast:e.isLast})}function ce(e){if(m&&e.isLast){t.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var n=e.seekTime?e.seekTime:R();h.setCurrentTime(n),N(),q()}}function de(e){var t=e.target||e.srcElement;P.trigger(a.default.PLAYBACK_ERROR,{error:t.error})}function fe(e){if(!1===e.stream&&S&&!isNaN(e.request.duration)){var n=1.2*e.request.duration;n>g&&(t.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",n.toFixed(2)),g=n)}}function he(e){P.trigger(a.default.PLAYBACK_STALLED,{e:e})}function pe(e){var n;(n=e.mediaInfo)&&n.supplementalProperties&&"true"===n.supplementalProperties[r.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&(t.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),S=!0)}function me(e){var t=n.getActiveStreamInfo();e&&t&&e.currentRepresentation&&e.streamId&&e.streamId===t.id&&e.mediaType&&(e.mediaType===r.default.VIDEO||e.mediaType===r.default.AUDIO)&&(E=e.currentRepresentation.availabilityTimeComplete,(S=!E)&&!C&&(C=!0))}function ge(){L=!0}function ve(){L=!1}return e={initialize:function(t,n){v=t,!0!==n&&(h.addEventListener("canplay",X),h.addEventListener("canplaythrough",Q),h.addEventListener("play",J),h.addEventListener("waiting",Z),h.addEventListener("playing",ee),h.addEventListener("pause",te),h.addEventListener("error",de),h.addEventListener("seeking",ne),h.addEventListener("seeked",re),h.addEventListener("timeupdate",ie),h.addEventListener("progress",ae),h.addEventListener("ratechange",oe),h.addEventListener("loadedmetadata",se),h.addEventListener("loadeddata",ue),h.addEventListener("stalled",he),h.addEventListener("ended",le),y=v.manifestInfo.isDynamic,M=!1,A=!1,P.on(a.default.DATA_UPDATE_COMPLETED,z,e),P.on(a.default.LOADING_PROGRESS,fe,e),P.on(a.default.MANIFEST_UPDATED,ge,e),P.on(a.default.STREAMS_COMPOSED,ve,e),P.on(u.default.PLAYBACK_ENDED,ce,e,{priority:i.default.EVENT_PRIORITY_HIGH}),P.on(u.default.STREAM_INITIALIZING,pe,e),P.on(u.default.REPRESENTATION_SWITCH,me,e),P.on(u.default.BUFFER_LEVEL_STATE_CHANGED,$,e),_&&(_=!1,x()))},setConfig:function(e){e&&(e.streamController&&(n=e.streamController),e.serviceDescriptionController&&(o=e.serviceDescriptionController),e.dashMetrics&&(d=e.dashMetrics),e.adapter&&(f=e.adapter),e.videoModel&&(h=e.videoModel),e.timelineConverter&&(p=e.timelineConverter),e.settings&&(D=e.settings))},getTimeToStreamEnd:O,getBufferLevel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null;return n.getActiveStreamProcessors().forEach((function(n){if(!e||0===e.length||-1===e.indexOf(n.getType())){var r=n.getBufferLevel();t=null===t?r:Math.min(t,r)}})),t},getPlaybackStalled:function(){return M},getTime:F,getLowLatencyModeEnabled:function(){return S},getInitialCatchupModeActivated:function(){return C},getIsManifestUpdateInProgress:function(){return L},getPlaybackRate:H,getPlayedRanges:function(){return v&&h?h.getPlayedRanges():null},getEnded:V,getIsDynamic:G,getStreamController:function(){return n},computeAndSetLiveDelay:function(e,t){var n,r,i,a=!isNaN(e)&&isFinite(e)?e:NaN,s=f.getSuggestedPresentationDelay(),u=o.getServiceDescriptionSettings();return n=isNaN(D.get().streaming.delay.liveDelay)?null===D.get().streaming.delay.liveDelayFragmentCount||isNaN(D.get().streaming.delay.liveDelayFragmentCount)||isNaN(a)?u&&!isNaN(u.liveDelay)&&u.liveDelay>0?u.liveDelay:!0===D.get().streaming.delay.useSuggestedPresentationDelay&&null!==s&&!isNaN(s)&&s>0?s:isNaN(a)?t&&!isNaN(t.minBufferTime)?4*t.minBufferTime:4*v.manifestInfo.minBufferTime:4*a:a*D.get().streaming.delay.liveDelayFragmentCount:D.get().streaming.delay.liveDelay,null!==(i=f.getAvailabilityStartTime())&&(T=i),r=t&&t.dvrWindowSize>0?Math.min(n,t.dvrWindowSize):n,g=r,r},getLiveDelay:function(){return g},getCurrentLiveLatency:function(){if(!y||isNaN(T))return NaN;var e=F();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*p.getClientTimeOffset();return Math.max(((t-T-1e3*e)/1e3).toFixed(3),0)},play:x,isPaused:U,isStalled:Y,pause:N,isSeeking:B,getStreamEndTime:R,seek:j,reset:I,updateCurrentTime:K,getAvailabilityStartTime:function(){return T}},t=Object(s.default)(k).getInstance().getLogger(e),I(),e}d.__dashjs_factory_name="PlaybackController",t.default=o.default.getSingletonFactory(d)},"./src/streaming/controllers/ScheduleController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/models/FragmentModel.js"),a=n("./src/core/EventBus.js"),o=n("./src/core/events/Events.js"),s=n("./src/core/FactoryMaker.js"),u=n("./src/core/Debug.js"),l=n("./src/streaming/constants/MetricsConstants.js"),c=n("./src/streaming/MediaPlayerEvents.js");function d(e){e=e||{};var t,n,s,d,f,h,p,m,g,v,y,_,b,T=this.context,E=Object(a.default)(T).getInstance(),S=e.dashMetrics,w=e.mediaPlayerModel,A=e.fragmentModel,M=e.abrController,L=e.playbackController,C=e.textController,D=e.type,k=e.bufferController,P=e.settings;function I(e){if(!k.getIsBufferingCompleted()){O();var t=isNaN(e)?0:e;h=setTimeout(R,t)}}function O(){h&&(clearTimeout(h),h=null)}function R(){try{if(function(){try{return D===r.default.TEXT&&!C.isTextEnabled()||L.isPaused()&&(!L.getStreamController().getInitialPlayback()||!L.getStreamController().getAutoPlay())&&!P.get().streaming.scheduling.scheduleWhilePaused}catch(e){return!1}}())return void O();if(function(){try{return d&&(isNaN(v)||y||(e=n.id,t=M.getMaxAllowedIndexFor(D,e),!(!isNaN(g)&&g==t||(s.info("Top quality "+D+" index has changed from "+g+" to "+t),g=t,0)))||!D||!d||S.getCurrentBufferLevel(D)<x())}catch(e){return!1}var e,t}()){var e=!1;b&&(e=M.checkPlaybackQuality(D,n.id)),e||(_||d.quality!==v||y?(y?(s.debug("Switch track for "+D+", representation id = "+d.id),y=!1):s.debug("Quality has changed, get init request for representationid = "+d.id),E.trigger(o.default.INIT_FRAGMENT_NEEDED,{representationId:d.id,sender:t},{streamId:n.id,mediaType:D}),b=!1,_=!1):(s.debug("Media segment needed for ".concat(D," and stream id ").concat(n.id)),E.trigger(o.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:n.id,mediaType:D}),b=!0))}else I(L.getLowLatencyModeEnabled()?P.get().streaming.scheduling.lowLatencyTimeout:P.get().streaming.scheduling.defaultTimeout)}catch(e){I(L.getLowLatencyModeEnabled()?P.get().streaming.scheduling.lowLatencyTimeout:P.get().streaming.scheduling.defaultTimeout)}}function x(){var e=NaN;return D&&d?e=D===r.default.TEXT?function(){try{if(C.isTextEnabled()){if(isNaN(d.fragmentDuration)){var e=S.getCurrentSchedulingInfo(l.default.SCHEDULING_INFO);return e?e.duration:0}return d.fragmentDuration}return 0}catch(e){return 0}}():D===r.default.AUDIO&&p?function(){try{var e=S.getCurrentBufferLevel(r.default.VIDEO);return isNaN(d.fragmentDuration)?e+1:Math.max(e+1,d.fragmentDuration)}catch(e){return 0}}():function(){try{var e=d.mediaInfo.streamInfo;return M.isPlayingAtTopQuality(e)?e.manifestInfo.duration>=P.get().streaming.buffer.longFormContentDurationThreshold?P.get().streaming.buffer.bufferTimeAtTopQualityLongForm:P.get().streaming.buffer.bufferTimeAtTopQuality:w.getStableBufferTime()}catch(e){return w.getStableBufferTime()}}():e}function N(){j(!0)}function j(e){if(L&&A){var t=A.getRequests({state:i.default.FRAGMENT_MODEL_EXECUTED,time:L.getTime(),threshold:0})[0];t&&L.getTime()>=t.startTime&&((!m.mediaInfo||t.mediaInfo.type===m.mediaInfo.type&&t.mediaInfo.id!==m.mediaInfo.id)&&e&&E.trigger(o.default.TRACK_CHANGE_RENDERED,{mediaType:D,oldMediaInfo:m.mediaInfo,newMediaInfo:t.mediaInfo,streamId:n.id}),t.quality===m.quality&&t.adaptationIndex===m.adaptationIndex||!e||(s.debug("Quality change rendered for streamId ".concat(n.id," and type ").concat(D)),E.trigger(o.default.QUALITY_CHANGE_RENDERED,{mediaType:D,oldQuality:m.quality,newQuality:t.quality,streamId:n.id})),m={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function F(e){s.debug("Appended bytes for ".concat(e.mediaType," and stream id ").concat(n.id)),(isNaN(e.index)||isNaN(v))&&(v=e.quality,s.info("["+D+"] lastInitializedRepresentationInfo changed to "+e.quality)),I(0)}function U(){A.abortRequests(),O()}function B(){P.get().streaming.scheduling.scheduleWhilePaused||I()}function Y(e){S.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function H(){b=!0,f=0,v=NaN,m={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},g=NaN,y=!1,_=!1}return t={initialize:function(e){p=e,E.on(o.default.BYTES_APPENDED_END_FRAGMENT,F,t),E.on(o.default.URL_RESOLUTION_FAILED,U,t),E.on(c.default.PLAYBACK_STARTED,B,t),E.on(c.default.PLAYBACK_RATE_CHANGED,Y,t),E.on(c.default.PLAYBACK_TIME_UPDATED,N,t)},getType:function(){return D},getStreamId:function(){return n.id},setCurrentRepresentation:function(e){d=e},setTimeToLoadDelay:function(e){f=e},getTimeToLoadDelay:function(){return f},setSwitchTrack:function(e){y=e},getSwitchStrack:function(){return y},startScheduleTimer:I,clearScheduleTimer:O,reset:function(){E.off(o.default.BYTES_APPENDED_END_FRAGMENT,F,t),E.off(o.default.URL_RESOLUTION_FAILED,U,t),E.off(c.default.PLAYBACK_STARTED,B,t),E.off(c.default.PLAYBACK_RATE_CHANGED,Y,t),E.off(c.default.PLAYBACK_TIME_UPDATED,N,t),O(),j(!1),H(),n=null},getBufferTarget:x,getPlaybackController:function(){return L},setCheckPlaybackQuality:function(e){b=e},setInitSegmentRequired:function(e){_=e}},s=Object(u.default)(T).getInstance().getLogger(t),H(),n=e.streamInfo,t}d.__dashjs_factory_name="ScheduleController",t.default=s.default.getClassFactory(d)},"./src/streaming/controllers/ServiceDescriptionController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/constants/Constants.js"),o=n("./src/dash/constants/DashConstants.js"),s=[a.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],u={VIDEO:"video",AUDIO:"audio",ANY:"any",ALL:"all"};function l(){var e,t,n,r,l,c=this.context;function d(){t={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:NaN},minBitrate:{},maxBitrate:{},initialBitrate:{}},n=[]}function f(e,n,i){try{t[e][n]=i/1e3}catch(e){r.error(e)}}return e={getServiceDescriptionSettings:function(){return t},getProducerReferenceTimeOffsets:function(){return n},calculateProducerReferenceTimeOffsets:function(e){try{var t=[];if(e&&e.length>0){var i=[a.default.VIDEO,a.default.AUDIO,a.default.TEXT],s=l.getAvailabilityStartTime()/1e3;e.forEach((function(e){var n=i.reduce((function(t,n){return t=t.concat(l.getAllMediaInfoForType(e,n))}),[]).reduce((function(t,n){return l.getProducerReferenceTimes(e,n).forEach((function(r){var i=l.getVoRepresentations(n);if(i&&i.length>0&&i[0].adaptation&&i[0].segmentInfoType===o.default.SEGMENT_TEMPLATE){var a=i[0],u=new Date(r[o.default.WALL_CLOCK_TIME]).getTime()/1e3-(r[o.default.PRESENTATION_TIME]/a[o.default.TIMESCALE]-a[o.default.PRESENTATION_TIME_OFFSET]+e.start),c=s-u;t.push({id:r[o.default.ID],to:c})}})),t}),[]);t=t.concat(n)}))}n=t}catch(e){r.error(e),n=[]}},applyServiceDescription:function(e){if(e&&e.serviceDescriptions){var i=e.serviceDescriptions.filter((function(e){return s.includes(e.schemeIdUri)})),o=e.serviceDescriptions.filter((function(e){return null==e.schemeIdUri})),l=i.length>0?i[i.length-1]:o[o.length-1];l&&(l.latency&&l.latency.target>0&&function(e){var i;if(e.schemeIdUri,a.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME,i=function(e){var t=e.latency.target/1e3,n=!isNaN(e.latency.max)&&e.latency.max>e.latency.target?(e.latency.max-e.latency.target+500)/1e3:NaN,r=e.latency.referenceId||NaN;return{liveDelay:t,maxDrift:n,referenceId:r}}(e),n.length>0){var o=function(e){var t,r=0,i=n.filter((function(t){return t.id===e.referenceId}));return 0===i.length?(r=n.length>0?n[0].to:0,t=n[0].id||NaN):(r=i[0].to||0,t=i[0].id||NaN),{to:r,id:t}}(i),s=o.to,u=o.id;t.liveDelay=i.liveDelay-s,t.liveCatchup.maxDrift=i.maxDrift,r.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(s," from ProducerReferenceTime element with id ").concat(u,".\n                Live Delay: ").concat(i.liveDelay-s,", Live catchup max drift: ").concat(i.maxDrift,"\n            "))}else t.liveDelay=i.liveDelay,t.liveCatchup.maxDrift=i.maxDrift,r.debug("Found latency properties coming from service description: Live Delay: ".concat(i.liveDelay,", Live catchup max drift: ").concat(i.maxDrift))}(l),l.playbackRate&&l.playbackRate.max>1&&function(e){var n=Math.round(1e3*(e.playbackRate.max-1))/1e3;t.liveCatchup.playbackRate=n,r.debug("Found latency properties coming from service description: Live catchup playback rate: ".concat(n))}(l),l.operatingQuality,l.operatingBandwidth&&function(e){if(e&&e.operatingBandwidth&&e.operatingBandwidth.mediaType&&e.operatingBandwidth.mediaType!==u.ALL){var t={};t.minBandwidth=e.operatingBandwidth.min,t.maxBandwidth=e.operatingBandwidth.max,t.targetBandwidth=e.operatingBandwidth.target;var n=[];e.operatingBandwidth.mediaType===u.VIDEO||e.operatingBandwidth.mediaType===u.AUDIO?n.push(e.operatingBandwidth.mediaType):e.operatingBandwidth.mediaType===u.ANY&&(n.push(u.AUDIO),n.push(u.VIDEO)),n.forEach((function(e){isNaN(t.minBandwidth)||f("minBitrate",e,t.minBandwidth),isNaN(t.maxBandwidth)||f("maxBitrate",e,t.maxBandwidth),isNaN(t.targetBandwidth)||f("initialBitrate",e,t.targetBandwidth)}))}}(l))}},reset:function(){d()},setConfig:function(e){e&&e.adapter&&(l=e.adapter)}},r=Object(i.default)(c).getInstance().getLogger(e),d(),e}l.__dashjs_factory_name="ServiceDescriptionController",t.default=r.default.getSingletonFactory(l)},"./src/streaming/controllers/StreamController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/streaming/Stream.js"),o=n("./src/streaming/ManifestUpdater.js"),s=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/streaming/vo/metrics/PlayList.js"),d=n("./src/core/Debug.js"),f=n("./src/streaming/utils/InitCache.js"),h=n("./src/streaming/utils/URLUtils.js"),p=n("./src/streaming/MediaPlayerEvents.js"),m=n("./src/streaming/controllers/TimeSyncController.js"),g=n("./src/streaming/controllers/MediaSourceController.js"),v=n("./src/streaming/vo/DashJSError.js"),y=n("./src/core/errors/Errors.js"),_=n("./src/streaming/controllers/EventController.js"),b=n("./src/streaming/constants/ConformanceViolationConstants.js");function T(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=200,w=2;function A(){var e,t,n,l,E,A,M,L,C,D,k,P,I,O,R,x,N,j,F,U,B,Y,H,V,G,K,W,q,z,X,Q,$,J,Z,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,de,fe=this.context,he=Object(s.default)(fe).getInstance();function pe(){!function(){try{var e=L.getStreamsInfo();if(!H&&0===e.length)throw new Error("There are no periods in the MPD");H&&e.length>0&&C.updateManifestUpdateInfo({currentTime:J.getTime(),buffered:$.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:B.getClientTimeOffset()}),Y.length>0&&function(e){0!==e.length?Y=Y.filter((function(n){var r=e.filter((function(e){return e.id===n.getId()})).length>0||n.getId()===H.getId();return r||(t.debug("Removing stream ".concat(n.getId())),n.reset(!0)),r})):t.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(e);for(var n=[],r=0,i=e.length;r<i;r++){var a=e[r];n.push(ge(a)),C.addManifestUpdateStreamInfo(a)}Promise.all(n).then((function(){H||function e(n){Ce();var r=C.getCurrentDVRInfo().range;if(r.end<r.start){ce&&clearTimeout(ce);var i=Math.min(1e3*(-1*(r.end-r.start)+w),2147483647);return t.debug("Waiting for ".concat(i," ms before playback can start")),he.trigger(u.default.AST_IN_FUTURE,{delay:i}),void(ce=setTimeout((function(){e(n)}),i))}ue.get().streaming.applyProducerReferenceTime&&Z.calculateProducerReferenceTimeOffsets(n);var a=n[0].manifestInfo;if(ue.get().streaming.applyServiceDescription&&Z.applyServiceDescription(a),L.getIsDynamic()){var o=He(n,a);J.computeAndSetLiveDelay(o,a)}var s=function(){var e;if(L.getIsDynamic()){var n=C.getCurrentDVRInfo(),r=n&&n.range?n.range.end:0;e=r-J.getLiveDelay();var i=n?n.range:null;if(i){var a=Ye(!0);if(!isNaN(a)){t.info("Start time from URI parameters: "+a);var o=ue.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;e=Math.max(Math.min(e,a),i.start+o)}}}else{var s=nt()[0].getStreamInfo();e=s.start;var u=Ye(!1);isNaN(u)||(t.info("Start time from URI parameters: "+u),e=Math.max(e,u))}return e}(),l=Le(s),c=null!==l?l:Y[0];he.trigger(u.default.INITIAL_STREAM_SWITCH,{startTime:s}),ve(c,null,s),ie||(ie=setInterval((function(){!q&&J.getTimeToStreamEnd()<=0&&!J.isSeeking()&&he.trigger(u.default.PLAYBACK_ENDED,{isLast:Xe().isLast})}),S))}(e),he.trigger(u.default.STREAMS_COMPOSED),Ne()})).catch((function(e){throw e}))}catch(e){U.error(new v.default(y.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+" nostreamscomposed",M.getValue())),X=!0,et()}}()}function me(){le=!0}function ge(e){var t=Qe(e.id);return t?t.updateData(e):(t=Object(a.default)(fe).create({manifestModel:M,mediaPlayerModel:ee,dashMetrics:C,manifestUpdater:E,adapter:L,timelineConverter:B,capabilities:n,capabilitiesFilter:l,errHandler:U,baseURLController:P,segmentBaseController:I,textController:G,abrController:R,playbackController:J,eventController:N,mediaController:x,protectionController:V,videoModel:$,streamInfo:e,settings:ue}),Y.push(t),t.initialize(),Promise.resolve())}function ve(e,n,r){try{if(q||!e||n===e&&e.getIsActive())return;q=!0,he.trigger(u.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:n?n.getStreamInfo():null,toStreamInfo:e.getStreamInfo()});var i=!1;H=e,n&&(i=we(e,n),n.deactivate(i)),r=isNaN(r)?!i&&n?e.getStreamInfo().start:NaN:r,t.info("Switch to stream ".concat(e.getId(),". Seektime is ").concat(r,", current playback time is ").concat(J.getTime(),". Seamless period switch is set to ").concat(i)),oe=oe.filter((function(e){return e.getId()!==H.getId()})),J.initialize(Xe(),!!n),$.getElement()&&ye(r,i)}catch(e){q=!1}}function ye(e,n){var r;function i(){if(Q&&"open"===Q.readyState){t.debug("MediaSource is open!"),window.URL.revokeObjectURL(r),Q.removeEventListener("sourceopen",i),Q.removeEventListener("webkitsourceopen",i),Be();var a=C.getCurrentDVRInfo();D.setSeekable(a.range.start,a.range.end,Ae()),_e(e,n)}}function a(){Q.addEventListener("sourceopen",i,!1),Q.addEventListener("webkitsourceopen",i,!1),r=D.attachMediaSource($),t.debug("MediaSource attached to element.  Waiting on open...")}Q?n?_e(e,n):(D.detachMediaSource($),a()):(Q=D.createMediaSource(),a())}function _e(e,t){H.activate(Q,t?ae:void 0,e).then((function(t){if(t){var n=Object.keys(t);n.length>0&&t[n[0]].getBuffer().changeType&&(se=!0),ae=t}isNaN(e)||(he.trigger(u.default.SEEK_TARGET,{time:e},{streamId:H.getId()}),J.seek(e,!1,!0),H.startScheduleControllers()),q=!1,he.trigger(u.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Xe()})}))}function be(e){var t=J.getTime(),n=e.seekTime,r=Le(n);r&&r!==H?r&&r!==H&&(Te(t,n,r),function(e,t){var n=e&&!isNaN(e.seekTime)?e.seekTime:NaN,r=H.getProcessors().map((function(t){return t.prepareOuterPeriodPlaybackSeeking(e)}));Promise.all(r).then((function(){ve(t,H,n)})).catch((function(e){U.error(e)}))}(e,r)):(Te(t,n),function(e){H.getProcessors().forEach((function(t){return t.prepareInnerPeriodPlaybackSeeking(e)})),We(c.PlayListTrace.USER_REQUEST_STOP_REASON)}(e)),qe(c.PlayList.SEEK_START_REASON)}function Te(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],Ee()}function Ee(){oe&&oe.length>0&&(oe.forEach((function(e){e.deactivate(!0)})),oe=[])}function Se(e){e.newMediaInfo.streamInfo.id===H.getId()&&(Ee(),H.prepareTrackChange(e))}function we(e,t){try{return ue.get().streaming.buffer.reuseExistingSourceBuffers&&(t.isProtectionCompatible(e)||le)&&(se||t.isMediaCodecCompatible(e,t))}catch(e){return!1}}function Ae(){return ue.get().streaming.buffer.enableLiveSeekableRangeFix}function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Q&&!e.getPreloaded()&&we(e,t)&&e.startPreloading(Q,ae).then((function(){oe.push(e)}))}function Le(e){if(isNaN(e))return null;for(var t=Y.length,n=0;n<t;n++){var r=Y[n];if(e<parseFloat((r.getStartTime()+r.getDuration()).toFixed(5)))return r}return null}function Ce(){try{var e=L.getIsDynamic(),t=L.getStreamsInfo()[0].manifestInfo,n=J.getTime(),i=B.calcTimeShiftBufferWindow(Y,e),a=Fe();if(void 0===i.start||void 0===i.end)return;a&&0!==a.length?a.forEach((function(e){C.addDVRInfo(e.getType(),n,t,i)})):C.addDVRInfo(r.default.VIDEO,n,t,i)}catch(e){}}function De(e){if(re&&W){var t=ee.getInitialBufferLevel(),n=[r.default.TEXT];(isNaN(t)||t<=J.getBufferLevel(n)||L.getIsDynamic()&&t>J.getLiveDelay())&&(re=!1,qe(c.PlayList.INITIAL_PLAYOUT_START_REASON),J.play())}e&&e.mediaType&&C.addBufferLevel(e.mediaType,new Date,1e3*e.bufferLevel)}function ke(e){e.streamInfo.id===H.getId()&&e.reason&&e.reason.forceReplace&&Ee(),Qe(e.streamInfo.id).prepareQualityChange(e)}function Pe(){if(L.getIsDynamic()&&0!==J.getLiveDelay()){var e=L.getStreamsInfo();if(e.length>0){var t=e[0].manifestInfo,n=He(e,t);J.computeAndSetLiveDelay(n,t)}}}function Ie(){if(Ge()){var e=$.getPlaybackQuality();e&&C.addDroppedFrames(e)}}function Oe(){t.debug("[onPlaybackStarted]"),!re&&ne&&qe(c.PlayList.RESUME_FROM_PAUSE_START_REASON),re&&(re=!1),ne=!1}function Re(e){t.debug("[onPlaybackPaused]"),e.ended||(ne=!0,We(c.PlayListTrace.USER_REQUEST_STOP_REASON))}function xe(e){t.debug("Stream with id ".concat(e.streamInfo.id," finished buffering"));var n=e.streamInfo.isLast;Q&&n?(t.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),D.signalEndOfStream(Q)):Ne()}function Ne(){if(H&&H.getHasFinishedBuffering())for(var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var t=e||H||null;if(t){var n=t.getStreamInfo();return Y.filter((function(e){var t=e.getStreamInfo();return t.start>n.start&&n.id!==t.id}))}}catch(e){return[]}}(H),t=0;t<e.length;){var n=e[t],r=0===t?H:e[t-1];!n.getPreloaded()&&r.getHasFinishedBuffering()&&Q&&Me(n,r),t+=1}}function je(){ie&&(clearInterval(ie),ie=null)}function Fe(){return H?H.getProcessors():[]}function Ue(e){if(H&&!H.getIsEndedEventSignaled()){H.setIsEndedEventSignaled(!0);var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||H||null;if(!t)return null;for(var n=t.getStreamInfo(),r=n.start,i=0,a=-1,o=NaN;i<Y.length;){var s=Y[i].getStreamInfo(),u=s.start-r;u>0&&(isNaN(o)||u<o)&&n.id!==s.id&&(o=u,a=i),i+=1}return a>=0?Y[a]:null}();n?(t.debug("StreamController onEnded, found next stream with id ".concat(n.getStreamInfo().id,". Switching from ").concat(H.getStreamInfo().id," to ").concat(n.getStreamInfo().id)),ve(n,H,NaN)):(t.debug("StreamController no next stream found"),H.setIsEndedEventSignaled(!1)),We(n?c.PlayListTrace.END_OF_PERIOD_STOP_REASON:c.PlayListTrace.END_OF_CONTENT_STOP_REASON)}e&&e.isLast&&je()}function Be(e){var t=e||Xe().manifestInfo.duration;D.setDuration(t)}function Ye(e){var t=O.getURIFragmentData();if(!t||!t.t)return NaN;var n=nt()[0].getStreamInfo().start;t.t=t.t.split(",")[0];var r=-1!==t.t.indexOf("posix:")?"now"===t.t.substring(6)?Date.now()/1e3:parseInt(t.t.substring(6)):NaN;return e&&!isNaN(r)?r-J.getAvailabilityStartTime()/1e3:parseInt(t.t)+n}function He(e,t){try{var n=NaN;if(t&&!isNaN(t.maxFragmentDuration)&&isFinite(t.maxFragmentDuration))return t.maxFragmentDuration;if(e&&1===e.length){var i=e[0],a=[r.default.VIDEO,r.default.AUDIO,r.default.TEXT].reduce((function(e,t){var n=L.getMediaInfoForType(i,t);return n&&!1!==n.isFragmented&&e.push(n),e}),[]).reduce((function(e,t){var n=L.getVoRepresentations(t);return n&&n.length>0&&n.forEach((function(t){t&&e.push(t)})),e}),[]).reduce((function(e,t){var n=L.convertRepresentationToRepresentationInfo(t);return n&&n.fragmentDuration&&!isNaN(n.fragmentDuration)&&e.push(n.fragmentDuration),e}),[]);n=Math.max.apply(Math,T(a))}return isFinite(n)?n:NaN}catch(e){return NaN}}function Ve(e){if(e.error)X=!0,et();else{t.info("Manifest updated... updating data system wide.");var n=e.manifest;L.updatePeriods(n);var r=L.getUTCTimingSources();!L.getIsDynamic()||r&&0!==r.length||he.trigger(p.default.CONFORMANCE_VIOLATION,{level:b.default.LEVELS.WARNING,event:b.default.EVENTS.NO_UTC_TIMING_ELEMENT});var i=L.getIsDynamic()?r.concat(te.getUTCTimingSources()):r,a=F.isHTTPS(e.manifest.url);i.forEach((function(e){e.value.replace(/.*?:\/\//g,"")===ue.get().streaming.utcSynchronization.defaultTimingSource.value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(a?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),a?"https://":"http://"),t.debug("Matching default timing source protocol to manifest protocol: ",e.value))})),l.filterUnsupportedFeatures(n).then((function(){P.initialize(n),k.attemptSync(i,L.getIsDynamic())}))}}function Ge(){return!!H&&H.getHasVideoTrack()}function Ke(){return!!H&&H.getHasAudioTrack()}function We(e,t){t=t||new Date,Fe().forEach((function(n){n.finalisePlayList(t,e)})),C.addPlayList()}function qe(e){C.createPlaylistMetrics(1e3*J.getTime(),e)}function ze(e){if(e.error){var n="";switch(e.error.code){case 1:n="MEDIA_ERR_ABORTED";break;case 2:n="MEDIA_ERR_NETWORK";break;case 3:n="MEDIA_ERR_DECODE",de.counts.mediaErrorDecode+=1;break;case 4:n="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:n="MEDIA_ERR_ENCRYPTED";break;default:n="UNKNOWN"}"MEDIA_ERR_DECODE"===n&&ue.get().errors.recoverAttempts.mediaErrorDecode>=de.counts.mediaErrorDecode?function(){t.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var e=J.getTime();H.deactivate(!1),t.warn("MediaSource has been resetted. Resuming playback from time ".concat(e)),ye(e,!1)}():(z=!0,e.error.message&&(n+=" ("+e.error.message+")"),e.error.msExtendedCode&&(n+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),t.fatal("Video Element Error: "+n),e.error&&t.fatal(e.error),U.error(new v.default(e.error.code,n)),et())}}function Xe(){return H?H.getStreamInfo():null}function Qe(e){for(var t=0,n=Y.length;t<n;t++)if(Y[t].getId()===e)return Y[t];return null}function $e(){if(!(A&&A.hasOwnProperty("load")&&B&&B.hasOwnProperty("initialize")&&B.hasOwnProperty("reset")&&B.hasOwnProperty("getClientTimeOffset")&&M&&U&&C&&J))throw new Error(r.default.MISSING_CONFIG_ERROR)}function Je(e){isNaN(e.newDuration)||Be(e.newDuration)}function Ze(){Y=[],V=null,q=!1,H=null,z=!1,X=!1,re=!0,ne=!1,W=!0,ie=null,le=!1,se=!1,oe=[],ce=null,de={counts:{mediaErrorDecode:0}}}function et(){$e(),k.reset(),We(z||X?c.PlayListTrace.FAILURE_STOP_REASON:c.PlayListTrace.USER_REQUEST_STOP_REASON);for(var t=0,n=Y?Y.length:0;t<n;t++)Y[t].reset(z);he.off(p.default.PLAYBACK_TIME_UPDATED,Ie,e),he.off(p.default.PLAYBACK_SEEKING,be,e),he.off(p.default.PLAYBACK_ERROR,ze,e),he.off(p.default.PLAYBACK_STARTED,Oe,e),he.off(p.default.PLAYBACK_PAUSED,Re,e),he.off(p.default.PLAYBACK_ENDED,Ue,e),he.off(p.default.METRIC_ADDED,tt,e),he.off(p.default.MANIFEST_VALIDITY_CHANGED,Je,e),he.off(p.default.BUFFER_LEVEL_UPDATED,De,e),he.off(p.default.QUALITY_CHANGE_REQUESTED,ke,e),u.default.KEY_SESSION_UPDATED&&he.off(u.default.KEY_SESSION_UPDATED,me,e),he.off(u.default.MANIFEST_UPDATED,Ve,e),he.off(u.default.STREAM_BUFFERING_COMPLETED,xe,e),he.off(u.default.TIME_SYNCHRONIZATION_COMPLETED,pe,e),he.off(u.default.CURRENT_TRACK_CHANGED,Se,e),he.off(u.default.SETTING_UPDATED_LIVE_DELAY,Pe,e),he.off(u.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Pe,e),P.reset(),E.reset(),N.reset(),C.clearAllCurrentMetrics(),M.setValue(null),A.reset(),B.reset(),j.reset(),Q&&(D.detachMediaSource($),Q=null),$=null,V&&(V=null,K=null,M.getValue()&&he.trigger(u.default.PROTECTION_DESTROYED,{data:M.getValue().url})),je(),he.trigger(u.default.STREAM_TEARDOWN_COMPLETE),Ze()}function tt(e){if(e.metric===i.default.DVR_INFO){var t=Ke()?r.default.AUDIO:r.default.VIDEO;e.mediaType===t&&D.setSeekable(e.value.range.start,e.value.range.end,Ae())}}function nt(){return Y}return e={initialize:function(t,n){$e(),W=t,K=n,B.initialize(),(E=Object(o.default)(fe).create()).setConfig({manifestModel:M,adapter:L,manifestLoader:A,errHandler:U,settings:ue}),E.initialize(),(N=Object(_.default)(fe).getInstance()).setConfig({manifestUpdater:E,playbackController:J,settings:ue}),N.start(),k.setConfig({dashMetrics:C,baseURLController:P,errHandler:U,settings:ue}),k.initialize(),V&&(he.trigger(u.default.PROTECTION_CREATED,{controller:V}),V.setMediaElement($.getElement()),K&&V.setProtectionData(K)),he.on(p.default.PLAYBACK_TIME_UPDATED,Ie,e),he.on(p.default.PLAYBACK_SEEKING,be,e),he.on(p.default.PLAYBACK_ERROR,ze,e),he.on(p.default.PLAYBACK_STARTED,Oe,e),he.on(p.default.PLAYBACK_PAUSED,Re,e),he.on(p.default.PLAYBACK_ENDED,Ue,e),he.on(p.default.METRIC_ADDED,tt,e),he.on(p.default.MANIFEST_VALIDITY_CHANGED,Je,e),he.on(p.default.BUFFER_LEVEL_UPDATED,De,e),he.on(p.default.QUALITY_CHANGE_REQUESTED,ke,e),u.default.KEY_SESSION_UPDATED&&he.on(u.default.KEY_SESSION_UPDATED,me,e),he.on(u.default.MANIFEST_UPDATED,Ve,e),he.on(u.default.STREAM_BUFFERING_COMPLETED,xe,e),he.on(u.default.TIME_SYNCHRONIZATION_COMPLETED,pe,e),he.on(u.default.CURRENT_TRACK_CHANGED,Se,e),he.on(u.default.SETTING_UPDATED_LIVE_DELAY,Pe,e),he.on(u.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Pe,e)},getActiveStreamInfo:Xe,addDVRMetric:Ce,hasVideoTrack:Ge,hasAudioTrack:Ke,getStreamById:Qe,getStreamForTime:Le,getTimeRelativeToStreamId:function(e,t){for(var n=null,r=0,i=0,a=null,o=0;o<Y.length;o++){if(i=(n=Y[o]).getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(a)&&(r+=a)}return null},load:function(e){$e(),A.load(e)},loadWithManifest:function(e){!function(){if(!E||!E.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),E.setManifest(e)},getActiveStreamProcessors:Fe,setConfig:function(e){e&&(e.capabilities&&(n=e.capabilities),e.capabilitiesFilter&&(l=e.capabilitiesFilter),e.manifestLoader&&(A=e.manifestLoader),e.manifestModel&&(M=e.manifestModel),e.mediaPlayerModel&&(ee=e.mediaPlayerModel),e.customParametersModel&&(te=e.customParametersModel),e.protectionController&&(V=e.protectionController),e.adapter&&(L=e.adapter),e.dashMetrics&&(C=e.dashMetrics),e.errHandler&&(U=e.errHandler),e.timelineConverter&&(B=e.timelineConverter),e.videoModel&&($=e.videoModel),e.playbackController&&(J=e.playbackController),e.serviceDescriptionController&&(Z=e.serviceDescriptionController),e.textController&&(G=e.textController),e.abrController&&(R=e.abrController),e.mediaController&&(x=e.mediaController),e.settings&&(ue=e.settings),e.baseURLController&&(P=e.baseURLController),e.uriFragmentModel&&(O=e.uriFragmentModel),e.segmentBaseController&&(I=e.segmentBaseController))},setProtectionData:function(e){K=e,V&&V.setProtectionData(K)},getIsStreamSwitchInProgress:function(){return q},switchToVideoElement:function(e){H&&(J.initialize(Xe()),ye(e,!1))},getHasMediaOrInitialisationError:function(){return z||X},getStreams:nt,getActiveStream:function(){return H},getInitialPlayback:function(){return re},getAutoPlay:function(){return W},reset:et},t=Object(d.default)(fe).getInstance().getLogger(e),k=Object(m.default)(fe).getInstance(),D=Object(g.default)(fe).getInstance(),j=Object(f.default)(fe).getInstance(),F=Object(h.default)(fe).getInstance(),Ze(),e}A.__dashjs_factory_name="StreamController",t.default=l.default.getSingletonFactory(A)},"./src/streaming/controllers/TimeSyncController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/vo/DashJSError.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/core/EventBus.js"),o=n("./src/core/events/Events.js"),s=n("./src/core/errors/Errors.js"),u=n("./src/core/FactoryMaker.js"),l=n("./src/core/Debug.js"),c=n("./src/streaming/utils/URLUtils.js"),d=5e3,f=100,h=2,p=2,m=30,g=30,v=600,y=2;function _(){var e,t,n,u,_,b,T,E,S,w,A,M,L,C,D,k,P=this.context,I=Object(a.default)(P).getInstance(),O=Object(c.default)(P).getInstance();function R(){E=[],S=[],w=null,A=null,L=null,M=NaN,n=!1,u=!1,C=_.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function x(){_.get().streaming.utcSynchronization.enabled&&!n&&!u&&L&&L.value&&L.schemeIdUri&&!isNaN(M)&&!isNaN(_.get().streaming.utcSynchronization.backgroundAttempts)&&(A&&(Date.now()-A)/1e3<g||(E=[],u=!0,function e(t){try{if(t<=0)return void W();var n=Date.now();b[L.schemeIdUri](L.value,(function(r){var i=Date.now(),a=N(n,i,r);E.push(a),e(t-1)}),(function(){W()}))}catch(e){W()}}(isNaN(_.get().streaming.utcSynchronization.backgroundAttempts)?p:_.get().streaming.utcSynchronization.backgroundAttempts)))}function N(e,t,n){return n-(t-(t-e)/2)}function j(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,r=isNaN(n);r&&_.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?(e=T.getLatestMPDRequestHeaderValueByID("Date"),t=null!==e?new Date(e).getTime():Number.NaN,isNaN(t)?K(!0):K(!1,t-Date.now())):K(r,n)}function F(e){var t=Date.parse(e);return isNaN(t)&&(t=function(e){var t,n,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e);return t=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&(parseInt(r[6],10)||0),r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]&&(n=60*parseInt(r[9],10)+parseInt(r[10],10),t+=("+"===r[8]?-1:1)*n*60*1e3),new Date(t).getTime()}(e)),t}function U(e){return Date.parse(e)}function B(e){return Date.parse(e)}function Y(e,t,n){n()}function H(e,t,n){var r=F(e);isNaN(r)?n():t(r)}function V(e,t,n,r,a){var o,s,u=!1,l=new XMLHttpRequest,c=a?i.HTTPRequest.HEAD:i.HTTPRequest.GET,f=t.match(/\S+/g);if(t=f.shift(),o=function(){u||(u=!0,f.length?V(e,f.join(" "),n,r,a):r())},s=function(){var t,r;200===l.status&&(t=a?l.getResponseHeader("Date"):l.response,r=e(t),isNaN(r)||(n(r),u=!0))},O.isRelative(t)){var h=k.resolve();h&&(t=O.resolve(t,h.url))}l.open(c,t),l.timeout=d||0,l.onload=s,l.onloadend=o,l.send()}function G(e,t,n){V(B,e,t,n,!0)}function K(e,i){if(isNaN(M)||isNaN(i)||e||function(e){try{var n,r=q(e),i=isNaN(C)?m:C,a=isNaN(_.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?h:_.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,o=isNaN(_.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?v:_.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,s=isNaN(_.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?y:_.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;r?(n=Math.min(i*a,o),t.debug("Increasing timeBetweenSyncAttempts to ".concat(n))):(n=Math.max(i/a,s),t.debug("Decreasing timeBetweenSyncAttempts to ".concat(n))),C=n}catch(e){}}(i),!e&&!isNaN(i)){w=Date.now(),n=!1;var a=isNaN(M);M=i,a&&x(),t.debug("Completed UTC sync. Setting client - server offset to ".concat(i))}e&&(L=null,n=!1,D.error(new r.default(s.default.TIME_SYNC_FAILED_ERROR_CODE,s.default.TIME_SYNC_FAILED_ERROR_MESSAGE))),I.trigger(o.default.UPDATE_TIME_SYNC_OFFSET,{offset:i}),I.trigger(o.default.TIME_SYNCHRONIZATION_COMPLETED)}function W(){if(E&&0!==E.length){var e=E.reduce((function(e,t){return e+t}),0)/E.length;q(e)?t.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(t.debug("Completed background UTC sync. Setting client - server offset to ".concat(e)),M=e,I.trigger(o.default.UPDATE_TIME_SYNC_OFFSET,{offset:M})),u=!1,A=Date.now()}}function q(e){try{if(isNaN(M))return!0;var t=_.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(_.get().streaming.utcSynchronization.maximumAllowedDrift)?_.get().streaming.utcSynchronization.maximumAllowedDrift:f;return e>=M-t&&e<=M+t}catch(e){return!0}}return e={initialize:function(){R(),b={"urn:mpeg:dash:utc:http-head:2014":G,"urn:mpeg:dash:utc:http-xsdate:2014":V.bind(null,F),"urn:mpeg:dash:utc:http-iso:2014":V.bind(null,U),"urn:mpeg:dash:utc:direct:2014":H,"urn:mpeg:dash:utc:http-head:2012":G,"urn:mpeg:dash:utc:http-xsdate:2012":V.bind(null,F),"urn:mpeg:dash:utc:http-iso:2012":V.bind(null,U),"urn:mpeg:dash:utc:direct:2012":H,"urn:mpeg:dash:utc:http-ntp:2014":Y,"urn:mpeg:dash:utc:ntp:2014":Y,"urn:mpeg:dash:utc:sntp:2014":Y}},attemptSync:function(e,t){S=e,n||(function(e){try{if(!e||!_.get().streaming.utcSynchronization.enabled)return!1;var t=isNaN(C)?m:C;return!(w&&t&&!isNaN(t))||(Date.now()-w)/1e3>=t}catch(e){return!0}}(t)?(n=!0,function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=t||0;if(!S||0===S.length||n>=S.length)j();else{var r=S[n];if(r)if(b.hasOwnProperty(r.schemeIdUri)){var i=(new Date).getTime();b[r.schemeIdUri](r.value,(function(e){var t=(new Date).getTime(),n=N(i,t,e);L=r,j(n)}),(function(){e(n+1)}))}else e(n+1);else j()}}()):I.trigger(o.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(e){e&&(e.dashMetrics&&(T=e.dashMetrics),e.baseURLController&&(k=e.baseURLController),e.errHandler&&(D=e.errHandler),e.settings&&(_=e.settings))},reset:function(){R(),I.off(o.default.ATTEMPT_BACKGROUND_SYNC,x,e)}},t=Object(l.default)(P).getInstance().getLogger(e),I.on(o.default.ATTEMPT_BACKGROUND_SYNC,x,e),e}_.__dashjs_factory_name="TimeSyncController";var b=u.default.getSingletonFactory(_);b.HTTP_TIMEOUT_MS=d,u.default.updateSingletonFactory(_.__dashjs_factory_name,b),t.default=b},"./src/streaming/controllers/XlinkController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/XlinkLoader.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),o=n("./src/core/FactoryMaker.js"),s=n("./externals/xml2json.js"),u=n("./src/streaming/utils/URLUtils.js"),l=n("./src/dash/constants/DashConstants.js"),c="onLoad",d="onActuate",f="urn:mpeg:dash:resolve-to-zero:2013";function h(e){e=e||{};var t,n,o,h,p,m,g=this.context,v=Object(i.default)(g).getInstance(),y=Object(u.default)(g).getInstance();function _(e,t,n){var r,i,a={};a.elements=e,a.type=t,a.resolveType=n,0===a.elements.length&&T(a);for(var o=0;o<a.elements.length;o++)r=a.elements[o],i=y.isHTTPURL(r.url)?r.url:r.originalContent.BaseURL+r.url,m.load(i,r,a)}function b(e){var t,n,r="";if(t=e.element,n=e.resolveObject,t.resolvedContent){var i=0;0===t.resolvedContent.indexOf("<?xml")&&(i=t.resolvedContent.indexOf("?>")+2),r=t.resolvedContent.substr(0,i)+"<response>"+t.resolvedContent.substr(i)+"</response>",t.resolvedContent=p.xml_str2json(r)}(function(e){var t;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0})(n)&&T(n)}function T(e){var t,n,r=[];if(function(e){var t,n,r,i,a,s,u=[];for(i=e.elements.length-1;i>=0;i--){if(t=e.elements[i],n=t.type+"_asArray",t.resolvedContent){if(t.resolvedContent)for(a=0;a<t.resolvedContent[n].length;a++)r=t.resolvedContent[n][a],u.push(r)}else delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],u.push(t.originalContent);for(t.parentElement[n].splice(t.index,1),s=0;s<u.length;s++)t.parentElement[n].splice(t.index+s,0,u[s]);u=[]}e.elements.length>0&&o.run(h)}(e),e.resolveType===d&&v.trigger(a.default.XLINK_READY,{manifest:h}),e.resolveType===c)switch(e.type){case l.default.PERIOD:for(t=0;t<h[l.default.PERIOD+"_asArray"].length;t++)(n=h[l.default.PERIOD+"_asArray"][t]).hasOwnProperty(l.default.ADAPTATION_SET+"_asArray")&&(r=r.concat(E(n[l.default.ADAPTATION_SET+"_asArray"],n,l.default.ADAPTATION_SET,c))),n.hasOwnProperty(l.default.EVENT_STREAM+"_asArray")&&(r=r.concat(E(n[l.default.EVENT_STREAM+"_asArray"],n,l.default.EVENT_STREAM,c)));_(r,l.default.ADAPTATION_SET,c);break;case l.default.ADAPTATION_SET:v.trigger(a.default.XLINK_READY,{manifest:h})}}function E(e,t,n,r){var i,a,o,s=[];for(a=e.length-1;a>=0;a--)(i=e[a]).hasOwnProperty("xlink:href")&&i["xlink:href"]===f&&e.splice(a,1);for(a=0;a<e.length;a++)(i=e[a]).hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===r&&(o=S(i["xlink:href"],t,n,a,r,i),s.push(o));return s}function S(e,t,n,r,i,a){return{url:e,parentElement:t,type:n,index:r,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1}}return t={resolveManifestOnLoad:function(e){p=new s.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),(h=e).Period_asArray?_(E(h.Period_asArray,h,l.default.PERIOD,c),l.default.PERIOD,c):v.trigger(a.default.XLINK_READY,{manifest:h})},setMatchers:function(e){e&&(n=e)},setIron:function(e){e&&(o=e)},reset:function(){v.off(a.default.XLINK_ELEMENT_LOADED,b,t),m&&(m.reset(),m=null)}},v.on(a.default.XLINK_ELEMENT_LOADED,b,t),m=Object(r.default)(g).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),t}h.__dashjs_factory_name="XlinkController",t.default=o.default.getClassFactory(h)},"./src/streaming/metrics/MetricsReporting.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/utils/DVBErrorsTranslator.js"),i=n("./src/streaming/metrics/MetricsReportingEvents.js"),a=n("./src/streaming/metrics/controllers/MetricsCollectionController.js"),o=n("./src/streaming/metrics/metrics/MetricsHandlerFactory.js"),s=n("./src/streaming/metrics/reporting/ReportingFactory.js");function u(){var e=this.context;return{createMetricsReporting:function(t){return Object(r.default)(e).getInstance({eventBus:t.eventBus,dashMetrics:t.dashMetrics,metricsConstants:t.metricsConstants,events:t.events}).initialise(),Object(a.default)(e).create(t)},getReportingFactory:function(){return Object(s.default)(e).getInstance()},getMetricsHandlerFactory:function(){return Object(o.default)(e).getInstance()}}}u.__dashjs_factory_name="MetricsReporting";var l=dashjs.FactoryMaker.getClassFactory(u);l.events=i.default,dashjs.FactoryMaker.updateClassFactory(u.__dashjs_factory_name,l),t.default=l},"./src/streaming/metrics/MetricsReportingEvents.js":function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var u=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=a(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",e.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",e.CMCD_DATA_GENERATED="cmcdDataGenerated",e}return n}(n("./src/core/events/EventsBase.js").default));t.default=u},"./src/streaming/metrics/controllers/MetricsCollectionController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/controllers/MetricsController.js"),i=n("./src/streaming/metrics/utils/ManifestParsing.js"),a=n("./src/streaming/metrics/MetricsReportingEvents.js");function o(e){var t;e=e||{};var n={},o=this.context,s=e.eventBus,u=e.events;function l(t){if(!t.error){var u=Object.keys(n);Object(i.default)(o).getInstance({adapter:e.adapter,constants:e.constants}).getMetrics(t.manifest).forEach((function(t){var i=JSON.stringify(t);if(n.hasOwnProperty(i))u.splice(i,1);else try{var a=Object(r.default)(o).create(e);a.initialize(t),n[i]=a}catch(e){}})),u.forEach((function(e){n[e].reset(),delete n[e]})),s.trigger(a.default.METRICS_INITIALISATION_COMPLETE)}}function c(){Object.keys(n).forEach((function(e){n[e].reset()})),n={}}return t={reset:function(){s.off(u.MANIFEST_UPDATED,l,t),s.off(u.STREAM_TEARDOWN_COMPLETE,c,t)}},s.on(u.MANIFEST_UPDATED,l,t),s.on(u.STREAM_TEARDOWN_COMPLETE,c,t),t}o.__dashjs_factory_name="MetricsCollectionController",t.default=dashjs.FactoryMaker.getClassFactory(o)},"./src/streaming/metrics/controllers/MetricsController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/controllers/RangeController.js"),i=n("./src/streaming/metrics/controllers/ReportingController.js"),a=n("./src/streaming/metrics/controllers/MetricsHandlersController.js");function o(e){var t,n,o;e=e||{};var s=this.context;function u(){t&&t.reset(),n&&n.reset(),o&&o.reset()}return{initialize:function(l){try{(o=Object(r.default)(s).create({mediaElement:e.mediaElement})).initialize(l.Range),(n=Object(i.default)(s).create({debug:e.debug,metricsConstants:e.metricsConstants,mediaPlayerModel:e.mediaPlayerModel})).initialize(l.Reporting,o),(t=Object(a.default)(s).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events})).initialize(l.metrics,n)}catch(e){throw u(),e}},reset:u}}o.__dashjs_factory_name="MetricsController",t.default=dashjs.FactoryMaker.getClassFactory(o)},"./src/streaming/metrics/controllers/MetricsHandlersController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/metrics/MetricsHandlerFactory.js");function i(e){e=e||{};var t,n=[],i=this.context,a=e.eventBus,o=e.events,s=Object(r.default)(i).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function u(e){n.forEach((function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)}))}return t={initialize:function(e,r){e.split(",").forEach((function(e,t,i){var a;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var o=i[t+1];o&&-1===o.indexOf("(")&&-1!==o.indexOf(")")&&(e+=","+o,delete i[t+1])}(a=s.create(e,r))&&n.push(a)})),a.on(o.METRIC_ADDED,u,t),a.on(o.METRIC_UPDATED,u,t)},reset:function(){a.off(o.METRIC_ADDED,u,t),a.off(o.METRIC_UPDATED,u,t),n.forEach((function(e){return e.reset()})),n=[]}}}i.__dashjs_factory_name="MetricsHandlersController",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/controllers/RangeController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/utils/CustomTimeRanges.js");function i(e){e=e||{};var t,n,i=!1,a=this.context,o=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach((function(e){var t=e.starttime,r=t+e.duration;n.add(t,r)})),i=!!e[0]._useWallClockTime)},reset:function(){n.clear()},isEnabled:function(){var e,t=n.length;if(!t)return!0;e=i?(new Date).getTime()/1e3:o.currentTime;for(var r=0;r<t;r+=1){var a=n.start(r),s=n.end(r);if(a<=e&&e<s)return!0}return!1}},n=Object(r.default)(a).create(),t}i.__dashjs_factory_name="RangeController",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/controllers/ReportingController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/reporting/ReportingFactory.js");function i(e){var t=[],n=Object(r.default)(this.context).getInstance(e);return{initialize:function(e,r){e.some((function(e){var i=n.create(e,r);if(i)return t.push(i),!0}))},reset:function(){t.forEach((function(e){return e.reset()})),t=[]},report:function(e,n){t.forEach((function(t){return t.report(e,n)}))}}}i.__dashjs_factory_name="ReportingController",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/metrics/MetricsHandlerFactory.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js"),i=n("./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js"),a=n("./src/streaming/metrics/metrics/handlers/HttpListHandler.js"),o=n("./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js");function s(e){var t,n=(e=e||{}).debug?e.debug.getLogger(t):{},s=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,u=this.context,l={BufferLevel:r.default,DVBErrors:i.default,HttpList:a.default,PlayList:o.default,RepSwitchList:o.default,TcpList:o.default};return t={create:function(t,r){var i,a=t.match(s);if(a){try{(i=l[a[1]](u).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants})).initialize(a[1],r,a[3],a[5])}catch(e){i=null,n.error("MetricsHandlerFactory: Could not create handler for type ".concat(a[1]," with args ").concat(a[3],", ").concat(a[5]," (").concat(e.message,")"))}return i}},register:function(e,t){l[e]=t},unregister:function(e){delete l[e]}}}s.__dashjs_factory_name="MetricsHandlerFactory",t.default=dashjs.FactoryMaker.getSingletonFactory(s)},"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/utils/HandlerHelpers.js");function i(e){var t,n,i,a,o;e=e||{};var s=this.context,u=Object(r.default)(s).getInstance(),l=[],c=e.metricsConstants;function d(){var e=function(){try{return Object.keys(l).map((function(e){return l[e]})).reduce((function(e,t){return e.level<t.level?e:t}))}catch(e){return}}();e&&o!==e.t&&(o=e.t,t.report(i,e))}return{initialize:function(e,r,o){r&&(n=u.validateN(o),t=r,i=u.reconstructFullMetricName(e,o),a=setInterval(d,n))},reset:function(){clearInterval(a),a=null,n=0,t=null,o=null},handleNewMetric:function(e,t,n){e===c.BUFFER_LEVEL&&(l[n]=t)}}}i.__dashjs_factory_name="BufferLevelHandler",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/MetricsReportingEvents.js");t.default=dashjs.FactoryMaker.getClassFactory((function(e){var t,n=(e=e||{}).eventBus,i=e.metricsConstants;function a(){n.off(r.default.METRICS_INITIALISATION_COMPLETE,a,this),n.trigger(r.default.BECAME_REPORTING_PLAYER)}return{initialize:function(e,i){i&&(t=i,n.on(r.default.METRICS_INITIALISATION_COMPLETE,a,this))},reset:function(){t=null},handleNewMetric:function(e,n){e===i.DVB_ERRORS&&t&&t.report(e,n)}}}))},"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js":function(e,t,n){"use strict";function r(){var e,t;return{initialize:function(n,r){e=n,t=r},reset:function(){t=null,e=void 0},handleNewMetric:function(n,r){n===e&&t&&t.report(e,r)}}}n.r(t),r.__dashjs_factory_name="GenericMetricHandler",t.default=dashjs.FactoryMaker.getClassFactory(r)},"./src/streaming/metrics/metrics/handlers/HttpListHandler.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/utils/HandlerHelpers.js");function i(e){var t,n,i,a,o;e=e||{};var s=[],u=Object(r.default)(this.context).getInstance(),l=e.metricsConstants;function c(){var e=s;e.length&&t&&t.report(a,e),s=[]}return{initialize:function(e,r,s,l){r&&(n=u.validateN(s),t=r,l&&l.length&&(i=l),a=u.reconstructFullMetricName(e,s,l),o=setInterval(c,n))},reset:function(){clearInterval(o),o=null,n=null,i=null,s=[],t=null},handleNewMetric:function(e,t){e===l.HTTP_REQUEST&&(i&&i!==t.type||s.push(t))}}}i.__dashjs_factory_name="HttpListHandler",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/reporting/ReportingFactory.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/reporting/reporters/DVBReporting.js");function i(e){e=e||{};var t,n={"urn:dvb:dash:reporting:2014":r.default},i=this.context,a=e.debug?e.debug.getLogger(t):{},o=e.metricsConstants,s=e.mediaPlayerModel||{};return t={create:function(e,t){var r;try{(r=n[e.schemeIdUri](i).create({metricsConstants:o,mediaPlayerModel:s})).initialize(e,t)}catch(t){r=null,a.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(e.schemeIdUri," (").concat(t.message,")"))}return r},register:function(e,t){n[e]=t},unregister:function(e){delete n[e]}}}i.__dashjs_factory_name="ReportingFactory",t.default=dashjs.FactoryMaker.getSingletonFactory(i)},"./src/streaming/metrics/reporting/reporters/DVBReporting.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/utils/MetricSerialiser.js"),i=n("./src/streaming/metrics/utils/RNG.js"),a=n("./src/streaming/models/CustomParametersModel.js");function o(e){var t;e=e||{};var n,o,s,u,l,c,d,f=this.context,h=!0,p=!0,m=[],g=e.metricsConstants;function v(){u=!1,l=!1,c=null,d=null}return t={report:function(e,t){Array.isArray(t)||(t=[t]),l&&d.isEnabled()&&t.forEach((function(t){var r=n.serialise(t);h&&e!==g.DVB_ERRORS&&(r="metricname=".concat(e,"&").concat(r)),function(e,t,n){var r=new XMLHttpRequest;r.withCredentials=o.getXHRWithCredentialsForType(g.HTTP_REQUEST_DVB_REPORTING_TYPE);var i=function(){var e=m.indexOf(r);-1!==e&&(m.splice(e,1),r.status>=200&&r.status<300?t&&t():n&&n())};m.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(e){r.onerror()}}(r="".concat(c,"?").concat(r),null,(function(){l=!1}))}))},initialize:function(e,t){var n;if(d=t,!(c=e.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");u||((n=e.dvb_probability)&&(1e3===n||n/1e3>=s.random())&&(l=!0),u=!0)},reset:function(){p||(m.forEach((function(e){return e.abort()})),m=[]),v()}},n=Object(r.default)(f).getInstance(),s=Object(i.default)(f).getInstance(),o=Object(a.default)(f).getInstance(),v(),t}o.__dashjs_factory_name="DVBReporting",t.default=dashjs.FactoryMaker.getClassFactory(o)},"./src/streaming/metrics/utils/DVBErrorsTranslator.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/vo/DVBErrors.js"),i=n("./src/streaming/metrics/MetricsReportingEvents.js");function a(e){var t,n,a=(e=e||{}).eventBus,o=e.dashMetrics,s=e.metricsConstants,u=e.events;function l(e){var t=new r.default;if(n){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.mpdurl||(t.mpdurl=n.originalUrl||n.url),t.terror||(t.terror=new Date),o.addDVBErrors(t)}}function c(e){e.error||(n=e.manifest)}function d(e){l({errorcode:r.default.BASE_URL_CHANGED,servicelocation:e.entry})}function f(){l({errorcode:r.default.BECAME_REPORTER})}function h(e){switch(e.metric){case s.HTTP_REQUEST:(0===(t=e.value).responsecode||null==t.responsecode||t.responsecode>=400||t.responsecode<100||t.responsecode>=600)&&l({errorcode:t.responsecode||r.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation})}var t}function p(e){var t;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=r.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=r.default.CORRUPT_MEDIA_OTHER;break;default:return}l({errorcode:t})}return t={initialise:function(){a.on(u.MANIFEST_UPDATED,c,t),a.on(u.SERVICE_LOCATION_BLACKLIST_CHANGED,d,t),a.on(u.METRIC_ADDED,h,t),a.on(u.METRIC_UPDATED,h,t),a.on(u.PLAYBACK_ERROR,p,t),a.on(i.default.BECAME_REPORTING_PLAYER,f,t)},reset:function(){a.off(u.MANIFEST_UPDATED,c,t),a.off(u.SERVICE_LOCATION_BLACKLIST_CHANGED,d,t),a.off(u.METRIC_ADDED,h,t),a.off(u.METRIC_UPDATED,h,t),a.off(u.PLAYBACK_ERROR,p,t),a.off(i.default.BECAME_REPORTING_PLAYER,f,t)}}}a.__dashjs_factory_name="DVBErrorsTranslator",t.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/metrics/utils/HandlerHelpers.js":function(e,t,n){"use strict";function r(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}n.r(t),r.__dashjs_factory_name="HandlerHelpers",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/metrics/utils/ManifestParsing.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/metrics/vo/Metrics.js"),i=n("./src/streaming/metrics/vo/Range.js"),a=n("./src/streaming/metrics/vo/Reporting.js");function o(e){var t=(e=e||{}).adapter,n=e.constants;return{getMetrics:function(e){var o=[];return e&&e.Metrics_asArray&&e.Metrics_asArray.forEach((function(s){var u=new r.default,l=t.getIsDynamic(e);s.hasOwnProperty("metrics")&&(u.metrics=s.metrics,s.Range_asArray&&s.Range_asArray.forEach((function(r){var a=new i.default;a.starttime=function(e,r,i){var a,o,s=0;return r?s=t.getAvailabilityStartTime(e)/1e3:(a=t.getRegularPeriods(e)).length&&(s=a[0].start),o=s,i&&i.hasOwnProperty(n.START_TIME)&&(o+=i.starttime),o}(e,l,r),r.hasOwnProperty("duration")?a.duration=r.duration:a.duration=t.getDuration(e),a._useWallClockTime=l,u.Range.push(a)})),s.Reporting_asArray&&(s.Reporting_asArray.forEach((function(e){var t=new a.default;e.hasOwnProperty(n.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty(n.DVB_REPORTING_URL)&&(t.dvb_reportingUrl=e[n.DVB_REPORTING_URL]),e.hasOwnProperty(n.DVB_PROBABILITY)&&(t.dvb_probability=e[n.DVB_PROBABILITY]),u.Reporting.push(t))})),o.push(u)))})),o}}}o.__dashjs_factory_name="ManifestParsing",t.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/metrics/utils/MetricSerialiser.js":function(e,t,n){"use strict";function r(){return{serialise:function e(t){var n,r,i=[],a=[];for(n in t)if(t.hasOwnProperty(n)&&0!==n.indexOf("_")){if(null==(r=t[n])&&(r=""),Array.isArray(r)){if(!r.length)continue;a=[],r.forEach((function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);a.push(n?t:e(t))})),r=a.map(encodeURIComponent).join(",")}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(n+"="+r)}return i.join("&")}}}n.r(t),r.__dashjs_factory_name="MetricSerialiser",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/metrics/utils/RNG.js":function(e,t,n){"use strict";function r(){var e,t,n,r=window.crypto||window.msCrypto,i=Uint32Array,a=Math.pow(2,8*i.BYTES_PER_ELEMENT)-1,o=10;function s(){r&&(e||(e=new i(o)),r.getRandomValues(e),t=0)}return n={random:function(n,i){var o;return n||(n=0),i||(i=1),r?(t===e.length&&s(),o=e[t]/a,t+=1):o=Math.random(),o*(i-n)+n}},s(),n}n.r(t),r.__dashjs_factory_name="RNG",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/metrics/vo/DVBErrors.js":function(e,t,n){"use strict";n.r(t);var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",t.default=r},"./src/streaming/metrics/vo/Metrics.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics="",this.Range=[],this.Reporting=[]}},"./src/streaming/metrics/vo/Range.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},"./src/streaming/metrics/vo/Reporting.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3}},"./src/streaming/models/BaseURLTreeModel.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/utils/ObjectUtils.js"),i=n("./src/core/FactoryMaker.js"),a=NaN,o=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={baseUrls:t||null,selectedIdx:n||a},this.children=[]};function s(){var e,t,n,i=this.context,s=Object(r.default)(i).getInstance();function u(e,t,r){var i=n.getBaseURLsFromElement(r);e[t]?s.areEqual(i,e[t].data.baseUrls)||(e[t].data.baseUrls=i,e[t].data.selectedIdx=a):e[t]=new o(i)}function l(e){!function(){if(!n||!n.hasOwnProperty("getBaseURLsFromElement")||!n.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var r=n.getBaseURLsFromElement(e);s.areEqual(r,t.data.baseUrls)||(t.data.baseUrls=r,t.data.selectedIdx=a),e&&e.Period_asArray&&e.Period_asArray.forEach((function(e,r){u(t.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach((function(e,i){u(t.children[r].children,i,e),e.Representation_asArray&&e.Representation_asArray.sort(n.getRepresentationSortFunction()).forEach((function(e,n){u(t.children[r].children[i].children,n,e)}))}))}))}function c(){t=new o}return e={reset:c,update:function(e){l(e)},getForPath:function(e){var n=t,r=[n.data];return e&&e.forEach((function(e){(n=n.children[e])&&r.push(n.data)})),r.filter((function(e){return e.baseUrls.length}))},invalidateSelectedIndexes:function(e){!function e(n,r){var i=r||t;n(i.data),i.children&&i.children.forEach((function(t){return e(n,t)}))}((function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=a)}))},setConfig:function(e){e.adapter&&(n=e.adapter)}},c(),e}s.__dashjs_factory_name="BaseURLTreeModel",t.default=i.default.getClassFactory(s)},"./src/streaming/models/CmcdModel.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/streaming/MediaPlayerEvents.js"),a=n("./src/streaming/metrics/MetricsReportingEvents.js"),o=n("./src/core/FactoryMaker.js"),s=n("./src/core/Settings.js"),u=n("./src/streaming/constants/Constants.js"),l=n("./src/streaming/vo/metrics/HTTPRequest.js"),c=n("./src/dash/models/DashManifestModel.js"),d=n("./src/core/Utils.js");function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p="CMCD",m=1,g={MANIFEST:"m",AUDIO:"a",VIDEO:"v",INIT:"i",CAPTION:"c",ISOBMFF_TEXT_TRACK:"tt",ENCRYPTION_KEY:"k",OTHER:"o"},v={DASH:"d",MSS:"s"},y={VOD:"v",LIVE:"l"},_=5;function b(){var e,t,n,o,h,b,T,E,S,w,A=this.context,M=Object(r.default)(A).getInstance(),L=Object(s.default)(A).getInstance();function C(){n={pr:1,nor:null,st:null,sf:null,sid:"".concat(d.default.generateUuid()),cid:null},S={},E={},w={},k()}function D(){k()}function k(){if(b){var e=b.getStreamController();if(e&&"function"==typeof e.getActiveStream){var t=e.getActiveStream();t&&(T=t.getProcessors())}}}function P(e,t){var n,r={},i=f(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e[a]&&(r[a]=e[a])}}catch(e){i.e(e)}finally{i.f()}return r}function I(e){var t=L.get().streaming.cmcd.enabledKeys;return e.filter((function(e){return t.includes(e)}))}function O(e){try{return e.type===l.HTTPRequest.MPD_TYPE?((r=R()).ot=g.MANIFEST,r):e.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE?(t=e.mediaType,w.hasOwnProperty(t)||(w[t]=!1),E.hasOwnProperty(t)||(E[t]=!1),S.hasOwnProperty(t)||(S[t]=!1),function(e){var t,r=R(),i=function(e){try{var t=e.quality,n=e.mediaInfo.bitrateList;return parseInt(n[t].bandwidth/1e3)}catch(e){return null}}(e),a=function(e){try{return isNaN(e.duration)?null:Math.round(1e3*e.duration)}catch(e){return null}}(e),s=function(e){try{return 100*parseInt(o.getThroughputHistory().getSafeAverageThroughput(e)/100)}catch(e){return null}}(e.mediaType),l=function(e){try{var t=n.pr,r=h.getCurrentBufferLevel(e);return isNaN(t)||isNaN(r)?null:100*parseInt(r/t*10)}catch(e){return null}}(e.mediaType),c=x(e.mediaType),p=function(e){try{var t=o.getTopBitrateInfoFor(e);return Math.round(t.bitrate/1e3)}catch(e){return null}}(e.mediaType),m=n.pr,v=function(e){if(T&&0!==T.length){var t,n=f(T);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.getType()===e)return r.probeNextRequest()}}catch(e){n.e(e)}finally{n.f()}}}(e.mediaType);e.mediaType===u.default.VIDEO&&(t=g.VIDEO),e.mediaType===u.default.AUDIO&&(t=g.AUDIO),e.mediaType===u.default.TEXT&&(t="application/mp4"===e.mediaInfo.mimeType?g.ISOBMFF_TEXT_TRACK:g.CAPTION);var y=L.get().streaming.cmcd.rtp;return y||(y=function(e){var t=b.getPlaybackRate();t||(t=1);var n=e.quality,r=e.mediaType,i=e.mediaInfo,a=e.duration,o=x(r);0===o&&(o=500);var s=i.bitrateList[n].bandwidth*a/1e3/(o/t/1e3),u=L.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(L.get().streaming.cmcd.rtpSafetyFactor)?L.get().streaming.cmcd.rtpSafetyFactor:_;return 100*(parseInt(s*u/100)+1)}(e)),r.rtp=y,v&&(e.url!==v.url?r.nor=encodeURIComponent(d.default.getRelativeUrl(e.url,v.url)):v.range&&(r.nrr=v.range)),i&&(r.br=i),t&&(r.ot=t),isNaN(a)||(r.d=a),isNaN(s)||(r.mtp=s),isNaN(l)||(r.dl=l),isNaN(c)||(r.bl=c),isNaN(p)||(r.tb=p),isNaN(m)||1===m||(r.pr=m),S[e.mediaType]&&(r.bs=!0,S[e.mediaType]=!1),!E[e.mediaType]&&w[e.mediaType]||(r.su=!0,E[e.mediaType]=!1,w[e.mediaType]=!0),r}(e)):e.type===l.HTTPRequest.INIT_SEGMENT_TYPE?function(){var e=R();return e.ot=g.INIT,e.su=!0,e}():e.type===l.HTTPRequest.OTHER_TYPE||e.type===l.HTTPRequest.XLINK_EXPANSION_TYPE?function(){var e=R();return e.ot=g.OTHER,e}():e.type===l.HTTPRequest.LICENSE?function(e){var t=R();return t.ot=g.ENCRYPTION_KEY,t}():null}catch(e){return null}var t,r}function R(){var e={},t=L.get().streaming.cmcd.cid?L.get().streaming.cmcd.cid:n.cid;return e.v=m,e.sid=L.get().streaming.cmcd.sid?L.get().streaming.cmcd.sid:n.sid,e.sid="".concat(e.sid),t&&(e.cid="".concat(t)),isNaN(n.pr)||1===n.pr||null===n.pr||(e.pr=n.pr),n.st&&(e.st=n.st),n.sf&&(e.sf=n.sf),e}function x(e){try{var t=h.getCurrentBufferLevel(e);return isNaN(t)?null:100*parseInt(10*t)}catch(e){return null}}function N(e){try{n.pr=e.playbackRate}catch(e){}}function j(t){try{var r=e.getIsDynamic(t.data)?y.LIVE:y.VOD,i=t.protocol&&"MSS"===t.protocol?v.MSS:v.DASH;n.st="".concat(r),n.sf="".concat(i)}catch(e){}}function F(e){try{e.state&&e.mediaType&&e.state===i.default.BUFFER_EMPTY&&(S[e.mediaType]||(S[e.mediaType]=!0),E[e.mediaType]||(E[e.mediaType]=!0))}catch(e){}}function U(){for(var e in S)S.hasOwnProperty(e)&&(S[e]=!0);for(var t in E)E.hasOwnProperty(t)&&(E[t]=!0)}function B(e){try{if(!e)return null;var t=Object.keys(e).sort((function(e,t){return e.localeCompare(t)})),n=t.length,r=t.reduce((function(t,r,i){return"v"===r&&1===e[r]?t:("string"==typeof e[r]&&"ot"!==r&&"sf"!==r&&"st"!==r?t+="".concat(r,"=").concat(JSON.stringify(e[r])):t+="".concat(r,"=").concat(e[r]),i<n-1&&(t+=","),t)}),"");return r=(r=r.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(e){return null}}return t={getQueryParameter:function(e){try{if(L.get().streaming.cmcd&&L.get().streaming.cmcd.enabled){var t=O(e),n=B(function(e){try{var t=L.get().streaming.cmcd.enabledKeys;return Object.keys(e).filter((function(e){return t.includes(e)})).reduce((function(t,n){return t[n]=e[n],t}),{})}catch(t){return e}}(t));return M.trigger(a.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,cmcdString:n}),{key:p,value:n}}return null}catch(e){return null}},getHeaderParameters:function(e){try{if(L.get().streaming.cmcd&&L.get().streaming.cmcd.enabled){var t=O(e),n=P(t,I(["br","d","ot","tb"])),r=P(t,I(["bl","dl","mtp","nor","nrr","su"])),i=P(t,I(["bs","rtp"])),o=P(t,I(["cid","pr","sf","sid","st","v"])),s={"CMCD-Object":B(n),"CMCD-Request":B(r),"CMCD-Status":B(i),"CMCD-Session":B(o)};return M.trigger(a.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,headers:s}),s}return null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(o=e.abrController),e.dashMetrics&&(h=e.dashMetrics),e.playbackController&&(b=e.playbackController))},reset:function(){M.off(i.default.PLAYBACK_RATE_CHANGED,N,this),M.off(i.default.MANIFEST_LOADED,j,this),M.off(i.default.BUFFER_LEVEL_STATE_CHANGED,F,t),M.off(i.default.PLAYBACK_SEEKED,U,t),C()},initialize:function(){M.on(i.default.PLAYBACK_RATE_CHANGED,N,t),M.on(i.default.MANIFEST_LOADED,j,t),M.on(i.default.BUFFER_LEVEL_STATE_CHANGED,F,t),M.on(i.default.PLAYBACK_SEEKED,U,t),M.on(i.default.PERIOD_SWITCH_COMPLETED,D,t)}},e=Object(c.default)(A).getInstance(),C(),t}b.__dashjs_factory_name="CmcdModel",t.default=o.default.getSingletonFactory(b)},"./src/streaming/models/CustomParametersModel.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/dash/vo/UTCTiming.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/core/Settings.js"),o=n("./src/streaming/utils/SupervisorTools.js"),s=n("./src/streaming/rules/abr/ABRRulesCollection.js"),u=n("./src/streaming/constants/Constants.js"),l=!1;function c(){var e,t,n,i,c,d,f,h,p=this.context,m=Object(a.default)(p).getInstance();function g(){i=[],c=[],d=[],h=[],f=null,t=[]}function v(e,t){var n=-1;e.some((function(e,r){if(e===t)return n=r,!0})),n<0||e.splice(n,1)}function y(e){var t;for(t=0;t<h.length;t++)if(h[t].rulename===e)return t;return-1}function _(e,n){b(e,n);var i=new r.default;i.schemeIdUri=e,i.value=n,t.push(i)}function b(e,n){Object(o.checkParameterType)(e,"string"),Object(o.checkParameterType)(n,"string"),t.forEach((function(r,i){r.schemeIdUri===e&&r.value===n&&t.splice(i,1)}))}return e={getCustomInitialTrackSelectionFunction:function(){return f},setCustomInitialTrackSelectionFunction:function(e){f=e},resetCustomInitialTrackSelectionFunction:function(){f=null},getLicenseResponseFilters:function(){return c},getLicenseRequestFilters:function(){return i},getCustomCapabilitiesFilters:function(){return d},registerCustomCapabilitiesFilter:function(e){d.push(e)},registerLicenseResponseFilter:function(e){c.push(e)},registerLicenseRequestFilter:function(e){i.push(e)},unregisterCustomCapabilitiesFilter:function(e){v(d,e)},unregisterLicenseResponseFilter:function(e){v(c,e)},unregisterLicenseRequestFilter:function(e){v(i,e)},addAbrCustomRule:function(e,t,n){if("string"!=typeof e||e!==s.default.ABANDON_FRAGMENT_RULES&&e!==s.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw u.default.BAD_ARGUMENT_ERROR;var r=y(t);-1===r?h.push({type:e,rulename:t,rule:n}):(h[r].type=e,h[r].rule=n)},removeAllAbrCustomRule:function(){h=[]},removeAbrCustomRule:function(e){if(e){var t=y(e);-1!==t&&h.splice(t,1)}else h=[]},getAbrCustomRules:function(){return h},addUTCTimingSource:_,removeUTCTimingSource:b,getUTCTimingSources:function(){return t},clearDefaultUTCTimingSources:function(){t=[]},restoreDefaultUTCTimingSources:function(){var e=m.get().streaming.utcSynchronization.defaultTimingSource;_(e.scheme,e.value)},setXHRWithCredentialsForType:function e(t,r){t?n[t]=!!r:Object.keys(n).forEach((function(t){e(t,r)}))},getXHRWithCredentialsForType:function(e){var t=n[e];return void 0===t?n.default:t},setConfig:function(){},reset:function(){g()}},n={default:l},g(),e}c.__dashjs_factory_name="CustomParametersModel",t.default=i.default.getSingletonFactory(c)},"./src/streaming/models/FragmentModel.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/vo/FragmentRequest.js"),a="loading",o="executed",s="failed";function u(e){var t,n,r,u,l=(e=e||{}).eventBus,c=e.events,d=e.dashMetrics,f=e.fragmentLoader,h=e.debug,p=e.streamInfo,m=e.type;function g(e){var t;return!!e&&(t=!1,r.some((function(n){if(r=e,a=n,!isNaN(r.index)&&r.startTime===a.startTime&&r.adaptationIndex===a.adaptationIndex&&r.type===a.type||function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality}(e,n)||function(e,t){return e.action===i.default.ACTION_COMPLETE&&e.action===t.action}(e,n))return t=!0;var r,a})),t)}function v(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function y(e){r=r.filter((function(t){var n=v(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-n}))}function _(e,t){t<=e+.5||(r=r.filter((function(n){var r=v(n);return isNaN(n.startTime)||n.startTime>=t-r||isNaN(n.duration)||n.startTime+n.duration<=e+r})))}function b(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r],a=i.startTime,o=a+i.duration;if(n=isNaN(n)?v(i):n,!isNaN(a)&&!isNaN(o)&&t+n>=a&&t-n<o||isNaN(a)&&isNaN(t))return i}return null}function T(e,t){d.addSchedulingInfo(e,t),d.addRequestsQueue(e.mediaType,u,r)}function E(e){e.sender===f&&(u.splice(u.indexOf(e.request),1),e.response&&!e.error&&r.push(e.request),T(e.request,e.error?s:o),l.trigger(c.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:p.id,mediaType:m}))}function S(e){e.sender===f&&l.trigger(c.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:p.id,mediaType:m})}function w(e){e.sender===f&&l.trigger(c.FRAGMENT_LOADING_ABANDONED,{request:e.request},{streamId:p.id,mediaType:m})}function A(){r=[],u=[]}return t={getStreamId:function(){return p.id},getType:function(){return m},getRequests:function(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],n=[];return t.forEach((function(t){var i=function(e){var t;switch(e){case a:t=u;break;case o:t=r;break;default:t=[]}return t}(t);n=n.concat(function(e,t){return t.hasOwnProperty("time")?[b(e,t.time,t.threshold)]:e.filter((function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0}))}(i,e))})),n},isFragmentLoaded:g,isFragmentLoadedOrPending:function(e){var t,n=!1,r=0;if(!(n=g(e)))for(r=0;r<u.length;r++)t=u[r],e.url===t.url&&e.startTime===t.startTime&&(n=!0);return n},removeExecutedRequestsBeforeTime:y,removeExecutedRequestsAfterTime:function(e){r=r.filter((function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime<e}))},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=e.length;r<i;r++)_(n,e.start(r)),n=e.end(r);t>0&&_(n,t)}else y()},abortRequests:function(){n.debug("abort requests"),f.abort(),u=[]},executeRequest:function(e){switch(e.action){case i.default.ACTION_DOWNLOAD:T(e,a),u.push(e),function(e){l.trigger(c.FRAGMENT_LOADING_STARTED,{request:e},{streamId:p.id,mediaType:m}),f.load(e)}(e);break;default:n.warn("Unknown request action.")}},reset:function(){l.off(c.LOADING_COMPLETED,E,this),l.off(c.LOADING_DATA_PROGRESS,S,this),l.off(c.LOADING_ABANDONED,w,this),f&&f.reset(),A()},resetInitialSettings:A,addExecutedRequest:function(e){r.push(e)}},n=h.getLogger(t),A(),l.on(c.LOADING_COMPLETED,E,t),l.on(c.LOADING_DATA_PROGRESS,S,t),l.on(c.LOADING_ABANDONED,w,t),t}u.__dashjs_factory_name="FragmentModel";var l=r.default.getClassFactory(u);l.FRAGMENT_MODEL_LOADING=a,l.FRAGMENT_MODEL_EXECUTED=o,l.FRAGMENT_MODEL_CANCELED="canceled",l.FRAGMENT_MODEL_FAILED=s,r.default.updateClassFactory(u.__dashjs_factory_name,l),t.default=l},"./src/streaming/models/LowLatencyThroughputModel.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/Debug.js"),i=n("./src/core/FactoryMaker.js");function a(){var e,t,n=10,i=.8,a=.6,o=1.05,s=250,u=this.context,l={};function c(){t=Object(r.default)(u).getInstance().getLogger(e)}function d(e){for(var t={},n=0,r=0,i=0,a=0,o=e.length,s=0;s<o;++s)n+=e[s].chunkDownloadTimeRelativeMS,r+=e[s].bufferLevel,i+=e[s].chunkDownloadTimeRelativeMS*e[s].bufferLevel,a+=e[s].chunkDownloadTimeRelativeMS*e[s].chunkDownloadTimeRelativeMS;return t.m=(i-n*r/o)/(a-n*n/o),t.b=r/o-t.m*n/o,function(e){return t.m*e+t.b}}function f(e){var t,n=!0,r=e.reduce((function(e,t){return e+t.bufferLevelAtSegmentEnd}),0)/e.length;return e.forEach((function(e){Math.abs(e.bufferLevelAtSegmentEnd/e.bufferLevelAtSegmentStart)<.95&&(n=!1),e.bufferLevelAtSegmentEnd/r<.8&&(n=!1),t?t>e.bitrate&&(n=!1):t=e.bitrate})),n}return e={setup:c,addMeasurement:function(e,t,r,i,a){e&&e.mediaType&&!l[e.mediaType]&&(l[e.mediaType]=[]);var o=e.mediaInfo.bitrateList.find((function(t){return t.id===e.representationId}));l[e.mediaType].push({index:e.index,repId:e.representationId,mediaType:e.mediaType,requestTimeMS:i,adjustedAvailabilityStartTimeMS:e.availabilityStartTime.getTime(),segDurationMS:1e3*e.duration,chunksDurationMS:r.reduce((function(e,t){return e+t.chunkDownloadDurationMS}),0),segmentBytes:r.reduce((function(e,t){return e+t.chunkBytes}),0),bitrate:o&&o.bandwidth,bitrateList:e.mediaInfo.bitrateList,chunkMeasurements:r,fetchDownloadDurationMS:t,throughputCapacityDelayMS:a,getEstimatedBufferLevel:d(r.slice(1))}),l[e.mediaType].length>n&&l[e.mediaType].shift()},getThroughputCapacityDelayMS:function(e,t){var n=l[e.mediaType]&&l[e.mediaType].slice(-3);return!n||n.length<3?0:f(n)?t/4>s?s:t/4:0},getEstimatedDownloadDurationMS:function(e){var n=l[e.mediaType].slice(-1).pop(),r=l[e.mediaType].slice(-3),s=n.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;n.bufferLevelAtSegmentStart=n.getEstimatedBufferLevel(s/2),n.bufferLevelAtSegmentEnd=n.getEstimatedBufferLevel(s);var u=f(r),c=u?a:i;if(n.isBufferStable&&n.segDurationMS*o<n.fetchDownloadDurationMS)return n.fetchDownloadDurationMS;if(!u||n.segDurationMS<n.fetchDownloadDurationMS)return n.fetchDownloadDurationMS*i;if(n.adjustedAvailabilityStartTimeMS<=n.requestTimeMS+n.throughputCapacityDelayMS-n.segDurationMS)return n.fetchDownloadDurationMS*i;for(var d=n.requestTimeMS+n.throughputCapacityDelayMS-n.adjustedAvailabilityStartTimeMS,h=0,p=0,m=0,g=0;g<n.chunkMeasurements.length;g++){var v=n.chunkMeasurements[g];if(d<p+v.chunkDownloadDurationMS)break;p+=v.chunkDownloadDurationMS,h+=v.chunkBytes,m++}if(d<0&&t.warn("request time was before adjusted availibitly start time"),h&&p&&m>.2*n.chunkMeasurements.length){var y=h/p,_=n.segmentBytes/y;return n.fetchDownloadDurationMS<_?n.fetchDownloadDurationMS*c:_*c}var b=n.bitrate;return n.bitrateList.some((function(e){if(e.bandwidth>n.bitrate)return b=e.bandwidth,!0})),b===n.bitrate?n.fetchDownloadDurationMS*c:c*n.segmentBytes*8*1e3/b}},c(),e}a.__dashjs_factory_name="LowLatencyThroughputModel",t.default=i.default.getSingletonFactory(a)},"./src/streaming/models/ManifestModel.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js");function o(){var e,t=this.context,n=Object(r.default)(t).getInstance();return{getValue:function(){return e},setValue:function(t){e=t,t&&n.trigger(i.default.MANIFEST_LOADED,{data:t})}}}o.__dashjs_factory_name="ManifestModel",t.default=a.default.getSingletonFactory(o)},"./src/streaming/models/MediaPlayerModel.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Settings.js"),a=12,o=20,s=10,u=5,l=12,c=.5;function d(){var e,t,n=this.context,r=Object(i.default)(n).getInstance();function d(){var t=r.get().streaming.buffer.stableBufferTime>0?r.get().streaming.buffer.stableBufferTime:r.get().streaming.buffer.fastSwitchEnabled?o:a,n=e.getLiveDelay();return!isNaN(n)&&n>0?Math.min(t,n):t}return{getCatchupMaxDrift:function(){if(!isNaN(r.get().streaming.liveCatchup.maxDrift)&&r.get().streaming.liveCatchup.maxDrift>0)return r.get().streaming.liveCatchup.maxDrift;var e=t.getServiceDescriptionSettings();return e&&e.liveCatchup&&!isNaN(e.liveCatchup.maxDrift)&&e.liveCatchup.maxDrift>0?e.liveCatchup.maxDrift:l},getCatchupModeEnabled:function(){return null!==r.get().streaming.liveCatchup.enabled?r.get().streaming.liveCatchup.enabled:e.getInitialCatchupModeActivated()},getLiveCatchupLatencyThreshold:function(){try{var t=r.get().streaming.liveCatchup.latencyThreshold,n=e.getLiveDelay();return null===t||isNaN(t)?NaN:Math.max(t,n)}catch(e){return NaN}},getStableBufferTime:d,getInitialBufferLevel:function(){var e=r.get().streaming.buffer.initialBufferLevel;return isNaN(e)||e<0?0:Math.min(d(),e)},getRetryAttemptsForType:function(t){var n=isNaN(r.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?u:r.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return e.getLowLatencyModeEnabled()?r.get().streaming.retryAttempts[t]*n:r.get().streaming.retryAttempts[t]},getRetryIntervalsForType:function(t){var n=isNaN(r.get().streaming.retryIntervals.lowLatencyReductionFactor)?s:r.get().streaming.retryIntervals.lowLatencyReductionFactor;return e.getLowLatencyModeEnabled()?r.get().streaming.retryIntervals[t]/n:r.get().streaming.retryIntervals[t]},getCatchupPlaybackRate:function(){if(!isNaN(r.get().streaming.liveCatchup.playbackRate)&&r.get().streaming.liveCatchup.playbackRate>0)return r.get().streaming.liveCatchup.playbackRate;var e=t.getServiceDescriptionSettings();return e&&e.liveCatchup&&!isNaN(e.liveCatchup.playbackRate)&&e.liveCatchup.playbackRate>0?e.liveCatchup.playbackRate:c},getAbrBitrateParameter:function(e,n){try{var i=r.get().streaming.abr[e][n];if(!isNaN(i)&&-1!==i)return i;var a=t.getServiceDescriptionSettings();return a&&a[e]&&!isNaN(a[e][n])?a[e][n]:-1}catch(e){return-1}},setConfig:function(n){n.playbackController&&(e=n.playbackController),n.serviceDescriptionController&&(t=n.serviceDescriptionController)},reset:function(){}}}d.__dashjs_factory_name="MediaPlayerModel",t.default=r.default.getSingletonFactory(d)},"./src/streaming/models/MetricsModel.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/streaming/vo/MetricsList.js"),o=n("./src/streaming/vo/metrics/HTTPRequest.js"),s=n("./src/streaming/vo/metrics/RepresentationSwitch.js"),u=n("./src/streaming/vo/metrics/BufferLevel.js"),l=n("./src/streaming/vo/metrics/BufferState.js"),c=n("./src/streaming/vo/metrics/DVRInfo.js"),d=n("./src/streaming/vo/metrics/DroppedFrames.js"),f=n("./src/streaming/vo/metrics/ManifestUpdate.js"),h=n("./src/streaming/vo/metrics/SchedulingInfo.js"),p=n("./src/core/EventBus.js"),m=n("./src/streaming/vo/metrics/RequestsQueue.js"),g=n("./src/core/events/Events.js"),v=n("./src/core/FactoryMaker.js");function y(e){var t,n,v=(e=e||{}).settings,y=this.context,_=Object(p.default)(y).getInstance();function b(){_.trigger(g.default.METRICS_CHANGED)}function T(e){_.trigger(g.default.METRIC_CHANGED,{mediaType:e}),b()}function E(e,t,n){_.trigger(g.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),T(e)}function S(e,t,n){_.trigger(g.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),T(e)}function w(e,t){var r=null;return e?(n.hasOwnProperty(e)?r=n[e]:t||(r=new a.default,n[e]=r),r):r}function A(e,t,n){var r=w(e);null!==r&&(r[t].push(n),r[t].length>v.get().streaming.metrics.maxListDepth&&r[t].shift())}function M(e,t,n){A(e,t,n),S(e,t,n)}return t={clearCurrentMetricsForType:function(e){delete n[e],T(e)},clearAllCurrentMetrics:function(){n={},b()},getMetricsFor:w,addHttpRequest:function e(t,n,r,a,s,u,l,c,d,f,h,p,m,g,v,y){var _=new o.HTTPRequest;u&&u!==a&&(e(t,null,r,a,s,null,null,c,d,null,null,null,m,null,null,y),_.actualurl=u),_.tcpid=n,_.type=r,_.url=a,_.range=c,_.trequest=d,_.tresponse=f,_.responsecode=p,_._tfinish=h,_._stream=t,_._mediaduration=m,_._quality=s,_._responseHeaders=g,_._serviceLocation=l,_._fileLoaderType=y,v?v.forEach((function(e){!function(e,t,n,r,i){var a=new o.HTTPRequestTrace;a.s=t,a.d=n,a.b=r,a._t=i,e.trace.push(a),e.interval||(e.interval=0),e.interval+=n}(_,e.s,e.d,e.b,e.t)})):(delete _.interval,delete _.trace),M(t,i.default.HTTP_REQUEST,_)},addRepresentationSwitch:function(e,t,n,r,a){var o=new s.default;o.t=t,o.mt=n,o.to=r,a?o.lto=a:delete o.lto,M(e,i.default.TRACK_SWITCH,o)},addBufferLevel:function(e,t,n){var r=new u.default;r.t=t,r.level=n,M(e,i.default.BUFFER_LEVEL,r)},addBufferState:function(e,t,n){var r=new l.default;r.target=n,r.state=t,M(e,i.default.BUFFER_STATE,r)},addDVRInfo:function(e,t,n,r){var a=new c.default;a.time=t,a.range=r,a.manifestInfo=n,M(e,i.default.DVR_INFO,a)},addDroppedFrames:function(e,t){var n=new d.default,r=w(e).DroppedFrames;t&&(n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,r.length>0&&r[r.length-1]==n||M(e,i.default.DROPPED_FRAMES,n))},addSchedulingInfo:function(e,t,n,r,a,o,s,u,l){var c=new h.default;c.mediaType=e,c.t=t,c.type=n,c.startTime=r,c.availabilityStartTime=a,c.duration=o,c.quality=s,c.range=u,c.state=l,M(e,i.default.SCHEDULING_INFO,c)},addRequestsQueue:function(e,t,n){var r=new m.default;r.loadingRequests=t,r.executedRequests=n,w(e).RequestsQueue=r,S(e,i.default.REQUESTS_QUEUE,r)},addManifestUpdate:function(e,t,n,a,o,s,u,l,c,d){var h=new f.ManifestUpdate;h.mediaType=e,h.type=t,h.requestTime=n,h.fetchTime=a,h.availabilityStartTime=o,h.presentationStartTime=s,h.clientTimeOffset=u,h.currentTime=l,h.buffered=c,h.latency=d,A(r.default.STREAM,i.default.MANIFEST_UPDATE,h),S(e,i.default.MANIFEST_UPDATE,h)},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];E(e.mediaType,i.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,r,a){if(e){var o=new f.ManifestUpdateStreamInfo;o.id=t,o.index=n,o.start=r,o.duration=a,e.streamInfo.push(o),E(e.mediaType,i.default.MANIFEST_UPDATE_STREAM_INFO,e)}},addManifestUpdateRepresentationInfo:function(e,t,n,r,a,o,s,u){if(e&&e.representationInfo){var l=new f.ManifestUpdateRepresentationInfo;l.id=t,l.index=n,l.streamIndex=r,l.mediaType=a,l.startNumber=s,l.fragmentInfoType=u,l.presentationTimeOffset=o,e.representationInfo.push(l),E(e.mediaType,i.default.MANIFEST_UPDATE_TRACK_INFO,e)}},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach((function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel})):delete e.trace,M(r.default.STREAM,i.default.PLAY_LIST,e)},addDVBErrors:function(e){M(r.default.STREAM,i.default.DVB_ERRORS,e)}},n={},t}y.__dashjs_factory_name="MetricsModel",t.default=v.default.getSingletonFactory(y)},"./src/streaming/models/URIFragmentModel.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/vo/URIFragmentData.js"),i=n("./src/core/FactoryMaker.js");function a(){var e;return{initialize:function(t){if(e=new r.default,!t)return null;var n=t.indexOf("#");if(-1!==n)for(var i=t.substr(n+1).split("&"),a=0,o=i.length;a<o;++a){var s=i[a],u=s.indexOf("=");if(-1!==u){var l=s.substring(0,u);e.hasOwnProperty(l)&&(e[l]=s.substr(u+1))}}},getURIFragmentData:function(){return e}}}a.__dashjs_factory_name="URIFragmentModel",t.default=i.default.getSingletonFactory(a)},"./src/streaming/models/VideoModel.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),o=n("./src/core/Debug.js"),s=n("./src/streaming/constants/Constants.js"),u=new Map([[s.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[s.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[s.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[s.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function l(){var e,t,n,r,l,c,d="element is not video or audio DOM type!",f=this.context,h=Object(i.default)(f).getInstance(),p=[];function m(){n&&(n.playbackRate=c||1,n.removeEventListener("canplay",m))}function g(){return p.length>0}function v(){if(n&&g()&&0===n.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),n.dispatchEvent(e)}}function y(e,t){n&&n.addEventListener(e,t)}function _(e,t){n&&n.removeEventListener(e,t)}function b(){return n?n.readyState:NaN}function T(){return n?n.buffered:null}function E(e,t,r,i,a){if(n)for(var o=0;o<n.textTracks.length;o++)if(n.textTracks[o].kind===e&&(!t||n.textTracks[o].label==t)&&n.textTracks[o].language===r&&n.textTracks[o].isTTML===i&&n.textTracks[o].isEmbedded===a)return n.textTracks[o];return null}function S(e,t){e===s.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||b()>=e?t():function(e,t){y(e,(function n(){_(e,n),t(e)}))}(u.get(e),t)}return e={initialize:function(){h.on(a.default.PLAYBACK_PLAYING,v,this)},setCurrentTime:function(e,t){r=e,S(s.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(function(){if(n){if(n.currentTime===r)return void(r=NaN);try{r=t?function(e){var t=T(),n=e,r=9999999999;if(t)for(var i=0;i<t.length;i++){var a=t.start(i),o=t.end(i),s=Math.abs(a-e),u=Math.abs(o-e);if(e>=a&&e<=o)return e;s<r&&(r=s,n=a),u<r&&(r=u,n=o)}return n}(r):r,n.currentTime=r,r=NaN}catch(e){0===n.readyState&&e.code===e.INVALID_STATE_ERR&&setTimeout((function(){n.currentTime=r,r=NaN}),400)}}}))},play:function(){if(n){n.autoplay=!0;var e=n.play();e&&e.catch&&"undefined"!=typeof Promise&&e.catch((function(e){"NotAllowedError"===e.name&&h.trigger(a.default.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing (".concat(e,")"))}))}},isPaused:function(){return n?n.paused:null},pause:function(){n&&(n.pause(),n.autoplay=!1)},isStalled:g,isSeeking:function(){return n?n.seeking||!isNaN(r):null},getTime:function(){return n?isNaN(r)?n.currentTime:r:null},getPlaybackRate:function(){return n?n.playbackRate:null},setPlaybackRate:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n&&(!t&&n.readyState<=2&&e>0?n.addEventListener("canplay",m):n.playbackRate=e)},getPlayedRanges:function(){return n?n.played:null},getEnded:function(){return n?n.ended:null},setStallState:function(e,t){!function(e,t){t?function(e){null!==e&&n&&!n.seeking&&-1===p.indexOf(e)&&p.push(e)}(e):function(e){var t=p.indexOf(e);null!==e&&-1!==t&&p.splice(t,1)}(e)}(e,t)},getElement:function(){return n},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw d;(n=e)&&(n.preload="auto")},setSource:function(e){n&&(e?n.src=e:(n.removeAttribute("src"),n.load()))},getSource:function(){return n?n.src:null},getTTMLRenderingDiv:function(){return l},setTTMLRenderingDiv:function(e){(l=e).style.position="absolute",l.style.display="flex",l.style.overflow="hidden",l.style.pointerEvents="none",l.style.top=0,l.style.left=0},getPlaybackQuality:function(){if(!n)return null;var e="webkitDroppedFrameCount"in n&&"webkitDecodedFrameCount"in n,t=null;return"getVideoPlaybackQuality"in n?t=n.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDroppedFrameCount+n.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:y,removeEventListener:_,getReadyState:b,getBufferRange:T,getClientWidth:function(){return n?n.clientWidth:NaN},getClientHeight:function(){return n?n.clientHeight:NaN},getTextTracks:function(){return n?n.textTracks:[]},getTextTrack:E,addTextTrack:function(e,t,r,i,a){if(!n)return null;var o=E(e,t,r,i,a);return o||((o=n.addTextTrack(e,t,r)).isEmbedded=a,o.isTTML=i),o},appendChild:function(e){n&&(n.appendChild(e),void 0!==e.isTTML&&(n.textTracks[n.textTracks.length-1].isTTML=e.isTTML,n.textTracks[n.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){n&&n.removeChild(e)},getVideoWidth:function(){return n?n.videoWidth:NaN},getVideoHeight:function(){return n?n.videoHeight:NaN},getVideoRelativeOffsetTop:function(){var e=n.parentNode.host||n.parentNode;return e?n.getBoundingClientRect().top-e.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){var e=n.parentNode.host||n.parentNode;return e?n.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN},waitForReadyState:S,reset:function(){h.off(a.default.PLAYBACK_PLAYING,v,this)}},t=Object(o.default)(f).getInstance().getLogger(e),r=NaN,e}l.__dashjs_factory_name="VideoModel",t.default=r.default.getSingletonFactory(l)},"./src/streaming/net/FetchLoader.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Settings.js"),a=n("./src/streaming/constants/Constants.js");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){e=e||{};var t,n=this.context,r=e.requestModifier,u=e.lowLatencyThroughputModel,l=e.boxParser,c=Object(i.default)(n).getInstance();function d(e,t){e.reader.read().then(t).catch((function(t){e.onerror&&200===e.response.status&&e.onerror(t)}))}function f(e,t){try{if((e=e.filter((function(n){return n.bytes>t/4/e.length}))).length>1){var n=0,r=(e[e.length-1].ts-e[0].ts)/e.length;return e.forEach((function(t,i){var a=e[i+1];if(a){var o=a.ts-t.ts;n+=o<r?o:0}})),n}return null}catch(e){return null}}return{load:function(e){var n,i=new Date,h=e.request,p=new Headers;if(h.range&&p.append("Range","bytes="+h.range),e.headers)for(var m in e.headers){var g=e.headers[m];g&&p.append(m,g)}h.requestStartDate||(h.requestStartDate=i),r&&r.modifyRequestHeader({setRequestHeader:function(e,t){p.append(e,t)}}),"function"==typeof window.AbortController&&(n=new AbortController,e.abortController=n,n.signal.onabort=e.onabort);var v={method:e.method,headers:p,credentials:e.withCredentials?"include":void 0,signal:n?n.signal:void 0},y=c.get().streaming.abr.fetchThroughputCalculationMode,_=Date.now(),b=0;new Promise((function(e){if(y===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&u&&(b=u.getThroughputCapacityDelayMS(h,1e3*t.getCurrentBufferLevel(h.mediaType))))return setTimeout(e,b);e()})).then((function(){var n=Date.now();fetch(e.url,v).then((function(r){e.response||(e.response={}),e.response.status=r.status,e.response.statusText=r.statusText,e.response.responseURL=r.url,r.ok||e.onerror();var i,c="",p=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}(r.headers.keys());try{for(p.s();!(i=p.n()).done;){var m=i.value;c+=m+": "+r.headers.get(m)+"\r\n"}}catch(e){p.e(e)}finally{p.f()}if(e.response.responseHeaders=c,!r.body)return r.arrayBuffer().then((function(t){e.response.response=t;var n={loaded:t.byteLength,total:t.byteLength,stream:!1};e.progress(n),e.onload(),e.onend()}));var g,v,T=parseInt(r.headers.get("Content-Length"),10),E=0,S=!1,w=new Uint8Array,A=0;if(y===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&u){var M=n,L=0,C=o(r.body.tee(),2),D=C[0],k=C[1];g=D.getReader(),v=[],g.read().then((function r(i){var a=i.value,o=i.done;if(L=Date.now(),a&&a.length){var s=L-M,l=a.length;v.push({chunkDownloadTimeRelativeMS:L-n,chunkDownloadDurationMS:s,chunkBytes:l,kbps:Math.round(8*l/(s/1e3)),bufferLevel:t.getCurrentBufferLevel(h.mediaType)})}if(o){var d=L-n,f=v.reduce((function(e,t){return e+t.chunkBytes}),0);return u.addMeasurement(h,d,v,_,b,c),void e.progress({loaded:f,total:f,lengthComputable:!0,time:u.getEstimatedDownloadDurationMS(h),stream:!0})}return M=Date.now(),g.read().then(r)})),e.reader=k.getReader()}else e.reader=r.body.getReader();var P=[],I=[],O=[],R=!0;d(e,(function t(n){var r=n.value;if(n.done){if(w){if(y!==a.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var i=null;y===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&(i=function(e,t){try{var n,r;n=e.filter((function(t,n){return n<e.length-1})),r=t.filter((function(e,n){return n<t.length-1}));var i=[];if(n.length>1){for(var a=0,o=0,s=0;s<n.length;s++)if(n[s]&&r[s]){var u=r[s].ts-n[s].ts;if(u>1)i.push(8*r[s].bytes/u);else{0===o&&(o=n[s].ts);var l=r[s].ts-o;l>1?(i.push(8*a/l),a=0,o=0):a+=r[s].bytes}}if(i.length>0)return i.reduce((function(e,t){return e+t}),0)/i.length}return null}catch(e){return null}}(I,O)),e.progress({loaded:E,total:isNaN(T)?E:T,lengthComputable:!0,time:f(P,E),throughput:i,stream:!0})}e.response.response=w.buffer}return e.onload(),void e.onend()}if(r&&r.length>0){w=function(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(w,r),E+=r.length,P.push({ts:Date.now(),bytes:r.length}),y===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&R&&l.findLastTopIsoBoxCompleted(["moof"],w,A).found&&(R=!1,I.push({ts:performance.now(),bytes:r.length}));var o=l.findLastTopIsoBoxCompleted(["moov","mdat"],w,A);if(o.found){var s,u=o.lastCompletedOffset+o.size;y!==a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||R||(R=!0,O.push({ts:performance.now(),bytes:w.length})),u===w.length?(s=w,w=new Uint8Array):(s=new Uint8Array(w.subarray(0,u)),w=w.subarray(u)),e.progress({data:s.buffer,lengthComputable:!1,noTrace:!0}),A=0}else A=o.lastCompletedOffset,S||(e.progress({lengthComputable:!1,noTrace:!0}),S=!0)}d(e,t)}))})).catch((function(t){e.onerror&&e.onerror(t)}))}))},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort()}catch(e){}},calculateDownloadedTime:f,setup:function(e){t=e.dashMetrics}}}l.__dashjs_factory_name="FetchLoader";var c=r.default.getClassFactory(l);t.default=c},"./src/streaming/net/HTTPLoader.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/net/XHRLoader.js"),i=n("./src/streaming/net/FetchLoader.js"),a=n("./src/streaming/vo/metrics/HTTPRequest.js"),o=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/vo/DashJSError.js"),u=n("./src/streaming/models/CmcdModel.js"),l=n("./src/core/Utils.js"),c=n("./src/core/Debug.js"),d=n("./src/core/EventBus.js"),f=n("./src/core/events/Events.js"),h=n("./src/core/Settings.js"),p=n("./src/streaming/constants/Constants.js"),m=n("./src/streaming/models/LowLatencyThroughputModel.js"),g=n("./src/streaming/models/CustomParametersModel.js");function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){e=e||{};var t,n,o,y,_,b,T,E,S,w,A=this.context,M=e.errHandler,L=e.dashMetrics,C=e.mediaPlayerModel,D=e.requestModifier,k=e.boxParser,P=e.errors,I=e.requestTimeout||0,O=Object(d.default)(A).getInstance(),R=Object(h.default)(A).getInstance();function x(e,t){var u,c=e.request,d=[],h=!0,m=!0,g=new Date,v=g,w=0,P=null;if(!D||!L||!M)throw new Error("config object is not correct or missing");var N,j=function(e){if(m=!1,c.requestStartDate=g,c.requestEndDate=new Date,c.firstByteDate=c.firstByteDate||g,c.fileLoaderType=P,!c.checkExistenceOnly){var t=u.response?u.response.responseURL:null,n=u.response?u.response.status:null,r=u.response&&u.response.getAllResponseHeaders?u.response.getAllResponseHeaders():u.response?u.response.responseHeaders:[];L.addHttpRequest(c,t,n,r,e?d:null),c.type===a.HTTPRequest.MPD_TYPE&&L.addManifestUpdate(c)}},F=function(){if(-1!==n.indexOf(u)&&(n.splice(n.indexOf(u),1),m))if(j(!1),t>0){try{R.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&c.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE&&C.getRetryAttemptsForType(a.HTTPRequest.MEDIA_SEGMENT_TYPE)===t&&O.trigger(f.default.ATTEMPT_BACKGROUND_SYNC)}catch(e){}t--;var r={config:e};y.push(r),r.timeout=setTimeout((function(){-1!==y.indexOf(r)&&(y.splice(y.indexOf(r),1),x(e,t))}),C.getRetryIntervalsForType(c.type))}else{if(c.type===a.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;M.error(new s.default(_[c.type],c.url+" is not available",{request:c,response:u.response})),e.error&&e.error(c,"error",u.response.statusText),e.complete&&e.complete(c,u.response.statusText)}};c.hasOwnProperty("availabilityTimeComplete")&&!1===c.availabilityTimeComplete&&window.fetch&&"arraybuffer"===c.responseType&&c.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE?((N=Object(i.default)(A).create({requestModifier:D,lowLatencyThroughputModel:E,boxParser:k})).setup({dashMetrics:L}),P=p.default.FILE_LOADER_TYPES.FETCH):(N=Object(r.default)(A).create({requestModifier:D}),P=p.default.FILE_LOADER_TYPES.XHR);var U=null,B=D.modifyRequestURL(c.url);if(R.get().streaming.cmcd&&R.get().streaming.cmcd.enabled){var Y=R.get().streaming.cmcd.mode;if(Y===p.default.CMCD_MODE_QUERY){var H=function(e){try{var t=[],n=b.getQueryParameter(e);return n&&t.push(n),t}catch(e){return[]}}(c);B=l.default.addAditionalQueryParameterToUrl(B,H)}else Y===p.default.CMCD_MODE_HEADER&&(U=b.getHeaderParameters(c))}c.url=B;var V=c.checkExistenceOnly?a.HTTPRequest.HEAD:a.HTTPRequest.GET,G=T.getXHRWithCredentialsForType(c.type);u={url:B,method:V,withCredentials:G,request:c,onload:function(){u.response.status>=200&&u.response.status<=299&&(j(!0),e.success&&e.success(u.response.response,u.response.statusText,u.response.responseURL),e.complete&&e.complete(c,u.response.statusText))},onend:F,onerror:F,progress:function(t){var n=new Date;h&&(h=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(c.firstByteDate=n)),t.lengthComputable&&(c.bytesLoaded=t.loaded,c.bytesTotal=t.total),t.noTrace||(d.push({s:v,d:t.time?t.time:n.getTime()-v.getTime(),b:[t.loaded?t.loaded-w:0],t:t.throughput}),v=n,w=t.loaded),e.progress&&t&&e.progress(t)},onabort:function(){e.abort&&e.abort(c)},ontimeout:function(e){var t;if(e.lengthComputable){var n=e.loaded/e.total*100;t="Request timeout: loaded: "+e.loaded+", out of: "+e.total+" : "+n.toFixed(3)+"% Completed"}else t="Request timeout: non-computable download size";S.warn(t)},loader:N,timeout:I,headers:U};var K=(new Date).getTime();if(isNaN(c.delayLoadingTime)||K>=c.delayLoadingTime)n.push(u),N.load(u);else{var W={httpRequest:u};o.push(W),W.delayTimeout=setTimeout((function(){if(-1!==o.indexOf(W)){o.splice(o.indexOf(W),1);try{g=new Date,v=g,n.push(W.httpRequest),N.load(W.httpRequest)}catch(e){W.httpRequest.onerror()}}}),c.delayLoadingTime-K)}}return t={load:function(e){e.request?x(e,C.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){y.forEach((function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)})),y=[],o.forEach((function(e){return clearTimeout(e.delayTimeout)})),o=[],n.forEach((function(e){e.request.type!==a.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e))})),n=[]}},S=Object(c.default)(A).getInstance().getLogger(t),n=[],o=[],y=[],b=Object(u.default)(A).getInstance(),E=Object(m.default)(A).getInstance(),T=Object(g.default)(A).getInstance(),v(w={},a.HTTPRequest.MPD_TYPE,P.DOWNLOAD_ERROR_ID_MANIFEST_CODE),v(w,a.HTTPRequest.XLINK_EXPANSION_TYPE,P.DOWNLOAD_ERROR_ID_XLINK_CODE),v(w,a.HTTPRequest.INIT_SEGMENT_TYPE,P.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),v(w,a.HTTPRequest.MEDIA_SEGMENT_TYPE,P.DOWNLOAD_ERROR_ID_CONTENT_CODE),v(w,a.HTTPRequest.INDEX_SEGMENT_TYPE,P.DOWNLOAD_ERROR_ID_CONTENT_CODE),v(w,a.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,P.DOWNLOAD_ERROR_ID_CONTENT_CODE),v(w,a.HTTPRequest.OTHER_TYPE,P.DOWNLOAD_ERROR_ID_CONTENT_CODE),_=w,t}y.__dashjs_factory_name="HTTPLoader";var _=o.default.getClassFactory(y);t.default=_},"./src/streaming/net/SchemeLoaderFactory.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/net/HTTPLoader.js");function a(){var e;function t(){e={}}function n(){t()}return n(),{getLoader:function(t){for(var n in e)if(e.hasOwnProperty(n)&&t.startsWith(n))return e[n];return i.default},registerLoader:function(t,n){e[t]=n},unregisterLoader:function(t){e[t]&&delete e[t]},unregisterAllLoader:t,reset:n}}a.__dashjs_factory_name="SchemeLoaderFactory";var o=r.default.getSingletonFactory(a);t.default=o},"./src/streaming/net/URLLoader.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/net/SchemeLoaderFactory.js");function a(e){e=e||{};var t,n,r=this.context;return t=Object(i.default)(r).getInstance(),{load:function(i){if(!n){var a=t.getLoader(i&&i.request?i.request.url:null);n=a(r).create({errHandler:e.errHandler,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,dashMetrics:e.dashMetrics,boxParser:e.boxParser?e.boxParser:null,constants:e.constants?e.constants:null,dashConstants:e.dashConstants?e.dashConstants:null,urlUtils:e.urlUtils?e.urlUtils:null,requestTimeout:isNaN(e.requestTimeout)?0:e.requestTimeout,errors:e.errors})}n.load(i)},abort:function(){n&&n.abort()}}}a.__dashjs_factory_name="URLLoader";var o=r.default.getClassFactory(a);t.default=o},"./src/streaming/net/XHRLoader.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){var t=(e=e||{}).requestModifier;return{load:function(e){var n=new Date,r=e.request,i=new XMLHttpRequest;if(i.open(e.method,e.url,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=n),t&&(i=t.modifyRequestHeader(i)),e.headers)for(var a in e.headers){var o=e.headers[a];o&&i.setRequestHeader(a,o)}i.withCredentials=e.withCredentials,i.onload=e.onload,i.onloadend=e.onend,i.onerror=e.onerror,i.onprogress=e.progress,i.onabort=e.onabort,i.ontimeout=e.ontimeout,i.timeout=e.timeout,i.send(),e.response=i},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}}}i.__dashjs_factory_name="XHRLoader";var a=r.default.getClassFactory(i);t.default=a},"./src/streaming/protection/CommonEncryption.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"!==r.schemeIdUri.toLowerCase()||"cenc"!==r.value.toLowerCase()&&"cbcs"!==r.value.toLowerCase()||(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,n){var r=e.parsePSSHList(n);return t&&r.hasOwnProperty(t.uuid.toLowerCase())?r[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),n={},r=0;;){var i,a,o=void 0,s=r;if(r>=t.buffer.byteLength)break;if(i=r+t.getUint32(r),r+=4,1886614376===t.getUint32(r))if(r+=4,0===(a=t.getUint8(r))||1===a){r++,r+=3,o="";var u=void 0,l=void 0;for(u=0;u<4;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=4,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<6;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;r+=6,r+=4,n[o=o.toLowerCase()]=t.buffer.slice(s,i),r=i}else r=i;else r=i}return n}},{key:"getLicenseServerUrlFromMediaInfo",value:function(e,t){try{if(!e||0===e.length)return null;for(var n=0,r=null;n<e.length&&!r;){var a=e[n];if(a&&a.contentProtection&&a.contentProtection.length>0){var o=a.contentProtection.filter((function(e){return e.schemeIdUri&&e.schemeIdUri===t}));if(o&&o.length>0)for(var s=0;s<o.length&&!r;){for(var u=o[s],l=0;l<i.attributes.length&&!r;){for(var c=0,d=i.attributes[l];c<i.prefixes.length&&!r;){var f=i.prefixes[c];u[d]&&u[d].__prefix&&u[d].__prefix===f&&u[d].__text&&(r=u[d].__text),c+=1}l+=1}s+=1}}n+=1}return r}catch(e){return null}}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}();t.default=a},"./src/streaming/protection/Protection.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/protection/controllers/ProtectionController.js"),i=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),a=n("./src/streaming/protection/ProtectionEvents.js"),o=n("./src/streaming/protection/errors/ProtectionErrors.js"),s=n("./src/streaming/protection/models/ProtectionModel_21Jan2015.js"),u=n("./src/streaming/protection/models/ProtectionModel_3Feb2014.js"),l=n("./src/streaming/protection/models/ProtectionModel_01b.js"),c=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],d=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function f(){var e,t=this.context;function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}return e={createProtectionSystem:function(a){var o=null,f=Object(i.default)(t).getInstance();f.setConfig({debug:a.debug,BASE64:a.BASE64,settings:a.settings}),f.initialize();var h=function(r){var i=r.debug,a=i.getLogger(e),o=r.eventBus,f=r.errHandler,h=r.videoModel?r.videoModel.getElement():null;return h&&void 0===h.onencrypted||h&&void 0===h.mediaKeys?n(h,d)?(a.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Object(u.default)(t).create({debug:i,eventBus:o,events:r.events,api:n(h,d)})):n(h,c)?(a.info("EME detected on this user agent! (ProtectionModel_01b)"),Object(l.default)(t).create({debug:i,eventBus:o,errHandler:f,events:r.events,api:n(h,c)})):(a.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(a.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Object(s.default)(t).create({debug:i,eventBus:o,events:r.events}))}(a);return!o&&h&&(o=Object(r.default)(t).create({protectionModel:h,protectionKeyController:f,eventBus:a.eventBus,debug:a.debug,events:a.events,BASE64:a.BASE64,constants:a.constants,cmcdModel:a.cmcdModel,customParametersModel:a.customParametersModel,settings:a.settings}),a.capabilities.setEncryptedMediaSupported(!0)),o}}}f.__dashjs_factory_name="Protection";var h=dashjs.FactoryMaker.getClassFactory(f);h.events=a.default,h.errors=o.default,dashjs.FactoryMaker.updateClassFactory(f.__dashjs_factory_name,h),t.default=h},"./src/streaming/protection/ProtectionEvents.js":function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var u=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=a(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",e.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",e.KEY_ADDED="public_keyAdded",e.KEY_ERROR="public_keyError",e.KEY_MESSAGE="public_keyMessage",e.KEY_SESSION_CLOSED="public_keySessionClosed",e.KEY_SESSION_CREATED="public_keySessionCreated",e.KEY_SESSION_REMOVED="public_keySessionRemoved",e.KEY_STATUSES_CHANGED="public_keyStatusesChanged",e.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",e.KEY_SYSTEM_SELECTED="public_keySystemSelected",e.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",e.LICENSE_REQUEST_SENDING="public_licenseRequestSending",e.NEED_KEY="needkey",e.PROTECTION_CREATED="public_protectioncreated",e.PROTECTION_DESTROYED="public_protectiondestroyed",e.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",e.TEARDOWN_COMPLETE="protectionTeardownComplete",e.VIDEO_ELEMENT_SELECTED="videoElementSelected",e.KEY_SESSION_UPDATED="public_keySessionUpdated",e}return n}(n("./src/core/events/EventsBase.js").default));t.default=u},"./src/streaming/protection/controllers/ProtectionController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/protection/vo/MediaCapability.js"),a=n("./src/streaming/protection/vo/KeySystemConfiguration.js"),o=n("./src/streaming/protection/errors/ProtectionErrors.js"),s=n("./src/streaming/vo/DashJSError.js"),u=n("./src/streaming/protection/vo/LicenseRequest.js"),l=n("./src/streaming/protection/vo/LicenseResponse.js"),c=n("./src/streaming/vo/metrics/HTTPRequest.js"),d=n("./src/core/Utils.js"),f=n("./src/streaming/constants/Constants.js"),h=n("./src/core/FactoryMaker.js"),p=n("./src/streaming/constants/ProtectionConstants.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=5,v=500,y=3,_=1e3,b=8e3;function T(e){var t,n,h,T,E,S,w,A,M,L,C,D=(e=e||{}).protectionKeyController,k=e.protectionModel,P=e.eventBus,I=e.events,O=e.debug,R=e.BASE64,x=e.constants,N=[],j=e.cmcdModel,F=e.settings,U=e.customParametersModel;function B(){if(!(P&&P.hasOwnProperty("on")&&D&&D.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function Y(e,t){M?h.push(e):A?A&&function(e){var t=e.findIndex((function(e){return e.ks===A})),n=e[t];-1!==t&&n.initData&&H(n)}(e):function(e,t){M=!0;var r,i=[];e=e.sort((function(t,n){return(E&&E[t.ks.systemString]&&E[t.ks.systemString].priority>=0?E[t.ks.systemString].priority:e.length)-(E&&E[n.ks.systemString]&&E[n.ks.systemString].priority>=0?E[n.ks.systemString].priority:e.length)})),h.push(e);for(var a=0;a<e.length;a++){var u=X(e[a]);i.push({ks:e[a].ks,configs:[u],protData:e[a].protData})}k.requestKeySystemAccess(i).then((function(e){var t=(r=e.data).mksa&&r.mksa.selectedSystemString?r.mksa.selectedSystemString:r.keySystem.systemString;return n.info("DRM: KeySystem Access Granted for system string ("+t+")!  Selecting key system..."),k.selectKeySystem(r)})).then((function(e){if(A=e,M=!1,k){P.trigger(I.KEY_SYSTEM_SELECTED,{data:r});var t,n=W(A);n&&n.serverCertificate&&n.serverCertificate.length>0&&k.setServerCertificate(R.decodeArray(n.serverCertificate).buffer);for(var i=0;i<h.length;i++)for(t=0;t<h[i].length;t++)if(A===h[i][t].ks){H(h[i][t]);break}}})).catch((function(e){A=null,M=!1,t||P.trigger(I.KEY_SYSTEM_SELECTED,{data:null,error:new s.default(o.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,o.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+e.error)})}))}(e,t)}function H(e){if(D.isClearKey(A)&&e.protData&&e.protData.hasOwnProperty("clearkeys")){var t={kids:Object.keys(e.protData.clearkeys)};e.initData=(new TextEncoder).encode(JSON.stringify(t))}e.sessionId?V(e):null!==e.initData&&G(e)}function V(e){B(),k.loadKeySession(e)}function G(e){var t=r.default.getPSSHForKeySystem(A,e?e.initData:null);if(F.get().streaming.protection.downgradePlayReadyPSSH&&e&&e.ks.systemString===p.default.PLAYREADY_KEYSTEM_STRING&&(t&&(t=K(t)),e&&e.initData&&(e.initData=K(e.initData))),t){if(function(e){if(!e)return!1;try{for(var t=k.getSessions(),n=0;n<t.length;n++)if(t[n].getKeyId()===e)return!0;return!1}catch(e){return!1}}(e.keyId))return;if(q(t))return;try{e.initData=t,k.createKeySession(e)}catch(e){P.trigger(I.KEY_SESSION_CREATED,{data:null,error:new s.default(o.default.KEY_SESSION_CREATED_ERROR_CODE,o.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e&&e.initData?k.createKeySession(e):P.trigger(I.KEY_SESSION_CREATED,{data:null,error:new s.default(o.default.KEY_SESSION_CREATED_ERROR_CODE,o.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(A?A.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function K(e){try{var t=new DataView(e);if(1886614376!==t.getUint32(4))throw new Error("initData is not PlayReady PSSH");if(t.getUint8(8)>0){var r=4+16*t.getUint32(28),i=e.byteLength-r;t.setUint32(0,i),t.setUint8(8,0);var a=new Uint8Array(e),o=new Uint8Array(i);return o.set(a.subarray(0,28)),o.set(a.subarray(28+r),28),n.info("PlayReady PSSH downgraded to version 0"),o.buffer}}catch(e){n.warn("Failed to downgrade PlayReady PSSH! "+e.message)}return e}function W(e){if(e){var t=e.systemString;if(E)return t in E?E[t]:null}return null}function q(e){if(!e)return!1;try{for(var t=k.getAllInitData(),r=0;r<t.length;r++)if(D.initDataEquals(e,t[r]))return n.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(e){return!1}}function z(e){B(),e?(k.setMediaElement(e),P.on(I.NEED_KEY,re,t)):null===e&&(k.setMediaElement(e),P.off(I.NEED_KEY,re,t))}function X(e){var t=e.protData,n=[],r=[],o=t&&t.audioRobustness&&t.audioRobustness.length>0?t.audioRobustness:w,s=t&&t.videoRobustness&&t.videoRobustness.length>0?t.videoRobustness:w,u=e.sessionType,l=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",c=t&&t.persistentState?t.persistentState:"temporary"===u?"optional":"required";return T.forEach((function(e){e.type===x.AUDIO?n.push(new i.default(e.codec,o)):e.type===x.VIDEO&&r.push(new i.default(e.codec,s))})),new a.default(n,r,l,c,[u])}function Q(e){e.error?P.trigger(I.KEY_STATUSES_CHANGED,{data:null,error:e.error}):n.debug("DRM: key status = "+e.status)}function $(e){n.debug("DRM: onKeyMessage");var t=e.data;P.trigger(I.KEY_MESSAGE,{data:t});var i=t.messageType?t.messageType:"license-request",a=t.message,h=t.sessionToken,p=W(A),g=D.getLicenseServerModelInstance(A,p,i),v={sessionToken:h,messageType:i};if(a&&0!==a.byteLength){if(!g)return n.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+h.getSessionId()),void J(v);if(D.isClearKey(A)){var E=D.processClearKeyLicenseRequest(A,p,a);if(E)return n.debug("DRM: ClearKey license request handled by application!"),J(v),void k.updateKeySession(h,E)}!function(e,t,i){var a=e.sessionToken,h=e.messageType?e.messageType:"license-request",p={sessionToken:a,messageType:h},g=A?A.systemString:null,v=function(e,t,n,i,a){var o=null,s=i.message;if(e&&e.serverURL){var u=e.serverURL;"string"==typeof u&&""!==u?o=u:"object"===m(u)&&u.hasOwnProperty(t)&&(o=u[t])}else if(e&&e.laURL&&""!==e.laURL)o=e.laURL;else if(!(o=r.default.getLicenseServerUrlFromMediaInfo(T,A.schemeIdURI))&&!D.isClearKey(A)){var l=r.default.getPSSHData(n.initData);(o=A.getLicenseServerURLFromInitData(l))||(o=i.laURL)}return o=a.getServerURLFromMessage(o,s,t)}(i,h,a,e,t);if(v){var E={},S=!1;i&&ee(E,i.httpRequestHeaders);var w=e.message,M=A.getRequestHeadersFromMessage(w);ee(E,M),Object.keys(E).forEach((function(e){"authorization"===e.toLowerCase()&&(S=!0)})),i&&"boolean"==typeof i.withCredentials&&(S=i.withCredentials);var O=function(e){if(k)if(e.status>=200&&e.status<=299){var n=d.default.parseHttpHeaders(e.getAllResponseHeaders?e.getAllResponseHeaders():null),r=new l.default(e.responseURL,n,e.response);ne(U.getLicenseResponseFilters(),r).then((function(){var n=t.getLicenseMessage(r.data,g,h);null!==n?(J(p),k.updateKeySession(a,n)):te(e,p,g,h,t)}))}else te(e,p,g,h,t)},R=function(e){J(p,new s.default(o.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,o.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+g+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},x=function(e){J(p,new s.default(o.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,o.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+g+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},N=A.getLicenseRequestFromMessage(w),B=t.getHTTPMethod(h),Y=t.getResponseType(g,h),H=i&&!isNaN(i.httpTimeout)?i.httpTimeout:b,V=a.getSessionId()||null,G=new u.default(v,B,Y,E,S,h,V,N),K=isNaN(F.get().streaming.retryAttempts[c.HTTPRequest.LICENSE])?y:F.get().streaming.retryAttempts[c.HTTPRequest.LICENSE];ne(U.getLicenseRequestFilters(),G).then((function(){!function e(t,r,i,a,o,s){var u=new XMLHttpRequest;if(F.get().streaming.cmcd&&F.get().streaming.cmcd.enabled&&F.get().streaming.cmcd.mode===f.default.CMCD_MODE_QUERY){var l=j.getQueryParameter({url:t.url,type:c.HTTPRequest.LICENSE});l&&(t.url=d.default.addAditionalQueryParameterToUrl(t.url,[l]))}for(var h in u.open(t.method,t.url,!0),u.responseType=t.responseType,u.withCredentials=t.withCredentials,i>0&&(u.timeout=i),t.headers)u.setRequestHeader(h,t.headers[h]);if(F.get().streaming.cmcd&&F.get().streaming.cmcd.enabled&&F.get().streaming.cmcd.mode===f.default.CMCD_MODE_HEADER){var p=j.getHeaderParameters({url:t.url,type:c.HTTPRequest.LICENSE});if(p)for(var m in p){var g=p[m];g&&u.setRequestHeader(m,g)}}var v=function(){r--;var n=isNaN(F.get().streaming.retryIntervals[c.HTTPRequest.LICENSE])?_:F.get().streaming.retryIntervals[c.HTTPRequest.LICENSE];C=setTimeout((function(){e(t,r,i,a,o,s)}),n)};u.onload=function(){L=null,this.status>=200&&this.status<=299||r<=0?a(this):(n.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+r),v())},u.ontimeout=u.onerror=function(){L=null,r<=0?s(this):(n.warn("License request network request failed . Retrying it... Pending retries: "+r),v())},u.onabort=function(){o(this)},P.trigger(I.LICENSE_REQUEST_SENDING,{url:t.url,headers:t.headers,payload:t.data,sessionId:t.sessionId}),L=u,u.send(t.data)}(G,K,H,O,R,x)}))}else J(p,new s.default(o.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,o.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}(t,g,p)}else J(v,new s.default(o.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,o.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function J(e,t){P.trigger(I.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function Z(){L&&(L.onloadend=L.onerror=L.onprogress=void 0,L.abort(),L=null),C&&(clearTimeout(C),C=null)}function ee(e,t){if(t)for(var n in t)e[n]=t[n]}function te(e,t,n,r,i){var a=e.response?i.getErrorResponse(e.response,n,r):"NONE";J(t,new s.default(o.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,o.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+a))}function ne(e,t){return e?e.reduce((function(e,n){return e.then((function(){return n(t)}))}),Promise.resolve()):Promise.resolve()}function re(e,t){if(!F.get().streaming.protection.ignoreEmeEncryptedEvent){if(n.debug("DRM: onNeedKey"),"cenc"!==e.key.initDataType)return void n.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);if(0===T.length&&(n.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<g))return void N.push(setTimeout((function(){re(e,t)}),v));var i=e.key.initData;if(ArrayBuffer.isView(i)&&(i=i.buffer),A){var a=r.default.getPSSHForKeySystem(A,i);if(a&&q(a))return}n.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(i)));var o=D.getSupportedKeySystemsFromSegmentPssh(i,E,S);if(0===o.length)return void n.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");Y(o,!1)}}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");B(),T.push(e);var t=D.getSupportedKeySystemsFromContentProtection(e.contentProtection,E,S);t&&t.length>0&&Y(t,!0)},clearMediaInfoArray:function(){T=[]},createKeySession:G,loadKeySession:V,removeKeySession:function(e){B(),k.removeKeySession(e)},closeKeySession:function(e){B(),k.closeKeySession(e)},setServerCertificate:function(e){B(),k.setServerCertificate(e)},setMediaElement:z,setSessionType:function(e){S=e},setRobustnessLevel:function(e){w=e},setProtectionData:function(e){E=e,D.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return B(),D.getSupportedKeySystemsFromContentProtection(e,E,S)},getKeySystems:function(){return D?D.getKeySystems():[]},setKeySystems:function(e){D&&D.setKeySystems(e)},stop:function(){Z(),k&&k.stop()},reset:function(){P.off(I.INTERNAL_KEY_MESSAGE,$,t),P.off(I.INTERNAL_KEY_STATUS_CHANGED,Q,t),B(),Z(),z(null),A=null,M=!1,k&&(k.reset(),k=null),N.forEach((function(e){return clearTimeout(e)})),N=[],T=[],h=[]}},n=O.getLogger(t),h=[],T=[],S="temporary",w="",L=null,C=null,P.on(I.INTERNAL_KEY_MESSAGE,$,t),P.on(I.INTERNAL_KEY_STATUS_CHANGED,Q,t),t}T.__dashjs_factory_name="ProtectionController",t.default=h.default.getClassFactory(T)},"./src/streaming/protection/controllers/ProtectionKeyController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/protection/drm/KeySystemClearKey.js"),a=n("./src/streaming/protection/drm/KeySystemW3CClearKey.js"),o=n("./src/streaming/protection/drm/KeySystemWidevine.js"),s=n("./src/streaming/protection/drm/KeySystemPlayReady.js"),u=n("./src/streaming/protection/servers/DRMToday.js"),l=n("./src/streaming/protection/servers/PlayReady.js"),c=n("./src/streaming/protection/servers/Widevine.js"),d=n("./src/streaming/protection/servers/ClearKey.js"),f=n("./src/streaming/constants/ProtectionConstants.js");function h(){var e,t,n,h,p,m,g,v,y=this.context;function _(e,t){return t&&e in t?t[e]:null}function b(e,t){return e&&e.sessionId?e.sessionId:t&&t.sessionId?t.sessionId:null}function T(e,t){return e&&e.sessionType?e.sessionType:t}return e={initialize:function(){var e;h=[],e=Object(s.default)(y).getInstance({BASE64:p,settings:m}),h.push(e),e=Object(o.default)(y).getInstance({BASE64:p}),h.push(e),e=Object(i.default)(y).getInstance({BASE64:p}),h.push(e),g=e,e=Object(a.default)(y).getInstance({BASE64:p,debug:t}),h.push(e),v=e},setProtectionData:function(e){for(var t,n,r=0;r<h.length;r++){var i=h[r];i.hasOwnProperty("init")&&i.init((t=i.systemString,n=void 0,n=null,e&&(n=t in e?e[t]:null),n))}},isClearKey:function(e){return e===g||e===v},initDataEquals:function(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1},getKeySystems:function(){return h},setKeySystems:function(e){h=e},getKeySystemBySystemString:function(e){for(var t=0;t<h.length;t++)if(h[t].systemString===e)return h[t];return null},getSupportedKeySystemsFromContentProtection:function(e,t,n){var i,a,o,s,u=[];if(e){var l=r.default.findCencContentProtection(e);for(o=0;o<h.length;++o){var c=_((a=h[o]).systemString,t);for(s=0;s<e.length;++s)if((i=e[s]).schemeIdUri.toLowerCase()===a.schemeIdURI){var d=a.getInitData(i,l);u.push({ks:h[o],keyId:i.keyId,initData:d,protData:c,cdmData:a.getCDMData(c?c.cdmData:null),sessionId:b(c,i),sessionType:T(c,n)})}}}return u},getSupportedKeySystemsFromSegmentPssh:function(e,t,n){for(var i,a=[],o=r.default.parsePSSHList(e),s=0;s<h.length;++s){var u=_((i=h[s]).systemString,t);i.uuid in o&&a.push({ks:i,initData:o[i.uuid],protData:u,cdmData:i.getCDMData(u?u.cdmData:null),sessionId:b(u),sessionType:T(u,n)})}return a},getLicenseServerModelInstance:function(e,t,n){if("license-release"===n||"individualization-request"===n)return null;var r=null;return t&&t.hasOwnProperty("drmtoday")?r=Object(u.default)(y).getInstance({BASE64:p}):e.systemString===f.default.WIDEVINE_KEYSTEM_STRING?r=Object(c.default)(y).getInstance():e.systemString===f.default.PLAYREADY_KEYSTEM_STRING?r=Object(l.default)(y).getInstance():e.systemString===f.default.CLEARKEY_KEYSTEM_STRING&&(r=Object(d.default)(y).getInstance()),r},processClearKeyLicenseRequest:function(e,t,r){try{return e.getClearKeysFromProtectionData(t,r)}catch(e){return n.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(r){r&&(r.debug&&(t=r.debug,n=t.getLogger(e)),r.BASE64&&(p=r.BASE64),r.settings&&(m=r.settings))}}}h.__dashjs_factory_name="ProtectionKeyController",t.default=dashjs.FactoryMaker.getSingletonFactory(h)},"./src/streaming/protection/drm/KeySystemClearKey.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/protection/vo/KeyPair.js"),i=n("./src/streaming/protection/vo/ClearKeyKeySet.js"),a=n("./src/streaming/protection/CommonEncryption.js"),o=n("./src/streaming/constants/ProtectionConstants.js"),s="e2719d58-a985-b3c9-781a-b030af78d30e",u=o.default.CLEARKEY_KEYSTEM_STRING,l="urn:uuid:"+s;function c(e){var t=(e=e||{}).BASE64;return{uuid:s,schemeIdURI:l,systemString:u,getInitData:function(e,n){try{var r=a.default.parseInitDataFromContentProtection(e,t);if(!r&&n){var i={kids:[function(e){try{var t=e.replace(/-/g,"");return(t=btoa(t.match(/\w{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""))).replace(/=/g,"")}catch(e){return null}}(n["cenc:default_KID"])]};r=(new TextEncoder).encode(JSON.stringify(i))}return r}catch(e){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),o=[],s=0;s<a.kids.length;s++){var u=a.kids[s],l=e.clearkeys&&e.clearkeys.hasOwnProperty(u)?e.clearkeys[u]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");o.push(new r.default(u,l))}n=new i.default(o)}return n}}}c.__dashjs_factory_name="KeySystemClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(c)},"./src/streaming/protection/drm/KeySystemPlayReady.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/constants/ProtectionConstants.js"),a="9a04f079-9840-4286-ab92-e65be0885f95",o=i.default.PLAYREADY_KEYSTEM_STRING,s="urn:uuid:"+a,u='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>';function l(e){var t="utf-16",n=(e=e||{}).BASE64,i=e.settings;function l(){if(!n||!n.hasOwnProperty("decodeArray")||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:a,schemeIdURI:s,systemString:o,getInitData:function(e){var t,i,a,o,s,u=new Uint8Array([112,115,115,104,0,0,0,0]),c=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),d=0,f=null;if(l(),!e)return null;if("pssh"in e)return r.default.parseInitDataFromContentProtection(e,n);if("pro"in e)f=n.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;f=n.decodeArray(e.prheader.__text)}return t=f.length,i=4+u.length+c.length+4+t,a=new ArrayBuffer(i),o=new Uint8Array(a),(s=new DataView(a)).setUint32(d,i),d+=4,o.set(u,d),d+=u.length,o.set(c,d),d+=c.length,s.setUint32(d,t),d+=4,o.set(f,d),d+=t,o.buffer},getRequestHeadersFromMessage:function(e){var n,r,a={},o=new DOMParser;if(i&&i.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===t&&e&&e.byteLength%2==1)return a["Content-Type"]="text/xml; charset=utf-8",a;var s="utf-16"===t?new Uint16Array(e):new Uint8Array(e);n=String.fromCharCode.apply(null,s);for(var u=(r=o.parseFromString(n,"application/xml")).getElementsByTagName("name"),l=r.getElementsByTagName("value"),c=0;c<u.length;c++)a[u[c].childNodes[0].nodeValue]=l[c].childNodes[0].nodeValue;return a.hasOwnProperty("Content")&&(a["Content-Type"]=a.Content,delete a.Content),a.hasOwnProperty("Content-Type")||(a["Content-Type"]="text/xml; charset=utf-8"),a},getLicenseRequestFromMessage:function(e){var r=null,a=new DOMParser;if(i&&i.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===t&&e&&e.byteLength%2==1)return e;var o="utf-16"===t?new Uint16Array(e):new Uint8Array(e);l();var s=String.fromCharCode.apply(null,o),u=a.parseFromString(s,"application/xml");if(!u.getElementsByTagName("PlayReadyKeyMessage")[0])return e;var c=u.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return c&&(r=n.decode(c)),r},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,a=0;a<n;a++){var o=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===o){var u=e.slice(r,r+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),c=i.parseFromString(l,"application/xml");if(c.getElementsByTagName("LA_URL")[0]){var d=c.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(d)return d}if(c.getElementsByTagName("LUI_URL")[0]){var f=c.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(f)return f}}else r+=s}return null},getCDMData:function(e){var t,r,i,a;if(l(),!e)return null;for(t=[],a=0;a<e.length;++a)t.push(e.charCodeAt(a)),t.push(0);for(t=String.fromCharCode.apply(null,t),t=n.encode(t),r=u.replace("%CUSTOMDATA%",t),i=[],a=0;a<r.length;++a)i.push(r.charCodeAt(a)),i.push(0);return new Uint8Array(i).buffer},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');t=e}}}l.__dashjs_factory_name="KeySystemPlayReady",t.default=dashjs.FactoryMaker.getSingletonFactory(l)},"./src/streaming/protection/drm/KeySystemW3CClearKey.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/protection/vo/KeyPair.js"),i=n("./src/streaming/protection/vo/ClearKeyKeySet.js"),a=n("./src/streaming/protection/CommonEncryption.js"),o=n("./src/streaming/constants/ProtectionConstants.js"),s="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",u=o.default.CLEARKEY_KEYSTEM_STRING,l="urn:uuid:"+s;function c(e){var t,n=e.BASE64,o=e.debug.getLogger(t);return t={uuid:s,schemeIdURI:l,systemString:u,getInitData:function(e){return a.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),s=[],u=0;u<a.kids.length;u++){var l=a.kids[u],c=e.clearkeys&&e.clearkeys.hasOwnProperty(l)?e.clearkeys[l]:null;if(!c)throw new Error("DRM: ClearKey keyID ("+l+") is not known!");s.push(new r.default(l,c))}n=new i.default(s),o.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}c.__dashjs_factory_name="KeySystemW3CClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(c)},"./src/streaming/protection/drm/KeySystemWidevine.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/constants/ProtectionConstants.js"),a="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",o=i.default.WIDEVINE_KEYSTEM_STRING,s="urn:uuid:"+a;function u(e){var t=(e=e||{}).BASE64;return{uuid:a,schemeIdURI:s,systemString:o,getInitData:function(e){return r.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}u.__dashjs_factory_name="KeySystemWidevine",t.default=dashjs.FactoryMaker.getSingletonFactory(u)},"./src/streaming/protection/errors/ProtectionErrors.js":function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var u=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=a(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).MEDIA_KEYERR_CODE=100,e.MEDIA_KEYERR_UNKNOWN_CODE=101,e.MEDIA_KEYERR_CLIENT_CODE=102,e.MEDIA_KEYERR_SERVICE_CODE=103,e.MEDIA_KEYERR_OUTPUT_CODE=104,e.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,e.MEDIA_KEYERR_DOMAIN_CODE=106,e.MEDIA_KEY_MESSAGE_ERROR_CODE=107,e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,e.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,e.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,e.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,e.KEY_SESSION_CREATED_ERROR_CODE=113,e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,e.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",e.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",e.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",e.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",e.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",e.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",e.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",e.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",e.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",e.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",e.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",e}return n}(n("./src/core/errors/ErrorsBase.js").default));t.default=u},"./src/streaming/protection/models/ProtectionModel_01b.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=n("./src/streaming/protection/vo/NeedKey.js"),a=n("./src/streaming/vo/DashJSError.js"),o=n("./src/streaming/protection/vo/KeyMessage.js"),s=n("./src/streaming/protection/vo/KeySystemConfiguration.js"),u=n("./src/streaming/protection/vo/KeySystemAccess.js"),l=n("./src/streaming/protection/errors/ProtectionErrors.js");function c(e){e=e||{};var t,n,c,d,f,h,p,m,g,v=this.context,y=e.eventBus,_=e.events,b=e.debug,T=e.api,E=e.errHandler;function S(){c&&M();for(var e=0;e<p.length;e++)w(p[e]);y.trigger(_.TEARDOWN_COMPLETE)}function w(e){try{c[T.cancelKeyRequest](d.systemString,e.sessionId)}catch(t){y.trigger(_.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionId+") "+t.message})}}function A(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionId==t)return e[r];return null}return null}function M(){c.removeEventListener(T.keyerror,g),c.removeEventListener(T.needkey,g),c.removeEventListener(T.keymessage,g),c.removeEventListener(T.keyadded,g)}return t={getAllInitData:function(){for(var e=[],t=0;t<h.length;t++)e.push(h[t].initData);for(var n=0;n<p.length;n++)e.push(p[n].initData);return e},getSessions:function(){return p.concat(h)},requestKeySystemAccess:function(e){return new Promise((function(t,n){var r=c;r||(r=document.createElement("video"));for(var i=!1,a=0;a<e.length;a++)for(var o=e[a].ks.systemString,l=e[a].configs,d=null,h=0;h<l.length;h++){var p=l[h].videoCapabilities;if(p&&0!==p.length){d=[];for(var m=0;m<p.length;m++)""!==r.canPlayType(p[m].contentType,o)&&d.push(p[m])}if(d&&(!d||0!==d.length)){i=!0;var g=new s.default(null,d),v=f.getKeySystemBySystemString(o),b=new u.default(v,g);y.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{data:b}),t({data:b});break}}if(!i){var T="Key system access denied! -- No valid audio/video content configurations detected!";y.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{error:T}),n({error:T})}}))},selectKeySystem:function(e){return d=e.keySystem,Promise.resolve(d)},setMediaElement:function(e){if(c!==e){if(c){M();for(var t=0;t<p.length;t++)w(p[t]);p=[]}(c=e)&&(c.addEventListener(T.keyerror,g),c.addEventListener(T.needkey,g),c.addEventListener(T.keymessage,g),c.addEventListener(T.keyadded,g),y.trigger(_.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!d)throw new Error("Can not create sessions until you have selected a key system");if(m||0===p.length){var t={sessionId:null,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return h.push(t),c[T.generateKeyRequest](d.systemString,new Uint8Array(e.initData)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionId;if(f.isClearKey(d))for(var r=0;r<t.keyPairs.length;r++)c[T.addKey](d.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else c[T.addKey](d.systemString,new Uint8Array(t),new Uint8Array(e.initData),n);y.trigger(_.KEY_SESSION_UPDATED)},closeKeySession:w,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:S,reset:S},n=b.getLogger(t),c=null,d=null,h=[],p=[],f=Object(r.default)(v).getInstance(),g={handleEvent:function(e){var t=null;switch(e.type){case T.needkey:var r=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;y.trigger(_.NEED_KEY,{key:new i.default(r,"cenc")});break;case T.keyerror:if((t=A(p,e.sessionId))||(t=A(h,e.sessionId)),t){var s=l.default.MEDIA_KEYERR_CODE,u="";switch(e.errorCode.code){case 1:s=l.default.MEDIA_KEYERR_UNKNOWN_CODE,u+="MEDIA_KEYERR_UNKNOWN - "+l.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:s=l.default.MEDIA_KEYERR_CLIENT_CODE,u+="MEDIA_KEYERR_CLIENT - "+l.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:s=l.default.MEDIA_KEYERR_SERVICE_CODE,u+="MEDIA_KEYERR_SERVICE - "+l.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:s=l.default.MEDIA_KEYERR_OUTPUT_CODE,u+="MEDIA_KEYERR_OUTPUT - "+l.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:s=l.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,u+="MEDIA_KEYERR_HARDWARECHANGE - "+l.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:s=l.default.MEDIA_KEYERR_DOMAIN_CODE,u+="MEDIA_KEYERR_DOMAIN - "+l.default.MEDIA_KEYERR_DOMAIN_MESSAGE}u+="  System Code = "+e.systemCode,y.trigger(_.KEY_ERROR,{error:new a.default(s,u,t)})}else n.error("No session token found for key error");break;case T.keyadded:(t=A(p,e.sessionId))||(t=A(h,e.sessionId)),t?(n.debug("DRM: Key added."),y.trigger(_.KEY_ADDED,{data:t})):n.debug("No session token found for key added");break;case T.keymessage:if((m=null!==e.sessionId&&void 0!==e.sessionId)?!(t=A(p,e.sessionId))&&h.length>0&&(t=h.shift(),p.push(t),t.sessionId=e.sessionId,y.trigger(_.KEY_SESSION_CREATED,{data:t})):h.length>0&&(t=h.shift(),p.push(t),0!==h.length&&E.error(new a.default(l.default.MEDIA_KEY_MESSAGE_ERROR_CODE,l.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),t){var c=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=c,y.trigger(_.INTERNAL_KEY_MESSAGE,{data:new o.default(t,c,e.defaultURL)})}else n.warn("No session token found for key message")}}},t}c.__dashjs_factory_name="ProtectionModel_01b",t.default=dashjs.FactoryMaker.getClassFactory(c)},"./src/streaming/protection/models/ProtectionModel_21Jan2015.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=n("./src/streaming/protection/vo/NeedKey.js"),a=n("./src/streaming/protection/errors/ProtectionErrors.js"),o=n("./src/streaming/vo/DashJSError.js"),s=n("./src/streaming/protection/vo/KeyMessage.js"),u=n("./src/streaming/protection/vo/KeySystemAccess.js"),l=n("./src/streaming/constants/ProtectionConstants.js"),c={};function d(e){e=e||{};var t,n,d,f,h,p,m,g,v=this.context,y=e.eventBus,_=e.events,b=e.debug;function T(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function E(e){for(var t=0;t<p.length;t++)if(p[t]===e){p.splice(t,1);break}}function S(e){var t,n;return e&&e.length>0&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function w(e,t){var r={session:e,keyId:t.keyId,initData:t.initData,sessionId:t.sessionId,sessionType:t.sessionType,handleEvent:function(e){switch(e.type){case"keystatuseschange":y.trigger(_.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach((function(){var e=S(arguments);switch(e.status){case"expired":y.trigger(_.INTERNAL_KEY_STATUS_CHANGED,{error:new o.default(a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:y.trigger(_.INTERNAL_KEY_STATUS_CHANGED,e)}}));break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;y.trigger(_.INTERNAL_KEY_MESSAGE,{data:new s.default(this,t,void 0,e.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return e.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach((function(){var e=S(arguments);"usable"===e.status&&(t=!0)})),t}};return e.addEventListener("keystatuseschange",r),e.addEventListener("message",r),e.closed.then((function(){E(r),n.debug("DRM: Session closed.  SessionID = "+r.getSessionId()),y.trigger(_.KEY_SESSION_CLOSED,{data:r.getSessionId()})})),p.push(r),r}return t={getAllInitData:function(){for(var e=[],t=0;t<p.length;t++)p[t].initData&&e.push(p[t].initData);return e},getSessions:function(){return p},requestKeySystemAccess:function(e){return new Promise((function(t,r){!function e(t,r,i,a){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var o="Insecure origins are not allowed";return y.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{error:o}),void a({error:o})}var s=t[r].protData&&t[r].protData.systemStringPriority?t[r].protData.systemStringPriority:null,l=t[r].configs,d=t[r].ks,f=d.systemString,h=s||(c[f]?c[f]:[f]);(function(e,t){return new Promise((function(r,i){!function e(t,r,i,a,o){var s=t[i];n.debug("Requesting key system access for system string ".concat(s)),navigator.requestMediaKeySystemAccess(s,r).then((function(e){e.selectedSystemString=s,a(e)})).catch((function(n){i+1<t.length?e(t,r,i+1,a,o):o(n)}))}(e,t,0,r,i)}))})(h,l).then((function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,n=new u.default(d,t);n.mksa=e,y.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{data:n}),i({data:n})})).catch((function(n){r+1<t.length?e(t,r+1,i,a):(y.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+n.message}),a({error:"Key system access denied! "+n.message}))}))}(e,0,t,r)}))},selectKeySystem:function(e){return new Promise((function(t,n){e.mksa.createMediaKeys().then((function(t){return d=e.keySystem,h=t,f?f.setMediaKeys(h):Promise.resolve()})).then((function(){t(d)})).catch((function(){n({error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))}))},setMediaElement:function(e){f!==e&&(f&&(f.removeEventListener("encrypted",m),f.setMediaKeys&&f.setMediaKeys(null)),(f=e)&&(f.addEventListener("encrypted",m),f.setMediaKeys&&h&&f.setMediaKeys(h)))},setServerCertificate:function(e){if(!d||!h)throw new Error("Can not set server certificate until you have selected a key system");h.setServerCertificate(e).then((function(){n.info("DRM: License server certificate successfully updated."),y.trigger(_.SERVER_CERTIFICATE_UPDATED)})).catch((function(e){y.trigger(_.SERVER_CERTIFICATE_UPDATED,{error:new o.default(a.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,a.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})}))},createKeySession:function(e){if(!d||!h)throw new Error("Can not create sessions until you have selected a key system");var t=h.createSession(e.sessionType),r=w(t,e),i=d.systemString===l.default.CLEARKEY_KEYSTEM_STRING&&(e.initData||e.protData&&e.protData.clearkeys)?l.default.INITIALIZATION_DATA_TYPE_KEYIDS:l.default.INITIALIZATION_DATA_TYPE_CENC;t.generateRequest(i,e.initData).then((function(){n.debug("DRM: Session created.  SessionID = "+r.getSessionId()),y.trigger(_.KEY_SESSION_CREATED,{data:r})})).catch((function(e){E(r),y.trigger(_.KEY_SESSION_CREATED,{data:null,error:new o.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})}))},updateKeySession:function(e,t){var n=e.session;g.isClearKey(d)&&(t=t.toJWK()),n.update(t).then((function(){y.trigger(_.KEY_SESSION_UPDATED)})).catch((function(t){y.trigger(_.KEY_ERROR,{error:new o.default(a.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})}))},loadKeySession:function(e){if(!d||!h)throw new Error("Can not load sessions until you have selected a key system");for(var t=e.sessionId,r=0;r<p.length;r++)if(t===p[r].sessionId)return void n.warn("DRM: Ignoring session ID because we have already seen it!");var i=h.createSession(e.sessionType),s=w(i,e);i.load(t).then((function(e){e?(n.debug("DRM: Session loaded.  SessionID = "+s.getSessionId()),y.trigger(_.KEY_SESSION_CREATED,{data:s})):(E(s),y.trigger(_.KEY_SESSION_CREATED,{data:null,error:new o.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))})).catch((function(e){E(s),y.trigger(_.KEY_SESSION_CREATED,{data:null,error:new o.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})}))},removeKeySession:function(e){e.session.remove().then((function(){n.debug("DRM: Session removed.  SessionID = "+e.getSessionId()),y.trigger(_.KEY_SESSION_REMOVED,{data:e.getSessionId()})}),(function(t){y.trigger(_.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionId()+"). "+t.name})}))},closeKeySession:function(e){T(e).catch((function(t){E(e),y.trigger(_.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionId()+") "+t.name})}))},stop:function(){for(var e,t=0;t<p.length;t++)(e=p[t]).getUsable()||T(e).catch((function(){E(e)}))},reset:function(){var e,t=p.length;0!==t?function(){for(var n=function(e){E(e),0===p.length&&(f?(f.removeEventListener("encrypted",m),f.setMediaKeys(null).then((function(){y.trigger(_.TEARDOWN_COMPLETE)}))):y.trigger(_.TEARDOWN_COMPLETE))},r=0;r<t;r++)!function(t){e.session.closed.then((function(){n(t)})),T(e).catch((function(){n(t)}))}(e=p[r])}():y.trigger(_.TEARDOWN_COMPLETE)}},n=b.getLogger(t),d=null,f=null,h=null,p=[],g=Object(r.default)(v).getInstance(),m={handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;y.trigger(_.NEED_KEY,{key:new i.default(t,e.initDataType)})}}}},t}c[l.default.PLAYREADY_KEYSTEM_STRING]=[l.default.PLAYREADY_KEYSTEM_STRING,l.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],c[l.default.WIDEVINE_KEYSTEM_STRING]=[l.default.WIDEVINE_KEYSTEM_STRING],c[l.default.CLEARKEY_KEYSTEM_STRING]=[l.default.CLEARKEY_KEYSTEM_STRING],d.__dashjs_factory_name="ProtectionModel_21Jan2015",t.default=dashjs.FactoryMaker.getClassFactory(d)},"./src/streaming/protection/models/ProtectionModel_3Feb2014.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=n("./src/streaming/protection/vo/NeedKey.js"),a=n("./src/streaming/vo/DashJSError.js"),o=n("./src/streaming/protection/errors/ProtectionErrors.js"),s=n("./src/streaming/protection/vo/KeyMessage.js"),u=n("./src/streaming/protection/vo/KeySystemConfiguration.js"),l=n("./src/streaming/protection/vo/KeySystemAccess.js");function c(e){e=e||{};var t,n,c,d,f,h,p,m,g,v=this.context,y=e.eventBus,_=e.events,b=e.debug,T=e.api;function E(){try{for(var e=0;e<p.length;e++)S(p[e]);c&&c.removeEventListener(T.needkey,m),y.trigger(_.TEARDOWN_COMPLETE)}catch(e){y.trigger(_.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function S(e){var t=e.session;t.removeEventListener(T.error,e),t.removeEventListener(T.message,e),t.removeEventListener(T.ready,e),t.removeEventListener(T.close,e);for(var n=0;n<p.length;n++)if(p[n]===e){p.splice(n,1);break}t[T.release]()}function w(){var e=null,t=function(){c.removeEventListener("loadedmetadata",e),c[T.setMediaKeys](f),y.trigger(_.VIDEO_ELEMENT_SELECTED)};c.readyState>=1?t():(e=t.bind(this),c.addEventListener("loadedmetadata",e))}return t={getAllInitData:function(){for(var e=[],t=0;t<p.length;t++)e.push(p[t].initData);return e},getSessions:function(){return p},requestKeySystemAccess:function(e){return new Promise((function(t,n){for(var r=!1,i=0;i<e.length;i++)for(var a=e[i].ks.systemString,o=e[i].configs,s=null,c=null,d=0;d<o.length;d++){var f=o[d].audioCapabilities,h=o[d].videoCapabilities;if(f&&0!==f.length){s=[];for(var p=0;p<f.length;p++)window[T.MediaKeys].isTypeSupported(a,f[p].contentType)&&s.push(f[p])}if(h&&0!==h.length){c=[];for(var m=0;m<h.length;m++)window[T.MediaKeys].isTypeSupported(a,h[m].contentType)&&c.push(h[m])}if(!(!s&&!c||s&&0===s.length||c&&0===c.length)){r=!0;var v=new u.default(s,c),b=g.getKeySystemBySystemString(a),E=new l.default(b,v);y.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{data:E}),t({data:E});break}}if(!r){var S="Key system access denied! -- No valid audio/video content configurations detected!";y.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{error:S}),n({error:S})}}))},selectKeySystem:function(e){return new Promise((function(t,n){try{f=e.mediaKeys=new window[T.MediaKeys](e.keySystem.systemString),d=e.keySystem,h=e,c&&w(),t(d)}catch(e){n({error:"Error selecting keys system ("+d.systemString+")! Could not create MediaKeys -- TODO"})}}))},setMediaElement:function(e){c!==e&&(c&&c.removeEventListener(T.needkey,m),(c=e)&&(c.addEventListener(T.needkey,m),f&&w()))},createKeySession:function(e){if(!d||!f||!h)throw new Error("Can not create sessions until you have selected a key system");var t=null;if(h.ksConfiguration.videoCapabilities&&h.ksConfiguration.videoCapabilities.length>0&&(t=h.ksConfiguration.videoCapabilities[0]),null===t&&h.ksConfiguration.audioCapabilities&&h.ksConfiguration.audioCapabilities.length>0&&(t=h.ksConfiguration.audioCapabilities[0]),null===t)throw new Error("Can not create sessions for unknown content types.");var r=t.contentType,i=f.createSession(r,new Uint8Array(e.initData),e.cdmData?new Uint8Array(e.cdmData):null),u=function(e,t){return{session:e,keyId:t.keyId,initData:t.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case T.error:y.trigger(_.KEY_ERROR,{error:new a.default(o.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case T.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;y.trigger(_.INTERNAL_KEY_MESSAGE,{data:new s.default(this,t,e.destinationURL)});break;case T.ready:n.debug("DRM: Key added."),y.trigger(_.KEY_ADDED);break;case T.close:n.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),y.trigger(_.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(i,e);i.addEventListener(T.error,u),i.addEventListener(T.message,u),i.addEventListener(T.ready,u),i.addEventListener(T.close,u),p.push(u),n.debug("DRM: Session created.  SessionID = "+u.getSessionId()),y.trigger(_.KEY_SESSION_CREATED,{data:u})},updateKeySession:function(e,t){var n=e.session;g.isClearKey(d)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t)),y.trigger(_.KEY_SESSION_UPDATED)},closeKeySession:S,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:E,reset:E},n=b.getLogger(t),c=null,d=null,f=null,h=null,p=[],g=Object(r.default)(v).getInstance(),m={handleEvent:function(e){switch(e.type){case T.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;y.trigger(_.NEED_KEY,{key:new i.default(t,"cenc")})}}}},t}c.__dashjs_factory_name="ProtectionModel_3Feb2014",t.default=dashjs.FactoryMaker.getClassFactory(c)},"./src/streaming/protection/servers/ClearKey.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/protection/vo/KeyPair.js"),i=n("./src/streaming/protection/vo/ClearKeyKeySet.js");function a(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var a=e.keys[n],o=a.kid.replace(/=/g,""),s=a.k.replace(/=/g,"");t.push(new r.default(o,s))}return new i.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}a.__dashjs_factory_name="ClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/protection/servers/DRMToday.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/ProtectionConstants.js");function i(e){var t=(e=e||{}).BASE64,n={};return n[r.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},n[r.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return n[e].responseType},getLicenseMessage:function(e,r){return function(){if(!t||!t.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),n[r].getLicenseMessage(e)},getErrorResponse:function(e,t){return n[t].getErrorResponse(e)}}}i.__dashjs_factory_name="DRMToday",t.default=dashjs.FactoryMaker.getSingletonFactory(i)},"./src/streaming/protection/servers/PlayReady.js":function(e,t,n){"use strict";function r(){var e="http://schemas.xmlsoap.org/soap/envelope/";function t(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}function n(n){if(window.DOMParser){var r=t(n),i=(new window.DOMParser).parseFromString(r,"text/xml"),a=i?i.getElementsByTagNameNS(e,"Envelope")[0]:null,o=a?a.getElementsByTagNameNS(e,"Body")[0]:null;if(o&&o.getElementsByTagNameNS(e,"Fault")[0])return null}return n}function r(n){var r="",i="",a="",o=-1,s=-1;if(window.DOMParser){var u=t(n),l=(new window.DOMParser).parseFromString(u,"text/xml"),c=l?l.getElementsByTagNameNS(e,"Envelope")[0]:null,d=c?c.getElementsByTagNameNS(e,"Body")[0]:null,f=d?d.getElementsByTagNameNS(e,"Fault")[0]:null,h=f?f.getElementsByTagName("detail")[0]:null,p=h?h.getElementsByTagName("Exception")[0]:null,m=null;if(null===f)return u;r=(m=f.getElementsByTagName("faultstring")[0].firstChild)?m.nodeValue:null,null!==p&&(i=(m=p.getElementsByTagName("StatusCode")[0])?m.firstChild.nodeValue:null,o=(a=(m=p.getElementsByTagName("Message")[0])?m.firstChild.nodeValue:null)?a.lastIndexOf("[")+1:-1,s=a?a.indexOf("]"):-1,a=a?a.substring(o,s):"")}var g="code: ".concat(i,", name: ").concat(r);return a&&(g+=", message: ".concat(a)),g}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return n.call(this,e)},getErrorResponse:function(e){return r.call(this,e)}}}n.r(t),r.__dashjs_factory_name="PlayReady",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/protection/servers/Widevine.js":function(e,t,n){"use strict";function r(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}n.r(t),r.__dashjs_factory_name="Widevine",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/protection/vo/ClearKeyKeySet.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=n}var t,n,i;return t=e,(n=[{key:"toJWK",value:function(){var e,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),a=i.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(e=0;e<a;e++)s[e]=i.charCodeAt(e);return o}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},"./src/streaming/protection/vo/KeyMessage.js":function(e,t,n){"use strict";n.r(t),t.default=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionToken=t,this.message=n,this.defaultURL=r,this.messageType=i||"license-request"}},"./src/streaming/protection/vo/KeyPair.js":function(e,t,n){"use strict";n.r(t),t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyID=t,this.key=n}},"./src/streaming/protection/vo/KeySystemAccess.js":function(e,t,n){"use strict";n.r(t),t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keySystem=t,this.ksConfiguration=n}},"./src/streaming/protection/vo/KeySystemConfiguration.js":function(e,t,n){"use strict";n.r(t),t.default=function e(t,n,r,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=r,this.persistentState=i,this.sessionTypes=a}},"./src/streaming/protection/vo/LicenseRequest.js":function(e,t,n){"use strict";n.r(t),t.default=function e(t,n,r,i,a,o,s,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.method=n,this.responseType=r,this.headers=i,this.withCredentials=a,this.messageType=o,this.sessionId=s,this.data=u}},"./src/streaming/protection/vo/LicenseResponse.js":function(e,t,n){"use strict";n.r(t),t.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.headers=n,this.data=r}},"./src/streaming/protection/vo/MediaCapability.js":function(e,t,n){"use strict";n.r(t),t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentType=t,this.robustness=n}},"./src/streaming/protection/vo/NeedKey.js":function(e,t,n){"use strict";n.r(t),t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData=t,this.initDataType=n}},"./src/streaming/rules/DroppedFramesHistory.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js");function i(){var e={},t={},n={};return{push:function(r,i,a){if(i){e[r]||(e[r]=[],t[r]=0,n[r]=0);var o=a&&a.droppedVideoFrames?a.droppedVideoFrames:0,s=a&&a.totalVideoFrames?a.totalVideoFrames:0,u=o-t;t[r]=o;var l=s-n;n[r]=s;var c=e[r];isNaN(i)||(c[i]?(c[i].droppedVideoFrames+=u,c[i].totalVideoFrames+=l):c[i]={droppedVideoFrames:u,totalVideoFrames:l})}},getFrameHistory:function(t){return e[t]},clearForStream:function(r){try{delete e[r],delete t[r],delete n[r]}catch(e){}},reset:function(){e={},t={},n={}}}}i.__dashjs_factory_name="DroppedFramesHistory";var a=r.default.getClassFactory(i);t.default=a},"./src/streaming/rules/RulesContext.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){var t=(e=e||{}).abrController,n=e.switchHistory,r=e.droppedFramesHistory,i=e.currentRequest,a=e.useBufferOccupancyABR,o=e.useL2AABR,s=e.useLoLPABR,u=e.streamProcessor?e.streamProcessor.getScheduleController():null,l=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null,c=e.videoModel?e.videoModel:null;function d(){return l?l.mediaInfo:null}return{getMediaType:function(){var e=d();return e?e.type:null},getMediaInfo:d,getDroppedFramesHistory:function(){return r},getCurrentRequest:function(){return i},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=d();return e?e.streamInfo:null},getScheduleController:function(){return u},getAbrController:function(){return t},getRepresentationInfo:function(){return l},useBufferOccupancyABR:function(){return a},useL2AABR:function(){return o},useLoLPABR:function(){return s},getVideoModel:function(){return c}}}i.__dashjs_factory_name="RulesContext",t.default=r.default.getClassFactory(i)},"./src/streaming/rules/SwitchRequest.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=-1,a={DEFAULT:.5,STRONG:1,WEAK:0};function o(e,t,n){return{quality:void 0===e?i:e,reason:void 0===t?null:t,priority:function(e){var t=a.DEFAULT;return e!==a.DEFAULT&&e!==a.STRONG&&e!==a.WEAK||(t=e),t}(n)}}o.__dashjs_factory_name="SwitchRequest";var s=r.default.getClassFactory(o);s.NO_CHANGE=i,s.PRIORITY=a,r.default.updateClassFactory(o.__dashjs_factory_name,s),t.default=s},"./src/streaming/rules/SwitchRequestHistory.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=8;function o(){var e=[],t=[];return{push:function(n){n.newValue===i.default.NO_CHANGE&&(n.newValue=n.oldValue),e[n.oldValue]||(e[n.oldValue]={noDrops:0,drops:0,dropSize:0});var r=n.newValue-n.oldValue,o=r<0?1:0,s=o?-r:0,u=o?0:1;if(e[n.oldValue].drops+=o,e[n.oldValue].dropSize+=s,e[n.oldValue].noDrops+=u,t.push({idx:n.oldValue,noDrop:u,drop:o,dropSize:s}),t.length>a){var l=t.shift();e[l.idx].drops-=l.drop,e[l.idx].dropSize-=l.dropSize,e[l.idx].noDrops-=l.noDrop}},getSwitchRequests:function(){return e},reset:function(){e=[],t=[]}}}o.__dashjs_factory_name="SwitchRequestHistory";var s=r.default.getClassFactory(o);t.default=s},"./src/streaming/rules/ThroughputHistory.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/FactoryMaker.js");function a(e){var t,n,i,a,o,s=20,u=3,l=4,c=4,d=1.3,f=1.3,h=8,p=3,m=2,g=1,v=(e=e||{}).settings;function y(e,t,n,r){var i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;var a=Math.pow(.5,n/r.slow);e.slowEstimate=(1-a)*t+a*e.slowEstimate,e.totalWeight+=n}function _(e,s,h){return v.get().streaming.abr.movingAverageMethod!==r.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var n=e?o.throughputHalfLife:o.latencyHalfLife,r=e?i[t]:a[t];if(!r||r.totalWeight<=0)return NaN;var s=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),u=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return e?Math.min(s,u):Math.max(s,u)}(e,s):function(e,r,i){var a=function(e,r,i){var a,o;if(e?(a=t[r],o=i?u:l):(a=n[r],o=c),a){if(o>=a.length)o=a.length;else if(e)for(var s=1;s<o;++s){var h=a[a.length-s]/a[a.length-s-1];if((h>=f||h<=1/d)&&(o+=1)===a.length)break}}else o=0;return o}(e,r,i),o=(e?t:n)[r];return 0!==a&&o&&0!==o.length?(o=o.slice(-a)).reduce((function(e,t){return e+t}))/o.length:NaN}(e,s,h)}function b(e,t){return _(!0,e,t)}function T(e){t[e]=t[e]||[],n[e]=n[e]||[],i[e]=i[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},a[e]=a[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function E(){t={},n={},i={},a={}}var S={push:function(e,u,l){if(u.trace&&u.trace.length){var c=u.tresponse.getTime()-u.trequest.getTime()||1,d=u._tfinish.getTime()-u.tresponse.getTime()||1,f=u.trace.reduce((function(e,t){return e+t.b[0]}),0),h=0,p=0;if(u._fileLoaderType&&u._fileLoaderType===r.default.FILE_LOADER_TYPES.FETCH){if(v.get().streaming.abr.fetchThroughputCalculationMode===r.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING){var m=u.trace.reduce((function(e,t){return e+t._t}),0);p=Math.round(m/u.trace.length)}0===p&&(h=u.trace.reduce((function(e,t){return e+t.d}),0))}else h=l?d:c+d;if(0!==h&&(p=Math.round(8*f/h)),T(e),function(e,t,n){return e===r.default.VIDEO?n<v.get().streaming.cacheLoadThresholds[r.default.VIDEO]:e===r.default.AUDIO?n<v.get().streaming.cacheLoadThresholds[r.default.AUDIO]:void 0}(e,0,d)){if(t[e].length>0&&!t[e].hasCachedEntries)return;t[e].hasCachedEntries=!0}else t[e]&&t[e].hasCachedEntries&&function(e){delete t[e],delete n[e],delete i[e],delete a[e],T(e)}(e);t[e].push(p),t[e].length>s&&t[e].shift(),n[e].push(c),n[e].length>s&&n[e].shift(),y(i[e],p,.001*d,o.throughputHalfLife),y(a[e],c,1,o.latencyHalfLife)}},getAverageThroughput:b,getSafeAverageThroughput:function(e,t){var n=b(e,t);return isNaN(n)||(n*=v.get().streaming.abr.bandwidthSafetyFactor),n},getAverageLatency:function(e){return _(!1,e)},reset:E};return o={throughputHalfLife:{fast:p,slow:h},latencyHalfLife:{fast:g,slow:m}},E(),S}a.__dashjs_factory_name="ThroughputHistory",t.default=i.default.getClassFactory(a)},"./src/streaming/rules/abr/ABRRulesCollection.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/rules/abr/ThroughputRule.js"),i=n("./src/streaming/rules/abr/InsufficientBufferRule.js"),a=n("./src/streaming/rules/abr/AbandonRequestsRule.js"),o=n("./src/streaming/rules/abr/DroppedFramesRule.js"),s=n("./src/streaming/rules/abr/SwitchHistoryRule.js"),u=n("./src/streaming/rules/abr/BolaRule.js"),l=n("./src/streaming/rules/abr/L2ARule.js"),c=n("./src/streaming/rules/abr/lolp/LoLpRule.js"),d=n("./src/core/FactoryMaker.js"),f=n("./src/streaming/rules/SwitchRequest.js"),h=n("./src/streaming/constants/Constants.js"),p="qualitySwitchRules",m="abandonFragmentRules";function g(e){e=e||{};var t,n,d=this.context,g=e.mediaPlayerModel,v=e.customParametersModel,y=e.dashMetrics,_=e.settings;function b(e){return e.filter((function(e){return e.quality>f.default.NO_CHANGE}))}function T(e){var t,n,r,i,a,o={},s=null;if(0!==e.length){for(o[f.default.PRIORITY.STRONG]={quality:f.default.NO_CHANGE,reason:null},o[f.default.PRIORITY.WEAK]={quality:f.default.NO_CHANGE,reason:null},o[f.default.PRIORITY.DEFAULT]={quality:f.default.NO_CHANGE,reason:null},t=0,n=e.length;t<n;t+=1)(r=e[t]).quality!==f.default.NO_CHANGE&&(o[r.priority].quality===f.default.NO_CHANGE||o[r.priority].quality>r.quality)&&(o[r.priority].quality=r.quality,o[r.priority].reason=r.reason||null);return o[f.default.PRIORITY.WEAK].quality!==f.default.NO_CHANGE&&(s=o[f.default.PRIORITY.WEAK]),o[f.default.PRIORITY.DEFAULT].quality!==f.default.NO_CHANGE&&(s=o[f.default.PRIORITY.DEFAULT]),o[f.default.PRIORITY.STRONG].quality!==f.default.NO_CHANGE&&(s=o[f.default.PRIORITY.STRONG]),s&&(i=s.quality,a=s.reason),Object(f.default)(d).create(i,a)}}return{initialize:function(){t=[],n=[],_.get().streaming.abr.useDefaultABRRules&&(_.get().streaming.abr.ABRStrategy===h.default.ABR_STRATEGY_L2A?t.push(Object(l.default)(d).create({dashMetrics:y,settings:_})):_.get().streaming.abr.ABRStrategy===h.default.ABR_STRATEGY_LoLP?t.push(Object(c.default)(d).create({dashMetrics:y})):(t.push(Object(u.default)(d).create({dashMetrics:y,mediaPlayerModel:g,settings:_})),t.push(Object(r.default)(d).create({dashMetrics:y})),_.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&t.push(Object(i.default)(d).create({dashMetrics:y,settings:_})),_.get().streaming.abr.additionalAbrRules.switchHistoryRule&&t.push(Object(s.default)(d).create()),_.get().streaming.abr.additionalAbrRules.droppedFramesRule&&t.push(Object(o.default)(d).create()),_.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&n.push(Object(a.default)(d).create({dashMetrics:y,mediaPlayerModel:g,settings:_})))),v.getAbrCustomRules().forEach((function(e){e.type===p&&t.push(e.rule(d).create()),e.type===m&&n.push(e.rule(d).create())}))},reset:function(){[t,n].forEach((function(e){e&&e.length&&e.forEach((function(e){return e.reset&&e.reset()}))})),t=[],n=[]},getMaxQuality:function(e){return T(b(t.map((function(t){return t.getMaxIndex(e)}))))||Object(f.default)(d).create()},getMinSwitchRequest:T,shouldAbandonFragment:function(e,t){return T(b(n.map((function(n){return n.shouldAbandon(e,t)}))))||Object(f.default)(d).create()},getQualitySwitchRules:function(){return t}}}g.__dashjs_factory_name="ABRRulesCollection";var v=d.default.getClassFactory(g);v.QUALITY_SWITCH_RULES=p,v.ABANDON_FRAGMENT_RULES=m,d.default.updateSingletonFactory(g.__dashjs_factory_name,v),t.default=v},"./src/streaming/rules/abr/AbandonRequestsRule.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/rules/SwitchRequest.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/core/Debug.js");function o(e){e=e||{};var t,n,i,s,u,l=1.8,c=500,d=5,f=this.context,h=e.mediaPlayerModel,p=e.dashMetrics,m=e.settings;function g(){i={},s={},u=[]}return t={shouldAbandon:function(e){var t=Object(r.default)(f).create(r.default.NO_CHANGE,{name:o.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var a,g,v=e.getMediaInfo(),y=e.getMediaType(),_=e.getStreamInfo(),b=_?_.id:null,T=e.getCurrentRequest();if(!isNaN(T.index)){a=y,g=T.index,i[a]=i[a]||{},i[a][g]=i[a][g]||{};var E=h.getStableBufferTime();if(p.getCurrentBufferLevel(y)>E)return t;var S=i[y][T.index];if(null===S||null===T.firstByteDate||s.hasOwnProperty(S.id))return t;if(void 0===S.firstByteTime&&(u[y]=[],S.firstByteTime=T.firstByteDate.getTime(),S.segmentDuration=T.duration,S.bytesTotal=T.bytesTotal,S.id=T.index),S.bytesLoaded=T.bytesLoaded,S.elapsedTime=(new Date).getTime()-S.firstByteTime,S.bytesLoaded>0&&S.elapsedTime>0&&function(e,t){u[e]=u[e]||[],u[e].push(t)}(y,Math.round(8*S.bytesLoaded/S.elapsedTime)),u[y].length>=d&&S.elapsedTime>c&&S.bytesLoaded<S.bytesTotal){var w=u[y].reduce((function(e,t){return e+t}),0);if(S.measuredBandwidthInKbps=Math.round(w/u[y].length),S.estimatedTimeOfDownload=+(8*S.bytesTotal/S.measuredBandwidthInKbps/1e3).toFixed(2),S.estimatedTimeOfDownload<S.segmentDuration*l||0===e.getRepresentationInfo().quality)return t;if(!s.hasOwnProperty(S.id)){var A=e.getAbrController(),M=S.bytesTotal-S.bytesLoaded,L=A.getBitrateList(v),C=A.getQualityForBitrate(v,S.measuredBandwidthInKbps*m.get().streaming.abr.bandwidthSafetyFactor,b),D=A.getMinAllowedIndexFor(y,b),k=void 0!==D?Math.max(D,C):C;M>S.bytesTotal*L[k].bitrate/L[A.getQualityFor(y,b)].bitrate&&(t.quality=k,t.reason.throughput=S.measuredBandwidthInKbps,t.reason.fragmentID=S.id,s[S.id]=S,n.debug("["+y+"] frag id",S.id," is asking to abandon and switch to quality to ",k," measured bandwidth was",S.measuredBandwidthInKbps),delete i[y][S.id])}}else S.bytesLoaded===S.bytesTotal&&delete i[y][S.id]}return t},reset:g},n=Object(a.default)(f).getInstance().getLogger(t),g(),t}o.__dashjs_factory_name="AbandonRequestsRule",t.default=i.default.getClassFactory(o)},"./src/streaming/rules/abr/BolaRule.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/MetricsConstants.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/vo/metrics/HTTPRequest.js"),s=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/Debug.js"),c=n("./src/streaming/MediaPlayerEvents.js"),d=n("./src/streaming/constants/Constants.js"),f=0,h=1,p=2,m=10,g=2,v=.99;function y(e){e=e||{};var t,n,a,y=this.context,_=e.dashMetrics,b=e.mediaPlayerModel,T=Object(s.default)(y).getInstance();function E(e,t,n){var r=n.reduce((function(e,t,r){return t>n[e]?r:e}),0);if(0===r)return null;var i=Math.max(e,m+g*t.length),a=(n[r]-1)/(i/m-1);return{gp:a,Vp:m/a}}function S(e){var t={},n=e.getMediaInfo().bitrateList.map((function(e){return e.bandwidth})),r=function(e){return e.map((function(e){return Math.log(e)}))}(n);r=r.map((function(e){return e-r[0]+1}));var i=b.getStableBufferTime(),a=E(i,n,r);return a?(t.state=h,t.bitrates=n,t.utilities=r,t.stableBufferTime=i,t.Vp=a.Vp,t.gp=a.gp,t.lastQuality=0,w(t)):t.state=f,t}function w(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function A(e,t){var n=b.getStableBufferTime();if(e.stableBufferTime!==n){var r=E(n,e.bitrates,e.utilities);if(r.Vp!==e.Vp||r.gp!==e.gp){var i=_.getCurrentBufferLevel(t),a=i+e.placeholderBuffer;a-=m,a*=r.Vp/e.Vp,a+=m,e.stableBufferTime=n,e.Vp=r.Vp,e.gp=r.gp,e.placeholderBuffer=Math.max(0,a-i)}}}function M(e,t){return e.Vp*(e.utilities[t]+e.gp)}function L(e,t){for(var n=e.bitrates[t],r=e.utilities[t],i=0,a=t-1;a>=0;--a)if(e.utilities[a]<e.utilities[t]){var o=e.bitrates[a],s=e.utilities[a],u=e.Vp*(e.gp+(n*s-o*r)/(n-o));i=Math.max(i,u)}return i}function C(e){var t=e.mediaType===d.default.AUDIO?[d.default.AUDIO]:a;for(var n in t)a.hasOwnProperty(n)&&a[n].state===p&&(a[n].placeholderBuffer=0)}function D(){for(var e in a)if(a.hasOwnProperty(e)){var t=a[e];t.state!==f&&(t.state=h,w(t))}}function k(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=a[e.chunk.mediaInfo.type];if(t&&t.state!==f){var n=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,I(t,e.chunk.mediaInfo.type)}}}function P(e){if(e&&e.metric===r.default.HTTP_REQUEST&&e.value&&e.value.type===o.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=a[e.mediaType];t&&t.state!==f&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),I(t,e.mediaType))}}function I(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=v,!isNaN(e.lastSegmentFinishTimeMs)){var n=_.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),r=M(e,e.lastQuality),i=Math.max(0,r-n);e.placeholderBuffer=Math.min(i,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function O(e){if(e){var t=a[e.mediaType];t&&t.state!==f&&(t.abrQuality=e.newQuality)}}function R(e){if(e){var t=a[e.mediaType];if(t&&t.state!==f){var n,r=_.getCurrentBufferLevel(e.mediaType);n=t.abrQuality>0?L(t,t.abrQuality):m;var i=Math.max(0,n-r);t.placeholderBuffer=Math.min(t.placeholderBuffer,i)}}}function x(){a={}}return t={getMaxIndex:function(e){var t=Object(i.default)(y).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")))return t;var r=e.getMediaInfo(),o=e.getMediaType(),s=e.getScheduleController(),u=e.getStreamInfo(),l=e.getAbrController(),c=l.getThroughputHistory(),d=u?u.id:null,m=u&&u.manifestInfo&&u.manifestInfo.isDynamic,g=e.useBufferOccupancyABR();if(t.reason=t.reason||{},!g)return t;s.setTimeToLoadDelay(0);var v=function(e){var t=e.getMediaType(),n=a[t];return n?n.state!==f&&A(n,t):(n=S(e),a[t]=n),n}(e);if(v.state===f)return t;var b,T=_.getCurrentBufferLevel(o),E=c.getAverageThroughput(o,m),C=c.getSafeAverageThroughput(o,m),D=c.getAverageLatency(o);if(t.reason.state=v.state,t.reason.throughput=E,t.reason.latency=D,isNaN(E))return t;switch(v.state){case h:b=l.getQualityForBitrate(r,C,d,D),t.quality=b,t.reason.throughput=C,v.placeholderBuffer=Math.max(0,L(v,b)-T),v.lastQuality=b,!isNaN(v.lastSegmentDurationS)&&T>=v.lastSegmentDurationS&&(v.state=p);break;case p:!function(e,t){var n=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){var r=.001*(n-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,r)}}else{var i=.001*(n-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,i)}e.lastCallTimeMs=n,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,A(e,t)}(v,o),b=function(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||o>=i)&&(i=o,r=a)}return r}(v,T+v.placeholderBuffer);var k=l.getQualityForBitrate(r,C,d,D);b>v.lastQuality&&b>k&&(b=Math.max(k,v.lastQuality));var P=Math.max(0,T+v.placeholderBuffer-M(v,b));P<=v.placeholderBuffer?(v.placeholderBuffer-=P,P=0):(P-=v.placeholderBuffer,v.placeholderBuffer=0,b<l.getMaxAllowedIndexFor(o,d)?s.setTimeToLoadDelay(1e3*P):P=0),t.quality=b,t.reason.throughput=E,t.reason.latency=D,t.reason.bufferLevel=T,t.reason.placeholderBuffer=v.placeholderBuffer,t.reason.delay=P,v.lastQuality=b;break;default:n.debug("BOLA ABR rule invoked in bad state."),t.quality=l.getQualityForBitrate(r,C,d,D),t.reason.state=v.state,t.reason.throughput=C,t.reason.latency=D,v.state=h,w(v)}return t},reset:function(){x(),T.off(c.default.BUFFER_EMPTY,C,t),T.off(c.default.PLAYBACK_SEEKING,D,t),T.off(c.default.METRIC_ADDED,P,t),T.off(c.default.QUALITY_CHANGE_REQUESTED,O,t),T.off(c.default.FRAGMENT_LOADING_ABANDONED,R,t),T.off(u.default.MEDIA_FRAGMENT_LOADED,k,t)}},n=Object(l.default)(y).getInstance().getLogger(t),x(),T.on(c.default.BUFFER_EMPTY,C,t),T.on(c.default.PLAYBACK_SEEKING,D,t),T.on(c.default.METRIC_ADDED,P,t),T.on(c.default.QUALITY_CHANGE_REQUESTED,O,t),T.on(c.default.FRAGMENT_LOADING_ABANDONED,R,t),T.on(u.default.MEDIA_FRAGMENT_LOADED,k,t),t}y.__dashjs_factory_name="BolaRule",t.default=a.default.getClassFactory(y)},"./src/streaming/rules/abr/DroppedFramesRule.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/core/Debug.js");function o(){var e,t,n=this.context,r=.15,o=375;return e={getMaxIndex:function(e){var a=Object(i.default)(n).create();if(!e||!e.hasOwnProperty("getDroppedFramesHistory"))return a;var s=e.getDroppedFramesHistory(),u=e.getStreamInfo().id;if(s){var l=s.getFrameHistory(u);if(!l||0===l.length)return a;for(var c=0,d=0,f=i.default.NO_CHANGE,h=1;h<l.length;h++)if(l[h]&&(c=l[h].droppedVideoFrames,(d=l[h].totalVideoFrames)>o&&c/d>r)){f=h-1,t.debug("index: "+f+" Dropped Frames: "+c+" Total Frames: "+d);break}return Object(i.default)(n).create(f,{droppedFrames:c})}return a}},t=Object(a.default)(n).getInstance().getLogger(e),e}o.__dashjs_factory_name="DroppedFramesRule",t.default=r.default.getClassFactory(o)},"./src/streaming/rules/abr/InsufficientBufferRule.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/core/Debug.js"),s=n("./src/streaming/rules/SwitchRequest.js"),u=n("./src/streaming/constants/Constants.js"),l=n("./src/streaming/constants/MetricsConstants.js"),c=n("./src/streaming/MediaPlayerEvents.js");function d(e){e=e||{};var t,n,a,d=.5,f=2,h=this.context,p=Object(r.default)(h).getInstance(),m=e.dashMetrics;function g(){(a={})[u.default.VIDEO]={ignoreCount:f},a[u.default.AUDIO]={ignoreCount:f}}function v(){g()}function y(e){isNaN(e.startTime)||e.mediaType!==u.default.AUDIO&&e.mediaType!==u.default.VIDEO||a[e.mediaType].ignoreCount>0&&a[e.mediaType].ignoreCount--}return t={getMaxIndex:function(e){var t=Object(s.default)(h).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;!function(){if(!m||!m.hasOwnProperty("getCurrentBufferLevel")||!m.hasOwnProperty("getCurrentBufferState"))throw new Error(u.default.MISSING_CONFIG_ERROR)}();var r=e.getMediaType(),i=m.getCurrentBufferState(r),o=e.getRepresentationInfo().fragmentDuration,c=e.getStreamInfo(),f=c?c.id:null,p=e.getScheduleController(),g=c&&c.manifestInfo&&c.manifestInfo.isDynamic;if(function(e,t){return!e&&a[t].ignoreCount>0}(p.getPlaybackController().getLowLatencyModeEnabled(),r)||!o)return t;if(i&&i.state===l.default.BUFFER_EMPTY)n.debug("["+r+"] Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty";else{var v=e.getMediaInfo(),y=e.getAbrController(),_=y.getThroughputHistory(),b=m.getCurrentBufferLevel(r),T=_.getAverageThroughput(r,g),E=_.getAverageLatency(r),S=T*(b/o)*d;t.quality=y.getQualityForBitrate(v,S,f,E),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return t},reset:function(){g(),p.off(c.default.PLAYBACK_SEEKING,v,t),p.off(i.default.BYTES_APPENDED_END_FRAGMENT,y,t)}},n=Object(o.default)(h).getInstance().getLogger(t),g(),p.on(c.default.PLAYBACK_SEEKING,v,t),p.on(i.default.BYTES_APPENDED_END_FRAGMENT,y,t),t}d.__dashjs_factory_name="InsufficientBufferRule",t.default=a.default.getClassFactory(d)},"./src/streaming/rules/abr/L2ARule.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/MetricsConstants.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/vo/metrics/HTTPRequest.js"),s=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/Debug.js"),c=n("./src/streaming/constants/Constants.js"),d=0,f=1,h=2;function p(e){e=e||{};var t,n,a,p,m=this.context,g=e.dashMetrics,v=Object(s.default)(m).getInstance();function y(e){var t={},n=e.getMediaInfo(),r=n.bitrateList.map((function(e){return e.bandwidth/1e3}));return t.state=f,t.bitrates=r,t.lastQuality=0,function(e){e&&e.type&&(a[e.type]={},a[e.type].w=[],a[e.type].prev_w=[],a[e.type].Q=0,a[e.type].segment_request_start_s=0,a[e.type].segment_download_finish_s=0,a[e.type].B_target=1.5)}(n),_(t),t}function _(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function b(){for(var e in n)if(n.hasOwnProperty(e)){var t=n[e];t.state!==d&&(t.state=f,_(t))}}function T(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=n[e.chunk.mediaInfo.type],r=a[e.chunk.mediaInfo.type];if(t&&t.state!==d){var i=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||i>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=i,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=i,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,S(t,r)}}}function E(e){if(e&&e.metric===r.default.HTTP_REQUEST&&e.value&&e.value.type===o.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=n[e.mediaType],i=a[e.mediaType];t&&t.state!==d&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),S(t,i))}}function S(e,t){isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||(t.segment_request_start_s=.001*e.lastSegmentRequestTimeMs,t.segment_download_finish_s=.001*e.lastSegmentFinishTimeMs,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function w(e){if(e&&e.mediaType){var t=n[e.mediaType];t&&t.state!==d&&(t.abrQuality=e.newQuality)}}function A(e,t){if(e.length!==t.length)return-1;for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function M(){n={},a={}}return t={getMaxIndex:function(e){var t,r=Object(i.default)(m).create(),o=Math.pow(4,.99),s=Math.max(Math.pow(4,1),o*Math.sqrt(4)),u=e.getMediaInfo(),l=e.getMediaType(),v=u.bitrateList.map((function(e){return e.bandwidth})),b=v.length,T=e.getScheduleController(),E=e.getStreamInfo(),S=e.getAbrController(),w=S.getThroughputHistory(),M=E&&E.manifestInfo&&E.manifestInfo.isDynamic,L=e.useL2AABR(),C=g.getCurrentBufferLevel(l,!0),D=w.getSafeAverageThroughput(l,M),k=w.getAverageThroughput(l,M),P=w.getAverageLatency(l),I=e.getVideoModel().getPlaybackRate();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useL2AABR")))return r;if(r.reason=r.reason||{},!L||l===c.default.AUDIO)return r;T.setTimeToLoadDelay(0);var O=function(e){var t=e.getMediaType(),r=n[t];return r||(r=y(e),n[t]=r),r}(e);if(O.state===d)return r;var R=a[l];if(!R)return r;if(r.reason.state=O.state,r.reason.throughput=k,r.reason.latency=P,isNaN(k))return r;switch(O.state){case f:if(t=S.getQualityForBitrate(u,D,E.id,P),r.quality=t,r.reason.throughput=D,O.lastQuality=t,!isNaN(O.lastSegmentDurationS)&&C>=R.B_target){O.state=h,R.Q=o;for(var x=0;x<b;++x)x===O.lastQuality?R.prev_w[x]=1:R.prev_w[x]=0}break;case h:var N=[],j=g.getCurrentHttpRequest(l).trace.reduce((function(e,t){return e+t.d}),0),F=g.getCurrentHttpRequest(l).trace.reduce((function(e,t){return e+t.b[0]}),0),U=Math.round(8*F/j);U<1&&(U=1);for(var B=O.lastSegmentDurationS,Y=1,H=0;H<b;++H)v[H]=v[H]/1e3,I*v[H]>U&&(Y=-1),R.w[H]=R.prev_w[H]+Y*(B/(2*s))*((R.Q+o)*(I*v[H]/U));R.w=function(e){for(var t=e.length,n=!1,r=[],i=0;i<t;++i)r[i]=e[i];for(var a=e.sort((function(e,t){return t-e})),o=0,s=0,u=[],l=0;l<t-1;++l)if((s=((o+=a[l])-1)/(l+1))>=a[l+1]){n=!0;break}n||(s=(o+a[t-1]-1)/t);for(var c=0;c<t;++c)u[c]=Math.max(r[c]-s,0);return u}(R.w);for(var V=0;V<b;++V)N[V]=R.w[V]-R.prev_w[V],R.prev_w[V]=R.w[V];R.Q=Math.max(0,R.Q-B+B*I*((A(v,R.prev_w)+A(v,N))/U));for(var G=[],K=0;K<b;++K)G[K]=Math.abs(v[K]-A(R.w,v));(t=G.indexOf(Math.min.apply(Math,G)))>O.lastQuality&&v[O.lastQuality+1]<=U&&(t=O.lastQuality+1),v[t]>=U&&(R.Q=2*Math.max(o,R.Q)),r.quality=t,r.reason.throughput=k,r.reason.latency=P,r.reason.bufferLevel=C,O.lastQuality=r.quality;break;default:p.debug("L2A ABR rule invoked in bad state."),r.quality=S.getQualityForBitrate(u,D,E.id,P),r.reason.state=O.state,r.reason.throughput=D,r.reason.latency=P,O.state=f,_(O)}return r},reset:function(){M(),v.off(u.default.PLAYBACK_SEEKING,b,t),v.off(u.default.MEDIA_FRAGMENT_LOADED,T,t),v.off(u.default.METRIC_ADDED,E,t),v.off(u.default.QUALITY_CHANGE_REQUESTED,w,t)}},p=Object(l.default)(m).getInstance().getLogger(t),M(),v.on(u.default.PLAYBACK_SEEKING,b,t),v.on(u.default.MEDIA_FRAGMENT_LOADED,T,t),v.on(u.default.METRIC_ADDED,E,t),v.on(u.default.QUALITY_CHANGE_REQUESTED,w,t),t}p.__dashjs_factory_name="L2ARule",t.default=a.default.getClassFactory(p)},"./src/streaming/rules/abr/SwitchHistoryRule.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/rules/SwitchRequest.js");function o(){var e,t,n=this.context,r=.075,o=6;return e={getMaxIndex:function(e){for(var i=e?e.getSwitchHistory():null,s=i?i.getSwitchRequests():[],u=0,l=0,c=0,d=Object(a.default)(n).create(),f=0;f<s.length;f++)if(void 0!==s[f]&&(u+=s[f].drops,l+=s[f].noDrops,c+=s[f].dropSize,u+l>=o&&u/l>r)){d.quality=f>0&&s[f].drops>0?f-1:f,d.reason={index:d.quality,drops:u,noDrops:l,dropSize:c},t.debug("Switch history rule index: "+d.quality+" samples: "+(u+l)+" drops: "+u);break}return d}},t=Object(i.default)(n).getInstance().getLogger(e),e}o.__dashjs_factory_name="SwitchHistoryRule",t.default=r.default.getClassFactory(o)},"./src/streaming/rules/abr/ThroughputRule.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/streaming/constants/Constants.js"),o=n("./src/streaming/constants/MetricsConstants.js");function s(e){e=e||{};var t=this.context,n=e.dashMetrics;return{getMaxIndex:function(e){var r=Object(i.default)(t).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return r;!function(){if(!n||!n.hasOwnProperty("getCurrentBufferState"))throw new Error(a.default.MISSING_CONFIG_ERROR)}();var s=e.getMediaInfo(),u=e.getMediaType(),l=n.getCurrentBufferState(u),c=e.getScheduleController(),d=e.getAbrController(),f=e.getStreamInfo(),h=f?f.id:null,p=f&&f.manifestInfo?f.manifestInfo.isDynamic:null,m=d.getThroughputHistory(),g=m.getSafeAverageThroughput(u,p),v=m.getAverageLatency(u),y=e.useBufferOccupancyABR();return isNaN(g)||!l||y?r:(d.getAbandonmentStateFor(h,u)!==o.default.ABANDON_LOAD&&(l.state===o.default.BUFFER_LOADED||p)&&(r.quality=d.getQualityForBitrate(s,g,h,v),c.setTimeToLoadDelay(0),r.reason={throughput:g,latency:v}),r)},reset:function(){}}}s.__dashjs_factory_name="ThroughputRule",t.default=r.default.getClassFactory(s)},"./src/streaming/rules/abr/lolp/LearningAbrController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a={MANUAL:"manual_weight_selection",RANDOM:"random_weight_selection",DYNAMIC:"dynamic_weight_selection"};function o(){var e,t,n,r,o,s,u,l,c,d=this.context;function f(){n=null,r=1,o=100,s=0,u=null,l=null,c=a.DYNAMIC}function h(){var e=0;if(n)for(var t=0;t<n.length;t++){var r=n[t];r.state.throughput>e&&(e=r.state.throughput)}return e}function p(e,t,n){var r=e.map((function(e,r){return n[r]*Math.pow(e-t[r],2)})).reduce((function(e,t){return e+t}));return(r<0?-1:1)*Math.sqrt(Math.abs(r))}function m(e,t){return p([e.state.throughput,e.state.latency,e.state.rebuffer,e.state.switch],[t.state.throughput,t.state.latency,t.state.rebuffer,t.state.switch],[1,1,1,1])}function g(e,t,n){for(var r=0;r<t.length;r++){var i=t[r],a=m(i,e);v(i,n,Math.exp(-1*Math.pow(a,2)/(2*Math.pow(.1,2))))}}function v(e,t,n){var r=e.state,i=[.01,.01,.01,.01];r.throughput=r.throughput+(t[0]-r.throughput)*i[0]*n,r.latency=r.latency+(t[1]-r.latency)*i[1]*n,r.rebuffer=r.rebuffer+(t[2]-r.rebuffer)*i[2]*n,r.switch=r.switch+(t[3]-r.switch)*i[3]*n}function y(e,t,n,r,i,a,o){u||(u=l[l.length-1]);var s=e.findWeightVector(t,n,r,i,a,o);null!==s&&-1!==s&&(u=s)}return e={getNextQuality:function(e,i,d,f,m,v,_){var b=d,T=f,E=i,S=function(e){if(!n){n=[];var t=e.bitrateList,i=[];s=t[0].bandwidth,t.forEach((function(e){i.push(e.bandwidth),e.bandwidth<s&&(s=e.bandwidth)})),u=i.map((function(e){return Math.pow(e,2)})).reduce((function(e,t){return e+t})),r=Math.sqrt(u);for(var a=0;a<t.length;a++){var o={qualityIndex:a,bitrate:t[a].bandwidth,state:{throughput:t[a].bandwidth/r,latency:0,rebuffer:0,switch:0}};n.push(o)}l=function(e){var t=[],n=function(e){for(var t=[],n=0;n<e;n++){var r=[Math.random()*h(),Math.random(),Math.random(),Math.random()];t.push(r)}return t}(Math.pow(e.length,2));t.push(n[0]);for(var r=[1,1,1,1],i=1;i<e.length;i++){for(var a=null,o=null,s=0;s<n.length;s++){for(var u=n[s],l=null,c=0;c<t.length;c++){var d=p(u,t[c],r);(null===l||d<l)&&(l=d)}(null===o||l>o)&&(a=u,o=l)}t.push(a)}for(var f=null,m=null,g=0;g<t.length;g++){for(var v=0,y=0;y<t.length;y++)g!==y&&(v+=p(t[g],t[y],r));(null===f||v>f)&&(f=v,m=g)}var _=[];for(_.push(t[m]),t.splice(m,1);t.length>0;){for(var b=null,T=null,E=0;E<t.length;E++){var S=p(_[0],t[E],r);(null===b||S<b)&&(b=S,T=E)}_.push(t[T]),t.splice(T,1)}return _}(n)}var u;return n}(e),w=i/r;w>1&&(w=h()),d/=o,t.debug("getNextQuality called throughput:".concat(w," latency:").concat(d," bufferSize:").concat(f," currentQualityIndex:").concat(v," playbackRate:").concat(m));var A=S[v],M=A.bitrate*_.getSegmentDuration()/E,L=Math.max(0,M-T);if(T-M<_.getMinBuffer())return t.debug("Buffer is low for bitrate= ".concat(A.bitrate," downloadTime=").concat(M," currentBuffer=").concat(T," rebuffer=").concat(L)),function(e,t){var r=0,i=e;if(n)for(var a=0;a<n.length;a++){var o=n[a];o.bitrate<e.bitrate&&o.bitrate>r&&t>o.bitrate&&(r=o.bitrate,i=o)}return i}(A,E).qualityIndex;switch(c){case a.MANUAL:u=[.4,.4,.4,.4];break;case a.RANDOM:!function(e){u=function(e,t){for(var n=[],r=Math.sqrt(2/e),i=0;i<t;i++)n.push(Math.random()*r);return u=n}(e.length,4)}(S);break;case a.DYNAMIC:y(_,S,b,T,L,E,m);break;default:y(_,S,b,T,L,E,m)}for(var C=null,D=null,k=null,P=0;P<S.length;P++){var I=S[P],O=I.state,R=[O.throughput,O.latency,O.rebuffer,O.switch],x=u.slice(),N=_.getNextBufferWithBitrate(I.bitrate,T,E),j=N<_.getMinBuffer();j&&t.debug("Buffer is low for bitrate=".concat(I.bitrate," downloadTime=").concat(M," currentBuffer=").concat(T," nextBuffer=").concat(N)),(I.bitrate>i-1e4||j)&&I.bitrate!==s&&(x[0]=100);var F=p(R,[w,0,0,0],x);(null===C||F<C)&&(C=F,D=I.qualityIndex,k=I)}var U=Math.abs(A.bitrate-k.bitrate)/r;return g(A,S,[w,d,L,U]),g(k,S,[w,0,0,U]),D},reset:function(){f()}},t=Object(i.default)(d).getInstance().getLogger(e),f(),e}o.__dashjs_factory_name="LearningAbrController",t.default=r.default.getClassFactory(o)},"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/abr/lolp/QoeInfo.js");function a(){var e,t,n,r,a;function o(){t=null,n=null,r=null,a=null}function s(e,t,n,r){var a=new i.default;return a.type=e,a.weights.bitrateReward=t||1,a.weights.bitrateSwitchPenalty=1,a.weights.rebufferPenalty=n||1e3,a.weights.latencyPenalty=[],a.weights.latencyPenalty.push({threshold:1.1,penalty:.05*r}),a.weights.latencyPenalty.push({threshold:1e8,penalty:.1*n}),a.weights.playbackSpeedPenalty=r||200,a}function u(e,t,n,r,i){i.bitrateWSum+=i.weights.bitrateReward*e,i.lastBitrate&&(i.bitrateSwitchWSum+=i.weights.bitrateSwitchPenalty*Math.abs(e-i.lastBitrate)),i.lastBitrate=e,i.rebufferWSum+=i.weights.rebufferPenalty*t;for(var a=0;a<i.weights.latencyPenalty.length;a++){var o=i.weights.latencyPenalty[a];if(n<=o.threshold){i.latencyWSum+=o.penalty*n;break}}i.playbackSpeedWSum+=i.weights.playbackSpeedPenalty*Math.abs(1-r),i.totalQoe=i.bitrateWSum-i.bitrateSwitchWSum-i.rebufferWSum-i.latencyWSum-i.playbackSpeedWSum}return e={setupPerSegmentQoe:function(e,i,o){t=s("segment",e,i,o),n=e,r=i,a=o},logSegmentMetrics:function(e,n,r,i){t&&u(e,n,r,i,t)},getPerSegmentQoe:function(){return t},calculateSingleUseQoe:function(e,t,i,o){var l=null;return n&&r&&a&&(l=s("segment",n,r,a)),l?(u(e,t,i,o,l),l.totalQoe):0},reset:function(){o()}},o(),e}a.__dashjs_factory_name="LoLpQoeEvaluator",t.default=r.default.getClassFactory(a)},"./src/streaming/rules/abr/lolp/LoLpRule.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/Debug.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/rules/abr/lolp/LearningAbrController.js"),o=n("./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js"),s=n("./src/streaming/rules/SwitchRequest.js"),u=n("./src/streaming/constants/MetricsConstants.js"),l=n("./src/streaming/rules/abr/lolp/LoLpWeightSelector.js"),c=n("./src/streaming/constants/Constants.js"),d=1.5,f=.3;function h(e){var t,n,i,h,p=(e=e||{}).dashMetrics,m=this.context;return n={getMaxIndex:function(e){try{var n=Object(s.default)(m).create(),r=e.getMediaInfo().type,a=e.getAbrController(),o=e.getStreamInfo(),g=a.getQualityFor(r,o.id),v=e.getMediaInfo(),y=p.getCurrentBufferState(r),_=e.getScheduleController(),b=p.getCurrentBufferLevel(r,!0),T=o&&o.manifestInfo?o.manifestInfo.isDynamic:null,E=_.getPlaybackController(),S=E.getCurrentLiveLatency();if(!e.useLoLPABR()||r===c.default.AUDIO)return n;S||(S=0);var w=E.getPlaybackRate(),A=a.getThroughputHistory().getSafeAverageThroughput(r,T);if(t.debug("Throughput ".concat(Math.round(A)," kbps")),isNaN(A)||!y)return n;if(a.getAbandonmentStateFor(o.id,r)===u.default.ABANDON_LOAD)return n;for(var M=v.bitrateList,L=e.getRepresentationInfo().fragmentDuration,C=M[0].bandwidth/1e3,D=M[M.length-1].bandwidth/1e3,k=0;k<M.length;k++){var P=M[k].bandwidth/1e3;P>D?D=P:P<C&&(C=P)}var I=M[g].bandwidth/1e3,O=p.getCurrentHttpRequest(r,!0),R=(O.tresponse.getTime()-O.trequest.getTime())/1e3,x=R>L?R-L:0;h.setupPerSegmentQoe(L,D,C),h.logSegmentMetrics(I,x,S,w);var N=Object(l.default)(m).create({targetLatency:d,bufferMin:f,segmentDuration:L,qoeEvaluator:h});return n.quality=i.getNextQuality(v,1e3*A,S,b,w,g,N),n.reason={throughput:A,latency:S},n.priority=s.default.PRIORITY.STRONG,_.setTimeToLoadDelay(0),n.quality!==g&&console.log("[TgcLearningRule]["+r+"] requesting switch to index: ",n.quality,"Average throughput",Math.round(A),"kbps"),n}catch(e){throw e}},reset:function(){i.reset(),h.reset()}},t=Object(r.default)(m).getInstance().getLogger(n),i=Object(a.default)(m).create(),h=Object(o.default)(m).create(),n}h.__dashjs_factory_name="LoLPRule",t.default=i.default.getClassFactory(h)},"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){var t,n,r,i,a,o=e.targetLatency,s=e.bufferMin,u=e.segmentDuration,l=e.qoeEvaluator;function c(){return u}function d(e,t){var n=c();return t>n?e-n:e+n-t}return t={getMinBuffer:function(){return s},getSegmentDuration:c,getNextBufferWithBitrate:function(e,t,n){return d(t,e*u/n)},getNextBuffer:d,findWeightVector:function(e,t,i,a,c,f){var h=null,p=null,m=null,g=Math.abs(t-r);return e.forEach((function(e){n.forEach((function(n){n[0];var r=n[1],a=n[2],v=(n[3],e.bitrate*u/c),y=d(i,v),_=(0===a?10:1/a)*Math.max(1e-5,v-y),b=(0===r?10:1/r)*e.state.latency,T=l.calculateSingleUseQoe(e.bitrate,_,b,f);(null===h||T>h)&&function(e,t,n){return!(e>o+n)&&t>=s}(t,y,g)&&(h=T,p=n,m=e.bitrate)}))})),null===p&&null===m&&(p=-1),r=t,p}},a=4,n=function e(t,n,r){if(r===n)return t;for(var a=t.length,o=0;o<a;o++)for(var s=t.shift(),u=0;u<i.length;u++)t.push(s.concat(i[u]));return e(t,n,r+1)}((i=[.2,.4,.6,.8,1]).map((function(e){return[e]})),a,1),r=0,t}i.__dashjs_factory_name="LoLpWeightSelector",t.default=r.default.getClassFactory(i)},"./src/streaming/rules/abr/lolp/QoeInfo.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},"./src/streaming/text/EmbeddedTextHtmlRender.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js");function i(){var e=0;function t(e){for(var t="",n=0;n<e.length;++n)t+=e[n].uchar;return t.length-t.replace(/^\s+/,"").length}function n(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function r(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function i(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?r(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?r(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function a(e){return e.replace(/^\s+/g,"")}function o(e){return e.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(r,s,u,l){var c,d,f=null,h=!1,p=-1,m={start:s,end:u,spans:[]},g="style_cea608_white_black",v={},y={},_=[];for(c=0;c<15;++c){var b=l.rows[c],T="",E=null;if(!1===b.isEmpty()){var S=t(b.chars);null===f&&(f={x:S,y1:c,y2:c+1,p:[]}),S!==p&&h&&(f.p.push(m),m={start:s,end:u,spans:[]},f.y2=c,f.name="region_"+f.x+"_"+f.y1+"_"+f.y2,!1===v.hasOwnProperty(f.name)?(_.push(f),v[f.name]=f):v[f.name].p.contat(f.p),f={x:S,y1:c,y2:c+1,p:[]});for(var w=0;w<b.chars.length;++w){var A=b.chars[w],M=A.penState;if(null===E||!M.equals(E)){T.trim().length>0&&(m.spans.push({name:g,line:T,row:c}),T="");var L="style_cea608_"+M.foreground+"_"+M.background;M.underline&&(L+="_underline"),M.italics&&(L+="_italics"),y.hasOwnProperty(L)||(y[L]=JSON.parse(JSON.stringify(M))),E=M,g=L}T+=A.uchar}T.trim().length>0&&m.spans.push({name:g,line:T,row:c}),h=!0,p=S}else h=!1,p=-1,f&&(f.p.push(m),m={start:s,end:u,spans:[]},f.y2=c,f.name="region_"+f.x+"_"+f.y1+"_"+f.y2,!1===v.hasOwnProperty(f.name)?(_.push(f),v[f.name]=f):v[f.name].p.contat(f.p),f=null)}f&&(f.p.push(m),f.y2=c+1,f.name="region_"+f.x+"_"+f.y1+"_"+f.y2,!1===v.hasOwnProperty(f.name)?(_.push(f),v[f.name]=f):v[f.name].p.contat(f.p),f=null);var C=[];for(c=0;c<_.length;++c){var D=_[c],k="sub_cea608_"+e++,P=document.createElement("div");P.id=k;var I=n(D);P.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+I;var O=document.createElement("div");O.className="paragraph bodyStyle",O.style.cssText=i(r);var R=document.createElement("div");R.className="cueUniWrapper",R.style.cssText="unicode-bidi: normal; direction: ltr;";for(var x=0;x<D.p.length;++x){var N=D.p[x],j=0;for(d=0;d<N.spans.length;++d){var F=N.spans[d];if(F.line.length>0){if(0!==d&&j!=F.row){var U=document.createElement("br");U.className="lineBreak",R.appendChild(U)}var B=!1;j===F.row&&(B=!0),j=F.row;var Y=y[F.name],H=document.createElement("span");H.className="spanPadding "+F.name+" customSpanColor",H.style.cssText=i(r,Y),0!==d&&B?d===N.spans.length-1?H.textContent=o(F.line):H.textContent=F.line:N.spans.length>1&&d<N.spans.length-1&&F.row===N.spans[d+1].row?H.textContent=a(F.line):H.textContent=F.line.trim(),R.appendChild(H)}}}O.appendChild(R),P.appendChild(O);var V={bodyStyle:["%",90]};for(var G in y)y.hasOwnProperty(G)&&(V[G]=["%",90]);C.push({type:"html",start:s,end:u,cueHTMLElement:P,cueID:k,cellResolution:[32,15],isFromCEA608:!0,fontSize:V,lineHeight:{},linePadding:{}})}return C}}}i.__dashjs_factory_name="EmbeddedTextHtmlRender",t.default=r.default.getSingletonFactory(i)},"./src/streaming/text/NotFragmentedTextBufferController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/utils/InitCache.js"),s=n("./src/streaming/SourceBufferSink.js"),u=n("./src/streaming/vo/DashJSError.js"),l=n("./src/core/errors/Errors.js"),c="NotFragmentedTextBufferController";function d(e){e=e||{};var t,n,a,d,f,h,p=this.context,m=Object(r.default)(p).getInstance(),g=e.textController,v=e.errHandler,y=e.streamInfo,_=e.type;function b(e){d=e}function T(e){var t,r,a;n!==e&&(n=e)&&(t=i.default.BUFFERING_COMPLETED,a=r||{},m.trigger(t,a,{streamId:y.id,mediaType:_}))}function E(e){e.chunk.bytes&&!n&&(h.save(e.chunk),f.append(e.chunk),T(!0))}return t={initialize:function(e){b(e)},getStreamId:function(){return y.id},getType:function(){return _},getBufferControllerType:function(){return c},createBufferSink:function(e){return new Promise((function(t,n){try{(f=Object(s.default)(p).create({mediaSource:d,textController:g,eventBus:m})).initializeForFirstUse(y,e),a||(f.getBuffer()&&"function"==typeof f.getBuffer().initialize&&f.getBuffer().initialize(),a=!0),t(f)}catch(e){v.error(new u.default(l.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,l.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+_)),n(e)}}))},getBuffer:function(){return f},getBufferLevel:function(){return 0},getRangeAt:function(){return null},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:b,getMediaSource:function(){return d},appendInitSegmentFromCache:function(e){return null!==h.extract(y.id,e)},getIsBufferingCompleted:function(){return n},setIsBufferingCompleted:T,getIsPruningInProgress:function(){return!1},reset:function(e){m.off(i.default.INIT_FRAGMENT_LOADED,E,t),!e&&f&&(f.abort(),f.reset(),f=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return n=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},a=!1,d=null,n=!1,h=Object(o.default)(p).getInstance(),m.on(i.default.INIT_FRAGMENT_LOADED,E,t),t}d.__dashjs_factory_name=c,t.default=a.default.getClassFactory(d)},"./src/streaming/text/TextController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/text/TextSourceBuffer.js"),o=n("./src/streaming/text/TextTracks.js"),s=n("./src/streaming/utils/VTTParser.js"),u=n("./src/streaming/utils/TTMLParser.js"),l=n("./src/core/EventBus.js"),c=n("./src/core/events/Events.js"),d=n("./src/streaming/MediaPlayerEvents.js"),f=n("./src/streaming/utils/SupervisorTools.js");function h(e){var t,n,i,h,p,m,g,v,y,_,b,T,E,S=this.context,w=e.adapter,A=e.errHandler,M=e.manifestModel,L=e.mediaController,C=e.videoModel,D=e.settings;function k(e){var t=e.tracks,r=e.index,i=e.streamId;!1===D.get().streaming.text.defaultEnabled&&!I()||E?O(i,-1):(v&&t.some((function(e,t){if(L.matchSettings(v,e))return O(i,t),r=t,!0})),_=!1),n[i].lastEnabledIndex=r,g.trigger(d.default.TEXT_TRACKS_ADDED,{enabled:I(),index:r,tracks:t,streamId:i}),T=!0}function P(e){if(!y&&e&&e.newMediaInfo){var t=e.newMediaInfo;t.type===r.default.TEXT&&(v={lang:t.lang,role:t.roles[0],index:t.index,codec:t.codec,accessibility:t.accessibility[0]})}}function I(){var e=!0;return _&&!b&&(e=!1),e}function O(e,t){(_=-1===t)&&L&&L.saveTextSettingsDisabled();var n=R(e);if(n!==t&&h[e]){h[e].setModeForTrackIdx(n,r.default.TEXT_HIDDEN),h[e].setCurrentTrackIdx(t),h[e].setModeForTrackIdx(t,r.default.TEXT_SHOWING);var a=h[e].getCurrentTrackInfo();a&&a.isFragmented&&!a.isEmbedded?function(e,t,n){if(i[e])for(var a=i[e].getConfig().fragmentedTracks,o=0;o<a.length;o++){var s=a[o];if(t.lang===s.lang&&(s.id?t.id===s.id:t.index===s.index)){var u=L.getCurrentTrackFor(r.default.TEXT,e);(s.id?u.id!==s.id:u.index!==s.index)?(h[e].deleteCuesFromTrackIdx(n),i[e].setCurrentFragmentedTrackIdx(o)):-1===n&&g.trigger(c.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:e,mediaType:r.default.TEXT})}}}(e,a,n):a&&!a.isFragmented&&function(e,t){g.trigger(c.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:t},{streamId:e,mediaType:r.default.TEXT})}(e,a),L.setTrack(a)}}function R(e){return h[e].getCurrentTrackIdx()}function x(){i={},h={},n={},_=!0,T=!1,E=!1}return t={deactivateStream:function(e){if(e){var t=e.id;i[t]&&i[t].resetMediaInfos(),h[t]&&h[t].deleteAllTextTracks()}},initialize:function(){g.on(c.default.CURRENT_TRACK_CHANGED,P,t),g.on(c.default.TEXT_TRACKS_QUEUE_INITIALIZED,k,t)},initializeForStream:function(e){var t=e.id,r=Object(o.default)(S).create({videoModel:C,streamInfo:e});r.initialize(),h[t]=r;var s=Object(a.default)(S).create({errHandler:A,adapter:w,manifestModel:M,mediaController:L,videoModel:C,textTracks:r,vttParser:p,ttmlParser:m,streamInfo:e});s.initialize(),i[t]=s,n[t]={},n[t].lastEnabledIndex=-1},createTracks:function(e){var t=e.id;h[t]&&h[t].createTracks()},getTextSourceBuffer:function(e){var t=e.id;if(i&&i[t])return i[t]},getAllTracksAreDisabled:function(){return _},addEmbeddedTrack:function(e,t){var n=e.id;i[n]&&i[n].addEmbeddedTrack(t)},setInitialSettings:function(e){v=e,y=!0},enableText:function(e,t){Object(f.checkParameterType)(t,"boolean"),I()!==t&&(t&&O(e,n[e].lastEnabledIndex),t||(n[e].lastEnabledIndex=R(e),T?O(e,-1):E=!0))},isTextEnabled:I,setTextTrack:O,getCurrentTrackIdx:R,enableForcedTextStreaming:function(e){Object(f.checkParameterType)(e,"boolean"),b=e},addMediaInfosToBuffer:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=e.id;i[a]&&i[a].addMediaInfos(t,n,r)},reset:function(){x(),g.off(c.default.CURRENT_TRACK_CHANGED,P,t),g.off(c.default.TEXT_TRACKS_QUEUE_INITIALIZED,k,t),Object.keys(i).forEach((function(e){i[e].resetEmbedded(),i[e].reset()}))}},v=null,b=!1,T=!1,y=!1,E=!1,p=Object(s.default)(S).getInstance(),m=Object(u.default)(S).getInstance(),g=Object(l.default)(S).getInstance(),x(),t}h.__dashjs_factory_name="TextController",t.default=i.default.getClassFactory(h)},"./src/streaming/text/TextSourceBuffer.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/streaming/vo/TextTrackInfo.js"),o=n("./src/streaming/utils/BoxParser.js"),s=n("./src/streaming/utils/CustomTimeRanges.js"),u=n("./src/core/FactoryMaker.js"),l=n("./src/core/Debug.js"),c=n("./src/streaming/text/EmbeddedTextHtmlRender.js"),d=n("./node_modules/codem-isoboxer/dist/iso_boxer.js"),f=n.n(d),h=n("./externals/cea608-parser.js"),p=n.n(h),m=n("./src/core/EventBus.js"),g=n("./src/core/events/Events.js"),v=n("./src/streaming/vo/DashJSError.js"),y=n("./src/core/errors/Errors.js");function _(e){var t,n,u,d,h,_,b,T,E,S,w,A,M,L,C,D,k=e.errHandler,P=e.manifestModel,I=e.mediaController,O=e.videoModel,R=e.textTracks,x=e.vttParser,N=e.ttmlParser,j=e.streamInfo,F=this.context,U=Object(m.default)(F).getInstance(),B=!1,Y=new Map;function H(){_=null,T=NaN,E=[],S=null,b=!1,h=[],d=null}function V(e){var t=new a.default;for(var n in e)t[n]=e[n];t.labels=e.labels,t.defaultTrack=function(e){var t=!1;return A.length>1&&e.isEmbedded?t=e.id&&e.id===r.default.CC1:1===A.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===A.length&&(t=e.index===h[0].index),t}(e),t.isFragmented=e.isFragmented,t.isEmbedded=!!e.isEmbedded,t.isTTML=function(e){return e.codec&&e.codec.search(r.default.STPP)>=0||e.mimeType&&e.mimeType.search(r.default.TTML)>=0}(e),t.kind=function(e,t){var n=e.roles&&e.roles.length>0?t[e.roles[0]]:t.caption;return n=n===t.caption||n===t.subtitle?n:t.caption}(e,{subtitle:"subtitles",caption:"captions"}),R.addTextTrack(t)}function G(e){var t=e.chunk,n="".concat(t.streamId,"_").concat(t.mediaInfo.id,"_").concat(t.index);t.mediaInfo.embeddedCaptions&&!Y.has(n)&&(W(t.bytes,t),"MediaSegment"===t.segmentType&&Y.set(n,{start:t.start,end:t.end}))}function K(e){w=e}function W(e,a){var o=a.mediaInfo,s=o.type,l=o.mimeType,c=o.codec||l;c?-1!==o.codec.indexOf("application/mp4")?function(e,i,a){var o,s;if("InitializationSegment"===i.segmentType)b=!0,T=u.getMediaTimescaleFromMoov(e);else{if(!b)return;s=u.getSamplesInfo(e),(o=s.sampleList).length>0&&(S=o[0].cts-i.start*T),a.search(r.default.STPP)>=0?function(e,i,a){var o,s;for(d=null!==d?d:X(a),o=0;o<i.length;o++){var u=i[o],l=u.cts,c=z(),h=c+l/T,p=h+u.duration/T;t.buffered.add(h,p);var m=new DataView(e,u.offset,u.subSizes[0]),g=f.a.Utils.dataViewToString(m,r.default.UTF8),v=[],y=u.offset+u.subSizes[0];for(s=1;s<u.subSizes.length;s++){var b=new Uint8Array(e,y,u.subSizes[s]),E=String.fromCharCode.apply(null,b);v.push(E),y+=u.subSizes[s]}try{var S=P.getValue().ttmlTimeIsRelative?l/T:0,A=d.parse(g,S,l/T,(l+u.duration)/T,v);R.addCaptions(w,c,A)}catch(e){_.removeExecutedRequestsBeforeTime(),this.remove(),n.error("TTML parser error: "+e.message)}}}(e,o,a):function(e,r){var i,a,o,s=[];for(i=0;i<r.length;i++){var u=r[i];u.cts-=S;var l=z()+u.cts/T,c=l+u.duration/T;t.buffered.add(l,c);var d=e.slice(u.offset,u.offset+u.size),h=f.a.parseBuffer(d);for(a=0;a<h.boxes.length;a++){var p=h.boxes[a];if(n.debug("VTT box1: "+p.type),"vtte"!==p.type&&"vttc"===p.type)for(n.debug("VTT vttc boxes.length = "+p.boxes.length),o=0;o<p.boxes.length;o++){var m=p.boxes[o];if(n.debug("VTT box2: "+m.type),"payl"===m.type){var g=m.cue_text;n.debug("VTT cue_text = "+g);var v=u.cts/T,y=(u.cts+u.duration)/T;s.push({start:v,end:y,data:g,styles:{}}),n.debug("VTT "+v+"-"+y+" : "+g)}}}}s.length>0&&R.addCaptions(w,0,s)}(e,o)}}(e,a,c):s===r.default.VIDEO?function(e,t){var r,a;if(t.segmentType===i.HTTPRequest.INIT_SEGMENT_TYPE)0===M&&(M=u.getMediaTimescaleFromMoov(e));else if(t.segmentType===i.HTTPRequest.MEDIA_SEGMENT_TYPE){if(0===M)return void n.warn("CEA-608: No timescale for embeddedTextTrack yet");var o=(a=u.getSamplesInfo(e)).lastSequenceNumber;if(C[0]||C[1]||function(){for(var e,t=0;t<A.length;t++){if(-1===(e=R.getTrackIdxForId(A[t].id)))return void n.warn("CEA-608: data before track is ready.");var r=q(e);C[t]=new p.a.Cea608Parser(t+1,{newCue:r},null)}}(),M){if(null!==L&&o!==L+a.numSequences)for(r=0;r<C.length;r++)C[r]&&C[r].reset();for(var s=function(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(e),i=0;i<t.length;i++)for(var a=t[i],o=p.a.extractCea608DataFromSample(r,a.offset,a.size),s=null,u=0,l=0;l<2;l++)if(o[l].length>0){a.cts!==s?u=0:u+=1;var c=z();n.fields[l].push([a.cts+c*M,o[l],u]),s=a.cts}return n.fields.forEach((function(e){e.sort((function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]}))})),n}(e,a.sampleList),l=0;l<C.length;l++){var c=s.fields[l],d=C[l];if(d)for(r=0;r<c.length;r++)d.addData(c[r][0]/M,c[r][1])}L=o}}}(e,a):function(e,n,i){var a,o,s=new DataView(e,0,e.byteLength);o=f.a.Utils.dataViewToString(s,r.default.UTF8);try{a=X(i).parse(o,0),R.addCaptions(R.getCurrentTrackIdx(),0,a),t.buffered&&t.buffered.add(n.start,n.end)}catch(e){k.error(new v.default(y.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,y.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,o))}}(e,a,c):n.error("No text type defined")}function q(e){return function(t,n,r){var i;(i=O.getTTMLRenderingDiv()?D.createHTMLCaptionsFromScreen(O.getElement(),t,n,r):[{start:t,end:n,data:r.getDisplayText(),styles:{}}])&&R.addCaptions(e,0,i)}}function z(){return isNaN(t.timestampOffset)?0:t.timestampOffset}function X(e){var t;return e.search(r.default.VTT)>=0?t=x:(e.search(r.default.TTML)>=0||e.search(r.default.STPP)>=0)&&(t=N),t}function Q(e){A.forEach((function(t){var n=R.getTrackIdxForId(t.id);n>=0&&(R.deleteCuesFromTrackIdx(n,e.from,e.to),Array.from(Y.entries()).filter((function(t){var n=t[1].start,r=t[1].end;return Math.max(n,e.from)<Math.min(r,e.to)})).forEach((function(e){var t=e[0];Y.delete(t)})))}))}return t={initialize:function(){B||(A=[],w=null,M=0,C=[],L=null,B=!0,D=Object(c.default)(F).getInstance(),U.on(g.default.VIDEO_CHUNK_RECEIVED,G,t),U.on(g.default.BUFFER_CLEARED,Q,t))},addMediaInfos:function(e,n,i){if(h=h.concat(n),e===r.default.TEXT&&n[0].isFragmented&&!n[0].isEmbedded){_=i,t.buffered=Object(s.default)(F).create(),E=I.getTracksFor(r.default.TEXT,j.id).filter((function(e){return e.isFragmented}));for(var a=I.getCurrentTrackFor(r.default.TEXT,j.id),o=0;o<E.length;o++)if(E[o]===a){K(o);break}}for(var u=0;u<n.length;u++)V(n[u])},resetMediaInfos:function(){h=[]},getStreamId:function(){return j.id},append:W,abort:function(){},addEmbeddedTrack:function(e){if(B&&e)if(e.id===r.default.CC1||e.id===r.default.CC3){for(var t=0;t<A.length;t++)if(A[t].id===e.id)return;A.push(e)}else n.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){U.off(g.default.VIDEO_CHUNK_RECEIVED,G,t),U.off(g.default.BUFFER_CLEARED,Q,t),R&&R.deleteAllTextTracks(),B=!1,A=[],C=[null,null],L=null},getConfig:function(){return{fragmentModel:_,fragmentedTracks:E,videoModel:O}},setCurrentFragmentedTrackIdx:K,remove:function(e,n){void 0===e&&e===n&&(e=t.buffered.start(0),n=t.buffered.end(t.buffered.length-1)),t.buffered.remove(e,n),R.deleteCuesFromTrackIdx(w,e,n)},reset:function(){H(),h=[],u=null}},n=Object(l.default)(F).getInstance().getLogger(t),u=Object(o.default)(F).getInstance(),H(),t}_.__dashjs_factory_name="TextSourceBuffer",t.default=u.default.getClassFactory(_)},"./src/streaming/text/TextTracks.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),o=n("./src/streaming/MediaPlayerEvents.js"),s=n("./src/core/FactoryMaker.js"),u=n("./src/core/Debug.js"),l=n("./node_modules/imsc/src/main/js/main.js");function c(e){var t,n,s,c,d,f,h,p,m,g,v,y,_,b,T,E,S,w=this.context,A=Object(i.default)(w).getInstance(),M=e.videoModel,L=e.streamInfo;function C(e,t,n,r,i,a){var o=0,s=0;e/t>n/r?o=(s=t)/r*n:s=(o=e)/n*r;var u,l,c=0,d=0;return o/s>i?(d=s,c=s*i):(c=o,d=o/i),u=(e-c)/2,l=(t-d)/2,a?{x:u+.1*c,y:l+.1*d,w:.8*c,h:.8*d}:{x:u,y:l,w:c,h:d}}function D(e,t){var n=M.getClientWidth(),r=M.getClientHeight(),i=M.getVideoWidth(),a=M.getVideoHeight(),s=M.getVideoRelativeOffsetTop(),u=M.getVideoRelativeOffsetLeft();if(0!==i&&0!==a){var l=i/a,c=!1;e.isFromCEA608&&(l=3.5/3,c=!0);var d=C.call(this,n,r,i,a,l,c),f=d.w,y=d.h,T=d.x,S=d.y;if(f!=m||y!=g||T!=h||S!=p||t){if(h=T+u,p=S+s,m=f,g=y,v){var w=v.style;w&&(w.left=h+"px",w.top=p+"px",w.width=m+"px",w.height=g+"px",w.zIndex=_&&document[_]||b?E:null,A.trigger(o.default.CAPTION_CONTAINER_RESIZE))}var L=e.activeCues;if(L)for(var D=L.length,k=0;k<D;++k){var P=L[k];P.scaleCue(P)}}}}function k(e){var t,n,r,i,a,o=m,s=g;if(e.cellResolution){var u=[o/e.cellResolution[0],s/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t)){n=(e.linePadding[t]*u[0]).toString();for(var l=document.getElementsByClassName("spanPadding"),c=0;c<l.length;c++)l[c].style.cssText=l[c].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n),l[c].style.cssText=l[c].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.fontSize){for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?r=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(r=e.fontSize[t][1]),n=(r*u[1]).toString(),a="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph");for(var d=0;d<a.length;d++)a[d].style.cssText=a[d].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?i=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(i=e.lineHeight[t][1]),n=(i*u[1]).toString(),a=document.getElementsByClassName(t);for(var f=0;f<a.length;f++)a[f].style.cssText=a[f].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}}}if(e.isd){var h=document.getElementById(e.cueID);h&&v.removeChild(h),P(e)}}function P(e){if(v){var t=document.createElement("div");v.appendChild(t),T=Object(l.renderHTML)(e.isd,t,(function(t){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,r=/^#(.*)$/;if(n.test(t)){var i=n.exec(t),a=parseInt(i[4],10)-1;return"data:image/png;base64,"+btoa(e.images[a])}if(r.test(t)){var o=r.exec(t)[1];return"data:image/png;base64,"+e.embeddedImages[o]}return null}),v.clientHeight,v.clientWidth,!1,(function(e){n.info("renderCaption :",e)}),T,!0),t.id=e.cueID,A.trigger(o.default.CAPTION_RENDERED,{captionDiv:t,currentTrackIdx:f})}}function I(e,t,i){var a=O(e),u=this;if(a&&Array.isArray(i)&&0!==i.length)for(var l=0;l<i.length;l++){var c=void 0,d=i[l];a.cellResolution=d.cellResolution,a.isFromCEA608=d.isFromCEA608,"html"!==d.type||!v||isNaN(d.start)||isNaN(d.end)?!d.data||isNaN(d.start)||isNaN(d.end)||(c=new s(d.start-t,d.end-t,d.data),d.styles&&(void 0!==d.styles.align&&"align"in c&&(c.align=d.styles.align),void 0!==d.styles.line&&"line"in c&&(c.line=d.styles.line),void 0!==d.styles.position&&"position"in c&&(c.position=d.styles.position),void 0!==d.styles.size&&"size"in c&&(c.size=d.styles.size)),c.onenter=function(){a.mode===r.default.TEXT_SHOWING&&A.trigger(o.default.CAPTION_RENDERED,{currentTrackIdx:f})}):((c=new s(d.start+t,d.end+t,"")).cueHTMLElement=d.cueHTMLElement,c.isd=d.isd,c.images=d.images,c.embeddedImages=d.embeddedImages,c.cueID=d.cueID,c.scaleCue=k.bind(u),c.cellResolution=d.cellResolution,c.lineHeight=d.lineHeight,c.linePadding=d.linePadding,c.fontSize=d.fontSize,v.style.left=h+"px",v.style.top=p+"px",v.style.width=m+"px",v.style.height=g+"px",c.onenter=function(){a.mode===r.default.TEXT_SHOWING&&(this.isd?(P(this),n.debug("Cue enter id:"+this.cueID)):(v.appendChild(this.cueHTMLElement),k.call(u,this),A.trigger(o.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:f})))},c.onexit=function(){if(v)for(var e=v.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(n.debug("Cue exit id:"+e[t].id),v.removeChild(e[t]),--t)});try{c?N(a,c)||a.addCue(c):n.error("impossible to display subtitles.")}catch(e){throw F(a),a.addCue(c),e}}}function O(e){return e>=0&&c[e]?M.getTextTrack(c[e].kind,c[e].id,c[e].lang,c[e].isTTML,c[e].isEmbedded):null}function R(e){var t=this;if(e!==f){var n=O(f=e);x.call(this,n),y&&(clearInterval(y),y=null),n&&"html"===n.renderingType&&(D.call(this,n,!0),window.ResizeObserver?(S=new window.ResizeObserver((function(){D.call(t,n,!0)}))).observe(M.getElement()):y=setInterval(D.bind(this,n),500))}}function x(e){Y.call(this),e&&"html"===e.renderingType?U.call(this):B.call(this)}function N(e,t){if(!e.cues)return!1;for(var n=0;n<e.cues.length;n++)if(e.cues[n].startTime===t.startTime&&e.cues[n].endTime===t.endTime)return!0;return!1}function j(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(isNaN(t)||(r?e.startTime:e.endTime)>=t)&&(isNaN(n)||(r?e.endTime:e.startTime)<=n)}function F(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.cues)for(var i=e.cues,a=i.length-1;a>=0;a--)j(i[a],t,n,r)&&(i[a].onexit&&i[a].onexit(),e.removeCue(i[a]))}function U(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,r=M.getElement();try{r&&(r.id?t.insertRule("#"+r.id+"::cue {background: transparent}",0):0!==r.classList.length?t.insertRule("."+r.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){n.info(""+e.message)}}}function B(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function Y(){if(v)for(;v.firstChild;)v.removeChild(v.firstChild)}return t={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(s=window.VTTCue||window.TextTrackCue,c=[],d=[],f=-1,h=0,p=0,m=0,g=0,v=null,y=null,b=!1,E=2147483647,T=null,void 0!==document.fullscreenElement?_="fullscreenElement":void 0!==document.webkitIsFullScreen?_="webkitIsFullScreen":document.msFullscreenElement?_="msFullscreenElement":document.mozFullScreen&&(_="mozFullScreen"))},getStreamId:function(){return L.id},addTextTrack:function(e){c.push(e)},addCaptions:I,createTracks:function(){c.sort((function(e,t){return e.index-t.index})),v=M.getTTMLRenderingDiv();for(var e,t,n,i,s,u,l=-1,h=0;h<c.length;h++){var p=(e=c[h],t=void 0,n=void 0,i=void 0,s=void 0,u=void 0,t=e.kind,n=void 0!==e.id?e.id:e.lang,i=e.lang,s=e.isTTML,u=e.isEmbedded,M.addTextTrack(t,n,i,s,u));d.push(p),c[h].defaultTrack&&(p.default=!0,l=h);var m=O(h);m&&(m.mode=r.default.TEXT_SHOWING,v&&(c[h].isTTML||c[h].isEmbedded)?m.renderingType="html":m.renderingType="default"),I(h,0,c[h].captionData),A.trigger(o.default.TEXT_TRACK_ADDED)}if(R.call(this,l),l>=0){A.on(o.default.PLAYBACK_METADATA_LOADED,(function e(){var t=O(l);t&&"html"===t.renderingType&&D.call(this,t,!0),A.off(o.default.PLAYBACK_METADATA_LOADED,e,this)}),this);for(var g=0;g<c.length;g++){var y=O(g);y&&(y.mode=g===l?r.default.TEXT_SHOWING:r.default.TEXT_HIDDEN)}}A.trigger(a.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:f,tracks:c,streamId:L.id})},getCurrentTrackIdx:function(){return f},setCurrentTrackIdx:R,getTrackIdxForId:function(e){for(var t=-1,n=0;n<c.length;n++)if(c[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return c[f]},setModeForTrackIdx:function(e,t){var n=O(e);n&&n.mode!==t&&(n.mode=t)},deleteCuesFromTrackIdx:function(e,t,n){var r=O(e);r&&F(r,t,n)},deleteAllTextTracks:function(){for(var e=d?d.length:0,t=0;t<e;t++){var n=O(t);n&&F.call(this,n,L.start,L.start+L.duration,!1)}d=[],c=[],y&&(clearInterval(y),y=null),S&&M&&(S.unobserve(M.getElement()),S=null),f=-1,Y.call(this)},deleteTextTrack:function(e){M.removeChild(d[e]),d.splice(e,1)}},n=Object(u.default)(w).getInstance().getLogger(t),t}c.__dashjs_factory_name="TextTracks",t.default=s.default.getClassFactory(c)},"./src/streaming/thumbnail/ThumbnailController.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/streaming/vo/Thumbnail.js"),o=n("./src/streaming/thumbnail/ThumbnailTracks.js"),s=n("./src/streaming/vo/BitrateInfo.js"),u=n("./src/dash/utils/SegmentsUtils.js");function l(e){var t,n,r=this.context,l=e.streamInfo;function c(e){n.setTrackByIndex(e)}function d(){n&&n.reset()}return t={getStreamId:function(){return l.id},initialize:function(){n.addTracks();var e=n.getTracks();e&&e.length>0&&c(0)},provide:function(e,t){if("function"==typeof t){var r,i,o=n.getCurrentTrack();if(!o||o.segmentDuration<=0||null==e)t(null);else{(i=n.getThumbnailRequestForTime(e))&&(o.segmentDuration=i.duration),r=e%o.segmentDuration;var s=Math.floor(r*o.tilesHor*o.tilesVert/o.segmentDuration),l=new a.default;if(l.width=Math.floor(o.widthPerTile),l.height=Math.floor(o.heightPerTile),l.x=Math.floor(s%o.tilesHor)*o.widthPerTile,l.y=Math.floor(s/o.tilesHor)*o.heightPerTile,"readThumbnail"in o)return o.readThumbnail(e,(function(e){l.url=e,t(l)}));if(i)l.url=i.url,o.segmentDuration=NaN;else{var c=Math.floor(e/o.segmentDuration);l.url=function(e,t){var n=t+e.startNumber,r=Object(u.replaceTokenForTemplate)(e.templateUrl,"Number",n);return r=Object(u.replaceTokenForTemplate)(r,"Time",(n-1)*e.segmentDuration*e.timescale),r=Object(u.replaceTokenForTemplate)(r,"Bandwidth",e.bandwidth),Object(u.unescapeDollarsInTemplate)(r)}(o,c)}t(l)}}},setTrackByIndex:c,getCurrentTrackIndex:function(){return n.getCurrentTrackIndex()},getBitrateList:function(){var e=n.getTracks(),t=0;return e.map((function(e){var n=new s.default;return n.mediaType=i.default.IMAGE,n.qualityIndex=t++,n.bitrate=e.bitrate,n.width=e.width,n.height=e.height,n}))},reset:d},d(),n=Object(o.default)(r).create({streamInfo:l,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController}),t}l.__dashjs_factory_name="ThumbnailController",t.default=r.default.getClassFactory(l)},"./src/streaming/thumbnail/ThumbnailTracks.js":function(e,t,n){"use strict";n.r(t),n.d(t,"THUMBNAILS_SCHEME_ID_URIS",(function(){return h}));var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/vo/ThumbnailTrackInfo.js"),s=n("./src/streaming/utils/URLUtils.js"),u=n("./src/dash/utils/SegmentsUtils.js"),l=n("./src/streaming/utils/BoxParser.js"),c=n("./src/streaming/net/XHRLoader.js"),d=n("./src/dash/DashHandler.js"),f=n("./src/dash/controllers/SegmentsController.js"),h=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function p(e){var t,n,a,p,m,g,v,y,_=this.context,b=e.adapter,T=e.baseURLController,E=e.streamInfo,S=e.timelineConverter,w=e.debug,A=e.eventBus,M=e.events,L=e.dashConstants,C=Object(s.default)(_).getInstance();function D(e,t){var r=new o.default;r.id=e.id,r.bitrate=e.bandwidth,r.width=e.width,r.height=e.height,r.tilesHor=1,r.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach((function(e){if(h.indexOf(e.schemeIdUri)>=0&&e.value){var t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(r.tilesHor=parseInt(t[0],10),r.tilesVert=parseInt(t[1],10))}})),t?g.updateSegmentData(e).then((function(t){!function(e,t,n){var r=[],i=function(e,t){var n,r,i,a,o=[],s=0;for(n=0,r=e.segments.length;n<r;n++)i=e.segments[n],(a=Object(u.getTimeBasedSegment)(S,b.getIsDynamic(),t,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,s))&&(o.push(a),a=null,s++);return o}(n,t);t.segments=i,e.segmentDuration=t.segments[0].duration,e.readThumbnail=function(e,n){var i=null;r.some((function(t){if(t.start<=e&&t.end>e)return i=t.url,!0})),i?n(i):t.segments.some((function(i){if(i.mediaStartTime<=e&&i.mediaStartTime+i.duration>e){var a=T.resolve(t.path);return v.load({method:"get",url:a.url,request:{range:i.mediaRange,responseType:"arraybuffer"},onload:function(e){var t=y.getSamplesInfo(e.target.response),a=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),o=window.URL.createObjectURL(a);r.push({start:i.mediaStartTime,end:i.mediaStartTime+i.duration,url:o}),n&&n(o)}}),!0}}))}}(r,e,t)})):(r.startNumber=e.startNumber,r.segmentDuration=e.segmentDuration,r.timescale=e.timescale,r.templateUrl=function(e){var t=C.isRelative(e.media)?C.resolve(e.media,T.resolve(e.path).url):e.media;return t?Object(u.replaceIDForTemplate)(t,e.id):""}(e)),r.tilesHor>0&&r.tilesVert>0&&(r.widthPerTile=r.width/r.tilesHor,r.heightPerTile=r.height/r.tilesVert,n.push(r))}function k(){n=[],p=-1,m=null}return t={getTracks:function(){return n},addTracks:function(){if(E&&b&&(m=b.getMediaInfoForType(E,r.default.IMAGE))){var e=b.getVoRepresentations(m);e&&e.length>0&&e.forEach((function(e){(e.segmentInfoType===i.default.SEGMENT_TEMPLATE&&e.segmentDuration>0&&e.media||e.segmentInfoType===i.default.SEGMENT_TIMELINE)&&D(e),e.segmentInfoType===i.default.SEGMENT_BASE&&D(e,!0)})),n.length>0&&n.sort((function(e,t){return e.bitrate-t.bitrate}))}},reset:k,setTrackByIndex:function(e){n&&0!==n.length&&(e>=n.length&&(e=n.length-1),p=e)},getCurrentTrack:function(){return p<0?null:n[p]},getCurrentTrackIndex:function(){return p},getThumbnailRequestForTime:function(e){for(var t,r=b.getVoRepresentations(m),i=0;i<r.length;i++)if(n[p].id===r[i].id){t=r[i];break}return a.getSegmentRequestForTime(m,t,e)}},k(),v=Object(c.default)(_).create({}),y=Object(l.default)(_).getInstance(),g=Object(f.default)(_).create({events:M,eventBus:A,streamInfo:E,timelineConverter:S,dashConstants:L,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController,type:r.default.IMAGE}),(a=Object(d.default)(_).create({streamInfo:E,type:r.default.IMAGE,timelineConverter:S,segmentsController:g,baseURLController:T,debug:w,eventBus:A,events:M,dashConstants:L,urlUtils:C})).initialize(!!b&&b.getIsDynamic()),t}p.__dashjs_factory_name="ThumbnailTracks",t.default=a.default.getClassFactory(p)},"./src/streaming/utils/BaseURLSelector.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/errors/Errors.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),o=n("./src/streaming/controllers/BlacklistController.js"),s=n("./src/streaming/utils/baseUrlResolution/DVBSelector.js"),u=n("./src/streaming/utils/baseUrlResolution/BasicSelector.js"),l=n("./src/core/FactoryMaker.js"),c=n("./src/streaming/vo/DashJSError.js"),d=n("./src/streaming/utils/SupervisorTools.js");function f(){var e,t,n,l,f,h=this.context,p=Object(i.default)(h).getInstance();function m(){t.reset()}return e={chooseSelector:function(e){Object(d.checkParameterType)(e,"boolean"),f=e?l:n},select:function(e){if(e){var t=e.baseUrls,i=e.selectedIdx;if(!isNaN(i))return t[i];var o=f.select(t);return o?(e.selectedIdx=t.indexOf(o),o):(p.trigger(a.default.URL_RESOLUTION_FAILED,{error:new c.default(r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(f===n&&m()))}},reset:m,setConfig:function(e){e.selector&&(f=e.selector)}},t=Object(o.default)(h).create({updateEventName:a.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:a.default.SERVICE_LOCATION_BLACKLIST_ADD}),n=Object(u.default)(h).create({blacklistController:t}),l=Object(s.default)(h).create({blacklistController:t}),f=n,e}f.__dashjs_factory_name="BaseURLSelector",t.default=l.default.getClassFactory(f)},"./src/streaming/utils/BoxParser.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/Debug.js"),i=n("./src/streaming/utils/IsoFile.js"),a=n("./src/core/FactoryMaker.js"),o=n("./node_modules/codem-isoboxer/dist/iso_boxer.js"),s=n.n(o),u=n("./src/streaming/vo/IsoBoxSearchInfo.js");function l(){var e,t,n=this.context;function a(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=s.a.parseBuffer(e),r=Object(i.default)(n).create();return r.setData(t),r}function o(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function l(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return t={parse:a,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new u.default(0,!1);for(var r,i=t instanceof ArrayBuffer?new Uint8Array(t):t,a=0;n<i.byteLength;){var s=o(i,n),c=l(i,n+4);if(0===s)break;n+s<=i.byteLength&&(e.indexOf(c)>=0?r=new u.default(n,!0,s):a=n+s),n+=s}return r||new u.default(a,!1)},getMediaTimescaleFromMoov:function(e){var t=a(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t,n,r,i,o,s,u,l,c,d,f,h,p,m,g,v,y=a(e),_=y.getBoxes("moof"),b=y.getBoxes("mfhd");g=y.getBoxes("moof").length,m=b[b.length-1].sequence_number,n=0,o=[];var T=-1,E=-1;for(d=0;d<_.length;d++){var S=_[d],w=S.getChildBoxes("traf");for(l=0;l<w.length;l++){var A=w[l],M=A.getChildBox("tfhd"),L=A.getChildBox("tfdt");i=L.baseMediaDecodeTime;var C=A.getChildBoxes("trun"),D=A.getChildBoxes("subs");for(c=0;c<C.length;c++){var k=C[c];for(n=k.sample_count,p=(M.base_data_offset||0)+(k.data_offset||0),u=0;u<n;u++){t=void 0!==(s=k.samples[u]).sample_duration?s.sample_duration:M.default_sample_duration,r=void 0!==s.sample_size?s.sample_size:M.default_sample_size;var P={dts:i,cts:i+(void 0!==s.sample_composition_time_offset?s.sample_composition_time_offset:0),duration:t,offset:S.offset+p,size:r,subSizes:[r]};if(D)for(f=0;f<D.length;f++){var I=D[f];if(T<I.entry_count-1&&u>E&&(T++,E+=I.entries[T].sample_delta),u==E){P.subSizes=[];var O=I.entries[T];for(h=0;h<O.subsample_count;h++)P.subSizes.push(O.subsamples[h].subsample_size)}}o.push(P),p+=r,i+=t}}v=i-L.baseMediaDecodeTime}}return{sampleList:o,lastSequenceNumber:m,totalDuration:v,numSequences:g}},findInitRange:function(t){var n=null,r=a(t);if(!r)return n;var i=r.getBox("ftyp"),o=r.getBox("moov");return e.debug("Searching for initialization."),o&&o.isComplete&&(n=(i?i.offset:o.offset)+"-"+(o.offset+o.size-1),e.debug("Found the initialization.  Range: "+n)),n},parsePayload:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new u.default(0,!1);for(var r,i=t instanceof ArrayBuffer?new Uint8Array(t):t,a=0;n<i.byteLength;){var s=o(i,n),c=l(i,n+4);if(0===s)break;n+s<=i.byteLength&&(e.indexOf(c)>=0?r=new u.default(n,!0,s,c):a=n+s),n+=s}return r||new u.default(a,!1)}},e=Object(r.default)(n).getInstance().getLogger(t),t}l.__dashjs_factory_name="BoxParser",t.default=a.default.getSingletonFactory(l)},"./src/streaming/utils/Capabilities.js":function(e,t,n){"use strict";n.r(t),n.d(t,"supportsMediaSource",(function(){return s}));var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/thumbnail/ThumbnailTracks.js"),a=n("./src/streaming/constants/Constants.js"),o=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function s(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function u(){var e,t,n;return e={setConfig:function(e){e&&e.settings&&(t=e.settings)},supportsMediaSource:s,supportsEncryptedMedia:function(){return n},supportsCodec:function(e,n){return n!==a.default.AUDIO&&n!==a.default.VIDEO?Promise.resolve(!0):function(e,n){return t.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(e.codec&&n===a.default.AUDIO||n===a.default.VIDEO&&e.codec&&e.width&&e.height&&e.bitrate&&e.framerate)}(e,n)?function(e,t){return new Promise((function(n){if(e&&e.codec){var r={type:"media-source"};r[t]={},r[t].contentType=e.codec,r[t].width=e.width,r[t].height=e.height,r[t].bitrate=parseInt(e.bitrate),r[t].framerate=parseFloat(e.framerate),navigator.mediaCapabilities.decodingInfo(r).then((function(e){n(e.supported)})).catch((function(){n(!1)}))}else n(!1)}))}(e,n):function(e){return new Promise((function(t){if(e&&e.codec){var n=e.codec;e.width&&e.height&&(n+=';width="'+e.width+'";height="'+e.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(n)?t(!0):"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(n)?t(!0):t(!1)}else t(!1)}))}(e)},setEncryptedMediaSupported:function(e){n=e},supportsEssentialProperty:function(e){try{return-1!==i.THUMBNAILS_SCHEME_ID_URIS.indexOf(e.schemeIdUri)}catch(e){return!0}},codecRootCompatibleWithCodec:function(e,t){for(var n,r=e.split(".")[0],i=0===t.indexOf(r),a=0;a<o.length;a++)if(o[a].codec===r){n=o[a];break}return n?i||n.compatibleCodecs.some((function(e){return 0===t.indexOf(e)})):i}},n=!1,e}u.__dashjs_factory_name="Capabilities",t.default=r.default.getSingletonFactory(u)},"./src/streaming/utils/CapabilitiesFilter.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/constants/Constants.js"),o=n("./src/core/EventBus.js"),s=n("./src/core/events/Events.js");function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(){var e,t,n,r,c,d,f=this.context,h=Object(o.default)(f).getInstance();function p(e,i){if(!i||!i.Period_asArray||0===i.Period_asArray.length)return Promise.resolve();var o=[];return i.Period_asArray.forEach((function(i){o.push(function(e,i){return new Promise((function(o){if(e&&e.AdaptationSet_asArray&&0!==e.AdaptationSet_asArray.length){var c=[];e.AdaptationSet_asArray.forEach((function(e){t.getIsTypeOf(e,i)&&c.push(function(e,i){return new Promise((function(o){if(e.Representation_asArray&&0!==e.Representation_asArray.length){var s=[],c=[],f=r.get().streaming.capabilities.replaceCodecs;e.Representation_asArray.forEach((function(r,o){var d,h=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(f);try{for(h.s();!(d=h.n()).done;){var p,m=u(d.value,2),g=m[0],v=m[1];(null===(p=r.codecs)||void 0===p?void 0:p.toLowerCase())===g.toLowerCase()&&(r.codecs=v)}}catch(e){h.e(e)}finally{h.f()}var y=t.getCodec(e,o,!1),_=function(e,t,n){switch(e){case a.default.VIDEO:return function(e,t){var n=e.width||null,r=e.height||null,i=e.frameRate||null,a=e.bandwidth||null;return{codec:t,width:n,height:r,framerate:i,bitrate:a}}(t,n);case a.default.AUDIO:return function(e,t){var n=e.audioSamplingRate||null,r=e.bandwidth||null;return{codec:t,bitrate:r,samplerate:n}}(t,n);default:return null}}(i,r,y);c.push(_),s.push(n.supportsCodec(_,i))})),Promise.all(s).then((function(t){e.Representation_asArray=e.Representation_asArray.filter((function(e,n){return t[n]||d.debug("[Stream] Codec ".concat(c[n].codec," not supported ")),t[n]})),o()})).catch((function(){o()}))}else o()}))}(e,i))})),Promise.all(c).then((function(){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter((function(e){var t=e.Representation_asArray&&e.Representation_asArray.length>0;return t||(h.trigger(s.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:e}),d.warn("AdaptationSet has been removed because of no supported Representation")),t})),o()})).catch((function(){o()}))}else o()}))}(i,e))})),Promise.all(o)}return e={setConfig:function(e){e&&(e.adapter&&(t=e.adapter),e.capabilities&&(n=e.capabilities),e.settings&&(r=e.settings),e.customParametersModel&&(c=e.customParametersModel))},filterUnsupportedFeatures:function(e){return new Promise((function(i){var o=[];o.push(p(a.default.VIDEO,e)),o.push(p(a.default.AUDIO,e)),Promise.all(o).then((function(){r.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(e){e&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach((function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter((function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter((function(e){var r=t.getEssentialPropertiesForRepresentation(e);if(r&&r.length>0)for(var i=0;i<r.length;){if(!n.supportsEssentialProperty(r[i]))return d.debug("[Stream] EssentialProperty not supported: "+r[i].schemeIdUri),!1;i+=1}return!0})),e.Representation_asArray&&e.Representation_asArray.length>0)}))}))}(e),function(e){var t=c.getCustomCapabilitiesFilters();t&&0!==t.length&&e&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach((function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter((function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter((function(e){return!t.some((function(t){return!t(e)}))})),e.Representation_asArray&&e.Representation_asArray.length>0)}))}))}(e),i()})).catch((function(){i()}))}))}},d=Object(i.default)(f).getInstance().getLogger(e),e}d.__dashjs_factory_name="CapabilitiesFilter",t.default=r.default.getSingletonFactory(d)},"./src/streaming/utils/CustomTimeRanges.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/utils/SupervisorTools.js");function a(){return{customTimeRangeArray:[],length:0,add:function(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return Object(i.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return Object(i.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}a.__dashjs_factory_name="CustomTimeRanges",t.default=r.default.getClassFactory(a)},"./src/streaming/utils/DOMStorage.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/constants/Constants.js"),o=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],s="dashjs_?_bitrate",u="dashjs_?_settings",l="localStorage",c="sessionStorage",d="lastBitrate",f="lastMediaSettings";function h(e){e=e||{};var t,n,r,h=this.context,p=e.settings;function m(e){if(void 0!==r)return r;var t;r=!1;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return n.warn("DOMStorage access denied: "+e.message),r}if(!t||e!==l&&e!==c)return r;try{t.setItem("1","1"),t.removeItem("1"),r=!0}catch(e){n.warn("DOMStorage is supported, but cannot be used: "+e.message)}return r}function g(){return 6e5*Math.round((new Date).getTime()/6e5)}function v(e,t){return m(e)&&p.get().streaming[t+"CachingInfo"].enabled}function y(){if(!p)throw new Error(a.default.MISSING_CONFIG_ERROR)}return t={getSavedBitrateSettings:function(e){var t=NaN;if(y(),v(l,d)){var r=s.replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(r))||{},a=(new Date).getTime()-parseInt(i.timestamp,10)>=p.get().streaming.lastBitrateCachingInfo.ttl||!1,o=parseFloat(i.bitrate);isNaN(o)||a?a&&localStorage.removeItem(r):(t=o,n.debug("Last saved bitrate for "+e+" was "+o))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(v(l,d)&&t){var r=s.replace(/\?/,e);try{localStorage.setItem(r,JSON.stringify({bitrate:t.toFixed(3),timestamp:g()}))}catch(e){n.error(e.message)}}},getSavedMediaSettings:function(e){var t=null;if(y(),v(l,f)){var n=u.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=p.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;t=r.settings,i&&(localStorage.removeItem(n),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(v(l,f)){var r=u.replace(/\?/,e);try{localStorage.setItem(r,JSON.stringify({settings:t,timestamp:g()}))}catch(e){n.error(e.message)}}}},n=Object(i.default)(h).getInstance().getLogger(t),m(l)&&o.forEach((function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){n.error(e.message)}}})),t}h.__dashjs_factory_name="DOMStorage";var p=r.default.getSingletonFactory(h);t.default=p},"./src/streaming/utils/DefaultURLUtils.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js");function i(){var e,t=/^[a-z][a-z0-9+\-_.]*:/i,n=/^https?:\/\//i,r=/^https:\/\//i,i=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,a=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}},o=function(e,t){var n=s;if(!t)return e;if(!c(e))return e;d(e)&&(n=u),f(e)&&(n=l);var r=n(t),i="/"!==r.charAt(r.length-1)&&"/"!==e.charAt(0)?"/":"";return[r,e].join(i)};function s(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function u(e){var t=e.match(i);return t?t[1]:""}function l(e){var n=e.match(t);return n?n[0]:""}function c(e){return!t.test(e)}function d(e){return c(e)&&"/"===e.charAt(0)}function f(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y"),e=a}catch(e){}finally{e=e||o}}(),{parseBaseUrl:s,parseOrigin:u,parseScheme:l,isRelative:c,isPathAbsolute:d,isSchemeRelative:f,isHTTPURL:function(e){return n.test(e)},isHTTPS:function(e){return r.test(e)},removeHostname:function(e){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(t,n){return e(t,n)}}}i.__dashjs_factory_name="DefaultURLUtils",t.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/EBMLParser.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){var t;e=e||{};var n=new DataView(e.data),r=0;function i(e,t){var i=!0,a=0;if(void 0===t&&(t=!1),e.tag>16777215?(n.getUint32(r)!==e.tag&&(i=!1),a=4):e.tag>65535?(256*n.getUint16(r)+n.getUint8(r+2)!==e.tag&&(i=!1),a=3):e.tag>255?(n.getUint16(r)!==e.tag&&(i=!1),a=2):(n.getUint8(r)!==e.tag&&(i=!1),a=1),!i&&e.required&&!t)throw new Error("required tag not found");return i&&(r+=a),i}function a(e){var t=1,i=128,a=-1,o=0,s=n.getUint8(r),u=0;for(u=0;u<8;u+=1){if((s&i)===i){o=void 0===e?s&~i:s,a=u;break}i>>=1}for(u=0;u<a;u+=1,t+=1)o=o<<8|255&n.getUint8(r+t);return r+=t,o}return t={getPos:function(){return r},setPos:function(e){r=e},consumeTag:i,consumeTagAndSize:function(e,t){var n=i(e,t);return n&&a(),n},parseTag:function(e){var n;return i(e),n=a(),t[e.parse](n)},skipOverElement:function(e,t){var n,o=i(e,t);return o&&(n=a(),r+=n),o},getMatroskaCodedNum:a,getMatroskaFloat:function(e){var t;switch(e){case 4:t=n.getFloat32(r),r+=4;break;case 8:t=n.getFloat64(r),r+=8}return t},getMatroskaUint:function(e){for(var t=0,i=0;i<e;i+=1)t<<=8,t|=255&n.getUint8(r+i);return r+=e,t},moreData:function(){return r<n.byteLength}}}i.__dashjs_factory_name="EBMLParser",t.default=r.default.getClassFactory(i)},"./src/streaming/utils/ErrorHandler.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js");function o(){var e=this.context,t=Object(r.default)(e).getInstance();return{error:function(e){t.trigger(i.default.ERROR,{error:e})}}}o.__dashjs_factory_name="ErrorHandler",t.default=a.default.getSingletonFactory(o)},"./src/streaming/utils/InitCache.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js");function i(){var e={};return{save:function(t){var n=t.streamId,r=t.representationId;e[n]=e[n]||{},e[n][r]=t},extract:function(t,n){return e&&e[t]&&e[t][n]?e[t][n]:null},reset:function(){e={}}}}i.__dashjs_factory_name="InitCache",t.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/IsoFile.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/vo/IsoBox.js"),i=n("./src/core/FactoryMaker.js");function a(){var e;function t(t){var r=[];if(!t||!e||"function"!=typeof e.fetchAll)return r;for(var i,a=e.fetchAll(t),o=0,s=a.length;o<s;o++)(i=n(a[o]))&&r.push(i);return r}function n(e){if(!e)return null;var t=new r.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return{getBox:function(t){return t&&e&&e.boxes&&0!==e.boxes.length&&"function"==typeof e.fetch?n(e.fetch(t)):null},getBoxes:t,setData:function(t){e=t},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;var n=t(e.boxes[e.boxes.length-1].type);return n.length>0?n[n.length-1]:null}}}a.__dashjs_factory_name="IsoFile",t.default=i.default.getClassFactory(a)},"./src/streaming/utils/ObjectUtils.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./node_modules/fast-deep-equal/index.js"),a=n.n(i);function o(){return{areEqual:function(e,t){return a()(e,t)}}}o.__dashjs_factory_name="ObjectUtils",t.default=r.default.getSingletonFactory(o)},"./src/streaming/utils/RequestModifier.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js");function i(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}i.__dashjs_factory_name="RequestModifier",t.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/SupervisorTools.js":function(e,t,n){"use strict";n.r(t),n.d(t,"checkParameterType",(function(){return a})),n.d(t,"checkInteger",(function(){return o})),n.d(t,"checkRange",(function(){return s})),n.d(t,"checkIsVideoOrAudioType",(function(){return u}));var r=n("./src/streaming/constants/Constants.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(i(e)!==t)throw r.default.BAD_ARGUMENT_ERROR}function o(e){if(null===e||isNaN(e)||e%1!=0)throw r.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function s(e,t,n){if(e<t||e>n)throw r.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function u(e){if("string"!=typeof e||e!==r.default.AUDIO&&e!==r.default.VIDEO)throw r.default.BAD_ARGUMENT_ERROR}},"./src/streaming/utils/TTMLParser.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/EventBus.js"),o=n("./src/core/events/Events.js"),s=n("./node_modules/imsc/src/main/js/main.js"),u=n("./src/streaming/MediaPlayerEvents.js"),l=n("./src/streaming/constants/ConformanceViolationConstants.js");function c(){var e,t,n=this.context,r=Object(a.default)(n).getInstance(),c=0;return e={parse:function(e,n,i,a,d){var f,h,p,m="",g=[],v={},y={},_="",b="",T={onOpenTag:function(e,n,i){if(i[" imagetype"]&&!i[" imageType"]&&(r.trigger(u.default.CONFORMANCE_VIOLATION,{level:l.default.LEVELS.ERROR,event:l.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),i[" imageType"]=i[" imagetype"]),"image"===n&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===e)){if(!i[" imageType"]||"PNG"!==i[" imageType"].value)return void t.warn("smpte-tt imageType != PNG. Discarded");_=i["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){_&&(y[_]=b.trim()),b="",_=""},onText:function(e){_&&(b+=e)}};if(!e)throw m="no ttml data to parse",new Error(m);v.data=e,r.trigger(o.default.TTML_TO_PARSE,v);var E=Object(s.fromXML)(v.data,(function(e){m=e}),T);r.trigger(o.default.TTML_PARSED,{ttmlString:v.data,ttmlDoc:E});var S,w=E.getMediaTimeEvents();for(p=0;p<w.length;p++){var A=Object(s.generateISD)(E,w[p],(function(e){m=e}));A.contents.some((function(e){return e.contents.length}))&&(f=w[p]+n<i?i:w[p]+n)<(h=w[p+1]+n>a?a:w[p+1]+n)&&g.push({start:f,end:h,type:"html",cueID:(S=void 0,S="cue_TTML_"+c,c++,S),isd:A,images:d,embeddedImages:y})}if(""!==m)throw t.error(m),new Error(m);return g}},t=Object(i.default)(n).getInstance().getLogger(e),e}c.__dashjs_factory_name="TTMLParser",t.default=r.default.getSingletonFactory(c)},"./src/streaming/utils/URLUtils.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/utils/DefaultURLUtils.js");function a(){var e,t=[],n=this.context;function r(n,r,i){var a=function(n){var r;for(r=0;r<t.length;r++)if(t[r].regex.test(n))return t[r].utils;return e}(i||r);return a&&"function"==typeof a[n]?a[n](r,i):e[n](r,i)}return e=Object(i.default)(n).getInstance(),{registerUrlRegex:function(e,n){t.push({regex:e,utils:n})},parseBaseUrl:function(e){return r("parseBaseUrl",e)},parseOrigin:function(e){return r("parseOrigin",e)},parseScheme:function(e){return r("parseScheme",e)},isRelative:function(e){return r("isRelative",e)},isPathAbsolute:function(e){return r("isPathAbsolute",e)},isSchemeRelative:function(e){return r("isSchemeRelative",e)},isHTTPURL:function(e){return r("isHTTPURL",e)},isHTTPS:function(e){return r("isHTTPS",e)},removeHostname:function(e){return r("removeHostname",e)},resolve:function(e,t){return r("resolve",e,t)}}}a.__dashjs_factory_name="URLUtils";var o=r.default.getSingletonFactory(a);t.default=o},"./src/streaming/utils/VTTParser.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a="WEBVTT";function o(){var e,t,n,r,o,s,u=this.context;function l(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function c(e){var t=e.split(r),n=t[1].split(s);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:d(n)}}function d(e){var t={};return e.forEach((function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}})),t}function f(e,t){for(var n,i=t,a="",o="";""!==e[i]&&i<e.length;)i++;if((n=i-t)>1)for(var s=0;s<n;s++){if((o=e[t+s]).match(r)){a="";break}a+=o,s!==n-1&&(a+="\n")}else(o=e[t]).match(r)||(a=o);return a}return e={parse:function(e){var i,s,u=[];if(!e)return u;i=(e=e.split(n)).length,s=-1;for(var d=0;d<i;d++){var h=e[d];if(h.length>0&&h!==a&&h.match(r)){var p=c(h),m=p.cuePoints,g=p.styles,v=f(e,d+1),y=l(m[0].replace(o,"")),_=l(m[1].replace(o,""));!isNaN(y)&&!isNaN(_)&&y>=s&&_>y?""!==v?(s=y,u.push({start:y,end:_,data:v,styles:g})):t.error("Skipping cue due to empty/malformed cue text"):t.error("Skipping cue due to incorrect cue timing")}}return u}},t=Object(i.default)(u).getInstance().getLogger(e),n=/(?:\r\n|\r|\n)/gm,r=/-->/,o=/(^[\s]+|[\s]+$)/g,s=/\s\b/g,e}o.__dashjs_factory_name="VTTParser",t.default=r.default.getSingletonFactory(o)},"./src/streaming/utils/baseUrlResolution/BasicSelector.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){var t=(e=e||{}).blacklistController;return{select:function(e){var n,r=0;return e&&e.some((function(e,n){return r=n,!t.contains(e.serviceLocation)}))&&(n=e[r]),n}}}i.__dashjs_factory_name="BasicSelector",t.default=r.default.getClassFactory(i)},"./src/streaming/utils/baseUrlResolution/DVBSelector.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){var t=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var t,n,r=0,i=[],a=0;if((n=e.sort((function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n})).filter((function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority}))).length)return n.length>1&&(n.forEach((function(e){r+=e.dvb_weight,i.push(r)})),t=Math.floor(Math.random()*(r-1)),i.every((function(e,n){return a=n,!(t<e)}))),n[a]}((n=[],e.filter((function(e){return!t.contains(e.serviceLocation)||(e.dvb_priority&&n.push(e.dvb_priority),!1)})).filter((function(e){return!n.length||!e.dvb_priority||-1===n.indexOf(e.dvb_priority)}))));var n}}}i.__dashjs_factory_name="DVBSelector",t.default=r.default.getClassFactory(i)},"./src/streaming/vo/BitrateInfo.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN}},"./src/streaming/vo/DashJSError.js":function(e,t,n){"use strict";n.r(t),t.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=n||null,this.data=r||null}},"./src/streaming/vo/DataChunk.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null}},"./src/streaming/vo/FragmentRequest.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/vo/metrics/HTTPRequest.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=t||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var t,n,a;return t=e,(n=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===r.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?r.HTTPRequest.INIT_SEGMENT_TYPE:r.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}])&&i(t.prototype,n),a&&i(t,a),e}();a.ACTION_DOWNLOAD="download",a.ACTION_COMPLETE="complete",t.default=a},"./src/streaming/vo/HeadRequest.js":function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=a(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).checkForExistenceOnly=!0,r}return n}(n("./src/streaming/vo/FragmentRequest.js").default);t.default=u},"./src/streaming/vo/IsoBox.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=t._offset,this.type=t.type,this.size=t.size,this.boxes=[],t.boxes)for(var n=0;n<t.boxes.length;n++)this.boxes.push(new e(t.boxes[n]));switch(this.isComplete=!0,t.type){case"sidx":if(this.timescale=t.timescale,this.earliest_presentation_time=t.earliest_presentation_time,this.first_offset=t.first_offset,this.references=t.references,t.references){this.references=[];for(var r=0;r<t.references.length;r++){var i={reference_type:t.references[r].reference_type,referenced_size:t.references[r].referenced_size,subsegment_duration:t.references[r].subsegment_duration};this.references.push(i)}}break;case"emsg":this.id=t.id,this.version=1===t.version?1:0,this.value=t.value,this.timescale=t.timescale,this.scheme_id_uri=t.scheme_id_uri,this.presentation_time_delta=1===t.version?t.presentation_time:t.presentation_time_delta,this.event_duration=t.event_duration,this.message_data=t.message_data;break;case"mdhd":this.timescale=t.timescale;break;case"mfhd":this.sequence_number=t.sequence_number;break;case"subs":this.entry_count=t.entry_count,this.entries=t.entries;break;case"tfhd":this.base_data_offset=t.base_data_offset,this.sample_description_index=t.sample_description_index,this.default_sample_duration=t.default_sample_duration,this.default_sample_size=t.default_sample_size,this.default_sample_flags=t.default_sample_flags,this.flags=t.flags;break;case"tfdt":this.version=t.version,this.baseMediaDecodeTime=t.baseMediaDecodeTime,this.flags=t.flags;break;case"trun":if(this.sample_count=t.sample_count,this.first_sample_flags=t.first_sample_flags,this.data_offset=t.data_offset,this.flags=t.flags,this.samples=t.samples,t.samples){this.samples=[];for(var a=0,o=t.samples.length;a<o;a++){var s={sample_size:t.samples[a].sample_size,sample_duration:t.samples[a].sample_duration,sample_composition_time_offset:t.samples[a].sample_composition_time_offset};this.samples.push(s)}}}}var t,n,i;return t=e,(n=[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}])&&r(t.prototype,n),i&&r(t,i),e}();t.default=i},"./src/streaming/vo/IsoBoxSearchInfo.js":function(e,t,n){"use strict";n.r(t),t.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastCompletedOffset=t,this.found=n,this.size=r}},"./src/streaming/vo/MetricsList.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},"./src/streaming/vo/TextRequest.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/Constants.js");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,e);var t=o(n);function n(e,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(a=t.call(this)).url=e||null,a.type=i||null,a.mediaType=r.default.STREAM,a.responseType="",a}return n}(n("./src/streaming/vo/FragmentRequest.js").default);t.default=l},"./src/streaming/vo/TextTrackInfo.js":function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=a(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).captionData=null,e.label=null,e.defaultTrack=!1,e.kind=null,e.isFragmented=!1,e.isEmbedded=!1,e.isTTML=null,e}return n}(n("./src/dash/vo/MediaInfo.js").default);t.default=u},"./src/streaming/vo/Thumbnail.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},"./src/streaming/vo/ThumbnailTrackInfo.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},"./src/streaming/vo/URIFragmentData.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}},"./src/streaming/vo/metrics/BufferLevel.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.level=null}},"./src/streaming/vo/metrics/BufferState.js":function(e,t,n){"use strict";n.r(t);var r=n("./src/streaming/constants/MetricsConstants.js");t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=r.default.BUFFER_EMPTY}},"./src/streaming/vo/metrics/DVRInfo.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.range=null,this.manifestInfo=null}},"./src/streaming/vo/metrics/DroppedFrames.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.droppedFrames=null}},"./src/streaming/vo/metrics/HTTPRequest.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"HTTPRequest",(function(){return i})),n.d(t,"HTTPRequestTrace",(function(){return a}));var i=function e(){r(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},a=function e(){r(this,e),this.s=null,this.d=null,this.b=[],this._t=null};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",i.DVB_REPORTING_TYPE="DVBReporting",i.LICENSE="license",i.OTHER_TYPE="other"},"./src/streaming/vo/metrics/ManifestUpdate.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"ManifestUpdate",(function(){return i})),n.d(t,"ManifestUpdateStreamInfo",(function(){return a})),n.d(t,"ManifestUpdateRepresentationInfo",(function(){return o}));var i=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},a=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},o=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},"./src/streaming/vo/metrics/PlayList.js":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"PlayList",(function(){return i})),n.d(t,"PlayListTrace",(function(){return a}));var i=function e(){r(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";var a=function e(){r(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure"},"./src/streaming/vo/metrics/RepresentationSwitch.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null}},"./src/streaming/vo/metrics/RequestsQueue.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadingRequests=[],this.executedRequests=[]}},"./src/streaming/vo/metrics/SchedulingInfo.js":function(e,t,n){"use strict";n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null}},0:function(e,t){},1:function(e,t){}}).default},e.exports=r()},function(e,t,n){(function(e,n){var r=200,i="__lodash_hash_undefined__",a=800,o=16,s=9007199254740991,u="[object Arguments]",l="[object AsyncFunction]",c="[object Function]",d="[object GeneratorFunction]",f="[object Null]",h="[object Object]",p="[object Proxy]",m="[object Undefined]",g=/^\[object .+?Constructor\]$/,v=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[u]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y[c]=y["[object Map]"]=y["[object Number]"]=y[h]=y["[object RegExp]"]=y["[object Set]"]=y["[object String]"]=y["[object WeakMap]"]=!1;var _="object"==typeof e&&e&&e.Object===Object&&e,b="object"==typeof self&&self&&self.Object===Object&&self,T=_||b||Function("return this")(),E=t&&!t.nodeType&&t,S=E&&"object"==typeof n&&n&&!n.nodeType&&n,w=S&&S.exports===E,A=w&&_.process,M=function(){try{var e=S&&S.require&&S.require("util").types;return e||A&&A.binding&&A.binding("util")}catch(e){}}(),L=M&&M.isTypedArray;function C(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var D,k,P,I=Array.prototype,O=Function.prototype,R=Object.prototype,x=T["__core-js_shared__"],N=O.toString,j=R.hasOwnProperty,F=(D=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+D:"",U=R.toString,B=N.call(Object),Y=RegExp("^"+N.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=w?T.Buffer:void 0,V=T.Symbol,G=T.Uint8Array,K=H?H.allocUnsafe:void 0,W=(k=Object.getPrototypeOf,P=Object,function(e){return k(P(e))}),q=Object.create,z=R.propertyIsEnumerable,X=I.splice,Q=V?V.toStringTag:void 0,$=function(){try{var e=Ee(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),J=H?H.isBuffer:void 0,Z=Math.max,ee=Date.now,te=Ee(T,"Map"),ne=Ee(Object,"create"),re=function(){function e(){}return function(t){if(!Re(t))return{};if(q)return q(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function se(e){var t=this.__data__=new ae(e);this.size=t.size}function ue(e,t){var n=De(e),r=!n&&Ce(e),i=!n&&!r&&Pe(e),a=!n&&!r&&!i&&Ne(e),o=n||r||i||a,s=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var l in e)!t&&!j.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Se(l,u))||s.push(l);return s}function le(e,t,n){(void 0===n||Le(e[t],n))&&(void 0!==n||t in e)||fe(e,t,n)}function ce(e,t,n){var r=e[t];j.call(e,t)&&Le(r,n)&&(void 0!==n||t in e)||fe(e,t,n)}function de(e,t){for(var n=e.length;n--;)if(Le(e[n][0],t))return n;return-1}function fe(e,t,n){"__proto__"==t&&$?$(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}ie.prototype.clear=function(){this.__data__=ne?ne(null):{},this.size=0},ie.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ie.prototype.get=function(e){var t=this.__data__;if(ne){var n=t[e];return n===i?void 0:n}return j.call(t,e)?t[e]:void 0},ie.prototype.has=function(e){var t=this.__data__;return ne?void 0!==t[e]:j.call(t,e)},ie.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ne&&void 0===t?i:t,this},ae.prototype.clear=function(){this.__data__=[],this.size=0},ae.prototype.delete=function(e){var t=this.__data__,n=de(t,e);return!(n<0)&&(n==t.length-1?t.pop():X.call(t,n,1),--this.size,!0)},ae.prototype.get=function(e){var t=this.__data__,n=de(t,e);return n<0?void 0:t[n][1]},ae.prototype.has=function(e){return de(this.__data__,e)>-1},ae.prototype.set=function(e,t){var n=this.__data__,r=de(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},oe.prototype.clear=function(){this.size=0,this.__data__={hash:new ie,map:new(te||ae),string:new ie}},oe.prototype.delete=function(e){var t=Te(this,e).delete(e);return this.size-=t?1:0,t},oe.prototype.get=function(e){return Te(this,e).get(e)},oe.prototype.has=function(e){return Te(this,e).has(e)},oe.prototype.set=function(e,t){var n=Te(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},se.prototype.clear=function(){this.__data__=new ae,this.size=0},se.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ae){var i=n.__data__;if(!te||i.length<r-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new oe(i)}return n.set(e,t),this.size=n.size,this};var he,pe=function(e,t,n){for(var r=-1,i=Object(e),a=n(e),o=a.length;o--;){var s=a[he?o:++r];if(!1===t(i[s],s,i))break}return e};function me(e){return null==e?void 0===e?m:f:Q&&Q in Object(e)?function(e){var t=j.call(e,Q),n=e[Q];try{e[Q]=void 0;var r=!0}catch(e){}var i=U.call(e);r&&(t?e[Q]=n:delete e[Q]);return i}(e):function(e){return U.call(e)}(e)}function ge(e){return xe(e)&&me(e)==u}function ve(e){return!(!Re(e)||function(e){return!!F&&F in e}(e))&&(Ie(e)?Y:g).test(function(e){if(null!=e){try{return N.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function ye(e){if(!Re(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=we(e),n=[];for(var r in e)("constructor"!=r||!t&&j.call(e,r))&&n.push(r);return n}function _e(e,t,n,r,i){e!==t&&pe(t,(function(a,o){if(i||(i=new se),Re(a))!function(e,t,n,r,i,a,o){var s=Ae(e,n),u=Ae(t,n),l=o.get(u);if(l)return void le(e,n,l);var c=a?a(s,u,n+"",e,t,o):void 0,d=void 0===c;if(d){var f=De(u),p=!f&&Pe(u),m=!f&&!p&&Ne(u);c=u,f||p||m?De(s)?c=s:xe(b=s)&&ke(b)?c=function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(s):p?(d=!1,c=function(e,t){if(t)return e.slice();var n=e.length,r=K?K(n):new e.constructor(n);return e.copy(r),r}(u,!0)):m?(d=!1,g=u,v=!0?(y=g.buffer,_=new y.constructor(y.byteLength),new G(_).set(new G(y)),_):g.buffer,c=new g.constructor(v,g.byteOffset,g.length)):c=[]:function(e){if(!xe(e)||me(e)!=h)return!1;var t=W(e);if(null===t)return!0;var n=j.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&N.call(n)==B}(u)||Ce(u)?(c=s,Ce(s)?c=function(e){return function(e,t,n,r){var i=!n;n||(n={});var a=-1,o=t.length;for(;++a<o;){var s=t[a],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?fe(n,s,u):ce(n,s,u)}return n}(e,je(e))}(s):Re(s)&&!Ie(s)||(c=function(e){return"function"!=typeof e.constructor||we(e)?{}:re(W(e))}(u))):d=!1}var g,v,y,_;var b;d&&(o.set(u,c),i(c,u,r,a,o),o.delete(u));le(e,n,c)}(e,t,o,n,_e,r,i);else{var s=r?r(Ae(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),le(e,o,s)}}),je)}function be(e,t){return Me(function(e,t,n){return t=Z(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Z(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),C(e,this,s)}}(e,t,Be),e+"")}function Te(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Ee(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ve(n)?n:void 0}function Se(e,t){var n=typeof e;return!!(t=null==t?s:t)&&("number"==n||"symbol"!=n&&v.test(e))&&e>-1&&e%1==0&&e<t}function we(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||R)}function Ae(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Me=function(e){var t=0,n=0;return function(){var r=ee(),i=o-(r-n);if(n=r,i>0){if(++t>=a)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}($?function(e,t){return $(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Be);function Le(e,t){return e===t||e!=e&&t!=t}var Ce=ge(function(){return arguments}())?ge:function(e){return xe(e)&&j.call(e,"callee")&&!z.call(e,"callee")},De=Array.isArray;function ke(e){return null!=e&&Oe(e.length)&&!Ie(e)}var Pe=J||function(){return!1};function Ie(e){if(!Re(e))return!1;var t=me(e);return t==c||t==d||t==l||t==p}function Oe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Re(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function xe(e){return null!=e&&"object"==typeof e}var Ne=L?function(e){return function(t){return e(t)}}(L):function(e){return xe(e)&&Oe(e.length)&&!!y[me(e)]};function je(e){return ke(e)?ue(e,!0):ye(e)}var Fe,Ue=(Fe=function(e,t,n){_e(e,t,n)},be((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(i=Fe.length>3&&"function"==typeof i?(r--,i):void 0,a&&function(e,t,n){if(!Re(n))return!1;var r=typeof t;return!!("number"==r?ke(n)&&Se(t,n.length):"string"==r&&t in n)&&Le(n[t],e)}(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var o=t[n];o&&Fe(e,o,n,i)}return e})));function Be(e){return e}n.exports=Ue}).call(this,n(130),n(161)(e))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configureLoadRequest=void 0;var r=n(0),i=n(10);t.configureLoadRequest=function(e,t){e.autoplay=!0;var n,a=t.startFrom;return"number"==typeof a&&a>0?(n=e,(0,i.hasKey)(n,"currentTime")&&(e.currentTime=a),function(e){return(0,i.hasKey)(e,"startTime")}(e)&&(e.startTime=a)):a instanceof Date&&(e.customData=r.__assign(r.__assign({},e.customData),{currentDate:a.getTime()/1e3})),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeMediaInfo=void 0;var r=n(0),i=n(8),a=n(176),o=n(177);t.serializeMediaInfo=function(e,t,n){return r.__awaiter(void 0,void 0,void 0,(function(){var s,u,l,c,d,f,h;return r.__generator(this,(function(p){switch(p.label){case 0:return s=e.source,u=e.textTracks,l=e.metadata,c=t.getId(s),[4,t.getContentType(s,n)];case 1:return d=p.sent(),f=new chrome.cast.media.MediaInfo(c,d),s.sourceType!==i.SourceTypes.RESOLVABLE?[3,2]:(f.customData={sourceType:i.SourceTypes.RESOLVABLE,resolutionType:s.resolutionType,resolutionCustomData:s.customData},[3,4]);case 2:return h=f,[4,t.getUrl(s)];case 3:h.contentUrl=p.sent(),p.label=4;case 4:return f.metadata=(0,a.serializeMetadata)(l),f.tracks=u.filter((function(e){return e.src})).map(o.serializeTextTrack),f.customData=r.__assign(r.__assign({},f.customData),{initialAudioTrack:e.initialAudioTrack,initialTextTrack:e.initialTextTrack}),[2,f]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerError=void 0;var r=n(0),i=function(e){function t(t,n){var r=this.constructor,i=e.call(this,n)||this;return i.name=t,Object.setPrototypeOf(i,r.prototype),i}return r.__extends(t,e),t}(Error);t.PlayerError=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorToString=void 0,t.errorToString=function(e){return null==e?"":e instanceof Error?"".concat(e.name,": ").concat(e.message):String(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfigs=void 0;var r=n(0),i=r.__importDefault(n(129)),a=n(136);t.mergeConfigs=function(e,t){var n,o,s,u,l,c,d,f,h=(0,i.default)({},e,t);if((null===(n=t.handlers)||void 0===n?void 0:n.length)&&(h.handlers=r.__spreadArray(r.__spreadArray([],r.__read(t.handlers),!1),r.__read(null!==(o=e.handlers)&&void 0!==o?o:[]),!1)),h.handlers&&h.overrideNative){var p=h.handlers.indexOf(a.NativeHandler);if(p>=0){var m=h.handlers.splice(p,1);h.handlers=r.__spreadArray(r.__spreadArray([],r.__read(h.handlers),!1),r.__read(m),!1)}}h.plugins=r.__spreadArray(r.__spreadArray([],r.__read(null!==(s=e.plugins)&&void 0!==s?s:[]),!1),r.__read(null!==(u=t.plugins)&&void 0!==u?u:[]),!1);var g=null!==(l=t.middlewares)&&void 0!==l?l:e.middlewares;switch(g&&(h.middlewares=r.__spreadArray([],r.__read(g),!1)),h.debug&&(h.debug.metrics=null!==(d=null===(c=t.debug)||void 0===c?void 0:c.metrics)&&void 0!==d?d:null===(f=e.debug)||void 0===f?void 0:f.metrics),t.enableContentTypeDetection){case!0:h.enableContentTypeDetection={fromExtension:!0,fromGetRequest:!0,fromHeadRequest:!0};break;case!1:h.enableContentTypeDetection={fromExtension:!1,fromGetRequest:!1,fromHeadRequest:!1}}return h}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NativeHandler=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=n(8),u=n(43),l=n(10),c=n(92),d=n(556),f=function(e){function t(t,n,r){var a=e.call(this,t,n,r)||this;return a._engine=void 0,a._type=s.HandlerTypes.NATIVE,(0,i.default)(a),a._audioTrackController=new d.NativeAudioTrackController({elementSource:a._elementSource}),a.configureEvents(),a.init(),a}return r.__extends(t,e),t.canPlayType=function(e){return document.createElement("video").canPlayType(e)},t.prototype.destroy=function(){this.startDestroying(),this.reset(),e.prototype.destroy.call(this)},t.prototype.getAudioTracks=function(){return this._audioTrackController.getAudioTracks()},t.prototype.getCurrentAudioTrack=function(){return this._audioTrackController.getCurrentAudioTrack()},t.prototype.load=function(t){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return[4,e.prototype.load.call(this,t)];case 1:if(i.sent(),void 0===this.getElement())throw new Error("Failed to get HTMLVideoElement.");return this.onLoadedMetadata.pipe((0,o.take)(1)).subscribe((function(){return r.__awaiter(n,void 0,void 0,(function(){var e,n,i,a,s,l=this;return r.__generator(this,(function(r){switch(r.label){case 0:return e=!(null===(s=this.getElement())||void 0===s?void 0:s.seekable.length),n=this.getIsLive()&&null==this.getStartDate(),e||n?(i=[e?"seekable range":null,n?"start date":null].filter((function(e){return null!=e})),u.logger.debug("Delaying ready event until ".concat(i.join(" and ")," ").concat(1===i.length?"is":"are"," available...")),[4,this.onLoadedData.pipe((0,o.take)(1)).toPromise()]):[3,2];case 1:r.sent(),r.label=2;case 2:return this.hasInitialAudioTrackSelection()&&(this.getAudioTracks().length>0?this.selectInitialAudioTrack():this.onAudioTrackChange.pipe((0,o.take)(1)).subscribe((function(){l.selectInitialAudioTrack()}))),"number"==typeof(a=t.startFrom)&&a>0?[4,this.seekTo(a)]:[3,4];case 3:return r.sent(),[3,6];case 4:return a instanceof Date?[4,this.seekTo(a)]:[3,6];case 5:r.sent(),r.label=6;case 6:return this._readySource.next({isReady:!0}),[2]}}))}))})),l.browser.isSafari&&document.addEventListener("visibilitychange",this.handleVisibilityChange),[4,this.setSource(t)];case 2:return i.sent(),t.autoPlay&&this.handleAutoPlay(t.autoPlay),[2]}}))}))},t.prototype.reset=function(){document.removeEventListener("visibilitychange",this.handleVisibilityChange),e.prototype.reset.call(this)},t.prototype.setCurrentAudioTrack=function(e){this._audioTrackController.setCurrentAudioTrack(e)},t.prototype.configureEvents=function(){var t=this;e.prototype.configureEvents.call(this),this._onAudioTrackChange=this._audioTrackController.onAudioTrackChange,this._onPlaying=this._onPlaying.pipe((0,o.filter)((function(){return!t.getIsPaused()})))},t.prototype.handleVisibilityChange=function(){var e;return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return document.hidden?[3,3]:this._suspendedState?[4,this.restore()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[3,4];case 3:(null===(e=this._mediaInfo)||void 0===e?void 0:e.source.sourceType)!==s.SourceTypes.DYNAMIC||this.getIsPictureInPictureActive()||!this.getIsPaused()&&!this.getIsMuted()||this.suspend(),t.label=4;case 4:return[2]}}))}))},t.prototype.restore=function(){var e;return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:if(!this._suspendedState||!(null===(e=this._mediaInfo)||void 0===e?void 0:e.source))return[3,6];t=new a.Observable((function(e){var t=(0,a.merge)(n.onLoadedMetadata,n.onLoadedData).pipe((0,o.mapTo)(!0)),i=n.onError.pipe((0,o.mapTo)(!1));(0,a.merge)(t,i).pipe((0,o.take)(1)).subscribe((function(t){return r.__awaiter(n,void 0,void 0,(function(){var n,i,a,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return t?this._suspendedState?(n=this._suspendedState,i=n.currentDate,a=n.currentTime,o=n.isLive,s=n.isPlaying,o&&i?[4,this.seekTo(i)]:[3,2]):[3,7]:[3,8];case 1:return r.sent(),[3,4];case 2:return[4,this.seekTo(a)];case 3:r.sent(),r.label=4;case 4:return s?[4,this.play()]:[3,6];case 5:r.sent(),r.label=6;case 6:e.next(),e.complete(),r.label=7;case 7:return[3,9];case 8:e.error(),r.label=9;case 9:return[2]}}))}))}))})),i.label=1;case 1:return i.trys.push([1,,5,6]),this._mediaInfo?[4,this.setSource(this._mediaInfo)]:[3,4];case 2:return i.sent(),[4,t.toPromise()];case 3:i.sent(),i.label=4;case 4:return[3,6];case 5:return this._suspendedState=void 0,[7];case 6:return[2]}}))}))},t.prototype.setSource=function(e){var t;return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=this.getElement())?[4,this.resolveSource(e.source)]:[3,5];case 1:return i=r.sent(),[4,(0,l.isKeySystemSupported)(s.KeySystems.FAIRPLAY)];case 2:return r.sent()&&(0,l.hasKey)(n,"webkitKeys")&&(0,l.hasKey)(n,"webkitSetMediaKeys")?(this._fairplay=new d.Fairplay(n),[4,this._fairplay.init(null!==(t=i.drm)&&void 0!==t?t:e.drm)]):[3,4];case 3:r.sent(),r.label=4;case 4:n.src=i.url,r.label=5;case 5:return[2]}}))}))},t.prototype.suspend=function(){var e,t=this.getElement();if(t){var n=this.getIsLive();this._suspendedState={currentDate:n?this.getCurrentDate(!0):void 0,currentTime:this.getCurrentTime(!0),isLive:n,isPlaying:!this.getIsPaused(),pausedTime:Date.now()},t.removeAttribute("src"),t.load(),null===(e=this._fairplay)||void 0===e||e.destroy()}},t}(c.HTMLVideoHandlerBase);t.NativeHandler=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceHandlerBase=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=n(40),u=n(8),l=n(43),c=n(10),d=n(185),f=new l.LoggerFileNameDecorator("SourceHandlerBase"),h=function(e){function t(t,n,r){var u=e.call(this)||this;return u._targetDuration=s.DEFAULT_TARGET_DURATION,u._isDestroying=!1,(0,i.default)(u),u._parent=t,u._config=n,u._services=r,u._enableTextTrackPreselection=!0,u._elementSource=new a.BehaviorSubject(void 0),u._readySource=new a.BehaviorSubject({isReady:!1}),u._destroyedSource=new a.Subject,u._destroyingSource=new a.Subject,u._elementDestroyingSource=new a.Subject,u._errorSource=new a.Subject,u._resetSource=new a.Subject,u._textTrackSelectedSource=new a.Subject,u._onDestroyed=u._destroyedSource.asObservable(),u._onDestroying=u._destroyingSource.asObservable(),u._onElementCreated=u._elementSource.pipe((0,o.filter)((function(e){return void 0!==e})),(0,o.mapTo)(void 0)),u._onElementDestroying=u._elementDestroyingSource.asObservable(),u._onReset=u._resetSource.asObservable(),u}return r.__extends(t,e),Object.defineProperty(t.prototype,"onDestroyed",{get:function(){return this._onDestroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDestroying",{get:function(){return this._onDestroying},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onElementCreated",{get:function(){return this._onElementCreated},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onElementDestroying",{get:function(){return this._onElementDestroying},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onReset",{get:function(){return this._onReset},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDestroying",{get:function(){return this._isDestroying},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){this.startDestroying(),this._readySource.next({isReady:!1}),this._destroyedSource.next(),this._destroyedSource.complete(),this._destroyingSource.complete(),this._elementDestroyingSource.complete(),this._elementSource.complete(),this._errorSource.complete(),this._readySource.complete(),this._resetSource.complete(),this._textTrackSelectedSource.complete()},t.prototype.exitFullscreen=function(){if(!this.getIsFullscreenSupported())throw new Error("Fullscreen is not supported!")},t.prototype.exitPictureInPicture=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){if(!this.getIsPictureInPictureSupported())throw new Error("Picture-in-picture is not supported!");return[2]}))}))},t.prototype.getCurrentDate=function(e){var t=this.getCurrentTime(e),n=this.getStartDate();if(n){var r=n.getTime();return new Date(1e3*t+r)}},t.prototype.getElement=function(){return this._elementSource.getValue()},t.prototype.getEngine=function(){return this._engine},t.prototype.getEngineVersion=function(){},t.prototype.getFullscreenElement=function(){},t.prototype.getIsAtLiveEdge=function(e){if(void 0===e&&(e=!1),this.getIsLive()){var t=this._config.liveToleranceSeconds,n=this.getCurrentTime(e);return this.getSeekableRange().end-n<=t}return!1},t.prototype.getIsFullscreenActive=function(){return!1},t.prototype.getIsFullscreenSupported=function(){return!1},t.prototype.getIsLive=function(){return this.getDuration()===1/0},t.prototype.getIsPictureInPictureActive=function(){return!1},t.prototype.getIsPictureInPictureSupported=function(){return!1},t.prototype.getIsRebuffering=function(){return this.getIsBuffering()&&this.getHasPlayed()},t.prototype.getMediaInfo=function(){return this._mediaInfo},t.prototype.getSeekableDuration=function(){var e=this.getSeekableRange(),t=e.start,n=e.end;return(0,c.clip)(n-t)},t.prototype.getType=function(){return this._type},t.prototype.hasType=function(e){return this._type===e},t.prototype.load=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this._mediaInfo=e,this.handleTextTrackPreSelection(e),[2]}))}))},t.prototype.nudge=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return t=this.getCurrentTime(),[4,this.seekTo((0,c.clip)(t+e))];case 1:return n.sent(),[2]}}))}))},t.prototype.nudgeVolume=function(e){var t=this.getVolume();this.setVolume(t+e)},t.prototype.requestFullscreen=function(){if(!this.getIsFullscreenSupported())throw new Error("Fullscreen is not supported!")},t.prototype.requestPictureInPicture=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){if(!this.getIsPictureInPictureSupported())throw new Error("Picture-in-picture is not supported!");return[2]}))}))},t.prototype.reset=function(){this._resetSource.next(),this._mediaInfo=void 0},t.prototype.setCurrentTextTrack=function(e){this._textTrackSelectedSource.next()},t.prototype.setHtmlTextTrackContainer=function(e){this._config.htmlTextTrackContainer=e},t.prototype.configureEvents=function(){this._onError=this._errorSource.asObservable(),this._onReady=this._readySource.asObservable()},t.prototype.dateToTime=function(e){return(0,c.dateToTime)(e,this.getStartDate())},t.prototype.emitError=function(e){this._errorSource.next(e)},t.prototype.hasInitialAudioTrackSelection=function(){return this.getInitialAudioTrackSelectors().length>0},t.prototype.hasInitialTextTrackSelection=function(){return this.getInitialTextTrackSelectors().length>0},t.prototype.init=function(){},t.prototype.resolveSource=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._services.sourceManager.resolveSource(e)];case 1:return[2,n.sent()];case 2:throw t=n.sent(),this.emitError({type:u.ErrorTypes.SOURCE_ERROR,message:t.message}),t;case 3:return[2]}}))}))},t.prototype.selectInitialAudioTrack=function(){var e=this.getInitialAudioTrack();e&&(f.info("Selecting initial audio track.",e),this.setCurrentAudioTrack(e))},t.prototype.startDestroying=function(){this._isDestroying||(this._isDestroying=!0,this._destroyingSource.next())},t.prototype.getInitialAudioTrack=function(){var e,t,n=this.getInitialAudioTrackSelectors();if(0!==n.length){var i=this.getAudioTracks(),a=function(e){var t=i.find((function(t){return(0,c.selectsAudioTrack)(t,e)}));if(t)return{value:t}};try{for(var o=r.__values(n),s=o.next();!s.done;s=o.next()){var u=a(s.value);if("object"==typeof u)return u.value}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}f.info("Initial audio track was not selected as no match was found. Audio tracks:",i,"Selectors:",n)}},t.prototype.getInitialAudioTrackSelectors=function(){var e,t;return null!==(t=null===(e=this._mediaInfo)||void 0===e?void 0:e.initialAudioTrack)&&void 0!==t?t:this._config.defaultInitialAudioTrack},t.prototype.getInitialTextTrack=function(){var e,t,n=this.getInitialTextTrackSelectors();if(0!==n.length){var i=this.getTextTracks(),a=function(e){var t=i.find((function(t){return(0,c.selectsTextTrack)(t,e)}));if(t)return{value:t}};try{for(var o=r.__values(n),s=o.next();!s.done;s=o.next()){var u=a(s.value);if("object"==typeof u)return u.value}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}},t.prototype.getInitialTextTrackSelectors=function(){var e,t;return null!==(t=null===(e=this._mediaInfo)||void 0===e?void 0:e.initialTextTrack)&&void 0!==t?t:this._config.defaultInitialTextTrack},t.prototype.handleTextTrackPreSelection=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this._enableTextTrackPreselection?(this.onReady.pipe((0,o.filter)((function(e){return e.isReady})),(0,o.take)(1)).subscribe((function(){return r.__awaiter(n,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){return(t=e.textTracks).length&&this.addTextTracks(t),[2]}))}))})),this.hasInitialTextTrackSelection()?this.getInitialTextTrack()?[3,2]:[4,this.onTextTrackChange.pipe((0,o.takeWhile)((function(){return void 0===n.getInitialTextTrack()})),(0,o.takeUntil)(this._textTrackSelectedSource)).toPromise()]:[3,6]):[2];case 1:i.sent(),i.label=2;case 2:return(t=this.getInitialTextTrack())?this.getReadyState()<u.ReadyStates.HAVE_CURRENT_DATA?[4,this.onLoadedData.pipe((0,o.take)(1)).toPromise()]:[3,4]:[3,5];case 3:i.sent(),i.label=4;case 4:f.info("Selecting initial text track.",t),this.setCurrentTextTrack(t),i.label=5;case 5:f.debug("Completing initial text track selection"),i.label=6;case 6:return[2]}}))}))},t}(d.EventEmitter);t.SourceHandlerBase=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_TRACK_CONTAINER_ID=void 0,t.TEXT_TRACK_CONTAINER_ID="dsCustomTextTrackContainer"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetricComponentBase=void 0;var r=function(){function e(e){this._visible=!0,this._config=e}return Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){e!==this._visible&&(this._visible=e,this._el.style.display=e?"block":"none")},enumerable:!1,configurable:!0}),e.prototype.createEl=function(e){var t=document.createElement("div");t.style.margin="2px 0",t.style.fontFamily="Consolas, monaco, monospace",t.style.fontSize="12px",t.style.minHeight="18px";var n=document.createElement("div");return n.style.display="inline-block",n.style.fontWeight="bold",n.style.padding="0 4px",n.style.textAlign="right",n.style.width="14em",n.innerText=e.label,t.appendChild(n),e.parentNode.appendChild(t),{root:t}},e}();t.MetricComponentBase=r},function(e,t,n){(function(e){!function(){var n="undefined"!=typeof window?window:e,r={};for(var i in function(e,t,n){var r,i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},a=void 0!==e&&e===this?this:void 0!==t&&null!=t?t:this;function o(){o=function(){},a.Symbol||(a.Symbol=s)}var s=function(){var e=0;return function(t){return"jscomp_symbol_"+(t||"")+e++}}();function u(){o();var e=a.Symbol.iterator;e||(e=a.Symbol.iterator=a.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&i(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return l(this)}}),u=function(){}}function l(e){var t=0;return c((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))}function c(e){return u(),(e={next:e})[a.Symbol.iterator]=function(){return this},e}function d(e){u();var t=e[Symbol.iterator];return t?t.call(e):l(e)}function f(e,t){if(t){for(var n=a,r=e.split("."),o=0;o<r.length-1;o++){var s=r[o];s in n||(n[s]={}),n=n[s]}(s=t(o=n[r=r[r.length-1]]))!=o&&null!=s&&i(n,r,{configurable:!0,writable:!0,value:s})}}function h(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,i){!function e(a){a.done?r(a.value):Promise.resolve(a.value).then(t,n).then(e,i)}(e.next())}))}(e())}f("Promise",(function(e){function t(e){this.h=0,this.l=void 0,this.g=[];var t=this.i();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){null==this.g&&(this.g=[],this.j()),this.g.push(e)},n.prototype.j=function(){var e=this;this.i((function(){e.m()}))};var i=a.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.m=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.l(e)}}}this.g=null},n.prototype.l=function(e){this.i((function(){throw e}))},t.prototype.i=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.C),reject:e(this.j)}},t.prototype.C=function(e){if(e===this)this.j(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.F(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.A(e):this.m(e)}},t.prototype.A=function(e){var t=void 0;try{t=e.then}catch(e){return void this.j(e)}"function"==typeof t?this.J(t,e):this.m(e)},t.prototype.j=function(e){this.o(2,e)},t.prototype.m=function(e){this.o(1,e)},t.prototype.o=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.l=t,this.u()},t.prototype.u=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.F=function(e){var t=this.i();e.nc(t.resolve,t.reject)},t.prototype.J=function(e,t){var n=this.i();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){a(e)}}:t}var i,a,o=new t((function(e,t){i=e,a=t}));return this.nc(r(e,i),r(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.nc=function(e,t){function n(){switch(r.h){case 1:e(r.l);break;case 2:t(r.l);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?o.h(n):this.g.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=d(e),a=i.next();!a.done;a=i.next())r(a.value).nc(t,n)}))},t.all=function(e){var n=d(e),i=n.next();return i.done?r([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,r(i.value).nc(a(o.length-1),t),i=n.next()}while(!i.done)}))},t})),f("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));var p,m="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var g;e:{var v={};try{v.__proto__={a:!0},g=v.a;break e}catch(e){}g=!1}p=g?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var y=p;function _(e,t){if(e.prototype=m(t.prototype),e.prototype.constructor=e,y)y(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Lg=t.prototype}function b(){this.l=!1,this.i=null,this.B=void 0,this.s=1,this.h=this.j=0,this.o=this.g=null}function T(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function E(e,t){e.g={ce:t,ne:!0},e.s=e.j||e.h}function S(e,t,n){return e.s=n,{value:t}}function w(e){e.s=0}function A(e,t,n){e.j=t,null!=n&&(e.h=n)}function M(e,t){e.j=0,e.h=t||0}function L(e,t){e.s=t,e.j=0}function C(e){e.j=0;var t=e.g.ce;return e.g=null,t}function D(e){e.o=[e.g],e.j=0,e.h=0}function k(e,t){var n=e.o.splice(0)[0];(n=e.g=e.g||n)?n.ne?e.s=e.j||e.h:null!=n.I&&e.h<n.I?(e.s=n.I,e.g=null):e.s=e.h:e.s=t}function P(e){this.g=new b,this.h=e}function I(e,t,n,r){try{var i=t.call(e.g.i,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.l=!1,i;var a=i.value}catch(t){return e.g.i=null,E(e.g,t),O(e)}return e.g.i=null,r.call(e.g,a),O(e)}function O(e){for(;e.g.s;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(t){e.g.B=void 0,E(e.g,t)}if(e.g.l=!1,e.g.g){if(t=e.g.g,e.g.g=null,t.ne)throw t.ce;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function R(e){this.next=function(t){return T(e.g),e.g.i?t=I(e,e.g.i.next,t,e.g.m):(e.g.m(t),t=O(e)),t},this.throw=function(t){return T(e.g),e.g.i?t=I(e,e.g.i.throw,t,e.g.m):(E(e.g,t),t=O(e)),t},this.return=function(t){return function(e,t){T(e.g);var n=e.g.i;return n?I(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),O(e))}(e,t)},u(),this[Symbol.iterator]=function(){return this}}function x(e,t){return R.prototype=e.prototype,new R(new P(t))}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function j(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var a=e[i];if(t.call(n,a,i,e))return{le:i,Qe:a}}return{le:-1,Qe:void 0}}function F(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}b.prototype.m=function(e){this.B=e},b.prototype.return=function(e){this.g={return:e},this.s=this.h},b.prototype.I=function(e){this.s=e},f("Array.prototype.keys",(function(e){return e||function(){return function(e,t){u(),e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e){return e}))}})),f("WeakMap",(function(e){function t(e){if(this.g=(s+=Math.random()+1).toString(),e){o(),u(),e=d(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(e){N(e,a)||i(e,a,{value:{}})}function r(e){var t=Object[e];t&&(Object[e]=function(e){return n(e),t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var a="$jscomp_hidden_"+Math.random();r("freeze"),r("preventExtensions"),r("seal");var s=0;return t.prototype.set=function(e,t){if(n(e),!N(e,a))throw Error("WeakMap key fail: "+e);return e[a][this.g]=t,this},t.prototype.get=function(e){return N(e,a)?e[a][this.g]:void 0},t.prototype.has=function(e){return N(e,a)&&N(e[a],this.g)},t.prototype.delete=function(e){return!(!N(e,a)||!N(e[a],this.g))&&delete e[a][this.g]},t})),f("Map",(function(e){function t(){var e={};return e.Na=e.next=e.head=e}function n(e,t){var n=e.g;return c((function(){if(n){for(;n.head!=e.g;)n=n.Na;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++s,a.set(t,n)):n="p_"+t;var r=e.h[n];if(r&&N(e.h,n))for(var i=0;i<r.length;i++){var o=r[i];if(t!=t&&o.key!=o.key||t===o.key)return{id:n,list:r,index:i,ga:o}}return{id:n,list:r,index:-1,ga:void 0}}function i(e){if(this.h={},this.g=t(),this.size=0,e){e=d(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(d([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=r.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done)}catch(e){return!1}}())return e;o(),u();var a=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e);return n.list||(n.list=this.h[n.id]=[]),n.ga?n.ga.value=t:(n.ga={next:this.g,Na:this.g.Na,head:this.g,key:e,value:t},n.list.push(n.ga),this.g.Na.next=n.ga,this.g.Na=n.ga,this.size++),this},i.prototype.delete=function(e){return!(!(e=r(this,e)).ga||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.ga.Na.next=e.ga.next,e.ga.next.Na=e.ga.Na,e.ga.head=null,this.size--,!0)},i.prototype.clear=function(){this.h={},this.g=this.g.Na=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).ga},i.prototype.get=function(e){return(e=r(this,e).ga)&&e.value},i.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},i.prototype.keys=function(){return n(this,(function(e){return e.key}))},i.prototype.values=function(){return n(this,(function(e){return e.value}))},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i})),f("Set",(function(e){function t(e){if(this.g=new Map,e){e=d(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(d([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(!(i=r.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(e){return!1}}()?e:(o(),u(),t.prototype.add=function(e){return this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(r){return e.call(t,r,r,n)}))},t)})),f("Array.prototype.findIndex",(function(e){return e||function(e,t){return j(this,e,t).le}})),f("Array.prototype.find",(function(e){return e||function(e,t){return j(this,e,t).Qe}})),f("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=F(this,e,"startsWith"),r=n.length,i=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<i&&a<r;)if(n[a++]!=e[o++])return!1;return o>=i}})),f("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),f("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length,i=t||0;for(0>i&&(i=Math.max(i+r,0));i<r;i++){var a=n[i];if(a===e||Object.is(a,e))return!0}return!1}})),f("String.prototype.includes",(function(e){return e||function(e,t){return-1!==F(this,e,"includes").indexOf(e,t||0)}})),f("Array.from",(function(e){return e||function(e,t,n){u(),t=null!=t?t:function(e){return e};var r=[],i=e[Symbol.iterator];if("function"==typeof i)for(e=i.call(e);!(i=e.next()).done;)r.push(t.call(n,i.value));else{i=e.length;for(var a=0;a<i;a++)r.push(t.call(n,e[a]))}return r}}));var U="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)N(r,i)&&(e[i]=r[i])}return e};f("Object.assign",(function(e){return e||U}));var B=this;function Y(e,t){var n,r=e.split("."),i=B;r[0]in i||!i.execScript||i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||void 0===t?i=i[n]?i[n]:i[n]={}:i[n]=t}function H(e,t){function n(){}n.prototype=t.prototype,e.Lg=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wg=function(e,n,r){return t.prototype[n].apply(e,Array.prototype.slice.call(arguments,2))}}function V(e){this.i=Math.exp(Math.log(.5)/e),this.h=this.g=0}function G(e,t,n){var r=Math.pow(e.i,t);n=n*(1-r)+r*e.g,isNaN(n)||(e.g=n,e.h+=t)}function K(e){return e.g/(1-Math.pow(e.i,e.h))}function W(){this.h=new V(2),this.i=new V(5),this.g=0}B.g=!0,W.prototype.getBandwidthEstimate=function(e){return 128e3>this.g?e:Math.min(K(this.h),K(this.i))};var q={sb:0,kc:function(){},ba:function(){},error:function(){},v:function(){},info:function(){},debug:function(){},K:function(){},O:function(){}};function z(e,t,n,r){for(var i=[],a=3;a<arguments.length;++a)i[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}e.console&&e.console.log.bind&&(q.ba=console.warn.bind(console),q.kc=console.error.bind(console),1<=q.sb&&(q.error=console.error.bind(console)),2<=q.sb&&(q.v=console.warn.bind(console)),3<=q.sb&&(q.info=console.info.bind(console)),4<=q.sb&&(q.debug=console.log.bind(console)),5<=q.sb&&(q.K=console.debug.bind(console)),6<=q.sb&&(q.O=console.debug.bind(console))),Y("shaka.util.Error",z),z.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},z.Severity={RECOVERABLE:1,CRITICAL:2},z.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},z.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013};var X=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Q(e){var t;e instanceof Q?($(this,e.Ba),this.pb=e.pb,this.Aa=e.Aa,J(this,e.Ob),this.pa=e.pa,Z(this,e.g.clone()),this.bb=e.bb):e&&(t=String(e).match(X))?($(this,t[1]||"",!0),this.pb=ee(t[2]||""),this.Aa=ee(t[3]||"",!0),J(this,t[4]),this.pa=ee(t[5]||"",!0),Z(this,t[6]||"",!0),this.bb=ee(t[7]||"")):this.g=new ue(null)}function $(e,t,n){e.Ba=n?ee(t,!0):t,e.Ba&&(e.Ba=e.Ba.replace(/:$/,""))}function J(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Ob=t}else e.Ob=null}function Z(e,t,n){t instanceof ue?e.g=t:(n||(t=te(t,oe)),e.g=new ue(t))}function ee(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function te(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ne),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ne(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(r=Q.prototype).Ba="",r.pb="",r.Aa="",r.Ob=null,r.pa="",r.bb="",r.toString=function(){var e=[],t=this.Ba;if(t&&e.push(te(t,re,!0),":"),t=this.Aa){e.push("//");var n=this.pb;n&&e.push(te(n,re,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Ob)&&e.push(":",String(t))}return(t=this.pa)&&(this.Aa&&"/"!=t.charAt(0)&&e.push("/"),e.push(te(t,"/"==t.charAt(0)?ae:ie,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.bb)&&e.push("#",te(t,se)),e.join("")},r.resolve=function(e){var t=this.clone();"data"===t.Ba&&(t=new Q);var n=!!e.Ba;n?$(t,e.Ba):n=!!e.pb,n?t.pb=e.pb:n=!!e.Aa,n?t.Aa=e.Aa:n=null!=e.Ob;var r=e.pa;if(n)J(t,e.Ob);else if(n=!!e.pa){if("/"!=r.charAt(0))if(this.Aa&&!this.pa)r="/"+r;else{var i=t.pa.lastIndexOf("/");-1!=i&&(r=t.pa.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var a=[],o=0;o<r.length;){var s=r[o++];"."==s?i&&o==r.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),i&&o==r.length&&a.push("")):(a.push(s),i=!0)}r=a.join("/")}}return n?t.pa=r:n=""!==e.g.toString(),n?Z(t,e.g.clone()):n=!!e.bb,n&&(t.bb=e.bb),t},r.clone=function(){return new Q(this)};var re=/[#\/\?@]/g,ie=/[#\?:]/g,ae=/[#\?]/g,oe=/[#\?@]/g,se=/#/g;function ue(e){this.g=e||null}(r=ue.prototype).na=null,r.qc=null,r.add=function(e,t){if(!this.na&&(this.na={},this.qc=0,this.g))for(var n=this.g.split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("="),a=null;if(0<=i){var o=n[r].substring(0,i);a=n[r].substring(i+1)}else o=n[r];o=decodeURIComponent(o.replace(/\+/g," ")),a=a||"",this.add(o,decodeURIComponent(a.replace(/\+/g," ")))}return this.g=null,(n=this.na.hasOwnProperty(e)&&this.na[e])||(this.na[e]=n=[]),n.push(t),this.qc++,this},r.toString=function(){if(this.g)return this.g;if(!this.na)return"";var e,t=[];for(e in this.na)for(var n=encodeURIComponent(e),r=this.na[e],i=0;i<r.length;i++){var a=n;""!==r[i]&&(a+="="+encodeURIComponent(r[i])),t.push(a)}return this.g=t.join("&")},r.clone=function(){var e=new ue;if(e.g=this.g,this.na){var t,n={};for(t in this.na)n[t]=this.na[t].concat();e.na=n,e.qc=this.qc}return e};var le={df:function(e,t){return e.reduce(function(e,t,n){return t.catch(e.bind(null,n))}.bind(null,t),Promise.reject())},Rc:function(e,t){return e.concat(t)},Bc:function(){},Ra:function(e){return null!=e}};function ce(e,t){if(0==t.length)return e;var n=t.map((function(e){return new Q(e)}));return e.map((function(e){return new Q(e)})).map((function(e){return n.map(e.resolve.bind(e))})).reduce(le.Rc,[]).map((function(e){return e.toString()}))}function de(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}var fe={Za:"video",Sb:"audio",za:"text",Ug:"image",Sg:"application"},he=1/15;function pe(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function me(e){if(!e)return"";239==(e=new Uint8Array(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=be(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new z(2,2,2004)}}function ge(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw q.error("Data has an incorrect length, must be even."),new z(2,2,2004);if(e instanceof ArrayBuffer)var r=e;else(n=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),r=n.buffer;e=Math.floor(e.byteLength/2),n=new Uint16Array(e),r=new DataView(r);for(var i=0;i<e;i++)n[i]=r.getUint16(2*i,t);return be(n)}function ve(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return me(t);if(254==t[0]&&255==t[1])return ge(t.subarray(2),!1);if(255==t[0]&&254==t[1])return ge(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&126>=e[t]}.bind(null,t);if(q.debug("Unable to find byte-order-mark, making an educated guess."),0==t[0]&&0==t[2])return ge(e,!1);if(0==t[1]&&0==t[3])return ge(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return me(e);throw new z(2,2,2003)}function ye(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function _e(e,t){for(var n=new Uint8Array(2*e.length),r=new DataView(n.buffer),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n.buffer}function be(e){if(!Te)for(var t=function(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}},n={size:65536};0<n.size;(n={size:n.size}).size/=2)if(t(n.size)){Te=function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.size)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.size));return n}}(n);break}return Te(e)}pe.prototype.resolve=function(){},pe.prototype.reject=function(){},Y("shaka.util.StringUtils.fromUTF8",me),Y("shaka.util.StringUtils.fromUTF16",ge),Y("shaka.util.StringUtils.fromBytesAutoDetect",ve),Y("shaka.util.StringUtils.toUTF8",ye),Y("shaka.util.StringUtils.toUTF16",_e);var Te=null;Y("shaka.util.StringUtils.resetFromCharCode",(function(){Te=null}));var Ee={Mc:function(t,n){var r=be(t);return n=null==n||n,r=e.btoa(r).replace(/\+/g,"-").replace(/\//g,"_"),n?r:r.replace(/=*$/,"")}};function Se(){this.g=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.l=[],this.i=[],this.j=!1,this.g.on("data",this.o.bind(this)),this.g.on("done",this.m.bind(this))}function we(t,n){return!(!e.muxjs||"mp2t"!=t.toLowerCase().split(";")[0].split("/")[1])&&(n?MediaSource.isTypeSupported(Ae(n,t)):MediaSource.isTypeSupported(Ae("audio",t))||MediaSource.isTypeSupported(Ae("video",t)))}function Ae(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var r=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(r){var i="avc1.",a=r[1],o=Number(r[2]);i=("66"==a?i+"4200":"77"==a?i+"4d00":i+"6400")+(o>>4).toString(16),i+=(15&o).toString(16),n=n.replace(r[0],i)}return n}function Me(e){this.h=e,this.g=null}function Le(e){this.h=e,this.g=null}function Ce(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.o=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.m=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.l=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function De(e){return h((function t(){var n,r;return x(t,(function(t){switch(t.s){case 1:if(e.g>=e.o){if(!e.i)return t.return(Promise.reject());e.g=1,e.h=e.j}return n=e.g,e.g++,0==n?t.return():(r=e.h*(1+(2*Math.random()-1)*e.m),S(t,new Promise((function(e){new Le(e).V(r/1e3)})),2));case 2:e.h*=e.l,w(t)}}))}))}function ke(e,t){this.promise=e,this.se=t,this.g=!1}function Pe(e){return new ke(Promise.reject(e),(function(){return Promise.resolve()}))}function Ie(){var e=Promise.reject(new z(2,7,7001));return e.catch((function(){})),new ke(e,(function(){return Promise.resolve()}))}function Oe(e){return new ke(Promise.resolve(e),(function(){return Promise.resolve()}))}function Re(e){return new ke(e,(function(){return e.catch((function(){}))}))}function xe(e){return new ke(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function Ne(t,n){for(var r in n=void 0===n?{}:n)this[r]=n[r];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function je(){this.g={}}function Fe(){this.hd=new je,this.jc=this}function Ue(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;t.add(n);var i,a=r?[]:{};for(i in n)a[i]=e(n[i]);return r&&(a.length=n.length),a}}(e)}function Be(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Ye(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function He(e,t,n){if(n||(n=Be),e.length!=t.length)return!1;t=t.slice();for(var r={},i=(e=d(e)).next();!i.done;r={item:r.item},i=e.next()){if(r.item=i.value,-1==(i=t.findIndex(function(e){return function(t){return n(e.item,t)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function Ve(){this.g=[]}function Ge(e,t){e.g.push(t.finally((function(){Ye(e.g,t)})))}function Ke(e){Fe.call(this),this.j=!1,this.l=new Ve,this.g=new Set,this.h=new Set,this.i=e||null}Y("shaka.util.Uint8ArrayUtils.toBase64",Ee.Mc),Ee.Ja=function(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n},Y("shaka.util.Uint8ArrayUtils.fromBase64",Ee.Ja),Ee.$c=function(t){for(var n=new Uint8Array(t.length/2),r=0;r<t.length;r+=2)n[r/2]=e.parseInt(t.substr(r,2),16);return n},Y("shaka.util.Uint8ArrayUtils.fromHex",Ee.$c),Ee.Nc=function(e){for(var t="",n=0;n<e.length;++n){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t},Y("shaka.util.Uint8ArrayUtils.toHex",Ee.Nc),Ee.Ha=function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0},Y("shaka.util.Uint8ArrayUtils.equal",Ee.Ha),Ee.concat=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var r=n=0;r<t.length;++r)n+=t[r].length;n=new Uint8Array(n);for(var i=r=0;i<t.length;++i)n.set(t[i],r),r+=t[i].length;return n},Y("shaka.util.Uint8ArrayUtils.concat",Ee.concat),Se.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()},Se.prototype.o=function(e){this.i=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.l.push(t)},Se.prototype.m=function(){var e={data:Ee.concat.apply(null,this.l),captions:this.i};this.h.resolve(e),this.j=!1},Me.prototype.V=function(t){var n=this;this.stop();var r=!0,i=null;return this.g=function(){e.clearTimeout(i),r=!1},i=e.setTimeout((function(){r&&n.h()}),1e3*t),this},Me.prototype.stop=function(){this.g&&(this.g(),this.g=null)},Y("shaka.util.Timer",Le),Le.prototype.Lc=function(){return this.stop(),this.h(),this},Le.prototype.tickNow=Le.prototype.Lc,Le.prototype.V=function(e){var t=this;return this.stop(),this.g=new Me((function(){t.h()})).V(e),this},Le.prototype.tickAfter=Le.prototype.V,Le.prototype.Oa=function(e){var t=this;return this.stop(),this.g=new Me((function(){t.g.V(e),t.h()})).V(e),this},Le.prototype.tickEvery=Le.prototype.Oa,Le.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},Le.prototype.stop=Le.prototype.stop,Y("shaka.util.AbortableOperation",ke),ke.failed=Pe,ke.aborted=Ie,ke.completed=Oe,ke.notAbortable=Re,ke.prototype.abort=function(){return this.g=!0,this.se()},ke.prototype.abort=ke.prototype.abort,ke.all=xe,ke.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},ke.prototype.finally=ke.prototype.finally,ke.prototype.ca=function(e,t){function n(n){return function(s){if(i.g&&n)a.reject(o);else{var u=n?e:t;u?r=function(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then((function(){}),(function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(u,s,a):(n?a.resolve:a.reject)(s)}}}function r(){return a.reject(o),i.abort()}var i=this,a=new pe,o=new z(2,7,7001);return this.promise.then(n(!0),n(!1)),new ke(a,(function(){return r()}))},ke.prototype.chain=ke.prototype.ca,Y("shaka.util.FakeEvent",Ne),Ne.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Ne.prototype.stopImmediatePropagation=function(){this.g=!0},Ne.prototype.stopPropagation=function(){},(r=je.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},r.get=function(e){return(e=this.g[e])?e.slice():null},r.getAll=function(){var e,t=[];for(e in this.g)t.push.apply(t,this.g[e]);return t},r.remove=function(e,t){var n=this.g[e];if(n)for(var r=0;r<n.length;++r)n[r]==t&&(n.splice(r,1),--r)},r.forEach=function(e){for(var t in this.g)e(t,this.g[t])},r.size=function(){return Object.keys(this.g).length},Fe.prototype.addEventListener=function(e,t){this.hd.push(e,t)},Fe.prototype.removeEventListener=function(e,t){this.hd.remove(e,t)},Fe.prototype.dispatchEvent=function(e){for(var t=this.hd.get(e.type)||[],n=0;n<t.length;++n){e.target=this.jc,e.currentTarget=this.jc;var r=t[n];try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){q.error("Uncaught exception in event handler",e,e?e.message:null,e?e.stack:null)}if(e.g)break}return e.defaultPrevented},Ve.prototype.destroy=function(){var e=[];return this.g.forEach((function(t){t.promise.catch((function(){})),e.push(t.abort())})),this.g=[],Promise.all(e)},H(Ke,Fe),Y("shaka.net.NetworkingEngine",Ke),Ke.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4},Ke.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var We={};function qe(e,t,n){n=n||3;var r=We[e];(!r||n>=r.priority)&&(We[e]={priority:n,mg:t})}function ze(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function Xe(){this.g=0}function Qe(e,t,n){ke.call(this,e,t),this.h=n}function $e(){}function Je(){this.g=new je}function Ze(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=et;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(e){t=!1}et=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.g)}Ke.registerScheme=qe,Ke.unregisterScheme=function(e){delete We[e]},Ke.prototype.og=function(e){this.g.add(e)},Ke.prototype.registerRequestFilter=Ke.prototype.og,Ke.prototype.Ng=function(e){this.g.delete(e)},Ke.prototype.unregisterRequestFilter=Ke.prototype.Ng,Ke.prototype.bf=function(){this.g.clear()},Ke.prototype.clearAllRequestFilters=Ke.prototype.bf,Ke.prototype.pg=function(e){this.h.add(e)},Ke.prototype.registerResponseFilter=Ke.prototype.pg,Ke.prototype.Og=function(e){this.h.delete(e)},Ke.prototype.unregisterResponseFilter=Ke.prototype.Og,Ke.prototype.cf=function(){this.h.clear()},Ke.prototype.clearAllResponseFilters=Ke.prototype.cf,Ke.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}},Ke.makeRequest=ze,Ke.prototype.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.destroy()},Ke.prototype.destroy=Ke.prototype.destroy,Ke.prototype.request=function(e,t){var n=this,r=new Xe;if(this.j){var i=Promise.reject(new z(2,7,7001));return i.catch((function(){})),new Qe(i,(function(){return Promise.resolve()}),r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ue(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},t.uris=Ue(t.uris);var a=(i=function(e,t,n){for(var r=Oe(void 0),i={},a=(e=d(e.g)).next();!a.done;i={Gd:i.Gd},a=e.next())i.Gd=a.value,r=r.ca(function(e){return function(){return e.Gd(t,n)}}(i));return r.ca(void 0,(function(e){if(e&&7001==e.code)throw e;throw new z(2,1,1006,e)}))}(this,e,t)).ca((function(){return function e(t,n,r,i,a,o,s){var u=new Q(r.uris[a]),l=u.Ba,c=!1;l||(l=location.protocol,l=l.slice(0,-1),$(u,l),r.uris[a]=u.toString());l=l.toLowerCase();var d=(l=We[l])?l.mg:null;if(!d)return Pe(new z(2,1,1e3,u));var f;return Re(De(i)).ca((function(){return t.j?Ie():(f=Date.now(),d(r.uris[a],r,n,(function(e,r,i){t.i&&1==n&&(t.i(e,r),c=!0,s.g=i)})))})).ca((function(e){return null==e.timeMs&&(e.timeMs=Date.now()-f),{response:e,Nf:c}}),(function(u){if(u&&7001==u.code)throw u;if(t.j)return Ie();if(u&&1==u.severity)return t.dispatchEvent(new Ne("retry",{error:u instanceof z?u:null})),a=(a+1)%r.uris.length,e(t,n,r,i,a,u,s);throw u||o}))}(n,e,t,new Ce(t.retryParameters,!1),0,null,r)})),o=a.ca((function(t){return function(e,t,n){for(var r=Oe(void 0),i=(e=d(e.h)).next();!i.done;i=e.next())r=r.ca(i.value.bind(null,t,n.response));return r.ca((function(){return n}),(function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof z&&(t=e.severity),new z(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),u=0;i.promise.then((function(){u=Date.now()-s}),(function(){}));var l=0;return a.promise.then((function(){l=Date.now()}),(function(){})),i=new Qe((i=o.ca((function(t){var r=Date.now()-l,i=t.response;return i.timeMs+=u,i.timeMs+=r,t.Nf||!n.i||i.fromCache||1!=e||n.i(i.timeMs,i.data.byteLength),i}),(function(e){throw e&&(e.severity=2),e}))).promise,i.se,r),Ge(this.l,i),i},Ke.prototype.request=Ke.prototype.request,Ke.NumBytesRemainingClass=Xe,_(Qe,ke),Ke.PendingRequest=Qe,Qe.all=xe,Qe.notAbortable=Re,Qe.completed=Oe,Qe.aborted=Ie,Qe.failed=Pe,Y("shaka.util.IReleasable",$e),$e.prototype.release=function(){},Y("shaka.util.EventManager",Je),Je.prototype.release=function(){this.nb(),this.g=null},Je.prototype.release=Je.prototype.release,Je.prototype.H=function(e,t,n,r){this.g&&(e=new Ze(e,t,n,r),this.g.push(t,e))},Je.prototype.listen=Je.prototype.H,Je.prototype.ya=function(e,t,n,r){var i=this;this.H(e,t,(function r(a){i.ta(e,t,r),n(a)}),r)},Je.prototype.listenOnce=Je.prototype.ya,Je.prototype.ta=function(e,t,n){if(this.g)for(var r=this.g.get(t)||[],i=(r=d(r)).next();!i.done;i=r.next())(i=i.value).target!=e||n!=i.listener&&n||(i.ta(),this.g.remove(t,i))},Je.prototype.unlisten=Je.prototype.ta,Je.prototype.nb=function(){if(this.g){for(var e=this.g.getAll(),t=(e=d(e)).next();!t.done;t=e.next())t.value.ta();this.g.g={}}},Je.prototype.removeAll=Je.prototype.nb,Ze.prototype.ta=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1},Ze.prototype.unlisten=Ze.prototype.ta;var et=void 0;function tt(e){return new Q(e=ve(e)).Aa}function nt(e,t,n){function r(e){new DataView(i.buffer).setUint32(a,e.byteLength,!0),a+=4,i.set(e,a),a+=e.byteLength}if(!n||!n.byteLength)throw new z(2,6,6015);t="string"==typeof t?new Uint8Array(_e(t,!0)):new Uint8Array(t),e=_e(e=ve(e),!0);var i=new Uint8Array(12+e.byteLength+t.byteLength+n.byteLength),a=0;return r(new Uint8Array(e)),r(t),r(new Uint8Array(n)),i}function rt(e,t){for(var n=[],r=d(e),i=r.next();!i.done;i=r.next())n.push(t(i.value));return n}function it(e,t){for(var n=d(e),r=n.next();!r.done;r=n.next())if(!t(r.value))return!1;return!0}function at(e){var t=new Map;return Object.keys(e).forEach((function(n){t.set(n,e[n])})),t}function ot(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function st(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function ut(e){return(e=e.split(/ *; */)).shift(),(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function lt(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}Y("shaka.util.FairPlayUtils.defaultGetContentId",tt),Y("shaka.util.FairPlayUtils.initDataTransform",nt);var ct=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function dt(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function ft(e){return""!=vt().canPlayType(e)}function ht(){return gt("Tizen")}function pt(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!ht()}function mt(){if(!pt())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e?parseInt(e[1],10):(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function gt(e){return(navigator.userAgent||"").includes(e)}function vt(){return _t||(yt||(yt=new Le((function(){_t=null}))),(_t=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(_t=document.createElement("video")),yt.V(1),_t)}var yt=null,_t=null;function bt(e,t){var n=this;t=void 0===t?1:t,this.J=e,this.C=new Set,this.m=this.o=null,this.Z=!1,this.P=0,this.g=null,this.u=new Je,this.h=new Map,this.F=[],this.A=new pe,this.j=null,this.l=function(t){n.A.reject(t),e.onError(t)},this.wa=new Map,this.da=new Map,this.X=new Le((function(){return function(e){var t=e.wa,n=e.da;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.l(new z(2,6,6014)),e.J.Dc(ot(n))}(n)})),this.i=!1,this.ua=new pe,this.L=!1,this.M=[],this.va=!1,this.ea=new Le((function(){!function(e){e.h.forEach((function(t,n){var r=t.xd,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.J.onExpirationUpdated(n.sessionId,i),t.xd=i)}))}(n)})).Oa(t),this.A.catch((function(){}))}function Tt(e,t,n){return e.F=n,e.L=0<n.length,Et(e,t)}function Et(t,n){var r=function(t){if(0==(t=at(t.j.clearKeys)).size)return null;var n=[],r=[];t.forEach((function(e,t){var i=Ee.$c(t),a=Ee.$c(e);i={kty:"oct",kid:Ee.Mc(i,!1),k:Ee.Mc(a,!1)},n.push(i),r.push(i.kid)})),t=JSON.stringify({keys:n});var i=JSON.stringify({kids:r});return i=[{initData:new Uint8Array(ye(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:i,keyIds:[]}}(t);if(r)for(var i=d(n),a=i.next();!a.done;a=i.next())a.value.drmInfos=[r];for((r=n.some((function(e){return 0<e.drmInfos.length})))||function(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})}));for(var r=d(e),i=r.next();!i.done;i=r.next())i.value.drmInfos=n}(n,a=at(t.j.servers)),a=(i=d(n)).next();!a.done;a=i.next())for(var o=(a=d(a.value.drmInfos)).next();!o.done;o=a.next())Ut(o.value,at(t.j.servers),at(t.j.advanced||{}));return(a=function(e,t){for(var n=new Set,r=d(t),i=r.next();!i.done;i=r.next()){var a=d(i.value.drmInfos);for(i=a.next();!i.done;i=a.next())n.add(i.value)}for(r=d(n),i=r.next();!i.done;i=r.next())Ut(i.value,at(e.j.servers),at(e.j.advanced||{}));a=e.L?"required":"optional";var o=e.L?["persistent-license"]:["temporary"];for(r=new Map,n=d(n),i=n.next();!i.done;i=n.next())i=i.value,r.set(i.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:o,label:i.keySystem,drmInfos:[]});for(n=d(t),i=n.next();!i.done;i=n.next()){i=i.value,a=i.audio,o=i.video;var s=a?Dt(a):"",u=o?Dt(o):"",l=d(i.drmInfos);for(i=l.next();!i.done;i=l.next()){i=i.value;var c=r.get(i.keySystem);c.drmInfos.push(i),i.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),i.persistentStateRequired&&(c.persistentState="required"),a&&(c.audioCapabilities.push({robustness:i.audioRobustness||"",contentType:s}),"ac-3"==a.codecs.toLowerCase()&&ht()&&c.audioCapabilities.push({robustness:i.audioRobustness||"",contentType:st(a.mimeType,"ec-3")})),o&&c.videoCapabilities.push({robustness:i.videoRobustness||"",contentType:u})}}return r}(t,n)).size?(a=kt(t,a),r?a:a.catch((function(){}))):(t.Z=!0,Promise.resolve())}function St(e){return h((function t(){var n;return x(t,(function(t){switch(t.s){case 1:if(!(e.o&&e.g&&e.g.serverCertificate&&e.g.serverCertificate.length)){t.I(0);break}return A(t,3),S(t,e.o.setServerCertificate(e.g.serverCertificate),5);case 5:t.B||q.v("Server certificates are not supported by the key system.  The server certificate has been ignored."),L(t,0);break;case 3:return n=C(t),t.return(Promise.reject(new z(2,6,6004,n.message)))}}))}))}function wt(e){var t=e.g?e.g.initData:[];return t.forEach((function(t){return At(e,t.initDataType,t.initData)})),e.F.forEach((function(t){return Pt(e,t)})),t.length||e.F.length||e.A.resolve(),e.A}function At(e,t,n){for(var r=e.h.values(),i=(r=d(r)).next();!i.done;i=r.next())if(Ee.Ha(n,i.value.initData)&&!gt("Tizen 2"))return void q.debug("Ignoring duplicate init data.");!function(e,t,n){try{if(e.L){q.K("Creating new persistent session");var r=e.o.createSession("persistent-license")}else q.K("Creating new temporary session"),r=e.o.createSession()}catch(t){return void e.l(new z(2,6,6005,t.message))}e.u.H(r,"message",e.ye.bind(e)),e.u.H(r,"keystatuseschange",e.we.bind(e)),e.h.set(r,{initData:n,loaded:!1,xd:1/0,Ga:null});try{n=e.j.initDataTransform(n,e.g)}catch(n){return t=n,n instanceof z||(t=new z(2,6,6016,n)),void e.l(t)}r.generateRequest(t,n).catch((function(t){if(!e.i){if(e.h.delete(r),t.errorCode&&t.errorCode.systemCode){var n=t.errorCode.systemCode;0>n&&(n+=Math.pow(2,32)),n="0x"+n.toString(16)}e.l(new z(2,6,6006,t.message,t,n))}}))}(e,t,n)}function Mt(e){return e?e.keySystem:""}function Lt(e,t){if(navigator.userAgent.match(/Edge\//))return!0;if(t=t.toLowerCase(),ht()&&t.includes('codecs="ac-3"')){var n=t.replace("ac-3","ec-3");return e.C.has(t)||e.C.has(n)}return e.C.has(t)}function Ct(e){return e=rt(e=e.h.keys(),(function(e){return e.sessionId})),Array.from(e)}function Dt(e){var t=st(e.mimeType,e.codecs);return we(t)?Ae(e.type,t):t}function kt(e,t){if(1==t.size&&t.has(""))return Promise.reject(new z(2,6,6e3));for(var n=d(t.values()),r=n.next();!r.done;r=n.next())0==(r=r.value).audioCapabilities.length&&delete r.audioCapabilities,0==r.videoCapabilities.length&&delete r.videoCapabilities;var i=n=new pe;return[!0,!1].forEach(function(e){var n=this;t.forEach((function(t,r){t.drmInfos.some((function(e){return!!e.licenseServerUri}))==e&&(i=i.catch(function(){if(!this.i)return navigator.requestMediaKeySystemAccess(r,[t])}.bind(n)))}))}.bind(e)),i=(i=i.catch((function(){return Promise.reject(new z(2,6,6001))}))).then(function(e){if(this.i)return Promise.reject();this.C.clear();var n=e.getConfiguration(),r=n.videoCapabilities||[],i=d(n.audioCapabilities||[]);for(n=i.next();!n.done;n=i.next())this.C.add(n.value.contentType.toLowerCase());for(n=(r=d(r)).next();!n.done;n=r.next())this.C.add(n.value.contentType.toLowerCase());r=e.keySystem,i=[];var a=[],o=[],s=[];return function(e,t,n,r,i){e.forEach((function(e){if(t.includes(e.licenseServerUri)||t.push(e.licenseServerUri),e.serverCertificate&&(n.some((function(t){return Ee.Ha(t,e.serverCertificate)}))||n.push(e.serverCertificate)),e.initData&&e.initData.forEach((function(e){r.some((function(t){return!(!t.keyId||t.keyId!=e.keyId)||t.initDataType==e.initDataType&&Ee.Ha(t.initData,e.initData)}))||r.push(e)})),e.keyIds)for(var a=0;a<e.keyIds.length;++a)i.includes(e.keyIds[a])||i.push(e.keyIds[a])}))}((n=t.get(e.keySystem)).drmInfos,i,a,o,s),1<a.length&&q.v("Multiple unique server certificates found! Only the first will be used."),1<i.length&&q.v("Multiple unique license server URIs found! Only the first will be used."),this.g={keySystem:r,licenseServerUri:i[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:(n.audioCapabilities?n.audioCapabilities[0].robustness:"")||"",videoRobustness:(n.videoCapabilities?n.videoCapabilities[0].robustness:"")||"",serverCertificate:a[0],initData:o,keyIds:s},this.g.licenseServerUri?e.createMediaKeys():Promise.reject(new z(2,6,6012,this.g.keySystem))}.bind(e)).then(function(e){if(this.i)return Promise.reject();q.info("Created MediaKeys object for key system",this.g.keySystem),this.o=e,this.Z=!0}.bind(e)).catch(function(e){if(!this.i)return this.g=null,this.C.clear(),e instanceof z?Promise.reject(e):Promise.reject(new z(2,6,6002,e.message))}.bind(e)),n.reject(),i}function Pt(e,t){try{q.K("Attempting to load an offline session",t);var n=e.o.createSession("persistent-license")}catch(t){var r=new z(2,6,6005,t.message);return e.l(r),Promise.reject(r)}e.u.H(n,"message",e.ye.bind(e)),e.u.H(n,"keystatuseschange",e.we.bind(e));var i={initData:null,loaded:!1,xd:1/0,Ga:null};return e.h.set(n,i),n.load(t).then(function(e){return this.i?Promise.reject():(q.O("Loaded offline session",t,e),e?(i.loaded=!0,Ft(this)&&this.A.resolve(),n):(this.h.delete(n),void this.l(new z(2,6,6013))))}.bind(e),function(e){this.i||(this.h.delete(n),this.l(new z(2,6,6005,e.message)))}.bind(e))}function It(e,t){if(Mt(t).startsWith("com.apple.fps")){var n=t.serverCertificate;e=nt(e,tt(e),n)}return e}function Ot(e,t){var n=t.target;q.K("Sending license request for session",n.sessionId,"of type",t.messageType);var r=e.h.get(n),i=e.g.licenseServerUri,a=e.j.advanced[e.g.keySystem];"individualization-request"==t.messageType&&a&&a.individualizationServer&&(i=a.individualizationServer),(i=ze([i],e.j.retryParameters)).body=t.message,i.method="POST",i.licenseRequestType=t.messageType,i.sessionId=n.sessionId,"com.microsoft.playready"!=e.g.keySystem&&"com.chromecast.playready"!=e.g.keySystem||function(e){var t=ge(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){q.debug("Unwrapping PlayReady request.");for(var n=(t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader"),r=0;r<n.length;++r)e.headers[n[r].getElementsByTagName("name")[0].textContent]=n[r].getElementsByTagName("value")[0].textContent;e.body=Ee.Ja(t.getElementsByTagName("Challenge")[0].textContent).buffer}else q.debug("PlayReady request is already unwrapped."),e.headers["Content-Type"]="text/xml; charset=utf-8"}(i),e.g.keySystem.startsWith("com.apple.fps")&&e.j.fairPlayTransform&&function(e){var t=new Uint8Array(e.body);t="spc="+Ee.Mc(t),e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=ye(t)}(i);var o=Date.now();e.J.Ib.request(2,i).promise.then(function(e){return this.i?Promise.reject():(this.g.keySystem.startsWith("com.apple.fps")&&this.j.fairPlayTransform&&function(e){try{var t=me(e.data)}catch(e){return}"<ckc>"===(t=t.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(e){}e.data=Ee.Ja(t).buffer}(e),this.P+=(Date.now()-o)/1e3,q.K("Updating session",n.sessionId),n.update(e.data).then(function(){var e=this;this.J.onEvent(new Ne("drmsessionupdate")),r&&(r.Ga&&r.Ga.resolve(),new Le((function(){r.loaded=!0,Ft(e)&&e.A.resolve()})).V(Yt))}.bind(this)))}.bind(e),function(e){this.i||(e=new z(2,6,6007,e),this.l(e),r&&r.Ga&&r.Ga.reject(e))}.bind(e)).catch(function(e){this.i||(e=new z(2,6,6008,e.message),this.l(e),r&&r.Ga&&r.Ga.reject(e))}.bind(e))}function Rt(){var e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],t=[{videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],n=new Map;return e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map((function(e){return function(e){return h((function r(){var i,a,o;return x(r,(function(r){switch(r.s){case 1:return A(r,2),S(r,navigator.requestMediaKeySystemAccess(e,t),4);case 4:return i=r.B,o=!!(a=i.getConfiguration().sessionTypes)&&a.includes("persistent-license"),gt("Tizen 3")&&(o=!1),n.set(e,{persistentState:o}),S(r,i.createMediaKeys(),5);case 5:L(r,0);break;case 2:C(r),n.set(e,null),w(r)}}))}))}(e)})),Promise.all(e).then((function(){return ot(n)}))}function xt(e,t){var n=t.audio,r=t.video;if(n&&n.encrypted&&!Lt(e,n=Dt(n))||r&&r.encrypted&&!Lt(e,r=Dt(r)))return!1;var i=Mt(e.g);return 0==t.drmInfos.length||t.drmInfos.some((function(e){return e.keySystem==i}))}function Nt(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)if(e[r].keySystem==t[i].keySystem){var a=e[r];i=t[i];var o=[];o=(o=o.concat(a.initData||[])).concat(i.initData||[]);var s=[];s=(s=s.concat(a.keyIds)).concat(i.keyIds),n.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||i.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||i.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||i.persistentStateRequired,videoRobustness:a.videoRobustness||i.videoRobustness,audioRobustness:a.audioRobustness||i.audioRobustness,serverCertificate:a.serverCertificate||i.serverCertificate,initData:o,keyIds:s});break}return n}function jt(e){return h((function t(){var n;return x(t,(function(t){switch(t.s){case 1:return n=Array.from(e.h.keys()),e.h.clear(),S(t,Promise.all(n.map((function(e){return h((function t(){return x(t,(function(t){switch(t.s){case 1:return q.K("Closing session",e.sessionId),A(t,2),S(t,function(e){return h((function t(){var n;return x(t,(function(t){switch(t.s){case 1:return n=new Promise((function(e,t){new Le(t).V(Bt)})),A(t,2),S(t,Promise.race([Promise.all([e.close(),e.closed]),n]),4);case 4:L(t,0);break;case 2:C(t),q.v("Timeout waiting for session close"),w(t)}}))}))}(e),4);case 4:L(t,0);break;case 2:C(t),w(t)}}))}))}))),0)}}))}))}function Ft(e){return it(e=e.h.values(),(function(e){return e.loaded}))}function Ut(t,n,r){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=[]),(r=r.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}(r=bt.prototype).destroy=function(){var e=this;return h((function t(){return x(t,(function(t){switch(t.s){case 1:return e.i?S(t,e.ua,0):(e.i=!0,S(t,function(e){return h((function t(){return x(t,(function(t){switch(t.s){case 1:return e.u.release(),e.u=null,e.A.reject(),e.ea.stop(),e.ea=null,e.X.stop(),e.X=null,S(t,jt(e),2);case 2:if(!e.m){t.I(3);break}return A(t,4),S(t,e.m.setMediaKeys(null),6);case 6:L(t,5);break;case 4:C(t);case 5:e.m=null;case 3:e.g=null,e.C.clear(),e.o=null,e.F=[],e.j=null,e.l=null,e.J=null,w(t)}}))}))}(e),4));case 4:e.ua.resolve(),t.I(0)}}))}))},r.configure=function(e){this.j=e},r.Ub=function(e){var t=this;if(!this.o)return this.u.ya(e,"encrypted",(function(){t.l(new z(2,6,6010))})),Promise.resolve();this.m=e,this.u.ya(this.m,"play",(function(){for(var e=0;e<t.M.length;e++)Ot(t,t.M[e]);t.va=!0,t.M=[]})),"webkitCurrentPlaybackTargetIsWireless"in this.m&&this.u.H(this.m,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return jt(t)})),e=(e=this.m.setMediaKeys(this.o)).catch((function(e){return Promise.reject(new z(2,6,6003,e.message))}));var n=St(this);return Promise.all([e,n]).then((function(){if(t.i)return Promise.reject();wt(t),t.g.initData.length||t.F.length||t.u.H(t.m,"encrypted",(function(e){return At(t,e.initDataType,new Uint8Array(e.initData))}))})).catch((function(e){if(!t.i)return Promise.reject(e)}))},r.Xb=function(){for(var e=1/0,t=this.h.keys(),n=(t=d(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},r.ye=function(e){this.m&&this.j.delayLicenseRequestUntilPlayed&&this.m.paused&&!this.va?this.M.push(e):Ot(this,e)},r.we=function(e){e=e.target,q.O("Key status changed for session",e.sessionId);var t=this.h.get(e),n=!1;e.keyStatuses.forEach(function(e,r){if("string"==typeof r){var i=r;r=e,e=i}if("com.microsoft.playready"==this.g.keySystem&&16==r.byteLength&&(gt("Trident/")||navigator.userAgent.match(/Edge?\//))){var a=(i=new DataView(r)).getUint32(0,!0),o=i.getUint16(4,!0),s=i.getUint16(6,!0);i.setUint32(0,a,!1),i.setUint16(4,o,!1),i.setUint16(6,s,!1)}"com.microsoft.playready"==this.g.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(t.loaded=!0),"expired"==e&&(n=!0),i=Ee.Nc(new Uint8Array(r)),this.wa.set(i,e)}.bind(this));var r=e.expiration-Date.now();(0>r||n&&1e3>r)&&t&&!t.Ga&&(q.debug("Session has expired",e.sessionId),this.h.delete(e),e.close().catch((function(){}))),Ft(this)&&(this.A.resolve(),this.X.V(Ht))};var Bt=1,Yt=5,Ht=.5;function Vt(){this.g=new muxjs.mp4.CaptionParser,this.l=[],this.j={}}function Gt(){}function Kt(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Wt(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function qt(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=e.length-1;0<=r&&e.end(r)>t;--r)n+=e.end(r)-Math.max(e.start(r),t);return n}function zt(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Xt(e,t,n){this.startTime=e,this.direction=tn,this.endTime=t,this.payload=n,this.region=new cn,this.position=null,this.positionAlign=Qt,this.size=0,this.textAlign=$t,this.writingMode=nn,this.lineInterpretation=rn,this.line=null,this.lineHeight="",this.lineAlign=an,this.displayAlign=Zt,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=sn,this.fontStyle=un,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1}Vt.prototype.init=function(e){var t=muxjs.mp4.probe;e=new Uint8Array(e),this.l=t.videoTrackIds(e),this.j=t.timescale(e),this.g.init()},Vt.prototype.h=function(e,t){var n=new Uint8Array(e);(n=this.g.parse(n,this.l,this.j))&&n.captions&&t(n.captions),this.g.clearParsedCaptions()},Vt.prototype.i=function(){this.g.resetCaptionStream()},Gt.prototype.init=function(){},Gt.prototype.h=function(){},Gt.prototype.i=function(){},Y("shaka.text.Cue",Xt),Xt.prototype.clone=function(){var e,t=new Xt(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t};var Qt="auto";Xt.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Qt};var $t="center",Jt={LEFT:"left",RIGHT:"right",CENTER:$t,START:"start",END:"end"};Xt.textAlign=Jt;var Zt="after",en={BEFORE:"before",CENTER:"center",AFTER:Zt};Xt.displayAlign=en;var tn="ltr";Xt.direction={HORIZONTAL_LEFT_TO_RIGHT:tn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var nn="horizontal-tb";Xt.writingMode={HORIZONTAL_TOP_TO_BOTTOM:nn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var rn=0;Xt.lineInterpretation={LINE_NUMBER:rn,PERCENTAGE:1};var an="start",on={CENTER:"center",START:an,END:"end"};Xt.lineAlign=on;var sn=400;Xt.fontWeight={NORMAL:sn,BOLD:700};var un="normal",ln={NORMAL:un,ITALIC:"italic",OBLIQUE:"oblique"};function cn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=dn,this.scroll=fn}Xt.fontStyle=ln,Xt.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},Y("shaka.text.CueRegion",cn);var dn=1;cn.units={PX:0,PERCENTAGE:dn,LINES:2};var fn="";function hn(e){this.l=null,this.i=e,this.j=this.A=0,this.m=1/0,this.h=this.g=null,this.u="",this.o=new Map}cn.scrollMode={NONE:fn,UP:"up"};var pn={};function mn(t){return!!(pn[t]||e.muxjs&&"application/cea-608"==t)}function gn(e,t){"application/cea-608"!=t&&(e.l=new pn[t])}function vn(e,t,n,r,i){for(var a=n+" "+r,o=new Map,s=(t=d(t)).next();!s.done;s=t.next()){var u=s.value;s=u.stream,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),u.startTime+=i,u.endTime+=i,u.startTime>=e.j&&u.startTime<e.m&&(u=new Xt(u.startTime,u.endTime,u.text),o.get(s).get(a).push(u),s==e.u&&e.i.append([u]))}for(a=(i=d(o.keys())).next();!a.done;a=i.next())for(a=a.value,e.o.has(a)||e.o.set(a,new Map),s=(t=d(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.o.get(a).set(s,u);e.g=null==e.g?Math.max(n,e.j):Math.min(e.g,Math.max(n,e.j)),e.h=Math.max(e.h,Math.min(r,e.m))}function yn(e,t,n){this.j=e,this.l=n,this.h={},this.g=null,this.i={},this.o=new Je,this.F=!1,this.u={},this.A=t,this.C=new pe,this.m=function(e,t){var n=new MediaSource;return e.o.ya(n,"sourceopen",(function(){URL.revokeObjectURL(e.J),t.resolve()})),e.J=_n(n),e.j.src=e.J,n}(this,this.C),this.J=""}Y("shaka.text.TextEngine.registerParser",(function(e,t){pn[e]=t})),Y("shaka.text.TextEngine.unregisterParser",(function(e){delete pn[e]})),hn.prototype.destroy=function(){return this.i=this.l=null,this.o.clear(),Promise.resolve()},hn.prototype.xc=function(e){try{return this.l.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new z(2,2,2009,e)}},hn.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.i||!this.i.remove(e,t)||null==this.g||t<=this.g||e>=this.h||(e<=this.g&&t>=this.h?this.g=this.h=null:e<=this.g&&t<this.h?this.g=t:e>this.g&&t>=this.h&&(this.h=e))}.bind(this))};var _n=e.URL.createObjectURL;function bn(e){var t=st(e.mimeType,e.codecs),n=function(e){var t=[e.mimeType];return ct.forEach((function(n,r){var i=e[r];i&&t.push(n+'="'+i+'"')})),t.join(";")}(e);return mn(t)||MediaSource.isTypeSupported(n)||we(t,e.type)}function Tn(e,t){e.g||(e.g=new hn(e.l)),gn(e.g,t)}function En(e){return!e.m||"ended"==e.m.readyState}function Sn(e,t){if("text"==t)var n=e.g.g;else n=!(n=An(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function wn(e,t){return"text"==t?e.g.h:Kt(An(e,t))}function An(e,t){try{return e.h[t].buffered}catch(n){return t in e.h&&q.error("failed to get buffered range for "+t,n),null}}function Mn(t,n,r,i,a,o){return"text"==n?function(e,t,n,r){return Promise.resolve().then(function(){if(this.l&&this.i)if(null==n||null==r)this.l.parseInit(new Uint8Array(t));else{var e={periodStart:this.A,segmentStart:n,segmentEnd:r};e=this.l.parseMedia(new Uint8Array(t),e).filter(function(e){return e.startTime>=this.j&&e.startTime<this.m}.bind(this)),this.i.append(e),null==this.g&&(this.g=Math.max(n,this.j)),this.h=Math.min(r,this.m)}}.bind(e))}(t.g,r,i,a):t.u[n]?function(e,t){e.j=!0,e.h=new pe,e.l=[],e.i=[];var n=new Uint8Array(t);return e.g.push(n),e.g.flush(),e.j&&e.h.reject(new z(2,3,3018)),e.h}(t.u[n],r).then(function(e){return this.g||Tn(this,"text/vtt"),e.captions&&e.captions.length&&vn(this.g,e.captions,i,a,this.h.video.timestampOffset),Dn(this,n,this.Me.bind(this,n,e.data.buffer))}.bind(t)):(o&&e.muxjs&&(t.g||Tn(t,"text/vtt"),null==i&&null==a?t.A.init(r):t.A.h(r,(function(e){e.length&&vn(t.g,e,i,a,t.h.video.timestampOffset)}))),Dn(t,n,t.Me.bind(t,n,r)))}function Ln(e,t){var n=wn(e,"video")||0;!function(e,t,n){if(e.u=t,t=e.o.get(t))for(var r=d(t.keys()),i=r.next();!i.done;i=r.next())(i=t.get(i.value).filter((function(e){return e.endTime<=n})))&&e.i.append(i)}(e.g,t,n)}function Cn(e,t){return"text"==t?e.g?(e.A.i(),e.g.remove(0,1/0)):Promise.resolve():Dn(e,t,e.Ne.bind(e,t,0,e.m.duration))}function Dn(e,t,n){if(e.F)return Promise.reject();if(n={start:n,p:new pe},e.i[t].push(n),1==e.i[t].length)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new z(2,3,3017,t)):n.p.reject(new z(2,3,3015,r)),Pn(e,t)}return n.p}function kn(e,t){if(e.F)return Promise.reject();var n,r=[];for(n in e.h){var i=new pe,a={start:function(e){e.resolve()}.bind(null,i),p:i};e.i[n].push(a),r.push(i),1==e.i[n].length&&a.start()}return Promise.all(r).then(function(){try{t()}catch(t){var e=Promise.reject(new z(2,3,3015,t))}for(var n in this.h)Pn(this,n);return e}.bind(e),function(e){throw e}.bind(e))}function Pn(e,t){e.i[t].shift();var n=e.i[t][0];if(n)try{n.start()}catch(r){n.p.reject(new z(2,3,3015,r)),Pn(e,t)}}function In(e,t){return e=Rn(e),t=Rn(t),e.split("-")[0]==t.split("-")[0]}function On(e,t){e=Rn(e),t=Rn(t);var n=e.split("-"),r=t.split("-");return n[0]==r[0]&&1==n.length&&2==r.length}function Rn(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=jn.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function xn(e){return e.language?Rn(e.language):e.audio&&e.audio.language?Rn(e.audio.language):e.video&&e.video.language?Rn(e.video.language):"und"}function Nn(e,t){for(var n=Rn(e),r=new Set,i=d(t),a=i.next();!a.done;a=i.next())r.add(Rn(a.value));for(a=(i=d(r)).next();!a.done;a=i.next())if((a=a.value)==n)return a;for(a=(i=d(r)).next();!a.done;a=i.next())if(On(a=a.value,n))return a;for(a=(i=d(r)).next();!a.done;a=i.next()){var o=a=a.value,s=n;if(o=Rn(o),s=Rn(s),o=o.split("-"),s=s.split("-"),2==o.length&&2==s.length&&o[0]==s[0])return a}for(a=(r=d(r)).next();!a.done;a=r.next())if(On(n,i=a.value))return i;return null}(r=yn.prototype).destroy=function(){var e=this;this.F=!0;var t,n=[];for(t in this.i){var r=this.i[t],i=r[0];for(this.i[t]=r.slice(0,1),i&&n.push(i.p.catch(le.Bc)),i=1;i<r.length;++i)r[i].p.reject()}for(var a in this.g&&n.push(this.g.destroy()),this.l&&n.push(this.l.destroy()),this.u)n.push(this.u[a].destroy());return Promise.all(n).then((function(){e.o&&(e.o.release(),e.o=null),e.j&&(e.j.removeAttribute("src"),e.j.load(),e.j=null),e.m=null,e.g=null,e.l=null,e.h={},e.u={},e.A=null,e.i={}}))},r.init=function(e,t){var n=this;return h((function r(){var i;return x(r,(function(r){switch(r.s){case 1:return i=fe,S(r,n.C,2);case 2:e.forEach((function(e,r){var a=st(e.mimeType,e.codecs);r==i.za?Tn(n,a):(!t&&MediaSource.isTypeSupported(a)||!we(a,r)||(n.u[r]=new Se,a=Ae(r,a)),a=n.m.addSourceBuffer(a),n.o.H(a,"error",n.Dg.bind(n,r)),n.o.H(a,"updateend",n.Lb.bind(n,r)),n.h[r]=a,n.i[r]=[])})),w(r)}}))}))},r.bd=function(e){if(e.total=zt(this.j.buffered),e.audio=zt(An(this,"audio")),e.video=zt(An(this,"video")),e.text=[],this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}},r.remove=function(e,t,n){return"text"==e?this.g.remove(t,n):Dn(this,e,this.Ne.bind(this,e,t,n))},r.flush=function(e){return"text"==e?Promise.resolve():Dn(this,e,this.lf.bind(this,e))},r.endOfStream=function(e){return kn(this,function(){En(this)||(e?this.m.endOfStream(e):this.m.endOfStream())}.bind(this))},r.Fa=function(e){return kn(this,function(){this.m.duration=e}.bind(this))},r.ha=function(){return this.m.duration},r.Me=function(e,t){this.h[e].appendBuffer(t)},r.Ne=function(e,t,n){n<=t?this.Lb(e):this.h[e].remove(t,n)},r.Ve=function(e){var t=this.h[e].appendWindowStart,n=this.h[e].appendWindowEnd;this.h[e].abort(),this.h[e].appendWindowStart=t,this.h[e].appendWindowEnd=n,this.Lb(e)},r.lf=function(e){this.j.currentTime-=.001,this.Lb(e)},r.Cg=function(e,t){0>t&&(t+=.001),this.h[e].timestampOffset=t,this.Lb(e)},r.zg=function(e,t,n){this.h[e].appendWindowStart=0,this.h[e].appendWindowEnd=n,this.h[e].appendWindowStart=t,this.Lb(e)},r.Dg=function(e){this.i[e][0].p.reject(new z(2,3,3014,this.j.error?this.j.error.code:0))},r.Lb=function(e){var t=this.i[e][0];t&&(t.p.resolve(),Pn(this,e))};var jn=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]),Fn={$d:function(e,t){var n=e.periods.reduce((function(e,t){return e.concat(t.variants)}),[]);n=Fn.ee(n,t),n=Fn.Lf(n),n=Fn.jf(n);for(var r=Fn.kf(n),i=(n=d(e.periods)).next();!i.done;i=n.next())(i=i.value).variants=i.variants.filter((function(e){return Fn.he(e)==r||(q.debug("Dropping Variant (better codec available)",e),!1)}))},Lf:function(e){for(var t=new je,n=(e=d(e)).next();!n.done;n=e.next()){n=n.value;var r=Fn.he(n);t.push(r,n)}return t},jf:function(e){var t=0,n=new Map,r=e.size();return e.forEach((function(e,i){for(var a=d(i),o=a.next();!o.done;o=a.next()){var s=(o=o.value).video;if(s&&s.width&&s.height){s=s.width*s.height*(s.frameRate||1),n.has(s)||n.set(s,new je);var u=n.get(s);u.push(e,o),u.size()===r&&(t=Math.max(t,s))}}})),t?n.get(t):e},kf:function(e){var t="",n=1/0;return e.forEach((function(e,r){for(var i=0,a=0,o=d(r),s=o.next();!s.done;s=o.next())i+=s.value.bandwidth||0,++a;i/=a,q.debug("codecs",e,"avg bandwidth",i),i<n&&(t=e,n=i)})),t},he:function(e){var t="";e.video&&(t=lt(e.video.codecs)[0]);var n="";return e.audio&&(n=lt(e.audio.codecs)[0]),t+"-"+n},rd:function(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;return!(i&&i.width&&i.height&&(!r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))||!r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))},Xd:function(e,t,n){var r=!1;return e.forEach((function(e){var i=e.allowedByApplication;e.allowedByApplication=Fn.rd(e,t,n),i!=e.allowedByApplication&&(r=!0)})),r},filterNewPeriod:function(e,t,n,r){r.variants=r.variants.filter((function(r){if(e&&e.Z&&!xt(e,r))return q.debug("Dropping variant - not compatible with key system",r),!1;var i=r.audio;return r=r.video,i&&!bn(i)?(q.debug("Dropping variant - audio not compatible with platform",Fn.fb(i)),!1):r&&!bn(r)||gt("Xbox One")&&r&&(r.width&&1920<r.width||r.height&&1080<r.height)&&r.codecs.includes("avc1.")?(q.debug("Dropping variant - video not compatible with platform",Fn.fb(r)),!1):i&&t&&!Fn.Yd(i,t)?(q.debug("Droping variant - not compatible with active audio","active audio",Fn.fb(t),"variant.audio",Fn.fb(i)),!1):!(r&&n&&!Fn.Yd(r,n))||(q.debug("Droping variant - not compatible with active video","active video",Fn.fb(n),"variant.video",Fn.fb(r)),!1)})),r.textStreams=r.textStreams.filter((function(e){var t=mn(st(e.mimeType,e.codecs));return t||q.debug("Dropping text stream. Is not supported by the platform.",e),t}))},Yd:function(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]},Oc:function(e){var t=e.audio,n=e.video,r=t?t.codecs:null,i=n?n.codecs:null,a=[];i&&a.push(i),r&&a.push(r);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var u=new Set;return t&&t.roles.forEach((function(e){return u.add(e)})),n&&n.roles.forEach((function(e){return u.add(e)})),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:o,codecs:a.join(", "),audioCodec:r,videoCodec:i,primary:e.primary,roles:Array.from(u),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e},Kc:function(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}},gd:function(e){return e.__shaka_id||(e.__shaka_id=Fn.Uf++),e.__shaka_id},Uf:0,Of:function(e){var t=Fn.ke(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),t},je:function(e){var t=Fn.ke(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind]),t},ke:function(e){return{id:Fn.gd(e),active:!1,type:"",bandwidth:0,language:Rn(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}},Gb:function(e){return e.allowedByApplication&&e.allowedByKeySystem},Bf:function(e){return e.filter((function(e){return Fn.Gb(e)}))},ee:function(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),r=new Map,i=(n=d(n)).next();!i.done;i=n.next()){var a=(i=i.value).audio.channelsCount;r.has(a)||r.set(a,[]),r.get(a).push(i)}return 0==(n=Array.from(r.keys())).length?e:(i=n.filter((function(e){return e<=t}))).length?r.get(Math.max.apply(null,i)):r.get(Math.min.apply(null,n))},Wb:function(e,t,n){var r=e,i=e.filter((function(e){return e.primary}));i.length&&(r=i);var a=r.length?r[0].language:"";if(r=r.filter((function(e){return e.language==a})),t){var o=Nn(Rn(t),e.map((function(e){return e.language})));o&&(r=e.filter((function(e){return Rn(e.language)==o})))}if(n){if((e=Fn.de(r,n)).length)return e;q.v("No exact match for the text role could be found.")}else if((e=r.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=r.map((function(e){return e.roles})).reduce(le.Rc,[])).length?Fn.de(r,e[0]):r},de:function(e,t){return e.filter((function(e){return e.roles.includes(t)}))},ie:function(e,t,n){for(var r=0;r<n.length;r++)if(n[r].audio==e&&n[r].video==t)return n[r];return null},Pf:function(e){return"audio"==e.type},Sf:function(e){return"video"==e.type},Kf:function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t},fb:function(e){return Fn.Pf(e)?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:Fn.Sf(e)?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}};function Un(){this.m=null,this.i=!1,this.h=new W,this.l=[],this.o=!1,this.g=this.j=null}function Bn(e,t){return e&&(t=t.filter((function(t){return Fn.rd(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function Yn(e,t){this.g=e,this.h=t}function Hn(e,t){var n=new Yn(2,6),r=Kn,i=r.g,a=n.h-i.h;(0<(n.g-i.g||a)?r.i:r.h)(r.g,n,e,t)}function Vn(e,t,n,r){q.ba([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function Gn(e,t,n,r){q.kc([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""))}Y("shaka.abr.SimpleAbrManager",Un),Un.prototype.stop=function(){this.m=null,this.i=!1,this.l=[],this.j=null},Un.prototype.stop=Un.prototype.stop,Un.prototype.init=function(e){this.m=e},Un.prototype.init=Un.prototype.init,Un.prototype.chooseVariant=function(){var e=Bn(this.g.restrictions,this.l),t=this.h.getBandwidthEstimate(this.g.defaultBandwidthEstimate);this.l.length&&!e.length&&(q.v("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),e=[(e=Bn(null,this.l))[0]]);for(var n=e[0]||null,r=0;r<e.length;++r){var i=e[r],a=i.bandwidth/this.g.bandwidthDowngradeTarget,o=(e[r+1]||{bandwidth:1/0}).bandwidth/this.g.bandwidthUpgradeTarget;q.O("Bandwidth ranges:",(i.bandwidth/1e6).toFixed(3),(a/1e6).toFixed(3),(o/1e6).toFixed(3)),t>=a&&t<=o&&(n=i)}return this.j=Date.now(),n},Un.prototype.chooseVariant=Un.prototype.chooseVariant,Un.prototype.enable=function(){this.i=!0},Un.prototype.enable=Un.prototype.enable,Un.prototype.disable=function(){this.i=!1},Un.prototype.disable=Un.prototype.disable,Un.prototype.segmentDownloaded=function(e,t){q.O("Segment downloaded:","deltaTimeMs="+e,"numBytes="+t,"lastTimeChosenMs="+this.j,"enabled="+this.i);var n=this.h;if(!(16e3>t)){var r=8e3*t/e,i=e/1e3;n.g+=t,G(n.h,i,r),G(n.i,i,r)}if(null!=this.j&&this.i)e:{if(q.O("Suggesting Streams..."),this.o){if(Date.now()-this.j<1e3*this.g.switchInterval){q.O("Still within switch interval...");break e}}else{if(!(128e3<=this.h.g)){q.O("Still waiting for a good estimate...");break e}this.o=!0}n=this.chooseVariant(),r=this.h.getBandwidthEstimate(this.g.defaultBandwidthEstimate),q.debug("Calling switch_(), bandwidth="+Math.round(r/1e3)+" kbps"),this.m(n)}},Un.prototype.segmentDownloaded=Un.prototype.segmentDownloaded,Un.prototype.getBandwidthEstimate=function(){return this.h.getBandwidthEstimate(this.g.defaultBandwidthEstimate)},Un.prototype.getBandwidthEstimate=Un.prototype.getBandwidthEstimate,Un.prototype.setVariants=function(e){this.l=e},Un.prototype.setVariants=Un.prototype.setVariants,Un.prototype.configure=function(e){this.g=e},Un.prototype.configure=Un.prototype.configure,Yn.prototype.toString=function(){return"v"+this.g+"."+this.h};var Kn=null,Wn="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),qn="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),zn=["loop","playbackRate"],Xn=["pause","play"],Qn="abrstatuschanged adaptation buffering drmsessionupdate emsg error expirationupdated largegap loading manifestparsed onstatechange onstateidle streaming textchanged texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged".split(" "),$n={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},Jn={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Zn=[["getConfiguration","configure"]],er=[["isTextTrackVisible","setTextTrackVisibility"]],tr="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),nr=["attach","detach","load","unload"];function rr(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Ne){var n={};for(i in t){var r=t[i];r&&"object"==typeof r?"detail"==i&&(n[i]=r):i in Event||(n[i]=r)}return n}if(t instanceof Error){var i=new Set(["name","message","stack"]);for(n in t)i.add(n);for(n=(r=d(Object.getOwnPropertyNames(t))).next();!n.done;n=r.next())i.add(n.value);for(r={},n=(i=d(i)).next();!n.done;n=i.next())r[n=n.value]=t[n];i={__type__:"Error",contents:r}}else if(t instanceof TimeRanges)for(i={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)i.start.push(t.start(n)),i.end.push(t.end(n));else i=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return i}}))}function ir(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var r,i=Error(n.message);for(r in n)i[r]=n[r];n=i}else n=t;return n}))}function ar(e,t,n,r,i,a){this.X=e,this.j=new Le(t),this.Z=n,this.u=!1,this.F=r,this.P=i,this.L=a,this.h=this.m=!1,this.M="",this.o=null,this.A=this.yd.bind(this),this.C=this.ag.bind(this),this.g={video:{},player:{}},this.J=0,this.i={},this.l=null,pr.add(this)}var or=!1,sr=null;function ur(e){for(var t=d(pr),n=t.next();!n.done;n=t.next())lr(n.value,e)}function lr(e,t){q.debug("CastSender: onExistingSessionJoined");var n=e.L();e.l=new pe,e.u=!0,e.Ad(n,t)}function cr(e){for(var t=d(pr),n=t.next();!n.done;n=t.next()){n=n.value;var r=e;q.debug("CastSender: receiver status",r),or="available"==r,n.j.Lc()}}function dr(e){var t=sr;t.removeUpdateListener(e.A),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function fr(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new z(1,7,7e3))}}function hr(e,t){var n=rr(t),r=sr;try{r.sendMessage("urn:x-cast:com.google.shaka.v2",n,(function(){}),q.error)}catch(t){throw q.error("Cast session sendMessage threw",t),n=new z(2,8,8005,t),e.F("player",new Ne("error",{detail:n})),e.Bb(),n}}(r=ar.prototype).destroy=function(){return pr.delete(this),fr(this),sr&&dr(this),this.j&&(this.j.stop(),this.j=null),this.P=this.F=null,this.h=this.m=!1,this.C=this.A=this.l=this.i=this.g=this.o=null,Promise.resolve()},r.la=function(){return this.h},r.Dd=function(){return this.M},r.init=function(){if(this.X.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Lc();var t=new chrome.cast.SessionRequest(this.X);t=new chrome.cast.ApiConfig(t,ur.bind(this),cr.bind(this),"origin_scoped"),chrome.cast.initialize(t,(function(){q.debug("CastSender: init")}),(function(e){q.error("CastSender: init error",e)})),or&&this.j.V(.02),(t=sr)&&t.status!=chrome.cast.SessionStatus.STOPPED?(q.debug("CastSender: re-using existing connection"),lr(this,t)):sr=null}else e.__onGCastApiAvailable||(e.__onGCastApiAvailable=mr),e.__onGCastApiAvailable!=mr&&q.ba("A global Cast SDK hook is already installed! Shaka Player will be unable to receive a notification when the Cast SDK is ready.")},r.Md=function(e){this.o=e,this.h&&hr(this,{type:"appData",appData:this.o})},r.cast=function(e){return this.m?or?this.h?Promise.reject(new z(1,8,8002)):(this.l=new pe,chrome.cast.requestSession(this.Ad.bind(this,e),this.ve.bind(this)),this.l):Promise.reject(new z(1,8,8001)):Promise.reject(new z(1,8,8e3))},r.Bb=function(){if(this.h){if(fr(this),sr){dr(this);try{sr.stop((function(){}),(function(){}))}catch(e){}sr=null}this.yd()}},r.get=function(e,t){if("video"==e){if(Xn.includes(t))return this.Ee.bind(this,e,t)}else if("player"==e){if(Jn[t]&&!this.get("player","isLive")())return function(){};if(tr.includes(t))return this.Ee.bind(this,e,t);if(nr.includes(t))return this.rg.bind(this,e,t);if($n[t])return this.Be.bind(this,e,t)}return this.Be(e,t)},r.set=function(e,t,n){this.g[e][t]=n,hr(this,{type:"set",targetName:e,property:t,value:n})},r.Ad=function(e,t){q.debug("CastSender: onSessionInitiated"),sr=t,t.addUpdateListener(this.A),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.C),this.yd(),hr(this,{type:"init",initState:e,appData:this.o}),this.l.resolve()},r.ve=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.l.reject(new z(2,8,t,e))},r.Be=function(e,t){return this.g[e][t]},r.Ee=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];hr(this,{type:"call",targetName:e,methodName:t,args:r})},r.rg=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];i=new pe;var a=this.J.toString();this.J++,this.i[a]=i;try{hr(this,{type:"asyncCall",targetName:e,methodName:t,args:r,id:a})}catch(e){i.reject(e)}return i},r.yd=function(){var e=!!sr&&"connected"==sr.status;if(q.debug("CastSender: connection status",e),this.h&&!e){for(var t in this.P(),this.g)this.g[t]={};fr(this)}this.M=(this.h=e)?sr.receiver.friendlyName:"",this.j.Lc()},r.ag=function(e,t){var n=ir(t);switch(q.O("CastSender: message",n),n.type){case"event":var r=n.event;this.F(n.targetName,new Ne(r.type,r));break;case"update":for(var i in r=n.update)for(var a in n=this.g[i]||{},r[i])n[a]=r[i][a];this.u&&(this.Z(),this.u=!1);break;case"asyncComplete":if(i=n.id,n=n.error,a=this.i[i],delete this.i[i],a)if(n){for(r in i=new z(n.severity,n.category,n.code),n)i[r]=n[r];a.reject(i)}else a.resolve()}};var pr=new Set;function mr(e){if(e)for(var t=(e=d(pr)).next();!t.done;t=e.next())t.value.init()}function gr(e,t,n){var r=this;Fe.call(this),this.i=e,this.h=t,this.o=this.l=this.j=this.u=this.m=null,this.C=n,this.A=new Map,this.g=new ar(n,(function(){return _r(r)}),(function(){return br(r)}),(function(e,t){return Er(r,e,t)}),(function(){return Tr(r)}),(function(){return yr(r)})),function(e){for(var t in e.g.init(),e.o=new Je,Wn.forEach(function(e){this.o.H(this.i,e,this.L.bind(this))}.bind(e)),Qn.forEach(function(e){this.o.H(this.h,e,this.F.bind(this))}.bind(e)),e.m={},e.i)Object.defineProperty(e.m,t,{configurable:!1,enumerable:!0,get:e.J.bind(e,t),set:e.M.bind(e,t)});e.u={},vr(e,(function(t){Object.defineProperty(e.u,t,{configurable:!1,enumerable:!0,get:function(){return function e(t,n){t.A.has(n)&&(n=t.A.get(n));if("addEventListener"==n)return t.l.addEventListener.bind(t.l);if("removeEventListener"==n)return t.l.removeEventListener.bind(t.l);if("getMediaElement"==n)return function(){return this.m}.bind(t);if("getSharedConfiguration"==n)return q.v("Can't share configuration across a network. Returning copy."),t.g.get("player","getConfiguration");if("getNetworkingEngine"==n)return t.g.la()&&q.v("NOTE: getNetworkingEngine() is always local!"),t.h.Yb.bind(t.h);if(t.g.la()){if("getManifest"==n||"drmInfo"==n)return function(){return q.ba(n+"() does not work while casting!"),null};if("getManifestUri"==n)return Hn("getManifestUri",'Please use "getAssetUri" instead.'),e(t,"getAssetUri");if("attach"==n||"detach"==n)return function(){return q.ba(n+"() does not work while casting!"),Promise.resolve()}}return t.g.la()&&0==Object.keys(t.g.g.video).length&&$n[n]||!t.g.la()?t.h[n].bind(t.h):t.g.get("player",n)}(e,t)}})})),function(e){var t=new Map;vr(e,(function(n,r){if(t.has(r)){var i=t.get(r);n.length<i.length?e.A.set(n,i):e.A.set(i,n)}else t.set(r,n)}))}(e),e.j=new Fe,e.j.jc=e.m,e.l=new Fe,e.l.jc=e.u}(this)}function vr(e,t){function n(e){return"constructor"!=e&&"function"==typeof r[e]&&!i.has(e)}var r=e.h,i=new Set;for(a in r)n(a)&&(i.add(a),t(a,r[a]));for(var a=Object.getPrototypeOf(r),o=Object.getPrototypeOf({});a&&a!=o;){for(var s=d(Object.getOwnPropertyNames(a)),u=s.next();!u.done;u=s.next())n(u=u.value)&&(i.add(u),t(u,r[u]));a=Object.getPrototypeOf(a)}}function yr(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.tc(),startTime:null};return e.i.pause(),zn.forEach(function(e){t.video[e]=this.i[e]}.bind(e)),e.i.ended||(t.startTime=e.i.currentTime),Zn.forEach(function(e){var n=e[1];e=this.h[e[0]](),t.player[n]=e}.bind(e)),er.forEach(function(e){var n=e[1];e=this.h[e[0]](),t.playerAfterLoad[n]=e}.bind(e)),t}function _r(e){e.dispatchEvent(new Ne("caststatuschanged"))}function br(e){e.j.dispatchEvent(new Ne(e.m.paused?"pause":"play"))}function Tr(e){Zn.forEach(function(e){var t=e[1];e=this.g.get("player",e[0])(),this.h[t](e)}.bind(e));var t=e.g.get("player","getAssetUri")(),n=e.g.get("video","ended"),r=Promise.resolve(),i=e.i.autoplay,a=null;n||(a=e.g.get("video","currentTime")),t&&(e.i.autoplay=!1,r=e.h.load(t,a));var o={};zn.forEach(function(e){o[e]=this.g.get("video",e)}.bind(e)),r.then((function(){e.i&&(zn.forEach(function(e){this.i[e]=o[e]}.bind(e)),er.forEach(function(e){var t=e[1];e=this.g.get("player",e[0])(),this.h[t](e)}.bind(e)),e.i.autoplay=i,t&&e.i.play())}),(function(t){e.h.dispatchEvent(new Ne("error",{detail:t}))}))}function Er(e,t,n){e.g.la()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.l.dispatchEvent(n))}function Sr(e,t,n,r){var i=this;Fe.call(this),this.g=e,this.h=t,this.i=new Je,this.L={video:e,player:t},this.C=n||function(){},this.M=r||function(e){return e},this.F=!1,this.m=!0,this.l=0,this.A=!1,this.u=!0,this.o=this.j=null,this.J=new Le((function(){Ar(i)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=e.xe.bind(e),t.onSenderDisconnected=e.xe.bind(e),t.onSystemVolumeChanged=e.hf.bind(e),e.o=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.o.onMessage=e.Wf.bind(e),e.j=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.j.onMessage=e.fg.bind(e),t.start(),Wn.forEach(function(e){this.i.H(this.g,e,this.Ce.bind(this,"video"))}.bind(e)),Qn.forEach(function(e){this.i.H(this.h,e,this.Ce.bind(this,"player"))}.bind(e)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.Nd(3840,2160):e.h.Nd(1920,1080),e.i.H(e.g,"loadeddata",function(){this.A=!0}.bind(e)),e.i.H(e.h,"loading",function(){this.m=!1,wr(this)}.bind(e)),e.i.H(e.g,"playing",function(){this.m=!1,wr(this)}.bind(e)),e.i.H(e.g,"pause",function(){wr(this)}.bind(e)),e.i.H(e.h,"unloading",function(){this.m=!0,wr(this)}.bind(e)),e.i.H(e.g,"ended",function(){var e=this;new Le((function(){e.g&&e.g.ended&&(e.m=!0,wr(e))})).V(5)}.bind(e))}(this)}function wr(e){Promise.resolve().then(function(){this.h&&(this.dispatchEvent(new Ne("caststatuschanged")),Mr(this)||Dr(this))}.bind(e))}function Ar(e){e.J.V(.5);var t={video:{},player:{}};if(qn.forEach(function(e){t.video[e]=this.g[e]}.bind(e)),e.h.aa())for(var n in Jn)0==e.l%Jn[n]&&(t.player[n]=e.h[n]());for(var r in $n)0==e.l%$n[r]&&(t.player[r]=e.h[r]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.A&&(e.l+=1),Cr(e,{type:"update",update:t},e.j),Mr(e)}function Mr(e){return!(!e.u||!e.g.duration&&!e.h.aa())&&(Lr(e),e.u=!1,!0)}function Lr(e,t){t=void 0===t?0:t;var n={contentId:e.h.tc(),streamType:e.h.aa()?"LIVE":"BUFFERED",contentType:""};e.h.aa()||(n.duration=e.g.duration),Dr(e,t,n)}function Cr(e,t,n,r){e.F&&(e=rr(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Dr(e,t,n){t=void 0===t?0:t,n=void 0===n?null:n;var r=e.g.playbackRate,i=kr;r={mediaSessionId:0,playbackRate:r,playerState:i=e.m?i.IDLE:e.h.jd()?i.Re:e.g.paused?i.Te:i.Ue,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}},n&&(r.media=n),Cr(e,{requestId:t,type:"MEDIA_STATUS",status:[r]},e.o)}H(gr,Fe),Y("shaka.cast.CastProxy",gr),gr.prototype.destroy=function(e){return e&&this.g.Bb(),this.o&&(this.o.release(),this.o=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.m=this.i=null,Promise.all(e)},gr.prototype.destroy=gr.prototype.destroy,gr.prototype.Mf=function(){return this.m},gr.prototype.getVideo=gr.prototype.Mf,gr.prototype.Df=function(){return this.u},gr.prototype.getPlayer=gr.prototype.Df,gr.prototype.Ye=function(){return this.g.m&&or},gr.prototype.canCast=gr.prototype.Ye,gr.prototype.la=function(){return this.g.la()},gr.prototype.isCasting=gr.prototype.la,gr.prototype.Dd=function(){return this.g.Dd()},gr.prototype.receiverName=gr.prototype.Dd,gr.prototype.cast=function(){var e=yr(this);return this.g.cast(e).then(function(){if(this.h)return this.h.Ud()}.bind(this))},gr.prototype.cast=gr.prototype.cast,gr.prototype.Md=function(e){this.g.Md(e)},gr.prototype.setAppData=gr.prototype.Md,gr.prototype.Kg=function(){var e=this.g;if(e.h){var t=e.L();chrome.cast.requestSession(e.Ad.bind(e,t),e.ve.bind(e))}},gr.prototype.suggestDisconnect=gr.prototype.Kg,gr.prototype.af=function(e){var t=this;return h((function n(){return x(n,(function(n){switch(n.s){case 1:return e==t.C?n.return():(t.C=e,t.g.Bb(),S(n,t.g.destroy(),2));case 2:t.g=null,t.g=new ar(e,(function(){return _r(t)}),(function(){return br(t)}),(function(e,n){return Er(t,e,n)}),(function(){return Tr(t)}),(function(){return yr(t)})),t.g.init(),w(n)}}))}))},gr.prototype.changeReceiverId=gr.prototype.af,gr.prototype.Bb=function(){this.g.Bb()},gr.prototype.forceDisconnect=gr.prototype.Bb,gr.prototype.J=function(e){if("addEventListener"==e)return this.j.addEventListener.bind(this.j);if("removeEventListener"==e)return this.j.removeEventListener.bind(this.j);if(this.g.la()&&0==Object.keys(this.g.g.video).length){var t=this.i[e];if("function"!=typeof t)return t}return this.g.la()?this.g.get("video",e):("function"==typeof(e=this.i[e])&&(e=e.bind(this.i)),e)},gr.prototype.M=function(e,t){this.g.la()?this.g.set("video",e,t):this.i[e]=t},gr.prototype.L=function(e){this.g.la()||this.j.dispatchEvent(new Ne(e.type,e))},gr.prototype.F=function(e){this.g.la()||this.l.dispatchEvent(e)},H(Sr,Fe),Y("shaka.cast.CastReceiver",Sr),Sr.prototype.isConnected=function(){return this.F},Sr.prototype.isConnected=Sr.prototype.isConnected,Sr.prototype.Rf=function(){return this.m},Sr.prototype.isIdle=Sr.prototype.Rf,Sr.prototype.destroy=function(){var e=this;return h((function t(){var n;return x(t,(function(t){switch(t.s){case 1:return e.i&&(e.i.release(),e.i=null),n=[],e.h&&(n.push(e.h.destroy()),e.h=null),e.J&&(e.J.stop(),e.J=null),e.g=null,e.L=null,e.C=null,e.F=!1,e.m=!0,e.j=null,e.o=null,S(t,Promise.all(n),2);case 2:cast.receiver.CastReceiverManager.getInstance().stop(),w(t)}}))}))},Sr.prototype.destroy=Sr.prototype.destroy,(r=Sr.prototype).xe=function(){this.l=0,this.u=!0,this.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,wr(this)},r.Ce=function(e,t){this.h&&(Ar(this),Cr(this,{type:"event",targetName:e,event:t},this.j))},r.hf=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Cr(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.j),Cr(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.j)},r.fg=function(e){var t=ir(e.data);switch(q.debug("CastReceiver: message",t),t.type){case"init":this.l=0,this.A=!1,this.u=!0,function(e,t,n){for(var r in t.player)e.h[r](t.player[r]);e.C(n),n=Promise.resolve();var i=e.g.autoplay;t.manifest&&(e.g.autoplay=!1,n=e.h.load(t.manifest,t.startTime)),n.then((function(){if(e.h){for(var n in t.video)e.g[n]=t.video[n];for(var r in t.playerAfterLoad)e.h[r](t.playerAfterLoad[r]);e.g.autoplay=i,t.manifest&&(e.g.play(),Dr(e))}}),(function(t){e.h.dispatchEvent(new Ne("error",{detail:t}))}))}(this,t.initState,t.appData),Ar(this);break;case"appData":this.C(t.appData);break;case"set":var n=t.targetName,r=t.property;if(t=t.value,"video"==n){var i=cast.receiver.CastReceiverManager.getInstance();if("volume"==r){i.setSystemVolumeLevel(t);break}if("muted"==r){i.setSystemVolumeMuted(t);break}}this.L[n][r]=t;break;case"call":(n=this.L[t.targetName])[t.methodName].apply(n,t.args);break;case"asyncCall":n=t.targetName,r=t.methodName,"player"==n&&"load"==r&&(this.l=0,this.A=!1),i=t.id,e=e.senderId;var a=this.L[n];t=a[r].apply(a,t.args),"player"==n&&"load"==r&&(t=t.then(function(){this.u=!0}.bind(this))),t.then(this.Je.bind(this,e,i,null),this.Je.bind(this,e,i))}},r.Wf=function(e){var t=ir(e.data);switch(q.debug("CastReceiver: message",t),t.type){case"PLAY":this.g.play(),Dr(this);break;case"PAUSE":this.g.pause(),Dr(this);break;case"SEEK":e=t.currentTime;var n=t.resumeState;null!=e&&(this.g.currentTime=Number(e)),n&&"PLAYBACK_START"==n?(this.g.play(),Dr(this)):n&&"PLAYBACK_PAUSE"==n&&(this.g.pause(),Dr(this));break;case"STOP":this.h.Ud().then(function(){this.h&&Dr(this)}.bind(this));break;case"GET_STATUS":Lr(this,Number(t.requestId));break;case"VOLUME":e=(n=t.volume).level,n=n.muted;var r=this.g.volume,i=this.g.muted;null!=e&&(this.g.volume=Number(e)),null!=n&&(this.g.muted=n),r==this.g.volume&&i==this.g.muted||Dr(this);break;case"LOAD":this.l=0,this.u=this.A=!1,e=t.media,n=t.currentTime,r=this.M(e.contentId),i=t.autoplay||!0,this.C(e.customData),i&&(this.g.autoplay=!0),this.h.load(r,n).then(function(){this.h&&Lr(this)}.bind(this)).catch(function(e){var n="LOAD_FAILED";7==e.category&&7e3==e.code&&(n="LOAD_CANCELLED"),Cr(this,{requestId:Number(t.requestId),type:n},this.o)}.bind(this));break;default:q.v("Unrecognized message type from the generic Chromecast controller!",t.type),Cr(this,{requestId:Number(t.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.o)}},r.Je=function(e,t,n){this.h&&Cr(this,{type:"asyncComplete",id:t,error:n},this.j,e)};var kr={IDLE:"IDLE",Ue:"PLAYING",Re:"BUFFERING",Te:"PAUSED"};function Pr(e,t){this.S=e,this.h=t==Ir,this.g=0}Y("shaka.util.DataViewReader",Pr);var Ir=1;function Or(){throw new z(2,3,3e3)}function Rr(){this.i=[],this.h=[],this.g=!1}function xr(e){for(var t=Br(e);e.reader.Ca()&&!e.parser.g;)e.parser.Fc(e.start+t,e.reader,e.partialOkay)}function Nr(e){for(var t=Br(e),n=e.reader.N();0<n&&!e.parser.g;--n)e.parser.Fc(e.start+t,e.reader,e.partialOkay)}function jr(e){return function(t){e(t.reader.mb(t.reader.S.byteLength-t.reader.ka()))}}function Fr(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function Ur(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Br(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}function Yr(e){var t=this;this.g=[],this.h=[],this.data=[],(new Rr).box("moov",xr).ma("pssh",(function(e){if(1<e.version)q.v("Unrecognized PSSH version found!");else{var n=e.reader.S;if(n=new Uint8Array(n.buffer,n.byteOffset-12,e.size),t.data.push(n),t.g.push(Ee.Nc(e.reader.mb(16))),0<e.version){n=e.reader.N();for(var r=0;r<n;++r){var i=Ee.Nc(e.reader.mb(16));t.h.push(i)}}}})).parse(e),0==this.data.length&&q.v("No pssh box found!")}Pr.Endianness={Tg:0,Vg:Ir},Pr.prototype.Ca=function(){return this.g<this.S.byteLength},Pr.prototype.hasMoreData=Pr.prototype.Ca,Pr.prototype.ka=function(){return this.g},Pr.prototype.getPosition=Pr.prototype.ka,Pr.prototype.sf=function(){return this.S.byteLength},Pr.prototype.getLength=Pr.prototype.sf,Pr.prototype.ra=function(){try{var e=this.S.getUint8(this.g);return this.g+=1,e}catch(e){Or()}},Pr.prototype.readUint8=Pr.prototype.ra,Pr.prototype.dc=function(){try{var e=this.S.getUint16(this.g,this.h);return this.g+=2,e}catch(e){Or()}},Pr.prototype.readUint16=Pr.prototype.dc,Pr.prototype.N=function(){try{var e=this.S.getUint32(this.g,this.h);return this.g+=4,e}catch(e){Or()}},Pr.prototype.readUint32=Pr.prototype.N,Pr.prototype.De=function(){try{var e=this.S.getInt32(this.g,this.h);return this.g+=4,e}catch(e){Or()}},Pr.prototype.readInt32=Pr.prototype.De,Pr.prototype.Pb=function(){try{if(this.h)var e=this.S.getUint32(this.g,!0),t=this.S.getUint32(this.g+4,!0);else t=this.S.getUint32(this.g,!1),e=this.S.getUint32(this.g+4,!1)}catch(e){Or()}if(2097151<t)throw new z(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},Pr.prototype.readUint64=Pr.prototype.Pb,Pr.prototype.mb=function(e){this.g+e>this.S.byteLength&&Or();var t=new Uint8Array(this.S.buffer,this.S.byteOffset+this.g,e);return this.g+=e,t},Pr.prototype.readBytes=Pr.prototype.mb,Pr.prototype.U=function(e){this.g+e>this.S.byteLength&&Or(),this.g+=e},Pr.prototype.skip=Pr.prototype.U,Pr.prototype.Fe=function(e){this.g<e&&Or(),this.g-=e},Pr.prototype.rewind=Pr.prototype.Fe,Pr.prototype.seek=function(e){(0>e||e>this.S.byteLength)&&Or(),this.g=e},Pr.prototype.seek=Pr.prototype.seek,Pr.prototype.Cd=function(){for(var e=this.g;this.Ca()&&0!=this.S.getUint8(this.g);)this.g+=1;return e=new Uint8Array(this.S.buffer,this.S.byteOffset+e,this.g-e),this.g+=1,me(e)},Pr.prototype.readTerminatedString=Pr.prototype.Cd,Y("shaka.util.Mp4Parser",Rr),Rr.prototype.box=function(e,t){var n=Fr(e);return this.i[n]=0,this.h[n]=t,this},Rr.prototype.box=Rr.prototype.box,Rr.prototype.ma=function(e,t){var n=Fr(e);return this.i[n]=1,this.h[n]=t,this},Rr.prototype.fullBox=Rr.prototype.ma,Rr.prototype.stop=function(){this.g=!0},Rr.prototype.stop=Rr.prototype.stop,Rr.prototype.parse=function(e,t){var n=new Uint8Array(e);for(n=new Pr(new DataView(n.buffer,n.byteOffset,n.byteLength),0),this.g=!1;n.Ca()&&!this.g;)this.Fc(0,n,t)},Rr.prototype.parse=Rr.prototype.parse,Rr.prototype.Fc=function(e,t,n){var r=t.ka(),i=t.N(),a=t.N(),o=!1;switch(q.O("Parsing MP4 box",Ur(a)),i){case 0:i=t.S.byteLength-r;break;case 1:i=t.Pb(),o=!0}var s=this.h[a];if(s){var u=null,l=null;1==this.i[a]&&(u=(l=t.N())>>>24,l&=16777215),a=r+i,n&&a>t.S.byteLength&&(a=t.S.byteLength),a-=t.ka(),t=0<a?t.mb(a):new Uint8Array(0),s({parser:this,partialOkay:n||!1,version:u,flags:l,reader:t=new Pr(new DataView(t.buffer,t.byteOffset,t.byteLength),0),size:i,start:r+e,has64BitSize:o})}else t.U(Math.min(r+i-t.ka(),t.S.byteLength-t.ka()))},Rr.prototype.parseNext=Rr.prototype.Fc,Rr.children=xr,Rr.sampleDescription=Nr,Rr.allData=jr,Rr.typeToString=Ur,Rr.headerSize=Br;var Hr={sc:function(e,t){var n=Hr.Y(e,t);return 1!=n.length?null:n[0]},Yc:function(e,t,n){return 1!=(e=Hr.fe(e,t,n)).length?null:e[0]},Y:function(e,t){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.tagName==t}))},fe:function(e,t,n){return Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))},getAttributeNS:function(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null},uc:function(e){return Array.prototype.every.call(e.childNodes,(function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null},R:function(e,t,n,r){r=void 0===r?null:r;var i=null;return null!=(e=e.getAttribute(t))&&(i=n(e)),null==i?r:i},jg:function(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null},Ma:function(e){if(!e)return null;var t=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e);return t?(e=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(e)?e:null):(q.v("Invalid duration string:",e),null)},Hc:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null},parseInt:function(e){return 0==(e=Number(e))%1?e:null},Gc:function(e){return 0==(e=Number(e))%1&&0<e?e:null},Mb:function(e){return 0==(e=Number(e))%1&&0<=e?e:null},parseFloat:function(e){return e=Number(e),isNaN(e)?null:e},ff:function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},Ae:function(e,t){var n=new DOMParser;try{var r=n.parseFromString(e,"text/xml")}catch(e){}if(r&&r.documentElement.tagName==t)var i=r.documentElement;return i&&0<i.getElementsByTagName("parsererror").length?null:i},ze:function(e,t){try{var n=me(e);return Hr.Ae(n,t)}catch(e){}}},Vr=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Gr(e,t,n){var r=function(e){for(var t=[],n=(e=d(e)).next();!n.done;n=e.next())(n=qr(n.value))&&t.push(n);return t}(e),i=null;e=[];var a=[],o=new Set(r.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new z(2,4,4010);if(n||(a=r.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Ge||(i=e.init||i,!1)}))).length&&(0==(e=function(e,t,n){for(var r=[],i=(n=d(n)).next();!i.done;i=n.next()){i=i.value;var a=Vr.get(i.Ge);if(a){var o;if(o=Hr.Yc(i.node,"urn:microsoft:playready","pro")){o=Ee.Ja(o.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),u=o.length,l=s.length+16+u,c=new ArrayBuffer(l),f=new Uint8Array(c);c=new DataView(c);var h=0;c.setUint32(h,l),h+=4,c.setUint32(h,1886614376),h+=4,c.setUint32(h,0),h+=4,f.set(s,h),h+=s.length,c.setUint32(h,u),h+=4,f.set(o,h),o=[{initData:f,initDataType:"cenc",keyId:i.keyId}]}else o=null;o=de(a,i.init||e||o),(a=Wr.get(a))&&(o.licenseServerUri=a(i)),r.push(o)}else for(i=d(i=t(i.node)||[]),a=i.next();!a.done;a=i.next())r.push(a.value)}return r}(i,t,a)).length&&(e=[de("",i)])),r.length&&(n||!a.length))for(e=[],n=(t=d(Vr.values())).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(de(n,i));if(o=Array.from(o)[0]||null)for(n=(t=d(e)).next();!n.done;n=t.next())for(r=(n=d(n.value.initData)).next();!r.done;r=n.next())r.value.keyId=o;return{be:o,Xg:i,drmInfos:e,ge:!0}}var Kr,Wr=(new Map).set("com.widevine.alpha",(function(e){return(e=Hr.Yc(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return(e=Hr.Yc(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=new DataView(e).getUint32(t,!0);if(t+=4,n!==e.byteLength)return q.v("PlayReady Object with invalid length encountered."),[];t+=2,n=[];for(var r=new DataView(e);t<e.byteLength-1;){var i=r.getUint16(t,!0);t+=2;var a=r.getUint16(t,!0);t+=2;var o=new Uint8Array(e,t,a);n.push({type:i,value:o}),t+=a}return n}((e=Ee.Ja(e.textContent)).buffer).filter((function(e){return 1===e.type}))[0])?(e=ge(e.value,!0),(e=Hr.Ae(e,"WRMHEADER"))?function(e){for(var t=(e=d(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=d(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""):""}));function qr(e){var t=e.getAttribute("schemeIdUri"),n=Hr.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),r=Hr.fe(e,"urn:mpeg:cenc:2013","pssh").map(Hr.uc);if(!t)return q.error("Missing required schemeIdUri attribute on","ContentProtection element",e),null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new z(2,4,4009);var i=[];try{i=r.map((function(e){return{initDataType:"cenc",initData:Ee.Ja(e),keyId:null}}))}catch(e){throw new z(2,4,4007)}return{node:e,Ge:t,keyId:n,init:0<i.length?i:null}}function zr(t,n,r,i,a){var o={RepresentationID:n,Number:r,Bandwidth:i,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(n,r,i,a){if("$$"==n)return"$";var s=o[r];if(null==s)return q.v("URL template does not have an available substitution for identifier",'"'+r+'":',t),n;switch("RepresentationID"==r&&i&&(q.v("URL template should not contain a width specifier for identifier",'"RepresentationID":',t),i=void 0),"Time"==r&&(s=Math.round(s)),a){case void 0:case"d":case"i":case"u":n=s.toString();break;case"o":n=s.toString(8);break;case"x":n=s.toString(16);break;case"X":n=s.toString(16).toUpperCase();break;default:n=s.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-n.length)+1).join("0")+n}))}function Xr(e,t){var n=Qr(e,t,"timescale"),r=1;n&&(r=Hr.Gc(n)||1),n=Qr(e,t,"duration"),(n=Hr.Gc(n||""))&&(n/=r);var i=Qr(e,t,"startNumber"),a=Number(Qr(e,t,"presentationTimeOffset"))||0,o=Hr.Mb(i||"");null!=i&&null!=o||(o=1);var s=$r(e,t,"SegmentTimeline");if(i=null,s){i=r;var u=e.$.duration||1/0;s=Hr.Y(s,"S");for(var l=[],c=-a,d=0;d<s.length;++d){var f=s[d],h=Hr.R(f,"t",Hr.Mb),p=Hr.R(f,"d",Hr.Mb),m=Hr.R(f,"r",Hr.parseInt);if(null!=h&&(h-=a),!p){q.v('"S" element must have a duration:','ignoring the remaining "S" elements.',f);break}if(h=null!=h?h:c,0>(m=m||0))if(d+1<s.length){if(null==(m=Hr.R(s[d+1],"t",Hr.Mb))){q.v('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',f);break}if(h>=m){q.v('An "S" element cannot have a negative repeat','if its start time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',f);break}m=Math.ceil((m-h)/p)-1}else{if(1/0==u){q.v('The last "S" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "S" element.',f);break}if(h/i>=u){q.v('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',f);break}m=Math.ceil((u*i-h)/p)-1}for(0<l.length&&h!=c&&(Math.abs((h-c)/i)>=he&&q.v("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",f),l[l.length-1].end=h/i),f=0;f<=m;++f)c=h+p,l.push({start:h/i,end:c/i,Pg:h}),h=c}i=l}return{timescale:r,ia:n,ob:o,sa:a/r||0,Vd:a,W:i}}function Qr(e,t,n){return[t(e.G),t(e.fa),t(e.qa)].filter(le.Ra).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function $r(e,t,n){return[t(e.G),t(e.fa),t(e.qa)].filter(le.Ra).map((function(e){return Hr.sc(e,n)})).reduce((function(e,t){return e||t}))}function Jr(e,t,n,r,i,a){if(a=void 0===a?0:a,Hr.getAttributeNS(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,r,i,a){for(var o=Hr.getAttributeNS(e,"http://www.w3.org/1999/xlink","href"),s=Hr.getAttributeNS(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=0;u<e.attributes.length;u++){var l=e.attributes[u];"http://www.w3.org/1999/xlink"==l.namespaceURI&&(e.removeAttributeNS(l.namespaceURI,l.localName),--u)}if(5<=a)return Pe(new z(2,4,4028));if("onLoad"!=s)return Pe(new z(2,4,4027));var c=ce([r],[o]);return i.request(0,ze(c,t)).ca((function(r){if(!(r=Hr.ze(r.data,e.tagName)))return Pe(new z(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;r.childNodes.length;){var s=r.childNodes[0];r.removeChild(s),e.appendChild(s)}for(s=0;s<r.attributes.length;s++){var u=r.attributes[s].nodeName,l=r.getAttribute(u);e.setAttribute(u,l)}return Jr(e,t,n,c[0],i,a+1)}))}(e,t,n,r,i,a);return n&&(o=o.ca(void 0,(function(){return Jr(e,t,n,r,i,a)}))),o}o=[];for(var s=0;s<e.childNodes.length;s++){var u=e.childNodes[s];u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Hr.getAttributeNS(u,"http://www.w3.org/1999/xlink","href")?(e.removeChild(u),--s):"SegmentTimeline"!=u.tagName&&o.push(Jr(u,t,n,r,i,a)))}return xe(o).ca((function(){return e}))}function Zr(e,t,n){this.i=e,this.h=t,this.g=n}function ei(e,t,n,r,i,a){this.position=e,this.startTime=t,this.endTime=n,this.i=r,this.h=i,this.g=a}function ti(e,t,n,r){var i,a=(new Rr).ma("sidx",(function(e){i=function(e,t,n,r){var i=[];r.reader.U(4);var a=r.reader.N();if(0==a)throw q.error("Invalid timescale."),new z(2,3,3005);if(0==r.version)var o=r.reader.N(),s=r.reader.N();else o=r.reader.Pb(),s=r.reader.Pb();r.reader.U(2);var u=r.reader.dc();for(e=e+r.size+s,s=0;s<u;s++){var l=r.reader.N(),c=(2147483648&l)>>>31;l&=2147483647;var d=r.reader.N();if(r.reader.U(4),1==c)throw q.error("Heirarchical SIDXs are not supported."),new z(2,3,3006);i.push(new ei(i.length,o/a-t,(o+d)/a-t,(function(){return n}),e,e+l-1)),o+=d,e+=l}return r.parser.stop(),i}(t,r,n,e)}));if(e&&a.parse(e),i)return i;throw q.error('Invalid box type, expected "sidx".'),new z(2,3,3004)}function ni(e){this.g=e}function ri(e,t){for(;e.g.length&&e.g[e.g.length-1].startTime>=t;)e.g.pop();for(;e.g.length&&0>=e.g[0].endTime;)e.g.shift();if(0!=e.g.length){var n=e.g[e.g.length-1];e.g[e.g.length-1]=new ei(n.position,n.startTime,t,n.i,n.h,n.g)}}function ii(e){this.h=e,this.g=new Pr(e,0),Kr||(Kr=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function ai(e){var t=oi(e);if(7<t.length)throw new z(2,3,3002);for(var n=0,r=0;r<t.length;r++)n=256*n+t[r];t=n,n=oi(e);e:{r=Ee.Ha;for(var i=0;i<Kr.length;i++)if(r(n,Kr[i])){r=!0;break e}r=!1}if(r)n=e.h.byteLength-e.g.ka();else{if(8==n.length&&224&n[1])throw new z(2,3,3001);for(r=n[0]&(1<<8-n.length)-1,i=1;i<n.length;i++)r=256*r+n[i];n=r}return n=e.g.ka()+n<=e.h.byteLength?n:e.h.byteLength-e.g.ka(),r=new DataView(e.h.buffer,e.h.byteOffset+e.g.ka(),n),e.g.U(n),new si(t,r)}function oi(e){var t,n=e.g.ra();for(t=1;8>=t&&!(n&1<<8-t);t++);if(8<t)throw new z(2,3,3002);var r=new Uint8Array(t);for(r[0]=n,n=1;n<t;n++)r[n]=e.g.ra();return r}function si(e,t){this.id=e,this.g=t}function ui(e){if(8<e.g.byteLength)throw new z(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new z(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){t=256*t+e.g.getUint8(n)}return t}function li(){}function ci(e){var t=new ii(e.g);if(179!=(e=ai(t)).id)throw q.v("Not a CueTime element."),new z(2,3,3013);if(e=ui(e),183!=(t=ai(t)).id)throw q.v("Not a CueTrackPositions element."),new z(2,3,3012);t=new ii(t.g);for(var n=0;t.Ca();){var r=ai(t);if(241==r.id){n=ui(r);break}}return{Qg:e,qg:n}}function di(e,t){var n=$r(e,t,"Initialization");if(!n)return null;var r=e.G.xa,i=n.getAttribute("sourceURL");i&&(r=ce(e.G.xa,[i])),i=0;var a=null;return(n=Hr.R(n,"range",Hr.Hc))&&(i=n.start,a=n.end),new Zr((function(){return r}),i,a)}function fi(e,t,n,r,i,a,o,s){var u=e.presentationTimeline,l=!e.zb||!e.$.ld,c=e.$.start,d=e.$.duration,f=t,h=null;return{createSegmentIndex:function(){var e=[f(r,i,a),"webm"==o?f(n.i(),n.h,n.g):null];return f=null,Promise.all(e).then((function(e){var t=e[0];e=e[1]||null,t="mp4"==o?ti(t,i,r,s):(new li).parse(t,e,r,s),u.Jb(t,c),h=new ni(t),l&&ri(h,d)}))},findSegmentPosition:function(e){return h.find(e)},getSegmentReference:function(e){return h.get(e)}}}function hi(e){return e.ec}function pi(e,t){var n=di(e,mi),r=function(e){return[e.G.Ua,e.fa.Ua,e.qa.Ua].filter(le.Ra).map((function(e){return Hr.Y(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.me&&(e.me=!0,q.v("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate.")),{Tf:t.getAttribute("media"),start:(t=Hr.R(t,"mediaRange",Hr.Hc,{start:0,end:null})).start,end:t.end}}))}(e),i=Xr(e,mi),a=i.ob;0==a&&(q.v("SegmentList@startNumber must be > 0"),a=1);var o=0;if(i.ia?o=i.ia*(a-1):i.W&&0<i.W.length&&(o=i.W[0].start),!(r={ia:i.ia,startTime:o,ob:a,sa:i.sa,W:i.W,jb:r}).ia&&!r.W&&1<r.jb.length)throw q.v("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",e.G),new z(2,4,4002);if(!r.ia&&!e.$.duration&&!r.W&&1==r.jb.length)throw q.v("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",e.G),new z(2,4,4002);if(r.W&&0==r.W.length)throw q.v("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",e.G),new z(2,4,4002);return a=i=null,e.qa.id&&e.G.id&&(i=t[a=e.qa.id+","+e.G.id]),o=function(e,t,n,r){var i=r.jb.length;r.W&&r.W.length!=r.jb.length&&(i=Math.min(r.W.length,r.jb.length),q.v("The number of items in the segment timeline and the number of segment","URLs do not match, truncating",r.jb.length,"to",i));for(var a=[],o=r.startTime,s=0;s<i;s++){var u,l=r.jb[s],c=ce(n,[l.Tf]);u=null!=r.ia?o+r.ia:r.W?r.W[s].end:o+e,a.push(new ei(s+t,o,u,function(e){return e}.bind(null,c),l.start,l.end)),o=u}return a}(e.$.duration,r.ob,e.G.xa,r),i?(i.sd(o),a=e.presentationTimeline.$b(),i.Vc(a-e.$.start)):(e.presentationTimeline.Jb(o,e.$.start),i=new ni(o),a&&e.zb&&(t[a]=i)),e.zb&&e.$.ld||ri(i,e.$.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:i.find.bind(i),getSegmentReference:i.get.bind(i),initSegmentReference:n,sa:r.sa}}function mi(e){return e.Ua}function gi(e,t,n,r){var i=function(e){var t=Qr(e,vi,"initialization");if(!t)return null;var n=e.G.id,r=e.bandwidth||null,i=e.G.xa;return new Zr((function(){var e=zr(t,n,null,r,null);return ce(i,[e])}),0,null)}(e),a=Xr(e,vi),o=Qr(e,vi,"media"),s=Qr(e,vi,"index");if(o=(a={ia:a.ia,timescale:a.timescale,ob:a.ob,sa:a.sa,Vd:a.Vd,W:a.W,qd:o,bc:s}).bc?1:0,o+=a.W?1:0,0==(o+=a.ia?1:0))throw q.error("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",e.G),new z(2,4,4002);if(1!=o&&(q.v("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",e.G),a.bc?(q.info("Using the index URL template by default."),a.W=null):q.info("Using the SegmentTimeline by default."),a.ia=null),!a.bc&&!a.qd)throw q.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",e.G),new z(2,4,4002);if(a.bc){if("mp4"!=(n=e.G.mimeType.split("/")[1])&&"webm"!=n)throw q.error("SegmentTemplate specifies an unsupported container type.",e.G),new z(2,4,4006);if("webm"==n&&!i)throw q.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate uses a WebM container,","but does not contain an initialization URL template.",e.G),new z(2,4,4005);r=zr(a.bc,e.G.id,null,e.bandwidth||null,null),e=fi(e,t,i,r=ce(e.G.xa,[r]),0,null,n,a.sa)}else a.ia?(r||(e.presentationTimeline.ud(a.ia),e.presentationTimeline.vd(e.$.start)),e=function(e,t){var n=e.$.duration,r=t.ia,i=t.ob,a=t.timescale,o=t.qd,s=e.bandwidth||null,u=e.G.id,l=e.G.xa;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0>e||n&&e>=n?null:Math.floor(e/r)},getSegmentReference:function(e){var t=e*r,c=t+r;return n&&(c=Math.min(c,n)),0>c||n&&t>=n?null:new ei(e,t,c,(function(){var n=zr(o,u,e+i,s,t*a);return ce(l,[n])}),0,null)}}}(e,a)):(o=t=null,e.qa.id&&e.G.id&&(t=n[o=e.qa.id+","+e.G.id]),s=function(e,t){for(var n=[],r=0;r<t.W.length;r++){var i=r+t.ob;n.push(new ei(i,t.W[r].start,t.W[r].end,function(e,t,n,r,i,a){return ce(r,[e=zr(e,t,i,n,a)]).map((function(e){return e.toString()}))}.bind(null,t.qd,e.G.id,e.bandwidth||null,e.G.xa,i,t.W[r].Pg+t.Vd),0,null))}return n}(e,a),r=!e.zb||!e.$.ld,t?(r&&ri(new ni(s),e.$.duration),t.sd(s),n=e.presentationTimeline.$b(),t.Vc(n-e.$.start)):(e.presentationTimeline.Jb(s,e.$.start),t=new ni(s),o&&e.zb&&(n[o]=t)),r&&ri(t,e.$.duration),e={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:i,sa:a.sa}}function vi(e){return e.gc}Y("shaka.media.InitSegmentReference",Zr),Zr.prototype.Tc=function(){return this.i()},Zr.prototype.createUris=Zr.prototype.Tc,Zr.prototype.dd=function(){return this.h},Zr.prototype.getStartByte=Zr.prototype.dd,Zr.prototype.cd=function(){return this.g},Zr.prototype.getEndByte=Zr.prototype.cd,Y("shaka.media.SegmentReference",ei),ei.prototype.ka=function(){return this.position},ei.prototype.getPosition=ei.prototype.ka,ei.prototype.xc=function(){return this.startTime},ei.prototype.getStartTime=ei.prototype.xc,ei.prototype.qf=function(){return this.endTime},ei.prototype.getEndTime=ei.prototype.qf,ei.prototype.Tc=function(){return this.i()},ei.prototype.createUris=ei.prototype.Tc,ei.prototype.dd=function(){return this.h},ei.prototype.getStartByte=ei.prototype.dd,ei.prototype.cd=function(){return this.g},ei.prototype.getEndByte=ei.prototype.cd,Y("shaka.media.SegmentIndex",ni),ni.prototype.destroy=function(){return this.g=null,Promise.resolve()},ni.prototype.destroy=ni.prototype.destroy,ni.prototype.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var r=this.g[n],i=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<i)return r.position}return this.g.length&&e<this.g[0].startTime?this.g[0].position:null},ni.prototype.find=ni.prototype.find,ni.prototype.get=function(e){return 0==this.g.length?null:0>(e-=this.g[0].position)||e>=this.g.length?null:this.g[e]},ni.prototype.get=ni.prototype.get,ni.prototype.offset=function(e){for(var t=0;t<this.g.length;++t)this.g[t].startTime+=e,this.g[t].endTime+=e},ni.prototype.offset=ni.prototype.offset,ni.prototype.sd=function(e){for(var t=[],n=0,r=0;n<this.g.length&&r<e.length;){var i=this.g[n],a=e[r];i.startTime<a.startTime?(t.push(i),n++):(i.startTime>a.startTime?0==n?t.push(a):q.v("Refusing to rewrite original references on update!"):(.1<Math.abs(i.endTime-a.endTime)?t.push(new ei(i.position,a.startTime,a.endTime,a.i,a.h,a.g)):t.push(i),n++),r++)}for(;n<this.g.length;)t.push(this.g[n++]);if(t.length)for(n=t[t.length-1].position+1;r<e.length;)i=new ei(n++,(i=e[r++]).startTime,i.endTime,i.i,i.h,i.g),t.push(i);else t=e;this.g=t},ni.prototype.merge=ni.prototype.sd,ni.prototype.Vc=function(e){for(var t=0;t<this.g.length;++t)if(this.g[t].endTime>e)return void this.g.splice(0,t);this.g=[]},ni.prototype.evict=ni.prototype.Vc,ii.prototype.Ca=function(){return this.g.Ca()},li.prototype.parse=function(e,t,n,r){var i;if(440786851!=ai(t=new ii(new DataView(t))).id)throw q.error("Not an EBML element."),new z(2,3,3008);var a=ai(t);if(408125543!=a.id)throw q.error("Not a Segment element."),new z(2,3,3009);for(t=a.g.byteOffset,a=new ii(a.g),i=null;a.Ca();){var o=ai(a);if(357149030==o.id){i=o;break}}if(!i)throw q.error("Not an Info element."),new z(2,3,3010);for(a=new ii(i.g),i=1e6,o=null;a.Ca();){var s=ai(a);if(2807729==s.id)i=ui(s);else if(17545==s.id)if(4==(o=s).g.byteLength)o=o.g.getFloat32(0);else{if(8!=o.g.byteLength)throw new z(2,3,3003);o=o.g.getFloat64(0)}}if(null==o)throw new z(2,3,3011);if(i=o*(a=i/1e9),475249515!=(e=ai(new ii(new DataView(e)))).id)throw q.error("Not a Cues element."),new z(2,3,3007);return function(e,t,n,r,i,a){function o(){return i}var s=[];e=new ii(e.g);for(var u=null,l=null;e.Ca();){var c=ai(e);if(187==c.id){var d=ci(c);d&&(c=n*d.Qg,d=t+d.qg,null!=u&&s.push(new ei(s.length,u-a,c-a,o,l,d-1)),u=c,l=d)}}return null!=u&&s.push(new ei(s.length,u-a,r-a,o,l,null)),s}(e,t,a,i,n,r)};var yi={Nb:{},cc:{},Fd:function(e,t){yi.cc[e]=t}};function _i(e,t,n){this.j=e,this.Ic=t,this.m=this.l=1/0,this.g=1,this.h=this.i=null,this.u=0,this.A=!0,this.o=0,this.C=void 0===n||n}function bi(e,t,n,r){return e=ze(e,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Ti(){var e=this;this.h=this.g=null,this.j=[],this.i=null,this.u=[],this.m=1,this.A={},this.C=0,this.F=new V(5),this.o=new Le((function(){!function(e){h((function t(){var n,r;return x(t,(function(t){switch(t.s){case 1:return q.info("Updating manifest..."),n=0,A(t,2),S(t,Ei(e),4);case 4:n=t.B,L(t,3);break;case 2:r=C(t),e.h&&(r.severity=1,e.h.onError(r));case 3:if(!e.h)return t.return();Mi(e,n),w(t)}}))}))}(e)})),this.l=new Ve}function Ei(e){var t=Date.now(),n=e.h.networkingEngine.request(0,ze(e.j,e.g.retryParameters));return Ge(e.l,n),n.promise.then((function(t){if(e.h)return t.uri&&!e.j.includes(t.uri)&&e.j.unshift(t.uri),function(e,t,n){if(!(t=Hr.ze(t,"MPD")))throw new z(2,4,4001,n);return t=Jr(t,e.g.retryParameters,e.g.dash.xlinkFailGracefully,n,e.h.networkingEngine),Ge(e.l,t),t.promise.then((function(t){return function(e,t,n){return h((function r(){var i,a,o,s,u,l,c,d,f,h,p,m,g,v,y,_,b,T,E,A,M,L,C,D;return x(r,(function(r){switch(r.s){case 1:s=le,l=[n],0<(c=(u=Hr).Y(t,"Location").map(u.uc).filter(s.Ra)).length&&(d=ce(l,c),l=e.j=d),f=u.Y(t,"BaseURL").map(u.uc),h=ce(l,f),p=e.g.dash.ignoreMinBufferTime,m=0,p||(m=u.R(t,"minBufferTime",u.Ma)),e.C=u.R(t,"minimumUpdatePeriod",u.Ma,-1),g=u.R(t,"availabilityStartTime",u.jg),v=u.R(t,"timeShiftBufferDepth",u.Ma),y=u.R(t,"maxSegmentDuration",u.Ma),_=t.getAttribute("type")||"static",b=e.g.dash.ignoreSuggestedPresentationDelay,T=null,b||(T=u.R(t,"suggestedPresentationDelay",u.Ma)),e.i?E=e.i.presentationTimeline:(A=Math.max(e.g.dash.defaultPresentationDelay,1.5*m),E=new _i(g,null!=T?T:A,e.g.dash.autoCorrectDrift));for(var k={zb:"static"!=_,presentationTimeline:E,qa:null,$:null,fa:null,G:null,bandwidth:0,me:!1},P=h,I=Hr.R(t,"mediaPresentationDuration",Hr.Ma),O=[],R=0,x=Hr.Y(t,"Period"),N=0;N<x.length;N++){var j=x[N];R=Hr.R(j,"start",Hr.Ma,R);var F=Hr.R(j,"duration",Hr.Ma),U=null;if(N!=x.length-1){var B=Hr.R(x[N+1],"start",Hr.Ma);null!=B&&(U=B-R)}else null!=I&&(U=I-R);if(B=he,U&&F&&Math.abs(U-F)>B&&q.v("There is a gap/overlap between Periods",j),null==U&&(U=F),j=Si(e,k,P,{start:R,duration:U,node:j,ld:null==U||N==x.length-1}),O.push(j),F=k.qa.id,e.u.includes(F)||(e.u.push(F),e.i&&(e.h.filterNewPeriod(j),e.i.periods.push(j))),null==U){N!=x.length-1&&q.v("Skipping Period",N+1,"and any subsequent Periods:","Period",N+1,"does not have a valid start time.",O[N+1]),R=null;break}R+=U}if(null==e.i&&e.h.filterAllPeriods(O),null!=I?(R!=I&&q.v("@mediaPresentationDuration does not match the total duration of all","Periods."),i=O,a=I,o=!1):(i=O,a=R,o=!0),M=a,L=i,E.hc("static"==_),"static"!=_&&o||E.Fa(M||1/0),E.aa()&&!isNaN(e.g.availabilityWindowOverride)&&(v=e.g.availabilityWindowOverride),null==v&&(v=1/0),E.Pd(v),E.ud(y||1),e.i){r.I(0);break}if(e.i={presentationTimeline:E,periods:L,offlineSessionIds:[],minBufferTime:m||0},!E.Pe()){r.I(0);break}return C=u.Y(t,"UTCTiming"),S(r,function(e,t,n){n=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}}));var r=e.g.dash.clockSyncUri;return!n.length&&r&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),le.df(n,function(e){var n=e.scheme;switch(e=e.value,n){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Ci(this,t,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Ci(this,t,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return n=Date.parse(e),isNaN(n)?0:n-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return q.ba("NTP UTCTiming scheme is not supported"),Promise.reject();default:return q.ba("Unrecognized scheme in UTCTiming element",n),Promise.reject()}}.bind(e)).catch((function(){return q.ba("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0}))}(e,h,C),4);case 4:if(D=r.B,!e.h)return r.return();E.Ke(D),w(r)}}))}))}(e,t,n)}))}(e,t.data,t.uri)})).then((function(){var n=(Date.now()-t)/1e3;return G(e.F,1,n),n}))}function Si(e,t,n,r){if(t.qa=Li(r.node,null,n),t.$=r,t.qa.id||(q.info("No Period ID given for Period with start time "+r.start+",  Assigning a default"),t.qa.id="__shaka_period_"+r.start),Hr.Y(r.node,"EventStream").forEach(e.kg.bind(e,r.start,r.duration)),n=Hr.Y(r.node,"AdaptationSet").map(e.ig.bind(e,t)).filter(le.Ra),t.zb){t=[];for(var i=d(n),a=i.next();!a.done;a=i.next())for(var o=(a=d(a.value.tg)).next();!o.done;o=a.next())t.push(o.value);if(t.length!=new Set(t).size)throw new z(2,4,4018)}var s=n.filter((function(e){return!e.Td}));if(n.filter((function(e){return e.Td})).forEach((function(e){var t=e.Td.split(" ");s.forEach((function(n){t.includes(n.id)&&n.streams.forEach((function(t){t.trickModeVideo=e.streams.find((function(e){return lt(t.codecs)[0]==lt(e.codecs)[0]}))}))}))})),t=wi(s,"video"),i=wi(s,"audio"),!t.length&&!i.length)throw new z(2,4,4004);for(n=e.g.disableAudio,i.length&&!n||(i=[null]),n=e.g.disableVideo,t.length&&!n||(t=[null]),n=[],a=0;a<i.length;a++)for(o=0;o<t.length;o++)Ai(e,i[a],t[o],n);if(t=[],!e.g.disableText)for(e=wi(s,"text"),i=0;i<e.length;i++)t.push.apply(t,e[i].streams);return{startTime:r.start,textStreams:t,variants:n}}function wi(e,t){return e.filter((function(e){return e.contentType==t}))}function Ai(e,t,n,r){if(t||n)if(t&&n){var i=t.drmInfos,a=n.drmInfos;if(!i.length||!a.length||0<Nt(i,a).length){a=Nt(t.drmInfos,n.drmInfos);for(var o=0;o<t.streams.length;o++)for(var s=0;s<n.streams.length;s++)i=(n.streams[s].bandwidth||0)+(t.streams[o].bandwidth||0),i={id:e.m++,language:t.language,primary:t.pd||n.pd,audio:t.streams[o],video:n.streams[s],bandwidth:i,drmInfos:a,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}}else for(a=t||n,o=0;o<a.streams.length;o++)i=a.streams[o].bandwidth||0,i={id:e.m++,language:a.language||"und",primary:a.pd,audio:t?a.streams[o]:null,video:n?a.streams[o]:null,bandwidth:i,drmInfos:a.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},r.push(i)}function Mi(e,t){0>e.C||e.o.V(Math.max(3,e.C-t,K(e.F)))}function Li(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,wd:null,audioSamplingRate:null},n=n||t.xa;var r=Hr.Mb,i=Hr.ff,a=Hr.Y(e,"BaseURL").map(Hr.uc),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs;i=Hr.R(e,"frameRate",i)||t.frameRate;for(var l=e.getAttribute("sar")||t.pixelAspectRatio,c=Hr.Y(e,"InbandEventStream"),f=t.emsgSchemeIdUris.slice(),h=(c=d(c)).next();!h.done;h=c.next())h=h.value.getAttribute("schemeIdUri"),f.includes(h)||f.push(h);return c=function(e){for(var t=0;t<e.length;++t){var n=e[t],r=n.getAttribute("schemeIdUri");if(r&&(n=n.getAttribute("value")))switch(r){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var i=parseInt(n,10);if(!i){q.v("Channel parsing failure! Ignoring scheme and value",r,n);continue}return i;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(i=parseInt(n,16))){q.v("Channel parsing failure! Ignoring scheme and value",r,n);continue}for(e=0;i;)1&i&&++e,i>>=1;return e;default:q.v("Unrecognized audio channel scheme:",r,n)}}return null}(c=Hr.Y(e,"AudioChannelConfiguration"))||t.wd,h=Hr.R(e,"audioSamplingRate",r)||t.audioSamplingRate,o||(o=Di(s,u)),{xa:ce(n,a),ec:Hr.sc(e,"SegmentBase")||t.ec,Ua:Hr.sc(e,"SegmentList")||t.Ua,gc:Hr.sc(e,"SegmentTemplate")||t.gc,width:Hr.R(e,"width",r)||t.width,height:Hr.R(e,"height",r)||t.height,contentType:o,mimeType:s,codecs:u,frameRate:i,pixelAspectRatio:l,emsgSchemeIdUris:f,id:e.getAttribute("id"),wd:c,audioSamplingRate:h}}function Ci(e,t,n,r){return(t=ze(t=ce(t,[n]),e.g.retryParameters)).method=r,t=e.h.networkingEngine.request(4,t),Ge(e.l,t),t.promise.then((function(e){if("HEAD"==r){if(!e.headers||!e.headers.date)return q.v("UTC timing response is missing","expected date header"),0;e=e.headers.date}else e=me(e.data);return e=Date.parse(e),isNaN(e)?(q.v("Unable to parse date from UTC timing response"),0):e-Date.now()}))}function Di(e,t){return mn(st(e,t))?"text":e.split("/")[0]}function ki(e,t,n,r){this.h=e,this.type=t,this.g=n,this.segments=r||null}function Pi(e,t,n,r){this.id=e,this.name=t,this.g=n,this.value=void 0===r?null:r}function Ii(e,t){this.name=e,this.value=t}function Oi(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Ri(e,t){this.h=t,this.g=e}Y("shaka.media.ManifestParser.registerParserByExtension",yi.Fd),yi.Qb=function(e,t){yi.Nb[e]=t},Y("shaka.media.ManifestParser.registerParserByMime",yi.Qb),yi.ng=function(){var e={};if(dt()){for(var t in yi.Nb)e[t]=!0;for(var n in yi.cc)e[n]=!0}t={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var r=(n=d(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!r.done;r=n.next())e[r=r.value]=dt()?!!yi.Nb[r]:ft(r);for(var i in t)e[i]=dt()?!!yi.cc[i]:ft(t[i]);return e},yi.create=function(e,t,n,r){return h((function i(){var a,o;return x(i,(function(i){switch(i.s){case 1:return A(i,2),S(i,yi.rf(e,t,n,r),4);case 4:return a=i.B,i.return(new a);case 2:throw(o=C(i)).severity=2,o}}))}))},yi.rf=function(e,t,n,r){return h((function i(){var a,o,s,u,l;return x(i,(function(i){switch(i.s){case 1:if(a=yi,r){if(o=a.Nb[r.toLowerCase()])return i.return(o);q.v("Could not determine manifest type using MIME type ",r)}if(s=a.getExtension(e)){if(u=a.cc[s])return i.return(u);q.v("Could not determine manifest type for extension ",s)}else q.v("Could not find extension for ",e);if(r){i.I(2);break}return S(i,a.zf(e,t,n),3);case 3:if(r=i.B){if(l=yi.Nb[r])return i.return(l);q.v("Could not determine manifest type using MIME type",r)}case 2:throw new z(2,4,4e3,e)}}))}))},yi.zf=function(e,t,n){return h((function r(){var i,a,o;return x(r,(function(r){switch(r.s){case 1:return(i=ze([e],n)).method="HEAD",S(r,t.request(0,i).promise,2);case 2:return a=r.B,o=a.headers["content-type"],r.return(o?o.toLowerCase().split(";").shift():"")}}))}))},yi.getExtension=function(e){return 1==(e=new Q(e).pa.split("/").pop().split(".")).length?"":e.pop().toLowerCase()},yi.isSupported=function(e,t){return!!dt()&&(t in yi.Nb||yi.getExtension(e)in yi.cc)},Y("shaka.media.PresentationTimeline",_i),_i.prototype.ha=function(){return this.l},_i.prototype.getDuration=_i.prototype.ha,_i.prototype.xf=function(){return this.g},_i.prototype.getMaxSegmentDuration=_i.prototype.xf,_i.prototype.Fa=function(e){this.l=e},_i.prototype.setDuration=_i.prototype.Fa,_i.prototype.Ff=function(){return this.j},_i.prototype.getPresentationStartTime=_i.prototype.Ff,_i.prototype.Ke=function(e){this.u=e},_i.prototype.setClockOffset=_i.prototype.Ke,_i.prototype.hc=function(e){this.A=e},_i.prototype.setStatic=_i.prototype.hc,_i.prototype.Pd=function(e){this.m=e},_i.prototype.setSegmentAvailabilityDuration=_i.prototype.Pd,_i.prototype.Ag=function(e){this.Ic=e},_i.prototype.setDelay=_i.prototype.Ag,_i.prototype.pf=function(){return this.Ic},_i.prototype.getDelay=_i.prototype.pf,_i.prototype.Jb=function(e,t){if(0!=e.length){var n=e[e.length-1].endTime+t;this.vd(e[0].startTime+t),this.g=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.g),this.h=Math.max(this.h,n),null!=this.j&&this.C&&(this.j=(Date.now()+this.u)/1e3-this.h-this.g),q.K("notifySegments:","maxSegmentDuration="+this.g)}},_i.prototype.notifySegments=_i.prototype.Jb,_i.prototype.vd=function(e){this.i=null==this.i?e:Math.min(this.i,e)},_i.prototype.notifyMinSegmentStartTime=_i.prototype.vd,_i.prototype.ud=function(e){this.g=Math.max(this.g,e),q.K("notifyNewSegmentDuration:","maxSegmentDuration="+this.g)},_i.prototype.notifyMaxSegmentDuration=_i.prototype.ud,_i.prototype.offset=function(e){null!=this.i&&(this.i+=e),null!=this.h&&(this.h+=e)},_i.prototype.offset=_i.prototype.offset,_i.prototype.aa=function(){return 1/0==this.l&&!this.A},_i.prototype.isLive=_i.prototype.aa,_i.prototype.ib=function(){return 1/0!=this.l&&!this.A},_i.prototype.isInProgress=_i.prototype.ib,_i.prototype.$b=function(){if(1/0==this.m)return this.o;var e=this.Db()-this.m;return Math.max(this.o,e)},_i.prototype.getSegmentAvailabilityStart=_i.prototype.$b,_i.prototype.Le=function(e){this.o=e},_i.prototype.setUserSeekStart=_i.prototype.Le,_i.prototype.Db=function(){return this.aa()||this.ib()?Math.min(Math.max(0,(Date.now()+this.u)/1e3-this.g-this.j),this.l):this.l},_i.prototype.getSegmentAvailabilityEnd=_i.prototype.Db,_i.prototype.Zb=function(e){var t=Math.max(this.i,this.o);if(1/0==this.m)return Math.ceil(1e3*t)/1e3;var n=this.Db()-this.m;return e=Math.min(n+e,this.Ka()),Math.max(t,e)},_i.prototype.getSafeSeekRangeStart=_i.prototype.Zb,_i.prototype.Cb=function(){return this.Zb(0)},_i.prototype.getSeekRangeStart=_i.prototype.Cb,_i.prototype.Ka=function(){var e=this.aa()||this.ib()?this.Ic:0;return Math.max(0,this.Db()-e)},_i.prototype.getSeekRangeEnd=_i.prototype.Ka,_i.prototype.Pe=function(){return!(null==this.j||null!=this.h&&this.C)},_i.prototype.usingPresentationStartTime=_i.prototype.Pe,Y("shaka.dash.DashParser",Ti),(r=Ti.prototype).configure=function(e){this.g=e},r.start=function(e,t){var n=this;return h((function r(){var i;return x(r,(function(r){switch(r.s){case 1:return n.j=[e],n.h=t,S(r,Ei(n),2);case 2:if(i=r.B,n.h&&Mi(n,i),!n.h)throw new z(2,7,7001);return r.return(n.i)}}))}))},r.stop=function(){return this.g=this.h=null,this.j=[],this.i=null,this.u=[],this.A={},null!=this.o&&(this.o.stop(),this.o=null),this.l.destroy()},r.update=function(){Ei(this).catch(function(e){this.h&&this.h.onError(e)}.bind(this))},r.onExpirationUpdated=function(){},r.ig=function(e,t){if(e.fa=Li(t,e.qa,null),"image"==e.fa.contentType)return q.v("Skipping Image AdaptationSet",e.fa),null;var n=!1,r=Hr.Y(t,"Role"),i=r.map((function(e){return e.getAttribute("value")})).filter(le.Ra),a=void 0,o="text"==e.fa.contentType;o&&(a="subtitle");for(var s=0;s<r.length;s++){var u=r[s].getAttribute("schemeIdUri");if(null==u||"urn:mpeg:dash:role:2011"==u)switch(u=r[s].getAttribute("value"),u){case"main":n=!0;break;case"caption":case"subtitle":a=u}}var l=null,c=!1;Hr.Y(t,"EssentialProperty").forEach((function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?l=e.getAttribute("value"):c=!0})),s=Hr.Y(t,"Accessibility");var f=new Map;for(r={},u=(s=d(s)).next();!u.done;r={Vb:r.Vb},u=s.next()){var h=u.value;u=h.getAttribute("schemeIdUri"),h=h.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==u||"urn:scte:dash:cc:cea-708:2015"==u?(r.Vb=1,null!=h?h.split(";").forEach(function(e){return function(t){if(t.includes("=")){var n=(t=t.split("="))[0].startsWith("CC")?t[0]:"CC"+t[0];t=t[1].split(",")[0].split(":").pop()}else n="CC"+e.Vb,e.Vb+=2;f.set(n,Rn(t))}}(r)):f.set("CC1","und")):"urn:mpeg:dash:role:2011"==u&&null!=h&&(i.push(h),"captions"==h&&(a="caption"))}if(c)return null;var p=Gr(r=Hr.Y(t,"ContentProtection"),this.g.dash.customScheme,this.g.dash.ignoreDrmInfo);if(r=Rn(t.getAttribute("lang")||"und"),s=t.getAttribute("label"),(u=Hr.Y(t,"Label"))&&u.length&&((u=u[0]).textContent&&(s=u.textContent)),0==(i=(u=Hr.Y(t,"Representation")).map(this.lg.bind(this,e,p,a,r,s,n,i,f)).filter((function(e){return!!e}))).length){if(this.g.dash.ignoreEmptyAdaptationSet||o)return null;throw new z(2,4,4003)}return e.fa.contentType&&"application"!=e.fa.contentType||(e.fa.contentType=Di(i[0].mimeType,i[0].codecs),i.forEach((function(t){t.type=e.fa.contentType}))),i.forEach((function(e){p.drmInfos.forEach((function(t){e.keyId&&t.keyIds.push(e.keyId)}))})),o=u.map((function(e){return e.getAttribute("id")})).filter(le.Ra),{id:e.fa.id||"__fake__"+this.m++,contentType:e.fa.contentType,language:r,pd:n,streams:i,drmInfos:p.drmInfos,Td:l,tg:o}},r.lg=function(e,t,n,r,i,a,o,s,u){if(e.G=Li(u,e.fa,null),!function(e){var t=e.ec?1:0;if(t+=e.Ua?1:0,0==(t+=e.gc?1:0))return"text"==e.contentType||"application"==e.contentType||(q.v("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',e),!1);return 1!=t&&(q.v("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",e),e.ec?(q.info("Using SegmentBase by default."),e.Ua=null):q.info("Using SegmentList by default."),e.gc=null),!0}(e.G))return q.v("Skipping Representation",e.G),null;e.bandwidth=Hr.R(u,"bandwidth",Hr.Gc)||0;var l=e.G.contentType;l="text"==l||"application"==l;try{var c=this.ug.bind(this);if(e.G.ec)var d=function(e,t){var n=Number(Qr(e,hi,"presentationTimeOffset"))||0,r=Qr(e,hi,"timescale"),i=1;r&&(i=Hr.Gc(r)||1),n=n/i||0,r=di(e,hi);var a=e.G.contentType;if(i=e.G.mimeType.split("/")[1],"text"!=a&&"mp4"!=i&&"webm"!=i)throw q.error("SegmentBase specifies an unsupported container type.",e.G),new z(2,4,4006);if("webm"==i&&!r)throw q.error("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",e.G),new z(2,4,4005);a=$r(e,hi,"RepresentationIndex");var o=Qr(e,hi,"indexRange"),s=e.G.xa;if(o=Hr.Hc(o||""),a){var u=a.getAttribute("sourceURL");u&&(s=ce(e.G.xa,[u])),o=Hr.R(a,"range",Hr.Hc,o)}if(!o)throw q.error("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",e.G),new z(2,4,4002);return{createSegmentIndex:(i=fi(e,t,r,s,o.start,o.end,i,n)).createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:r,sa:n}}(e,c);else if(e.G.Ua)d=pi(e,this.A);else if(e.G.gc)d=gi(e,c,this.A,!!this.i);else{var f=e.G.xa,h=e.$.duration||0;d={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<h?1:null},getSegmentReference:function(e){return 1!=e?null:new ei(1,0,h,(function(){return f}),0,null)},initSegmentReference:null,sa:0}}}catch(e){if(l&&4002==e.code)return null;throw e}return u=function(e,t,n,r){var i=Gr(e,t,r);if(n.ge)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==i.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=i.drmInfos),n.ge=!1;else if(0<i.drmInfos.length&&(n.drmInfos=n.drmInfos.filter((function(e){return i.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==n.drmInfos.length))throw new z(2,4,4008);return i.be||n.be}(u=Hr.Y(u,"ContentProtection"),this.g.dash.customScheme,t,this.g.dash.ignoreDrmInfo),{id:this.m++,originalId:e.G.id,createSegmentIndex:d.createSegmentIndex,findSegmentPosition:d.findSegmentPosition,getSegmentReference:d.getSegmentReference,initSegmentReference:d.initSegmentReference,presentationTimeOffset:d.sa,mimeType:e.G.mimeType,codecs:e.G.codecs,frameRate:e.G.frameRate,pixelAspectRatio:e.G.pixelAspectRatio,bandwidth:e.bandwidth,width:e.G.width,height:e.G.height,kind:n,encrypted:0<t.drmInfos.length,keyId:u,language:r,label:i,type:e.fa.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:e.G.emsgSchemeIdUris,roles:o,channelsCount:e.G.wd,audioSamplingRate:e.G.audioSamplingRate,closedCaptions:s}},r.kg=function(e,t,n){var r=Hr.Mb,i=n.getAttribute("schemeIdUri")||"",a=n.getAttribute("value")||"",o=Hr.R(n,"timescale",r)||1;Hr.Y(n,"Event").forEach(function(n){var s=Hr.R(n,"presentationTime",r)||0,u=Hr.R(n,"duration",r)||0;u=(s=s/o+e)+u/o,null!=t&&(s=Math.min(s,e+t),u=Math.min(u,e+t)),n={schemeIdUri:i,value:a,startTime:s,endTime:u,id:n.getAttribute("id")||"",eventElement:n},this.h.onTimelineRegionAdded(n)}.bind(this))},r.ug=function(e,t,n){return e=bi(e,t,n,this.g.retryParameters),e=this.h.networkingEngine.request(1,e),Ge(this.l,e),e.promise.then((function(e){return e.data}))},yi.Fd("mpd",Ti),yi.Qb("application/dash+xml",Ti),yi.Qb("video/vnd.mpeg.dash.mpd",Ti),Pi.prototype.toString=function(){var e="#"+this.name,t=this.g?this.g.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},Pi.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};var xi={Ab:function(e,t){return e.filter((function(e){return e.name==t}))},cb:function(e,t){var n=xi.Ab(e,t);return n.length?n[0]:null},Zc:function(e,t,n){return e.filter((function(e){var r=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),r.value==t&&e.value==n}))},Sc:function(e,t){return ce([e],[t])[0]},kd:function(e){return/^#(?!EXT)/m.test(e)}};function Ni(e){this.h=e,this.g=0}function ji(e){Fi(e,/[ \t]+/gm)}function Fi(e,t){t.lastIndex=e.g;var n=t.exec(e.h);return n=null==n?null:{position:n.index,length:n[0].length,wg:n},e.g==e.h.length||null==n||n.position!=e.g?null:(e.g+=n.length,n.wg)}function Ui(e){return e.g==e.h.length?null:(e=Fi(e,/[^ \t\n]*/gm))?e[0]:null}function Bi(){this.g=0}function Yi(e,t,n){var r=(t=(t=me(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new z(2,4,4015);t=0;for(var i=1;i<r.length;i++)if(!xi.kd(r[i])){var a=Vi(e,r[i]);if(--e.g,Gi.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(i+=1)}for(i=[],a=1;a<r.length;)if(xi.kd(r[a]))a+=1;else{var o=Vi(e,r[a]);if(Ki.includes(o.name)){if(1!=t)throw new z(2,4,4017);return new ki(n,t,i,e=Hi(e,n,r=r.splice(a,r.length-a),i))}i.push(o),a+=1,"EXT-X-STREAM-INF"==o.name&&(o.g.push(new Ii("URI",r[a])),a+=1)}return new ki(n,t,i)}function Hi(e,t,n,r){var i=[],a=[];return n.forEach((function(n){if(/^(#EXT)/.test(n))n=Vi(e,n),Gi.includes(n.name)?r.push(n):a.push(n);else{if(xi.kd(n))return[];n=xi.Sc(t,n.trim()),i.push(new Ri(n,a)),a=[]}})),i}function Vi(e,t){var n=e.g++,r=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new z(2,4,4016,t);var i,a=r[1],o=r[2];if(r=[],o){var s;(s=Fi(o=new Ni(o),/^([^,=]+)(?:,|$)/g))&&(i=s[1]);for(var u=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;s=Fi(o,u);)r.push(new Ii(s[1],s[2]||s[3]))}return new Pi(n,a,r,i)}var Gi="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Ki="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function Wi(e){try{var t=Wi.parse(e);return Oe({uri:e,Bd:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return Pe(e)}}function qi(){var e=this;this.g=this.j=null,this.ea=1,this.L=new Map,this.Z=new Set,this.h=new Map,this.i=null,this.F="",this.C=new Bi,this.X=0,this.m=new Le((function(){!function(e){h((function t(){var n,r;return x(t,(function(t){switch(t.s){case 1:return q.info("Updating manifest..."),e.j?(A(t,2),S(t,e.update(),4)):t.return();case 4:n=e.X,e.m.V(n),L(t,0);break;case 2:if(r=C(t),!e.j)return t.return();r.severity=1,e.j.onError(r),e.m.V(.1),w(t)}}))}))}(e)})),this.l=ha,this.A=null,this.J=0,this.M=1/0,this.o=new Ve,this.P=[],this.u=new Map,this.da=!1}function zi(e,t){return h((function n(){var r,i,a,o,s,u,l,c,d,f;return x(n,(function(n){switch(n.s){case 1:return r=xi,i=pa,a=t.We,S(n,da(e,ze([a],e.g.retryParameters),0),2);case 2:if(o=n.B,1!=(s=Yi(e.C,o.data,o.uri)).type)throw new z(2,4,4017);return l=(u=r.cb(s.g,"EXT-X-MEDIA-SEQUENCE"))?Number(u.value):0,c=t.stream,S(n,na(e,t.Pc,s,l,c.mimeType,c.codecs),3);case 3:d=n.B,t.fc.g=d,f=d[d.length-1],r.cb(s.g,"EXT-X-ENDLIST")&&(ca(e,i.$a),e.i.Fa(f.endTime)),w(n)}}))}))}function Xi(e){e.forEach((function(e){if(e){var t=e.stream.codecs.split(",");t=t.filter((function(e){return"mp4a.40.34"!=e})),e.stream.codecs=t.join(",")}}))}function Qi(e,t,n,r,i){return{id:e.ea++,language:t?t.language:"und",primary:!!t&&t.primary||!!n&&n.primary,audio:t,video:n,bandwidth:r,drmInfos:i,allowedByApplication:!0,allowedByKeySystem:!0}}function $i(e,t,n){return h((function r(){var i,a,o,s,u,l,c,d,f,h,p;return x(r,(function(r){switch(r.s){case 1:if(i=aa(t,"URI"),e.h.has(i))return r.return(e.h.get(i));if(a=aa(t,"TYPE").toLowerCase(),o=fe,"subtitles"==a&&(a=o.za),s=Rn(Oi(t,"LANGUAGE","und")),u=Oi(t,"NAME"),l=t.getAttribute("DEFAULT"),c="YES"==l,d=Oi(t,"CHANNELS"),"audio"==a)if(d){var m=d.split("/")[0];m=parseInt(m,10)}else m=null;else m=null;return f=m,h=Oi(t,"CHARACTERISTICS"),S(r,Ji(e,i,n,a,s,c,u,f,null,h),2);case 2:return p=r.B,e.h.has(i)?r.return(e.h.get(i)):null==p?r.return(null):(e.L.set(t.id,p),e.h.set(i,p),r.return(p))}}))}))}function Ji(e,t,n,r,i,a,o,s,u,l){return h((function c(){var f,p,m,g,v,y,_,b,T,E,w,M,D,k,P,I,O,R,N,j,F,U,B,Y,H,V,G,K;return x(c,(function(c){switch(c.s){case 1:return p=(f=xi).Sc(e.F,t),S(c,da(e,ze([p],e.g.retryParameters),0),2);case 2:if(m=c.B,p=m.uri,1!=(g=Yi(e.C,m.data,p)).type)throw new z(2,4,4017);v=[],g.segments.forEach((function(e){e=f.Ab(e.h,"EXT-X-KEY"),v.push.apply(v,e)})),y=!1,_=[],b=null;for(var W=d(v),X=W.next();!X.done;X=W.next())if(T=X.value,"NONE"!=(E=aa(T,"METHOD"))){if(y=!0,"AES-128"==E)return q.v("Unsupported HLS Encryption",E),e.da=!0,c.return(null);w=aa(T,"KEYFORMAT"),(D=(M=fa[w])?M(T):null)?(D.keyIds.length&&(b=D.keyIds[0]),_.push(D)):q.v("Unsupported HLS KEYFORMAT",w)}if(y&&!_.length)throw new z(2,4,4026);return function(e,t){var n=pa,r=xi.cb(t.g,"EXT-X-PLAYLIST-TYPE"),i=xi.cb(t.g,"EXT-X-ENDLIST");i=r&&"VOD"==r.value||i,r=r&&"EVENT"==r.value&&!i,r=!i&&!r,i?ca(e,n.$a):(ca(e,r?n.Wd:n.Se),n=oa(t.g,"EXT-X-TARGETDURATION"),n=Number(n.value),e.J=Math.max(n,e.J),e.M=Math.min(n,e.M))}(e,g),k=function(e,t){if(1==t.length)return t[0];var n=ia(e,t);if(null!=n)return n;throw new z(2,4,4025,t)}(r,n),S(c,function(e,t,n,r){return h((function i(){var a,o,s,u,l,c,d,f,h,p;return x(i,(function(i){switch(i.s){case 1:return a=fe,o=r.segments[0].g,s=new Q(o),u=s.pa.split(".").pop(),l=la[t],(c=l[u])?i.return(c):t==a.za?n&&"vtt"!=n&&"wvtt"!=n?i.return("application/mp4"):i.return("text/vtt"):((d=ze([o],e.g.retryParameters)).method="HEAD",S(i,da(e,d,1),2));case 2:return f=i.B,(h=f.headers["content-type"])?i.return(h.split(";")[0]):(p=l.mp4,i.return(p))}}))}))}(e,r,k,g),3);case 3:return P=c.B,ua.includes(P)&&(k=""),O=(I=f.cb(g.g,"EXT-X-MEDIA-SEQUENCE"))?Number(I.value):0,A(c,4),S(c,na(e,t,g,O,P,k),6);case 6:R=c.B,L(c,5);break;case 4:if(4035==(N=C(c)).code)return q.ba("Skipping unsupported HLS stream",P,t),c.return(null);throw N;case 5:if(j=R[0].startTime,F=R[R.length-1].endTime,U=F-j,B=new ni(R),Y=Zi(g),H=void 0,"text"==r&&(H="subtitle"),V=[],l)for(X=(W=d(l.split(","))).next();!X.done;X=W.next())G=X.value,V.push(G);return K={id:e.ea++,originalId:o,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:B.find.bind(B),getSegmentReference:B.get.bind(B),initSegmentReference:Y,presentationTimeOffset:0,mimeType:P,codecs:k,kind:H,encrypted:y,keyId:b,language:i,label:o,type:r,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:V,channelsCount:s,audioSamplingRate:null,closedCaptions:u},c.return({stream:K,fc:B,drmInfos:_,Pc:t,We:p,td:j,Yg:F,duration:U})}}))}))}function Zi(e){var t=xi.Ab(e.g,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new z(2,4,4020);var n=aa(t=t[0],"URI"),r=xi.Sc(e.h,n);return e=0,n=null,(t=Oi(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),n=(e=Number(e[1]))+t-1),new Zr((function(){return[r]}),e,n)}function ea(e,t,n,r){var i=t.h,a=t.g;t=oa(i,"EXTINF").value.split(","),t=r+Number(t[0]);var o=0,s=null;return(i=xi.cb(i,"EXT-X-BYTERANGE"))&&(o=i.value.split("@"),i=Number(o[0]),s=(o=o[1]?Number(o[1]):e.g+1)+i-1),new ei(n,r,t,(function(){return[a]}),o,s)}function ta(e){e.i&&(e.P.forEach((function(t){e.i.Jb(t,0)})),e.P=[])}function na(e,t,n,r,i,a){return h((function o(){var s,u,l,c,d,f,p,m,g,v;return x(o,(function(o){switch(o.s){case 1:return s=n.segments,u=[],l=s[0].g,c=ea(null,s[0],r,0),d=Zi(n),S(o,function(e,t,n,r,i,a){return h((function o(){var s,u,l,c,d,f,h,p,m;return x(o,(function(o){switch(o.s){case 1:if(e.A){if(s=e.h.get(t),u=s.fc,l=u.get(r.position))return q.K("Found segment start time in previous manifest"),o.return(l.startTime);q.debug("Unable to find segment start time in previous manifest!")}if(q.K("Fetching segment to find start time"),i=i.toLowerCase(),ua.includes(i))throw q.ba("Raw formats are not yet supported.  Skipping "+i),new z(1,4,4035);if("video/webm"==i)throw q.ba("WebM in HLS is not yet supported.  Skipping."),new z(1,4,4035);if("video/mp4"!=i&&"audio/mp4"!=i){o.I(2);break}return c=[ra(e,r)],n&&c.push(ra(e,n)),S(o,Promise.all(c),3);case 3:return d=o.B,f=d[0],h=d[1]||d[0],o.return(function(e,t,n,r){var i=0;if((new Rr).box("moov",xr).box("trak",xr).box("mdia",xr).ma("mdhd",(function(e){e.reader.U(0==e.version?8:16),i=e.reader.N(),e.parser.stop()})).parse(r,!0),!i)throw q.error("Unable to find timescale in init segment!"),new z(2,4,4030,e,t);var a=0,o=!1;if((new Rr).box("moof",xr).box("traf",xr).ma("tfdt",(function(e){a=(0==e.version?e.reader.N():e.reader.Pb())/i,o=!0,e.parser.stop()})).parse(n,!0),!o)throw new z(2,4,4030,e,t);return a}(t,f.uri,f.data,h.data));case 2:if("video/mp2t"!=i){o.I(4);break}return S(o,ra(e,r),5);case 5:return p=o.B,o.return(function(e,t,n){function r(){a.seek(o+188),71!=(s=a.ra())&&(a.seek(o+192),s=a.ra()),71!=s&&(a.seek(o+204),s=a.ra()),71!=s&&i(),a.Fe(1)}function i(){throw new z(2,4,4030,e,t)}for(var a=new Pr(new DataView(n),0),o=0,s=0;;)if(o=a.ka(),71!=(s=a.ra())&&i(),8191==(8191&(n=a.dc())))r();else if(16384&n){if(0!=(n=(48&a.ra())>>4)&&2!=n||i(),3==n&&(n=a.ra(),a.U(n)),1==a.N()>>8){a.U(3),0!=(n=a.ra()>>6)&&1!=n||i(),0==a.ra()&&i(),n=a.ra();var u=a.dc(),l=a.dc();return(1073741824*((14&n)>>1)+((65534&u)<<14|(65534&l)>>1))/9e4}r()}else r()}(t,p.uri,p.data));case 4:if("application/mp4"!=i&&!i.startsWith("text/")){o.I(6);break}return S(o,ra(e,r),7);case 7:return m=o.B,o.return(function(e,t,n){return mn(e=st(e,t))?(gn(t=new hn(null),e),t.xc(n)):0}(i,a,m.data));case 6:throw new z(2,4,4030,t)}}))}))}(e,t,d,c,i,a),2);case 2:f=o.B,q.debug("First segment",l.split("/").pop(),"starts at",f);for(var y=0;y<s.length;++y)p=s[y],m=u[u.length-1],g=0==y?f:m.endTime,v=ea(m,p,r+y,g),u.push(v);return e.P.push(u),ta(e),o.return(u)}}))}))}function ra(e,t){return h((function n(){var r,i,a,o,s,u;return x(n,(function(n){switch(n.s){case 1:return r=1,i=bi(t.i(),t.h,t.h+2048-1,e.g.retryParameters),a=bi(t.i(),t.h,t.g,e.g.retryParameters),e.g.hls.useFullSegmentsForStartTime?n.return(da(e,a,r)):(A(n,2),S(n,da(e,i,r),4));case 4:return o=n.B,n.return(o);case 2:if(7001==(s=C(n)).code)throw s;return q.ba("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",i.uris[0]),S(n,da(e,a,r),5);case 5:return u=n.B,n.return(u)}}))}))}function ia(e,t){for(var n=sa[e],r=0;r<n.length;r++)for(var i=0;i<t.length;i++)if(n[r].test(t[i].trim()))return t[i].trim();return"text"==e?"":null}function aa(e,t){var n=e.getAttribute(t);if(!n)throw new z(2,4,4023,t);return n.value}function oa(e,t){var n=xi.cb(e,t);if(!n)throw new z(2,4,4024,t);return n}Y("shaka.net.DataUriPlugin",Wi),Wi.parse=function(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw q.error("Bad data URI, failed to parse scheme"),new z(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw q.error("Bad data URI, failed to extract encoding and MIME type"),new z(2,1,1004,t);var r=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=r.split(";"),r=n[0];var i=!1;return 1<n.length&&"base64"==n[n.length-1]&&(i=!0,n.pop()),{data:i?Ee.Ja(t).buffer:ye(t),contentType:r}},qe("data",Wi),Y("shaka.hls.HlsParser",qi),(r=qi.prototype).configure=function(e){this.g=e},r.start=function(e,t){var n=this;return h((function r(){var i,a;return x(r,(function(r){switch(r.s){case 1:return n.j=t,S(r,da(n,ze([e],n.g.retryParameters),0),2);case 2:return i=r.B,n.F=i.uri,S(r,function(e,t){return h((function n(){var r,i,a,o,s,u,l,c,f,p,m;return x(n,(function(n){switch(n.s){case 1:if(0!=(r=Yi(e.C,t,e.F)).type)throw new z(2,4,4022);return S(n,function(e,t){return h((function n(){var r,i,a,o,s,u,l,c,f,p,m,g;return x(n,(function(n){switch(n.s){case 1:return r=xi,i=le,a=t.g,o=r.Ab(t.g,"EXT-X-MEDIA"),s=o.filter(function(e){return"SUBTITLES"==aa(e,"TYPE")}.bind(e)),u=s.map(function(e){var t=this;return h((function n(){var r;return x(n,(function(n){switch(n.s){case 1:return t.g.disableText?n.return(null):(A(n,2),S(n,function(e,t){return h((function n(){var r;return x(n,(function(n){switch(n.s){case 1:return aa(t,"TYPE"),S(n,$i(e,t,[]),2);case 2:return r=n.B,n.return(r.stream)}}))}))}(t,e),4));case 4:return n.return(n.B);case 2:if(r=C(n),t.g.hls.ignoreTextStreamFailures)return n.return(null);throw r}}))}))}.bind(e)),l=o.filter((function(e){return"CLOSED-CAPTIONS"==aa(e,"TYPE")})),function(e,t){for(var n=d(t),r=n.next();!r.done;r=n.next()){aa(r=r.value,"TYPE");var i=Oi(r,"LANGUAGE")||"und";i=Rn(i);var a=aa(r,"GROUP-ID");r=aa(r,"INSTREAM-ID"),e.u.get(a)||e.u.set(a,new Map),e.u.get(a).set(r,i)}}(e,l),S(n,Promise.all(u),2);case 2:return c=n.B,f=r.Ab(a,"EXT-X-STREAM-INF"),p=f.map(function(e){return function(e,t,n){return h((function r(){var i,a,o,s,u,l,c,f,p,m,g,v,y,_,b,T,E,w,A,M,L,C,D,k,P,I,O,R,N;return x(r,(function(r){switch(r.s){case 1:return i=fe,a=xi,o=[],e.g.disableVideo||o.push("avc1.42E01E"),e.g.disableAudio||o.push("mp4a.40.2"),s=o.join(","),u=Oi(t,"CODECS",s),l=function(e){for(var t=new Set,n=[],r=(e=d(e)).next();!r.done;r=e.next()){var i=lt(r=r.value)[0];t.has(i)?q.debug("Ignoring duplicate codec"):(n.push(r),t.add(i))}return n}(u.split(/\s*,\s*/)),c=t.getAttribute("RESOLUTION"),p=f=null,m=Oi(t,"FRAME-RATE"),g=Number(Oi(t,"AVERAGE-BANDWIDTH"))||Number(aa(t,"BANDWIDTH")),c&&(v=c.value.split("x"),f=v[0],p=v[1]),y=(y=(y=a.Ab(n.g,"EXT-X-MEDIA")).filter((function(e){return"CLOSED-CAPTIONS"!=aa(e,"TYPE")}))).filter((function(e){var t=Oi(e,"URI")||"";return"SUBTITLES"==(Oi(e,"TYPE")||"")||""!=t})),_=Oi(t,"AUDIO"),b=Oi(t,"VIDEO"),_?y=a.Zc(y,"AUDIO",_):b&&(y=a.Zc(y,"VIDEO",b)),(T=ia(i.za,l))&&((E=Oi(t,"SUBTITLES"))&&((w=a.Zc(y,"SUBTITLES",E)).length&&(A=e.L.get(w[0].id))&&(A.stream.codecs=T)),Ye(l,T)),M=y.map(function(e){return $i(this,e,l)}.bind(e)),L=[],C=[],S(r,Promise.all(M),2);case 2:if(k=(k=r.B).filter((function(e){return null!=e})),_?L=k:b&&(C=k),q.debug("Guessing stream type for",t.toString()),I=!1,L.length||C.length?L.length?(R=aa(t,"URI"),N=L[0].Pc,R==N?(q.debug("Guessing audio-only."),P=i.Sb,I=!0):(q.debug("Guessing video."),P=i.Za)):(q.debug("Guessing audio."),P=i.Sb):1==l.length?(O=ia(i.Za,l),c||m||O?(q.debug("Guessing video-only."),P=i.Za):(q.debug("Guessing audio-only."),P=i.Sb)):(q.debug("Guessing multiplexed audio+video."),P=i.Za,l=[l.join(",")]),I){r.I(3);break}return S(r,function(e,t,n,r){return h((function i(){var a,o,s,u,l;return x(i,(function(i){switch(i.s){case 1:return a=fe,o=aa(t,"URI"),e.h.has(o)?i.return(e.h.get(o)):(s=Oi(t,"CLOSED-CAPTIONS"),u=null,r==a.Za&&s&&"NONE"!=s&&(u=e.u.get(s)),S(i,Ji(e,o,n,r,"und",!1,null,null,u,null),2));case 2:return null==(l=i.B)?i.return(null):e.h.has(o)?i.return(e.h.get(o)):(e.h.set(o,l),i.return(l))}}))}))}(e,t,l,P),4);case 4:D=r.B;case 3:if(D)D.stream.type==i.Sb?L=[D]:C=[D];else if(null===D)return q.debug("streamInfo is null"),r.return([]);return C&&Xi(C),L&&Xi(L),r.return(function(e,t,n,r,i,a,o){n.forEach(function(e){(e=e.stream)&&(e.width=Number(i)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(o)||void 0)}.bind(e));var s=!!e.g&&e.g.disableAudio;t.length&&!s||(t=[null]);s=!!e.g&&e.g.disableVideo,(!n.length||s)&&(n=[null]);s=[];for(var u=(t=d(t)).next();!u.done;u=t.next()){u=u.value;for(var l=d(n),c=l.next();!c.done;c=l.next()){var f=c.value;c=u?u.stream:null;var h=f?f.stream:null,p=u?u.drmInfos:null,m=f?f.drmInfos:null;f=(f?f.Pc:"")+" - "+(u?u.Pc:"");var g=void 0;if(c&&h){if(p.length&&m.length&&!(0<Nt(p,m).length)){q.v("Incompatible DRM info in HLS variant.  Skipping.");continue}g=Nt(p,m)}else c?g=p:h&&(g=m);e.Z.has(f)?q.debug("Skipping variant which only differs in text streams."):(c=Qi(e,c,h,r,g),s.push(c),e.Z.add(f))}}return s}(e,L,C,g,f,p,m))}}))}))}(this,e,t)}.bind(e)),S(n,Promise.all(p),3);case 3:return m=n.B,g=(g=m.reduce(i.Rc,[])).filter((function(e){return null!=e})),n.return({startTime:0,variants:g,textStreams:c.filter((function(e){return null!=e}))})}}))}))}(e,r),2);case 2:if(i=n.B,!e.j)throw new z(2,7,7001);if(e.da&&0==i.variants.length)throw q.info("No stream is created, because we don't support AES-128","encryption yet"),new z(2,4,4034);e.j.filterAllPeriods([i]),a=1/0,o=0,s=1/0;for(var g=d(e.h.values()),v=g.next();!v.done;v=g.next())u=v.value,a=Math.min(a,u.td),o=Math.max(o,u.td),"text"!=u.stream.type&&(s=Math.min(s,u.duration));if(e.l!=pa.$a?(e.i=new _i(0,3*e.J),e.i.hc(!1)):(e.i=new _i(null,0),e.i.hc(!0)),ta(e),e.l!=pa.$a){for(e.X=e.M,l=pa,e.l==l.Wd&&(c=e.i.Ic,isNaN(e.g.availabilityWindowOverride)||(c=e.g.availabilityWindowOverride),e.i.Pd(c)),f=0;95443.7176888889<=o;)f+=95443.7176888889,o-=95443.7176888889;if(f)for(q.debug("Offsetting live streams by",f,"to compensate for rollover"),v=(g=d(e.h.values())).next();!v.done;v=g.next())95443.7176888889>(p=v.value).td?(q.K("Offset applied to",p.stream.type),p.stream.presentationTimeOffset=-f,p.fc.offset(f)):q.K("Offset NOT applied to",p.stream.type)}else for(e.i.Fa(s),e.i.offset(-a),v=(g=d(e.h.values())).next();!v.done;v=g.next())(m=v.value).stream.presentationTimeOffset=a,m.fc.offset(-a),ri(m.fc,s);e.A={presentationTimeline:e.i,periods:[i],offlineSessionIds:[],minBufferTime:0},w(n)}}))}))}(n,i.data),3);case 3:return 0<(a=n.X)&&n.m.V(a),r.return(n.A)}}))}))},r.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];return this.o&&(e.push(this.o.destroy()),this.o=null),this.g=this.j=null,this.L.clear(),this.Z.clear(),this.h.clear(),this.A=null,Promise.all(e)},r.update=function(){if(this.l!=pa.$a){for(var e=[],t=d(this.h.values()),n=t.next();!n.done;n=t.next())e.push(zi(this,n.value));return Promise.all(e)}},r.onExpirationUpdated=function(){};var sa={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},ua=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],la={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function ca(e,t){e.l=t,e.i&&e.i.hc(e.l==pa.$a),e.l!=pa.$a||e.m.stop()}function da(e,t,n){if(!e.o)throw new z(2,7,7001);return t=e.j.networkingEngine.request(n,t),Ge(e.o,t),t.promise}var fa={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=aa(e,"METHOD");Hn("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227");var n=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return n.includes(t)?(t=aa(e,"URI"),t=Wi.parse(t),t=de("com.widevine.alpha",[{initDataType:"cenc",initData:t=new Uint8Array(t.data)}]),(e=Oi(e,"KEYID"))&&(t.keyIds=[e.toLowerCase().substr(2)]),t):(q.error("Widevine in HLS is only supported with [",n.join(", "),"], not",t),null)}},ha="VOD",pa={$a:ha,Se:"EVENT",Wd:"LIVE"};function ma(){this.g=new Map}function ga(e,t,n){va(e,t).text=n}function va(e,t){return e.g.has(t)||e.g.set(t,new ya),e.g.get(t)}function ya(){this.text=this.variant=null}function _a(e,t){this.g=e,this.h=new Set([e]);for(var n=d(t=t||[]),r=n.next();!r.done;r=n.next())this.add(r.value)}function ba(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var r=t.audio;n=!(n.channelsCount==r.channelsCount&&Ta(n,r)&&Ea(n.roles,r.roles))}return!n&&(n=e.video&&t.video)&&(n=!(Ta(n=e.video,r=t.video)&&Ea(n.roles,r.roles))),!n}function Ta(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return lt(e)[0]})),r=t.codecs.split(",").map((function(e){return lt(e)[0]}));if(n.length!=r.length)return!1;n.sort(),r.sort();for(var i=0;i<n.length;i++)if(n[i]!=r[i])return!1;return!0}function Ea(e,t){var n=new Set(e),r=new Set(t);if(n.delete("main"),r.delete("main"),n.size!=r.size)return!1;for(var i=(n=d(n)).next();!i.done;i=n.next())if(!r.has(i.value))return!1;return!0}function Sa(e){this.g=e,this.h=new wa(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function wa(e,t,n,r){this.i=e,this.j=t,this.g=n,this.h=void 0===r?"":r}function Aa(){this.g=Ca,this.h=(new Map).set(Ca,2).set(La,1)}function Ma(e,t,n){e.h.set(Ca,n).set(La,t)}yi.Fd("m3u8",qi),yi.Qb("application/x-mpegurl",qi),yi.Qb("application/vnd.apple.mpegurl",qi),_a.prototype.add=function(e){return ba(this.g,e)?(this.h.add(e),!0):(q.v("Rejecting variant - not compatible with root."),!1)},_a.prototype.values=function(){return this.h.values()},Sa.prototype.create=function(e){var t=this,n=e.filter((function(e){return ba(t.g,e)}));return n.length?new _a(n[0],n):this.h.create(e)},wa.prototype.create=function(e){var t=[];t=function(e,t){var n=Nn(Rn(t),e.map((function(e){return xn(e)})));return n?e.filter((function(e){return n==xn(e)})):[]}(e,this.i);var n=e.filter((function(e){return e.primary}));for((e=function(e,t){return e.filter((function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)}))}(t=t.length?t:n.length?n:e,this.j)).length?t=e:q.v("No exact match for variant role could be found."),this.g&&((e=Fn.ee(t,this.g)).length?t=e:q.v("No exact match for the channel count could be found.")),this.h&&((e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.h)).length?t=e:q.v("No exact match for variant label could be found.")),e=new _a(t[0]),n=(t=d(t)).next();!n.done;n=t.next())n=n.value,ba(e.g,n)&&e.add(n);return e};var La=0,Ca=1;function Da(e,t){this.l=e,this.m=Pa(e),this.g=e.g.currentTime,this.j=Date.now()/1e3,this.h=!1,this.o=t,this.i=function(){}}function ka(e){this.g=e}function Pa(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.buffered,e=e.g.currentTime;for(var n=0;n<t.length;n++){var r=t.start(n),i=t.end(n);if(!(e<r-.1||e>i-.5)){t=!0;break e}}t=!1}return t}function Ia(e,t,n,r,i){var a=this;this.g=e,this.F=t,this.C=n,this.u=i,this.j=new Je,this.o=!1,this.A=e.readyState,this.i=!1,this.h=r,this.m=!1,this.j.H(e,"waiting",(function(){return Oa(a)})),this.l=new Le((function(){Oa(a)})).Oa(.25)}function Oa(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.o)return}else e.o=!1;if(!e.g.paused||0==e.g.currentTime){var t;if(e.g.readyState!=e.A&&(e.i=!1,e.A=e.g.readyState),!(t=!e.h)){var n=(t=e.h).l,r=Pa(n),i=n.g.currentTime,a=Date.now()/1e3;t.g==i&&t.m==r||(t.j=a,t.g=i,t.m=r,t.h=!1),(r=(i=a-t.j)>=t.o&&r&&!t.h)&&(t.i(t.g,i),t.h=!0,t.g=n.g.currentTime),t=!r}if(t){a=e.C.smallGapLimit,t=e.g.currentTime;e:{if((n=e.g.buffered)&&n.length&&!(1==n.length&&1e-6>n.end(0)-n.start(0)))for(r=navigator.userAgent.match(/Edge\//)||gt("Trident/")||ht()||gt("CrKey")?.5:.1,i=0;i<n.length;i++)if(n.start(i)>t&&(0==i||n.end(i-1)-t<=r)){r=i;break e}r=null}if(null!=r&&(0!=r||e.m)){i=n.start(r);var o=e.F.Ka();if(!(i>=o)){a=(o=i-t)<=a;var s=!1;if(!(.001>o)){if(!a&&!e.i){e.i=!0;var u=new Ne("largegap",{currentTime:t,gapSize:o});u.cancelable=!0,e.u(u),e.C.jumpLargeGaps&&!u.defaultPrevented?s=!0:q.info("Ignoring large gap at",t,"size",o)}(a||s)&&(0==r?q.info("Jumping forward",o,"seconds because of gap before start time of",i):q.info("Jumping forward",o,"seconds because of gap starting at",n.end(r-1),"and ending at",i),e.g.currentTime=i)}}}}}}}function Ra(e){var t=this;this.i=e,this.g=new Set,this.h=new Le((function(){xa(t,!1)})).Oa(.25)}function xa(e,t){for(var n=d(e.g),r=n.next();!r.done;r=n.next())r.value.l(e.i.currentTime,t)}function Na(e){for(var t=[],n=(e=d(e)).next();!n.done;n=e.next())for(var r=(n=d(n.value.variants)).next();!r.done;r=n.next())t.push(r.value);return t}function ja(e,t){for(var n=null,r=d(e),i=r.next();!i.done;i=r.next())t>=(i=i.value).startTime&&(n=i);return n}function Fa(e){this.i=e,this.g=null,this.h=function(){}}function Ua(e){var t=this;this.g=e,this.j=!1,this.i=this.g.wc(),this.h=new Le((function(){t.g.pe(.25*t.i)}))}function Ba(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.wc()!=t&&e.g.Od(t))}catch(e){}e.h.Oa(.25),0!=e.g.wc()&&e.g.Od(0)}function Ya(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=Ha.get(t),n.ya(e,t,r))}Da.prototype.release=function(){this.l=null,this.i=function(){}},Ia.prototype.release=function(){this.j&&(this.j.release(),this.j=null),null!=this.l&&(this.l.stop(),this.l=null),this.h&&(this.h.release(),this.h=null),this.g=this.F=this.u=null},Ia.prototype.zd=function(){this.m=!0,Oa(this)},Ra.prototype.release=function(){this.h.stop();for(var e=d(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},Fa.prototype.release=function(){this.g=this.i=null,this.h=function(){}},Fa.prototype.l=function(e){var t=this.g,n=this.i.periods;t!=(e=ja(n,e)||n[0])&&this.h(e),this.g=e},Ua.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},Ua.prototype.set=function(e){this.i=e,Ba(this)},Ua.prototype.vc=function(){return this.g.vc()};var Ha=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Va(e,t,n){var r=this;this.g=e,this.l=t,this.j=n,this.m=!1,this.h=new Je,this.i=new za(e),Ya(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){Wa(r,r.j)}))}function Ga(e){return e.m?e.g.currentTime:e.j}function Ka(e,t){0<e.g.readyState?Xa(e.i,t):Ya(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){Wa(e,e.j)}))}function Wa(e,t){.001>Math.abs(e.g.currentTime-t)?qa(e):(e.h.ya(e.g,"seeking",(function(){qa(e)})),Xa(e.i,0==e.g.currentTime?t:e.g.currentTime))}function qa(e){e.m=!0,e.h.H(e.g,"seeking",(function(){return e.l()}))}function za(e){var t=this;this.h=e,this.m=10,this.l=this.i=this.j=0,this.g=new Le((function(){0>=t.j?(q.v(["Failed to move playhead from",t.i,"to",t.l].join(" ")),t.g.stop()):t.h.currentTime!=t.i?t.g.stop():(t.h.currentTime=t.l,t.j--)}))}function Xa(e,t){e.i=e.h.currentTime,e.l=t,e.j=e.m,e.h.currentTime=t,e.g.Oa(.1)}function Qa(e){var t=this;this.g=e,this.j=!1,this.i=null,this.h=new Je,Ya(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.h,(function(){null==t.i?t.j=!0:(t.h.ya(t.g,"seeking",(function(){t.j=!0})),t.g.currentTime=Math.max(0,t.g.currentTime+t.i))}))}function $a(e,t,n,r,i,a){var o=this;this.i=e,this.g=t.presentationTimeline,this.J=t.minBufferTime||0,this.m=n,this.F=i,this.u=null,this.j=new Ia(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,r=new Da(new ka(e),t.stallThreshold);return function(e,t){e.i=t}(r,(function(t,r){q.debug("Stall detected at "+t+" for "+r+" seconds."),n?(q.debug("Seeking forward "+n+" seconds to break stall."),e.currentTime+=n):(q.debug("Pausing and unpausing to break stall."),e.pause(),e.play())})),r}(e,n),a),this.h=new Va(e,(function(){e:{var e=o.j;e.o=!0,e.m=!1,e.i=!1,e=Ga(o.h);var t=Za(o,e);if(.001<Math.abs(t-e)){var n=Date.now()/1e3;if(!o.u||o.u<n-1){o.u=n,Ka(o.h,t),e=void 0;break e}}q.K("Seek to "+e),o.F(),e=void 0}return e}),function(e,t){return null==t?t=1/0>e.g.ha()?e.g.Cb():e.g.Ka():0>t&&(t=e.g.Ka()+t),Ja(e,eo(e,t))}(this,r)),this.o=new Le((function(){if(0!=o.i.readyState&&!o.i.paused){var e=Ga(o.h),t=o.g.Cb(),n=o.g.Ka();3>n-t&&(t=n-3),e<t&&(t=Za(o,e),q.info("Jumping forward "+(t-e)+" seconds to catch up with the seek range."),o.i.currentTime=t)}})).Oa(.25)}function Ja(e,t){var n=e.g.ha();return t>=n?n-e.m.durationBackoff:t}function Za(e,t){var n=Wt.bind(null,e.i.buffered),r=Math.max(e.J,e.m.rebufferingGoal),i=e.m.safeSeekOffset,a=e.g.Cb(),o=e.g.Ka(),s=e.g.ha();3>o-a&&(a=o-3);var u=e.g.Zb(r),l=e.g.Zb(i);return r=e.g.Zb(r+i),t>=s?(q.K("Playhead past duration."),Ja(e,t)):t>o?(q.K("Playhead past end."),o):t<a?n(l)?(q.K("Playhead before start & start is buffered"),l):(q.K("Playhead before start & start is unbuffered"),r):t>=u||n(t)?(q.K("Playhead in safe region or in buffered region."),t):(q.K("Playhead outside safe region & in unbuffered region."),r)}function eo(e,t){var n=e.g.Cb();return t<n?n:t>(n=e.g.Ka())?n:t}function to(e){var t=this;this.h=function(){},this.g=new Set,this.j=e,this.i=new Le((function(){for(var e=t.j(),n=d(t.g),r=n.next();!r.done;r=n.next())(r=r.value).endTime<e.start&&t.g.delete(r)})).Oa(2)}function no(e){var t=this;this.m=e,this.j=new Map,this.g=function(){},this.h=function(){},this.i=function(){},this.o=[{rb:null,qb:io,hb:function(e,n){return t.g(e,n)}},{rb:ro,qb:io,hb:function(e,n){return t.g(e,n)}},{rb:ao,qb:io,hb:function(e,n){return t.g(e,n)}},{rb:io,qb:ro,hb:function(e,n){return t.h(e,n)}},{rb:io,qb:ao,hb:function(e,n){return t.h(e,n)}},{rb:ro,qb:ao,hb:function(e,n){return t.i(e,n)}},{rb:ao,qb:ro,hb:function(e,n){return t.i(e,n)}}]}Va.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},za.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},Qa.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.g=null},Qa.prototype.A=function(e){this.i=this.j?this.i:e},Qa.prototype.l=function(){return(this.j?this.g.currentTime:this.i)||0},Qa.prototype.C=function(){},$a.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.o&&(this.o.stop(),this.o=null),this.i=this.h=this.g=this.m=null,this.F=function(){}},$a.prototype.A=function(e){Ka(this.h,e)},$a.prototype.l=function(){var e=Ga(this.h);return 0<this.i.readyState&&!this.i.paused?eo(this,e):e},$a.prototype.C=function(){this.j.zd()},to.prototype.release=function(){this.h=function(){},this.g.clear(),this.i.stop()},no.prototype.release=function(){this.m=null,this.j.clear(),this.g=function(){},this.h=function(){},this.i=function(){}},no.prototype.l=function(e,t){for(var n=d(this.m.g),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.j.get(r),a=e<r.startTime?ro:e>r.endTime?ao:io;this.j.set(r,a);for(var o=d(this.o),s=o.next();!s.done;s=o.next())(s=s.value).rb==i&&s.qb==a&&s.hb(r,t)}};var ro=1,io=2,ao=3;function oo(e,t){this.g=t,this.i=e,this.l=null,this.u=1,this.F=Promise.resolve(),this.m=[],this.o=new Map,this.h=new Map,this.C=!1,this.M=null,this.L=this.j=this.A=!1,this.J=0}function so(e){return lo(e,"audio")}function uo(e){return lo(e,"video")}function lo(e,t){var n=e.h.get(t);return n?n.Ta||n.stream:null}function co(e,t){return h((function n(){var r,i,a,o,s,u,l,c,d;return x(n,(function(n){switch(n.s){case 1:return r=fe,S(n,Cn(e.g.T,r.za),2);case 2:return e.J++,e.L=!1,i=e.J,a=e.g.T,o=new Map,s=new Set,o.set(r.za,t),s.add(t),S(n,a.init(o,!1),3);case 3:return e.j?n.return():S(n,_o(e,s),4);case 4:if(e.j)return n.return();u=e.g.T.l.isTextVisible()||e.l.alwaysStreamText,e.J!=i||e.h.has(r.za)||e.L||!u||(l=e.g.eb(),c=Lo(e,l),d=vo(t,c,0),e.h.set(r.za,d),Po(e,d,0)),w(n)}}))}))}function fo(e,t){var n=e.h.get("video");if(n){var r=n.stream;if(r)if(q.debug("setTrickPlay",t),t){var i=r.trickModeVideo;i&&!n.Ta&&(q.debug("Engaging trick mode stream",i),po(e,i,!1,0,!1),n.Ta=r)}else(r=n.Ta)&&(q.debug("Restoring non-trick-mode stream",r),n.Ta=null,po(e,r,!0,0,!1))}}function ho(e,t,n,r){var i=!1;if(t.video){var a=po(e,t.video,n,r,!1);i=i||a}return t.audio&&(e=po(e,t.audio,n,r,!1),i=i||e),i}function po(e,t,n,r,i){var a=e.h.get(t.type);if(!a&&"text"==t.type&&e.l.ignoreTextStreamFailures)return co(e,t),!0;if(!a)return!1;var o=Co(e,t),s=Array.from(e.h.values()).every((function(e){return e.oa==a.oa}));return n&&o!=a.oa&&s?(q.debug("switch: switching to stream in another Period; clearing buffer and changing Periods"),e.h.forEach((function(t){mo(e,t)})),!0):(a.Ta&&(q.debug("switch during trick play mode",t),t.trickModeVideo?(a.Ta=t,t=t.trickModeVideo,q.debug("switch found trick play stream",t)):(a.Ta=null,q.debug("switch found no special trick play stream"))),!(!(s=e.m[o])||!s.Rb)&&(!(!(s=e.o.get(t.id))||!s.Rb)&&(a.stream!=t||i?("text"==t.type&&Tn(e.g.T,st(t.mimeType,t.codecs)),a.stream=t,a.Ac=!0,q.debug("switch: switching to Stream "+xo(a)),function(e,t,n){if(!t.lb)return!1;var r=e.g.eb(),i=wn(e.g.T,t.type),a=Eo(e,t,r,i,n);return n=a&&a.g?a.g-a.h:null,a&&!n&&(n=(a.endTime-a.xc())*t.stream.bandwidth/8),!isNaN(n)&&((a=t.stream.initSegmentReference)&&(n+=(a.g?a.g-a.h:null)||0),a=e.g.getBandwidthEstimate(),8*n/a<i-r-Math.max(e.i.minBufferTime||0,e.l.rebufferingGoal)||t.lb.h.g>n)}(e,a,o)&&(q.info("Aborting current segment request to switch."),a.lb.abort()),n&&(a.ab?a.Qc=!0:a.Sa?(a.Wa=!0,a.oc=r,a.Qc=!0):(Io(a),ko(e,a,!0,r).catch((function(t){e.g&&e.g.onError(t)})))),!0):(q.debug("switch: Stream "+xo(a)+" already active"),!1))))}function mo(e,t){var n=xo(t);t.ab?q.debug(n,"clear: already clearing the buffer"):t.Wa?q.debug(n,"clear: already waiting"):t.Sa?(q.debug(n,"clear: currently updating"),t.Wa=!0,t.oc=0):null==Sn(e.g.T,t.type)?(q.debug(n,"clear: nothing buffered"),null==t.Pa&&Po(e,t,0)):(q.debug(n,"clear: handling right now"),Io(t),ko(e,t,!1,0).catch((function(t){e.g&&e.g.onError(t)})))}function go(e,t,n,r,i){return h((function a(){var o,s,u,l,c,d,f;return x(a,(function(a){switch(a.s){case 1:return o=e.g.eb(),s=Lo(e,o),u=fe,l=new Map,c=new Set,t&&(l.set(u.Sb,t),c.add(t)),n&&(l.set(u.Za,n),c.add(n)),r&&(l.set(u.za,r),c.add(r)),d=e.g.T,f=e.l.forceTransmuxTS,S(a,d.init(l,f),2);case 2:return e.j?a.return():(function(e){var t=e.i.presentationTimeline.ha();1/0>t?e.g.T.Fa(t):e.g.T.Fa(Math.pow(2,32))}(e),S(a,_o(e,c),3));case 3:if(e.j)return a.return();l.forEach((function(t,n){if(!e.h.has(n)){var r=vo(t,s,i);e.h.set(n,r),Po(e,r,0)}})),w(a)}}))}))}function vo(e,t,n){return{stream:e,type:e.type,Hb:null,La:null,Ta:null,Ac:!0,oa:t,endOfStream:!1,Sa:!1,Pa:null,Wa:!1,oc:0,Qc:!1,ab:!1,Ed:!1,ac:!1,Hd:n||0,lb:null}}function yo(e,t){var n=e.m[t];if(n)return q.debug("(all) Period "+t+" is being or has been set up"),n.promise;q.debug("(all) setting up Period "+t),n={promise:new pe,Rb:!1},e.m[t]=n;for(var r=new Set,i=d(e.i.periods[t].variants),a=i.next();!a.done;a=i.next())(a=a.value).video&&r.add(a.video),a.video&&a.video.trickModeVideo&&r.add(a.video.trickModeVideo),a.audio&&r.add(a.audio);for(a=(i=d(e.i.periods[t].textStreams)).next();!a.done;a=i.next())r.add(a.value);return e.F=e.F.then(function(){if(!this.j)return _o(this,r)}.bind(e)).then(function(){this.j||(this.m[t].promise.resolve(),this.m[t].Rb=!0,q.K("(all) setup Period "+t))}.bind(e)).catch(function(e){this.j||(this.m[t].promise.catch((function(){})),this.m[t].promise.reject(),delete this.m[t],q.v("(all) failed to setup Period "+t),this.g.onError(e))}.bind(e)),n.promise}function _o(e,t){return h((function n(){var r,i,a,o,s,u,l;return x(n,(function(n){switch(n.s){case 1:r=[];for(var c=d(t),f=c.next();!f.done;f=c.next())i=f.value,(a=e.o.get(i.id))?(q.debug("(all) Stream "+i.id+" is being or has been set up"),r.push(a.promise)):(q.K("(all) setting up Stream "+i.id),e.o.set(i.id,{promise:new pe,Rb:!1}),r.push(i.createSegmentIndex()));return A(n,2),S(n,Promise.all(r),4);case 4:if(e.j)return n.return();L(n,3);break;case 2:if(o=C(n),e.j)return n.return();for(f=(n=d(t)).next();!f.done;f=n.next())s=f.value,e.o.get(s.id).promise.catch((function(){})),e.o.get(s.id).promise.reject(),e.o.delete(s.id);throw o;case 3:for(f=(c=d(t)).next();!f.done;f=c.next())u=f.value,(l=e.o.get(u.id)).Rb||(l.promise.resolve(),l.Rb=!0,q.K("(all) setup Stream "+u.id));w(n)}}))}))}function bo(e,t){if(!e.j){var n=xo(t);if(!t.Sa&&null!=t.Pa&&!t.ab)if(t.Pa=null,t.Wa)q.debug(n,"skipping update and clearing the buffer"),ko(e,t,t.Qc,t.oc);else{try{var r=function(e,t){if(Ao(t))return Ln(e.g.T,t.stream.originalId||""),null;var n=xo(t),r=e.g.eb(),i=To(e,t,r);q.O(n,"timeNeeded="+i);var a=Co(e,t.stream),o=Lo(e,i),s=function(e,t,n){return"text"==t?null==(e=e.g).h||e.h<n?0:e.h-Math.max(n,e.g):qt(e=An(e,t),n)}(e.g.T,t.type,r);q.O(n,"update_:","presentationTime="+r,"bufferedAhead="+s);var u=Math.max(e.i.minBufferTime||0,e.l.rebufferingGoal,e.l.bufferingGoal)*e.u;if(i>=e.i.presentationTimeline.ha())return q.debug(n,"buffered to end of presentation"),t.endOfStream=!0,"video"==t.type&&(i=e.h.get("text"))&&"application/cea-608"==i.stream.mimeType&&(i.endOfStream=!0),null;if(t.endOfStream=!1,t.oa=o,o!=a)return q.debug(n,"need Period "+o,"presentationTime="+r,"timeNeeded="+i,"currentPeriodIndex="+a),null;if(s>=u)return q.O(n,"buffering goal met"),.5;if(n=wn(e.g.T,t.type),!(n=Eo(e,t,r,n,a)))return 1;var l=1/0;return Array.from(e.h.values()).forEach((function(t){Ao(t)||(t=To(e,t,r),l=Math.min(l,t))})),i>=l+e.i.presentationTimeline.g?1:(t.Hd=0,function(e,t,n,r,i){var a=xo(t),o=e.i.periods[r];q.K(a,"fetchAndAppend_:","presentationTime="+n,"currentPeriod.startTime="+o.startTime,"reference.position="+i.position,"reference.startTime="+i.startTime,"reference.endTime="+i.endTime);var s=t.stream,u=e.i.presentationTimeline.ha(),l=e.i.periods[r+1];r=function(e,t,n,r,i){if(!t.Ac)return Promise.resolve();var a=xo(t);return n=e.i.periods[n].startTime-t.stream.presentationTimeOffset,q.K(a,"setting timestamp offset to "+n),q.K(a,"setting append window start to "+r),q.K(a,"setting append window end to "+i),r=function(e,t,n,r,i){return"text"==t?(e.g.A=n,(e=e.g).j=r,e.m=i,Promise.resolve()):Promise.all([Dn(e,t,e.Ve.bind(e,t)),Dn(e,t,e.Cg.bind(e,t,n)),Dn(e,t,e.zg.bind(e,t,r,i))])}(e.g.T,t.type,n,r,i),t.stream.initSegmentReference?(q.K(a,"fetching init segment"),e=Do(e,t,t.stream.initSegmentReference).then(function(e){if(!this.j)return q.K(a,"appending init segment"),Mn(this.g.T,t.type,e,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size)}.bind(e)).catch((function(e){return t.Ac=!0,Promise.reject(e)})),Promise.all([r,e])):r}(e,t,r,Math.max(0,o.startTime-.1),l?l.startTime+.01:u),t.Sa=!0,t.Ac=!1,q.O(a,"fetching segment"),u=Do(e,t,i),Promise.all([r,u]).then(function(e){if(!this.j&&!this.A)return function(e,t,n,r,i,a,o){var s=xo(t),u=i.closedCaptions&&0<i.closedCaptions.size;return null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length&&(new Rr).ma("emsg",e.P.bind(e,r,a,i.emsgSchemeIdUris)).parse(o),function(e,t,n){var r=xo(t);q.O(r,"checking buffer length");var i=Math.max(e.l.bufferBehind,e.i.presentationTimeline.g),a=Sn(e.g.T,t.type);if(null==a)return q.O(r,"buffer behind okay because nothing buffered:","presentationTime="+n,"bufferBehind="+i),Promise.resolve();var o=n-a,s=o-i;return.01>=s?(q.O(r,"buffer behind okay:","presentationTime="+n,"bufferedBehind="+o,"bufferBehind="+i,"underflow="+Math.abs(s)),Promise.resolve()):(q.K(r,"buffer behind too large:","presentationTime="+n,"bufferedBehind="+o,"bufferBehind="+i,"overflow="+s),e.g.T.remove(t.type,a,a+s).then(function(){this.j||q.K(r,"evicted "+s+" seconds")}.bind(e)))}(e,t,n).then(function(){if(!this.j)return q.K(s,"appending media segment"),Mn(this.g.T,t.type,o,a.startTime+r.startTime,a.endTime+r.startTime,u)}.bind(e)).then(function(){if(!this.j)return q.O(s,"appended media segment"),t.Hb=i,t.La=a,Promise.resolve()}.bind(e))}(this,t,n,o,s,i,e[1])}.bind(e)).then(function(){this.j||this.A||(t.Sa=!1,t.Ed=!1,t.Wa||this.g.zd(),Po(this,t,0),function(e,t,n){if(!e.C){var r=xo(t);if(1==(t=Array.from(e.h.values())).length&&"text"==t[0].type||(e.C=t.every((function(e){return"text"==e.type||!e.Wa&&!e.ab&&e.La}))),e.C){for(q.debug(r,"startup complete"),n=Co(e,n),e.m[n]||yo(e,n).then(function(){this.j||(q.K(r,"calling onCanSwitch()..."),this.g.te())}.bind(e)).catch(le.Bc),n=0;n<e.i.periods.length;++n)yo(e,n).catch(le.Bc);e.g.gg&&(q.K(r,"calling onStartupComplete()..."),e.g.gg())}}}(this,t,s),q.K(a,"finished fetch and append"))}.bind(e)).catch(function(e){this.j||this.A||(t.Sa=!1,"text"==t.type&&this.l.ignoreTextStreamFailures?(1001==e.code?q.v(a,"Text stream failed to download. Proceeding without it."):q.v(a,"Text stream failed to parse. Proceeding without it."),this.h.delete("text")):7001==e.code?(t.Sa=!1,t.Pa=null,Po(this,t,0)):3017==e.code?function(e,t,n){var r=xo(t);if(Array.from(e.h.values()).some((function(e){return e!=t&&e.Ed})))q.debug(r,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var i=Math.round(100*e.u);if(20<i)e.u-=.2;else{if(!(4<i))return q.error(r,"MediaSource threw QuotaExceededError too many times"),t.ac=!0,e.A=!0,void e.g.onError(n);e.u-=.04}q.v(r,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*e.u))+"%"),t.Ed=!0}Po(e,t,4)}(this,t,e):(q.error(a,"failed fetch and append: code="+e.code),t.ac=!0,e.severity=2,Ro(this,e)))}.bind(e))}(e,t,r,a,n),null)}(e,t);null!=r&&(Po(e,t,r),t.ac=!1)}catch(t){return void Ro(e,t)}r=Array.from(e.h.values()),function(e,t){var n=xo(t),r=Co(e,t.stream);if(t.oa!=r){var i=t.oa,a=Array.from(e.h.values());a.every((function(e){return e.oa==i||Ao(e)}))?a.every(Mo)?(q.debug(n,"all need Period "+i),yo(e,i).then(function(){if(!this.j)if(a.every(function(e){var t=Mo(e),n=Co(this,e.stream);return!!Ao(e)||t&&e.oa==i&&n!=i}.bind(this))){var e=this.i.periods[i];q.K(n,"calling onChooseStreams()...");var t=this.g.ue(e),r=new Map;t.variant&&t.variant.video&&r.set("video",t.variant.video),t.variant&&t.variant.audio&&r.set("audio",t.variant.audio),t.text&&r.set("text",t.text);for(var o=(t=d(this.h.keys())).next();!o.done;o=t.next())if(o=o.value,!r.has(o)&&"text"!=o)return q.error(n,"invalid Streams chosen: missing "+o+" Stream"),void this.g.onError(new z(2,5,5005));for(o=(t=d(Array.from(r.keys()))).next();!o.done;o=t.next())if(o=o.value,!this.h.has(o)){if("text"!=o)return q.error(n,"invalid Streams chosen: unusable "+o+" Stream"),void this.g.onError(new z(2,5,5005));go(this,null,null,r.get("text"),e.startTime),r.delete(o)}for(o=(t=d(Array.from(this.h.keys()))).next();!o.done;o=t.next()){o=o.value;var s=this.h.get(o),u=r.get(o);if(u){var l=Ao(s);l&&(s.oa=i,s.Hd=e.startTime),po(this,u,!1,0,!1),l&&Ao(s)||Po(this,this.h.get(o),0)}else this.h.delete(o)}q.K(n,"calling onCanSwitch()..."),this.g.te()}else q.debug(n,"ignoring transition to Period",i,"since another is happening")}.bind(e)).catch(le.Bc)):q.debug(n,"all MediaStates need Period "+i+", but not all MediaStates are idle"):q.debug(n,"not all MediaStates need Period "+i)}}(e,t),e.C&&r.every((function(e){return e.endOfStream}))&&(q.K(n,"calling endOfStream()..."),e.g.T.endOfStream().then(function(){if(!this.j){var e=this.g.T.ha();0!=e&&e<this.i.presentationTimeline.ha()&&this.i.presentationTimeline.Fa(e)}}.bind(e)))}}}function To(e,t,n){return t.Hb&&t.La?(n=Co(e,t.Hb),e.i.periods[n].startTime+t.La.endTime):Math.max(n,t.Hd)}function Eo(e,t,n,r,i){var a=xo(t);return t.La&&t.stream==t.Hb?(r=t.La.position+1,q.O(a,"next position known:","position="+r),wo(e,t,i,r)):(t.La?(q.K(a,"next position unknown: another Stream buffered"),a=Co(e,t.Hb),a=So(e,t,e.i.periods[a].startTime+t.La.endTime,i)):(q.K(a,"next position unknown: nothing buffered"),a=So(e,t,r||n,i)),null==a?null:(n=null,null==r&&(n=wo(e,t,i,Math.max(0,a-1))),n||wo(e,t,i,a)))}function So(e,t,n,r){var i=xo(t);return e=e.i.periods[r],q.debug(i,"looking up segment:","presentationTime="+n,"currentPeriod.startTime="+e.startTime),n=Math.max(0,n-e.startTime),null==(t=t.stream.findSegmentPosition(n))&&q.v(i,"cannot find segment:","currentPeriod.startTime="+e.startTime,"lookupTime="+n),t}function wo(e,t,n,r){var i=xo(t);return n=e.i.periods[n],(t=t.stream.getSegmentReference(r))?(e=(r=e.i.presentationTimeline).$b(),r=r.Db(),n.startTime+t.endTime<e||n.startTime+t.startTime>r?(q.O(i,"segment is not available:","currentPeriod.startTime="+n.startTime,"reference.startTime="+t.startTime,"reference.endTime="+t.endTime,"availabilityStart="+e,"availabilityEnd="+r),null):t):(q.K(i,"segment does not exist:","currentPeriod.startTime="+n.startTime,"position="+r),null)}function Ao(e){return e&&"text"==e.type&&"application/cea-608"==e.stream.mimeType}function Mo(e){return!e.Sa&&null==e.Pa&&!e.Wa&&!e.ab}function Lo(e,t){var n=ja(e.i.periods,t+he);return n?e.i.periods.indexOf(n):0}function Co(e,t){for(var n=e.i.periods,r=0;r<n.length;r++){for(var i=n[r],a=new Set,o=d(i.variants),s=o.next();!s.done;s=o.next())(s=s.value).audio&&a.add(s.audio),s.video&&a.add(s.video),s.video&&s.video.trickModeVideo&&a.add(s.video.trickModeVideo);for(o=(i=d(i.textStreams)).next();!o.done;o=i.next())a.add(o.value);if(a.has(t))return r}return-1}function Do(e,t,n){var r=bi(n.i(),n.h,n.g,e.l.retryParameters);return q.O("fetching: reference=",n),e=e.g.Ib.request(1,r),t.lb=e,e.promise.then((function(e){return t.lb=null,e.data}))}function ko(e,t,n,r){return h((function i(){var a,o,s,u;return x(i,(function(i){switch(i.s){case 1:return a=xo(t),t.Wa=!1,t.Qc=!1,t.oc=0,t.ab=!0,t.Hb=null,t.La=null,q.debug(a,"clearing buffer"),r?(s=e.g.eb(),u=e.g.T.ha(),o=e.g.T.remove(t.type,s+r,u)):o=Cn(e.g.T,t.type).then(function(){if(!this.j&&n)return this.g.T.flush(t.type)}.bind(e)),S(i,o,2);case 2:if(e.j)return i.return();q.debug(a,"cleared buffer"),t.ab=!1,t.endOfStream=!1,Po(e,t,0),w(i)}}))}))}function Po(e,t,n){var r=xo(t),i=t.type;"text"!=i||e.h.has(i)?(q.O(r,"updating in "+n+" seconds"),t.Pa=new Me((function(){return h((function n(){var r;return x(n,(function(n){switch(n.s){case 1:return A(n,2),S(n,bo(e,t),4);case 4:L(n,0);break;case 2:r=C(n),e.g&&e.g.onError(r),w(n)}}))}))})).V(n)):q.K(r,"Text stream is unloaded. No update is needed.")}function Io(e){null!=e.Pa&&(e.Pa.stop(),e.Pa=null)}function Oo(e){return h((function t(){return x(t,(function(t){switch(t.s){case 1:if(e.lb)return S(t,e.lb.abort(),0);t.I(0)}}))}))}function Ro(e,t){De(e.M).then(function(){this.j||(this.g.onError(t),t.handled||this.l.failureCallback(t))}.bind(e))}function xo(e){return"("+e.type+":"+e.stream.id+")"}function No(e,t,n,r,i,a){if(200<=n&&299>=n&&202!=n)return{uri:i||r,Bd:r,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=ve(t)}catch(e){}throw q.debug("HTTP error text:",i),new z(401==n||403==n?2:1,1,1001,r,n,i,e,a)}function jo(e,t,n,r){var i=new jo.h;at(t.headers).forEach((function(e,t){i.append(t,e)}));var a=new jo.g,o={Zd:!1,Oe:!1};if(e=new ke(e=jo.u(e,n,{body:t.body||void 0,headers:i,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,r),(function(){return o.Zd=!0,a.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new Le((function(){o.Oe=!0,a.abort()}));s.V(t/1e3),e.finally((function(){s.stop()}))}return e}function Fo(e,t,n,r){var i=new Fo.j,a=Date.now(),o=0;return new ke(new Promise((function(s,u){for(var l in i.open(t.method,e,!0),i.responseType="arraybuffer",i.timeout=t.retryParameters.timeout,i.withCredentials=t.allowCrossSiteCredentials,i.onabort=function(){u(new z(1,1,7001,e,n))},i.onload=function(t){for(var r=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),i={},a=(r=d(r)).next();!a.done;a=r.next())i[(a=a.value.split(": "))[0].toLowerCase()]=a.slice(1).join(": ");try{var o=No(i,t.response,t.status,e,t.responseURL,n);s(o)}catch(e){u(e)}},i.onerror=function(t){u(new z(1,1,1002,e,t,n))},i.ontimeout=function(){u(new z(1,1,1003,e,n))},i.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(r(t-a,e.loaded-o,e.total-e.loaded),o=e.loaded,a=t)},t.headers)i.setRequestHeader(l.toLowerCase(),t.headers[l]);i.send(t.body)})),(function(){return i.abort(),Promise.resolve()}))}function Uo(){this.g=this.j=this.h=0,this.i=new Map,this.l=0}function Bo(e,t,n){this.m=e,this.h=new Map,this.i=!1,this.l=t,this.j=n,this.g=new Uo}function Yo(e,t,n,r,i,a){var o=function(e,t){e.h+=t;var n=e.l;return e.l++,e.i.set(n,t),n}(e.g,r);r=e.h.get(t)||Promise.resolve(),e.h.set(t,r.then((function(){return h((function t(){var r,s,u,l,c,d;return x(t,(function(t){switch(t.s){case 1:return S(t,function(e,t){return h((function n(){var r;return x(n,(function(n){switch(n.s){case 1:return S(n,e.m.request(1,t).promise,2);case 2:return r=n.B,n.return(r.data)}}))}))}(e,n),2);case 2:if(r=t.B,e.i)throw new z(2,9,7001);if(i)for(var f in s=new Uint8Array(r),(u=new Yr(s)).data)l=Number(f),c=u.data[l],d=u.g[l],e.j(c,d);return e.g.close(o,r.byteLength),f=e.g,e.l(0==f.h?0:f.j/f.h,e.g.g),t.return(a(r))}}))}))})))}function Ho(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new pe,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function Vo(e,t){return new Promise((function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(e){if(!(e=e.target.result))return n();t(e.key,e.value,e),e.continue()}}))}function Go(e){this.h=e,this.g=[]}function Ko(e,t){return Wo(e,t,"readwrite")}function Wo(e,t,n){var r=new Ho(n=e.h.transaction([t],n),t);return e.g.push(r),r.promise().then((function(){Ye(e.g,r)}),(function(){Ye(e.g,r)})),r}function qo(e,t,n){this.h=new Go(e),this.i=t,this.g=n}function zo(e){return Promise.reject(new z(2,9,9011,"Cannot add new value to "+e))}function Xo(e,t,n,r){t=(e=Ko(e.h,t)).store();for(var i={},a=(n=d(n)).next();!a.done;i={key:i.key},a=n.next())i.key=a.value,t.delete(i.key).onsuccess=function(e){return function(){return r(e.key)}}(i);return e.promise()}function Qo(e,t,n){return h((function r(){var i,a,o,s,u,l,c;return x(r,(function(r){switch(r.s){case 1:for(i=Wo(e.h,t,"readonly"),a=i.store(),o={},s=[],u={},l=d(n),c=l.next();!c.done;u={request:u.request,key:u.key},c=l.next())u.key=c.value,u.request=a.get(u.key),u.request.onsuccess=function(e){return function(){null==e.request.result&&s.push(e.key),o[e.key]=e.request.result}}(u);return S(r,i.promise(),2);case 2:if(s.length)throw new z(2,9,9012,"Could not find values for "+s);return r.return(n.map((function(e){return o[e]})))}}))}))}function $o(e){this.g=new Go(e)}function Jo(){this.g=new Map}function Zo(e,t,n){if(!(e=e.g.get(t)))throw new z(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new z(2,9,9013,"Could not find cell with name "+n);return t}function es(e,t){ts.set(e,t)}oo.prototype.destroy=function(){var e=this;return h((function t(){var n,r;return x(t,(function(t){switch(t.s){case 1:n=[];for(var i=d(e.h.values()),a=i.next();!a.done;a=i.next())Io(r=a.value),n.push(Oo(r));return S(t,Promise.all(n),2);case 2:e.h.clear(),e.o.clear(),e.g=null,e.i=null,e.F=null,e.m=null,e.l=null,e.j=!0,w(t)}}))}))},oo.prototype.configure=function(e){this.l=e,this.M=new Ce({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},oo.prototype.start=function(){var e=this;return h((function t(){var n,r,i;return x(t,(function(t){switch(t.s){case 1:return n=e.g.eb(),r=Lo(e,n),(i=e.g.ue(e.i.periods[r])).variant||i.text?S(t,go(e,i.variant?i.variant.audio:null,i.variant?i.variant.video:null,i.text,n),2):(q.error("init: no Streams chosen"),t.return(new z(2,5,5005)));case 2:if(e.j)return t.return();q.debug("init: completed initial Stream setup"),e.g&&e.g.Yf&&(q.K("init: calling onInitialStreamsSetup()..."),e.g.Yf()),w(t)}}))}))},oo.prototype.P=function(e,t,n,r){var i=r.reader.Cd(),a=r.reader.Cd(),o=r.reader.N(),s=r.reader.N(),u=r.reader.N(),l=r.reader.N();r=r.reader.mb(r.reader.S.byteLength-r.reader.ka()),e=e.startTime+t.startTime+s/o,n.includes(i)&&("urn:mpeg:dash:event:2012"==i?this.g.Zf():this.g.onEvent(new Ne("emsg",{detail:{startTime:e,endTime:e+u/o,schemeIdUri:i,value:a,timescale:o,presentationTimeDelta:s,eventDuration:u,id:l,messageData:r}})))},Y("shaka.net.HttpFetchPlugin",jo),jo.u=function(e,t,n,r,i){return h((function a(){var o,s,u,l,c,d,f,p,m,g,v,y;return x(a,(function(a){switch(a.s){case 1:return o=jo.l,s=jo.i,d=c=0,f=Date.now(),A(a,2),S(a,o(e,n),4);case 4:return u=a.B,p=u.clone().body.getReader(),g=(m=u.headers.get("Content-Length"))?parseInt(m,10):0,new s({start:function(e){!function t(){return h((function n(){var r,a,o;return x(n,(function(n){switch(n.s){case 1:return A(n,2),S(n,p.read(),4);case 4:r=n.B,L(n,3);break;case 2:return a=C(n),q.K("error reading from stream",a.message),n.return();case 3:r.done||(c+=r.value.byteLength),(100<(o=Date.now())-f||r.done)&&(i(o-f,c-d,g-c),d=c,f=o),r.done?e.close():(e.enqueue(r.value),t()),w(n)}}))}))}()}}),S(a,u.arrayBuffer(),5);case 5:l=a.B,L(a,3);break;case 2:if(v=C(a),r.Zd)throw new z(1,1,7001,e,t);if(r.Oe)throw new z(1,1,1003,e,t);throw new z(1,1,1002,e,v,t);case 3:return y={},u.headers.forEach((function(e,t){y[t.trim()]=e})),a.return(No(y,l,u.status,e,u.url,t))}}))}))},jo.isSupported=function(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)},jo.isSupported=jo.isSupported,jo.l=e.fetch,jo.g=e.AbortController,jo.i=e.ReadableStream,jo.h=e.Headers,jo.isSupported()&&(qe("http",jo,2),qe("https",jo,2)),Y("shaka.net.HttpXHRPlugin",Fo),Fo.j=e.XMLHttpRequest,qe("http",Fo,1),qe("https",Fo,1),Uo.prototype.close=function(e,t){if(this.i.has(e)){var n=this.i.get(e);this.i.delete(e),this.j+=n,this.g+=t}},Bo.prototype.destroy=function(){return this.i=!0,Promise.all(this.h.values()).then((function(){}),(function(){}))},Ho.prototype.abort=function(){try{this.i.abort()}catch(e){}return this.g.catch((function(){}))},Ho.prototype.store=function(){return this.h},Ho.prototype.promise=function(){return this.g},Go.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))},(r=qo.prototype).destroy=function(){return this.h.destroy()},r.hasFixedKeySpace=function(){return!0},r.addSegments=function(){return zo(this.i)},r.removeSegments=function(e,t){return Xo(this,this.i,e,t)},r.getSegments=function(e){var t=this;return h((function n(){var r;return x(n,(function(n){switch(n.s){case 1:return S(n,Qo(t,t.i,e),2);case 2:return r=n.B,n.return(r.map((function(e){return t.ae(e)})))}}))}))},r.addManifests=function(){return zo(this.g)},r.updateManifestExpiration=function(e,t){var n=Ko(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},r.removeManifests=function(e,t){return Xo(this,this.g,e,t)},r.getManifests=function(e){var t=this;return h((function n(){var r;return x(n,(function(n){switch(n.s){case 1:return S(n,Qo(t,t.g,e),2);case 2:return r=n.B,n.return(r.map((function(e){return t.pc(e)})))}}))}))},r.getAllManifests=function(){var e=this;return h((function t(){var n,r;return x(t,(function(t){switch(t.s){case 1:return n=Wo(e.h,e.g,"readonly"),r=new Map,S(t,Vo(n,(function(t,n){r.set(t,e.pc(n))})),2);case 2:return S(t,n.promise(),3);case 3:return t.return(r)}}))}))},r.ae=function(e){return e},r.pc=function(e){return e},r.add=function(e,t){var n=this;return h((function r(){var i,a,o,s;return x(r,(function(r){switch(r.s){case 1:i=Ko(n.h,e),a=i.store(),o=[];for(var u=d(t),l=u.next();!l.done;l=u.next())s=l.value,a.add(s).onsuccess=function(e){o.push(e.target.result)};return S(r,i.promise(),2);case 2:return r.return(o)}}))}))},$o.prototype.destroy=function(){return this.g.destroy()},$o.prototype.getAll=function(){var e=this;return h((function t(){var n,r;return x(t,(function(t){switch(t.s){case 1:return n=Wo(e.g,"session-ids","readonly"),r=[],S(t,Vo(n,(function(e,t){r.push(t)})),2);case 2:return S(t,n.promise(),3);case 3:return t.return(r)}}))}))},$o.prototype.add=function(e){for(var t=Ko(this.g,"session-ids"),n=t.store(),r=(e=d(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},$o.prototype.remove=function(e){var t=this;return h((function n(){var r;return x(n,(function(n){switch(n.s){case 1:return S(n,Vo(r=Ko(t.g,"session-ids"),(function(t,n,r){0<=e.indexOf(n.sessionId)&&r.delete()})),2);case 2:return S(n,r.promise(),0)}}))}))},Jo.prototype.destroy=function(){for(var e=[],t=d(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Jo.prototype.init=function(){var e=this;ts.forEach((function(t,n){var r=t();r?e.g.set(n,r):q.info("Skipping "+n+" as it is not supported on this platform")}));for(var t=[],n=d(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},Jo.prototype.erase=function(){var e=this;return h((function t(){var n,r;return x(t,(function(t){switch(t.s){case 1:return n=Array.from(e.g.values()),(r=0<n.length)||ts.forEach((function(e){(e=e())&&n.push(e)})),S(t,Promise.all(n.map((function(e){return e.erase()}))),2);case 2:if(!r)return S(t,Promise.all(n.map((function(e){return e.destroy()}))),0);t.I(0)}}))}))},Y("shaka.offline.StorageMuxer.register",es),Y("shaka.offline.StorageMuxer.unregister",(function(e){ts.delete(e)}));var ts=new Map;function ns(e){qo.apply(this,arguments)}function rs(e){return function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType})),n=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!n.every((function(e){return e.variantIds}))){t.forEach((function(e){e.variantIds=[]})),n.forEach((function(e){e.variantIds=[]}));var r=0;if(n.length&&!t.length){q.debug("Found video-only content. Creating variants for video.");var i=r++;n.forEach((function(e){e.variantIds.push(i)}))}if(!n.length&&t.length){q.debug("Found audio-only content. Creating variants for audio.");var a=r++;t.forEach((function(e){e.variantIds.push(a)}))}n.length&&t.length&&(q.debug("Found audio-video content. Creating variants."),t.forEach((function(e){n.forEach((function(t){var n=r++;e.variantIds.push(n),t.variantIds.push(n)}))})))}}(e),e.streams.forEach((function(){})),{startTime:e.startTime,streams:e.streams.map(is)}}function is(e){var t=e.initSegmentUri?os(e.initSegmentUri):null;return{id:e.id,originalId:null,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(as),variantIds:e.variantIds}}function as(e){var t=os(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function os(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new z(2,9,9004,"Could not parse uri "+e)}function ss(e,t,n,r){qo.call(this,e,t,n),this.j=r}function us(){this.l=this.i=this.h=this.g=this.j=null}function ls(e,t,n,r){this.g=e,this.l=t,this.j=n,this.i=r,this.h=["offline:",e,"/",t,"/",n,"/",r].join("")}function cs(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new ls(t,n,r,Number(e[4])):null}function ds(e,t){this.h=e,this.g=t}function fs(e,t,n){var r=t.streams.filter((function(e){return"audio"==e.contentType})),i=t.streams.filter((function(e){return"video"==e.contentType}));return r=function(e,t,n){for(var r=new Set,i=d(t),a=i.next();!a.done;a=i.next()){var o=d(a.value.variantIds);for(a=o.next();!a.done;a=o.next())r.add(a.value)}for(i=d(n),a=i.next();!a.done;a=i.next())for(o=d(a.value.variantIds),a=o.next();!a.done;a=o.next())r.add(a.value);for(i=new Map,r=d(r),a=r.next();!a.done;a=r.next())a=a.value,i.set(a,{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(t=d(t),r=t.next();!r.done;r=t.next())for(r=r.value,a=hs(e,r),o=d(r.variantIds),r=o.next();!r.done;r=o.next())(r=i.get(r.value)).language=a.language,r.primary=r.primary||a.primary,r.audio=a;for(n=d(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=hs(e,r),a=d(r.variantIds),r=a.next();!r.done;r=a.next())(r=i.get(r.value)).primary=r.primary||t.primary,r.video=t;return i}(e,r,i),i=t.streams.filter((function(e){return"text"==e.contentType})).map((function(t){return hs(e,t)})),t.streams.forEach((function(r){r=r.segments.map((function(t,n){return ps(e,n,t)})),n.Jb(r,t.startTime)})),{startTime:t.startTime,variants:Array.from(r.values()),textStreams:i}}function hs(e,t){var n=t.segments.map((function(t,n){return ps(e,n,t)})),r=new ni(n);return n={id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return r.find(e)},getSegmentReference:function(e){return r.get(e)},initSegmentReference:null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,pixelAspectRatio:t.pixelAspectRatio||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,label:t.label||null,type:t.contentType,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},null!=t.initSegmentKey&&(n.initSegmentReference=function(e,t){var n=new ls("segment",e.h,e.g,t);return new Zr((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey)),n}function ps(e,t,n){var r=new ls("segment",e.h,e.g,n.dataKey);return new ei(t,n.startTime,n.endTime,(function(){return[r.toString()]}),0,null)}function ms(){this.g=null}function gs(e){var t=cs(e);return t&&"manifest"==t.g?gs.m(e):t&&"segment"==t.g?gs.o(t.key(),t):Pe(new z(2,1,9004,e))}function vs(e,t,n){return h((function r(){var i,a,o,s,u,l;return x(r,(function(r){switch(r.s){case 1:i=[];for(var c=[],f=d(n),p=f.next();!p.done;p=f.next()){p=p.value;for(var m=!1,g=d(c),v=g.next();!v.done;v=g.next())if(ys((v=v.value).info,p)){v.sessionIds.push(p.sessionId),m=!0;break}m||c.push({info:p,sessionIds:[p.sessionId]})}a=d(c),o=a.next();case 2:if(o.done){r.I(4);break}return s=o.value,u=function(e,t,n){return h((function r(){var i,a,o,s;return x(r,(function(r){switch(r.s){case 1:return i=new bt({Ib:t,onError:function(){},Dc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),A(r,2),i.configure(e),S(r,function(e,t,n,r,i,a){var o=new Map;return o.set(t,{audioCapabilities:i,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t,drmInfos:[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,initData:null,keyIds:null}]}),kt(e,o)}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:L(r,3);break;case 2:return a=C(r),q.v("Error initializing EME",a),S(r,i.destroy(),5);case 5:return r.return([]);case 3:return A(r,6),S(r,St(i),8);case 8:L(r,7);break;case 6:return o=C(r),q.v("Error setting server certificate",o),S(r,i.destroy(),9);case 9:return r.return([]);case 7:return s=[],S(r,Promise.all(n.sessionIds.map((function(e){return h((function t(){var n;return x(t,(function(t){switch(t.s){case 1:return A(t,2),S(t,function(e,t){return h((function n(){var r,i,a;return x(n,(function(n){switch(n.s){case 1:return S(n,Pt(e,t),2);case 2:return(r=n.B)?(i=[],(a=e.h.get(r))&&(a.Ga=new pe,i.push(a.Ga)),q.O("Attempting to remove session",t),i.push(r.remove()),S(n,Promise.all(i),0)):(q.O("Ignoring attempt to remove missing session",t),n.return())}}))}))}(i,e),4);case 4:s.push(e),L(t,0);break;case 2:n=C(t),q.v("Error deleting offline session",n),w(t)}}))}))}))),10);case 10:return S(r,i.destroy(),11);case 11:return r.return(s)}}))}))}(e,t,s),S(r,u,5);case 5:l=r.B,i=i.concat(l),o=a.next(),r.I(2);break;case 4:return r.return(i)}}))}))}function ys(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&He(e.audioCapabilities,t.audioCapabilities,n)&&He(e.videoCapabilities,t.videoCapabilities,n)}function _s(e,t){var n={Ia:null,D:null,mimeType:null,startTime:null,Rd:null,uri:null},r=this;this.m=t,this.i=e,this.j=n,this.o=null,this.l=[],this.h=this.g=null,this.u=!0,this.A=Promise.resolve().then((function(){return function(e){return h((function t(){return x(t,(function(t){switch(t.s){case 1:if(e.u){if(0==e.l.length||e.g&&!e.g.gb)var n=!1;else{e.g&&(e.g.Da.kb(),e.g=null);var r=(n=e.l.shift()).create(e.j);r?(n.Da.Kb(),e.g={node:r.node,payload:r.payload,gb:r.gb,Da:n.Da}):n.Da.Ec(),n=!0}return n?n=Promise.resolve():e.g?n=function(e){return h((function t(){var n,r;return x(t,(function(t){switch(t.s){case 1:return e.i=e.m.Af(e.i,e.j,e.g.node,e.g.payload),A(t,2),e.h=e.m.ef(e.i,e.j,e.g.payload),S(t,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.Da.Cc(),e.g=null),L(t,0);break;case 2:return 7001==(n=C(t)).code?e.g.Da.kb():e.g.Da.onError(n),e.g=null,e.h=null,r=e,S(t,e.m.handleError(e.j,n),5);case 5:r.i=t.B,w(t)}}))}))}(e):(e.m.Xf(e.i),e.o=new pe,n=e.o),S(t,n,1)}t.I(0)}}))}))}(r)}))}function bs(e,t){var n={Kb:function(){},Cc:function(){},kb:function(){},onError:function(){},Ec:function(){},$g:function(){}};return e.l.push({create:t,Da:n}),e.h&&e.h.abort(),Ts(e),n}function Ts(e){e.o&&(e.o.resolve(),e.o=null)}function Es(e){this.g=null;for(var t=0;t<e.textTracks.length;++t){var n=e.textTracks[t];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n)}this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function Ss(e){if(e.startTime>=e.endTime)return q.v("Invalid cue times: "+e.startTime+" - "+e.endTime),null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function ws(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=e.cues,i=r.length-1;0<=i;i--){var a=r[i];a&&t(a)&&e.removeCue(a)}e.mode=n}function As(e,t,n,r,i){var a,o=i in r,s=!0;for(a in t){var u=i+"."+a,l=o?r[i]:n[a];o||a in n?void 0===t[a]?void 0===l||o?delete e[a]:e[a]=Ue(l):l.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Ue(l)),u=As(e[a],t[a],l,r,u),s=s&&u):typeof t[a]!=typeof l||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=l.constructor?(q.kc("Invalid config, wrong type for "+u),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&q.ba("Unexpected number of arguments for "+u),e[a]=t[a]):(q.kc("Invalid config, unrecognized key "+u),s=!1)}return s}function Ms(e,t){for(var n={},r=n,i=0,a=0;!(0>(i=e.indexOf(".",i)));)0!=i&&"\\"==e[i-1]||(r[a=e.substring(a,i).replace(/\\\./g,".")]={},r=r[a],a=i+1),i+=1;return r[e.substring(a).replace(/\\\./g,".")]=t,n}function Ls(){}function Cs(){var e=5e5,t=1/0;navigator.connection&&(navigator.connection.downlink&&(e=1e6*navigator.connection.downlink),navigator.connection.saveData&&(t=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:It,fairPlayTransform:!0,updateExpirationTime:1},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(e){return q.error("Unhandled streaming error",e),[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0};(gt("Web0S")||ht()||gt("CrKey"))&&(i.stallSkip=0);var a={trackSelectionCallback:function(e){return h((function t(){return x(t,(function(t){switch(t.s){case 1:return t.return(e)}}))}))},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},o={drm:n,manifest:r,streaming:i,offline:a,abrFactory:Un,abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return a.trackSelectionCallback=function(e){return h((function t(){return x(t,(function(t){switch(t.s){case 1:return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),r=[],i=Nn(t,n.map((function(e){return e.language})));i&&(r=n.filter((function(e){return Rn(e.language)==i}))),0==r.length&&(r=n.filter((function(e){return e.primary}))),0==r.length&&(1<new Set(n.map((function(e){return e.language}))).size&&q.v("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),r=n);var a=r.filter((function(e){return e.height&&480>=e.height}));if(a.length&&(a.sort((function(e,t){return t.height-e.height})),r=a.filter((function(e){return e.height==a[0].height}))),n=[],r.length){var o=Math.floor(r.length/2);r.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(r[o])}for(r=d(e),o=r.next();!o.done;o=r.next())"text"==(o=o.value).type&&n.push(o);return n}(e,o.preferredAudioLanguage))}}))}))},o}function Ds(e,t,n){var r={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return As(e,t,n||Cs(),r,"")}function ks(){this.g=null,this.h=[]}function Ps(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function Is(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var r=d(e.h),i=r.next();!i.done;i=r.next())n+=(i=i.value).state==t?i.duration:0;return n}function Os(){this.h=this.i=null,this.g=[]}function Rs(){this.j=this.C=this.m=this.h=this.o=this.u=this.A=this.l=this.F=NaN,this.g=new ks,this.i=new Os}function xs(t,n){var r=this;Fe.call(this),this.o=wu,this.g=null,this.ub=!1,this.l=new Je,this.Uc=this.u=this.Tb=this.i=this.C=this.j=this.rc=this.L=this.ic=this.J=this.wb=this.A=this.M=this.m=this.X=null,this.re=1e9,this.lc=new Set,this.yb=!0,this.wa=null,this.qe=!1,this.oe=0,this.va=null,this.Z=new ma,this.h=qs(this),this.mc={width:1/0,height:1/0},this.F=null,this.tb=new wa(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.ua=this.h.preferredTextLanguage,this.Xa=this.h.preferredTextRole,this.Wc=[],n&&n(this),this.X=function(e){return new Ke((function(t,n){e.u&&e.u.segmentDownloaded(t,n)}))}(this),this.l.H(e,"online",(function(){r.Id()})),this.P={name:"detach"},this.da={name:"attach"},this.Qa={name:"unload"},this.nd={name:"manifest-parser"},this.md={name:"manifest"},this.vb={name:"media-source"},this.ad={name:"drm-engine"},this.ea={name:"load"},this.od={name:"src-equals-drm-engine"},this.xb={name:"src-equals"};var i=new Map;i.set(this.da,(function(e,t){return Re(function(e,t,n){return null==t.D&&(t.D=n.D,e.l.H(t.D,"error",(function(){var t=cu(e);t&&e.Va(t)}))),e.g=t.D,Promise.resolve()}(r,e,t))})),i.set(this.P,(function(e){return e.D&&(r.l.ta(e.D,"error"),e.D=null),r.g=null,Re(e=Promise.resolve())})),i.set(this.Qa,(function(e){return Re(Us(r,e))})),i.set(this.vb,(function(t){return Re(t=function(t,n){return h((function r(){var i,a,o,s;return x(r,(function(r){switch(r.s){case 1:return i=e.muxjs?new Vt:new Gt,a=t.h.textDisplayFactory,o=new a,t.fd=a,S(r,(s=new yn(n.D,i,o)).C,2);case 2:t.M=s,w(r)}}))}))}(r,t))})),i.set(this.nd,(function(e,t){return Re(function(e,t,n){return h((function r(){var i,a,o,s;return x(r,(function(r){switch(r.s){case 1:if(t.Ia=n.Ia,t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,a=e.X,e.Tb=i,t.Ia){e.C=t.Ia(),r.I(2);break}return o=e,S(r,yi.create(i,a,e.h.manifest.retryParameters,t.mimeType),3);case 3:o.C=r.B;case 2:s=Ue(e.h.manifest),n.D&&"AUDIO"===n.D.nodeName&&(s.disableVideo=!0),e.C.configure(s),w(r)}}))}))}(r,e,t))})),i.set(this.md,(function(e){return function(e,t){var n=t.uri,r=e.X;e.rc=new to((function(){return e.He()})),function(e,t){e.h=t}(e.rc,(function(t){lu(e,"timelineregionadded",t)}));var i={networkingEngine:r,filterNewPeriod:function(t){return e.Xc(t)},filterAllPeriods:function(t){return zs(e,t)},onTimelineRegionAdded:function(t){var n=e.rc;e:{for(var r=d(n.g),i=r.next();!i.done;i=r.next())if((i=i.value).schemeIdUri==t.schemeIdUri&&i.id==t.id&&i.startTime==t.startTime&&i.endTime==t.endTime){r=i;break e}r=null}null==r&&(n.g.add(t),n.h(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return e.Va(t)}};return new ke(Promise.resolve().then((function(){return h((function t(){var r;return x(t,(function(t){switch(t.s){case 1:return r=e,S(t,e.C.start(n,i),2);case 2:if(r.i=t.B,e.dispatchEvent(new Ne("manifestparsed")),0==e.i.periods.length)throw new z(2,4,4014);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.some((function(e){return e.variants.some(t)}))&&(q.debug("Found variant with audio and video content, so filtering out audio-only content in all periods."),e.forEach((function(e){e.variants=e.variants.filter(t)})))}(e.i.periods),w(t)}}))}))})),(function(){return q.info("Aborting parser step..."),e.C.stop()}))}(r,e)})),i.set(this.ad,(function(e){return Re(e=function(e,t){return h((function n(){return x(n,(function(n){switch(n.s){case 1:return e.m=Bs(e,{Ib:e.X,onError:function(t){e.Va(t)},Dc:function(t){du(e,t)},onExpirationUpdated:function(t,n){fu(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.m.configure(e.h.drm),S(n,Tt(e.m,Na(e.i.periods),e.i.offlineSessionIds),2);case 2:return S(n,e.m.Ub(t.D),3);case 3:zs(e,e.i.periods),w(n)}}))}))}(r,e))})),i.set(this.ea,(function(e,t){return Re(function(e,t,n){return h((function r(){var i,a,o,s,u,l,c,f,h,p;return x(r,(function(r){switch(r.s){case 1:return t.startTime=n.startTime,i=t.D,a=t.uri,e.Tb=a,e.J=new Ua({wc:function(){return t.D.playbackRate},vc:function(){return t.D.defaultPlaybackRate},Od:function(e){t.D.playbackRate=e},pe:function(e){t.D.currentTime+=e}}),e.F=new Rs,o=function(){return Zs(e)},s=function(){return Js(e)},e.l.H(i,"playing",o),e.l.H(i,"pause",o),e.l.H(i,"ended",o),e.l.H(i,"ratechange",s),u=e.h.abrFactory,e.u&&e.Uc==u||(e.Uc=u,e.u=new u,e.u.configure(e.h.abr)),function(e,t){for(var n=0;n<t.length;n++){for(var r=t[n],i=new Map,a=d(r.variants),o=a.next();!o.done;o=a.next())if((o=o.value).video&&o.video.closedCaptions)for(var s=d((o=o.video).closedCaptions.keys()),u=s.next();!u.done;u=s.next())if(u=u.value,!i.has(u)){var l={id:e.re++,originalId:u,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:o.closedCaptions.get(u),label:null,type:"text",primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:o.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null};i.set(u,l)}for(i=d(i.values()),a=i.next();!a.done;a=i.next())r.textStreams.push(a.value)}}(e,e.i.periods),e.tb=new wa(e.h.preferredAudioLanguage,e.h.preferredVariantRole,e.h.preferredAudioChannelCount),e.ua=e.h.preferredTextLanguage,e.Xa=e.h.preferredTextRole,function(e,t,n){0<t&&(e.aa()?q.v("|playRangeStart| has been configured for live content. Ignoring the setting."):e.Le(t)),n<e.ha()&&(e.aa()?q.v("|playRangeEnd| has been configured for live content. Ignoring the setting."):e.Fa(n))}(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.u.init((function(t,n,r){n=void 0!==n&&n,r=void 0===r?0:r,q.debug("switch_");e:{for(var i=d(e.i.periods),a=i.next();!a.done;a=i.next())if((a=a.value).variants.includes(t)){i=a;break e}i=null}Ks(e,i,t,!0),e.j&&ho(e.j,t,n,r)&&ru(e)})),e.A=function(e,t){return new $a(e.g,e.i,e.h.streaming,t,(function(){e.wb&&xa(e.wb,!0),e.j&&function(e){function t(t){var i=e.g.T;return"text"==t?t=null!=(t=i.g).g&&null!=t.h&&(n>=t.g&&n<t.h):t=Wt(t=An(i,t),n,r),t}var n=e.g.eb(),r=e.l.smallGapLimit,i=!1,a=Lo(e,n);if(it(e.h.values(),(function(e){return e.oa==a})))for(var o=d(e.h.keys()),s=o.next();!s.done;s=o.next())t(s=s.value)||(mo(e,e.h.get(s)),i=!0);else it(e.h.keys(),t)||(q.debug("(all): seeked: unbuffered seek: clearing all buffers"),e.h.forEach((function(t){mo(e,t)})),i=!0);i||q.debug("(all): seeked: buffered seek: presentationTime="+n)}(e.j),e.L&&Hs(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.wb=function(e){var t=new Fa(e.i);!function(e,t){e.h=t}(t,(function(){iu(e)}));var n=new no(e.rc);!function(e,t,n,r){e.g=t,e.h=n,e.i=r}(n,(function(t){lu(e,"timelineregionenter",t)}),(function(t){lu(e,"timelineregionexit",t)}),(function(t,n){n||(lu(e,"timelineregionenter",t),lu(e,"timelineregionexit",t))}));var r=new Ra(e.g);return r.g.add(t),r.g.add(n),r}(e),l=Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal),Ys(e,l),e.j=function(e){return new oo(e.i,{eb:function(){return e.A.l()},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},T:e.M,Ib:e.X,ue:e.Vf.bind(e),te:e.Ze.bind(e),onError:e.Va.bind(e),onEvent:function(t){return e.dispatchEvent(t)},Zf:e.$f.bind(e),zd:e.eg.bind(e)})}(e),e.j.configure(e.h.streaming),Fn.$d(e.i,e.h.preferredAudioChannelCount),e.o=Au,e.dispatchEvent(new Ne("streaming")),S(r,e.j.start(),2);case 2:e.h.streaming.startAtSegmentBoundary&&(c=e.A.l(),f=function(e,t){function n(e,t){if(!e)return null;var n=e.findSegmentPosition(t-a.startTime);return null==n?null:(n=e.getSegmentReference(n))?n.startTime+a.startTime:null}var r=so(e.j),i=uo(e.j),a=yu(e);return r=n(r,t),null!=(i=n(i,t))&&null!=r?Math.max(i,r):null!=i?i:null!=r?r:t}(e,c),e.A.A(f)),e.i.periods.forEach(e.Xc.bind(e)),iu(e),ru(e),h=yu(e)||e.i.periods[0],p=h.variants.some((function(e){return e.primary})),e.h.preferredAudioLanguage||p||q.v("No preferred audio language set.  We will choose an arbitrary language initially"),eu(e,h.variants),e.l.ya(i,"loadedmetadata",(function(){e.F.h=Date.now()/1e3-n.Rd})),w(r)}}))}))}(r,e,t))})),i.set(this.od,(function(e,t){return Re(function(e,t,n){return h((function r(){var i,a;return x(r,(function(r){switch(r.s){case 1:return i=fe,e.m=Bs(e,{Ib:e.X,onError:function(t){e.Va(t)},Dc:function(t){du(e,t)},onExpirationUpdated:function(t,n){fu(e,t,n)},onEvent:function(t){e.dispatchEvent(t)}}),e.m.configure(e.h.drm),a={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:n.mimeType?n.mimeType.split(";")[0]:"video/mp4",codecs:n.mimeType?ut(n.mimeType):"",encrypted:!0,keyId:null,language:"und",label:null,type:i.Za,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},S(r,Tt(e.m,[a],[]),2);case 2:return S(r,e.m.Ub(t.D),0)}}))}))}(r,e,t))})),i.set(this.xb,(function(e,t){return function(e,t,n){function r(){return Zs(e)}if(t.uri=n.uri,t.startTime=n.startTime,e.Tb=t.uri,e.F=new Rs,e.A=new Qa(t.D),null!=t.startTime&&e.A.A(t.startTime),e.J=new Ua({wc:function(){return t.D.playbackRate},vc:function(){return t.D.defaultPlaybackRate},Od:function(e){t.D.playbackRate=e},pe:function(e){t.D.currentTime+=e}}),Ys(e,e.h.streaming.rebufferingGoal),e.l.H(t.D,"playing",r),e.l.H(t.D,"pause",r),e.l.H(t.D,"ended",r),e.l.H(t.D,"ratechange",(function(){return Js(e)})),"none"!=e.g.preload&&e.l.ya(t.D,"loadedmetadata",(function(){e.F.h=Date.now()/1e3-n.Rd})),e.g.audioTracks&&(e.l.H(e.g.audioTracks,"addtrack",(function(){return iu(e)})),e.l.H(e.g.audioTracks,"removetrack",(function(){return iu(e)})),e.l.H(e.g.audioTracks,"change",(function(){return iu(e)}))),e.g.textTracks){var i=e.g.textTracks;e.l.H(i,"addtrack",(function(){return iu(e)})),e.l.H(i,"removetrack",(function(){return iu(e)})),e.l.H(i,"change",(function(){return iu(e)}))}t.D.src=t.uri,(ht()||gt("Web0S"))&&t.D.load(),e.o=Mu,e.dispatchEvent(new Ne("streaming"));var a=new pe;Ya(e.g,HTMLMediaElement.HAVE_METADATA,e.l,(function(){a.resolve()}));var o=!1;return e.Wc.push((function(){o=!0})),Ya(e.g,HTMLMediaElement.HAVE_CURRENT_DATA,e.l,(function(){return h((function t(){return x(t,(function(t){switch(t.s){case 1:if(o)return t.return();if(function(e){var t=e.h.preferredAudioLanguage;if(""!=t){e.Jd(t);var n=e.h.preferredVariantRole;""!=n&&e.Jd(t,n)}}(e),Gs(e).find((function(e){return"disabled"!=e.mode}))){t.I(2);break}return S(t,new Promise((function(t){e.l.ya(e.g.textTracks,"change",t),new Le(t).V(1)})),2);case 2:if(o)return t.return();!function(e){var t=e.h.preferredTextLanguage;if(""!=t){e.Kd(t);var n=e.h.preferredTextRole;""!=n&&e.Kd(t,n)}}(e),w(t)}}))}))})),e.g.error?a.reject(cu(e)):"none"==e.g.preload&&(q.ba('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),a.resolve()),e.l.ya(e.g,"error",(function(){a.reject(cu(e))})),new ke(a,(function(){return a.reject(new z(2,7,7001)),Promise.resolve()}))}(r,e,t)})),this.Ya=new _s(this.P,{Af:function(e,t,n,i){var a=null;return e==r.P&&(a=n==r.P?r.P:r.da),e==r.da&&(a=n==r.P||t.D!=i.D?r.P:n==r.da?r.da:n==r.vb||n==r.ea?r.vb:n==r.xb?r.od:null),e==r.vb&&(a=n==r.ea&&t.D==i.D?r.nd:r.Qa),e==r.nd&&(a=Tu(r.ea,r.md,r.Qa,n,t,i)),e==r.md&&(a=Tu(r.ea,r.ad,r.Qa,n,t,i)),e==r.ad&&(a=Tu(r.ea,r.ea,r.Qa,n,t,i)),e==r.od&&(a=n==r.xb&&t.D==i.D?r.xb:r.Qa),e!=r.ea&&e!=r.xb||(a=r.Qa),e==r.Qa&&(a=i.D&&t.D==i.D?r.da:r.P),a},ef:function(e,t,n){return r.dispatchEvent(new Ne("onstatechange",{state:e.name})),i.get(e)(t,n)},handleError:function(e,t){return h((function n(){return x(n,(function(n){switch(n.s){case 1:return q.v("The walker saw an error:"),t instanceof z?q.v("Error Code:",t.code):(q.v("Error Message:",t.message),q.v("Error Stack:",t.stack)),S(n,Us(r,e),2);case 2:return n.return(e.D?r.da:r.P)}}))}))},Xf:function(e){r.dispatchEvent(new Ne("onstateidle",{state:e.name}))}}),t&&this.Ub(t,!0)}_(ns,qo),ns.prototype.updateManifestExpiration=function(e,t){var n=Ko(this.h,this.g),r=n.store(),i=new pe;return r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new z(2,9,9012,"Could not find values for "+e))},n.promise().then((function(){return i}))},ns.prototype.pc=function(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(rs),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}},ns.prototype.ae=function(e){return{data:e.data}},_(ss,qo),ss.prototype.hasFixedKeySpace=function(){return this.j},ss.prototype.addSegments=function(e){return this.j?zo(this.i):this.add(this.i,e)},ss.prototype.addManifests=function(e){return this.j?zo(this.g):this.add(this.g,e)},ss.prototype.pc=function(e){return null==e.expiration&&(e.expiration=1/0),e},(r=us.prototype).init=function(){var t=this,n=new pe,r=e.indexedDB.open("shaka_offline_db",4);return r.onsuccess=function(e){e=e.target.result,t.j=e;var r=e.objectStoreNames;r.contains("manifest")&&r.contains("segment")?(q.debug("Mounting v1 idb storage cell"),r=new ns(e,"segment","manifest")):r=null,t.g=r,(r=e.objectStoreNames).contains("manifest-v2")&&r.contains("segment-v2")?(q.debug("Mounting v2 idb storage cell"),r=new ss(e,"segment-v2","manifest-v2",!0)):r=null,t.h=r,(r=e.objectStoreNames).contains("manifest-v3")&&r.contains("segment-v3")?(q.debug("Mounting v3 idb storage cell"),r=new ss(e,"segment-v3","manifest-v3",!1)):r=null,t.i=r,e.objectStoreNames.contains("session-ids")?(q.debug("Mounting session ID idb storage cell"),e=new $o(e)):e=null,t.l=e,n.resolve()},r.onupgradeneeded=function(e){e=e.target.result;for(var t=d(["segment-v3","manifest-v3","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},r.onerror=function(e){n.reject(new z(2,9,9001,r.error)),e.preventDefault()},n},r.destroy=function(){var e=this;return h((function t(){return x(t,(function(t){switch(t.s){case 1:if(!e.g){t.I(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.I(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.I(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.l){t.I(8);break}return S(t,e.l.destroy(),8);case 8:e.j&&e.j.close(),w(t)}}))}))},r.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),e},r.getEmeSessionCell=function(){return this.l},r.erase=function(){var t=this;return h((function n(){return x(n,(function(n){switch(n.s){case 1:if(!t.g){n.I(2);break}return S(n,t.g.destroy(),2);case 2:if(!t.h){n.I(4);break}return S(n,t.h.destroy(),4);case 4:if(!t.i){n.I(6);break}return S(n,t.i.destroy(),6);case 6:return t.j&&t.j.close(),S(n,function(){var t=new pe,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){q.v("Deleting","shaka_offline_db","is being blocked")},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new z(2,9,9001,n.error)),e.preventDefault()},t}(),8);case 8:return t.j=null,t.g=null,t.h=null,t.i=null,S(n,t.init(),0)}}))}))},es("idb",(function(){return gt("CrKey")||!e.indexedDB?null:new us})),ls.prototype.Ea=function(){return this.l},ls.prototype.ja=function(){return this.j},ls.prototype.key=function(){return this.i},ls.prototype.toString=function(){return this.h},(r=ms.prototype).configure=function(){},r.start=function(e){var t=this;return h((function n(){var r,i,a,o,s;return x(n,(function(n){switch(n.s){case 1:return r=cs(e),t.g=r,null==r||"manifest"!=r.g?n.return(Promise.reject(new z(2,1,9004,r))):(i=new Jo,M(n,2),S(n,i.init(),4));case 4:return S(n,Zo(i,r.Ea(),r.ja()),5);case 5:return S(n,n.B.getManifests([r.key()]),6);case 6:return a=n.B,o=a[0],s=new ds(r.Ea(),r.ja()),n.return(function(e,t){var n=new _i(null,0);n.Fa(t.duration);var r=t.periods.map((function(t){return fs(e,t,n)})),i=t.drmInfo?[t.drmInfo]:[];return t.drmInfo&&r.forEach((function(e){e.variants.forEach((function(e){e.drmInfos=i}))})),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,periods:r}}(s,o));case 2:return D(n),S(n,i.destroy(),7);case 7:k(n,0)}}))}))},r.stop=function(){return Promise.resolve()},r.update=function(){},r.onExpirationUpdated=function(e,t){var n=this;return h((function r(){var i,a,o,s,u,l,c,d;return x(r,(function(r){switch(r.s){case 1:return i=n.g,a=new Jo,A(r,2,3),S(r,a.init(),5);case 5:return S(r,Zo(a,i.Ea(),i.ja()),6);case 6:return S(r,(o=r.B).getManifests([i.key()]),7);case 7:if(s=r.B,u=s[0],l=u.sessionIds.includes(e),c=null==u.expiration||u.expiration>t,!l||!c){r.I(3);break}return q.debug("Updating expiration for stored content"),S(r,o.updateManifestExpiration(i.key(),t),3);case 3:return D(r),S(r,a.destroy(),10);case 10:k(r,0);break;case 2:d=C(r),q.error("There was an error updating",i,d),r.I(3)}}))}))},yi.Qb("application/x-offline-manifest",ms),Y("shaka.offline.OfflineScheme",gs),gs.m=function(e){return Oe(e={uri:e,Bd:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},gs.o=function(e,t){var n=new Jo;return Oe(void 0).ca((function(){return n.init()})).ca((function(){return Zo(n,t.Ea(),t.ja())})).ca((function(e){return e.getSegments([t.key()])})).ca((function(e){return{uri:t,Bd:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))},qe("offline",gs),_s.prototype.destroy=function(){var e=this;return h((function t(){return x(t,(function(t){switch(t.s){case 1:return e.u=!1,e.h&&e.h.abort(),Ts(e),S(t,e.A,2);case 2:e.g&&e.g.Da.kb();for(var n=d(e.l),r=n.next();!r.done;r=n.next())r.value.Da.kb();e.g=null,e.l=[],e.m=null,w(t)}}))}))},Y("shaka.text.SimpleTextDisplayer",Es),Es.prototype.remove=function(e,t){return!!this.g&&(ws(this.g,(function(n){return n.startTime<t&&n.endTime>e})),!0)},Es.prototype.remove=Es.prototype.remove,Es.prototype.append=function(e){var t=Ss,n=e.map((function(e){if(e.nestedCues.length){var t=e.nestedCues.map((function(e){return e.spacer?"\n":e.payload+" "})).join("").replace(/ $/m,"");(e=e.clone()).nestedCues=[],e.payload=t}return e})),r=[];e=this.g.cues?Array.from(this.g.cues):[];for(var i={},a=(n=d(n)).next();!a.done;i={Fb:i.Fb},a=n.next())i.Fb=a.value,e.some(function(e){return function(t){return t.startTime==e.Fb.startTime&&t.endTime==e.Fb.endTime&&t.text==e.Fb.payload}}(i))||(a=t(i.Fb))&&r.push(a);r.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?r.indexOf(t)-r.indexOf(e):r.indexOf(e)-r.indexOf(t)})).forEach(function(e){this.g.addCue(e)}.bind(this))},Es.prototype.append=Es.prototype.append,Es.prototype.destroy=function(){return this.g&&ws(this.g,(function(){return!0})),this.g=null,Promise.resolve()},Es.prototype.destroy=Es.prototype.destroy,Es.prototype.isTextVisible=function(){return"showing"==this.g.mode},Es.prototype.isTextVisible=Es.prototype.isTextVisible,Es.prototype.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},Es.prototype.setTextVisibility=Es.prototype.setTextVisibility,Y("shaka.util.ConfigUtils.mergeConfigObjects",As),Y("shaka.util.ConfigUtils.convertToConfigObject",Ms),Y("shaka.util.PlayerConfiguration",Ls),Ls.mergeConfigObjects=Ds,H(xs,Fe),Y("shaka.Player",xs),xs.prototype.destroy=function(){var e=this;return h((function t(){var n;return x(t,(function(t){switch(t.s){case 1:return e.o==Su?t.return():(e.o=Su,n=bs(e.Ya,(function(){return{node:e.P,payload:{Ia:null,D:null,mimeType:null,startTime:null,Rd:null,uri:null},gb:!1}})),S(t,new Promise((function(t){n.Kb=function(){q.info("Preparing to destroy walker...")},n.Cc=function(){t(),e.dispatchEvent(new Ne("loaded"))},n.kb=function(){t()},n.onError=function(){t()},n.Ec=function(){t()}})),2));case 2:return S(t,e.Ya.destroy(),3);case 3:if(e.l&&(e.l.release(),e.l=null),e.Uc=null,e.u=null,e.h=null,!e.X){t.I(0);break}return S(t,e.X.destroy(),5);case 5:e.X=null,w(t)}}))}))},xs.prototype.destroy=xs.prototype.destroy,xs.version="v2.5.23";var Ns=["2","5"];Kn=new function(e){this.g=e,this.i=Vn,this.h=Gn}(new Yn(Number(Ns[0]),Number(Ns[1])));var js=["output-restricted","internal-error"],Fs={};function Us(e,t){return h((function n(){var r;return x(n,(function(n){switch(n.s){case 1:return e.o!=Su&&(e.o=wu),r=e.Wc.map((function(e){return e()})),e.Wc=[],S(n,Promise.all(r),2);case 2:if(e.dispatchEvent(new Ne("unloading")),t.Ia=null,t.mimeType=null,t.startTime=null,t.uri=null,t.D&&(e.l.ta(t.D,"loadedmetadata"),e.l.ta(t.D,"playing"),e.l.ta(t.D,"pause"),e.l.ta(t.D,"ended"),e.l.ta(t.D,"ratechange")),e.wb&&(e.wb.release(),e.wb=null),e.ic&&(e.ic.stop(),e.ic=null),!e.C){n.I(3);break}return S(n,e.C.stop(),4);case 4:e.C=null;case 3:if(!e.u){n.I(5);break}return S(n,e.u.stop(),5);case 5:if(!e.j){n.I(7);break}return S(n,e.j.destroy(),8);case 8:e.j=null;case 7:if(e.J&&(e.J.release(),e.J=null),e.A&&(e.A.release(),e.A=null),!e.M){n.I(9);break}return S(n,e.M.destroy(),10);case 10:e.M=null;case 9:if(!t.D||!t.D.src){n.I(11);break}return S(n,new Promise((function(e){return new Le(e).V(.1)})),12);case 12:t.D.removeAttribute("src"),t.D.load();case 11:if(!e.m){n.I(13);break}return S(n,e.m.destroy(),14);case 14:e.m=null;case 13:e.Z.g.clear(),e.Tb=null,e.L=null,e.lc.clear(),e.i=null,e.F=null,e.fd=null,e.yb=!0,$s(e),w(n)}}))}))}function Bs(e,t){return new bt(t,e.h.drm.updateExpirationTime)}function Ys(e,t){e.L=new Aa,e.L.g=La,Ma(e.L,t,Math.min(.5,t/2)),$s(e),e.ic=new Le((function(){Hs(e)})).Oa(.25)}function Hs(e){switch(e.o){case Mu:var t=!!e.g.ended||Kt(e.g.buffered)>=e.g.duration-1;break;case Au:e:if(e.g.ended||En(e.M))t=!0;else{if(e.i.presentationTimeline.aa()){var n=e.i.presentationTimeline.Db();if(Kt(e.g.buffered)>=n){t=!0;break e}}t=!1}break;default:t=!1}var r=qt(e.g.buffered,e.g.currentTime),i=t,a=(n=e.L).h.get(n.g);t=n.g,r=i||r>=a?Ca:La,n.g=r,t!=r&&$s(e)}function Vs(e){if(e.C){var t=Ue(e.h.manifest);e.g&&"AUDIO"===e.g.nodeName&&(t.disableVideo=!0),e.C.configure(t)}if(e.m&&e.m.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{e.i.periods.forEach(e.Xc.bind(e))}catch(t){e.Va(t)}var n=so(e.j),r=uo(e.j);t=yu(e),n=Fn.ie(n,r,t.variants),e.u&&n&&n.allowedByApplication&&n.allowedByKeySystem?eu(e,t.variants):(q.debug("Choosing new streams after changing configuration"),tu(e,t))}if(e.M&&(t=e.h.textDisplayFactory,e.fd!=t)){n=new t;var i=(r=e.M).l;r.l=n,i&&(n.setTextVisibility(i.isTextVisible()),i.destroy()),r.g&&(r.g.i=n),e.fd=t,e.j&&((n=(t=e.j).h.get("text"))&&po(t,n.stream,!0,0,!0))}e.u&&(e.u.configure(e.h.abr),e.h.abr.enabled&&!e.yb?e.u.enable():e.u.disable(),uu(e)),e.L&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),Ma(e.L,t,Math.min(.5,t/2)))}function Gs(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function Ks(e,t,n,r){va(e.Z,t).variant=n,(e=e.F.i).i!=n&&(e.i=n,e.g.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:r,bandwidth:n.bandwidth}))}function Ws(e,t,n,r){ga(e.Z,t,n),(e=e.F.i).h!=n&&(e.h=n,e.g.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:r,bandwidth:null}))}function qs(e){var t=Cs();return t.streaming.failureCallback=function(t){e.aa()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,q.v("Live streaming error.  Retrying automatically..."),e.Id())},t.textDisplayFactory=function(){return new Es(e.g)},t}function zs(e,t){var n=e.j?so(e.j):null,r=e.j?uo(e.j):null;if(t.forEach(Fn.filterNewPeriod.bind(null,e.m,n,r)),0==(n=function(e,t){var n=0;return e.forEach((function(e){n+=t(e)?1:0})),n}(t,(function(e){return e.variants.some(Fn.Gb)}))))throw new z(2,4,4032);if(n<t.length)throw new z(2,4,4011);t.forEach(function(e){Fn.Xd(e.variants,this.h.restrictions,this.mc)&&this.j&&yu(this)==e&&iu(this),hu(this,e.variants)}.bind(e))}function Xs(e,t,n,r){return n=void 0!==n&&n,r=void 0===r?0:r,e.yb?(e.wa=t,e.qe=n,e.oe=r,!0):((t=ho(e.j,t,n,r))&&au(e),t)}function Qs(e,t){if(e.yb)return e.va=t,!0;var n=po(e.j,t,!0,0,!1);return n&&ou(e),n}function $s(e){var t=e.jd();if(e.F&&e.L&&e.A){var n=e.J;n.j=t,Ba(n),Zs(e)}e.dispatchEvent(new Ne("buffering",{buffering:t}))}function Js(e){var t=e.g.playbackRate;0!=t&&e.J.set(t)}function Zs(e){if(e.F&&e.L){var t=e.F.g;e.L.g==La?Ps(t,"buffering"):e.g.paused?Ps(t,"paused"):e.g.ended?Ps(t,"ended"):Ps(t,"playing")}}function eu(e,t){try{hu(e,t)}catch(t){return e.Va(t),null}var n=t.filter((function(e){return Fn.Gb(e)}));return n=e.tb.create(n),e.u.setVariants(Array.from(n.values())),e.u.chooseVariant()}function tu(e,t){var n=nu(e,t,!1),r=Fn.Wb(t.textStreams,e.ua,e.Xa)[0]||null,i=!1;r&&(e.h.streaming.alwaysStreamText||e.zc())&&(Ws(e,t,r,!0),i=Qs(e,r)),(n||i)&&ru(e)}function nu(e,t,n){n=void 0===n||n;var r=eu(e,t.variants),i=!1;return r&&(Ks(e,t,r,!0),i=Xs(e,r,!0)),n&&i&&ru(e),i}function ru(e){pu(e,new Ne("adaptation"))}function iu(e){pu(e,new Ne("trackschanged"))}function au(e){pu(e,new Ne("variantchanged"))}function ou(e){pu(e,new Ne("textchanged"))}function su(e){pu(e,new Ne("texttrackvisibility"))}function uu(e){pu(e,new Ne("abrstatuschanged",{Zg:e.h.abr.enabled}))}function lu(e,t,n){e.dispatchEvent(new Ne(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function cu(e){if(!e.g.error)return null;var t=e.g.error.code;if(1==t)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new z(2,3,3016,t,n,e.g.error.message)}function du(e,t){if(e.j){var n=yu(e),r=!1,i=Object.keys(t);0==i.length&&q.v("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var a=1==i.length&&"00"==i[0];a&&q.v("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),i.length&&e.i.periods.forEach((function(e){e.variants.forEach((function(e){Fn.Kf(e).forEach((function(n){var i=e.allowedByKeySystem;n.keyId&&(n=t[a?"00":n.keyId],e.allowedByKeySystem=!!n&&!js.includes(n)),i!=e.allowedByKeySystem&&(r=!0)}))}))})),i=so(e.j);var o=uo(e.j);(i=Fn.ie(i,o,n.variants))&&!i.allowedByKeySystem&&(q.debug("Choosing new variants after key status changed"),nu(e,n)),r&&(iu(e),eu(e,n.variants))}}function fu(e,t,n){e.C&&e.C.onExpirationUpdated&&e.C.onExpirationUpdated(t,n),e.dispatchEvent(new Ne("expirationupdated"))}function hu(e,t){var n=e.m?ot(e.m.da):{},r=Object.keys(n);r=r.length&&"00"==r[0];for(var i=!1,a=!1,o=[],s=[],u=d(t),l=u.next();!l.done;l=u.next()){var c=[];(l=l.value).audio&&c.push(l.audio),l.video&&c.push(l.video);for(var f=(c=d(c)).next();!f.done;f=c.next())if((f=f.value).keyId){var h=n[r?"00":f.keyId];h?js.includes(h)&&(s.includes(h)||s.push(h)):o.includes(f.keyId)||o.push(f.keyId)}l.allowedByApplication?l.allowedByKeySystem&&(i=!0):a=!0}if(!i)throw new z(2,4,4012,{hasAppRestrictions:a,missingKeys:o,restrictedKeyStatuses:s})}function pu(e,t){h((function n(){return x(n,(function(n){switch(n.s){case 1:return S(n,Promise.resolve(),2);case 2:e.o!=Su&&e.dispatchEvent(t),w(n)}}))}))}function mu(e){for(var t=new Set,n=(e=d(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(Rn(n.language)):t.add("und");return t}function gu(e){for(var t=new Map,n=(e=d(e)).next();!n.done;n=e.next()){var r=n.value;n="und";var i=[];for(r.language&&(n=Rn(r.language)),(i="variant"==r.type?r.audioRoles:r.roles)&&i.length||(i=[""]),t.has(n)||t.set(n,new Set),i=(r=d(i)).next();!i.done;i=r.next())i=i.value,t.get(n).add(i)}var a=[];return t.forEach((function(e,t){for(var n=d(e),r=n.next();!r.done;r=n.next())a.push({language:t,role:r.value})})),a}function vu(e){return null==(e=yu(e))?[]:e.variants.filter((function(e){return Fn.Gb(e)}))}function yu(e){for(var t=e.A.l(),n=null,r=(e=d(e.i.periods)).next();!r.done;r=e.next())(r=r.value).startTime<=t&&(n=r);return n}function _u(e){var t=yu(e);return va(e.Z,t).variant}function bu(){return new z(2,7,7e3)}function Tu(e,t,n,r,i,a){return r==e&&i.D==a.D&&i.uri==a.uri&&i.mimeType==a.mimeType&&i.Ia==a.Ia?t:n}function Eu(e){return new Promise((function(t,n){e.kb=function(){return n(bu())},e.Cc=function(){return t()},e.onError=function(e){return n(e)},e.Ec=function(){return n(bu())}}))}xs.registerSupportPlugin=function(e,t){Fs[e]=t},xs.isBrowserSupported=function(){if(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach))return!1;var t=mt();return!(t&&12>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!dt()||ft("application/x-mpegurl"))},xs.probeSupport=function(){return Rt().then((function(e){for(var t=yi.ng(),n={},r=d('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),i=r.next();!i.done;i=r.next()){n[i=i.value]=dt()?!!mn(i)||(MediaSource.isTypeSupported(i)||we(i)):ft(i);var a=i.split(";")[0];n[a]=n[a]||n[i]}for(var o in e={manifest:t,media:n,drm:e},Fs)e[o]=Fs[o]();return e}))},xs.prototype.Ub=function(e,t){if(t=void 0===t||t,this.o==Su)return Promise.reject(bu());var n={Ia:null,D:null,mimeType:null,startTime:null,Rd:null,uri:null};n.D=e,dt()||(t=!1);var r=t?this.vb:this.da,i=bs(this.Ya,(function(){return{node:r,payload:n,gb:!1}}));return i.Kb=function(){return q.info("Starting attach...")},Eu(i)},xs.prototype.attach=xs.prototype.Ub,xs.prototype.detach=function(){var e=this;if(this.o==Su)return Promise.reject(bu());var t=bs(this.Ya,(function(){return{node:e.P,payload:{Ia:null,D:null,mimeType:null,startTime:null,Rd:null,uri:null},gb:!1}}));return t.Kb=function(){return q.info("Starting detach...")},Eu(t)},xs.prototype.detach=xs.prototype.detach,xs.prototype.Ud=function(e){var t=this;if(e=void 0===e||e,this.o==Su)return Promise.reject(bu());dt()||(e=!1);var n={Ia:null,D:null,mimeType:null,startTime:null,Rd:null,uri:null},r=bs(this.Ya,(function(r){var i=r.D&&e?t.vb:r.D?t.da:t.P;return n.D=r.D,{node:i,payload:n,gb:!1}}));return r.Kb=function(){return q.info("Starting unload...")},Eu(r)},xs.prototype.unload=xs.prototype.Ud,xs.prototype.load=function(e,t,n){if(this.o==Su)return Promise.reject(bu());this.dispatchEvent(new Ne("loading"));var r={Ia:null,D:null,mimeType:null,startTime:null,Rd:null,uri:null};r.uri=e,r.Rd=Date.now()/1e3,n&&"string"!=typeof n&&(Hn("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),r.Ia=function(){return new n}),n&&"string"==typeof n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var i=function(e,t){if(t.Ia)return!1;if(!dt())return!0;var n=t.mimeType,r=t.uri||"";return n||(n={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[yi.getExtension(r)]),!!n&&(""!=(t.D||vt()).canPlayType(n)&&(!yi.isSupported(r,n)||pt()&&e.h.streaming.useNativeHlsOnSafari))}(this,r)?this.xb:this.ea,a=bs(this.Ya,(function(e){return null==e.D?null:(r.D=e.D,{node:i,payload:r,gb:!0})}));return a.Kb=function(){return q.info("Starting load of "+e+"...")},new Promise((function(e,t){a.Ec=function(){return t(new z(2,7,7002))},a.Cc=function(){return e()},a.kb=function(){return t(bu())},a.onError=function(e){return t(e)}}))},xs.prototype.load=xs.prototype.load,xs.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ms(e,t));var n=Ds(this.h,e,qs(this));return Vs(this),n},xs.prototype.configure=xs.prototype.configure,xs.prototype.getConfiguration=function(){var e=qs(this);return Ds(e,this.h,qs(this)),e},xs.prototype.getConfiguration=xs.prototype.getConfiguration,xs.prototype.vg=function(){for(var e in this.h)delete this.h[e];Ds(this.h,qs(this),qs(this)),Vs(this)},xs.prototype.resetConfiguration=xs.prototype.vg,xs.prototype.tf=function(){return this.o},xs.prototype.getLoadMode=xs.prototype.tf,xs.prototype.yf=function(){return this.g},xs.prototype.getMediaElement=xs.prototype.yf,xs.prototype.Yb=function(){return this.X},xs.prototype.getNetworkingEngine=xs.prototype.Yb,xs.prototype.tc=function(){return this.Tb},xs.prototype.getAssetUri=xs.prototype.tc,xs.prototype.wf=function(){return Hn("getManifestUri",'Please use "getAssetUri" instead.'),this.tc()},xs.prototype.getManifestUri=xs.prototype.wf,xs.prototype.aa=function(){return this.i?this.i.presentationTimeline.aa():!(!this.g||!this.g.src)&&1/0==this.g.duration},xs.prototype.isLive=xs.prototype.aa,xs.prototype.ib=function(){return!!this.i&&this.i.presentationTimeline.ib()},xs.prototype.isInProgress=xs.prototype.ib,xs.prototype.Qf=function(){if(this.i){if(!this.i.periods.length)return!1;var e=this.i.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.g||!this.g.src)&&(this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight)},xs.prototype.isAudioOnly=xs.prototype.Qf,xs.prototype.He=function(){if(this.i){var e=this.i.presentationTimeline;return{start:e.Cb(),end:e.Ka()}}return this.g&&this.g.src&&(e=this.g.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},xs.prototype.seekRange=xs.prototype.He,xs.prototype.keySystem=function(){return Mt(this.drmInfo())},xs.prototype.keySystem=xs.prototype.keySystem,xs.prototype.drmInfo=function(){return this.m?this.m.g:null},xs.prototype.drmInfo=xs.prototype.drmInfo,xs.prototype.Xb=function(){return this.m?this.m.Xb():1/0},xs.prototype.getExpiration=xs.prototype.Xb,xs.prototype.jd=function(){return!!this.L&&this.L.g==La},xs.prototype.isBuffering=xs.prototype.jd,xs.prototype.Cf=function(){if(this.J){var e=this.J;e=e.j?0:e.i}else e=0;return e},xs.prototype.getPlaybackRate=xs.prototype.Cf,xs.prototype.Mg=function(e){0==e?q.ba("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.J&&this.J.set(e),this.o==Au&&fo(this.j,1<Math.abs(e)))},xs.prototype.trickPlay=xs.prototype.Mg,xs.prototype.$e=function(){var e=this.J.vc();this.o==Mu&&this.J.set(e),this.o==Au&&(this.J.set(e),fo(this.j,!1))},xs.prototype.cancelTrickPlay=xs.prototype.$e,xs.prototype.ed=function(){if(this.i&&this.A){for(var e=_u(this),t=[],n=d(vu(this)),r=n.next();!r.done;r=n.next()){r=r.value;var i=Fn.Oc(r);i.active=r==e,t.push(i)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map((function(e){return Fn.je(e)})):[]},xs.prototype.getVariantTracks=xs.prototype.ed,xs.prototype.Eb=function(){if(this.i&&this.A){for(var e=function(e){var t=yu(e);if(null==t)return null;if(!va(e.Z,t).text){var n=Fn.Wb(t.textStreams,e.ua,e.Xa);n.length&&ga(e.Z,t,n[0])}return va(e.Z,t).text}(this),t=[],n=d(function(e){var t=yu(e);return null==t?[]:t.textStreams.filter((function(t){return!e.lc.has(t)}))}(this)),r=n.next();!r.done;r=n.next()){r=r.value;var i=Fn.Kc(r);i.active=r==e,t.push(i)}return t}return this.g&&this.g.src&&this.g.textTracks?Gs(this).map((function(e){return Fn.Of(e)})):[]},xs.prototype.getTextTracks=xs.prototype.Eb,xs.prototype.Ld=function(e){if(this.i&&this.j){var t=yu(this),n=t.textStreams.find((function(t){return t.id==e.id}));n?(Ws(this,t,n,!1),Qs(this,n),this.ua=n.language):q.error("No stream with id",e.id)}else if(this.g&&this.g.src&&this.g.textTracks){for(n=(t=d(t=Gs(this))).next();!n.done;n=t.next())n=n.value,Fn.gd(n)==e.id?n.mode=this.ub?"showing":"hidden":n.mode="disabled";ou(this)}},xs.prototype.selectTextTrack=xs.prototype.Ld,xs.prototype.xg=function(){Hn("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var e=this.Eb().filter((function(e){return"application/cea-608"==e.mimeType}));0<e.length?this.Ld(e[0]):q.v("Unable to find the text track embedded in the video.")},xs.prototype.selectEmbeddedTextTrack=xs.prototype.xg,xs.prototype.Rg=function(){Hn("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var e=this.Eb().filter((function(e){return e.active}))[0];return!!e&&"application/cea-608"==e.mimeType},xs.prototype.usingEmbeddedTextTrack=xs.prototype.Rg,xs.prototype.Ie=function(e,t,n){if(n=void 0===n?0:n,this.i&&this.j){var r=yu(this);this.h.abr.enabled&&q.ba("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=r.variants.find((function(t){return t.id==e.id}));i?Fn.Gb(i)?(Ks(this,r,i,!1),Xs(this,i,t,n),this.tb=new Sa(i),eu(this,r.variants)):q.error("Unable to switch to restricted track",e.id):q.error("No variant with id",e.id)}else if(this.g&&this.g.audioTracks){for(n=(t=d(t=Array.from(this.g.audioTracks))).next();!n.done;n=t.next())n=n.value,Fn.gd(n)==e.id&&(n.enabled=!0);au(this)}},xs.prototype.selectVariantTrack=xs.prototype.Ie,xs.prototype.nf=function(){return gu(this.ed())},xs.prototype.getAudioLanguagesAndRoles=xs.prototype.nf,xs.prototype.Jf=function(){return gu(this.Eb())},xs.prototype.getTextLanguagesAndRoles=xs.prototype.Jf,xs.prototype.mf=function(){return Array.from(mu(this.ed()))},xs.prototype.getAudioLanguages=xs.prototype.mf,xs.prototype.If=function(){return Array.from(mu(this.Eb()))},xs.prototype.getTextLanguages=xs.prototype.If,xs.prototype.Jd=function(e,t){if(this.i&&this.A){var n=yu(this);if(this.tb=new wa(e,t||"",0,""),!this.h.abr.enabled){var r=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},i=yu(this)||this.i.periods[0],a=va(this.Z,i).variant,o=this.tb.create(i.variants);i=null;for(var s=(o=d(o.values())).next();!s.done;s=o.next())s=s.value,(!i||r(i,a)>r(s,a))&&(i=s);if(i)return n=Fn.Oc(i),void this.Ie(n,!0)}nu(this,n)}else if(this.g&&this.g.audioTracks){for(i=Array.from(this.g.audioTracks),n=Rn(e),a=r=null,o=(i=d(i)).next();!o.done;o=i.next())o=o.value,Rn((s=Fn.je(o)).language)==n&&(r=o,t?s.roles.includes(t)&&(a=o):0==s.roles.length&&(a=o));a?(a.enabled=!0,au(this)):r&&(r.enabled=!0,au(this))}},xs.prototype.selectAudioLanguage=xs.prototype.Jd,xs.prototype.Kd=function(e,t){if(this.i&&this.A){var n=yu(this);this.ua=e,this.Xa=t||"";var r=Fn.Wb(n.textStreams,this.ua,this.Xa)[0]||null;r&&(Ws(this,n,r,!1),(this.h.streaming.alwaysStreamText||this.zc())&&Qs(this,r))}else{var i=Rn(e);(n=this.Eb().filter((function(e){return Rn(e.language)==i&&(!t||e.roles.includes(t))}))[0])&&this.Ld(n)}},xs.prototype.selectTextLanguage=xs.prototype.Kd,xs.prototype.yg=function(e){if(this.i&&this.A){for(var t=yu(this),n=null,r=d(vu(this)),i=r.next();!i.done;i=r.next())if((i=i.value).audio.label==e){n=i;break}null==n?q.v("No variants were found with label: "+e+". Ignoring the request to switch."):(this.tb=new wa(n.language,"",0,e),nu(this,t))}},xs.prototype.selectVariantsByLabel=xs.prototype.yg,xs.prototype.zc=function(){var e=this.ub;return this.M?this.M.l.isTextVisible():this.g&&this.g.src&&this.g.textTracks?Gs(this).some((function(e){return"showing"==e.mode})):e},xs.prototype.isTextTrackVisible=xs.prototype.zc,xs.prototype.Bg=function(e){var t=this;return h((function n(){var r,i,a,o;return x(n,(function(n){switch(n.s){case 1:if(t.ub==(r=!!e))return n.return();if(t.ub=r,t.o!=Au){if(t.g&&t.g.src&&t.g.textTracks)for(var s=d(Gs(t)),u=s.next();!u.done;u=s.next())"disabled"!=(i=u.value).mode&&(i.mode=r?"showing":"hidden");n.I(2);break}if(t.M.l.setTextVisibility(r),t.h.streaming.alwaysStreamText){n.I(2);break}if(!r){!function(e){e.L=!0;var t=e.h.get("text");t&&(Io(t),Oo(t).catch((function(){})),e.h.delete("text"))}(t.j),n.I(2);break}if(lo(t.j,"text")){n.I(2);break}if(a=yu(t),!(0<(o=Fn.Wb(a.textStreams,t.ua,t.Xa)).length)){n.I(2);break}return S(n,co(t.j,o[0]),2);case 2:su(t),w(n)}}))}))},xs.prototype.setTextTrackVisibility=xs.prototype.Bg,xs.prototype.Ef=function(){if(!this.aa())return q.v("getPlayheadTimeAsDate is for live streams!"),null;var e=this.Ya.j,t=0;if(this.A)t=this.A.l();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.j+this.g.currentTime)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?(q.v("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(e.getTime()+1e3*t)):(q.v("No way to get playhead time as Date!"),null)},xs.prototype.getPlayheadTimeAsDate=xs.prototype.Ef,xs.prototype.Gf=function(){if(!this.aa())return q.v("getPresentationStartTimeAsDate is for live streams!"),null;if(this.i)return new Date(1e3*this.i.presentationTimeline.j);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?(q.v("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):e}return q.v("No way to get presentation start time as Date!"),null},xs.prototype.getPresentationStartTimeAsDate=xs.prototype.Gf,xs.prototype.bd=function(){var e={total:[],audio:[],video:[],text:[]};return this.o==Mu&&(e.total=zt(this.g.buffered)),this.o==Au&&this.M.bd(e),e},xs.prototype.getBufferedInfo=xs.prototype.bd,xs.prototype.getStats=function(){if(this.o!=Au&&this.o!=Mu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,switchHistory:[],stateHistory:[]};Zs(this);var e=this.g;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.F,n=Number(e.totalVideoFrames);t.A=Number(e.droppedVideoFrames),t.u=n,this.F.o=Number(e.corruptedVideoFrames)}this.m?e=(e=this.m).P?e.P:NaN:e=NaN,this.F.m=e,this.o==Au&&((e=_u(this))&&(this.F.C=e.bandwidth),e&&e.video&&(t=this.F,n=e.video.height||NaN,t.F=e.video.width||NaN,t.l=n),e=this.u.getBandwidthEstimate(),this.F.j=e);var r=this.F;e=r.F,t=r.l,n=r.C;for(var i=r.u,a=r.A,o=r.o,s=r.j,u=r.h,l=Is(r.g,"playing"),c=Is(r.g,"paused"),f=Is(r.g,"buffering"),h=r.m,p=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=d(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}(r.g),m=[],g=(r=d(r.i.g)).next();!g.done;g=r.next())g=g.value,m.push({timestamp:g.timestamp,id:g.id,type:g.type,fromAdaptation:g.fromAdaptation,bandwidth:g.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:i,droppedFrames:a,corruptedFrames:o,estimatedBandwidth:s,loadLatency:u,playTime:l,pauseTime:c,bufferingTime:f,licenseTime:h,stateHistory:p,switchHistory:m}},xs.prototype.getStats=xs.prototype.getStats,xs.prototype.addTextTrack=function(e,t,n,r,i,a){var o=this;return h((function s(){var u,l,c,d,f,h,p,m,g;return x(s,(function(s){switch(s.s){case 1:if(o.o==Mu)throw q.error("Cannot add text when loaded with src="),Error("State error!");if(o.o!=Au)throw q.error("Must call load() and wait for it to resolve before adding text tracks."),Error("State error!");if(u=yu(o),l=fe,c=o.i.periods.indexOf(u),f=(d=c+1)>=o.i.periods.length?o.i.presentationTimeline.ha():o.i.periods[d].startTime,1/0==(h=f-u.startTime))throw new z(1,4,4033);return p=new ei(1,0,h,(function(){return[e]}),0,null),m={id:o.re++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1==e?p:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:r,codecs:i||"",kind:n,encrypted:!1,keyId:null,language:t,label:a||null,type:l.za,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},o.lc.add(m),u.textStreams.push(m),S(s,co(o.j,m),2);case 2:return(g=lo(o.j,"text"))&&ga(o.Z,u,g),o.lc.delete(m),q.debug("Choosing new streams after adding a text stream"),tu(o,u),iu(o),s.return(Fn.Kc(m))}}))}))},xs.prototype.addTextTrack=xs.prototype.addTextTrack,xs.prototype.Nd=function(e,t){this.mc.width=e,this.mc.height=t},xs.prototype.setMaxHardwareResolution=xs.prototype.Nd,xs.prototype.Id=function(){if(this.o==Au){var e=this.j;if(e.j)q.error("Unable to retry after StreamingEngine is destroyed!"),e=!1;else if(e.A)q.error("Unable to retry after StreamingEngine encountered a fatal error!"),e=!1;else{for(var t=d(e.h.values()),n=t.next();!n.done;n=t.next()){var r=xo(n=n.value);n.ac&&(q.info(r,"Retrying after failure..."),n.ac=!1,Po(e,n,.1))}e=!0}}else e=!1;return e},xs.prototype.retryStreaming=xs.prototype.Id,xs.prototype.uf=function(){return this.i},xs.prototype.getManifest=xs.prototype.uf,xs.prototype.vf=function(){return this.C?this.C.constructor:null},xs.prototype.getManifestParserFactory=xs.prototype.vf,(r=xs.prototype).Xc=function(e){var t=this.j?so(this.j):null,n=this.j?uo(this.j):null;if(Fn.filterNewPeriod(this.m,t,n,e),!(t=e.variants).some(Fn.Gb))throw new z(2,4,4011);if(hu(this,e.variants),Fn.Xd(t,this.h.restrictions,this.mc)&&this.j&&yu(this)==e&&iu(this),(e=this.m?this.m.g:null)&&this.m.o)for(n=(t=d(t)).next();!n.done;n=t.next())for(var r=(n=d(n.value.drmInfos)).next();!r.done;r=n.next())if((r=r.value).keySystem==e.keySystem)for(var i=(r=d(r.initData||[])).next();!i.done;i=r.next())i=i.value,At(this.m,i.initDataType,i.initData)},r.Vf=function(e){q.debug("onChooseStreams_",e);try{q.O("onChooseStreams_, choosing variant from ",e.variants),q.O("onChooseStreams_, choosing text from ",e.textStreams),this.yb=!0,this.u.disable(),uu(this),q.debug("Choosing new streams after period changed");var t=eu(this,e.variants),n=Fn.Wb(e.textStreams,this.ua,this.Xa)[0]||null;this.wa&&(e.variants.includes(this.wa)&&(t=this.wa),this.wa=null),this.va&&(e.textStreams.includes(this.va)&&(n=this.va),this.va=null),t&&Ks(this,e,t,!0),n&&Ws(this,e,n,!0);var r=this.j,i=r.h.get("video");if(i)var a=r.i.periods[i.oa];else{var o=r.h.get("audio");a=o?r.i.periods[o.oa]:null}var s=t?t.audio:null;if(!a&&n){var u;if(u=s){e=n;var l=Rn(this.h.preferredTextLanguage),c=Rn(s.language),d=Rn(e.language);u=In(d,l)&&!In(c,d)}u&&(this.ub=!0),this.ub&&this.M.l.setTextVisibility(!0),su(this)}var f=this.h.streaming.alwaysStreamText||this.zc()?{variant:t,text:n}:{variant:t,text:null};return q.O("onChooseStreams_, chose variant ",f.variant),q.O("onChooseStreams_, chose text ",f.text),f}catch(e){return this.Va(e),{variant:null,text:null}}},r.Ze=function(){q.debug("canSwitch_"),this.yb=!1,this.h.abr.enabled&&(this.u.enable(),uu(this)),this.wa&&(ho(this.j,this.wa,this.qe,this.oe),au(this),this.wa=null),this.va&&(po(this.j,this.va,!0,0,!1),ou(this),this.va=null)},r.$f=function(){this.C&&this.C.update&&this.C.update()},r.eg=function(){this.A&&this.A.C()},r.Va=function(e){if(this.o!=Su){var t=new Ne("error",{detail:e});this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)}};var Su=0,wu=1,Au=2,Mu=3;function Lu(e,t){var n=fs(new ds(e.Ea(),e.ja()),t.periods[0],new _i(null,0)),r=t.appMetadata||{};return n=Cu(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r}}function Cu(e){for(var t=[],n=Fn.Bf(e.variants),r=(n=d(n)).next();!r.done;r=n.next())t.push(Fn.Oc(r.value));for(n=(e=d(e.textStreams)).next();!n.done;n=e.next())t.push(Fn.Kc(n.value));return t}function Du(){this.g={}}function ku(e,t){var n=t.audio,r=t.video;if(n&&!r&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&r&&(e.g[r.id]=r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,a=r.bandwidth||t.bandwidth-i;0>=a&&(q.v("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),a=t.bandwidth),e.g[n.id]=i,e.g[r.id]=a}}function Pu(e,t){var n=e.g[t];return null==n&&(n=0,q.error("Asking for bitrate of stream not given to the estimator")),0==n&&q.v("Using bitrate of 0, this stream won't affect progress"),n}function Iu(e){this.g=!1,this.h=new pe,this.i=e}function Ou(e){var t=new xu;e.periods.forEach((function(e,n){var r=ju(e.variants);if(0==n)for(var i=(r=d(r.g)).next();!i.done;i=r.next())t.add(i.value);else!function(e,t){e.g=e.g.filter((function(e){return Nu(t,e)}))}(t,r)}));for(var n=(e=d(e.periods)).next();!n.done;n=e.next())(n=n.value).variants=n.variants.filter((function(e){return Nu(t,new Ru(e))}))}function Ru(e){var t=e.audio;e=e.video,this.h=t?t.mimeType:null,this.g=t?t.codecs.split(".")[0]:null,this.j=e?e.mimeType:null,this.i=e?e.codecs.split(".")[0]:null}function xu(){this.g=[]}function Nu(e,t){return e.g.some((function(e){return t.h==e.h&&t.g==e.g&&t.j==e.j&&t.i==e.i}))}function ju(e){for(var t=new xu,n=(e=d(e)).next();!n.done;n=e.next())t.add(new Ru(n.value));return t}function Fu(e){var t=this;if(e&&e.constructor!=xs)throw new z(2,9,9008);this.h=this.g=null,e?(this.g=e.h,this.h=e.Yb()):(this.g=Cs(),this.h=new Ke),this.j=!1,this.i=[],this.l=[];var n=!e;this.m=new Iu((function(){return h((function e(){var r;return x(e,(function(e){switch(e.s){case 1:return r=function(){},S(e,Promise.all(t.l.map((function(e){return e.then(r,r)}))),2);case 2:if(!n){e.I(3);break}return S(e,t.h.destroy(),3);case 3:t.g=null,t.h=null,w(e)}}))}))}))}function Uu(){if(dt())e:{for(var e=d(ts.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Bu(e,t){for(var n=[],r=d(e.periods),i=r.next();!i.done;i=r.next())for(var a=(i=d(i.value.streams)).next();!a.done;a=i.next())a=a.value,t&&"video"==a.contentType?n.push({contentType:st(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=a.contentType||n.push({contentType:st(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function Yu(e,t,n){return h((function r(){return x(r,(function(r){switch(r.s){case 1:return S(r,function(e,t,n,r){return h((function i(){var a,o,s;return x(i,(function(i){switch(i.s){case 1:return r.drmInfo?(a=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new z(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),o=r.sessionIds.map((function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:Bu(r,!1),videoCapabilities:Bu(r,!0)}})),S(i,vs(t,e,o),2)):i.return();case 2:return s=i.B,S(i,a.remove(s),3);case 3:return S(i,a.add(o.filter((function(e){return-1==s.indexOf(e.sessionId)}))),0)}}))}))}(e.h,e.g.drm,n,t),0)}}))}))}function Hu(e,t,n,r){function i(){s+=1,e.g.offline.progressCallback(u,s/o)}var a=function(e){var t=[];return e.periods.forEach((function(e){e.streams.forEach((function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach((function(e){t.push(e.dataKey)}))}))})),t}(r),o=a.length+1,s=0,u=Lu(n,r);return Promise.all([t.removeSegments(a,i),t.removeManifests([n.key()],i)])}function Vu(e,t,n,r,i,a){var o={id:a.id,originalId:a.originalId,primary:a.primary,presentationTimeOffset:a.presentationTimeOffset||0,contentType:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,kind:a.kind,language:a.language,label:a.label,width:a.width||null,height:a.height||null,initSegmentKey:null,encrypted:a.encrypted,keyId:a.keyId,segments:[],variantIds:[]};i=i.presentationTimeline.$b();var s=a.id,u=a.initSegmentReference;return u&&(u=bi(u.i(),u.h,u.g,e.g.streaming.retryParameters),Yo(t,s,u,.5*Pu(r,a.id),!0,(function(t){return h((function r(){var i;return x(r,(function(r){switch(r.s){case 1:return S(r,n.addSegments([{data:t}]),2);case 2:i=r.B,e.i.push(i[0]),o.initSegmentKey=i[0],w(r)}}))}))}))),function(e,t,n){for(var r=null==(t=e.findSegmentPosition(t))?null:e.getSegmentReference(t);r;)n(r),r=e.getSegmentReference(++t)}(a,i,(function(i){var u=bi(i.i(),i.h,i.g,e.g.streaming.retryParameters);Yo(t,s,u,function(e,t,n){return n=n.endTime-n.startTime,Pu(e,t)*n}(r,a.id,i),!1,(function(t){return h((function r(){var a;return x(r,(function(r){switch(r.s){case 1:return S(r,n.addSegments([{data:t}]),2);case 2:a=r.B,e.i.push(a[0]),o.segments.push({startTime:i.startTime,endTime:i.endTime,dataKey:a[0]}),w(r)}}))}))}))})),o}function Gu(e){if(e.m.g)throw new z(2,9,7001)}function Ku(){if(!Uu())throw new z(2,9,9e3)}function Wu(e,t){return h((function n(){return x(n,(function(n){switch(n.s){case 1:return e.l.push(t),M(n,2),S(n,t,4);case 4:return n.return(n.B);case 2:D(n),Ye(e.l,t),k(n,0)}}))}))}function qu(e){var t=new Set(e.variants.map((function(e){return e.video}))),n=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams,1<t.size&&q.v("Multiple video tracks selected to be stored");for(var r=(t=d(n)).next();!r.done;r=t.next()){r=r.value;for(var i=d(n),a=i.next();!a.done;a=i.next())r!=(a=a.value)&&r.language==a.language&&q.v("Similar audio tracks were selected to be stored",r.id,a.id)}for(t=(n=d(e)).next();!t.done;t=n.next())for(t=t.value,i=(r=d(e)).next();!i.done;i=r.next())t!=(i=i.value)&&t.language==i.language&&q.v("Similar text tracks were selected to be stored",t.id,i.id)}xs.LoadMode={DESTROYED:Su,NOT_LOADED:wu,MEDIA_SOURCE:Au,SRC_EQUALS:Mu},Iu.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()})))},xu.prototype.add=function(e){Nu(this,e)||this.g.push(e)},Y("shaka.offline.Storage",Fu),Fu.support=Uu,Fu.prototype.destroy=function(){return this.m.destroy()},Fu.prototype.destroy=Fu.prototype.destroy,Fu.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ms(e,t));var n=e,r=!1;return null!=n.trackSelectionCallback&&(r=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(r=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(r=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),r&&Hn("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),Ds(this.g,e)},Fu.prototype.configure=Fu.prototype.configure,Fu.prototype.getConfiguration=function(){var e=Cs();return Ds(e,this.g,Cs()),e},Fu.prototype.getConfiguration=Fu.prototype.getConfiguration,Fu.prototype.Yb=function(){return this.h},Fu.prototype.getNetworkingEngine=Fu.prototype.Yb,Fu.prototype.store=function(e,t,n){var r=this;return Wu(this,function(e,t,n,r){return h((function i(){var a,o,s,u,l,c,f,p,m;return x(i,(function(i){switch(i.s){case 1:return Ku(),e.j?i.return(Promise.reject(new z(2,9,9006))):(e.j=!0,S(i,function(e,t,n){return h((function r(){var i,a,o,s,u,l;return x(r,(function(r){switch(r.s){case 1:return i=null,a=e.h,o={networkingEngine:a,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e}},S(r,n(),2);case 2:return(s=r.B).configure(e.g.manifest),Gu(e),M(r,3),S(r,s.start(t,o),5);case 5:return u=r.B,Gu(e),l=function(e){for(var t=new Set,n=(e=d(e.periods)).next();!n.done;n=e.next()){for(var r=d((n=n.value).textStreams),i=r.next();!i.done;i=r.next())t.add(i.value);for(n=d(n.variants),r=n.next();!r.done;r=n.next())(r=r.value).audio&&t.add(r.audio),r.video&&t.add(r.video)}return t}(u),S(r,Promise.all(rt(l,(function(e){return e.createSegmentIndex()}))),6);case 6:if(Gu(e),i)throw i;return r.return(u);case 3:return D(r),S(r,s.stop(),7);case 7:k(r,0)}}))}))}(e,t,r),2));case 2:if(a=i.B,Gu(e),!(!a.presentationTimeline.aa()&&!a.presentationTimeline.ib()))throw new z(2,9,9005,t);return o=null,s=new Jo,l=u=null,A(i,3,4),S(i,function(e,t,n){return h((function r(){var i,a,o;return x(r,(function(r){switch(r.s){case 1:return i=new bt({Ib:e.h,onError:n,Dc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a=Na(t.periods),o=e.g,i.configure(o.drm),S(r,function(e,t,n){return e.F=[],e.L=n,Et(e,t)}(i,a,o.offline.usePersistentLicense),2);case 2:return S(r,St(i),3);case 3:return S(r,wt(i),4);case 4:return r.return(i)}}))}))}(e,a,(function(e){l=l||e})),6);case 6:if(o=i.B,Gu(e),l)throw l;return S(i,function(e,t,n){return h((function r(){var i,a;return x(r,(function(r){switch(r.s){case 1:return i={width:1/0,height:1/0},function(e,t,n){for(var r=(e=d(e.periods)).next();!r.done;r=e.next())(r=r.value).variants=r.variants.filter((function(e){return Fn.rd(e,t,n)}))}(t,e.g.restrictions,i),function(e){for(var t=(e=d(e.periods)).next();!t.done;t=e.next())(t=t.value).variants=t.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&bn(e.audio)),e.video&&(t=t&&bn(e.video)),t}))}(t),function(e,t){for(var n=d(e.periods),r=n.next();!r.done;r=n.next())(r=r.value).variants=r.variants.filter((function(e){return xt(t,e)}))}(t,n),Ou(t),a=e.g.preferredAudioChannelCount,Fn.$d(t,a),S(r,function(e,t){return h((function n(){var r,i,a,o;return x(n,(function(n){switch(n.s){case 1:r=null,i=d(e.periods),a=i.next();case 2:if(a.done){n.I(0);break}return o=a.value,r&&(o.variants=o.variants.filter((function(e){return Nu(r,new Ru(e))}))),S(n,t(o),5);case 5:r=ju(o.variants),a=i.next(),n.I(2)}}))}))}(t,(function(t){return h((function n(){var r,i,a,o,s,u,l,c;return x(n,(function(n){switch(n.s){case 1:r=Fn,i=[];for(var f=d(t.variants),h=f.next();!h.done;h=f.next())a=h.value,i.push(r.Oc(a));for(h=(f=d(t.textStreams)).next();!h.done;h=f.next())o=h.value,i.push(r.Kc(o));return S(n,e.g.offline.trackSelectionCallback(i),2);case 2:for(s=n.B,u=new Set,l=new Set,h=(f=d(s)).next();!h.done;h=f.next())"variant"==(c=h.value).type&&u.add(c.id),"text"==c.type&&l.add(c.id);t.variants=t.variants.filter((function(e){return u.has(e.id)})),t.textStreams=t.textStreams.filter((function(e){return l.has(e.id)})),w(n)}}))}))})),2);case 2:(function(e){if(0==e.periods.length)throw new z(2,4,4014);for(var t=(e=d(e.periods)).next();!t.done;t=e.next())qu(t.value)})(t),w(r)}}))}))}(e,a,o),7);case 7:return S(i,s.init(),8);case 8:return Gu(e),S(i,function(e){var t=null;if(e.g.forEach((function(e,n){e.getCells().forEach((function(e,r){e.hasFixedKeySpace()||t||(t={path:{Ea:n,ja:r},ja:e})}))})),t)return t;throw new z(2,9,9013,"Could not find a cell that supports add-operations")}(s),9);case 9:return u=i.B,Gu(e),S(i,function(e,t,n,r,i,a){return h((function o(){var s,u,l,c,f,p,m,g,v,y;return x(o,(function(o){switch(o.s){case 1:return s=function(e,t,n){var r=null==t.expiration?1/0:t.expiration;return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.ha(),size:0,expiration:r,tracks:t=Cu(t.periods[0]),appMetadata:n}}(i,r,a),u=r.periods.some((function(e){return e.variants.some((function(e){return e.drmInfos&&e.drmInfos.length}))})),l=r.periods.some((function(e){return e.variants.some((function(e){return e.drmInfos.some((function(e){return e.initData&&e.initData.length}))}))})),f=null,(c=u&&!l)&&(p=n.g,f=zu.get(p.keySystem)),m=new Bo(e.h,(function(t,n){s.size=n,e.g.offline.progressCallback(s,t)}),(function(t,r){c&&e.g.offline.usePersistentLicense&&f==r&&At(n,"cenc",t)})),M(o,2),v=g=function(e,t,n,r,i,a,o){var s=new Du,u=i.periods.map((function(r){return function(e,t,n,r,i,a){for(var o=d(a.variants),s=o.next();!s.done;s=o.next())ku(r,s.value);for(o=d(a.textStreams),s=o.next();!s.done;s=o.next())r.g[s.value.id]=52;o=function(e){for(var t=new Set,n=d(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(e=d(e.variants),n=e.next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}(a);var u=new Map;for(o=d(o),s=o.next();!s.done;s=o.next()){s=s.value;var l=Vu(e,t,n,r,i,s);u.set(s.id,l)}return a.variants.forEach((function(e){e.audio&&u.get(e.audio.id).variantIds.push(e.id),e.video&&u.get(e.video.id).variantIds.push(e.id)})),{startTime:a.startTime,streams:Array.from(u.values())}}(e,t,n,s,i,r)})),l=r.g,c=e.g.offline.usePersistentLicense;return l&&c&&(l.initData=[]),{originalManifestUri:a,duration:i.presentationTimeline.ha(),size:0,expiration:r.Xb(),periods:u,sessionIds:c?Ct(r):[],drmInfo:l,appMetadata:o}}(e,m,t,n,r,i,a),S(o,function(e){return h((function t(){return x(t,(function(t){switch(t.s){case 1:return S(t,Promise.all(e.h.values()),2);case 2:return t.return(e.g.g)}}))}))}(m),4);case 4:if(v.size=o.B,g.expiration=n.Xb(),y=Ct(n),g.sessionIds=e.g.offline.usePersistentLicense?y:[],u&&e.g.offline.usePersistentLicense&&!y.length)throw new z(2,9,9007);return o.return(g);case 2:return D(o),S(o,m.destroy(),5);case 5:k(o,0)}}))}))}(e,u.ja,o,a,t,n),10);case 10:if(c=i.B,Gu(e),l)throw l;return S(i,u.ja.addManifests([c]),11);case 11:return f=i.B,Gu(e),p=new ls("manifest",u.path.Ea,u.path.ja,f[0]),i.return(Lu(p,c));case 4:return D(i),e.j=!1,e.i=[],S(i,s.destroy(),12);case 12:if(!o){i.I(13);break}return S(i,o.destroy(),13);case 13:k(i,0);break;case 3:if(m=C(i),!u){i.I(15);break}return S(i,u.ja.removeSegments(e.i,(function(){})),15);case 15:throw l||m}}))}))}(this,e,t||{},(function(){return h((function t(){var i,a;return x(t,(function(t){switch(t.s){case 1:return n&&"string"!=typeof n?(Hn("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),i=n,t.return(new i)):S(t,yi.create(e,r.h,r.g.manifest.retryParameters,n),2);case 2:return a=t.B,t.return(a)}}))}))})))},Fu.prototype.store=Fu.prototype.store,Fu.prototype.Hf=function(){return this.j},Fu.prototype.getStoreInProgress=Fu.prototype.Hf,Fu.prototype.remove=function(e){return Wu(this,function(e,t){return h((function n(){var r,i,a,o,s,u;return x(n,(function(n){switch(n.s){case 1:return Ku(),null==(r=cs(t))||"manifest"!=r.g?n.return(Promise.reject(new z(2,9,9004,t))):(i=r,a=new Jo,M(n,2),S(n,a.init(),4));case 4:return S(n,Zo(a,i.Ea(),i.ja()),5);case 5:return S(n,(o=n.B).getManifests([i.key()]),6);case 6:return s=n.B,u=s[0],S(n,Promise.all([Yu(e,u,a),Hu(e,o,i,u)]),2);case 2:return D(n),S(n,a.destroy(),8);case 8:k(n,0)}}))}))}(this,e))},Fu.prototype.remove=Fu.prototype.remove,Fu.prototype.sg=function(){return Wu(this,function(e){return h((function t(){var n,r,i,a,o,s,u,l,c;return x(t,(function(t){switch(t.s){case 1:return Ku(),n=e.h,r=e.g.drm,i=new Jo,a=!1,M(t,2),S(t,i.init(),4);case 4:for(o=[],function(e,t){e.g.forEach((function(e){t(e.getEmeSessionCell())}))}(i,(function(e){return o.push(e)})),s=Promise.resolve(),u={},l=d(o),c=l.next();!c.done;u={Jc:u.Jc},c=l.next())u.Jc=c.value,s=s.then(function(e){return function(){return h((function t(){var i,o;return x(t,(function(t){switch(t.s){case 1:return S(t,e.Jc.getAll(),2);case 2:return i=t.B,S(t,vs(r,n,i),3);case 3:return o=t.B,S(t,e.Jc.remove(o),4);case 4:o.length!=i.length&&(a=!0),w(t)}}))}))}}(u));return S(t,s,2);case 2:return D(t),S(t,i.destroy(),6);case 6:k(t,3);break;case 3:return t.return(!a)}}))}))}(this))},Fu.prototype.removeEmeSessions=Fu.prototype.sg,Fu.prototype.list=function(){return Wu(this,h((function e(){var t,n,r;return x(e,(function(e){switch(e.s){case 1:return Ku(),t=[],n=new Jo,M(e,2),S(e,n.init(),4);case 4:return r=Promise.resolve(),function(e,t){e.g.forEach((function(e,n){e.getCells().forEach((function(e,r){t({Ea:n,ja:r},e)}))}))}(n,(function(e,n){r=r.then((function(){return h((function r(){return x(r,(function(r){switch(r.s){case 1:return S(r,n.getAllManifests(),2);case 2:r.B.forEach((function(n,r){var i=Lu(new ls("manifest",e.Ea,e.ja,r),n);t.push(i)})),w(r)}}))}))}))})),S(e,r,2);case 2:return D(e),S(e,n.destroy(),6);case 6:k(e,3);break;case 3:return e.return(t)}}))})))},Fu.prototype.list=Fu.prototype.list,Fu.deleteAll=function(){return h((function e(){var t;return x(e,(function(e){switch(e.s){case 1:return t=new Jo,M(e,2),S(e,t.erase(),2);case 2:return D(e),S(e,t.destroy(),5);case 5:k(e,0)}}))}))};var zu=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");Fs.offline=Uu,Y("shaka.polyfill.installAll",(function(){for(var e=0;e<$u.length;++e)try{$u[e].Xe()}catch(e){q.ba("Error installing polyfill!",e)}}));var Xu,Qu,$u=[];function Ju(e,t){for(var n={priority:t=t||0,Xe:e},r=0;r<$u.length;r++)if($u[r].priority<t)return void $u.splice(r,0,n);$u.push(n)}function Zu(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function el(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function tl(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];return(n=e.apply(this,n)).abort=function(){},n}}function nl(e,t){q.debug("PatchedMediaKeysApple.requestMediaKeySystemAccess");try{var n=new rl(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function rl(e,t){if(q.debug("PatchedMediaKeysApple.MediaKeySystemAccess"),this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=d(t),r=n.next();!r.done;r=n.next()){var i=r.value;if("required"==i.persistentState)r=null;else{r={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label};var a=!1,o=!1;if(i.audioCapabilities)for(var s=d(i.audioCapabilities),u=s.next();!u.done;u=s.next())if((u=u.value).contentType){a=!0;var l=u.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,l)&&(r.audioCapabilities.push(u),o=!0)}if(i.videoCapabilities)for(u=(i=d(i.videoCapabilities)).next();!u.done;u=i.next())(s=u.value).contentType&&(a=!0,u=s.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,u)&&(r.videoCapabilities.push(s),o=!0));a||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),r=o?r:null}if(r)return void(this.g=r)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function il(e){q.debug("PatchedMediaKeysApple.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&ol(t,null),delete this.mediaKeys,(this.mediaKeys=e)?ol(e,this):Promise.resolve()}function al(e){q.debug("PatchedMediaKeysApple.MediaKeys"),this.h=new WebKitMediaKeys(e),this.g=new Je}function ol(e,t){if(e.g.nb(),!t)return Promise.resolve();e.g.H(t,"webkitneedkey",ul);try{return Ya(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function sl(e){q.debug("PatchedMediaKeysApple.MediaKeySession"),Fe.call(this),this.h=null,this.l=e,this.i=this.g=null,this.j=new Je,this.sessionId="",this.expiration=NaN,this.closed=new pe,this.keyStatuses=new cl}function ul(e){if(q.debug("PatchedMediaKeysApple.onWebkitNeedKey_",e),e=new Uint8Array(e.initData),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=ye(e=ge(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=e,this.dispatchEvent(t)}function ll(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,e.dispatchEvent(new Ne("keystatuseschange"))}function cl(){this.size=0,this.g=void 0}function dl(e,t){q.debug("PatchedMediaKeysMs.requestMediaKeySystemAccess");try{var n=new fl(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function fl(e,t){q.debug("PatchedMediaKeysMs.MediaKeySystemAccess"),this.keySystem=e;for(var n=!1,r=0;r<t.length;++r){var i=t[r],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label},o=!1;if(i.audioCapabilities)for(var s=0;s<i.audioCapabilities.length;++s){var u=i.audioCapabilities[s];if(u.contentType){o=!0;var l=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,l)&&(a.audioCapabilities.push(u),n=!0)}}if(i.videoCapabilities)for(s=0;s<i.videoCapabilities.length;++s)(u=i.videoCapabilities[s]).contentType&&(o=!0,l=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,l)&&(a.videoCapabilities.push(u),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==i.persistentState&&(n=!1),n)return void(this.g=a)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function hl(e){q.debug("PatchedMediaKeysMs.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&ml(t,null),delete this.mediaKeys,(this.mediaKeys=e)?ml(e,this):Promise.resolve()}function pl(e){q.debug("PatchedMediaKeysMs.MediaKeys"),this.h=new MSMediaKeys(e),this.g=new Je}function ml(e,t){if(e.g.nb(),!t)return Promise.resolve();e.g.H(t,"msneedkey",vl);try{return Ya(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.msSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function gl(e){q.debug("PatchedMediaKeysMs.MediaKeySession"),Fe.call(this),this.i=null,this.l=e,this.h=this.g=null,this.j=new Je,this.sessionId="",this.expiration=NaN,this.closed=new pe,this.keyStatuses=new _l}function vl(e){if(q.debug("PatchedMediaKeysMs.onMsNeedKey_",e),e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=function(e){if(!e)return e;var t=new Yr(e);if(1>=t.data.length)return e;e=[];for(var n={},r=(t=d(t.data)).next();!r.done;n={yc:n.yc},r=t.next())n.yc=r.value,e.some(function(e){return function(t){return Ee.Ha(t,e.yc)}}(n))||e.push(n.yc);return Ee.concat.apply(Ee,e instanceof Array?e:function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(d(e)))}(e.initData).buffer,this.dispatchEvent(t)}}function yl(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,e.dispatchEvent(new Ne("keystatuseschange"))}function _l(){this.size=0,this.g=void 0}function bl(){return q.debug("PatchedMediaKeysNop.requestMediaKeySystemAccess"),Promise.reject(Error("The key system specified is not supported."))}function Tl(e){return q.debug("PatchedMediaKeysNop.setMediaKeys"),null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function El(){throw new TypeError("Illegal constructor.")}function Sl(){throw new TypeError("Illegal constructor.")}Y("shaka.polyfill.register",Ju),Ju((function(){xc()}),-1),Ju((function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Zu),document.addEventListener("webkitfullscreenerror",Zu),document.addEventListener("mozfullscreenchange",Zu),document.addEventListener("mozfullscreenerror",Zu),document.addEventListener("MSFullscreenChange",Zu),document.addEventListener("MSFullscreenError",Zu)}})),Ju((function(){q.debug("InputEvent.install"),gt("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(q.info("Patching input event support on IE."),HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=el)})),Ju((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),Ju((function(){q.debug("mathRound.install")})),Ju((function(){q.debug("MediaSource.install");var t=mt();e.MediaSource?e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(q.info("Patching Chromecast MSE bugs."),function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}()):t?(function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),12>=t?(q.info("Patching Safari 11 & 12 MSE bugs."),tl(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):(q.info("Patching Safari 13 MSE bugs."),tl())):gt("Tizen 2")||gt("Tizen 3")||gt("Tizen 4")?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=lt(t)[0]&&e(t)}}():q.info("Using native MSE as-is."):q.info("No MSE implementation available.")})),rl.prototype.createMediaKeys=function(){q.debug("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var e=new al(this.keySystem);return Promise.resolve(e)},rl.prototype.getConfiguration=function(){return q.debug("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration"),this.g},al.prototype.createSession=function(e){if(q.debug("PatchedMediaKeysApple.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new sl(this.h,e)},al.prototype.setServerCertificate=function(e){return q.debug("PatchedMediaKeysApple.MediaKeys.setServerCertificate"),e&&new Uint8Array(e),Promise.resolve(!0)},H(sl,Fe),(r=sl.prototype).generateRequest=function(e,t){q.debug("PatchedMediaKeysApple.MediaKeySession.generateRequest"),this.g=new pe;try{this.h=this.l.createSession("video/mp4",new Uint8Array(t)),this.sessionId=this.h.sessionId||"",this.j.H(this.h,"webkitkeymessage",this.Gg.bind(this)),this.j.H(this.h,"webkitkeyadded",this.Eg.bind(this)),this.j.H(this.h,"webkitkeyerror",this.Fg.bind(this)),ll(this,"status-pending")}catch(e){this.g.reject(e)}return this.g},r.load=function(){return q.debug("PatchedMediaKeysApple.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},r.update=function(e){q.debug("PatchedMediaKeysApple.MediaKeySession.update"),this.i=new pe;try{this.h.update(new Uint8Array(e))}catch(e){this.i.reject(e)}return this.i},r.close=function(){q.debug("PatchedMediaKeysApple.MediaKeySession.close");try{this.h.close(),this.closed.resolve(),this.j.nb()}catch(e){this.closed.reject(e)}return this.closed},r.remove=function(){return q.debug("PatchedMediaKeysApple.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},r.Gg=function(e){q.debug("PatchedMediaKeysApple.onWebkitKeyMessage_",e),this.g&&(this.g.resolve(),this.g=null),this.dispatchEvent(new Ne("message",{messageType:null==this.keyStatuses.g?"license-request":"license-renewal",message:e.message.buffer}))},r.Eg=function(e){q.debug("PatchedMediaKeysApple.onWebkitKeyAdded_",e),this.i&&(ll(this,"usable"),this.i.resolve(),this.i=null)},r.Fg=function(e){if(q.debug("PatchedMediaKeysApple.onWebkitKeyError_",e),(e=Error("EME PatchedMediaKeysApple key error")).errorCode=this.h.error,null!=this.g)this.g.reject(e),this.g=null;else if(null!=this.i)this.i.reject(e),this.i=null;else switch(this.h.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ll(this,"output-not-allowed");break;default:ll(this,"internal-error")}},(r=cl.prototype).forEach=function(e){this.g&&e(this.g,Xu)},r.get=function(e){if(this.has(e))return this.g},r.has=function(e){var t=Xu;return!(!this.g||!Ee.Ha(new Uint8Array(e),new Uint8Array(t)))},r.entries=function(){},r.keys=function(){},r.values=function(){},Ju((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(q.info("Using Apple-prefixed EME"),Xu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=il,e.MediaKeys=al,e.MediaKeySystemAccess=rl,navigator.requestMediaKeySystemAccess=nl)})),fl.prototype.createMediaKeys=function(){q.debug("PatchedMediaKeysMs.MediaKeySystemAccess.createMediaKeys");var e=new pl(this.keySystem);return Promise.resolve(e)},fl.prototype.getConfiguration=function(){return q.debug("PatchedMediaKeysMs.MediaKeySystemAccess.getConfiguration"),this.g},pl.prototype.createSession=function(e){if(q.debug("PatchedMediaKeysMs.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new gl(this.h,e)},pl.prototype.setServerCertificate=function(){return q.debug("PatchedMediaKeysMs.MediaKeys.setServerCertificate"),Promise.resolve(!1)},H(gl,Fe),(r=gl.prototype).generateRequest=function(e,t){q.debug("PatchedMediaKeysMs.MediaKeySession.generateRequest"),this.g=new pe;try{this.i=this.l.createSession("video/mp4",new Uint8Array(t),null),this.j.H(this.i,"mskeymessage",this.dg.bind(this)),this.j.H(this.i,"mskeyadded",this.bg.bind(this)),this.j.H(this.i,"mskeyerror",this.cg.bind(this)),yl(this,"status-pending")}catch(e){this.g.reject(e)}return this.g},r.load=function(){return q.debug("PatchedMediaKeysMs.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},r.update=function(e){q.debug("PatchedMediaKeysMs.MediaKeySession.update"),this.h=new pe;try{this.i.update(new Uint8Array(e))}catch(e){this.h.reject(e)}return this.h},r.close=function(){q.debug("PatchedMediaKeysMs.MediaKeySession.close");try{this.i.close(),this.closed.resolve(),this.j.nb()}catch(e){this.closed.reject(e)}return this.closed},r.remove=function(){return q.debug("PatchedMediaKeysMs.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},r.dg=function(e){q.debug("PatchedMediaKeysMs.onMsKeyMessage_",e),this.g&&(this.g.resolve(),this.g=null),this.dispatchEvent(new Ne("message",{messageType:null==this.keyStatuses.g?"license-request":"license-renewal",message:e.message.buffer}))},r.bg=function(e){q.debug("PatchedMediaKeysMs.onMsKeyAdded_",e),this.g?(q.debug("Simulating completion for a PR persistent license."),yl(this,"usable"),this.g.resolve(),this.g=null):this.h&&(yl(this,"usable"),this.h.resolve(),this.h=null)},r.cg=function(e){if(q.debug("PatchedMediaKeysMs.onMsKeyError_",e),(e=Error("EME PatchedMediaKeysMs key error")).errorCode=this.i.error,null!=this.g)this.g.reject(e),this.g=null;else if(null!=this.h)this.h.reject(e),this.h=null;else switch(this.i.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:yl(this,"output-not-allowed");break;default:yl(this,"internal-error")}},(r=_l.prototype).forEach=function(e){this.g&&e(this.g,Qu)},r.get=function(e){if(this.has(e))return this.g},r.has=function(e){var t=Qu;return!(!this.g||!Ee.Ha(new Uint8Array(e),new Uint8Array(t)))},r.entries=function(){},r.keys=function(){},r.values=function(){},Ju((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(q.info("Using ms-prefixed EME v20140218"),Qu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=hl,e.MediaKeys=pl,e.MediaKeySystemAccess=fl,navigator.requestMediaKeySystemAccess=dl)})),El.prototype.createSession=function(){},El.prototype.setServerCertificate=function(){},Sl.prototype.getConfiguration=function(){},Sl.prototype.createMediaKeys=function(){},Ju((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(q.info("EME not available."),navigator.requestMediaKeySystemAccess=bl,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Tl,e.MediaKeys=El,e.MediaKeySystemAccess=Sl)}),-10);var wl,Al="";function Ml(e){return Al?Al+e.charAt(0).toUpperCase()+e.slice(1):e}function Ll(e,t){q.debug("PatchedMediaKeysWebkit.requestMediaKeySystemAccess");try{var n=new Dl(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Cl(e){q.debug("PatchedMediaKeysWebkit.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&Pl(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Pl(e,this),Promise.resolve()}function Dl(e,t){q.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess"),this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var a=0;a<t.length;++a){var o=t[a],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var l=0;l<o.audioCapabilities.length;++l){var c=o.audioCapabilities[l];if(c.contentType){u=!0;var d=c.contentType.split(";")[0];i.canPlayType(d,this.g)&&(s.audioCapabilities.push(c),r=!0)}}if(o.videoCapabilities)for(l=0;l<o.videoCapabilities.length;++l)(c=o.videoCapabilities[l]).contentType&&(u=!0,i.canPlayType(c.contentType,this.g)&&(s.videoCapabilities.push(c),r=!0));if(u||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r)return void(this.h=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function kl(e){q.debug("PatchedMediaKeysWebkit.MediaKeys"),this.l=e,this.h=null,this.g=new Je,this.i=[],this.j={}}function Pl(e,t){e.h=t,e.g.nb();var n=Al;t&&(e.g.H(t,n+"needkey",e.hg.bind(e)),e.g.H(t,n+"keymessage",e.Jg.bind(e)),e.g.H(t,n+"keyadded",e.Hg.bind(e)),e.g.H(t,n+"keyerror",e.Ig.bind(e)))}function Il(e,t){var n=e.j[t];return n?(q.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):(n=e.i.shift())?(n.sessionId=t,e.j[t]=n,q.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):null}function Ol(e,t,n){q.debug("PatchedMediaKeysWebkit.MediaKeySession"),Fe.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new pe,this.keyStatuses=new Nl}function Rl(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var r=new Uint8Array(ye("LOAD_SESSION|"+n));else{var i=ye("PERSISTENT|"),a=new Uint8Array(i.byteLength+t.byteLength);a.set(new Uint8Array(i),0),a.set(new Uint8Array(t),i.byteLength),r=a}else r=new Uint8Array(t)}catch(e){return Promise.reject(e)}e.h=new pe;var o=Ml("generateKeyRequest");try{e.j[o](e.i,r)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new Le((function(){try{e.j[o](e.i,r)}catch(t){e.h.reject(t),e.h=null}})).V(.01)}return e.h}function xl(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,e.dispatchEvent(new Ne("keystatuseschange"))}function Nl(){this.size=0,this.g=void 0}function jl(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Fl(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Ul(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Bl(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Yl(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function Hl(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Vl(t,n,r){return new e.TextTrackCue(t,n,r)}function Gl(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function Kl(){}Dl.prototype.createMediaKeys=function(){q.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var e=new kl(this.g);return Promise.resolve(e)},Dl.prototype.getConfiguration=function(){return q.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration"),this.h},(r=kl.prototype).createSession=function(e){if(q.debug("PatchedMediaKeysWebkit.MediaKeys.createSession"),"temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Ol(t,this.l,e),this.i.push(e),e},r.setServerCertificate=function(){return q.debug("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate"),Promise.resolve(!1)},r.hg=function(e){q.debug("PatchedMediaKeysWebkit.onWebkitNeedKey_",e);var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",e.initData instanceof ArrayBuffer?t.initData=e.initData:t.initData=e.initData.buffer,this.h.dispatchEvent(t)},r.Jg=function(e){q.debug("PatchedMediaKeysWebkit.onWebkitKeyMessage_",e);var t=Il(this,e.sessionId);t?(e=new Ne("message",{messageType:null==t.keyStatuses.g?"licenserequest":"licenserenewal",message:e.message}),q.debug("PatchedMediaKeysWebkit.MediaKeySession.generated"),t.h&&(t.h.resolve(),t.h=null),t.dispatchEvent(e)):q.error("Session not found",e.sessionId)},r.Hg=function(e){q.debug("PatchedMediaKeysWebkit.onWebkitKeyAdded_",e),(e=Il(this,e.sessionId))&&(q.debug("PatchedMediaKeysWebkit.MediaKeySession.ready"),xl(e,"usable"),e.g&&e.g.resolve(),e.g=null)},r.Ig=function(e){q.debug("PatchedMediaKeysWebkit.onWebkitKeyError_",e);var t=Il(this,e.sessionId);t&&t.handleError(e)},H(Ol,Fe),(r=Ol.prototype).handleError=function(e){q.debug("PatchedMediaKeysWebkit.MediaKeySession.handleError",e);var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?xl(this,"output-restricted"):xl(this,1==t?"expired":"internal-error"))},r.Qd=function(e,t){if(this.g)this.g.then(this.Qd.bind(this,e,t)).catch(this.Qd.bind(this,e,t));else{if(this.g=e,"webkit-org.w3.clearkey"==this.i){var n=me(t),r=JSON.parse(n);"oct"!=r.keys[0].kty&&(this.g.reject(Error("Response is not a valid JSON Web Key Set.")),this.g=null),n=Ee.Ja(r.keys[0].k),r=Ee.Ja(r.keys[0].kid)}else n=new Uint8Array(t),r=null;var i=Ml("addKey");try{this.j[i](this.i,n,r,this.sessionId)}catch(e){this.g.reject(e),this.g=null}}},r.generateRequest=function(e,t){return q.debug("PatchedMediaKeysWebkit.MediaKeySession.generateRequest"),Rl(this,t,null)},r.load=function(e){return q.debug("PatchedMediaKeysWebkit.MediaKeySession.load"),"persistent-license"==this.l?Rl(this,null,e):Promise.reject(Error("Not a persistent session."))},r.update=function(e){q.debug("PatchedMediaKeysWebkit.MediaKeySession.update",e);var t=new pe;return this.Qd(t,e),t},r.close=function(){if(q.debug("PatchedMediaKeysWebkit.MediaKeySession.close"),"persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Ml("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},r.remove=function(){return q.debug("PatchedMediaKeysWebkit.MediaKeySession.remove"),"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(r=Nl.prototype).forEach=function(e){this.g&&e(this.g,wl)},r.get=function(e){if(this.has(e))return this.g},r.has=function(e){var t=wl;return!(!this.g||!Ee.Ha(new Uint8Array(e),new Uint8Array(t)))},r.entries=function(){},r.keys=function(){},r.values=function(){},Ju((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)q.info("Using webkit-prefixed EME v0.1b"),Al="webkit";else{if(!HTMLMediaElement.prototype.generateKeyRequest)return;q.info("Using nonprefixed EME v0.1b")}wl=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=Ll,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Cl,e.MediaKeys=kl,e.MediaKeySystemAccess=Dl}})),Ju((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(q.debug("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Fl,Object.defineProperty(t,"disablePictureInPicture",{get:Bl,set:Yl,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Ul,document.addEventListener("webkitpresentationmodechanged",jl,!0))}})),Ju((function(){if(q.debug("VideoPlayPromise.install"),e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}})),Ju((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=Hl)}})),Ju((function(){if(e.VTTCue)q.info("Using native VTTCue.");else if(e.TextTrackCue){var t=TextTrackCue.length;if(3==t)q.info("Using VTTCue polyfill from 3 argument TextTrackCue."),e.VTTCue=Vl;else if(6==t)q.info("Using VTTCue polyfill from 6 argument TextTrackCue."),e.VTTCue=Gl;else{try{var n=!!Vl(1,2,"")}catch(e){n=!1}n&&(q.info("Using VTTCue polyfill from 3 argument TextTrackCue."),e.VTTCue=Vl)}}else q.error("VTTCue not available.")})),Y("shaka.text.TtmlTextParser",Kl),Kl.prototype.parseInit=function(){},Kl.prototype.parseInit=Kl.prototype.parseInit,Kl.prototype.parseMedia=function(e,t){var n=me(e),r=[],i=new DOMParser,a=null;if(""==n)return r;try{a=i.parseFromString(n,"text/xml")}catch(e){throw new z(2,2,2005,"Failed to parse TTML.")}if(a){if(n=a.getElementsByTagName("parsererror")[0])throw new z(2,2,2005,n.textContent);if(!(i=a.getElementsByTagName("tt")[0]))throw new z(2,2,2005,"TTML does not contain <tt> tag.");var o=Hr.getAttributeNS(i,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=Hr.getAttributeNS(i,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),u=Hr.getAttributeNS(i,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),l=Hr.getAttributeNS(i,"http://www.w3.org/ns/ttml#parameter","tickRate");if(a=i.getAttribute("xml:space")||"default",n=Hr.getAttributeNS(i,"http://www.w3.org/ns/ttml#styling","extent"),"default"!=a&&"preserve"!=a)throw new z(2,2,2005,"Invalid xml:space value: "+a);a="default"==a,o=new mc(o,s,u,l),s=ac(i.getElementsByTagName("metadata")[0]),u=ac(i.getElementsByTagName("styling")[0]),l=ac(i.getElementsByTagName("layout")[0]);for(var c=[],f=0;f<l.length;f++){var h,p,m=l[f],g=u,v=n,y=new cn,_=m.getAttribute("xml:id");if(_)y.id=_,_=null,v&&(_=zl.exec(v)||Ql.exec(v)),v=_?Number(_[1]):null,_=_?Number(_[2]):null,(h=lc(m,g,"extent"))&&(null!=(h=(p=zl.exec(h))||Ql.exec(h))&&(y.width=null!=v?100*Number(h[1])/v:Number(h[1]),y.height=null!=_?100*Number(h[2])/_:Number(h[2]),y.widthUnits=p||null!=v?dn:0,y.heightUnits=p||null!=_?dn:0)),(m=lc(m,g,"origin"))&&(null!=(h=(p=zl.exec(m))||Ql.exec(m))&&(y.viewportAnchorX=null!=v?100*Number(h[1])/v:Number(h[1]),y.viewportAnchorY=null!=_?100*Number(h[2])/_:Number(h[2]),y.viewportAnchorUnits=p||null!=v?dn:0));else q.v("TtmlTextParser parser encountered a region with no id. Region will be ignored."),y=null;y&&c.push(y)}for(n=function e(t){if(!t)return[];var n=[];t=d(t.childNodes);for(var r=t.next();!r.done;r=t.next())r=r.value,r instanceof Element&&(r.hasAttribute("begin")?n.push(r):n=n.concat(e(r)));return n}(i.getElementsByTagName("body")[0]),i=(n=d(n)).next();!i.done;i=n.next())(i=oc(i.value,t.periodStart,o,s,u,l,c,a,!1))&&r.push(i)}return r},Kl.prototype.parseMedia=Kl.prototype.parseMedia;var Wl,ql,zl=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Xl=/^(\d+px|\d+em)$/,Ql=/^(\d+)px (\d+)px$/,$l=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Jl=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Zl=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,ec=/^(\d*(?:\.\d*)?)f$/,tc=/^(\d*(?:\.\d*)?)t$/,nc=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,rc={left:an,center:"center",right:"end",start:an,end:"end"},ic={left:"line-left",center:"center",right:"line-right"};function ac(e){var t=[];if(!e)return t;for(var n=d(e.childNodes),r=n.next();!r.done;r=n.next())(r=r.value).nodeType==Node.ELEMENT_NODE&&"br"!==r.nodeName&&(r=ac(r),t=t.concat(r));return t.length||t.push(e),t}function oc(e,t,n,r,i,a,o,s,u){if(u&&"br"==e.nodeName)return(e=new Xt(0,0,"")).spacer=!0,e;var l=/^[\s\n]*$/.test(e.textContent),c=e.nodeType==Node.ELEMENT_NODE&&!e.hasAttribute("begin")&&!e.hasAttribute("end");if(e.nodeType!=Node.ELEMENT_NODE||c&&l||c&&!u)return null;s="default"==(e.getAttribute("xml:space")||(s?"default":"preserve")),l=hc(e.getAttribute("begin"),n),c=hc(e.getAttribute("end"),n);var f=hc(e.getAttribute("dur"),n);if(null==c&&null!=f&&(c=l+f),!u&&(null==l||null==c))throw new z(2,2,2001);if(l=u&&null==l?0:l+t,c=u&&null==c?0:c+t,f="",u=[],Array.from(e.childNodes).find((function(e){return e.nodeType===Node.TEXT_NODE&&/\S+/.test(e.textContent)})))f=function e(t,n){for(var r="",i=d(t.childNodes),a=i.next();!a.done;a=i.next())"br"==(a=a.value).nodeName&&t.childNodes[0]!==a?r+="\n":a.childNodes&&0<a.childNodes.length?r+=e(a,n):n?r+=a=(a=a.textContent.trim()).replace(/\s+/g," "):r+=a.textContent;return r}(e,s);else for(var h=d(e.childNodes),p=h.next();!p.done;p=h.next())(p=oc(p.value,t,n,r,i,a,o,s,!0))&&(p.startTime=p.startTime||l,p.endTime=p.endTime||c,u.push(p));if((t=new Xt(l,c,f)).nestedCues=u,(a=fc(e,"region",a,"")[0])&&a.getAttribute("xml:id")){var m=a.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==m}))[0]}return function(e,t,n,r,i){"rtl"==uc(t,n,i,"direction")&&(e.direction="rtl");var a=uc(t,n,i,"writingMode");"tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=tn),(a=uc(t,n,i,"textAlign"))?(e.positionAlign=ic[a],e.lineAlign=rc[a],e.textAlign=Jt[a.toUpperCase()]):e.textAlign="start",(a=uc(t,n,i,"displayAlign"))&&(e.displayAlign=en[a.toUpperCase()]);(a=uc(t,n,i,"color"))&&(e.color=a);(a=uc(t,n,i,"backgroundColor"))&&(e.backgroundColor=a);(a=uc(t,n,i,"fontFamily"))&&(e.fontFamily=a);(a=uc(t,n,i,"fontWeight"))&&"bold"==a&&(e.fontWeight=700),(a=uc(t,n,i,"wrapOption"))&&"noWrap"==a&&(e.wrapLine=!1),(a=uc(t,n,i,"lineHeight"))&&a.match(Xl)&&(e.lineHeight=a),(a=uc(t,n,i,"fontSize"))&&a.match(Xl)&&(e.fontSize=a),(a=uc(t,n,i,"fontStyle"))&&(e.fontStyle=ln[a.toUpperCase()]);if(r){a=r.getAttribute("imageType")||r.getAttribute("imagetype");var o=r.getAttribute("encoding");r=r.textContent.trim(),"PNG"==a&&"Base64"==o&&r&&(e.backgroundImage="data:image/png;base64,"+r)}(n=lc(n,i,"textDecoration"))&&sc(e,n),(t=cc(t,i,"textDecoration"))&&sc(e,t)}(t,e,a,r=fc(e,"backgroundImage",r,"#","http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt")[0],i),t}function sc(e,t){for(var n=t.split(" "),r=0;r<n.length;r++)switch(n[r]){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ye(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ye(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ye(e.textDecoration,"overline")}}function uc(e,t,n,r){return(e=cc(e,n,r))?e:lc(t,n,r)}function lc(e,t,n){if(!e)return null;for(var r=ac(e),i=0;i<r.length;i++){var a=Hr.getAttributeNS(r[i],"http://www.w3.org/ns/ttml#styling",n);if(a)return a}return dc(e,t,n)}function cc(e,t,n){var r=Hr.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n);return r||dc(e,t,n)}function dc(e,t,n){e=fc(e,"style",t,"");for(var r=null,i=0;i<e.length;i++){var a=Hr.getAttributeNS(e[i],"http://www.w3.org/ns/ttml#styling",n);a||(a=cc(e[i],t,n)),a&&(r=a)}return r}function fc(e,t,n,r,i){var a=[];if(!e||1>n.length)return a;var o=e;for(e=null;o&&!(e=i?Hr.getAttributeNS(o,i,t):o.getAttribute(t))&&(o=o.parentNode)instanceof Element;);if(t=e)for(i=(t=d(t=t.split(" "))).next();!i.done;i=t.next())for(i=i.value,o=(e=d(n)).next();!o.done;o=e.next())if(r+(o=o.value).getAttribute("xml:id")==i){a.push(o);break}return a}function hc(e,t){var n=null;if($l.test(e)){n=$l.exec(e);var r=Number(n[1]),i=Number(n[2]),a=Number(n[3]),o=Number(n[4]);n=(a+=(o+=(Number(n[5])||0)/t.h)/t.frameRate)+60*i+3600*r}else Jl.test(e)?n=pc(Jl,e):Zl.test(e)?n=pc(Zl,e):ec.test(e)?(n=ec.exec(e),n=Number(n[1])/t.frameRate):tc.test(e)?(n=tc.exec(e),n=Number(n[1])/t.g):nc.test(e)&&(n=pc(nc,e));return n}function pc(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function mc(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function gc(){this.g=new Kl}function vc(){}function yc(e,t,n){var r;if(r=/^align:(start|middle|center|end|left|right)$/.exec(t))t=r[1],e.textAlign="middle"==t?$t:Jt[t.toUpperCase()];else if(r=/^vertical:(lr|rl)$/.exec(t))e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl";else if(r=/^size:([\d.]+)%$/.exec(t))e.size=Number(r[1]);else if(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center");else{if(!(r=/^region:(.*)$/.exec(t))){e:{if(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=on[n[2].toUpperCase()]);else{if(!(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))){e=!1;break e}e.lineInterpretation=rn,e.line=Number(n[1]),n[2]&&(e.lineAlign=on[n[2].toUpperCase()])}e=!0}return e}(t=function(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:(q.v("VTT parser could not find a region with id: ",t," The region will be ignored."),null)}(n,r[1]))&&(e.region=t)}return!0}function _c(e){if(null==(e=Fi(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function bc(){this.g=null}function Tc(e,t,n){var r,i,a;return(new Rr).box("payl",jr((function(e){r=me(e)}))).box("iden",jr((function(e){i=me(e)}))).box("sttg",jr((function(e){a=me(e)}))).parse(e),r?function(e,t,n,r,i){if(e=new Xt(r,i,e),t&&(e.id=t),n)for(t=new Ni(n),n=Ui(t);n;)yc(e,n,[])||q.v("VTT parser encountered an invalid VTT setting: ",n," The setting will be ignored."),ji(t),n=Ui(t);return e}(r,i,a,t,n):null}function Ec(){}function Sc(){Wl?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Wl=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=wc):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function wc(e,t){var n=this;return h((function r(){var i;return x(r,(function(r){switch(r.s){case 1:return console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),S(r,Wl.call(n,e,t),2);case 2:return Oc(i=r.B)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Wl,r.return(i)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Ac,r.return(Ac.call(n,e,t)))}}))}))}function Ac(e,t){var n=this;return h((function r(){var i,a,o,s,u,l,c,f;return x(r,(function(r){switch(r.s){case 1:console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),i=Ic(e),a=[];for(var h=d(t),p=h.next();!p.done;p=h.next())o=p.value,s=Mc(o.videoCapabilities,i),u=Mc(o.audioCapabilities,i),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!u.length||((l=Object.assign({},o)).videoCapabilities=s,l.audioCapabilities=u,a.push(l));if(!a.length)throw(c=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c;return S(r,Wl.call(n,e,a),2);case 2:return f=r.B,r.return(new Pc(f,i))}}))}))}function Mc(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function Lc(){}function Cc(){ql?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(ql=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Dc):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Dc(e){var t=this;return h((function n(){var r,i;return x(n,(function(n){switch(n.s){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),S(n,ql.call(t,e),2);case 2:return r=n.B,e.keySystemConfiguration?(i=r.keySystemAccess)&&Oc(i)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=ql,n.return(r)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=kc,n.return(kc.call(t,e))):n.return(r)}}))}))}function kc(e){var t=this;return h((function n(){var r,i,a,o,s,u,l,c,d;return x(n,(function(n){switch(n.s){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=null,e.keySystemConfiguration&&(i=e.keySystemConfiguration,a=i.keySystem,o=i.audio&&i.audio.encryptionScheme,s=i.video&&i.video.encryptionScheme,r=Ic(a),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},o&&o!=r||s&&s!=r)?n.return(u):S(n,ql.call(t,e),2);case 2:if((l=n.B).keySystemAccess){l.keySystemAccess=new Pc(l.keySystemAccess,r),n.I(3);break}if(!e.keySystemConfiguration){n.I(3);break}var f=e.keySystemConfiguration,h=[],p=[];return f.audio&&h.push({robustness:f.audio.robustness||"",contentType:e.audio.contentType}),f.video&&p.push({robustness:f.video.robustness||"",contentType:e.video.contentType}),f={initDataTypes:f.initDataType?[f.initDataType]:[],distinctiveIdentifier:f.distinctiveIdentifier,persistentState:f.persistentState,sessionTypes:f.sessionTypes},h.length&&(f.audioCapabilities=h),p.length&&(f.videoCapabilities=p),c=f,d=l,S(n,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[c]),5);case 5:d.keySystemAccess=n.B;case 3:return n.return(l)}}))}))}function Pc(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function Ic(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Oc(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function Rc(){}function xc(){Sc(),Cc()}pn["application/ttml+xml"]=Kl,Y("shaka.text.Mp4TtmlParser",gc),gc.prototype.parseInit=function(e){var t=!1;if((new Rr).box("moov",xr).box("trak",xr).box("mdia",xr).box("minf",xr).box("stbl",xr).ma("stsd",Nr).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new z(2,2,2007)},gc.prototype.parseInit=gc.prototype.parseInit,gc.prototype.parseMedia=function(e,t){var n=!1,r=[];if((new Rr).box("mdat",jr(function(e){n=!0,r=r.concat(this.g.parseMedia(e,t))}.bind(this))).parse(e),!n)throw new z(2,2,2007);return r},gc.prototype.parseMedia=gc.prototype.parseMedia,pn['application/mp4; codecs="stpp"']=gc,pn['application/mp4; codecs="stpp.ttml.im1t"']=gc,pn['application/mp4; codecs="stpp.TTML.im1t"']=gc,Y("shaka.text.VttTextParser",vc),vc.prototype.parseInit=function(){},vc.prototype.parseInit=vc.prototype.parseInit,vc.prototype.parseMedia=function(e,t){var n=me(e);if(n=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new z(2,2,2e3);var r=t.segmentStart;if(null==r&&(r=0,n[0].includes("X-TIMESTAMP-MAP"))){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=n[0].match(/MPEGTS:(\d+)/m);if(i&&a){if(null==(r=_c(new Ni(i[1]))))throw new z(2,2,2e3);r=t.periodStart+(Number(a[1])/9e4-r)}}a=[];var o=n[0].split("\n");for(i=1;i<o.length;i++)if(/^Region:/.test(o[i])){var s=new Ni(o[i]),u=new cn;Ui(s),ji(s);for(var l=Ui(s);l;){var c;e:{var d=u,f=l;if(c=/^id=(.*)$/.exec(f))d.id=c[1];else if(c=/^width=(\d{1,2}|100)%$/.exec(f))d.width=Number(c[1]);else if(c=/^lines=(\d+)$/.exec(f))d.height=Number(c[1]),d.heightUnits=2;else if(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(f))d.regionAnchorX=Number(c[1]),d.regionAnchorY=Number(c[2]);else if(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(f))d.viewportAnchorX=Number(c[1]),d.viewportAnchorY=Number(c[2]);else{if(!/^scroll=up$/.exec(f)){c=!1;break e}d.scroll="up"}c=!0}c||q.v("VTT parser encountered an invalid VTTRegion setting: ",l," The setting will be ignored."),ji(s),l=Ui(s)}a.push(u)}for(i=[],s=1;s<n.length;s++){if(c=o=n[s].split("\n"),d=r,o=a,1==c.length&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||"STYLE"==c[0])o=null;else{u=null,c[0].includes("--\x3e")||(u=c[0],c.splice(0,1)),f=_c(l=new Ni(c[0]));var h=Fi(l,/[ \t]+--\x3e[ \t]+/g),p=_c(l);if(null==f||null==h||null==p)throw new z(2,2,2001);for(c=new Xt(f+d,p+d,c.slice(1).join("\n").trim()),ji(l),d=Ui(l);d;)yc(c,d,o)||q.v("VTT parser encountered an invalid VTT setting: ",d," The setting will be ignored."),ji(l),d=Ui(l);null!=u&&(c.id=u),o=c}o&&i.push(o)}return i},vc.prototype.parseMedia=vc.prototype.parseMedia,pn["text/vtt"]=vc,pn['text/vtt; codecs="vtt"']=vc,pn['text/vtt; codecs="wvtt"']=vc,Y("shaka.text.Mp4VttParser",bc),bc.prototype.parseInit=function(e){var t=!1;if((new Rr).box("moov",xr).box("trak",xr).box("mdia",xr).ma("mdhd",function(e){0==e.version?(e.reader.U(4),e.reader.U(4),this.g=e.reader.N(),e.reader.U(4)):(e.reader.U(8),e.reader.U(8),this.g=e.reader.N(),e.reader.U(8)),e.reader.U(4)}.bind(this)).box("minf",xr).box("stbl",xr).ma("stsd",Nr).box("wvtt",(function(){t=!0})).parse(e),!this.g)throw new z(2,2,2008);if(!t)throw new z(2,2,2008)},bc.prototype.parseInit=bc.prototype.parseInit,bc.prototype.parseMedia=function(e,t){var n=this;if(!this.g)throw q.error("No init segment for MP4+VTT!"),new z(2,2,2008);var r,i=0,a=[],o=[],s=!1,u=!1,l=!1,c=null;if((new Rr).box("moof",xr).box("traf",xr).ma("tfdt",(function(e){s=!0,i=0==e.version?e.reader.N():e.reader.Pb()})).ma("tfhd",(function(e){var t=e.flags;(e=e.reader).U(4),1&t&&e.U(8),2&t&&e.U(4),c=8&t?e.N():null})).ma("trun",(function(e){u=!0;var t=e.version,n=e.flags,r=(e=e.reader).N();1&n&&e.U(4),4&n&&e.U(4);for(var i=[],o=0;o<r;o++){var s={duration:null,sampleSize:null,Sd:null};256&n&&(s.duration=e.N()),512&n&&(s.sampleSize=e.N()),1024&n&&e.U(4),2048&n&&(s.Sd=0==t?e.N():e.De()),i.push(s)}a=i})).box("mdat",jr((function(e){l=!0,r=e}))).parse(e),!l&&!s&&!u)throw new z(2,2,2008);var d=i,f=new Pr(new DataView(r.buffer,r.byteOffset,r.byteLength),0);return a.forEach((function(e){var r=e.duration||c,a=e.Sd?i+e.Sd:d;d=a+(r||0);var s=0;do{var u=f.N();s+=u;var l=f.N(),h=null;"vttc"==(l=Ur(l))?8<u&&(h=f.mb(u-8)):("vtte"!=l&&q.error("Unknown box "+l+"! Skipping!"),f.U(u-8)),r?h&&o.push(Tc(h,t.periodStart+a/n.g,t.periodStart+d/n.g)):q.error("WVTT sample duration unknown, and no default found!")}while(e.sampleSize&&s<e.sampleSize)})),o.filter(le.Ra)},bc.prototype.parseMedia=bc.prototype.parseMedia,pn['application/mp4; codecs="wvtt"']=bc,Y("shaka.util.Dom.createHTMLElement",(function(e){return document.createElement(e)})),Y("shaka.util.Dom.createVideoElement",(function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e})),Y("shaka.util.Dom.asHTMLElement",(function(e){return e})),Y("shaka.util.Dom.asHTMLMediaElement",(function(e){return e})),Y("shaka.util.Dom.removeAllChildren",(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)})),Y("EmeEncryptionSchemePolyfill",Ec),Ec.install=Sc,Y("McEncryptionSchemePolyfill",Lc),Lc.install=Cc,Pc.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=d(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=(t=d(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},Pc.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},Y("EncryptionSchemePolyfills",Rc),Rc.install=xc,void 0!==n&&n.gf&&(n.gf=Rc)}.call(r,n,n,void 0),r.shaka)t[i]=r.shaka[i]}()}).call(this,n(130))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(660),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=n(40),u=n(8),l=n(100),c=n(197),d=n(775),f=n(16),h=n(169),p=n(170),m=n(181),g=n(182),v=n(10),y=n(165),_=n(189),b=n(198),T={withMiddlewares:c.FALLBACK_HANDLER,withoutMiddlewares:c.FALLBACK_HANDLER},E=new f.LoggerFileNameDecorator("Player"),S=function(e){function t(t,n){void 0===n&&(n={});var o=e.call(this)||this;return o._handler=T,o._isCasting=!1,o._plugins=new Map,o.addCastLoadInterceptor=function(e){o._chromecastHandler?o._chromecastHandler.withMiddlewares.addLoadInterceptor(e):o.once(u.EventTypes.CAST_STATE_CHANGE,(function(){if(!o._chromecastHandler)throw new Error("Failed to add Cast Load Interceptor!");o._chromecastHandler.withMiddlewares.addLoadInterceptor(e)}))},o.destroy=function(){var e,t,n;o._destroyingSource.next({}),null===(e=o._handler)||void 0===e||e.withMiddlewares.destroy(),o._handler=T,null===(t=o._chromecastHandler)||void 0===t||t.withMiddlewares.destroy(),o._eventProxy.destroy(),o._loadRequestSource.complete(),null===(n=o._stats)||void 0===n||n.destroy(),o._queueManager.destroy(),o._destroyingSource.complete(),o._loadRequestSource.complete()},o.getPluginByName=function(e){return o._plugins.get(e)},o.getPluginByType=function(e){return o.getPlugins().find((function(t){return t instanceof e}))},o.removeCastLoadInterceptor=function(e){o._chromecastHandler?o._chromecastHandler.withMiddlewares.removeLoadInterceptor(e):o.once(u.EventTypes.CAST_STATE_CHANGE,(function(){if(!o._chromecastHandler)throw new Error("Failed to remove Cast Load Interceptor!");o._chromecastHandler.withMiddlewares.removeLoadInterceptor(e)}))},o.reset=function(){var e,t=o.sourceHandler;switch(t.getType()){case u.HandlerTypes.CHROMECAST:t.reset();break;case u.HandlerTypes.NONE:break;default:t.destroy(),o._handler=T,null===(e=o._stats)||void 0===e||e.setSourceHandler(T.withoutMiddlewares)}},o.startCasting=function(){return r.__awaiter(o,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this._chromecastHandler?[4,this._chromecastHandler.withMiddlewares.connect()]:[3,2];case 1:return e.sent(),[3,3];case 2:throw new Error("Casting is not enabled!");case 3:return[2]}}))}))},o.stopCasting=function(){var e;null===(e=o._chromecastHandler)||void 0===e||e.withMiddlewares.disconnect()},o.attachMiddlewares=function(e){return o._config.middlewares.reduce((function(e,t){return new Proxy(e,t(o,e))}),e)},o.createHandler=function(e){var t=new e(o.getElement(),o._config,o._services),n=o.attachMiddlewares(t);return o.connectHandler(n),o._eventProxy.addEventSource(u.EventTypes.HANDLER_CREATED,(0,a.of)({sourceHandler:n})),{withMiddlewares:n,withoutMiddlewares:t}},o.handleCastConnected=function(){return r.__awaiter(o,void 0,void 0,(function(){var e,t,n,i,a,o,l;return r.__generator(this,(function(c){switch(c.label){case 0:return!this._chromecastHandler||this._isCasting?[3,2]:(e=this.getMediaInfo(),this._isCasting=!0,this.getElement().classList.add(s.CASTING_CLASSNAME),null===(l=this._stats)||void 0===l||l.setSourceHandler(this._chromecastHandler.withoutMiddlewares),t=this._chromecastHandler.withMiddlewares,e&&this.shouldAutoCast(t.getMediaInfo())?(n=this._handler.withMiddlewares,i=n.getCurrentTextTrack(),a=n.getCurrentAudioTrack(),o=r.__assign(r.__assign({},e),{autoPlay:u.AutoPlayOptions.YES,initialAudioTrack:a?(0,v.enhanceAudioTrackSelectors)(a):void 0,initialTextTrack:i?(0,v.enhanceTextTrackSelectors)(i):void 0}),n.hasType(u.HandlerTypes.NONE)||(o.startFrom=n.getIsLive()?n.getCurrentDate():n.getCurrentTime(),n.destroy(),this._handler=T),[4,t.load(o)]):[3,2]);case 1:c.sent(),c.label=2;case 2:return[2]}}))}))},o.handleCastDisconnected=function(){return r.__awaiter(o,void 0,void 0,(function(){var e,t,n,i,o,l,c;return r.__generator(this,(function(d){switch(d.label){case 0:return this._chromecastHandler&&this._isCasting?(e=this.getMediaInfo(),this._isCasting=!1,this.getElement().classList.remove(s.CASTING_CLASSNAME),null===(l=this._stats)||void 0===l||l.setSourceHandler(this._handler.withoutMiddlewares),e?(t=this._chromecastHandler.withMiddlewares,this._eventProxy.addEventSource(u.EventTypes.READY,(0,a.of)({isReady:!1})),n=t.getCurrentTextTrack(),i=t.getCurrentAudioTrack(),o=r.__assign(r.__assign({},e),{autoPlay:u.AutoPlayOptions.YES,startFrom:null!==(c=t.getCurrentDate())&&void 0!==c?c:t.getCurrentTime(),initialAudioTrack:i?(0,v.enhanceAudioTrackSelectors)(i):void 0,initialTextTrack:n?(0,v.enhanceTextTrackSelectors)(n):void 0}),[4,this.load(o)]):[3,2]):[3,2];case 1:d.sent(),d.label=2;case 2:return[2]}}))}))},(0,i.default)(o),o._config=(0,y.createConfig)(n),o._destroyingSource=new a.Subject,o._loadRequestSource=new a.Subject,o._eventProxy.addEventSource(u.EventTypes.LOAD_REQUEST,o._loadRequestSource),o._eventProxy.addEventSource(u.EventTypes.DESTROYING,o._destroyingSource),o._el=(0,v.getEl)(t),o.initLogging(),o.initChromecast(),o.initStats(),o._services=o.configureServices(o._config),o._queueManager=new p.QueueManager({player:o,services:o._services}),o._loadRequestSource=new a.Subject,o._eventProxy.addEventSource(u.EventTypes.LOAD_REQUEST,o._loadRequestSource),o._pluginCreatedSource=new a.Subject,o._eventProxy.addEventSource(u.EventTypes.PLUGIN_CREATED,o._pluginCreatedSource),o.attachPlugins(),o.on(u.EventTypes.ERROR,(function(e,t){t.type===u.ErrorTypes.SOURCE_EXPIRED&&o.handleSourceExpired()})),o._config.mountToWindow&&(window.doris=o),o}return r.__extends(t,e),Object.defineProperty(t.prototype,"canDVR",{get:function(){var e=this._config.dvrMinDuration,t=void 0===e?120:e;return this.getSeekableDuration()>t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sourceHandler",{get:function(){return this._chromecastHandler&&this._isCasting?this._chromecastHandler.withMiddlewares:this._handler.withMiddlewares},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return b.VERSION},enumerable:!1,configurable:!0}),t.prototype.addPlugin=function(e){var t=e.config,n=e.name,r=e.Plugin;if(this._plugins.has(n))E.warn("A plugin with the following name already exists: ".concat(n));else try{var i=new r(this,t);this._plugins.set(n,i),this._config.mountPluginsToWindow&&(window[n]=i),this._pluginCreatedSource.next({name:n,plugin:i})}catch(e){E.error("Failed to create '".concat(n,"' plugin. Error: ").concat((0,v.errorToString)(e)))}},t.prototype.addSourceResolver=function(e,t){this._services.sourceManager.addSourceResolver(e,t)},t.prototype.getCastState=function(){var e,t;return this._config.castConfig.enabled&&!c.ChromecastHandler.canCast()?u.CastStates.NOT_SUPPORTED:null!==(t=null===(e=this._chromecastHandler)||void 0===e?void 0:e.withMiddlewares.getCastState())&&void 0!==t?t:this._config.castConfig.enabled?u.CastStates.INITIALIZING:u.CastStates.DISABLED},t.prototype.getConfig=function(){return this._config},t.prototype.getElement=function(){return this._el},t.prototype.getFullscreenElement=function(){return this._config.fullscreenElement?(0,v.getEl)(this._config.fullscreenElement):e.prototype.getFullscreenElement.call(this)},t.prototype.getIsDebugOverlayActive=function(){var e,t;return null!==(t=null===(e=this._stats)||void 0===e?void 0:e.isEnabled)&&void 0!==t&&t},t.prototype.getMediaInfo=function(){return this.sourceHandler.getMediaInfo()},t.prototype.getPlugins=function(){return Array.from(this._plugins.values())},t.prototype.getQueueManager=function(){return this._queueManager},t.prototype.getServices=function(){return this._services},t.prototype.getStats=function(){return this._stats},t.prototype.load=function(e){var t,n;return r.__awaiter(this,void 0,void 0,(function(){var i,a,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return i=(0,v.createMediaInfo)(e,this._config,this._services),this._loadRequestSource.next({loadRequest:i,mediaInfo:i}),this.reset(),this._isCasting?[3,2]:[4,this._services.sourceManager.getContentType(i.source)];case 1:if(a=r.sent(),!(o=this._config.handlers.find((function(e){return e.canPlayType(a)}))))throw this._handler=T,null===(t=this._stats)||void 0===t||t.setSourceHandler(T.withoutMiddlewares),new Error("Cannot play '".concat(a,"' on this device!"));this._handler=this.createHandler(o),r.label=2;case 2:null===(n=this._stats)||void 0===n||n.setSourceHandler(this._chromecastHandler&&this._isCasting?this._chromecastHandler.withoutMiddlewares:this._handler.withoutMiddlewares),r.label=3;case 3:return r.trys.push([3,5,,6]),[4,this.sourceHandler.load(i)];case 4:return r.sent(),[3,6];case 5:if(!((s=r.sent())instanceof l.LoadInterruptedError))throw s;return[3,6];case 6:return[2]}}))}))},t.prototype.requestFullscreen=function(){var t=this._config.fullscreenElement;return t?_.fullscreen.requestFullscreen((0,v.getEl)(t)):e.prototype.requestFullscreen.call(this)},t.prototype.setFullscreenElement=function(e){this._config.fullscreenElement=e},t.prototype.toggleDebugOverlay=function(e){return this._stats?(void 0===e&&(e=!this.getIsDebugOverlayActive()),e?this._stats.show():this._stats.hide(),e):(E.warn("A call was made to toggle the debug overlay but the feature is not currently enabled. To activate it, set `config.debug.enabled` to `true`."),!1)},t.prototype.attachPlugins=function(){var e=this;this._config.plugins.forEach((function(t){return e.addPlugin(t)}))},t.prototype.configureServices=function(e){var t=e.enableMediaSessions?new h.MediaSessionManager({player:this}):void 0,n=new m.SourceManager({contentTypeDetectionOptions:e.enableContentTypeDetection,sourceExpiryThreshold:e.sourceExpiryThreshold});return{mediaSessionManager:t,queueItemService:new p.QueueItemService,sourceManager:n}},t.prototype.ensureCastApiLoaded=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){return chrome&&chrome.cast&&chrome.cast.isAvailable?[2,Promise.resolve()]:(e=new Promise((function(e,t){window.__onGCastApiAvailable=function(n){delete window.__onGCastApiAvailable,n?e():t(new Error("Failed to initialize Cast Application Framework!"))}})),(0,v.embedScript)(s.CAST_SENDER_URL),[2,e])}))}))},t.prototype.handleSourceExpired=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,i;return r.__generator(this,(function(a){switch(a.label){case 0:return(null==(e=this.getMediaInfo())?void 0:e.source.sourceType)!==u.SourceTypes.DYNAMIC?[3,2]:(t=this.getCurrentTime(),n=!this.getIsPaused(),i=r.__assign(r.__assign({},e),{autoPlay:n?u.AutoPlayOptions.YES:u.AutoPlayOptions.NO,startFrom:t}),[4,this.load(i)]);case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},t.prototype.initChromecast=function(){var e;return r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(n){switch(n.label){case 0:return(null===(e=this._config)||void 0===e?void 0:e.castConfig.enabled)&&c.ChromecastHandler.canCast()&&!this._chromecastHandler?(this.on(u.EventTypes.CAST_STATE_CHANGE,(function(e,n){switch(n.castState){case u.CastStates.CONNECTED:t.handleCastConnected();break;case u.CastStates.NOT_CONNECTED:t.handleCastDisconnected()}})),[4,this.ensureCastApiLoaded()]):[3,2];case 1:n.sent(),this._chromecastHandler=this.createHandler(c.ChromecastHandler),n.label=2;case 2:return[2]}}))}))},t.prototype.initLogging=function(){var e=this._config.logging;e.enabled?(f.logger.level=e.level,e.consoleOutput&&f.logger.addOutput(f.ConsoleOutput)):f.logger.level=u.LogLevels.OFF},t.prototype.initStats=function(){var e=this._config.debug,t=e.enabled,n=e.bufferSize,r=e.localStorageKey,i=e.shortcut,a=e.updateInterval,s=e.mountTo,l=e.metrics,c=e.inputs;t&&(this._stats=new g.Stats({bufferSize:n,inputs:c,localStorageKey:r,metrics:l,parentNode:null!=s?s:this._el,player:this,pollingInterval:a,shortcut:i,sourceHandler:this._handler.withoutMiddlewares}),this._eventProxy.addEventSource(u.EventTypes.DEBUG_OVERLAY_CHANGE,this._stats.onIsEnabledChanged.pipe((0,o.map)((function(e){return{isActive:e}})))))},t.prototype.shouldAutoCast=function(e){switch(this._config.castConfig.autoCastPolicy){case u.AutoCastPolicy.ALWAYS:return!0;case u.AutoCastPolicy.WHEN_IDLE:return void 0===e;case u.AutoCastPolicy.NEVER:return!1}},t}(d.PlayerHandlerProxy);t.Player=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.keySystem=t,this.authorizationToken=e}return Object.defineProperty(e.prototype,"customData",{get:function(){return""},enumerable:!0,configurable:!0}),e.prototype.headers=function(){return{}},e}();t.HandlerDrm=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(795),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Consumer=t.Provider=t.VideoContext=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(233);t.VideoContext=i.default.createContext({controls:{canNudge:function(){return!1},destroy:function(){return null},exitPip:function(){return Promise.resolve()},getAudioTrack:function(){return null},getContentTimeFromStreamTime:function(){return 0},getBifImage:function(e){return null},getCurrentTime:function(){return 0},getElement:function(){return null},getLevel:function(){return null},getSourceHandlerType:function(){return null},getStreamTimeFromContentTime:function(){return 0},getTextTrack:function(){return null},nudge:function(e){return null},nudgeVolume:function(e){return null},on:function(e,t){return null},once:function(e,t){return null},off:function(e,t){return null},pause:function(){return null},play:function(){return Promise.resolve()},requestPip:function(){return Promise.resolve()},resetHtmlTextTrackDisplaySettings:function(){return null},seek:function(e){return null},setAudioTrack:function(){return null},setFullscreen:function(){return null},setLevel:function(){return null},setPlaybackRate:function(){return null},setTextTrack:function(){return null},setHtmlTextTrackContainer:function(){return null},setVolume:function(){return null},startCasting:function(){return null},stopCasting:function(){return null},toggleFullscreen:function(){return null},toggleMute:function(){return null},togglePlay:function(){return null},updateHtmlTextTrackDisplaySettings:function(){return null}},options:{useOptimisticSeeking:!0},overlayStates:{keepOverlayActiveClassname:"",activateOverlay:function(){return null},activateOverlayTimed:function(e){return null},deactivateOverlay:function(){return null},keepOverlayActivated:function(){return null}},state:r.__assign({},a.INITIAL_CONTAINER_STATE)}),t.Provider=t.VideoContext.Provider,t.Consumer=t.VideoContext.Consumer},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextTrack=t.TEXT_CONTAINER_CLASSNAME=t.TEXT_WRAPPER_CLASSNAME=void 0;var r=n(2),i=n(138),a=r.__importStar(n(3));t.TEXT_WRAPPER_CLASSNAME="ds-text-track__wrapper",t.TEXT_CONTAINER_CLASSNAME="ds-text-track",t.TextTrack=a.forwardRef((function(e,n){var r;return a.default.createElement("div",{className:t.TEXT_CONTAINER_CLASSNAME},a.default.createElement("div",{ref:n,className:t.TEXT_WRAPPER_CLASSNAME,id:null!==(r=e.id)&&void 0!==r?r:i.TEXT_TRACK_CONTAINER_ID}))}))},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var o=i.apply(null,r);o&&e.push(o)}}else if("object"===a){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuCommon=void 0;var r="ds-menu--active",i=function(e){var t=this;this.mouseEnter=function(){var e=document.getElementsByClassName(r);Array.from(e).forEach((function(e){return e.classList.remove(r)})),t.$menu&&t.$menu.current&&(t.$menu.current.classList.add(r),window.clearTimeout(t.timer))},this.mouseLeave=function(){t.timer=window.setTimeout(t.closeMenu,500)},this.closeMenu=function(){t.$menu&&t.$menu.current&&t.$menu.current.classList.remove(r)},this.$menu=e};t.MenuCommon=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var r=n(2),i=n(10),a=r.__importDefault(n(3)),o=n(462),s=n(13),u=function(e){function t(t){var n=e.call(this,t)||this;return n.scrubbingSubscriptions=[],n.subscriptions=[],n.touchIdentifier=void 0,n.nudgeValueTimeout=void 0,n.calculateClassNames=function(){var e,t=n.props,r=t.classes,i=t.shyScrubber,a=n.state.isScrubbing,o=n.orientation,u=s.css("ds-slider__horizontal",null==r?void 0:r.horizontal),l=s.css("ds-slider__horizontal-reversed",null==r?void 0:r.horizontalReversed),c=s.css("ds-slider__vertical",null==r?void 0:r.vertical),d=s.css("ds-slider__vertical-reversed",null==r?void 0:r.verticalReversed),f=s.css("ds-slider__draggable",null==r?void 0:r.draggable);return{marker:s.css("ds-slider__marker",null==r?void 0:r.marker),markerContainer:s.css("ds-slider__marker-container",null==r?void 0:r.markerContainer),root:s.css("ds-slider__root",(e={"ds-slider__scrubbing":a},e[u]="horizontal"===o,e[l]="horizontal-reversed"===o,e[c]="vertical"===o,e[d]="vertical-reversed"===o,e[f]=n.draggable,e),null==r?void 0:r.root),scrubber:s.css({"ds-slider__scrubber":!i,"ds-slider__shy-scrubber":i},null==r?void 0:r.scrubber),scrubberContainer:s.css("ds-slider__scrubber-container",null==r?void 0:r.scrubberContainer),slider:s.css("ds-slider__slider",null==r?void 0:r.slider),sliderBackground:s.css("ds-slider__slider-background",null==r?void 0:r.sliderBackground),sliderHover:s.css("ds-slider__slider-hover",null==r?void 0:r.sliderHover),tooltipContainer:s.css("ds-slider__tooltip-container",null==r?void 0:r.tooltipContainer),tooltipImage:s.css("ds-slider__tooltip-image",null==r?void 0:r.tooltipImage),tooltipLabel:s.css("ds-slider__tooltip-label",null==r?void 0:r.tooltipLabel)}},n.getMarkerStyles=function(e,t){switch(n.orientation){case"vertical":return{top:100*e+"%",height:100*t+"%"};case"vertical-reversed":return{bottom:100*e+"%",height:100*t+"%"};case"horizontal-reversed":return{right:100*e+"%",width:100*t+"%"};default:case"horizontal":return{left:100*e+"%",width:100*t+"%"}}},n.getTransformationAxis=function(){switch(n.orientation){case"vertical":case"vertical-reversed":return"Y";case"horizontal":case"horizontal-reversed":return"X"}},n.getPositionFromValue=function(e){if(!n.el.current||!n.draggable)return 0;switch(n.orientation){case"vertical":return n.el.current.offsetHeight*e;case"vertical-reversed":return n.el.current.offsetHeight*(1-e);case"horizontal-reversed":return n.el.current.offsetWidth*(1-e);default:case"horizontal":return n.el.current.offsetWidth*e}},n.getTooltipImageSize=function(){return n.tooltipImageRef.current?{width:n.tooltipImageRef.current.offsetWidth,height:n.tooltipImageRef.current.offsetHeight}:{width:240,height:140}},n.getTouchFromEvent=function(e){for(var t=e.changedTouches,r=0;r<t.length;r++)if(t[r].identifier===n.touchIdentifier)return t[r]},n.getValueFromEvent=function(e){if(!n.targetEl)return 0;var t=n.targetEl.getBoundingClientRect();switch(n.orientation){case"vertical":return(e.clientY-t.top)/t.height;case"vertical-reversed":return 1-(e.clientY-t.top)/t.height;case"horizontal-reversed":return 1-(e.clientX-t.left)/t.width;default:case"horizontal":return(e.clientX-t.left)/t.width}},n.handleDragEnd=function(){var e=n.props.onDragEnd;n.scrubbingSubscriptions.forEach((function(e){return e.unsubscribe()})),n.scrubbingSubscriptions=[],n.touchIdentifier=void 0,e&&e(n.state.value),n.setState({isScrubbing:!1})},n.handleDragChange=function(e){var t=i.clamp(e,0,1);n.props.onValueChange&&n.props.onValueChange(t),n.handleHoverChange(t),n.setState({value:t})},n.handleDragStart=function(e){var t=n.props.onDragStart;null==e||e.stopPropagation(),t&&t(n.props.value),n.setState({isScrubbing:!0,value:n.props.value})},n.handleHoverChange=function(e){var t=i.clamp(e,0,1);n.setState({hoverPosition:t})},n.handleMouseDown=function(e){if(0===e.button){n.handleDragStart(e.nativeEvent);var t=o.fromEvent(document,"mousemove"),r=o.fromEvent(document,"mouseup");n.scrubbingSubscriptions.push(t.subscribe(n.handleMouseMove)),n.scrubbingSubscriptions.push(r.subscribe(n.handleMouseUp)),n.handleMouseMove(e.nativeEvent)}},n.handleMouseHover=function(e){var t=n.getValueFromEvent(e.nativeEvent);n.handleHoverChange(t)},n.handleMouseMove=function(e){var t=n.getValueFromEvent(e);n.handleDragChange(t)},n.handleMouseUp=function(e){n.handleDragEnd()},n.handleTouchEnd=function(e){e.preventDefault(),n.getTouchFromEvent(e)&&n.handleDragEnd()},n.handleTouchHover=function(e){var t=n.getTouchFromEvent(e.nativeEvent);if(t){var r=n.getValueFromEvent(t);n.handleHoverChange(r)}},n.handleTouchMove=function(e){var t=n.getTouchFromEvent(e);if(t){var r=n.getValueFromEvent(t);n.handleDragChange(r)}},n.handleTouchStart=function(e){n.handleDragStart(e.nativeEvent),null!=n.touchIdentifier&&(n.scrubbingSubscriptions.forEach((function(e){return e.unsubscribe()})),n.scrubbingSubscriptions=[]);var t=o.fromEvent(document,"touchmove",{passive:!0}),r=o.fromEvent(document,"touchend");n.scrubbingSubscriptions.push(t.subscribe(n.handleTouchMove)),n.scrubbingSubscriptions.push(r.subscribe(n.handleTouchEnd)),n.touchIdentifier=e.changedTouches[0].identifier,n.handleTouchMove(e.nativeEvent)},n.limitTooltipImagePosition=function(e){if(!n.el.current)return 0;var t=n.getTooltipImageSize(),r=t.width,a=t.height;switch(n.props.orientation){case"vertical":case"vertical-reversed":var o=n.el.current.offsetHeight,s=a/2;return i.clamp(e,s,o-s);default:case"horizontal":case"horizontal-reversed":var u=n.el.current.offsetWidth;s=r/2;return i.clamp(e,s,u-s)}},n.renderTooltip=function(e,t){var r;if(n.isTooltipShowing){var i=n.state.hoverPosition,o=n.getPositionFromValue(i),s=n.props.tooltipLabel&&n.props.tooltipLabel(i),u=n.props.tooltipImage&&n.props.tooltipImage(i),l=null!==(r=n.props.tooltipIcon)&&void 0!==r?r:null;return a.default.createElement(a.default.Fragment,null,s&&a.default.createElement("div",{className:e.tooltipContainer,style:{transform:"translate"+t+"("+o+"px)"}},a.default.createElement("div",{className:e.tooltipLabel},a.default.createElement("span",null,s))),u&&a.default.createElement("div",{className:e.tooltipContainer,style:{transform:"translate"+t+"("+n.limitTooltipImagePosition(o)+"px)"}},l,a.default.createElement("div",{className:e.tooltipImage},a.default.createElement("img",{ref:n.tooltipImageRef,src:u}))))}return null},n.nudgeValue=function(e,t){var r=e+n.value;clearTimeout(n.nudgeValueTimeout),n.state.isScrubbing||n.handleDragStart(),n.handleDragChange(r),n.nudgeValueTimeout=window.setTimeout(n.handleDragEnd,t)},n.el=a.default.createRef(),n.sliderContainerRef=a.default.createRef(),n.tooltipImageRef=a.default.createRef(),n.state={hoverPosition:0,isHovered:!1,isScrubbing:!1,value:0},n}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.draggable&&(this.subscriptions.push(s.onWindowResize.subscribe((function(){e.forceUpdate()}))),this.forceUpdate()),this.targetEl&&this.subscriptions.push(o.fromEvent(this.targetEl,"mouseover").subscribe((function(){e.setState({isHovered:!0})})),o.fromEvent(this.targetEl,"mouseout").subscribe((function(){e.setState({isHovered:!1})})))},t.prototype.componentWillUnmount=function(){this.scrubbingSubscriptions.forEach((function(e){return e.unsubscribe()})),this.subscriptions.forEach((function(e){return e.unsubscribe()})),clearTimeout(this.nudgeValueTimeout)},Object.defineProperty(t.prototype,"draggable",{get:function(){return!1!==this.props.draggable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTooltipShowing",{get:function(){return this.state.isHovered||this.state.isScrubbing},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"orientation",{get:function(){var e;return null!==(e=this.props.orientation)&&void 0!==e?e:"horizontal"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetEl",{get:function(){var e;return null!==(e=this.el.current&&this.el.current.parentElement)&&void 0!==e?e:this.el.current},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.state.isScrubbing?this.state.value:this.props.value},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this,t=this.props.markers,n=this.state.hoverPosition,i=this.draggable,o=this.value,u=this.calculateClassNames(),l=this.getTransformationAxis(),c=i&&{onMouseMove:this.handleMouseHover,onTouchMove:this.handleTouchHover,onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart}||void 0,d=this.renderTooltip(u,l);return a.default.createElement("div",r.__assign({className:u.root,ref:this.sliderContainerRef},c),a.default.createElement("div",{className:u.sliderBackground}),i&&a.default.createElement("div",{className:u.sliderHover,style:{transform:"scale"+l+"("+n+")"}}),a.default.createElement("div",{className:u.slider,ref:this.el,style:{transform:"scale"+l+"("+o+")"}}),t&&t.length>0&&a.default.createElement("div",{className:u.markerContainer},t.map((function(t,n){var r=t.className,i=t.position,o=t.size,l=void 0===o?0:o;return a.default.createElement("div",{key:n,className:s.css(u.marker,r),style:e.getMarkerStyles(i,l)})}))),i&&a.default.createElement(a.default.Fragment,null,d,a.default.createElement("div",{className:u.scrubberContainer,style:{transform:"translate"+l+"("+this.getPositionFromValue(o)+"px)"}},a.default.createElement("div",{className:u.scrubber}))))},t}(a.default.Component);t.Slider=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(976),t),r.__exportStar(n(977),t),r.__exportStar(n(978),t),r.__exportStar(n(979),t),r.__exportStar(n(980),t),r.__exportStar(n(981),t),r.__exportStar(n(293),t),r.__exportStar(n(982),t),r.__exportStar(n(300),t),r.__exportStar(n(983),t),r.__exportStar(n(984),t),r.__exportStar(n(301),t),r.__exportStar(n(985),t),r.__exportStar(n(986),t),r.__exportStar(n(987),t),r.__exportStar(n(302),t),r.__exportStar(n(988),t),r.__exportStar(n(989),t),r.__exportStar(n(990),t),r.__exportStar(n(991),t),r.__exportStar(n(992),t),r.__exportStar(n(303),t),r.__exportStar(n(993),t),r.__exportStar(n(994),t),r.__exportStar(n(995),t),r.__exportStar(n(996),t),r.__exportStar(n(151),t),r.__exportStar(n(999),t),r.__exportStar(n(1e3),t),r.__exportStar(n(304),t),r.__exportStar(n(1001),t),r.__exportStar(n(305),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedSeekBar=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(275);t.ConnectedSeekBar=i.forwardRef((function(e,t){var n,s=a.useVideoContext(),u=s.controls,l=u.getBifImage,c=u.seek,d=s.state,f=d.breaks,h=d.currentTime,p=d.live,m=d.seekable,g=d.optimisticCurrentTime,v=(null!==(n=e.useOptimisticSeeking)&&void 0!==n?n:s.options.useOptimisticSeeking)?g:h;return i.default.createElement(o.SeekBar,r.__assign({ref:t,breaks:f,collapseBreaks:!p,currentTime:v,displayRelativeTime:!p,getPreviewImage:l,seek:c,seekable:m},e))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseDaiKeyValues=e=>{const t={};for(const n in e)t[n]=e[n].join(",");return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(1034))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.METHODS=void 0,function(e){e.connect="CONNECT",e.delete="DELETE",e.get="GET",e.head="HEAD",e.options="OPTIONS",e.patch="PATCH",e.post="POST",e.put="PUT",e.trace="TRACE"}(t.METHODS||(t.METHODS={}))},function(e,t,n){"use strict";var r=n(1051);function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new i("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(r(e.split(".")[n]))}catch(e){throw new i("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(90),i=n(459),a=n(65),o=n(64),s=n(461),u=document.body,l=u.querySelectorAll(".error")[0],c=l.querySelectorAll("h2")[0],d=l.querySelectorAll("p")[0],f=l.querySelectorAll("p")[1],h=l.querySelectorAll(".error-label")[0],p=l.querySelectorAll(".error-code")[0];t.getErrorPayload=async e=>{if(e instanceof Error)return e;{const{status:t}=e;try{return{code:t,data:await e.json()}}catch(e){return{code:t,data:{}}}}},t.sendError=async e=>{r.context.getSenders().forEach(({id:t})=>r.context.sendCustomMessage(o.ERROR_MESSAGE_NAMESPACE,t,JSON.stringify(e)))},t.setError=({title:e,message:t,code:n},i=!0)=>{const{$translation:o}=a.default;o?(c.innerText=o.get(e),d.innerText=o.get(t),f.innerText=o.get("chromecastErrorHelp"),h.innerText=o.get("errorCode")):(c.innerText="Something went wrong.",d.innerText="Sorry!",f.innerText="",h.innerText="Error code: "),p.innerText=n,m(),i&&r.player.destroy()},t.setSimpleError=(e,t)=>{c.innerText=e,d.innerText=t,m()};const m=()=>u.classList.add("with-error");t.hideError=()=>u.classList.remove("with-error"),t.beaconOnError=async e=>{const{status:n="",url:r}=e,a=(e=>"/token/refresh"===(null==e?void 0:e.substr(e.length-"/token/refresh".length)))(r),u=o.BEACON_ERRORS[n.toString()],l=await t.getErrorPayload(e),c={eventName:"chromecast.receiver.beacon.error",level:i.LoggerMessageLevels.ERROR,message:`Error from beacon: ${(u||o.BEACON_ERRORS.default).key}`,stackTrace:JSON.stringify(l)};s.default(c),t.sendError(l),(u||a)&&t.setError(null!=u?u:o.TOKEN_REFRESH_ERROR)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DORIS_CAST_CHANNEL=void 0,t.DORIS_CAST_CHANNEL="urn:x-cast:doris-chromecast-receiver"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomChromecastMessage=void 0,(t.CustomChromecastMessage||(t.CustomChromecastMessage={})).TOGGLE_DEBUG="TOGGLE_DEBUG"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.VideoType=void 0,(r=t.VideoType||(t.VideoType={})).LIVE="LIVE",r.VOD="VOD"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashHandler=void 0;var r=n(0),i=r.__importDefault(n(9)),a=r.__importDefault(n(128)),o=r.__importDefault(n(129)),s=n(12),u=n(15),l=n(40),c=n(8),d=n(16),f=n(10),h=n(92),p=n(589);n(194),n(594);var m=new d.LoggerFileNameDecorator("DashHandler"),g=function(e){function t(t,n,o){var u,l=this;(l=e.call(this,t,n,o)||this)._type=c.HandlerTypes.DASH,l._isLive=!1,(0,i.default)(l),l._durationChangeCheckSource=new s.Subject,l._levelState=new s.BehaviorSubject({currentLevel:e.prototype.getCurrentLevel.call(l),currentLevelVariant:e.prototype.getCurrentLevelVariant.call(l),frameRate:e.prototype.getFrameRate.call(l),levelVariants:e.prototype.getLevelVariants.call(l),levels:e.prototype.getLevels.call(l)}),l._targetDurationChangeSource=new s.BehaviorSubject(l._targetDuration);var d=n.dashConfig,f=(d.bufferStallRecovery,r.__rest(d,["bufferStallRecovery"]));return l._engine=a.default.MediaPlayer().create(),l._engine.updateSettings(r.__assign(r.__assign({},f),{streaming:r.__assign(r.__assign({},l.getStreamingConfig(f.streaming)),{abr:r.__assign({limitBitrateByPortal:n.capLevelToPlayerSize,usePixelRatioInLimitBitrateByPortal:n.capLevelToPlayerSize},null===(u=f.streaming)||void 0===u?void 0:u.abr)})})),l._audioTrackController=new p.DashAudioTrackController({dash:l._engine}),l._textTrackController.destroy(),l._textTrackController=new p.DashTextTrackController({dash:l._engine,elementSource:l._elementSource,textTrackContainer:n.htmlTextTrackContainer,useHTMLTextTracks:n.useHTMLTextTracks}),l.configureEvents(),l.init(),l}return r.__extends(t,e),t.canPlayType=function(e){return e=e.toLowerCase(),["application/dash+xml","application/vnd.ms-sstr+xml"].some((function(t){return-1!==e.indexOf(t)}))?c.CanPlaySource.PROBABLY:c.CanPlaySource.NO},t.prototype.destroy=function(){this.startDestroying(),this.reset(),this._durationChangeCheckSource.complete(),this._levelState.complete(),this._targetDurationChangeSource.complete(),e.prototype.destroy.call(this)},t.prototype.getAudioTracks=function(){return this._audioTrackController.getAudioTracks()},t.prototype.getCurrentAudioTrack=function(){return this._audioTrackController.getCurrentAudioTrack()},t.prototype.getCurrentLevel=function(){return this._levelState.getValue().currentLevel},t.prototype.getCurrentLevelVariant=function(){return this._levelState.getValue().currentLevelVariant},t.prototype.getEngineVersion=function(){return this._engine.getVersion()},t.prototype.getFrameRate=function(){return this._levelState.getValue().frameRate},t.prototype.getIsLive=function(){return this._isLive},t.prototype.getLevelVariants=function(){return this._levelState.getValue().levelVariants},t.prototype.getLevels=function(){return this._levelState.getValue().levels},t.prototype.getSeekableRange=function(){var t,n;if(this.getIsLive()){var r=null!==(n=null===(t=this.getCurrentDVRInfo())||void 0===t?void 0:t.range)&&void 0!==n?n:e.prototype.getSeekableRange.call(this),i=r.start,a=r.end;return{start:i,end:this._engine.getDVRSeekOffset(a)}}return e.prototype.getSeekableRange.call(this)},t.prototype.getSourceUrl=function(){try{var t=this._engine.getSource();if("string"==typeof t)return t}catch(t){}return e.prototype.getSourceUrl.call(this)},t.prototype.getStartDate=function(){var e;return null===(e=this.getCurrentDVRInfo())||void 0===e?void 0:e.manifestInfo.availableFrom},t.prototype.getTargetDuration=function(){return this._targetDuration},t.prototype.load=function(t){var n;return r.__awaiter(this,void 0,void 0,(function(){var i,o,s,l,c=this;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,e.prototype.load.call(this,t)];case 1:if(r.sent(),void 0===(i=this.getElement()))throw new Error("Failed to get HTMLVideoElement.");return[4,this.resolveSource(t.source)];case 2:return o=r.sent(),s=o.url,(l=this._engine).initialize(i,s,!1),[4,new p.WidevinePlayready(l,this._config.drm).init(null!==(n=o.drm)&&void 0!==n?n:t.drm)];case 3:return r.sent(),l.on(a.default.MediaPlayer.events.STREAM_INITIALIZING,this.handleStreamInitializing),l.on(a.default.MediaPlayer.events.STREAM_INITIALIZED,this.updateTargetDuration),l.on(a.default.MediaPlayer.events.STREAM_INITIALIZED,this.handleStreamInitialized),l.on(a.default.MediaPlayer.events.ERROR,this.handleError),l.on(a.default.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,this.handleQualityChangeRequested),l.on(a.default.MediaPlayer.events.METRIC_ADDED,this.handleMetricAdded),this.handleAutoPlay(t.autoPlay),this.hasInitialAudioTrackSelection()&&this.onProgress.pipe((0,u.filter)((function(e){return e.bufferedRanges.length>0})),(0,u.take)(1)).subscribe((function(){c.selectInitialAudioTrack()})),[4,this.onReady.pipe((0,u.filter)((function(e){return e.isReady})),(0,u.takeUntil)(this.onReset),(0,u.take)(1)).toPromise()];case 4:return r.sent(),[2]}}))}))},t.prototype.pause=function(){this._engine.pause()},t.prototype.play=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.getIsPaused()?(e=(0,s.fromEventPattern)((function(e){return n._engine.on(a.default.MediaPlayer.events.PLAYBACK_NOT_ALLOWED,e)}),(function(e){return n._engine.off(a.default.MediaPlayer.events.PLAYBACK_NOT_ALLOWED,e)})),t=(0,s.merge)(this.onPlay.pipe((0,u.mapTo)(!0)),e.pipe((0,u.mapTo)(!1))).pipe((0,u.take)(1)).toPromise(),this._engine.play(),[4,t]):[2];case 1:if(!r.sent())throw this.emitError({type:c.ErrorTypes.AUTO_PLAY_FAILURE,message:"play() failed due to auto play restrictions."}),new Error("play() failed due to auto play restrictions.");return[2]}}))}))},t.prototype.reset=function(){this._engine.off(a.default.MediaPlayer.events.STREAM_INITIALIZING,this.handleStreamInitializing),this._engine.off(a.default.MediaPlayer.events.STREAM_INITIALIZED,this.updateTargetDuration),this._engine.off(a.default.MediaPlayer.events.STREAM_INITIALIZED,this.handleStreamInitialized),this._engine.off(a.default.MediaPlayer.events.ERROR,this.handleError),this._engine.off(a.default.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,this.handleQualityChangeRequested),this._levelState.next({currentLevel:e.prototype.getCurrentLevel.call(this),currentLevelVariant:e.prototype.getCurrentLevelVariant.call(this),frameRate:e.prototype.getFrameRate.call(this),levelVariants:e.prototype.getLevelVariants.call(this),levels:e.prototype.getLevels.call(this)}),this._engine.reset(),e.prototype.reset.call(this)},t.prototype.seekTo=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,o,s,l,c,d;return r.__generator(this,(function(r){switch(r.label){case 0:t=this.getEngine(),r.label=1;case 1:return r.trys.push([1,3,,4]),n="number"==typeof e?e:this.dateToTime(e),i=this.getSeekableRange(),a=i.start,o=i.end,s=(0,f.clamp)(n,a,o),l=t.isDynamic(),c=l?s-t.getDVRSeekOffset(0):s,this._seekingTo=s,t.seek(c),[4,this.onSeeked.pipe((0,u.take)(1)).toPromise()];case 2:return r.sent(),this._seekingTo=void 0,[3,4];case 3:return d=r.sent(),m.error("Failed to perform seek operation! ".concat((0,f.errorToString)(d))),[3,4];case 4:return[2]}}))}))},t.prototype.setCurrentAudioTrack=function(e){this._audioTrackController.setCurrentAudioTrack(e)},t.prototype.setCurrentLevel=function(e){var t=e.id===l.AUTOLEVEL.id;this._engine.updateSettings({streaming:{abr:{autoSwitchBitrate:{video:t},limitBitrateByPortal:t&&this._config.capLevelToPlayerSize}}}),this._engine.setQualityFor("video",e.id),this._levelState.next(r.__assign(r.__assign({},this._levelState.getValue()),{currentLevel:e}))},t.prototype.setCurrentLevelVariant=function(e){if(e<0||e>=this.getLevelVariants())throw new Error("Invalid level variant!");this._levelState.next(r.__assign(r.__assign({},this._levelState.getValue()),{currentLevelVariant:e}))},t.prototype.configureEvents=function(){var t=this;e.prototype.configureEvents.call(this),this._onAudioTrackChange=this._audioTrackController.onAudioTrackChange;var n=this._targetDurationChangeSource.pipe((0,u.switchMap)((function(e){return t._durationChangeCheckSource.pipe((0,u.throttleTime)(1e3*e,s.asyncScheduler,{trailing:!0}))})),(0,u.map)((function(){return{duration:t.getDuration(),isLive:t.getIsLive(),seekableDuration:t.getSeekableDuration(),seekableRange:t.getSeekableRange()}})));this._onDurationChange=(0,s.merge)(this._onDurationChange,n).pipe((0,u.distinctUntilChanged)(f.compareDurationChangeEvents)),this._onLevelChange=this._levelState.pipe((0,u.distinctUntilChanged)(f.compareLevelChangeEvents))},t.prototype.getCurrentDVRInfo=function(){return this._engine.isReady()?this.getEngine().getDashMetrics().getCurrentDVRInfo():null},t.prototype.getFrameRateFromDash=function(){var e,t=this.getEngine(),n=t.getDashAdapter(),i=null===(e=t.getTracksFor("video")[0])||void 0===e?void 0:e.streamInfo,a=n.getAdaptationForType(0,"video",i).Representation,o=void 0;if(Array.isArray(a)&&a.length?o=a[0].frameRate:a&&(o=a.frameRate),"string"==typeof o&&-1!==o.indexOf("/")){var s=r.__read(o.split("/"),2),u=s[0],l=s[1];o=parseFloat(u)/parseFloat(l)}return o},t.prototype.getStreamingConfig=function(e){return"3"===this.getEngineVersion().charAt(0)?(0,o.default)({},{fastSwitchEnabled:!0},e):(0,o.default)({},{buffer:{fastSwitchEnabled:!0},delay:{liveDelay:18}},e)},t.prototype.getTargetDurationFromRepresentation=function(){var e,t;try{var n=null===(e=this._engine.getActiveStream())||void 0===e?void 0:e.getProcessors(),r=null!==(t=null==n?void 0:n.find((function(e){return"video"===e.getType()})))&&void 0!==t?t:null==n?void 0:n.find((function(e){return"audio"===e.getType()}));if(r)return r.getRepresentationInfo().fragmentDuration}catch(e){m.debug("Failed to get target duration. Defaulting to ".concat(l.DEFAULT_TARGET_DURATION,"s. ").concat((0,f.errorToString)(e)))}return l.DEFAULT_TARGET_DURATION},t.prototype.handleError=function(e){m.error(e);var t=c.ErrorTypes.UNKNOWN,n="Unknown DASH.js error has occurred.",r=dashjs.MediaPlayer.errors,i=[r.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,r.DOWNLOAD_ERROR_ID_MANIFEST_CODE,r.MANIFEST_ERROR_ID_NOSTREAMS_CODE];"object"==typeof e.error&&(-1!==i.indexOf(e.error.code)&&(t=c.ErrorTypes.TOTAL_FAILURE),n=e.error.message),this.emitError({message:n,type:t})},t.prototype.handleMetricAdded=function(e){"DVRInfo"===e.metric&&this._durationChangeCheckSource.next()},t.prototype.handleQualityChangeRequested=function(e){var t,n,i,a,o,s=(null===(i=null===(n=null===(t=this._engine.getSettings().streaming)||void 0===t?void 0:t.abr)||void 0===n?void 0:n.autoSwitchBitrate)||void 0===i?void 0:i.video)?l.AUTOLEVEL:this.getLevels()[e.newQuality],u=null!==(o=null===(a=e.streamInfo)||void 0===a?void 0:a.index)&&void 0!==o?o:this.getCurrentLevelVariant();this._levelState.next(r.__assign(r.__assign({},this._levelState.getValue()),{currentLevel:s,currentLevelVariant:u,frameRate:this.getFrameRateFromDash()}))},t.prototype.handleStreamInitialized=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return this._engine.off(a.default.MediaPlayer.events.STREAM_INITIALIZED,this.handleStreamInitialized),this._mediaInfo?"number"==typeof(e=this._mediaInfo.startFrom)&&e>0?[4,this.seekTo(e)]:[3,2]:[2];case 1:return t.sent(),[3,4];case 2:return e instanceof Date?[4,this.seekTo(e)]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.syncLevels(),this._levelState.next(r.__assign(r.__assign({},this._levelState.getValue()),{frameRate:this.getFrameRateFromDash()})),this._config.dashConfig.bufferStallRecovery.enabled&&new p.DashBufferStallManager(this,this._config.dashConfig.bufferStallRecovery),this._readySource.next({isReady:!0}),[2]}}))}))},t.prototype.handleStreamInitializing=function(e){var t,n;this._isLive=(null===(n=null===(t=null==e?void 0:e.streamInfo)||void 0===t?void 0:t.manifestInfo)||void 0===n?void 0:n.duration)===Number.POSITIVE_INFINITY},t.prototype.syncLevels=function(){var e=this._engine.getTracksFor("video"),t=this._engine.getBitrateInfoListFor("video").reduce((function(e,t,n){var r=t.height,i=t.width,a=t.bitrate;return r&&i&&a&&e.push({bitrate:a,height:r,id:n,label:"".concat(r,"p"),width:i}),e}),[]).concat(l.AUTOLEVEL);this._levelState.next(r.__assign(r.__assign({},this._levelState.getValue()),{levels:t,levelVariants:e.length}))},t.prototype.updateTargetDuration=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this._targetDuration=this.getTargetDurationFromRepresentation(),this._targetDurationChangeSource.next(this._targetDuration),[2]}))}))},t}(h.HTMLVideoHandlerBase);t.DashHandler=g},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var r=n(8),i=new Set;t.logger=new function(e){void 0===e&&(e=r.LogLevels.OFF);var t=this;this.level=r.LogLevels.DEBUG,this.addOutput=function(e){return i.add(e)},this.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.logMessage(r.LogLevels.DEBUG,"debug",e)},this.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.logMessage(r.LogLevels.ERROR,"error",e)},this.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.logMessage(r.LogLevels.INFO,"info",e)},this.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.logMessage(r.LogLevels.LOG,"log",e)},this.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.logMessage(r.LogLevels.WARN,"warn",e)},this.logMessage=function(e,n,r){e>=t.level&&i.forEach((function(e){return e[n](r)}))},this.level=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browser=void 0;var r,i,a=n(0),o=n(501);!function(e){e.IE="ie",e.EDGE="edge",e.CHROME="chrome",e.SAFARI="safari",e.IOS_SAFARI="ios",e.CHROME_IOS="crios"}(r||(r={})),function(e){e.ANDROID="Android OS",e.IOS="iOS"}(i||(i={}));var s=(0,o.detect)(),u={name:s&&s.name||"",os:s&&s.os||"",version:s&&s.version||"0"};t.browser=a.__assign(a.__assign({},u),{version:parseFloat(u.version),versionString:u.version,isMS:u.name===r.EDGE||u.name===r.IE,isChrome:u.name===r.CHROME||u.name===r.CHROME_IOS,isIE:u.name===r.IE,isSafari:u.name===r.SAFARI||u.os===i.IOS,isMobile:u.os===i.ANDROID||u.os===i.IOS,isAndroid:u.os===i.ANDROID,isIos:u.os===i.IOS})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasKey=void 0,t.hasKey=function(e,t){return t in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConfig=void 0;var r=n(40),i=n(43),a=n(134),o=n(184),s=n(135),u=new i.LoggerFileNameDecorator("createConfig");t.createConfig=function(e){var t=(0,s.mergeConfigs)(r.DEFAULT_CONFIG,e);try{var n=(0,o.getDebugConfigOverrides)();n&&(t=(0,s.mergeConfigs)(t,n))}catch(e){u.warn("Failed to merge debug config overrides. Error: ".concat((0,a.errorToString)(e)))}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyObservable=void 0;var r=n(12),i=n(507),a=function(){function e(e){var t;if(void 0===e&&(e={}),(0,i.isSubjectProxyObservableConfig)(e)){var n=e.EmitterEngine,a=void 0===n?r.Subject:n;this._emitter=new a}else{if(!(0,i.isBehaviorSubjectProxyObservableConfig)(e))throw new Error("Invalid initialisation of ProxyObservable!");a=e.EmitterEngine;var o=e.defaultValue;this._emitter=new a(o)}this._filters=null!==(t=e.filters)&&void 0!==t?t:[],this._sources=new Map}return Object.defineProperty(e.prototype,"sources",{get:function(){return Array.from(this._sources.keys())},enumerable:!1,configurable:!0}),e.prototype.asObservable=function(){var e=this._emitter.asObservable();return this._filters.forEach((function(t){e=e.pipe(t)})),e},e.prototype.complete=function(){this._emitter.complete()},e.prototype.updateSources=function(e){var t=this;this.sources.forEach((function(n){if(-1===e.indexOf(n)){var r=t._sources.get(n);r&&(r.unsubscribe(),t._sources.delete(n))}})),e.forEach((function(e){if(!t._sources.has(e)){var n=e.subscribe((function(e){t._emitter.next(e)}),void 0,(function(){t._sources.delete(e)}));n.closed||t._sources.set(e,n)}}))},e}();t.ProxyObservable=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionContext=void 0;var r=n(0);t.SubscriptionContext=function(e){var t=this;this.on=function(e,n){return t._addEventListener(e,n,!1),t._eventListeners.push([e,n]),t},this.once=function(e,n){return t._addEventListener(e,n,!0),t._eventListeners.push([e,n]),t},this.unsubscribe=function(){t._eventListeners.forEach((function(e){var n=r.__read(e,2),i=n[0],a=n[1];t._removeEventListener(i,a)})),t._eventListeners=[]},this._addEventListener=e.addEventListener,this._removeEventListener=e.removeEventListener,this._eventListeners=[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(511),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(512),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(516),t),r.__exportStar(n(517),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(519),t),r.__exportStar(n(520),t),r.__exportStar(n(521),t),r.__exportStar(n(522),t),r.__exportStar(n(131),t),r.__exportStar(n(523),t),r.__exportStar(n(172),t),r.__exportStar(n(173),t),r.__exportStar(n(524),t),r.__exportStar(n(525),t),r.__exportStar(n(174),t),r.__exportStar(n(175),t),r.__exportStar(n(526),t),r.__exportStar(n(132),t),r.__exportStar(n(176),t),r.__exportStar(n(527),t),r.__exportStar(n(528),t),r.__exportStar(n(177),t),r.__exportStar(n(529),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMediaInfo=void 0;var r=n(8),i=n(10);t.parseMediaInfo=function(e){var t=e.customData;return(0,i.hasKey)(t,"sourceType")&&t.sourceType===r.SourceTypes.RESOLVABLE&&(0,i.hasKeyOfType)(t,"resolutionType","string")&&(0,i.hasKeyOfType)(t,"resolutionCustomData","object")?{sourceType:r.SourceTypes.RESOLVABLE,id:e.contentId,resolutionType:t.resolutionType,contentType:e.contentType,customData:t.resolutionCustomData}:{sourceType:r.SourceTypes.STATIC,url:e.contentUrl||e.contentId,contentType:e.contentType,id:e.contentId}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseMetadata=void 0;var r=n(0);t.parseMetadata=function(e){e.type,e.images,e.metadataType,e.releaseDate,e.releaseYear;var t=r.__rest(e,["type","images","metadataType","releaseDate","releaseYear"]);return r.__assign({},t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextTrack=void 0;var r=n(175);t.parseTextTrack=function(e){return{lang:e.language,label:e.name,kind:(0,r.parseTextTrackKinds)(e.subtype),src:e.trackContentId}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextTrackKinds=void 0;var r=n(8);t.parseTextTrackKinds=function(e){switch(e){case chrome.cast.media.TextTrackType.CAPTIONS:return r.TextTrackKinds.CAPTIONS;case chrome.cast.media.TextTrackType.CHAPTERS:return r.TextTrackKinds.CHAPTERS;case chrome.cast.media.TextTrackType.DESCRIPTIONS:return r.TextTrackKinds.DESCRIPTIONS;case chrome.cast.media.TextTrackType.METADATA:return r.TextTrackKinds.METADATA;default:case chrome.cast.media.TextTrackType.SUBTITLES:return r.TextTrackKinds.SUBTITLES}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeMetadata=void 0;var r=n(0);t.serializeMetadata=function(e){var t=new chrome.cast.media.GenericMediaMetadata,n=e.title,i=e.subtitle,a=r.__rest(e,["title","subtitle"]);return null!=n&&(t.title=n),null!=i&&(t.subtitle=i),Object.keys(a).forEach((function(n){e[n]&&(t[n]=e[n])})),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeTextTrack=void 0,t.serializeTextTrack=function(e){if(e.src){var t=new chrome.cast.media.Track(0,chrome.cast.media.TrackType.TEXT);return t.language=e.lang,t.name=e.label,t.trackContentId=e.src,t.subtype=chrome.cast.media.TextTrackType.SUBTITLES,t}throw new Error("Failed to add text track: `src` is missing")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(531),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(532),t),r.__exportStar(n(533),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(534),t),r.__exportStar(n(535),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(536),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(539),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.hasCookies=function(){var e=new u;try{e.setItem("__test","1");var t=e.getItem("__test");return e.removeItem("__test"),"1"===t}catch(e){return!1}};var i,a=n(541),o=(i=a)&&i.__esModule?i:{default:i};var s="lS_",u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cookieOptions=Object.assign({path:"/"},t),s=void 0===t.prefix?s:t.prefix}return r(e,[{key:"getItem",value:function(e){var t=o.default.parse(document.cookie);return t&&t.hasOwnProperty(s+e)?t[s+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=o.default.serialize(s+e,t,this.cookieOptions),t}},{key:"removeItem",value:function(e){var t=Object.assign({},this.cookieOptions,{maxAge:-1});return document.cookie=o.default.serialize(s+e,"",t),null}},{key:"clear",value:function(){var e=o.default.parse(document.cookie);for(var t in e)0===t.indexOf(s)&&this.removeItem(t.substr(s.length));return null}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDebugConfigOverrides=void 0;var r=n(0).__importDefault(n(101)),i=n(43),a=n(134),o=n(91),s=n(135),u=new i.LoggerFileNameDecorator("getDebugConfigOverrides");t.getDebugConfigOverrides=function(){var e=[];try{var t=r.default.getItem("DORIS_DEBUG_CONFIG");if(t){var n=JSON.parse(t);"object"==typeof n&&e.push(n)}}catch(e){u.warn("Failed to read debug config overrides from local storage. Error: ".concat((0,a.errorToString)(e)))}try{(0,o.hasKeyOfType)(window,"DORIS_DEBUG_CONFIG","object")&&"object"==typeof window.DORIS_DEBUG_CONFIG&&e.push(window.DORIS_DEBUG_CONFIG)}catch(e){u.warn("Failed to read debug config overrides from 'window.[".concat("DORIS_DEBUG_CONFIG","]'. Error: ").concat((0,a.errorToString)(e)))}if(e.length>0)try{return e.reduce((function(e,t){return(0,s.mergeConfigs)(e,t)}),{})}catch(e){u.warn("Failed to merge debug overrides. Error: ".concat((0,a.errorToString)(e)))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var r=n(12),i=function(){function e(){this._onAudioTrackChange=r.NEVER,this._onCanPlay=r.NEVER,this._onCanPlayThrough=r.NEVER,this._onCastStateChange=r.NEVER,this._onDVRWindowForcedSeek=r.NEVER,this._onDurationChange=r.NEVER,this._onEmptied=r.NEVER,this._onEnded=r.NEVER,this._onError=r.NEVER,this._onFullscreenChange=r.NEVER,this._onLevelChange=r.NEVER,this._onLoadStart=r.NEVER,this._onLoadedData=r.NEVER,this._onLoadedMetadata=r.NEVER,this._onPause=r.NEVER,this._onPictureInPictureChange=r.NEVER,this._onPlay=r.NEVER,this._onPlaying=r.NEVER,this._onProgress=r.NEVER,this._onRateChange=r.NEVER,this._onReady=r.NEVER,this._onResize=r.NEVER,this._onSeeked=r.NEVER,this._onSeeking=r.NEVER,this._onStalled=r.NEVER,this._onSuspend=r.NEVER,this._onTextTrackChange=r.NEVER,this._onTimeUpdate=r.NEVER,this._onVolumeChange=r.NEVER,this._onWaiting=r.NEVER}return Object.defineProperty(e.prototype,"onAudioTrackChange",{get:function(){return this._onAudioTrackChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCanPlay",{get:function(){return this._onCanPlay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCanPlayThrough",{get:function(){return this._onCanPlayThrough},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCastStateChange",{get:function(){return this._onCastStateChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDVRWindowForcedSeek",{get:function(){return this._onDVRWindowForcedSeek},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDurationChange",{get:function(){return this._onDurationChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onEmptied",{get:function(){return this._onEmptied},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onEnded",{get:function(){return this._onEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._onError},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onFullscreenChange",{get:function(){return this._onFullscreenChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLevelChange",{get:function(){return this._onLevelChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLoadStart",{get:function(){return this._onLoadStart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLoadedData",{get:function(){return this._onLoadedData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLoadedMetadata",{get:function(){return this._onLoadedMetadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onPause",{get:function(){return this._onPause},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onPictureInPictureChange",{get:function(){return this._onPictureInPictureChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onPlay",{get:function(){return this._onPlay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onPlaying",{get:function(){return this._onPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onProgress",{get:function(){return this._onProgress},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRateChange",{get:function(){return this._onRateChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onReady",{get:function(){return this._onReady},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onResize",{get:function(){return this._onResize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSeeked",{get:function(){return this._onSeeked},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSeeking",{get:function(){return this._onSeeking},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onStalled",{get:function(){return this._onStalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSuspend",{get:function(){return this._onSuspend},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTextTrackChange",{get:function(){return this._onTextTrackChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTimeUpdate",{get:function(){return this._onTimeUpdate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onVolumeChange",{get:function(){return this._onVolumeChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onWaiting",{get:function(){return this._onWaiting},enumerable:!1,configurable:!0}),e}();t.EventEmitter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(187),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextTrackController=void 0;var r=n(0).__importDefault(n(9)),i=n(12),a=n(12),o=n(15),s=n(8),u=n(16),l=n(71),c=n(10),d=n(545),f=n(553),h=new u.LoggerFileNameDecorator("TextTrackController"),p=function(){function e(e){var t=this;this._customTextTrackModeChanged=new i.Subject,this._customTextTracks=[],this._subscriptions=[],(0,r.default)(this),this._textTrackContainer=e.textTrackContainer,this._textTrackListSource=new a.BehaviorSubject(void 0),this._subscriptions.push(e.elementSource.subscribe((function(e){t._video=e})),this.mapElementSourceToTextTrackList(e)),this._trackListController=new l.TrackListController({activateTrack:function(e,n){return t.activateTrack(e,n)},currentTrackChangedEventCreator:function(e){return(0,a.merge)((0,a.fromEvent)(e,s.TrackListEvents.CHANGE),t._customTextTrackModeChanged)},deactivateTrack:function(e){return t.deactivateTrack(e)},filterRawTrack:this.filterRawTrack,isParsedTrackEqual:this.isParsedTrackEqual,isTrackActive:this.isTrackActive,parseTrack:this.parseTextTrack,trackListSource:this._textTrackListSource,tracksChangedEventCreator:function(e){return(0,a.merge)((0,a.fromEvent)(e,s.TrackListEvents.ADD_TRACK),(0,a.fromEvent)(e,s.TrackListEvents.REMOVE_TRACK))}})}return Object.defineProperty(e.prototype,"onTextTrackChange",{get:function(){return this._trackListController.onChange.pipe((0,o.map)((function(e){return{currentTextTrack:e.currentTrack,textTracks:e.tracks}})))},enumerable:!1,configurable:!0}),e.prototype.addTextTrack=function(e){var t=this;if(this._video)if(function(e){return!!e.src}(e))if(this.isTextTrackApiSupported()){var n=document.createElement("track");n.kind=(0,c.parseTextTrackKind)(e.kind),n.label=e.label,n.srclang=(0,c.normaliseTextTrackLang)(e.lang),n.src=e.src,this._video.appendChild(n)}else{var r=this._textTrackListSource.getValue();if(r&&this.isHTMLTextTrackList(r)){var i=new d.CustomTextTrack(e,this._video,{onModeChanged:function(){return t._customTextTrackModeChanged.next()}});this._customTextTracks.push(i),r.addTrack(i)}}else h.error("Failed to add text track: `src` is missing")},e.prototype.destroy=function(){this._subscriptions.forEach((function(e){return e.unsubscribe()})),this._subscriptions=[],this._customTextTracks.forEach((function(e){return e.destroy()})),this._customTextTracks=[],this.destroyCurrentTextTrackList(),this._customTextTrackModeChanged.complete(),this._textTrackListSource.complete(),this._video=void 0},e.prototype.getCurrentTextTrack=function(){return this._trackListController.getCurrentTrack()},e.prototype.getTextTracks=function(){return this._trackListController.getTracks()},e.prototype.setCurrentTextTrack=function(e){this._trackListController.setCurrentTrack(e)},e.prototype.setTextTrackContainer=function(e){this._textTrackContainer=e;var t=this._textTrackListSource.getValue();t&&this.isHTMLTextTrackList(t)&&t.setTextTrackContainer(e)},e.prototype.activateTrack=function(e,t){e.mode=s.TextTrackModes.SHOWING},e.prototype.deactivateTrack=function(e){e.mode=s.TextTrackModes.DISABLED},e.prototype.destroyCurrentTextTrackList=function(){var e=this._textTrackListSource.getValue();e&&this.isHTMLTextTrackList(e)&&e.destroy()},e.prototype.filterRawTrack=function(e,t,n){var r=n.findIndex((function(t){return t.kind===e.kind&&t.language===e.language&&t.label===e.label}))===t,i=e.kind===s.TextTrackKinds.METADATA;return r&&!i},e.prototype.isHTMLTextTrackList=function(e){return"function"==typeof e.destroy},e.prototype.isParsedTrackEqual=function(e,t){return(0,c.isTextTrackEqual)(e,t)},e.prototype.isTextTrackApiSupported=function(){return void 0!==HTMLVideoElement.prototype.addTextTrack&&void 0!==window.TextTrack},e.prototype.isTrackActive=function(e){return e.mode===s.TextTrackModes.SHOWING},e.prototype.mapElementSourceToTextTrackList=function(e){var t=this,n=e.elementSource,r=e.useHTMLTextTracks;return this.isTextTrackApiSupported()||r||(h.warn("Text tracks are not supported by the browser. Falling back to using HTMLTextTracks."),r=!0),n.pipe((0,o.map)((function(e){return e?r?new f.HTMLTextTrackList(e,t._textTrackContainer):e.textTracks:void 0}))).subscribe((function(e){t.destroyCurrentTextTrackList(),t._textTrackListSource.next(e)}))},e.prototype.parseTextTrack=function(e){return{kind:e.kind,label:e.label,lang:e.language}},e}();t.TextTrackController=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_TRACK_TEXT_CLASSNAME=void 0,t.TEXT_TRACK_TEXT_CLASSNAME="ds-text-track__text"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fullscreen=void 0;var r={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},i=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],a=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],o=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],s="undefined"!=typeof window&&void 0!==window.document?window.document:{},u="fullscreenEnabled"in s&&Object.keys(r)||i[0]in s&&i||a[0]in s&&a||o[0]in s&&o||[];t.fullscreen={get exitFullscreen(){return s[u[r.exitFullscreen]].bind(s)},get fullscreenEnabled(){return Boolean(s[u[r.fullscreenEnabled]])},get fullscreenElement(){return s[u[r.fullscreenElement]]},get onfullscreenchange(){return s["on".concat(u[r.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){s["on".concat(u[r.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return s["on".concat(u[r.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){s["on".concat(u[r.fullscreenerror]).toLowerCase()]=e},addEventListener:function(e,t,n){s instanceof Document&&s.addEventListener(u[r[e]],t,n)},removeEventListener:function(e,t,n){s instanceof Document&&s.removeEventListener(u[r[e]],t,n)},requestFullscreen:function(e){return e[u[r.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[u[r.requestFullscreen]]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNonStandardKey=void 0,t.getNonStandardKey=function(e){return null==e.key&&null!=e.keyIdentifier?e.keyIdentifier:e.key}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normaliseTextTrackLang=void 0,t.normaliseTextTrackLang=function(e){return void 0===e&&(e=""),e.replace("_","-")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebkitVideoElement=void 0;var r=n(91);t.isWebkitVideoElement=function(e){return(0,r.hasKeyOfType)(e,"webkitSetPresentationMode","function")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchMapDefined=void 0;var r=n(12),i=n(15);t.switchMapDefined=function(e){return function(t){return t.pipe((0,i.switchMap)((function(t,n){return null!=t?e(t,n):r.NEVER})))}}},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HlsHandler=void 0;var r=n(0),i=r.__importDefault(n(9)),a=r.__importDefault(n(58)),o=r.__importDefault(n(101)),s=n(12),u=n(15),l=n(40),c=n(8),d=n(16),f=n(10),h=n(92),p=n(595),m=new d.LoggerFileNameDecorator("HlsHandler"),g=function(e){function t(t,n,d){var f,h=this;(h=e.call(this,t,n,d)||this)._type=c.HandlerTypes.HLS,h._audioErrorTime=void 0,h._decodingErrorTime=void 0,h._isLive=!1,h._levelDuration=0,h.getBandwidthEstimate=function(){var e=o.default.getItem(l.LEVEL_KEY);return e?parseFloat(e):h._config.defaultBandwidthEstimate},h.getStartLevel=function(e){var t=e.levels;if(null!=o.default.getItem(l.LEVEL_KEY))try{var n=h.getBandwidthEstimate(),i=r.__spreadArray([],r.__read(t),!1).reverse().findIndex((function(e){return parseFloat(e.attrs.BANDWIDTH)<=n}));if(-1===i)return i;var a=t.length-1;return 0===i?a:a-i}catch(e){return-1}var s=h.getElement();return s&&Boolean(h._config.hlsConfig.capLevelToPlayerSize)?t.findIndex((function(e){return s.clientWidth>=e.height})):-1},h.handleBehindLiveWindow=function(){var e=h.getSeekableRange().start;h._dvrWindowForcedSeekSource.next({seekingTo:e}),h.seekTo(e)},h.handleError=function(e,t){var n=t.fatal,r=t.type,i=t.details;if(m.error(e,n,r,i,t),n)switch(r){case a.default.ErrorTypes.NETWORK_ERROR:h._engine.levels||h.emitError({type:c.ErrorTypes.TOTAL_FAILURE,message:"HLS Network failure"});break;case a.default.ErrorTypes.MEDIA_ERROR:var o=Date.now();void 0===h._decodingErrorTime||o-h._decodingErrorTime>2e3?(h._decodingErrorTime=o,h._engine.recoverMediaError()):void 0===h._audioErrorTime||o-h._audioErrorTime>2e3?(h._audioErrorTime=o,h._engine.swapAudioCodec(),h._engine.recoverMediaError()):(h._engine.destroy(),h.emitError({type:c.ErrorTypes.TOTAL_FAILURE,message:"HLS Failure"}));break;default:h.emitError({type:c.ErrorTypes.TOTAL_FAILURE,message:"HLS Failure"})}else{var s=r===a.default.ErrorTypes.MEDIA_ERROR&&i===a.default.ErrorDetails.BUFFER_STALLED_ERROR,u=h.getHasPlayed(),l=h.getIsLive(),d=h.getIsSeeking(),f=h.getBufferedRanges();!s||u||l||d||!f.length||h.seekTo(f[0].start)}},h.handleFragBuffered=function(e,t){var n=t.stats.bwEstimate;n&&o.default.setItem(l.LEVEL_KEY,JSON.stringify(n))},h.handleLevelLoaded=function(e,t){var n=t.details;if(void 0===h._startDate){var r=n.fragments[0].programDateTime;null!==r&&(h._startDate=new Date(r))}h._isLive=n.live,h._levelDuration=n.totalduration,h._targetDuration=n.targetduration,m.debug("Playlist updated.")},h.handleLevelSwitching=function(e,t){var n,i=h._engine.autoLevelEnabled?l.AUTOLEVEL:h.getLevels().find((function(e){return e.id===t.level})),a=t.urlId,o=null===(n=t.attrs)||void 0===n?void 0:n["FRAME-RATE"];h._levelState.next(r.__assign(r.__assign({},h._levelState.getValue()),{currentLevel:i,currentLevelVariant:a,frameRate:o?parseInt(o,10):void 0}))},h.handleManifestParsed=function(e,t){return r.__awaiter(h,void 0,void 0,(function(){var e,n,i,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return e=this._engine,n=t.levels,this.syncLevels(n),this._config.bandwidthPersistence&&(i=this.getStartLevel(t),e.startLevel=i,e.currentLevel=i,e.nextLevel=-1,e.loadLevel=-1,e.on(a.default.Events.FRAG_BUFFERED,this.handleFragBuffered)),this._mediaInfo?(o=this._mediaInfo.startFrom,s="number"==typeof o&&o>0?o:void 0,e.startLoad(s),this.handleAutoPlay(this._mediaInfo.autoPlay),[4,this.onLoadedMetadata.pipe((0,u.take)(1)).toPromise()]):[3,4];case 1:return r.sent(),o instanceof Date?[4,this.seekTo(o)]:[3,3];case 2:r.sent(),r.label=3;case 3:return this._readySource.next({isReady:!0}),[3,5];case 4:throw new Error("Load request is not available!");case 5:return[2]}}))}))},h.syncLevels=function(e){var t=e.map((function(e,t){var n=e.width,r=e.height,i=e.name,a=e.bitrate;return{width:n,height:r,label:null!=i?i:"".concat(r,"p"),bitrate:a,id:t}})).concat(l.AUTOLEVEL),n=e[0].url.length,i=e.every((function(e){return e.url.length===n}));h._levelState.next(r.__assign(r.__assign({},h._levelState.getValue()),{levels:t,levelVariants:i?n:0}))},(0,i.default)(h),h._dvrWindowForcedSeekSource=new s.Subject,h._levelState=new s.BehaviorSubject({currentLevel:e.prototype.getCurrentLevel.call(h),currentLevelVariant:e.prototype.getCurrentLevelVariant.call(h),frameRate:e.prototype.getFrameRate.call(h),levelVariants:e.prototype.getLevelVariants.call(h),levels:e.prototype.getLevels.call(h)});var g=n.hlsConfig;return"number"==typeof g.bufferTargetLength&&(g.abrController=p.AbrController),g.capLevelToPlayerSize=null!==(f=g.capLevelToPlayerSize)&&void 0!==f?f:n.capLevelToPlayerSize,h._engine=new a.default(g),h._engine.subtitleDisplay=!n.useHTMLTextTracks,h._audioTrackController=new p.HlsAudioTrackController({hls:h._engine}),h._networkErrorMonitor=new p.NetworkErrorMonitor(h._engine),h._networkErrorMonitor.onPlaylistExpiry.subscribe((function(){h.emitError({type:c.ErrorTypes.SOURCE_ERROR,message:"HLS Master Playlist has expired!"})})),h.configureEvents(),h.init(),h}return r.__extends(t,e),Object.defineProperty(t.prototype,"onBehindLiveWindow",{get:function(){var e=this;return this.onPlay.pipe((0,u.map)((function(){return e.getCurrentTime()})),(0,u.withLatestFrom)(this.onDurationChange),(0,u.filter)((function(t){var n=r.__read(t,2);return n[0]<n[1].seekableRange.start-e._targetDuration})),(0,u.mapTo)(void 0),(0,u.takeUntil)(this.onReset))},enumerable:!1,configurable:!0}),t.canPlayType=function(e){return e=e.toLowerCase(),a.default.isSupported()&&["application/x-mpegurl","application/vnd.apple.mpegurl"].some((function(t){return-1!==e.indexOf(t)}))?c.CanPlaySource.PROBABLY:c.CanPlaySource.NO},t.prototype.destroy=function(){var t,n;this.startDestroying(),this._networkErrorMonitor.destroy(),this.reset(),null===(n=(t=this._engine).destroy)||void 0===n||n.call(t),e.prototype.destroy.call(this)},t.prototype.getAudioTracks=function(){return this._audioTrackController.getAudioTracks()},t.prototype.getCurrentAudioTrack=function(){return this._audioTrackController.getCurrentAudioTrack()},t.prototype.getCurrentLevel=function(){return this._levelState.getValue().currentLevel},t.prototype.getCurrentLevelVariant=function(){return this._levelState.getValue().currentLevelVariant},t.prototype.getDuration=function(){return this.getIsLive()?1/0:e.prototype.getDuration.call(this)},t.prototype.getEngineVersion=function(){return a.default.version},t.prototype.getFrameRate=function(){return this._levelState.getValue().frameRate},t.prototype.getIsLive=function(){return this._isLive},t.prototype.getLevelVariants=function(){return this._levelState.getValue().levelVariants},t.prototype.getLevels=function(){return this._levelState.getValue().levels},t.prototype.getSeekableRange=function(){var t,n,r;if(this.getIsLive()){var i=null!==(r=null===(n=null===(t=this._engine.levels[this._engine.nextLoadLevel])||void 0===t?void 0:t.details)||void 0===n?void 0:n.fragments[0].start)&&void 0!==r?r:0,a=this._engine.targetLatency?this._engine.targetLatency:this._engine.config.liveSyncDurationCount*this._targetDuration;return{start:i,end:this._levelDuration-a+i}}return e.prototype.getSeekableRange.call(this)},t.prototype.getSourceUrl=function(){return this._engine.url},t.prototype.getStartDate=function(){return this._startDate},t.prototype.load=function(t){var n,i,o;return r.__awaiter(this,void 0,void 0,(function(){var s,l,c,d,f;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,e.prototype.load.call(this,t)];case 1:if(r.sent(),void 0===(s=this.getElement()))throw new Error("Failed to get HTMLVideoElement.");return[4,this.resolveSource(t.source)];case 2:return l=r.sent(),c=l.url,d=this._engine,(f=null!==(i=null===(n=l.drm)||void 0===n?void 0:n.widevine)&&void 0!==i?i:null===(o=t.drm)||void 0===o?void 0:o.widevine)&&this.configureWidevine(f),d.loadSource(c),d.attachMedia(s),d.once(a.default.Events.MANIFEST_PARSED,this.handleManifestParsed),d.once(a.default.Events.AUDIO_TRACKS_UPDATED,this.selectInitialAudioTrack),d.on(a.default.Events.LEVEL_LOADED,this.handleLevelLoaded),d.on(a.default.Events.ERROR,this.handleError),d.on(a.default.Events.LEVEL_SWITCHING,this.handleLevelSwitching),this.onBehindLiveWindow.subscribe(this.handleBehindLiveWindow),[4,this.onReady.pipe((0,u.filter)((function(e){return e.isReady})),(0,u.takeUntil)(this.onReset),(0,u.take)(1)).toPromise()];case 3:return r.sent(),[2]}}))}))},t.prototype.reset=function(){var t,n;this._engine.off(a.default.Events.MANIFEST_PARSED,this.handleManifestParsed),this._engine.off(a.default.Events.AUDIO_TRACKS_UPDATED,this.selectInitialAudioTrack),this._engine.off(a.default.Events.LEVEL_LOADED,this.handleLevelLoaded),this._engine.off(a.default.Events.ERROR,this.handleError),this._engine.off(a.default.Events.LEVEL_SWITCHING,this.handleLevelSwitching),this._levelState.next({currentLevel:e.prototype.getCurrentLevel.call(this),currentLevelVariant:e.prototype.getCurrentLevelVariant.call(this),frameRate:e.prototype.getFrameRate.call(this),levelVariants:e.prototype.getLevelVariants.call(this),levels:e.prototype.getLevels.call(this)}),this.configureWidevine(void 0),null===(n=(t=this._engine).detachMedia)||void 0===n||n.call(t),e.prototype.reset.call(this)},t.prototype.setCurrentAudioTrack=function(e){this._audioTrackController.setCurrentAudioTrack(e)},t.prototype.setCurrentLevel=function(e){var t=e.id;this._engine.nextLevel=t,this._engine.loadLevel=t,this._levelState.next(r.__assign(r.__assign({},this._levelState.getValue()),{currentLevel:e}))},t.prototype.setCurrentLevelVariant=function(e){if(e<0||e>=this.getLevelVariants())throw new Error("Invalid level variant!");this._engine.levels.forEach((function(t){t.urlId=e})),this._levelState.next(r.__assign(r.__assign({},this._levelState.getValue()),{currentLevelVariant:e}))},t.prototype.configureEvents=function(){var t=this;e.prototype.configureEvents.call(this),this._onAudioTrackChange=this._audioTrackController.onAudioTrackChange,this._onDVRWindowForcedSeek=this._dvrWindowForcedSeekSource.asObservable(),this._onLevelChange=this._levelState.pipe((0,u.distinctUntilChanged)(f.compareLevelChangeEvents)),this._onProgress=(0,s.merge)(this._onProgress,(0,s.fromEventPattern)((function(e){return t._engine.on(a.default.Events.FRAG_BUFFERED,e)}),(function(e){return t._engine.off(a.default.Events.FRAG_BUFFERED,e)})).pipe((0,u.map)((function(){var e=t.getElement();return{bufferedRanges:e?(0,f.parseTimeRanges)(e.buffered):[]}})))).pipe((0,u.distinctUntilChanged)(f.compareProgressEvents))},t.prototype.configureWidevine=function(e){var t=this._engine.emeController;if(t&&"_emeEnabled"in t&&"_licenseXhrSetup"in t&&"_widevineLicenseUrl"in t)e?(t._emeEnabled=!0,t._licenseXhrSetup=function(t){var n=e.headers,r="function"==typeof n?n():n;Object.keys(r).forEach((function(e){t.setRequestHeader(e,r[e])}))},t._widevineLicenseUrl=e.licenseServerUrl):(t._emeEnabled=!1,t._licenseXhrSetup=void 0,t._widevineLicenseUrl=void 0);else if(e)throw new Error("Failed to configure Widevine.")},t}(h.HTMLVideoHandlerBase);t.HlsHandler=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(624),t),r.__exportStar(n(625),t),r.__exportStar(n(626),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(648),t),r.__exportStar(n(650),t),r.__exportStar(n(652),t),r.__exportStar(n(668),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="2.9.1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21);r.__exportStar(n(776),t),r.__exportStar(n(884),t),r.__exportStar(n(885),t),r.__exportStar(n(200),t),r.__exportStar(n(227),t),r.__exportStar(n(228),t),r.__exportStar(n(229),t),r.__exportStar(n(886),t),r.__exportStar(n(887),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(201),a=n(786),o=n(224),s=n(227),u=n(228),l=n(229);t.createDiceSourceResolver=function(e){var t=e.http,n=e.player,c=e.playlistInterceptor;return r.__awaiter(void 0,void 0,void 0,(function(){var e;return r.__generator(this,(function(d){switch(d.label){case 0:return[4,i.createStreamSelector(n,c)];case 1:return e=d.sent(),[2,function(i,c){return void 0===c&&(c={}),r.__awaiter(void 0,void 0,void 0,(function(){var d,f,h,p,m,g,v,y,_,b,T,E,S,w,A,M,L,C,D,k,P,I,O,R;return r.__generator(this,(function(x){switch(x.label){case 0:return[4,(N={customData:c,http:t,id:i},r.__awaiter(void 0,void 0,void 0,(function(){var e,t,n,i,a,o,s,c,d,f;return r.__generator(this,(function(r){switch(r.label){case 0:return t=N.http,n=N.id,(i=null===(c=(e=N.customData).resolvedData)||void 0===c?void 0:c.streamInfo)&&(void 0===i.allowedUses||i.allowedUses>0)&&(void 0===i.expiry||i.expiry>new Date)?(i.allowedUses&&i.allowedUses--,[2,i.value]):(a=null===(d=e.isDVR)||void 0===d||d,o=Boolean(null!==(f=e.isLive)&&void 0!==f&&f),[4,u.getPlayerUrlCallback(t,n,o)]);case 1:return s=r.sent().parsedData.playerUrlCallback,[4,l.getStreamInfo(s,o,a)];case 2:return[2,r.sent()]}}))})))];case 1:if(d=x.sent(),f=d.dash,h=d.hls,p=d.hlsWidevine,!f&&!h&&!p)throw new Error("Failed to load media!");if(m=c.enableDash,g=c.enableHls,v=c.enableHlsWidevine,y=s.getDaiUrl(h),_=s.getDaiUrl(p),y||_)try{return b=e({hls:y,hlsWidevine:_},{enableHls:g,enableDash:m,enableHlsWidevine:null!=v?v:void 0===_&&void 0!==y}),T=b.url,E=b.drm,S=a.getImaPlugin(n),w=Boolean(null!==(I=c.isLive)&&void 0!==I&&I),A=null!==(O=c.ima)&&void 0!==O?O:{},[2,o.getImaExpirySource({daiUrl:T,drm:E,imaPlugin:S,isLive:w,adTagParameters:A.adTagParameters,adTagParametersValidFrom:A.adTagParametersValidFrom,adTagParametersValidUntil:A.adTagParametersValidUntil,delaySnapbackUntilFirstPlay:A.delaySnapbackUntilFirstPlay,withSnapback:null===(R=A.withSnapback)||void 0===R||R})]}catch(e){console.warn("Failed to pick DRM SSAI stream.")}return M=Array.isArray(f)?f[0]:f,L=Array.isArray(h)?h[0]:h,C=Array.isArray(p)?p[0]:p,D=e({dash:M,hls:L,hlsWidevine:C},{enableHls:g,enableDash:m,enableHlsWidevine:v}),k=D.url,P=D.drm,[2,{expiry:Date.now()+5e3,url:k,drm:P}]}var N}))}))}]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(20),a=n(10),o=n(104),s=n(97),u=n(105),l=n(204);t.createStreamSelector=function(e,t){return r.__awaiter(void 0,void 0,void 0,(function(){var n,c,d,f;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,a.getSupportedKeySystems()];case 1:return n=r.sent(),c=n[i.KeySystems.FAIRPLAY],d=n[i.KeySystems.WIDEVINE],f=n[i.KeySystems.PLAYREADY],null==t&&(t=new l.PlaylistInterceptor(e)),[2,function(n,r){var i,a,l,h=n.dash,p=n.hls,m=n.hlsWidevine,g=null===(i=null==r?void 0:r.enableDash)||void 0===i||i,v=null===(a=null==r?void 0:r.enableHls)||void 0===a||a,y=null!==(l=null==r?void 0:r.enableHlsWidevine)&&void 0!==l&&l;if(v&&(null==p?void 0:p.drm)&&(c||y&&d)){var _=u.formatDrmParams(p.drm),b=_.token,T=_.licenseServerUrl;return{drm:{fairplay:new s.Fairplay(b,T),widevine:null==t?void 0:t.getWidevineOptions(b,T)},url:p.url}}if(v&&(null==m?void 0:m.drm)&&d){var E=u.formatDrmParams(m.drm);return b=E.token,T=E.licenseServerUrl,{drm:{widevine:null==t?void 0:t.getWidevineOptions(b,T)},url:m.url}}if(g&&(null==h?void 0:h.drm)&&(f||d)){var S=u.formatDrmParams(h.drm);return b=S.token,T=S.licenseServerUrl,{drm:{playready:f?new o.Playready(e,b,T):void 0,widevine:d?new o.Widevine(e,b,T):void 0},url:h.url}}if(v&&p&&!p.drm)return{url:p.url};if(g&&h&&!h.drm)return{url:h.url};throw new Error("No supported stream is available!")}]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(20),a=r.__importDefault(n(9)),o=n(782),s=n(783),u=n(784),l=function(){function e(e,t,n,r){this.keySystem=r,this.licenseServerUrl=n,this.authorizationToken=t,this._player=e,a.default(this)}return Object.defineProperty(e.prototype,"customData",{get:function(){var e;return this.getHandlerDrm(),(null===(e=this._handlerDrm)||void 0===e?void 0:e.customData)||""},enumerable:!0,configurable:!0}),e.prototype.headers=function(){var e;return this.getHandlerDrm(),(null===(e=this._handlerDrm)||void 0===e?void 0:e.headers())||{}},e.prototype.getHandlerDrm=function(){if(!this._handlerDrm)switch(this._player.sourceHandler.getType()){case i.HandlerTypes.DASH:this._handlerDrm=new o.HandlerDrmDash(this._player.getEngine,this.authorizationToken,this.keySystem);break;case i.HandlerTypes.SHAKA:this._handlerDrm=new s.HandlerDrmShaka(this._player.getEngine,this.authorizationToken,this.keySystem);break;case i.HandlerTypes.TIZEN:this.keySystem===i.KeySystems.PLAYREADY&&(this._handlerDrm=new u.HandlerDrmTizen(this.authorizationToken,this.keySystem))}},e}();t.DashDrmBase=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatJwtToken=function(e){return e.startsWith("Bearer")?e:"Bearer "+e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(20),a=r.__importDefault(n(58)),o=n(205),s=function(){function e(t){var n=this;this.getWidevineOptions=function(e,t){return{headers:function(){var t={system:"com.widevine.alpha",key_ids:[n._getKeyId()].filter(Boolean)};return{"X-DRM-INFO":btoa(JSON.stringify(t)),Authorization:""+e}},licenseServerUrl:t}};var o=t.getConfig(),s=e.getPlaylistLoader(t),u=s.getKeyId,l=s.pLoader,c=s.setIsEnabled,d=s.setKeyId;this._getKeyId=u,o.hlsConfig.pLoader!==l&&(o.hlsConfig=r.__assign(r.__assign({},o.hlsConfig),{pLoader:l}),t.on([i.EventTypes.HANDLER_CREATED,i.EventTypes.HANDLER_DESTROYING],(function(e,r){var o=r.sourceHandler;o.hasType(i.HandlerTypes.HLS)&&(c(!1),d(void 0),e===i.EventTypes.HANDLER_CREATED&&o.getEngine().on(a.default.Events.MANIFEST_LOADING,(function(){c(n.isWidevineMediaInfo(t.getMediaInfo()))})))}))),t.on(i.EventTypes.DESTROYING,(function(){e._playlistLoaders.delete(t)}))}return e.prototype.isWidevineMediaInfo=function(e){var t,n,r,a;return!!e&&(!!(null===(t=e.drm)||void 0===t?void 0:t.widevine)||(e.source.sourceType===i.SourceTypes.STATIC?Boolean(null===(n=e.source.drm)||void 0===n?void 0:n.widevine):e.source.sourceType===i.SourceTypes.RESOLVABLE&&Boolean(null===(a=null===(r=e.source.current)||void 0===r?void 0:r.drm)||void 0===a?void 0:a.widevine)))},e._playlistLoaders=new Map,e.getPlaylistLoader=function(t){var n=e._playlistLoaders.get(t);if(void 0!==n)return n;var i=void 0,s=!1,u={getKeyId:function(){return i},pLoader:function(e){function t(t){var n=e.call(this,t)||this,r=n.load.bind(n);return n.load=function(e,t,n){if(s&&"level"==e.type){var a=n.onSuccess;n.onSuccess=function(e,t,n){"string"==typeof e.data&&(i=o.getKeyIdFromManifest(e.data)),a(e,t,n,null)}}r(e,t,n)},n}return r.__extends(t,e),t}(a.default.DefaultConfig.loader),setIsEnabled:function(e){s=e},setKeyId:function(e){i=e}};return e._playlistLoaders.set(t,u),u},e}();t.PlaylistInterceptor=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(103),a=n(206);t.getKeyIdFromManifest=function(e){var t,n,o=e.split("\n");try{for(var s=r.__values(o),u=s.next();!u.done;u=s.next()){var l=u.value;if(0===l.indexOf("#EXT-X-KEY:")){var c=a.parseAttrList(l.replace("#EXT-X-KEY:","")),d=c.KEYFORMAT,f=c.KEYID;if(d===i.KEY_FORMATS.WIDEVINE&&f)return f.replace("0x","")}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/\s*(.+?)\s*=((?:".*?")|.*?)(?:,|$)/g;t.parseAttrList=function(e){var t=null,n={};for(r.lastIndex=0;null!==(t=r.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(796),t),r.__exportStar(n(797),t),r.__exportStar(n(800),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(806),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(808),t),r.__exportStar(n(809),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(814),t),r.__exportStar(n(815),t),r.__exportStar(n(816),t),r.__exportStar(n(817),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(818),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMAPlugin=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(58),o=n(12),s=n(15),u=n(8),l=n(61),c=n(70),d=n(16),f=n(10),h=n(827),p=n(75),m=n(834),g=n(836),v=new d.LoggerFileNameDecorator("IMAPlugin"),y=function(){function e(e,t){var n=this;this._hasPlayed=!1,this._isAdClicked=!1,this.getPlaybackUrl=function(e){return r.__awaiter(n,void 0,void 0,(function(){var t,n,i,a,o,s,l;return r.__generator(this,(function(r){switch(r.label){case 0:return this._loadRequest=e,this._player.getCastState()===u.CastStates.CONNECTED?[2,Promise.resolve("")]:this._config.validateAdTagParametersOnLoad?(v.debug("Validating ad tag parameters before requesting a stream."),t=new Date(Date.now()-12e3),[4,this.requestAdTagParamsForTimeOrDate(t,this.getAdTagParameterMetadataFromSource(e.imaSource))]):[3,2];case 1:if(!r.sent())throw new Error("Ad tag parameter request has been cancelled!");(n=this.getAdTagParameterMetadata())!==h.DEFAULT_AD_TAG_PARAMETER_METADATA&&(i=n.adTagParameters,a=n.adTagParametersValidFrom,o=n.adTagParametersValidUntil,v.debug("Replacing ad tag parameters in the load request."),e.imaSource.adTagParameters=i,e.imaSource.adTagParametersValidFrom=a,e.imaSource.adTagParametersValidUntil=o),r.label=2;case 2:return[4,this.createStreamManager()];case 3:r.sent(),r.label=4;case 4:return r.trys.push([4,6,,7]),[4,this.requestStreamFromImaSdk(e)];case 5:return s=r.sent(),this.registerSnapback(),[2,s];case 6:throw l=r.sent(),this.reset(),l;case 7:return[2]}}))}))},this.getUrl=function(e){return function(){return r.__awaiter(n,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this._player.getCastState()===u.CastStates.CONNECTED?[2,Promise.resolve("")]:[4,this.createStreamManager()];case 1:return t.sent(),[2,this.requestStreamFromImaSdk(e)]}}))}))}},this.handleAddTrack=function(e){var t=e.track;t instanceof TextTrack&&"metadata"===t.kind&&(t.mode="hidden",t.addEventListener("cuechange",(function(){var e,i;if(n._streamManager&&t.activeCues)try{for(var a=r.__values(t.activeCues),o=a.next();!o.done;o=a.next()){var s=o.value,u={};u[s.value.key]=s.value.data,n._streamManager.onTimedMetadata(u)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}})))},(0,i.default)(this),this._config=r.__assign(r.__assign({},h.DEFAULT_CONFIG),t),this._player=e,this._willSnapForward=!1,this._eventProxy=new l.EventProxy({eventTypes:r.__assign(r.__assign({},p.StreamEvent),p.IMAEvents)}),this.attachMiddlewares(),this.createSubscriptionContext=this._eventProxy.createSubscriptionContext,this.off=this._eventProxy.off,this.on=this._eventProxy.on,this.once=this._eventProxy.once,this._adTagParameterMetadata=h.DEFAULT_AD_TAG_PARAMETER_METADATA,this._adTagParametersUpdatedSource=this.createAdTagParametersUpdatedSource(),this._requireAdTagParamsSource=this.createRequireAdTagParamsSource(),this._isPlayingBreakChangeSource=this.createIsPlayingBreakChangeSource(),this._isBreakClickableChangeSource=this.createIsBreakClickableChangeSource(this._isPlayingBreakChangeSource),this._snapbackEventContext=this._player.createSubscriptionContext(),this._libraryLoader=this.createLibraryLoader(),this.initCastLoadInterceptor(),this.initEventSubscriptions()}return e.prototype.ensureSnapbackPerformed=function(e){var t;return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return this.getIsSnapbackEnabled()?this._player.getIsLive()||this.getIsSnapbackDelayedUntilFirstPlay()&&!this._hasPlayed?[2,!1]:this._isCurrentlyInSnapback?(this._isCurrentlyInSnapback=!1,[2,!1]):(n=this._config.disableSnapbackNearEnd)&&this._player.getDuration()-n<=e?(v.debug("The stream time is near the end - snapback will not be triggered."),[2,!1]):!(i=(i=null===(t=this._streamManager)||void 0===t?void 0:t.previousCuePointForStreamTime(e))?this.processCuePoint(i):void 0)||i.played?[3,2]:(v.debug("Triggering snap back."),this._isCurrentlyInSnapback=!0,this._snapForwardTime=e,this._willSnapForward=this._snapForwardTime>i.end,[4,this._player.seekTo(i.start)]):[2,!1];case 1:return r.sent(),[2,!0];case 2:return(null==i?void 0:i.played)?v.debug("Cue point already played",i):v.debug("No previous cue point."),[2,!1]}}))}))},e.prototype.getAdContainer=function(){return this._adContainer},e.prototype.getAdTagParameterMetadata=function(){return this._adTagParameterMetadata},e.prototype.getCuePoints=function(){return this._cuePoints},e.prototype.getIsActive=function(){return Boolean(this.getStreamManager())},e.prototype.getIsPlayingBreak=function(){return this._isPlayingBreakChangeSource.value},e.prototype.getIsPlayingClickableBreak=function(){return this.getIsPlayingBreak()&&this._isBreakClickableChangeSource.value},e.prototype.getIsSnapbackDelayedUntilFirstPlay=function(){var e,t;return null!==(t=null===(e=this._loadRequest)||void 0===e?void 0:e.delaySnapbackUntilFirstPlay)&&void 0!==t?t:this._config.delaySnapbackUntilFirstPlay},e.prototype.getIsSnapbackEnabled=function(){var e,t;return null!==(t=null===(e=this._loadRequest)||void 0===e?void 0:e.withSnapback)&&void 0!==t?t:this._config.withSnapback},e.prototype.getLibraryState=function(){return this._libraryLoader.getLibraryState()},e.prototype.getLoadRequest=function(){var e=this._player.getMediaInfo();if(e&&(0,f.hasKey)(e,"customData"))return e.customData.imaLoadRequest},e.prototype.getStreamData=function(){return this._streamData},e.prototype.getStreamManager=function(){return this._streamManager},e.prototype.getWillSnapForward=function(){return this._willSnapForward},e.prototype.load=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,a,o,s,l;return r.__generator(this,(function(c){switch(c.label){case 0:n=e.backupSource,i=e.imaSource,a=i.type,this._loadRequest=e,o=this.getContentId(i),s={source:{sourceType:u.SourceTypes.DYNAMIC,getUrl:this.getUrl(e),type:a,id:o},customData:r.__assign(r.__assign({},t),{imaLoadRequest:e})},e.drm&&(s.drm=e.drm),c.label=1;case 1:return c.trys.push([1,3,,7]),[4,this._player.load(s)];case 2:return c.sent(),this.registerSnapback(),[3,7];case 3:return l=c.sent(),n?[4,this.loadBackupSource(e)]:[3,5];case 4:return c.sent(),[3,6];case 5:throw l;case 6:return[3,7];case 7:return[2]}}))}))},e.prototype.loadLibrary=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this._libraryLoader.loadLibrary()];case 1:return e.sent(),[2]}}))}))},e.prototype.replaceAdTagParameters=function(e,t,n){var i;void 0===t&&(t=h.DEFAULT_AD_TAG_PARAMETER_METADATA.adTagParametersValidFrom),void 0===n&&(n=h.DEFAULT_AD_TAG_PARAMETER_METADATA.adTagParametersValidUntil);var a={adTagParameters:e,adTagParametersValidFrom:t,adTagParametersValidUntil:n};if(null==this._pendingRequest||this.areAdTagParametersValid(this._pendingRequest.date,a)){this._adTagParameterMetadata=a;var o=this.prepareAdTagParameters(a.adTagParameters);null===(i=this._streamManager)||void 0===i||i.replaceAdTagParameters(o),this._adTagParametersUpdatedSource.next(r.__assign({},a))}},e.prototype.requestAdTagParamsForTimeOrDate=function(e,t){var n;return r.__awaiter(this,void 0,void 0,(function(){var i,a,o=this;return r.__generator(this,(function(r){return null===(n=this._pendingRequest)||void 0===n||n.cancel(),this._pendingRequest=void 0,(i=e instanceof Date?e:this.timeToDate(e))&&!this.areAdTagParametersValid(i,t)?(a=new g.AdTagParameterRequest(i),this._requireAdTagParamsSource.next({isBlocking:!0,date:i}),[2,new Promise((function(e){var t=o._adTagParametersUpdatedSource.pipe((0,s.take)(1)).subscribe((function(){o._pendingRequest=void 0,e(!0)}));a.setCompletionHandler((function(){t.unsubscribe(),e(!1)})),o._pendingRequest=a}))]):[2,!0]}))}))},e.prototype.areAdTagParametersValid=function(e,t){var n=null!=t?t:this._adTagParameterMetadata,r=n.adTagParametersValidFrom,i=n.adTagParametersValidUntil;return r<=e&&e<=i},e.prototype.attachMiddlewares=function(){this._config.withSeekBlockingMiddleware&&this._player.getConfig().middlewares.push(m.seekBlockingMiddleware)},e.prototype.attachProcessAdsListener=function(){if(this._player.sourceHandler.hasType(u.HandlerTypes.HLS)){var e=this._player.sourceHandler.getEngine();e.off(a.Events.FRAG_PARSING_METADATA,this.handleFragParsingMetadata),e.on(a.Events.FRAG_PARSING_METADATA,this.handleFragParsingMetadata)}else this._player.sourceHandler.hasType(u.HandlerTypes.NATIVE)&&this._videoEl&&this._videoEl.textTracks.addEventListener("addtrack",this.handleAddTrack)},e.prototype.clearAdIframe=function(){var e;null===(e=this._adContainer)||void 0===e||e.querySelectorAll("iframe").forEach((function(e){e.remove()}))},e.prototype.connectStreamManager=function(e){var t=this,n=Object.keys(p.StreamEvent).map((function(e){return p.StreamEvent[e]})).map((function(n){var r=(0,o.fromEventPattern)((function(t){return e.addEventListener(n,t,!1)}),(function(t){return e.removeEventListener(n,t)}));return t._config.disableAdsBeforeStartPosition&&(r=r.pipe((0,s.filter)((function(e){return t.filterStreamEvent(e)})))),n===p.StreamEvent.CUEPOINTS_CHANGED&&(r=r.pipe((0,s.map)((function(e){return e.cuePoints=e.getStreamData().cuepoints.map((function(e){return t.processCuePoint(e)})),e})))),[n,r]}));return n.forEach((function(e){var n=r.__read(e,2),i=n[0],a=n[1];return t._eventProxy.addEventSource(i,a)})),function(){n.forEach((function(e){var n=r.__read(e,2),i=n[0],a=n[1];t._eventProxy.removeEventSource(i,a)}))}},e.prototype.createAdContainer=function(){var e=this._config.adContainerParent,t=e?(0,f.getEl)(e):this._player.getElement(),n=document.createElement("div");return n.className=h.AD_CLASSNAMES.container,t.appendChild(n),n},e.prototype.createAdTagParametersUpdatedSource=function(){var e=new o.Subject;return this._eventProxy.addEventSource(p.IMAEvents.AD_TAG_PARAMETERS_UPDATED,e),e},e.prototype.createIsBreakClickableChangeSource=function(e){var t=new o.BehaviorSubject(!1);return this._eventProxy.addEventSource(p.IMAEvents.IS_PLAYING_CLICKABLE_BREAK_CHANGED,(0,o.combineLatest)(e,t).pipe((0,s.skip)(1),(0,s.map)((function(e){var t=r.__read(e,2),n=t[0],i=t[1];return{isPlayingClickableBreak:n&&i}})),(0,s.distinctUntilChanged)((function(e,t){return e.isPlayingClickableBreak===t.isPlayingClickableBreak})),(0,s.share)())),t},e.prototype.createIsPlayingBreakChangeSource=function(){var e=new o.BehaviorSubject(!1);return this._eventProxy.addEventSource(p.IMAEvents.IS_PLAYING_BREAK_CHANGED,e.pipe((0,s.skip)(1),(0,s.map)((function(e){return{isPlayingBreak:e}})),(0,s.distinctUntilChanged)((function(e,t){return e.isPlayingBreak===t.isPlayingBreak})),(0,s.share)())),e},e.prototype.createLibraryLoader=function(){var e=new c.LibraryLoader({getIsLibraryLoaded:this.isLibraryLoaded,libraryName:"Google IMA DAI SDK",libraryUrl:h.IMA_DAI_URL,lazyLoadLibrary:this._config.lazyLoadLibrary});return this._eventProxy.addEventSource(p.IMAEvents.LIBRARY_STATE_CHANGED,e.onLibraryStateChanged),e},e.prototype.createRequireAdTagParamsSource=function(){var e=this,t=new o.Subject;return this._eventProxy.addEventSource(p.IMAEvents.REQUIRE_AD_TAG_PARAMETERS,t),this._player.on(u.EventTypes.TIME_UPDATE,(function(n,r){var i=r.currentDate;i&&e._player.getIsLive()&&(e.areAdTagParametersValid(i)||t.next({date:i,isBlocking:!1}))})),t},e.prototype.createStreamManager=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,this._libraryLoader.loadLibrary()];case 1:if(n.sent(),e=window.google,!((t=this._player.sourceHandler.getElement())instanceof HTMLVideoElement))throw new Error("Video element not found");if(this._videoEl=t,!(null==e?void 0:e.ima.dai.api.StreamManager))throw new Error("google.ima.dai.api.StreamManager not on the page");return this._config.withAdContainer&&!this._adContainer&&(this._adContainer=this.createAdContainer()),this.disconnectStreamManager(),this._streamManager=new e.ima.dai.api.StreamManager(this._videoEl,this._adContainer),this._disconnectStreamManager=this.connectStreamManager(this._streamManager),[2]}}))}))},e.prototype.destroy=function(){var e;v.debug("Destroying IMAPlugin."),this._adTagParametersUpdatedSource.complete(),this._requireAdTagParamsSource.complete(),this._eventProxy.destroy(),this.reset(),null===(e=this._adContainer)||void 0===e||e.remove(),document.removeEventListener("visibilitychange",this.handleVisibilityChange)},e.prototype.disconnectStreamManager=function(){var e;null===(e=this._disconnectStreamManager)||void 0===e||e.call(this),this._disconnectStreamManager=void 0},e.prototype.evictBuffer=function(e){var t=this._player.sourceHandler;if(t.hasType(u.HandlerTypes.HLS)){var n=t.getEngine(),r=Math.max(e-6,0),i=e+n.config.maxBufferLength;v.info("Evicting buffer before ".concat(r,"s and after ").concat(i,"s.")),n.trigger(a.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:r}),n.trigger(a.Events.BUFFER_FLUSHING,{startOffset:i,endOffset:Number.POSITIVE_INFINITY})}else v.debug("Buffer eviction will be skipped, as the source buffer is not of type HLS.")},e.prototype.filterStreamEvent=function(e){var t,n=e.type;if(-1===[p.StreamEvent.AD_BREAK_ENDED,p.StreamEvent.AD_BREAK_STARTED,p.StreamEvent.AD_PROGRESS,p.StreamEvent.STARTED,p.StreamEvent.FIRST_QUARTILE,p.StreamEvent.MIDPOINT,p.StreamEvent.THIRD_QUARTILE,p.StreamEvent.COMPLETE].indexOf(n))return!0;if(!this._player.getIsLive()){var r=null===(t=this._player.getMediaInfo())||void 0===t?void 0:t.startFrom;if("number"==typeof r&&this._player.getCurrentTime()<r)return!1}return!0},e.prototype.getAdTagParameterMetadataFromSource=function(e){var t;return{adTagParameters:null!==(t=e.adTagParameters)&&void 0!==t?t:h.DEFAULT_AD_TAG_PARAMETER_METADATA.adTagParameters,adTagParametersValidFrom:e.adTagParametersValidFrom?new Date(e.adTagParametersValidFrom):h.DEFAULT_AD_TAG_PARAMETER_METADATA.adTagParametersValidFrom,adTagParametersValidUntil:e.adTagParametersValidUntil?new Date(e.adTagParametersValidUntil):h.DEFAULT_AD_TAG_PARAMETER_METADATA.adTagParametersValidUntil}},e.prototype.getContentId=function(e){if(e.contentId)return e.contentId;switch(e.videoType){case u.VideoType.LIVE:return[e.videoType,e.assetKey].join("-");case u.VideoType.VOD:return[e.videoType,e.cmsId,e.videoId].join("-")}},e.prototype.handleAdBreakEnded=function(e,t){var n,r=this;if(this._isPlayingBreakChangeSource.next(!1),this._isBreakClickableChangeSource.next(!1),this._player.getElement().classList.remove(h.AD_CLASSNAMES.adPlaying),null===(n=this._adContainer)||void 0===n||n.classList.remove(h.AD_CLASSNAMES.adPlaying),this._snapForwardTime&&this._snapForwardTime>this._player.getCurrentTime()){var i=this._snapForwardTime;this._player.seekTo(i).then((function(){r._config.evictBufferAfterSnapback&&r.evictBuffer(i)})),v.info("Clear snap back")}this._snapForwardTime=void 0,this._willSnapForward=!1,v.debug(t.type,this._player.getCurrentTime())},e.prototype.handleAdBreakStarted=function(e,t){var n;this._isPlayingBreakChangeSource.next(!0),this._player.getElement().classList.add(h.AD_CLASSNAMES.adPlaying),null===(n=this._adContainer)||void 0===n||n.classList.add(h.AD_CLASSNAMES.adPlaying),v.debug(t.type,this._player.getCurrentTime())},e.prototype.handleAdClick=function(e,t){this._config.pauseOnClick&&(this._isAdClicked=!0,this._player.pause())},e.prototype.handleAdCompleted=function(e,t){this._isBreakClickableChangeSource.next(!1)},e.prototype.handleAdStarted=function(){this._isBreakClickableChangeSource.next(!0)},e.prototype.handleCuepointsChanged=function(e,t){this._cuePoints=t.cuePoints},e.prototype.handleError=function(e,t){v.error(t.getStreamData().errorMessage||"An error has occurred")},e.prototype.handleFragParsingMetadata=function(e,t){var n,i;if(this._streamManager)try{for(var a=r.__values(t.samples),o=a.next();!o.done;o=a.next()){var s=o.value;this._streamManager.processMetadata("ID3",s.data,s.pts)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.handleVisibilityChange=function(){!document.hidden&&this.getIsPlayingBreak()&&this._player.getIsPaused()&&this._isAdClicked&&(v.debug("Tab is focused during an Ad, resuming playback"),this._isAdClicked=!1,this._player.play())},e.prototype.initCastLoadInterceptor=function(){var e=this;this._player.addCastLoadInterceptor((function(t,n){var i=(0,f.hasKey)(n,"customData")?n.customData.imaLoadRequest:void 0;return i&&e.getContentId(i.imaSource)===t.media.contentId&&(i.withSnapback=e.getIsSnapbackEnabled(),t.media.customData=r.__assign(r.__assign({},t.media.customData),{ima:i})),t}))},e.prototype.initEventSubscriptions=function(){var e=this;this._player.on([u.EventTypes.LOAD_REQUEST,u.EventTypes.HANDLER_DESTROYING],this.reset),this._player.on(u.EventTypes.DESTROYING,this.destroy),this._player.on(u.EventTypes.CAST_STATE_CHANGE,(function(t,n){n.castState===u.CastStates.CONNECTED&&e.reset()})),this.on(p.StreamEvent.AD_BREAK_ENDED,this.handleAdBreakEnded),this.on(p.StreamEvent.AD_BREAK_STARTED,this.handleAdBreakStarted),this.on(p.StreamEvent.CLICK,this.handleAdClick),this.on(p.StreamEvent.CUEPOINTS_CHANGED,this.handleCuepointsChanged),this.on(p.StreamEvent.ERROR,this.handleError),this.on(p.StreamEvent.LOADED,this.attachProcessAdsListener),this.on(p.StreamEvent.STARTED,this.handleAdStarted),this.on(p.StreamEvent.COMPLETE,this.handleAdCompleted),this._config.pauseOnClick&&this._config.resumeOnTabFocus&&document.addEventListener("visibilitychange",this.handleVisibilityChange)},e.prototype.isLibraryLoaded=function(){var e,t;return Boolean(null===(t=null===(e=window.google)||void 0===e?void 0:e.ima)||void 0===t?void 0:t.dai)},e.prototype.loadBackupSource=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){return(n=null==e?void 0:e.backupSource)?(v.info("Loading backup source"),[2,this._player.load({source:n,autoPlay:u.AutoPlayOptions.ANY,customData:t})]):[2]}))}))},e.prototype.prepareAdTagParameters=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];"cust_params"===n&&"object"==typeof r?t[n]=(0,g.encodeCustomParameters)(r):null!=r&&(t[n]=r.toString())})),t},e.prototype.processCuePoint=function(e){var t,n=e.start,r=e.end,i=e.played;if(this._config.disableAdsBeforeStartPosition){var a=null===(t=this._player.getMediaInfo())||void 0===t?void 0:t.startFrom;"number"==typeof a&&(!i&&n<a&&v.debug("Overriding cue point at ".concat(n,' position to be "played".')),i=i||n<a)}return{start:n,end:r,played:i}},e.prototype.registerSnapback=function(){var e=this,t=this._snapbackEventContext;this.getIsSnapbackDelayedUntilFirstPlay()&&(v.debug("Snapback will be enabled after the first play request."),t.once(u.EventTypes.PLAY,(function(){e._hasPlayed=!0,e.ensureSnapbackPerformed(e._player.getCurrentTime())}))),this._config.withSeekBlockingMiddleware||(v.debug("Registering snapback handler."),t.on(u.EventTypes.SEEKED,(function(t,n){var r=n.currentTime;return e.ensureSnapbackPerformed(r)})))},e.prototype.requestLiveStream=function(e){var t,n=new window.google.ima.dai.api.LiveStreamRequest(e);null===(t=this._streamManager)||void 0===t||t.requestStream(n)},e.prototype.requestStreamFromImaSdk=function(e){var t=this,n=window.google;return new Promise((function(r,i){if(t._streamManager){t.once([p.StreamEvent.LOADED,p.StreamEvent.ERROR],(function(e,a){switch(a.type){case n.ima.dai.api.StreamEvent.Type.LOADED:t._streamData=a.getStreamData(),r(t._streamData.url);break;case n.ima.dai.api.StreamEvent.Type.ERROR:i(new Error("Error loading stream."))}}));var a=null==e?void 0:e.imaSource;if(a){t._adTagParameterMetadata=t.getAdTagParameterMetadataFromSource(a);var o=a.type===u.StreamTypes.DASH?"dash":"hls",s=a.adTagParameters?t.prepareAdTagParameters(a.adTagParameters):void 0;switch(a.videoType){case u.VideoType.LIVE:t.requestLiveStream({assetKey:a.assetKey,apiKey:a.apiKey,authToken:a.authToken,adTagParameters:s,format:o});break;case u.VideoType.VOD:t.requestVODStream({contentSourceId:a.cmsId,videoId:a.videoId,apiKey:a.apiKey,authToken:a.authToken,adTagParameters:s,format:o})}}else i(new Error("IMA source not found in the load request."))}else i(new Error("StreamManager is not initialised."))}))},e.prototype.requestVODStream=function(e){var t,n=new window.google.ima.dai.api.VODStreamRequest(e);null===(t=this._streamManager)||void 0===t||t.requestStream(n)},e.prototype.reset=function(){var e,t;v.debug("Resetting IMAPlugin."),null===(e=this._streamManager)||void 0===e||e.reset(),this._adTagParameterMetadata=h.DEFAULT_AD_TAG_PARAMETER_METADATA,this._hasPlayed=!1,this._streamData=void 0,this.disconnectStreamManager(),this._streamManager=void 0,this._cuePoints=void 0,null===(t=this._pendingRequest)||void 0===t||t.cancel(),this._pendingRequest=void 0,this._isAdClicked=!1,this._isBreakClickableChangeSource.next(!1),this._isPlayingBreakChangeSource.next(!1),this._loadRequest=void 0,this._willSnapForward=!1,this._snapForwardTime=void 0,this._snapbackEventContext.unsubscribe(),this.clearAdIframe()},e.prototype.timeToDate=function(e){var t=this._player.getCurrentDate();if(t){var n=this._player.getCurrentTime();return(0,f.timeToDate)(n,e,t)}},e}();t.IMAPlugin=y},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamEvent=void 0,(r=t.StreamEvent||(t.StreamEvent={})).LOADED="loaded",r.AD_BREAK_STARTED="adBreakStarted",r.AD_BREAK_ENDED="adBreakEnded",r.AD_PERIOD_STARTED="adPeriodStarted",r.AD_PERIOD_ENDED="adPeriodEnded",r.AD_PROGRESS="adProgress",r.CUEPOINTS_CHANGED="cuepointsChanged",r.CLICK="click",r.ERROR="error",r.STARTED="started",r.FIRST_QUARTILE="firstquartile",r.MIDPOINT="midpoint",r.STREAM_INITIALIZED="streamInitialized",r.THIRD_QUARTILE="thirdquartile",r.COMPLETE="complete",r.SKIPPABLE_STATE_CHANGED="skippableStateChanged",r.SKIPPED="skip",r.VIDEO_CLICKED="videoClicked"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCustomParameters=void 0,t.parseCustomParameters=function(e){var t={};return new URLSearchParams(e).forEach((function(e,n){t[n]=e})),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(848),t),r.__exportStar(n(849),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(852),t),r.__exportStar(n(853),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(855),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMuxVideoElement=void 0,t.isMuxVideoElement=function(e){return e instanceof HTMLVideoElement&&!!e.mux}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMuxShakaPlayer=void 0,t.isMuxShakaPlayer=function(e){return!!e.mux}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(869),t)},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||e,a),u=i?i+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},l.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,r,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var u,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,a),!0;case 6:return c.fn.call(c.context,t,n,r,a,o),!0}for(l=1,u=new Array(d-1);l<d;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,r);break;default:if(!u)for(f=1,u=new Array(d-1);f<d;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,r){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||u(this,a);else{for(var s=0,l=[],c=o.length;s<c;s++)(o[s].fn!==t||r&&!o[s].once||n&&o[s].context!==n)&&l.push(o[s]);l.length?this._events[a]=1===l.length?l[0]:l:u(this,a)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&u(this,t)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,e.exports=l},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0,(r=t.State||(t.State={})).NOT_AVAILABLE="NOT_AVAILABLE",r.IDLE="IDLE",r.LOADING="LOADING",r.PLAYING="PLAYING"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(881),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(20),a=n(225),o=n(226);t.getImaExpirySource=function(e){return r.__awaiter(void 0,void 0,void 0,(function(){var t,n,s,u,l,c,d,f,h,p,m;return r.__generator(this,(function(g){switch(g.label){case 0:return t=e.daiUrl,n=e.imaPlugin,s=e.adTagParameters,u=e.isLive,l=e.withSnapback,c=e.adTagParametersValidFrom,d=e.adTagParametersValidUntil,f=e.delaySnapbackUntilFirstPlay,h=e.drm,p=i.StreamTypes.HLS,m=u?a.getLiveImaLoadOptions(t):o.getVodImaLoadOptions(t),[4,n.getPlaybackUrl({imaSource:r.__assign(r.__assign({},m),{type:p,adTagParameters:s,adTagParametersValidFrom:c,adTagParametersValidUntil:d}),delaySnapbackUntilFirstPlay:f,withSnapback:l})];case 1:return[2,{expiry:0,url:g.sent(),drm:h}]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8);t.getLiveImaLoadOptions=function(e){var t,n=null===(t=e.match(/event\/([^/]+)/))||void 0===t?void 0:t[1];if(!n)throw new Error("Asset key not found");return{assetKey:n,videoType:r.VideoType.LIVE}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(159);t.getVodImaLoadOptions=function(e){var t=r.__read(r.__spread(new URLSearchParams(e).values()),1)[0],n=t.replace(/~/g,"&"),a=new URLSearchParams(n),o=a.get("vid"),s=a.get("cmsid");if(!o||!s)throw new Error("Invalid DAI URL! Cannot get VOD params");return{videoType:i.VideoType.VOD,videoId:o,cmsId:s,authToken:t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDaiUrl=function(e){if(e){var t=Array.isArray(e)?e[0]:e;if(null==t?void 0:t.url.includes("dai.google.com"))return t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(103);t.getPlayerUrlCallback=function(e,t,n){if(n)return e.get(i.ENDPOINTS.LIVE,{queryParams:r.__assign({eventId:t},i.DEFAULT_LIVE_PARAMS)});var a=new URL(e.baseUrl).origin+"/api/v3"+i.ENDPOINTS.VOD+"/"+t;return e.get(a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21);t.getStreamInfo=function(e,t,n){return r.__awaiter(void 0,void 0,void 0,(function(){var i,a;return r.__generator(this,(function(r){switch(r.label){case 0:return i=e.replace(/http:/gi,"https:"),t&&void 0!==n&&(i+="&dvr="+n),[4,fetch(i)];case 1:if((a=r.sent()).ok)return[3,2];throw new Error("Failed to get video url!");case 2:return[4,a.json()];case 3:return[2,r.sent()]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(20),a=n(10),o=n(104),s=n(97),u=n(105),l=function(e,t){return{type:t,url:e.url}};t.getDrmConfig=function(e,t,n,c,d){return void 0===d&&(d=!1),r.__awaiter(void 0,void 0,void 0,(function(){var f,h,p,m,g,v,y,_,b,T,E,S,w;return r.__generator(this,(function(A){switch(A.label){case 0:return f=e.hls,h=e.dash,p=e.hlsWidevine,[4,a.getSupportedKeySystems()];case 1:if(m=A.sent(),(g=r.__assign(r.__assign({},n),{drm:{}})).drm)if(v=m[i.KeySystems.FAIRPLAY],y=m[i.KeySystems.WIDEVINE],_=m[i.KeySystems.PLAYREADY],(null==f?void 0:f.drm)&&(v||d&&y&&c))b=u.formatDrmParams(f.drm),S=b.licenseServerUrl,w=b.token,g.source=l(f,i.StreamTypes.HLS),g.drm.fairplay=new s.Fairplay(w,S),g.drm.widevine=null==c?void 0:c.getWidevineOptions(w,S);else if((null==p?void 0:p.drm)&&y&&c)T=u.formatDrmParams(p.drm),S=T.licenseServerUrl,w=T.token,g.source=l(p,i.StreamTypes.HLS),g.drm.widevine=null==c?void 0:c.getWidevineOptions(w,S);else if((null==h?void 0:h.drm)&&(y||_))E=u.formatDrmParams(h.drm),S=E.licenseServerUrl,w=E.token,g.source=l(h,i.StreamTypes.DASH),y&&(g.drm.widevine=new o.Widevine(t,w,S)),_&&(g.drm.playready=new o.Playready(t,w,S));else if((null==h?void 0:h.drm)||(null==f?void 0:f.drm))throw new Error("No supported DRM key system found!");return[2,g]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(145),t),r.__exportStar(n(234),t),r.__exportStar(n(914),t),r.__exportStar(n(919),t),r.__exportStar(n(11),t),r.__exportStar(n(13),t)},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=o(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var d=0;d<s.length;d++)a.call(n,s[d])&&(u[s[d]]=n[s[d]])}}return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2).__exportStar(n(891),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var r=n(2),i=n(8),a=n(54),o=n(73),s=n(75),u=n(220),l=n(62),c=n(10),d=r.__importDefault(n(3)),f=n(233),h=n(892),p=n(13),m=n(145),g=2e3,v=function(e){function t(t){var n,d=e.call(this,t)||this;return d.castBreakSubscriptions=[],d.controls={togglePlay:function(){var e=d.player.getIsPaused();e?d.controls.play():d.player.pause(),d.setState({paused:!e})},play:function(){return d.setState({hasAutoPlayFailed:!1}),d.player.play()},pause:function(){return d.player.pause()},on:d.player.on,once:d.player.once,off:d.player.off,seek:function(e){if(d.useOptimisticSeeking){d.startOptimisticSeekingTimeout();var t=e;d.setState(r.__assign({pendingSeekingTo:t},d.getOptimisticTimes(void 0,t)))}d.player.seekTo(e),d.updateState()},nudge:function(e){return d.player.nudge(e)},canNudge:function(){var e=d.state.loaded,t=d.player.canDVR,n=d.player.getIsLive(),r=d.player.getHasEnded();return(!n&&!r||n&&t)&&e},getCurrentTime:d.player.getCurrentTime,getBifImage:function(e){var t,n;return null!==(n=null===(t=d.player.getPluginByType(a.BIFPlugin))||void 0===t?void 0:t.getImageDataAtSecond(e))&&void 0!==n?n:null},getElement:function(){return d.player.getElement()},getSourceHandlerType:function(){return d.player.sourceHandler.getType()},setLevel:function(e,t){d.player.setCurrentLevel(e),null!=t&&d.player.setCurrentLevelVariant(t),d.updateState()},getLevel:function(){var e;return d.state.waiting||null==d.player.getCurrentLevel()?null:null!==(e=d.player.getCurrentLevel())&&void 0!==e?e:null},setAudioTrack:function(e){d.player.setCurrentAudioTrack(e),d.updateState()},destroy:function(){d.player.destroy()},getAudioTrack:function(){var e;return d.state.waiting?null:null!==(e=d.player.getCurrentAudioTrack())&&void 0!==e?e:null},getTextTrack:function(){var e;return d.state.waiting?null:null!==(e=d.player.getCurrentTextTrack())&&void 0!==e?e:null},resetHtmlTextTrackDisplaySettings:function(){d.setState({htmlTextTrackDisplaySettings:h.TextTrackSettings.resetDisplaySettings()})},setTextTrack:function(e){d.player.setCurrentTextTrack(e),d.updateState()},setHtmlTextTrackContainer:function(e){d.player.setHtmlTextTrackContainer(e)},setPlaybackRate:function(e){d.player.setPlaybackRate(e),d.updateState()},toggleFullscreen:function(){if(c.fullscreen.fullscreenEnabled)if(c.fullscreen.fullscreenElement)c.fullscreen.exitFullscreen();else{var e=d.player.getConfig().fullscreenElement;e?c.fullscreen.requestFullscreen(c.getEl(e)):c.fullscreen.requestFullscreen(d.player.getElement())}else d.player.getIsFullscreenSupported()&&(d.player.getIsFullscreenActive()?d.player.exitFullscreen():d.player.requestFullscreen())},setFullscreen:function(e){c.fullscreen.fullscreenEnabled?!!c.fullscreen.fullscreenElement!==e&&d.controls.toggleFullscreen():d.player.getIsFullscreenSupported()&&(d.player.getIsFullscreenActive()?d.player.exitFullscreen():d.player.requestFullscreen())},toggleMute:function(){return d.player.setIsMuted(!d.player.getIsMuted())},setVolume:function(e){return d.player.setVolume(e)},nudgeVolume:d.player.nudgeVolume,requestPip:d.player.requestPictureInPicture,exitPip:d.player.exitPictureInPicture,startCasting:d.player.startCasting,stopCasting:d.player.stopCasting,getContentTimeFromStreamTime:function(e){return p.getContentTimeFromStreamTime(e,d.state.breaks)},getStreamTimeFromContentTime:function(e){return p.getStreamTimeFromContentTime(e,d.state.breaks)},updateHtmlTextTrackDisplaySettings:function(e){d.setState({htmlTextTrackDisplaySettings:h.TextTrackSettings.updateDisplaySettings(e)})}},d.hasMounted=!1,d.overlayStates={keepOverlayActiveClassname:"keep-overlay-on-hover",keepOverlayActivated:function(e){void 0===e&&(e=!1),d.setState({keepOverlayActivated:e,overlayIsActive:e})},activateOverlay:function(){window.clearTimeout(d.overlayActiveTimeout),d.setState({overlayIsActive:!0})},activateOverlayTimed:function(e){var t;void 0===e&&(e=null!==(t=d.props.defaultOverlayTimeout)&&void 0!==t?t:g),d.setState({overlayIsActive:!0},(function(){window.clearTimeout(d.overlayActiveTimeout),d.overlayActiveTimeout=window.setTimeout((function(){d.setState((function(e){return e.keepOverlayActivated?e:r.__assign(r.__assign({},e),{overlayIsActive:!1})}))}),e)}))},deactivateOverlay:function(){d.state.keepOverlayActivated||d.setState({overlayIsActive:!1})}},d.clear=function(){window.clearTimeout(d.overlayActiveTimeout)},d.getCastState=function(e,t){var n=null!=e?e:d.player.getCastState(),r=null!=t?t:d.state.castDeviceName;return n!==i.CastStates.CONNECTED&&(r=void 0),{showCast:n!==i.CastStates.NO_DEVICES_AVAILABLE&&n!==i.CastStates.NOT_SUPPORTED&&n!==i.CastStates.INITIALIZING&&n!==i.CastStates.DISABLED,castConnecting:n===i.CastStates.CONNECTING,isCasting:n===i.CastStates.CONNECTED,castDeviceName:r,castState:n}},d.getOptimisticTimes=function(e,t){var n;e=null!=e?e:d.player.getIsLive();var r=null!==(n=null!=t?t:d.state.pendingSeekingTo)&&void 0!==n?n:d.player.getCurrentTime(!0);return{optimisticContentTime:e?r:d.controls.getContentTimeFromStreamTime(r),optimisticCurrentTime:r}},d.handleCastStateChange=function(e){if(e===i.CastStates.CONNECTED){var t=d.player.sourceHandler;t.hasType(i.HandlerTypes.CHROMECAST)&&(d.setState({breaks:p.chromecastBreaksToBreaks(t.getBreaks()),isPlayingBreak:t.getIsPlayingBreak()}),d.castBreakSubscriptions.push(t.onBreaksChange.subscribe((function(e){var t=e.breaks;d.setState({breaks:p.chromecastBreaksToBreaks(t)})}))),d.castBreakSubscriptions.push(t.onIsPlayingBreakChange.subscribe((function(e){var t=e.isPlayingBreak;d.setState({isPlayingBreak:t})}))))}else e===i.CastStates.CONNECTING?d.setState({breaks:[],isBreakClickable:!1,isPlayingBreak:!1,isPlayingClickableBreak:!1,breakStatus:void 0}):d.castBreakSubscriptions.length>0&&(d.castBreakSubscriptions.forEach((function(e){return e.unsubscribe()})),d.castBreakSubscriptions=[],d.setState({breaks:[],isBreakClickable:!1,isPlayingClickableBreak:!1,isPlayingBreak:!1}))},d.listenToEventTypes=function(){var e=d.player;e.on(i.EventTypes.FULLSCREEN_CHANGE,(function(e,t){d.setState({isFullscreen:t.isFullscreenActive})})),e.on(i.EventTypes.DURATION_CHANGE,(function(e,t){d.setState({duration:t.duration,live:t.isLive,seekable:t.seekableRange,seekableDuration:t.seekableDuration})})),e.on(i.EventTypes.PLAYING,(function(){d.setState({hasAutoPlayFailed:!1,hasPlayed:!0,isPlaying:!0,waiting:!1})})),e.on(i.EventTypes.VOLUME_CHANGE,(function(e,t){d.setState({muted:t.isMuted,volume:t.volume})})),e.on(i.EventTypes.TIME_UPDATE,(function(){d.hasMounted&&(e.getReadyState()>=i.ReadyStates.HAVE_FUTURE_DATA?d.updateState({ready:!0}):d.updateState())})),e.on(i.EventTypes.PLAY,(function(){return d.setState({paused:!1})})),e.on(i.EventTypes.PAUSE,(function(){return d.setState({isPlaying:!1,paused:!0,waiting:!1})})),e.on(i.EventTypes.WAITING,(function(){return d.setState({isPlaying:!1,waiting:!0})})),e.on(i.EventTypes.LOADED_METADATA,(function(e,t){return d.setState({duration:t.duration,live:t.isLive,startDate:t.startDate})})),e.on(i.EventTypes.LOADED_DATA,(function(){d.setState({loaded:!0})})),e.on(i.EventTypes.SEEKING,(function(e,t){d.setState(r.__assign({seekingTo:t.seekingTo},d.getOptimisticTimes()))})),e.on(i.EventTypes.SEEKED,(function(){d.setState(r.__assign({seekingTo:null},d.getOptimisticTimes()))})),e.on(i.EventTypes.CAST_STATE_CHANGE,(function(e,t){var n=t.castState,i=t.deviceName,a=d.getCastState(n,i);d.setState(r.__assign({},a))})),e.on(i.EventTypes.ENDED,(function(){return d.setState({hasEnded:!0,hasAutoPlayFailed:!1})})),e.on(i.EventTypes.ERROR,(function(e,t){t.type===i.ErrorTypes.AUTO_PLAY_FAILURE&&d.setState({hasAutoPlayFailed:!0})})),e.on(i.EventTypes.PICTURE_IN_PICTURE_CHANGE,(function(e,t){return d.setState({isPipActive:t.isPictureInPictureActive})})),e.on(i.EventTypes.LOAD_START,(function(){d.setState({hasAutoPlayFailed:!1})})),e.on(i.EventTypes.READY,(function(){d.updateState({ready:!0,level:e.getCurrentLevel(),levels:e.getLevels(),levelVariant:e.getCurrentLevelVariant(),levelVariants:e.getLevelVariants(),audioTracks:e.getAudioTracks(),audioTrack:e.getCurrentAudioTrack(),live:e.getIsLive(),textTracks:e.getTextTracks(),currentTextTrack:e.getCurrentTextTrack(),currentDate:e.getCurrentDate(),startDate:e.getStartDate(),htmlTextTrackDisplaySettings:h.TextTrackSettings.setInitialDisplaySettings()})})),e.on(i.EventTypes.AUDIO_TRACK_CHANGE,(function(e,t){d.setState({audioTrack:t.currentAudioTrack,audioTracks:t.audioTracks})})),e.on(i.EventTypes.LEVEL_CHANGE,(function(e,t){d.setState({level:t.currentLevel,levels:t.levels,levelVariant:t.currentLevelVariant,levelVariants:t.levelVariants})})),e.on(i.EventTypes.TEXT_TRACK_CHANGE,(function(e,t){d.setState({currentTextTrack:t.currentTextTrack,textTracks:t.textTracks})})),e.on(i.EventTypes.HANDLER_ELEMENT_DESTROYING,(function(){d.setState({hasPlayed:e.getHasPlayed()})}));var t=e.getPluginByType(u.ReplayPlugin);t&&(d.setState({replayState:t.getState()}),t.on(l.ReplayEvents.REPLAY_STATE_CHANGED,(function(e){var t=e.state;d.setState({replayState:t})}))),e.on(i.EventTypes.CAST_STATE_CHANGE,(function(e,t){d.handleCastStateChange(t.castState)})),e.on(i.EventTypes.HANDLER_ELEMENT_CREATED,(function(){var t=e.getMediaInfo();(null==t?void 0:t.metadata)&&d.setState({logo:t.metadata.logo,posterUrl:t.metadata.posterURL})})),e.on(i.EventTypes.HANDLER_DESTROYING,(function(){e.getCastState()!==i.CastStates.CONNECTED&&d.setState({breaks:[],breakStatus:void 0,isBreakClickable:!1,isPlayingBreak:!1,isPlayingClickableBreak:!1,logo:void 0,posterUrl:void 0})}));var n=e.getPluginByType(a.IMAPlugin),c=e.getPluginByType(a.ClientSideImaPlugin);c&&(c.on(o.ClientSideImaEvents.CUE_POINTS_CHANGED,(function(e,t){if(d.player.getCastState()!==i.CastStates.CONNECTED){var n=t.cuePoints;d.setState({breaks:p.cuePointsToBreaks(n)})}})),c.on(o.ClientSideImaEvents.IS_PLAYING_BREAK_CHANGED,(function(e,t){d.setState({isPlayingBreak:t.isPlayingBreak,isPlayingClickableBreak:t.isPlayingBreak})})),c.on(o.ClientSideImaEvents.BREAK_STATUS_CHANGED,(function(e,t){var n=t.breakStatus;d.setState({breakStatus:n})})),c.on(o.ClientSideImaEvents.IS_SKIPPABLE_STATE_CHANGED,(function(e,t){var n=t.isAdSkippable;d.setState({isBreakSkippable:n})})),c.on(o.ClientSideImaEvents.IS_FULLSCREEN_ALLOWED_CHANGED,(function(e,t){var n,r=t.isFullscreenAllowed;d.setState({isFullscreenAllowed:(null!==(n=d.props.isFullscreenAllowed)&&void 0!==n?n:f.INITIAL_CONTAINER_STATE.isFullscreenAllowed)&&r})})),c.on(o.ClientSideImaEvents.IS_PICTURE_IN_PICTURE_ALLOWED_CHANGED,(function(e,t){var n=t.isPictureInPictureAllowed;d.setState({isPipAllowed:n})}))),n&&(n.on(s.StreamEvent.CUEPOINTS_CHANGED,(function(e,t){if(d.player.getCastState()!==i.CastStates.CONNECTED){var n=t.cuePoints;d.setState({breaks:p.cuePointsToBreaks(n)})}})),n.on(s.StreamEvent.AD_BREAK_ENDED,(function(){d.setState({breakStatus:void 0})})),n.on(s.StreamEvent.AD_PROGRESS,(function(e,t){var n=t.getStreamData().adProgressData;d.setState({breakStatus:{breakClipCount:n.totalAds,breakClipIndex:n.adPosition-1,currentBreakClipDuration:n.duration,currentBreakClipTime:n.currentTime}})})),n.on(s.IMAEvents.IS_PLAYING_BREAK_CHANGED,(function(e,t){d.setState({isPlayingBreak:t.isPlayingBreak})})),n.on(s.IMAEvents.IS_PLAYING_CLICKABLE_BREAK_CHANGED,(function(e,t){d.setState({isBreakClickable:t.isPlayingClickableBreak,isPlayingClickableBreak:t.isPlayingClickableBreak})})))},d.startOptimisticSeekingTimeout=function(){var e,t,n=null!==(e=d.props.optimisticSeekingTimeout)&&void 0!==e?e:1e3;if(n>0){var r=null===(t=d.props.player)||void 0===t?void 0:t.createSubscriptionContext().once(i.EventTypes.SEEKING,(function(){var e;d.setState({pendingSeekingTo:void 0}),null===(e=d.cancelOptimisticSeekingTimeout)||void 0===e||e.call(d)})),a=window.setTimeout((function(){var e;d.setState({pendingSeekingTo:void 0}),null===(e=d.cancelOptimisticSeekingTimeout)||void 0===e||e.call(d)}),n);d.cancelOptimisticSeekingTimeout=function(){null==r||r.unsubscribe(),window.clearTimeout(a),d.cancelOptimisticSeekingTimeout=void 0}}},d.setInitialState=function(){var e,t,n={loaded:d.player.getReadyState()>=i.ReadyStates.HAVE_CURRENT_DATA||d.player.getReadyState()>=i.ReadyStates.HAVE_METADATA&&d.player.getIsSeeking(),readonlyVolume:!1,useHTMLTextTracks:d.player.getConfig().useHTMLTextTracks},o=d.player.getCastState();if(o!==i.CastStates.CONNECTED){var s=d.player.getPluginByType(a.IMAPlugin),u=d.player.getPluginByType(a.ClientSideImaPlugin);s&&s.getStreamManager()?(n.isBreakClickable=s.getIsPlayingClickableBreak(),n.isPlayingBreak=s.getIsPlayingBreak(),n.isPlayingClickableBreak=s.getIsPlayingClickableBreak()):u&&u.getAdsManager()?(n.isBreakClickable=u.getIsPlayingBreak(),n.isPlayingBreak=u.getIsPlayingBreak(),n.isPlayingClickableBreak=u.getIsPlayingBreak(),n.isBreakSkippable=null!==(t=null===(e=u.getAdsManager())||void 0===e?void 0:e.getAdSkippableState())&&void 0!==t&&t):(n.isBreakClickable=!1,n.isPlayingBreak=!1,n.isPlayingClickableBreak=!1,n.isBreakSkippable=!1)}else d.handleCastStateChange(o);d.setState((function(e){return r.__assign(r.__assign({},e),n)}))},d.updateState=function(e){void 0===e&&(e={});var t=d.player,n=t.canDVR,i=t.getIsLive(),a=t.getCurrentTime(),o=t.getDuration(),s=a,u=o;i||(s=d.controls.getContentTimeFromStreamTime(s),u=d.controls.getContentTimeFromStreamTime(u));var l=d.getOptimisticTimes(i),c=l.optimisticContentTime,f=l.optimisticCurrentTime,h=d.getCastState(),p=r.__assign(r.__assign(r.__assign({atLiveEdge:t.getIsAtLiveEdge(),audioTrack:t.getCurrentAudioTrack(),audioTracks:t.getAudioTracks()},h),{canDvr:n,canSeek:n||!i,contentDuration:u,contentTime:s,currentDate:t.getCurrentDate(),currentTextTrack:t.getCurrentTextTrack(),currentTime:a,duration:o,hasEnded:t.getHasEnded(),hasPlayed:t.getHasPlayed(),isPipActive:t.getIsPictureInPictureActive(),isPipSupported:t.getIsPictureInPictureSupported(),isPlaying:t.getIsPlaying(),level:t.getCurrentLevel(),levelVariant:t.getCurrentLevelVariant(),live:i,muted:t.getIsMuted(),optimisticContentTime:c,optimisticCurrentTime:f,paused:t.getIsPaused(),playbackRate:t.getPlaybackRate(),readonlyVolume:!t.getCanControlVolume(),rebuffering:t.getIsRebuffering(),seekable:t.getSeekableRange(),seekableDuration:t.getSeekableDuration(),textTracks:t.getTextTracks(),volume:t.getVolume()}),e);d.setState(p)},d.state=r.__assign(r.__assign({},f.INITIAL_CONTAINER_STATE),{isFullscreenAllowed:null!==(n=t.isFullscreenAllowed)&&void 0!==n?n:f.INITIAL_CONTAINER_STATE.isFullscreenAllowed}),d}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.hasMounted=!0,this.listenToEventTypes(),this.setInitialState(),this.updateState()},t.prototype.componentDidUpdate=function(e){var t;e.player!==this.props.player&&(null===(t=this.cancelOptimisticSeekingTimeout)||void 0===t||t.call(this),this.listenToEventTypes(),this.setInitialState(),this.updateState())},t.prototype.componentWillUnmount=function(){var e;null===(e=this.cancelOptimisticSeekingTimeout)||void 0===e||e.call(this),this.hasMounted=!1,this.clear()},Object.defineProperty(t.prototype,"player",{get:function(){return this.props.player},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useOptimisticSeeking",{get:function(){var e;return null===(e=this.props.useOptimisticSeeking)||void 0===e||e},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.controls,t=this.state,n=this.overlayStates,r=this.useOptimisticSeeking,i={controls:e,state:t,overlayStates:n,player:this.props.player,options:{useOptimisticSeeking:r}};return d.default.createElement(m.Provider,{value:i},this.props.children)},t}(d.default.Component);t.Container=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(895),t),r.__exportStar(n(236),t),r.__exportStar(n(896),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STYLE_TAG_ID=void 0,t.STYLE_TAG_ID="dsTextTrackDisplayStyle"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.css=void 0;var r=n(2).__importDefault(n(147));t.css=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deferredFrame=void 0;t.deferredFrame=function(e,t){void 0===t&&(t=0),window.setTimeout((function(){window.requestAnimationFrame(e)}),t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateStyle=void 0;t.updateStyle=function(e,t){return Object.assign(e.style,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDays=void 0;var r=n(94);t.getDays=function(e,t){void 0===t&&(t=!1);var n=r.DAY*(t?r.MILLISECONDS:1);return Math.floor(e/n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHours=void 0;var r=n(94);t.getHours=function(e,t){void 0===t&&(t=!1);var n=r.HOUR*(t?r.MILLISECONDS:1);return Math.floor(e/n)%24}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMinutes=void 0;var r=n(94);t.getMinutes=function(e,t){void 0===t&&(t=!1);var n=r.MINUTE*(t?r.MILLISECONDS:1);return Math.floor(e/n)%60}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSeconds=void 0;var r=n(94);t.getSeconds=function(e,t){void 0===t&&(t=!1);var n=r.MINUTE*(t?r.MILLISECONDS:1);return Math.floor(e%n/(t?r.MILLISECONDS:1))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdsLearnMore=void 0;var r=n(2),i=n(54),a=r.__importDefault(n(3)),o=n(13),s=n(23);t.AdsLearnMore=function(e){var t=e.label,n=void 0===t?"Learn More":t,r=e.player,u=e.isPlayingBreak,l=e.isHidden,c=e.icon,d=a.default.useRef(null),f=o.css("ds-ad__info");return a.default.useEffect((function(){var e=d.current;if(r&&e){var t=function(e){var t,n=void 0,r=e.getPluginByType(i.IMAPlugin),a=e.getPluginByType(i.ClientSideImaPlugin);return(null==r?void 0:r.getIsActive())?n=r.getAdContainer():(null==a?void 0:a.getIsActive())&&(n=a.getAdContainer()),null!==(t=null==n?void 0:n.querySelector("iframe"))&&void 0!==t?t:void 0}(r);l||!u?e.classList.remove("ds-ad__info--in"):u&&t&&(e.classList.add("ds-ad__info--in"),t.style.width=e.clientWidth+"px")}}),[r,l,u]),a.default.createElement("div",{ref:d,className:f},a.default.createElement("span",{className:"ds-ad__info-label"},n),null!=c?c:a.default.createElement(s.OpenInNewIcon,null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CastConnectedIcon=void 0;var r=n(2),i=r.__importDefault(n(3));t.CastConnectedIcon=function(e){return i.default.createElement("svg",r.__assign({className:"ds-icon ds-icon--cast-connected",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 3499.1 2870.5"},e),i.default.createElement("path",{d:"M11.9 2384.1v474.5h474.5c-.1-261-213.6-474.5-474.5-474.5zm0-628.6v320.3c438.9 0 794.7 355.8 794.7 794.7h320.3c-11.9-616.8-510.1-1115-1115-1115zm2858.6-1115h-2230v261C1269.2 1103.1 1767.3 1601.3 1969 2230h889.6V640.5h11.9zM11.9 1115v320.3c794.7 0 1435.2 640.5 1435.2 1435.2h308.4c0-972.7-782.9-1755.5-1743.6-1755.5zM3190.7 0H320.3C142.3 0 0 142.3 0 320.3v474.5h320.3V320.3h2858.6v2218.1h-1115v320.3h1115c177.9 0 320.3-142.3 320.3-320.3V320.3C3499.1 142.3 3356.8 0 3190.7 0z"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CastConnectingIcon=void 0;var r=n(2),i=r.__importDefault(n(3));t.CastConnectingIcon=function(e){return i.default.createElement("svg",r.__assign({className:"ds-icon ds-icon--cast-connecting",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),i.default.createElement(a,null),i.default.createElement(o,null),i.default.createElement(s,null))};var a=function(){return i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"ds-icon--cast-state-zero"},i.default.createElement("g",null,i.default.createElement("g",null,i.default.createElement("path",{d:"M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z",fill:"#fff"}),i.default.createElement("path",{d:"M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z",opacity:"0.3",fill:"#fff"}),i.default.createElement("path",{d:"M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z",opacity:"0.3",fill:"#fff"}),i.default.createElement("path",{d:"M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z",fill:"#fff"}),i.default.createElement("rect",{x:"0",y:"0",width:"24",height:"24"}))),i.default.createElement("g",{transform:"translate(-240.000000, -106.000000)"},i.default.createElement("g",{transform:"translate(0.000000, 114.000000)"})))},o=function(){return i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"ds-icon--cast-state-one"},i.default.createElement("g",null,i.default.createElement("g",null,i.default.createElement("path",{d:"M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z",opacity:"0.3",fill:"#fff"}),i.default.createElement("path",{d:"M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z",fill:"#fff"}),i.default.createElement("path",{d:"M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z",opacity:"0.3",fill:"#fff"}),i.default.createElement("path",{d:"M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z",fill:"#fff"}),i.default.createElement("rect",{x:"0",y:"0",width:"24",height:"24"}))),i.default.createElement("g",{transform:"translate(-272.000000, -106.000000)"},i.default.createElement("g",{transform:"translate(0.000000, 114.000000)"})))},s=function(){return i.default.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"ds-icon--cast-state-two"},i.default.createElement("g",null,i.default.createElement("g",null,i.default.createElement("path",{d:"M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z",opacity:"0.3",fill:"#fff"}),i.default.createElement("path",{d:"M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z",opacity:"0.3",fill:"#fff"}),i.default.createElement("path",{d:"M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z",fill:"#fff"}),i.default.createElement("path",{d:"M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z",fill:"#fff"}),i.default.createElement("rect",{x:"0",y:"0",width:"24",height:"24"}))),i.default.createElement("g",{transform:"translate(-304.000000, -106.000000)"},i.default.createElement("g",{transform:"translate(0.000000, 114.000000)"})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CastDisconnectedIcon=void 0;var r=n(2),i=r.__importDefault(n(3));t.CastDisconnectedIcon=function(e){return i.default.createElement("svg",r.__assign({className:"ds-icon ds-icon--cast-disconnected",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),i.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none",opacity:".1"}),i.default.createElement("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChevronLeft=void 0;var r=n(2),i=r.__importDefault(n(3));t.ChevronLeft=function(e){return i.default.createElement("svg",r.__assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"icon icon--chevron-left"},e),i.default.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NudgeBackwardIcon=void 0;var r=n(2).__importDefault(n(3));t.NudgeBackwardIcon=function(){return r.default.createElement("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.9527 3.56735V7.05485C21.1277 7.05485 26.0027 12.6548 24.7652 19.0673C24.0027 22.9674 20.8652 26.1049 16.9652 26.8673C11.0527 28.0174 5.82769 23.9548 5.05269 18.4673C4.95269 17.7173 5.55269 17.0548 6.30269 17.0548C6.91519 17.0548 7.44019 17.5173 7.52769 18.1173C8.12769 22.2549 12.1027 25.3174 16.5652 24.3799C19.3902 23.7924 21.6902 21.5048 22.2777 18.6673C23.3027 13.8298 19.6152 9.55485 14.9527 9.55485V13.0423C14.9527 13.6048 14.2777 13.8798 13.8777 13.4923L9.14019 8.75485C8.89019 8.50485 8.89019 8.11735 9.14019 7.86735L13.8902 3.12985C14.2777 2.72985 14.9527 3.00485 14.9527 3.56735ZM12.4651 17.667H11.9026V18.4795H12.4901C12.6276 18.4795 12.7401 18.5045 12.8526 18.5295C12.9651 18.5545 13.0526 18.6045 13.1276 18.667C13.2026 18.7295 13.2651 18.817 13.3026 18.917C13.3401 19.017 13.3651 19.142 13.3651 19.2795C13.3651 19.392 13.3526 19.492 13.3151 19.5795C13.2776 19.667 13.2151 19.742 13.1526 19.8045C13.0901 19.867 13.0026 19.917 12.9026 19.9545C12.8026 19.992 12.6901 20.0045 12.5651 20.0045C12.4526 20.0045 12.3526 19.9795 12.2526 19.9545L12.2526 19.9545C12.1526 19.9295 12.0776 19.8795 12.0026 19.817C11.9276 19.7545 11.8776 19.692 11.8401 19.6045C11.8026 19.517 11.7776 19.4295 11.7776 19.3295H10.7151C10.7151 19.592 10.7651 19.8295 10.8651 20.017C10.9651 20.2045 11.1151 20.3545 11.2776 20.492C11.4401 20.6295 11.6401 20.717 11.8526 20.7795C12.0651 20.842 12.2901 20.867 12.5151 20.867C12.7901 20.867 13.0276 20.8295 13.2651 20.767C13.5026 20.7045 13.6901 20.592 13.8651 20.467C14.0401 20.342 14.1651 20.167 14.2651 19.9795C14.3651 19.792 14.4151 19.567 14.4151 19.317C14.4151 19.0295 14.3401 18.7795 14.1901 18.5545C14.0401 18.3295 13.8151 18.1795 13.5151 18.067C13.6526 18.0045 13.7651 17.942 13.8651 17.8545C13.9651 17.767 14.0401 17.6795 14.1151 17.5795C14.1901 17.4795 14.2401 17.3795 14.2776 17.267C14.3151 17.1545 14.3276 17.042 14.3276 16.9295C14.3276 16.6795 14.2776 16.4545 14.1901 16.267C14.1026 16.0795 13.9776 15.917 13.8151 15.792C13.6526 15.667 13.4651 15.567 13.2401 15.5045C13.0151 15.442 12.7651 15.4045 12.5026 15.4045C12.2651 15.4045 12.0401 15.442 11.8276 15.5045C11.6151 15.567 11.4401 15.667 11.2776 15.792C11.1151 15.917 10.9901 16.0795 10.9026 16.2545C10.8151 16.4295 10.7651 16.6295 10.7651 16.8545H11.8276C11.8276 16.767 11.8526 16.6795 11.8901 16.6045C11.9276 16.5295 11.9776 16.4795 12.0401 16.417C12.1026 16.3545 12.1776 16.317 12.2651 16.292C12.3526 16.267 12.4401 16.2545 12.5401 16.2545C12.6526 16.2545 12.7651 16.2795 12.8526 16.3045C12.9401 16.3295 13.0151 16.3795 13.0776 16.442C13.1401 16.5045 13.1776 16.567 13.2151 16.6545C13.2526 16.742 13.2651 16.8295 13.2651 16.9295C13.2651 17.1545 13.2026 17.3295 13.0651 17.467C12.9276 17.6045 12.7276 17.667 12.4651 17.667ZM19.0779 18.6045C19.0779 19.0045 19.0404 19.3545 18.9529 19.6295C18.8654 19.9045 18.7404 20.1545 18.5904 20.342C18.4404 20.5295 18.2404 20.667 18.0279 20.7545C17.8154 20.842 17.5654 20.8795 17.2904 20.8795C17.0154 20.8795 16.7779 20.842 16.5529 20.7545C16.3279 20.667 16.1404 20.5295 15.9779 20.342C15.8154 20.1545 15.6904 19.917 15.6029 19.6295C15.5154 19.342 15.4654 19.0045 15.4654 18.6045V17.6795C15.4654 17.2795 15.5029 16.9295 15.5904 16.6545C15.6779 16.3795 15.8029 16.1295 15.9529 15.942C16.1029 15.7545 16.3029 15.617 16.5154 15.5295C16.7279 15.442 16.9779 15.4045 17.2529 15.4045C17.5279 15.4045 17.7654 15.442 17.9904 15.5295C18.2154 15.617 18.4029 15.7545 18.5654 15.942C18.7279 16.1295 18.8529 16.367 18.9404 16.6545C19.0279 16.942 19.0779 17.2795 19.0779 17.6795V18.6045ZM17.9651 16.9289C18.0026 17.0914 18.0151 17.2914 18.0151 17.5289H18.0026V18.7414C18.0026 18.9789 17.9901 19.1789 17.9526 19.3414C17.9276 19.5039 17.8776 19.6414 17.8151 19.7414C17.7526 19.8414 17.6651 19.9164 17.5776 19.9539C17.4901 19.9914 17.3776 20.0164 17.2651 20.0164C17.1526 20.0164 17.0526 19.9914 16.9526 19.9539C16.8526 19.9164 16.7776 19.8414 16.7151 19.7414C16.6526 19.6414 16.6026 19.5039 16.5651 19.3414C16.5276 19.1789 16.5151 18.9789 16.5151 18.7414V17.5289C16.5151 17.2914 16.5276 17.0914 16.5651 16.9289C16.6026 16.7664 16.6526 16.6414 16.7151 16.5414C16.7776 16.4414 16.8651 16.3664 16.9526 16.3289C17.0401 16.2914 17.1526 16.2664 17.2651 16.2664C17.3776 16.2664 17.4776 16.2914 17.5776 16.3289C17.6776 16.3664 17.7526 16.4414 17.8151 16.5414C17.8776 16.6414 17.9276 16.7664 17.9651 16.9289Z",fill:"#F2F2F2"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NudgeForwardIcon=void 0;var r=n(2).__importDefault(n(3));t.NudgeForwardIcon=function(){return r.default.createElement("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.4668 18.1361C22.5543 17.5236 23.0668 17.0611 23.6918 17.0611C24.4418 17.0611 25.0543 17.7236 24.9418 18.4611C24.1668 24.0486 18.7668 28.1486 12.7293 26.7986C8.86683 25.9361 5.99183 22.9486 5.24183 19.0611C3.99183 12.6611 8.86683 7.06114 15.0418 7.06114V3.57364C15.0418 3.01114 15.7168 2.73614 16.1043 3.12364L20.8418 7.86114C21.0918 8.11114 21.0918 8.49864 20.8418 8.74864L16.1043 13.4861C15.7168 13.8861 15.0418 13.6111 15.0418 13.0486V9.56114C10.3793 9.56114 6.69183 13.8361 7.70433 18.6736C8.30433 21.4986 10.3793 23.6611 13.1918 24.3361C17.7543 25.4361 21.8668 22.3486 22.4668 18.1361ZM12.9668 19.9865C13.0668 19.949 13.1418 19.899 13.2168 19.8365C13.2342 19.8156 13.2516 19.7967 13.2684 19.7783L13.2685 19.7783C13.3122 19.7307 13.3522 19.6871 13.3793 19.624C13.4168 19.5365 13.4293 19.4365 13.4293 19.324C13.4293 19.1865 13.4043 19.0615 13.3668 18.9615C13.3293 18.8615 13.2668 18.774 13.1918 18.7115C13.1168 18.649 13.0293 18.6115 12.9168 18.574C12.8043 18.5365 12.6918 18.524 12.5543 18.524H11.9918V17.699H12.5293C12.8043 17.699 12.9918 17.6365 13.1293 17.499C13.2668 17.3615 13.3293 17.1865 13.3293 16.9615C13.3293 16.8615 13.3168 16.7615 13.2793 16.6865C13.2418 16.6115 13.2043 16.5365 13.1418 16.474C13.0793 16.4115 13.0043 16.374 12.9168 16.3365C12.8293 16.299 12.7293 16.2865 12.6043 16.2865C12.5043 16.2865 12.4168 16.2865 12.3293 16.324C12.2418 16.3615 12.1668 16.399 12.1043 16.449C12.0418 16.499 11.9918 16.5615 11.9543 16.6365C11.9168 16.7115 11.8918 16.799 11.8918 16.8865H10.8293C10.8293 16.6615 10.8793 16.474 10.9668 16.2865C11.0543 16.099 11.1918 15.949 11.3418 15.824C11.4918 15.699 11.6918 15.599 11.8918 15.5365C12.0918 15.474 12.3293 15.4365 12.5668 15.4365C12.8418 15.4365 13.0793 15.474 13.3043 15.5365C13.5293 15.599 13.7168 15.699 13.8793 15.824C14.0418 15.949 14.1668 16.099 14.2543 16.299C14.3418 16.499 14.3918 16.7115 14.3918 16.9615C14.3918 17.074 14.3793 17.1865 14.3418 17.299C14.3043 17.4115 14.2418 17.5115 14.1793 17.6115C14.1168 17.7115 14.0293 17.799 13.9293 17.8865C13.8293 17.974 13.7043 18.0365 13.5793 18.099C13.8793 18.2115 14.1043 18.374 14.2543 18.5865C14.4043 18.799 14.4793 19.0615 14.4793 19.349C14.4793 19.599 14.4293 19.824 14.3293 20.0115C14.2293 20.199 14.1043 20.374 13.9293 20.499C13.7543 20.624 13.5668 20.7365 13.3293 20.799C13.0918 20.8615 12.8418 20.899 12.5793 20.899C12.3543 20.899 12.1293 20.874 11.9168 20.8115C11.7043 20.749 11.5168 20.649 11.3418 20.524C11.1668 20.399 11.0293 20.249 10.9293 20.049C10.8293 19.849 10.7793 19.624 10.7793 19.3615H11.8418C11.8418 19.4615 11.8668 19.549 11.9043 19.6365C11.9418 19.724 11.9918 19.7865 12.0668 19.849C12.1418 19.9115 12.2168 19.949 12.3168 19.9865C12.4168 20.024 12.5168 20.0365 12.6293 20.0365C12.7543 20.0365 12.8668 20.024 12.9668 19.9865ZM18.0918 15.5373C17.8668 15.4498 17.6293 15.4123 17.3543 15.4123C17.0793 15.4123 16.8418 15.4498 16.6168 15.5373C16.3918 15.6248 16.2043 15.7623 16.0543 15.9498C15.9043 16.1373 15.7668 16.3748 15.6918 16.6623C15.6168 16.9498 15.5668 17.2873 15.5668 17.6873V18.6123C15.5668 19.0123 15.6168 19.3623 15.7043 19.6373C15.7918 19.9123 15.9168 20.1623 16.0793 20.3498C16.2418 20.5373 16.4293 20.6748 16.6543 20.7623C16.8793 20.8498 17.1168 20.8873 17.3918 20.8873C17.6668 20.8873 17.9043 20.8498 18.1293 20.7623C18.3543 20.6748 18.5418 20.5373 18.6918 20.3498C18.8418 20.1623 18.9668 19.9248 19.0543 19.6373C19.1418 19.3498 19.1793 19.0123 19.1793 18.6123V17.6873C19.1793 17.2873 19.1293 16.9373 19.0418 16.6623C18.9543 16.3873 18.8293 16.1373 18.6668 15.9498C18.5043 15.7623 18.3168 15.6248 18.0918 15.5373ZM18.0541 19.3479C18.0916 19.1854 18.1041 18.9854 18.1041 18.7479H18.1166V17.5354C18.1166 17.2979 18.1041 17.0979 18.0666 16.9354C18.0291 16.7729 17.9791 16.6479 17.9166 16.5479C17.8541 16.4479 17.7666 16.3729 17.6791 16.3354C17.5916 16.2979 17.4791 16.2729 17.3666 16.2729C17.2541 16.2729 17.1541 16.2979 17.0541 16.3354C16.9541 16.3729 16.8916 16.4479 16.8166 16.5479C16.7416 16.6479 16.7041 16.7729 16.6666 16.9354C16.6291 17.0979 16.6166 17.2979 16.6166 17.5354V18.7479C16.6166 18.9854 16.6291 19.1854 16.6666 19.3479C16.7041 19.5104 16.7541 19.6479 16.8166 19.7479C16.8791 19.8479 16.9666 19.9229 17.0541 19.9604C17.1416 19.9979 17.2541 20.0229 17.3666 20.0229C17.4791 20.0229 17.5791 19.9979 17.6791 19.9604C17.7791 19.9229 17.8541 19.8479 17.9166 19.7479C17.9791 19.6479 18.0166 19.5104 18.0541 19.3479Z",fill:"#F2F2F2"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PauseIcon=void 0;var r=n(2),i=r.__importDefault(n(3)),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.default.createElement("svg",{viewBox:"0 0 89 102",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"ds-icon ds-icon--pause"},i.default.createElement("path",{d:"M0 0 28 0 28 102 0 102z"}),i.default.createElement("path",{d:"M61 0 89 0 89 102 61 102z"}))},t}(i.default.PureComponent);t.PauseIcon=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdsProgress=void 0;var r=n(2),i=n(20),a=n(54),o=n(75),s=r.__importDefault(n(3)),u=n(13),l={adPosition:0,progress:0,totalAds:0};t.AdsProgress=function(e){var t=e.player,n=e.label,c=void 0===n?"Ad":n,d=s.default.useRef(null),f=r.__read(s.default.useState(l),2),h=f[0],p=f[1],m=u.css("ds-ad__info","ds-ad__progress");return s.default.useEffect((function(){var e=d.current;if(t&&e){var n=t.getPluginByType(a.IMAPlugin);if(n){var r=n.createSubscriptionContext(),s=t.createSubscriptionContext();return s.on(i.EventTypes.CAST_STATE_CHANGE,(function(t,n){n.castState===i.CastStates.CONNECTED&&e.classList.remove("ds-ad__info--in")})),r.on(o.StreamEvent.AD_BREAK_STARTED,(function(){p(l),e.classList.add("ds-ad__info--in")})).on(o.StreamEvent.AD_BREAK_ENDED,(function(){e.classList.remove("ds-ad__info--in")})).on(o.StreamEvent.AD_PROGRESS,(function(e,t){var n=t.getStreamData().adProgressData,r=n.currentTime,i=n.duration,a=n.adPosition,o=n.totalAds,s=Math.ceil(i-r);p({adPosition:a,totalAds:o,progress:s})})),function(){r.unsubscribe(),s.unsubscribe()}}}}),[t]),s.default.createElement("div",{ref:d,className:m},s.default.createElement("span",null,c," ",h.adPosition," of ",h.totalAds),s.default.createElement("span",{className:"ds-ad__progress-delimiter"},":"),s.default.createElement("span",null,h.progress))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Annotations=void 0;var r=n(2).__importDefault(n(3)),i=n(13);t.Annotations=function(e){var t=e.awayTeamName,n=e.homeTeamName,a=e.annotations,o=e.onClick,s=e.seekableDuration,u=e.live,l=!!(null==a?void 0:a.length),c=i.css("ds-annotations__text ds-annotations__annotation",u&&"ds-annotations__annotation-live");return l?r.default.createElement("div",{className:"ds-annotations-container"},r.default.createElement("div",{className:"ds-annotations"},n&&r.default.createElement("span",{className:"ds-annotations__text ds-annotations__home"},n),r.default.createElement("div",{className:"ds-annotations__rail"}),t&&r.default.createElement("span",{className:"ds-annotations__text ds-annotations__away"},t),l&&(null==a?void 0:a.map((function(e,t){var n,a,l=e.Component,d=e.timestamp,f=e.label,h=e.annotationPosition,p=i.css(c,"away"===h&&"ds-annotations__annotation-away","neutral"===h&&"ds-annotations__neutral");if(u&&"string"==typeof d){if(n=new Date(d),(m=(Date.now()-n.getTime())/1e3/s*100)>100||m<0)return null;a={right:m+"%",transform:"translateX(50%)"}}else{if("number"!=typeof d)return null;var m;if((m=(n=d)/s*100)>100||m<0)return null;a={left:m+"%",transform:"translateX(-50%)"}}return r.default.createElement("span",{onClick:function(){return o(n)},className:p,key:t,style:a},!!f&&r.default.createElement("span",{className:"ds-annotations__label"},f),r.default.createElement("span",{className:"ds-annotations__component"},l))}))))):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioMenu=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13),o=n(76),s=n(23),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getItems=function(){var e=t.props,n=e.audioTracks,r=e.setAudioTrack,i=e.audioTrack,a=null==i?void 0:i.id;return n.map((function(e){return{label:e.label,onClick:function(){return r(e)},isActive:a===e.id}}))},t}return r.__extends(t,e),t.prototype.render=function(){var e,t=this.getItems();return t.length<=1?null:i.default.createElement(o.Menu,{icon:null!==(e=this.props.icon)&&void 0!==e?e:i.default.createElement(s.HeadphonesIcon,null),items:t,className:a.css("ds-menu--audio","ds-menu--with-check")})},t}(i.default.PureComponent);t.AudioMenu=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BreakStatus=t.DEFAULT_LABEL_PATTERN=t.BreakStatusVariables=void 0;var r,i=n(2).__importDefault(n(3)),a=n(13);!function(e){e.COUNT="%COUNT%",e.DURATION="%DURATION%",e.INDEX="%INDEX%",e.REMAINING="%REMAINING%",e.TIME="%TIME%"}(r=t.BreakStatusVariables||(t.BreakStatusVariables={})),t.DEFAULT_LABEL_PATTERN="Ad "+r.INDEX+" of "+r.COUNT+" · "+r.REMAINING;t.BreakStatus=function(e){var n=e.breakClipCount,o=e.breakClipIndex,s=e.currentBreakClipDuration,u=e.currentBreakClipTime,l=e.labelPattern,c=(void 0===l?t.DEFAULT_LABEL_PATTERN:l).replace(r.COUNT,(function(){return n.toString()})).replace(r.INDEX,(function(){return(o+1).toString()})).replace(r.DURATION,(function(){return a.formatTime(s)})).replace(r.TIME,(function(){return a.formatTime(u)})).replace(r.REMAINING,(function(){return a.formatTime(Math.max(s-u,0))}));return i.default.createElement("div",{className:"ds-break-status"},i.default.createElement("span",null,c))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BreakStatusContainer=void 0;var r=n(2).__importDefault(n(3)),i=n(13);t.BreakStatusContainer=function(e){var t,n=e.children,a=e.isOverlayActive,o=i.css("ds-break-status-container",((t={})["ds-break-status-container__overlay-active"]=a,t));return r.default.createElement("div",{className:o},n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromecastButton=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(23),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){var e=t.props,n=e.onClick,r=e.startCasting;n&&"function"==typeof n?n(r):r()},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.show,n=e.icon,r=e.castState;return t?i.default.createElement("div",{className:"ds-menu",onClick:this.handleClick},i.default.createElement("div",{className:"ds-menu__icon"},null!=n?n:i.default.createElement(a.ChromecastIcon,{castState:r}))):null},t}(i.default.PureComponent);t.ChromecastButton=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ControlBar=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.ready;return i.default.createElement("div",{className:a.css("ds-control-bar",t)},i.default.createElement("div",{className:"ds-control-bar__gradient"}),n&&this.props.children)},t}(i.default.PureComponent);t.ControlBar=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ControlBarSection=t.ControlBarSectionPosition=void 0;var r,i=n(2).__importDefault(n(3)),a=n(13);!function(e){e[e.MAIN=0]="MAIN",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT"}(r=t.ControlBarSectionPosition||(t.ControlBarSectionPosition={}));t.ControlBarSection=function(e){var t=function(e,t){switch(t){case r.MAIN:return e+"--main";case r.LEFT:return e+"--left";case r.RIGHT:return e+"--right";default:return""}}("ds-control-bar__section",e.position);return i.default.createElement("div",{className:a.css("ds-control-bar__section",t)},e.children)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorModal=void 0;var r=n(2),i=n(20),a=n(10),o=r.__importDefault(n(3)),s=n(13),u=n(23),l={key:"m",shift:!0,ctrl:!1,alt:!1,meta:!1},c={key:"Escape",shift:!1,ctrl:!1,alt:!1,meta:!1},d=function(e){var t=e.content,n=e.timestamp;return o.default.createElement("div",{className:"ds-error-modal__message"},o.default.createElement("span",{className:"ds-error-modal__timestamp"},n),o.default.createElement("span",{className:"ds-error-modal__content"},t))},f=function(){return o.default.createElement("div",{className:"ds-error-modal__ok"},o.default.createElement(u.CheckIcon,null),o.default.createElement("span",null,"No Errors!"))};t.ErrorModal=function(e){var t,n,h=e.onModalClose,p=e.onClearMessages,m=e.player,g=e.shortcut,v=e.controlledState,y=r.__read(o.default.useState("Copy"),2),_=y[0],b=y[1],T=r.__read(o.default.useState([]),2),E=T[0],S=T[1],w=r.__read(o.default.useState(!1),2),A=w[0],M=w[1],L=o.default.useRef(0),C=null!==(t=null==v?void 0:v.isModalActive)&&void 0!==t?t:A,D=null!==(n=null==v?void 0:v.onIsModalActiveChange)&&void 0!==n?n:M,k=s.css("ds-error-modal-overlay",C&&"ds-error-modal-overlay--in"),P=E.length>0,I=r.__assign(r.__assign({},l),g),O=o.default.useCallback((function(){null==h||h(),D(!1)}),[h,D]);return o.default.useEffect((function(){return function(){return window.clearTimeout(L.current)}}),[]),o.default.useEffect((function(){var e=function(e){a.isShortcutPressed(e,I)?D(!C):a.isShortcutPressed(e,c)&&O()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[O,C,D,I]),o.default.useEffect((function(){if(m){var e=m.createSubscriptionContext().on(i.EventTypes.HANDLER_CREATED,(function(e,t){var n=t.sourceHandler;if(n.hasType(i.HandlerTypes.DASH)){var a=n.getEngine();a.on("public_keyError",(function(e){var t={errorType:"Dash Public Key Error",message:e.data.error,timestamp:(new Date).toISOString()};S((function(e){return r.__spreadArray([t],r.__read(e))}))})),a.on("error",(function(e){if("object"==typeof e.error&&"message"in e.error){var t=function(e){var t,n,r=null!==(t=window.dashjs)&&void 0!==t?t:{};if(null===(n=null==r?void 0:r.MediaPlayer)||void 0===n?void 0:n.errors)return Object.keys(r.MediaPlayer.errors).find((function(t){return r.MediaPlayer.errors[t]===e}))}(e.error.code),n={errorType:"Dash Error",message:t?t+" - "+e.error.message:e.error.message,timestamp:(new Date).toISOString()};S((function(e){return r.__spreadArray([n],r.__read(e))}))}}))}else if(n.hasType(i.HandlerTypes.HLS)){n.getEngine().on("hlsError",(function(e,t){var n=t.details,i={errorType:"HLS Error",message:t.type+" - "+n,reason:t.reason,timestamp:(new Date).toISOString()};S((function(e){return r.__spreadArray([i],r.__read(e))}))}))}})).on(i.EventTypes.ERROR,(function(e,t){var n=t.message,a=t.type,o=m.sourceHandler.getType();if(!([i.HandlerTypes.DASH,i.HandlerTypes.HLS].indexOf(o)>=0)){var s={errorType:a,message:n,timestamp:(new Date).toISOString()};S((function(e){return r.__spreadArray([s],r.__read(e))}))}}));return function(){e.unsubscribe()}}}),[m]),o.default.createElement("div",{className:k},o.default.createElement("div",{className:"ds-error-modal"},o.default.createElement("div",{className:s.css("ds-error-modal__heading",!P&&"ds-error-modal__heading--ok")},o.default.createElement("p",null,"Playback Errors"),o.default.createElement("button",{onClick:O},o.default.createElement(u.Close,null),o.default.createElement("span",null,"ESC"))),o.default.createElement("div",{className:"ds-error-modal__content"},!P&&o.default.createElement(f,null),P&&E.map((function(e,t){var n=e.errorType,r=e.message,i=e.timestamp,a=e.reason;return o.default.createElement(d,{key:t,timestamp:i,content:n+": "+r+"."+(a?" "+a:"")})}))),P&&O&&o.default.createElement("div",{className:"ds-error-modal__footer"},o.default.createElement("button",{className:"ds-error-modal__clear",onClick:function(){null==p||p(),S([])}},"Clear"),o.default.createElement("button",{className:"ds-error-modal__copy",onClick:function(){s.copyToClipboard(E),b("Copied!"),L.current=setTimeout((function(){L.current&&b("Copy")}),1e3)}},_))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fullscreen=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(76),o=n(23),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e,t,n=this.props,r=n.isFullscreen,s=n.onClick,u=null!==(e=this.props.iconEnterFullscreen)&&void 0!==e?e:i.default.createElement(o.EnterFullscreenIcon,null),l=null!==(t=this.props.iconExitFullscreen)&&void 0!==t?t:i.default.createElement(o.ExitFullscreenIcon,null);return i.default.createElement(a.Button,{className:"ds-fullscreen",onClick:s},r?l:u)},t}(i.default.PureComponent);t.Fullscreen=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstantReplayButton=void 0;var r=n(2),i=n(54),a=n(62),o=n(222),s=r.__importStar(n(3)),u=n(76),l=n(23);t.InstantReplayButton=function(e){var t,n=e.player,r=e.replayDuration,c=void 0===r?30:r,d=null==n?void 0:n.getPluginByType(i.ReplayPlugin);if(s.useEffect((function(){if(d&&n&&c){var e=function(e){var t=d.getState();t===o.State.PLAYING?d.cancelReplay():t===o.State.IDLE&&"r"===e.key.toLowerCase()&&d.startReplay(n.getCurrentTime()-c,c)},t=function(){d.getState()===o.State.PLAYING&&d.cancelReplay()};return window.addEventListener("keydown",e),window.addEventListener("click",t),function(){window.removeEventListener("keydown",e),window.removeEventListener("click",t)}}})),n&&d&&c){return s.default.createElement(u.Button,{className:"ds-instant-replay",onClick:function(){d.getState()===a.State.PLAYING?d.cancelReplay():d.startReplay(n.getCurrentTime()-c,c)}},null!==(t=e.icon)&&void 0!==t?t:s.default.createElement(l.InstantReplayIcon,null))}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstantReplayTitle=void 0;var r=n(2),i=n(54),a=n(62),o=r.__importStar(n(3)),s=n(237);t.InstantReplayTitle=function(e){var t=e.player,n=e.replayPluginTitle,u=void 0===n?"REPLAY COUNTDOWN":n,l=e.replayDuration,c=void 0===l?30:l,d=null==t?void 0:t.getPluginByType(i.ReplayPlugin),f=r.__read(o.default.useState(0),2),h=f[0],p=f[1],m=r.__read(o.default.useState(!1),2),g=m[0],v=m[1],y=o.default.useRef(null);if(o.default.useLayoutEffect((function(){var e,t;null===(e=y.current)||void 0===e||e.style.setProperty("--replay-half-one-after",c/2+"s"),null===(t=y.current)||void 0===t||t.style.setProperty("--replay-half-after","transform "+c/2+"s linear")}),[c]),o.useEffect((function(){if(d&&t&&c){var e,n=function(){p((function(e){return e-1})),e=setTimeout(n,1e3)},r=function(){(null==d?void 0:d.getState())===a.State.PLAYING?(p(c),v(!0),e=setTimeout(n,1e3)):(clearTimeout(e),v(!1))};return null==d||d.on(a.ReplayEvents.REPLAY_STATE_CHANGED,r),function(){clearTimeout(e),null==d||d.off(a.ReplayEvents.REPLAY_STATE_CHANGED,r)}}}),[t,d,c]),!(t&&d&&u))return null;var _=s.css("ds-replay-player-title",g&&"ds-replay-player-title__showing");return o.default.createElement("div",{className:_},o.default.createElement("div",{className:"replay-progress",ref:y},o.default.createElement("div",{className:"replay-half replay-half-one"}),o.default.createElement("div",{className:"replay-half replay-half-two"}),o.default.createElement("span",null,h)),u)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LevelsMenu=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13),o=n(76),s=n(23),u=function(e,t){var n=t.height>e.height,r=t.height===e.height,i=t.bitrate>e.bitrate;return n?1:r&&i?1:-1},l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getItems=function(e){var n=t.props,i=n.levels,o=n.setLevel,s=n.level,l=n.showLevelVariants,c=n.showBitrate,d=n.levelVariant;if(i){var f=s?s.bitrate:null;return r.__spreadArray([],r.__read(i)).sort(u).map((function(t){var n=a.isActiveLevel({currentBitrate:f,levelBitrate:t.bitrate,showLevelVariants:l,currentVariant:e,levelVariant:d});return{label:a.getLevelLabel(t,c),onClick:function(){return o(t,e)},isActive:n}}))}return[]},t.renderMulti=function(){var e=t.props,n=e.levelVariants,r=e.levels,a=[];if(!r||!r.length)return null;for(var u=0;u<n;u+=1)a.push(t.getItems(u));return i.default.createElement(o.MultiMenu,{icon:i.default.createElement(s.CogIcon,null),sections:a,headings:["Primary","Backup"],className:"ds-menu--levels ds-menu--multi-levels ds-menu--with-check"})},t.renderSingle=function(){var e,n=t.getItems();return n.length<=2?null:i.default.createElement(o.Menu,{icon:null!==(e=t.props.icon)&&void 0!==e?e:i.default.createElement(s.CogIcon,null),items:n,className:"ds-menu--levels ds-menu--with-check"})},t}return r.__extends(t,e),t.prototype.render=function(){return this.props.showLevelVariants?this.renderMulti():this.renderSingle()},t}(i.default.PureComponent);t.LevelsMenu=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Live=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goLive=function(){return t.props.seek(0)},t}return r.__extends(t,e),t.prototype.render=function(){var e,t=this.props,n=t.live,r=t.showLiveDot,o=t.disableSeek,s=t.label,u=void 0===s?"Live":s;if(!n)return null;var l=a.css("ds-live-label ds-control",((e={})["ds-live-label--with-dot"]=!!r,e["ds-live-label--no-seek"]=o,e));return i.default.createElement("div",{className:l,onClick:o?a.noop:this.goLive},u)},t}(i.default.PureComponent);t.Live=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.waiting,t=a.css("ds-loader",this.props.className,{"ds-waiting":e});return i.default.createElement("div",{className:t})},t}(i.default.PureComponent);t.Loader=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Nudge=void 0;var r=n(2).__importDefault(n(3)),i=n(249),a=n(250);t.Nudge=function(e){var t,n,o=e.time,s=e.nudge,u=r.default.useCallback((function(){s(o)}),[o,s]);if(!e.time)return null;var l=null!==(t=e.iconNudgeForward)&&void 0!==t?t:r.default.createElement(a.NudgeForwardIcon,null),c=null!==(n=e.iconNudgeBackward)&&void 0!==n?n:r.default.createElement(i.NudgeBackwardIcon,null);return r.default.createElement("div",{onClick:u},o>0?l:c)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Overlay=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(269),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleDblClick=function(e){e.target===e.currentTarget&&t.props.toggleFullscreen&&t.props.toggleFullscreen()},t.handleMouseMove=function(e){var n=t.props,r=n.activateOverlayTimed,i=n.activateOverlay;t.isOverlayEvent(e)?r():t.keepOverlayShowing(e)?i():r()},t.handleMouseOut=function(){t.props.deactivateOverlay()},t.isOverlayEvent=function(e){return t.getTargetClassName(e).indexOf("ds-overlay")>-1},t.keepOverlayShowing=function(e){var n=t.props.keepOverlayActiveClassname,r=t.getTargetClassName(e),i=e.target;if(r&&i instanceof Element){var a=i.tagName;return r.indexOf(n)>-1||r.indexOf("ds-menu__item")>-1||"svg"===a||"path"===a}return!1},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchstart",this.handleMouseMove),document.addEventListener("mouseleave",this.handleMouseOut)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchstart",this.handleMouseMove),document.removeEventListener("mouseleave",this.handleMouseOut)},t.prototype.getTargetClassName=function(e){var t="",n=e.target;return n&&n instanceof Element&&(t=n.getAttribute("class")||""),t},t.prototype.render=function(){var e=this.props,t=e.isFullscreenAllowed,n=e.overlayIsActive,r=e.loaded;return i.default.createElement(a.OverlayLite,{loaded:r,onDoubleClick:t?this.handleDblClick:void 0,overlayIsActive:n},this.props.children)},t}(i.default.PureComponent);t.Overlay=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayLite=void 0;var r=n(2).__importDefault(n(3)),i=n(13);t.OverlayLite=function(e){var t=e.children,n=e.loaded,a=e.onDoubleClick,o=e.overlayIsActive,s=i.css("ds-overlay",e.className,{"ds-overlay--hover":o,"ds-loading":!n});return r.default.createElement("div",{className:s,onDoubleClick:a},t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PictureInPictureButton=void 0;var r=n(2).__importDefault(n(3)),i=n(23);t.PictureInPictureButton=function(e){var t=e.onClick;return e.isPipSupported?r.default.createElement("div",{className:"ds-control",onClick:t},r.default.createElement(i.PictureInPictureIcon,null)):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayPause=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13),o=n(23),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.paused,n=e.togglePlay,r=e.className,s=e.showRestartIconOnEnded,u=e.hasEnded,l=t?"ds-paused":"ds-playing",c=s&&u?"ds-ended":"";return i.default.createElement("div",{className:a.css("ds-play-pause",r,l,c),onClick:n},i.default.createElement(o.PlayIcon,null),i.default.createElement(o.PauseIcon,null),s&&i.default.createElement(o.ReplayIcon,null))},t}(i.default.PureComponent);t.PlayPause=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Poster=void 0;var r=n(2).__importDefault(n(3));t.Poster=function(e){var t=e.isActive,n=e.posterUrl;return t?r.default.createElement("div",{className:"ds-poster",style:{display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden"}},r.default.createElement("img",{src:n,style:{flexShrink:0,minWidth:"100%",minHeight:"100%"}})):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayPlayer=void 0;var r=n(2),i=n(20),a=n(54),o=n(62),s=r.__importDefault(n(147)),u=r.__importStar(n(3));t.ReplayPlayer=function(e){var t=e.player,n=e.replayState,l=u.useRef(null),c=r.__read(u.useState(!1),2),d=c[0],f=c[1];u.useEffect((function(){if(l.current&&t){var e=t.getPluginByType(a.ReplayPlugin);if(e){e.setRootElement(l.current);var n=t.createSubscriptionContext().on(i.EventTypes.HANDLER_ELEMENT_CREATED,(function(e,t){var n=t.sourceHandler.getElement();null==n||n.classList.add("ds-replay-parent")}));return function(){n.unsubscribe()}}}}),[t,n]),u.useEffect((function(){if(t&&n!==o.State.LOADING){var e=t.getElement(),r=e.classList.contains("ds-replay-playing"),i=n===o.State.PLAYING;r&&!i?(e.classList.remove("ds-replay-playing"),f(!1)):i&&!r&&(e.classList.add("ds-replay-playing"),f(!0))}}),[t,n]);var h=s.default("ds-replay-player",{"ds-replay-playing":d});return u.default.createElement("div",{ref:l,className:h})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayWrapper=void 0;var r=n(2),i=n(20),a=n(54),o=n(62),s=r.__importDefault(n(147)),u=r.__importStar(n(3)),l=n(238),c=n(239),d=function(e,t){var n,r,i,a,o,s=e.getDimensions(),u=s.videoHeight,l=s.videoWidth,c=t.clientWidth,d=t.clientHeight,f=(n=l,r=u,i=c,a=d,o=Math.min(i/n,a/r),{width:n*o,height:r*o});return{parentWidth:c,parentHeight:d,currentRenderedWidth:f.width,currentRenderedHeight:f.height}},f=function(e,t,n,r,i){return c.updateStyle(e,{width:t+"px",height:n+"px",right:r+"px",bottom:i+"px"})};t.ReplayWrapper=function(e){var t=e.player,n=e.label,h=void 0===n?"Live":n,p=u.useRef(null),m=r.__read(u.useState(!1),2),g=m[0],v=m[1];u.default.useEffect((function(){if(t){var e=t.getPluginByType(a.ReplayPlugin);e&&e.on(o.ReplayEvents.REPLAY_STATE_CHANGED,(function(){var n,r;if(e.getState()===o.State.PLAYING&&(null===(n=p.current)||void 0===n?void 0:n.parentElement)){v(!0);var a=d(t,p.current.parentElement),s=a.currentRenderedWidth,u=a.currentRenderedHeight,h=a.parentWidth,m=.25*s,y=.25*u,_=(h-s)/2;f(p.current,s,u,_,0),t.sourceHandler.hasType(i.HandlerTypes.HLS)&&(t.sourceHandler.getEngine().capLevelToPlayerSize=!1),l.deferredFrame((function(){p.current&&f(p.current,m,y,50,80)}))}else{var b=g&&e.getState()===o.State.IDLE;if((null===(r=p.current)||void 0===r?void 0:r.parentElement)&&b){var T=d(t,p.current.parentElement);s=T.currentRenderedWidth,u=T.currentRenderedHeight,_=((h=T.parentWidth)-s)/2;f(p.current,s,u,_,0),t.sourceHandler.hasType(i.HandlerTypes.HLS)&&(t.sourceHandler.getEngine().capLevelToPlayerSize=!0),l.deferredFrame((function(){var e;p.current&&(e=p.current,c.updateStyle(e,{width:"",height:"",right:"",bottom:""}),v(!1))}),600)}}}))}}),[t,g]);var y=s.default("ds-replay-wrapper",{"ds-replay-wrapper-playing":g});return u.default.createElement("div",{ref:p,className:y},u.default.createElement("div",{className:"ds-replay-live-label"},h),e.children)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SeekBar=void 0;var r=n(2),i=n(10),a=r.__importDefault(n(3)),o=n(13),s=n(149),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sliderRef=a.default.createRef(),t.nudgeValue=function(e,n){var r,i=e/t.getSeekableDuration();null===(r=t.sliderRef.current)||void 0===r||r.nudgeValue(i,n)},t.getBreaks=function(){var e;return null!==(e=t.props.breaks)&&void 0!==e?e:[]},t.getSeekableDuration=function(){var e=t.getSeekableRange(),n=e.start;return e.end-n},t.getSeekableRange=function(){var e=t.props,n=e.collapseBreaks,r=e.seekable;return n?o.getContentRangeFromStreamRange(r,t.getBreaks()):r},t.getTimeFromValue=function(e){var n=t.getSeekableRange(),r=n.start;return r+(n.end-r)*e},t.getMarkers=function(){var e,n,r=t.props.collapseBreaks,i=t.getSeekableRange(),a=i.start,s=i.end-a;return null!==(n=null===(e=t.props.breaks)||void 0===e?void 0:e.map((function(e){var n,a=e.duration,u=e.isWatched,l=e.startTime;return{className:o.css("ds-seek-bar__ad",(n={},n["ds-seek-bar__ad--watched"]=u,n)),position:t.getValueFromStreamTime(l,i),size:r?0:a/s}})))&&void 0!==n?n:[]},t.getTooltipImage=function(e){var n,r,i,a=t.getTimeFromValue(e);return null!==(i=null===(r=(n=t.props).getPreviewImage)||void 0===r?void 0:r.call(n,a))&&void 0!==i?i:""},t.getTooltipLabel=function(e){var n=t.getSeekableDuration(),r=t.getTimeFromValue(e),i=t.props,a=i.displayRelativeTime,s=i.seekable;return a&&(r-=s.start),o.formatTime(r,n>=3600)},t.getValueFromStreamTime=function(e,n){var r=t.props.collapseBreaks,a=n.start,s=n.end,u=(r?o.getContentTimeFromStreamTime(e,t.getBreaks()):e)-a,l=s-a,c=i.clamp(u/l,0,1);return c!=c?0:c},t.handleDragEnd=function(e){var n=t.props,r=n.collapseBreaks,i=n.seek,a=t.getTimeFromValue(e);i(r?o.getStreamTimeFromContentTime(a,t.getBreaks()):a)},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.currentTime,n=e.sliderProps,i=this.getSeekableRange(),o=this.getValueFromStreamTime(t,i);return a.default.createElement("div",{className:"ds-seek-bar"},a.default.createElement("div",{className:"ds-seek-bar__progress-container"},a.default.createElement(s.Slider,r.__assign({draggable:!0,onDragEnd:this.handleDragEnd,orientation:"horizontal",shyScrubber:!0,tooltipImage:this.getTooltipImage,tooltipLabel:this.getTooltipLabel,value:o,markers:this.getMarkers()},n,{ref:this.sliderRef}))))},t}(a.default.PureComponent);t.SeekBar=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextTrackMenu=void 0;var r=n(2),i=n(10),a=r.__importDefault(n(3)),o=n(13),s=n(76),u=n(23),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getItems=function(e,t,n,a,o){void 0===a&&(a=""),void 0===o&&(o=!0);var s=e.reduce((function(e,o){var s=o.label,u=i.isTextTrackEqual(o,n);return a&&o.kind!==a||!o.label.length?e:r.__spreadArray(r.__spreadArray([],r.__read(e)),[{label:s,onClick:function(){return t(o)},isActive:u}])}),[]);return o&&s.length&&s.push({label:"Off",onClick:function(){return t(void 0)},isActive:void 0===n}),s},t.renderMulti=function(e,n){var r;return a.default.createElement(s.MultiMenu,{icon:null!==(r=t.props.icon)&&void 0!==r?r:a.default.createElement(u.TextTracksIcon,null),sections:e,headings:n,className:"ds-menu--levels ds-menu--multi-levels ds-menu--with-check"})},t.renderSingle=function(e,n){var r;return a.default.createElement(s.Menu,{icon:null!==(r=t.props.icon)&&void 0!==r?r:a.default.createElement(u.TextTracksIcon,null),items:e,header:n,className:"ds-menu--levels ds-menu--with-check"})},t}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.textTracks,i=void 0===n?[]:n,a=t.setTextTrack,s=t.currentTextTrack,u=o.getTextTrackTypes(i);if(0===u.length)return null;if(1===u.length){var l=r.__read(u,1)[0],c=this.getItems(i,a,s);return this.renderSingle(c,l)}var d=[];return u.forEach((function(t,n){var r=n===u.length-1;d.push(e.getItems(i,a,s,t,r))})),this.renderMulti(d,u)},t}(a.default.PureComponent);t.TextTrackMenu=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Time=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.duration,n=e.currentTime;if(e.live)return null;var r=t>=3600;return i.default.createElement("div",{className:"ds-time-label"},a.formatTime(n,r)+" / "+a.formatTime(t,r))},t}(i.default.PureComponent);t.Time=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=t.TooltipPosition=void 0;var r,i=n(2).__importDefault(n(3)),a=n(13);!function(e){e.TOP="TOP",e.RIGHT="RIGHT",e.BOTTOM="BOTTOM",e.LEFT="LEFT"}(r=t.TooltipPosition||(t.TooltipPosition={}));t.Tooltip=function(e){var t=e.label,n=e.position,o=e.children,s=e.player,u=e.isHidden,l=i.default.useRef(null),c=a.css("ds-tooltip",function(e){switch(void 0===e&&(e=r.TOP),e){case r.BOTTOM:return"ds-tooltip--bottom";case r.LEFT:return"ds-tooltip--left";case r.RIGHT:return"ds-tooltip--right";default:return"ds-tooltip--top"}}(n));return i.default.useEffect((function(){var e=l.current,t=null==s?void 0:s.getElement();if(e&&t){var n=e.getBoundingClientRect(),r=n.left,i=n.right,a=t.getBoundingClientRect(),o=a.left,u=a.right;o>=r?(e.style.left="3px",e.style.transform="unset"):u<=i&&(e.style.left="unset",e.style.right="3px",e.style.transform="unset")}}),[s,n,u]),u?null:i.default.createElement("div",{className:c},i.default.createElement("span",{className:"ds-tooltip__label",ref:l},t),i.default.createElement("span",null,o))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Volume=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13),o=n(148),s=n(23),u=n(149),l=function(e){function t(t){var n=e.call(this,t)||this;return n.calculateClassNames=function(){var e=n.props,t=e.className,r=e.keepOverlayActiveClassname,i=e.alwaysActive,o=n.state.isDragging;return{root:a.css("ds-menu","ds-volume",i&&"ds-menu--active",t),iconContainer:a.css("ds-menu__icon"),sliderContainer:a.css("ds-menu__content","ds-volume__slider-container",r,{"ds-menu--active":o})}},n.handleIconClick=function(){n.props.toggleMute()},n.handleDragEnd=function(e){0===e?n.setVolume(Math.max(.4,n.volumeFrom),!0):n.setVolume(e,!1)},n.handleDragStart=function(e){n.volumeFrom=e,n.setVolume(e,!1)},n.handleVolumeChange=function(e){n.setVolume(e)},n.setVolume=function(e,t){null!=e&&e!==n.props.volume&&n.props.setVolume(e),null!=t&&t!==n.props.muted&&n.props.toggleMute()},n.volumeContainerRef=i.default.createRef(),n.volumeFrom=1,n.menuCommon=new o.MenuCommon(n.volumeContainerRef),n.state={isDragging:!1},n}return r.__extends(t,e),Object.defineProperty(t.prototype,"volume",{get:function(){return this.props.muted?0:this.props.volume},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.props,t=e.muted,n=e.showVolumeSlider,o=e.sliderProps,l=e.alwaysActive,c=e.icon,d=this.calculateClassNames(),f=this.volume;return i.default.createElement("div",{className:d.root,ref:this.volumeContainerRef,onMouseEnter:l?a.noop:this.menuCommon.mouseEnter,onMouseLeave:l?a.noop:this.menuCommon.mouseLeave},n&&i.default.createElement("div",{className:d.sliderContainer},i.default.createElement(u.Slider,r.__assign({onDragEnd:this.handleDragEnd,onDragStart:this.handleDragStart,onValueChange:this.handleVolumeChange,orientation:"vertical-reversed",value:f},o))),i.default.createElement("div",{className:d.iconContainer,onClick:this.handleIconClick},c?c({muted:t,volume:f}):i.default.createElement(s.VolumeIcon,{muted:t,volume:f})))},t}(i.default.PureComponent);t.Volume=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(281),t),r.__exportStar(n(283),t),r.__exportStar(n(285),t),r.__exportStar(n(286),t),r.__exportStar(n(946),t),r.__exportStar(n(34),t),r.__exportStar(n(108),t),r.__exportStar(n(31),t),r.__exportStar(n(28),t),r.__exportStar(n(288),t),r.__exportStar(n(287),t),r.__exportStar(n(289),t),r.__exportStar(n(290),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioTracks=void 0;var r=n(2).__importDefault(n(3)),i=n(11),a=n(34),o=n(31),s=n(28);t.AudioTracks=function(e){var t=e.goBack,n=i.useVideoContext(),u=n.state,l=u.audioTracks,c=u.audioTrack,d=n.controls.setAudioTrack;if(l.length<=1)return null;return r.default.createElement("div",{className:"ds-settings-menu__sub-menu"},r.default.createElement(o.SettingsHeading,{onClick:t},"Audio"),l.map((function(e){return r.default.createElement(s.SettingsItem,{key:e.id,onClick:function(){return d(e),void t()}},r.default.createElement(a.SettingsActiveItem,{isActive:e.id===(null==c?void 0:c.id)}),r.default.createElement("span",null,e.label))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useVideoContext=void 0;var r=n(2).__importDefault(n(3)),i=n(145);t.useVideoContext=function(){var e=r.default.useContext(i.VideoContext);if(!e)throw new Error("VideoContext must be used inside its Provider");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuItems=void 0;var r=n(2).__importDefault(n(3)),i=n(23),a=n(284),o=n(108),s=n(28);t.MenuItems=function(e){var t=e.onClick,n=o.useSettingsContext(),u=n.playbackSpeeds,l=n.hideTextTracks,c=n.qualityLevelsOptions,d=n.hideAudioTracks;return r.default.createElement("div",{className:"ds-settings-menu__menu-items"},u&&r.default.createElement(s.SettingsItem,{onClick:function(){return t(a.MenuOption.PLAYBACK_SPEED)}},r.default.createElement("span",null,"Playback speed"),r.default.createElement("span",null,r.default.createElement(i.ChevronRight,null))),!d&&r.default.createElement(s.SettingsItem,{onClick:function(){return t(a.MenuOption.AUDIO_TRACKS)}},r.default.createElement("span",null,"Audio"),r.default.createElement("span",null,r.default.createElement(i.ChevronRight,null))),!l&&r.default.createElement(s.SettingsItem,{onClick:function(){return t(a.MenuOption.TEXT_TRACKS)}},r.default.createElement("span",null,"Subtitles/CC"),r.default.createElement("span",null,r.default.createElement(i.ChevronRight,null))),!(null==c?void 0:c.hideQualityLevels)&&r.default.createElement(s.SettingsItem,{onClick:function(){return t(a.MenuOption.QUALITY)}},r.default.createElement("span",null,"Quality"),r.default.createElement("span",null,r.default.createElement(i.ChevronRight,null))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2).__exportStar(n(945),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaybackSpeed=void 0;var r=n(2).__importDefault(n(3)),i=n(11),a=n(34),o=n(31),s=n(28);t.PlaybackSpeed=function(e){var t=e.goBack,n=e.playbackSpeeds,u=i.useVideoContext(),l=u.state.playbackRate,c=u.controls.setPlaybackRate;return r.default.createElement("div",{className:"ds-settings-menu__sub-menu"},r.default.createElement(o.SettingsHeading,{onClick:t},"Playback speed"),n.map((function(e){var n,i;return"object"==typeof e?(i=e.label,n=e.value):(n=e,i=e),r.default.createElement(s.SettingsItem,{key:n,onClick:function(){return function(e){c(e),t()}(n)}},r.default.createElement(a.SettingsActiveItem,{isActive:l===n}),r.default.createElement("span",null,i))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QualityLevels=void 0;var r=n(2).__importDefault(n(3)),i=n(11),a=n(13),o=n(34),s=n(31),u=n(28),l=n(287),c=function(e){var t=e.currentVariant,n=e.qualityLevels,i=e.currentBitrate,s=e.showBitrate,l=e.showLevelVariants,c=e.levelVariant,d=e.handleSetLevel;return r.default.createElement(r.default.Fragment,null,n.map((function(e){var n=a.isActiveLevel({currentBitrate:i,levelBitrate:e.bitrate,showLevelVariants:l,currentVariant:t,levelVariant:c});return r.default.createElement(u.SettingsItem,{key:e.bitrate,onClick:function(){return d(e,t)}},r.default.createElement(o.SettingsActiveItem,{isActive:n}),r.default.createElement("span",null,a.getLevelLabel(e,s)))})))};t.QualityLevels=function(e){var t,n=e.goBack,a=e.showBitrate,o=e.showLevelVariants,u=i.useVideoContext(),d=u.state,f=d.levelVariant,h=d.levels,p=d.level,m=d.levelVariants,g=u.controls.setLevel;function v(e,t){g(e,t),n()}var y=null!==(t=null==p?void 0:p.bitrate)&&void 0!==t?t:null,_=o&&m>1;return r.default.createElement("div",{className:"ds-settings-menu__sub-menu"},r.default.createElement(s.SettingsHeading,{onClick:n},"Quality"),_?r.default.createElement("div",{className:"ds-settings-menu__multi"},Array(m).fill(void 0).map((function(e,t){var n=t>0?"Backup":"Primary";return r.default.createElement("div",{key:t},r.default.createElement(l.SettingsSubHeading,null,n),r.default.createElement(c,{currentBitrate:y,currentVariant:t,handleSetLevel:v,levelVariant:f,qualityLevels:h,showBitrate:a,showLevelVariants:o}))}))):r.default.createElement(c,{currentBitrate:y,currentVariant:0,handleSetLevel:v,levelVariant:f,qualityLevels:h,showBitrate:a,showLevelVariants:o}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsSubHeading=void 0;var r=n(2).__importDefault(n(3));t.SettingsSubHeading=function(e){var t=e.children;return r.default.createElement("div",{className:"ds-settings-menu__sub-heading"},t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsMenu=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(13),s=n(283),u=n(289);t.SettingsMenu=function(e){var t=e.isOpen,n=a.useVideoContext().controls.getElement,l=r.__read(i.default.useState(void 0),2),c=l[0],d=l[1],f=r.__read(i.default.useState(),2),h=f[0],p=f[1],m=o.css("ds-settings-menu",t&&"ds-settings-menu--open",c&&"ds-settings-menu--item-selected"),g=i.default.useRef(null);return i.default.useEffect((function(){d(void 0),p(void 0)}),[t]),a.useScrollable({parentElement:n(),targetElement:g.current},[t,c,h]),i.default.createElement("div",{className:m,ref:g},i.default.createElement("div",{className:"ds-settings-menu__content"},i.default.createElement(s.MenuItems,{onClick:function(e){d(e)}}),i.default.createElement(u.SubMenu,{activeMenu:c,goBack:function(){d(void 0)},selectSubMenuItem:function(e){p(e)}})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubMenu=void 0;var r=n(2).__importDefault(n(3)),i=n(281),a=n(284),o=n(285),s=n(286),u=n(108),l=n(290);t.SubMenu=function(e){var t=e.activeMenu,n=e.goBack,c=e.selectSubMenuItem,d=u.useSettingsContext(),f=d.playbackSpeeds,h=d.hideAudioTracks,p=d.qualityLevelsOptions,m=d.hideTextTracks;switch(t){case a.MenuOption.PLAYBACK_SPEED:return(null==f?void 0:f.length)?r.default.createElement(o.PlaybackSpeed,{goBack:n,playbackSpeeds:f}):null;case a.MenuOption.QUALITY:return(null==p?void 0:p.hideQualityLevels)?null:r.default.createElement(s.QualityLevels,{goBack:n,showBitrate:null==p?void 0:p.showBitrate,showLevelVariants:null==p?void 0:p.showLevelVariants});case a.MenuOption.TEXT_TRACKS:return m?null:r.default.createElement(l.TextTracks,{goBack:n,selectSubMenuItem:c});case a.MenuOption.AUDIO_TRACKS:return h?null:r.default.createElement(i.AudioTracks,{goBack:n});default:return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2).__exportStar(n(947),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHARACTER_EDGE_STYLE=void 0,t.CHARACTER_EDGE_STYLE={None:{cssProperty:"textShadow",cssValue:"none",label:"none"},"Drop Shadow":{cssProperty:"textShadow",cssValue:"rgb(34 34 34) 1.68889px 1.68889px 2.53333px, rgb(34 34 34) 1.68889px 1.68889px 3.37778px, rgb(34 34 34) 1.68889px 1.68889px 4.22222px",label:"dropShadow"},Raised:{cssProperty:"textShadow",cssValue:"rgb(34 34 34) 1px 1px, rgb(34 34 34) 1.5px 1.5px, rgb(34 34 34) 2px 2px, rgb(34 34 34) 2.5px 2.5px",label:"raised"},Depressed:{cssProperty:"textShadow",cssValue:"rgb(204 204 204) 1px 1px, rgb(34 34 34) -1px -1px",label:"depressed"},Outline:{cssProperty:"textShadow",cssValue:"rgb(34 34 34) 0px 0px 1.68889px, rgb(34 34 34) 0px 0px 1.68889px, rgb(34 34 34) 0px 0px 1.68889px, rgb(34 34 34) 0px 0px 1.68889px, rgb(34 34 34) 0px 0px 1.68889px",label:"outline"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedAudioLang=void 0;var r=n(2).__importDefault(n(3)),i=n(11),a=n(23),o=n(974);t.ConnectedAudioLang=function(e){var t=e.isModalActive,n=e.toggleModal,s=i.useVideoContext(),u=s.state,l=u.audioTrack,c=u.audioTracks,d=s.controls.setAudioTrack;return c.length<2?null:r.default.createElement("div",{className:"ds-audio-menu"},r.default.createElement("span",{className:"ds-audio-menu__label"},"Audio:"),r.default.createElement("button",{className:"ds-audio-menu__current-track",onClick:function(){return n()}},r.default.createElement("span",{className:"ds-btn-flex"},r.default.createElement("span",null,null==l?void 0:l.label),r.default.createElement(a.CaretDown,null))),r.default.createElement(o.AudioLangModal,{tracks:c,setAudioTrack:d,toggleModal:n,isModalActive:t,currentTrack:l}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedChromecastButton=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(257);t.ConnectedChromecastButton=function(e){var t=a.useVideoContext(),n=t.controls.startCasting,s=t.state,u=s.showCast,l=s.castState;return i.default.createElement(o.ChromecastButton,r.__assign({startCasting:n,show:u,castState:l},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenu=t.DEFAULT_OPTIONS=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(13),s=n(77),u=n(295),l=n(296),c=n(297),d=n(299);t.DEFAULT_OPTIONS=[l.CopyStreamUrl,c.LoopVideo,d.ToggleStats,u.CopyImaStreamId];t.ContextMenu=function(e){var n=e.player,u=e.targetElementQuerySelector,l=e.options,c=void 0===l?t.DEFAULT_OPTIONS:l,d=r.__read(i.useState(!1),2),f=d[0],h=d[1],p=i.useRef(null),m=o.css("ds-context-menu",f&&"ds-context-menu--in"),g=null==n?void 0:n.version,v=function(){return h(!1)};return i.useEffect((function(){var e=p.current;if(n&&e){var t=u?document.querySelector(u):n.getElement();if(!t)return;var r=function(n){if(f)h(!1);else{var r=n.clientX,i=n.clientY,a=t.getBoundingClientRect(),o=a.top,s=a.left;e.style.left=r-s+"px",e.style.top=i-o+"px",h(!0),n.preventDefault()}},i=function(t){var n=t.target;f&&e!==n&&!e.contains(n)&&h(!1)};return t.addEventListener("contextmenu",r),document.addEventListener("click",i),function(){t.removeEventListener("contextmenu",r),document.removeEventListener("click",i)}}}),[f,n,u]),a.useScrollable({parentElement:null==n?void 0:n.getElement(),targetElement:p.current},[f]),n?i.createElement("div",{ref:p,className:m},c.map((function(e,t){return i.createElement(e,{key:t,player:n,close:v})})),i.createElement(s.ContextMenuItem,{isLabel:!0},"Powered by Doris v",g)):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyImaStreamId=void 0;var r=n(2),i=n(20),a=n(54),o=n(75),s=r.__importStar(n(3)),u=n(13),l=n(77);t.CopyImaStreamId=function(e){var t=e.player,n=e.close,c=r.__read(s.useState(""),2),d=c[0],f=c[1],h=r.__read(s.useState("Copy IMA Stream ID"),2),p=h[0],m=h[1],g=s.useRef(0);if(s.useEffect((function(){return function(){return window.clearTimeout(g.current)}}),[]),s.useEffect((function(){var e=null==t?void 0:t.getPluginByType(a.IMAPlugin);if(e&&t){var n=t.createSubscriptionContext().on(i.EventTypes.DESTROYING,(function(){return f("")})),r=e.createSubscriptionContext().on(o.StreamEvent.LOADED,(function(e,t){f(t.getStreamData().streamId)}));return function(){r.unsubscribe(),n.unsubscribe()}}}),[t]),!d)return null;return s.createElement(l.ContextMenuItem,{onClick:function(){u.copyToClipboard(d),m("Copy IMA Stream ID - Copied!"),g.current=setTimeout((function(){g.current&&(n(),m("Copy IMA Stream ID"))}),1e3)}},p)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyStreamUrl=void 0;var r=n(2),i=n(20),a=r.__importStar(n(3)),o=n(13),s=n(77);t.CopyStreamUrl=function(e){var t=e.player,n=e.close,u=r.__read(a.useState(""),2),l=u[0],c=u[1],d=r.__read(a.useState("Copy stream URL"),2),f=d[0],h=d[1],p=a.useRef(0);if(a.useEffect((function(){return function(){return window.clearTimeout(p.current)}}),[]),a.useEffect((function(){if(t){var e=t.createSubscriptionContext().on([i.EventTypes.READY,i.EventTypes.DESTROYING],(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];switch(e[0]){case i.EventTypes.READY:var r=t.getSourceUrl();c(null!=r?r:"");break;case i.EventTypes.DESTROYING:c("")}}));return function(){e.unsubscribe()}}}),[t]),!l)return null;return a.createElement(s.ContextMenuItem,{onClick:function(){o.copyToClipboard(l),h("Copy stream URL - Copied!"),p.current=setTimeout((function(){p.current&&(n(),h("Copy stream URL"))}),1e3)}},f)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoopVideo=void 0;var r=n(2),i=n(20),a=r.__importStar(n(3)),o=n(23),s=n(298),u=n(77);t.LoopVideo=function(e){var t=e.player,n=e.close,l=r.__read(a.useState(!1),2),c=l[0],d=l[1];if(a.useEffect((function(){if(c){var e=t.createSubscriptionContext().on(i.EventTypes.ENDED,(function(){return t.play()}));return function(){return e.unsubscribe()}}}),[c,t]),t.getIsLive())return null;return a.createElement(u.ContextMenuItem,{onClick:function(){d((function(e){return!e})),n()}},a.createElement("span",null,"Loop video"),c&&a.createElement(s.ContextMenuIcon,null,a.createElement(o.CheckIcon,null)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenuIcon=void 0;var r=n(2).__importStar(n(3));t.ContextMenuIcon=function(e){var t=e.children;return r.createElement("span",{className:"ds-context-menu__item-icon"},t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleStats=void 0;var r=n(2).__importStar(n(3)),i=n(77);t.ToggleStats=function(e){var t=e.player,n=e.close;return r.createElement(i.ContextMenuItem,{onClick:function(){t.toggleDebugOverlay(),n()}},"Toggle Stats")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedControlBar=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(258);t.ConnectedControlBar=function(e){var t=a.useVideoContext().state.ready;return i.default.createElement(o.ControlBar,r.__assign({ready:t},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedFullscreen=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(261);t.ConnectedFullscreen=function(e){var t=a.useVideoContext(),n=t.controls.toggleFullscreen,s=t.state.isFullscreen;return i.default.createElement(o.Fullscreen,r.__assign({isFullscreen:s,onClick:n},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedLive=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(265);t.ConnectedLive=function(e){var t=a.useVideoContext(),n=t.controls.seek,s=t.state.live;return i.default.createElement(o.Live,r.__assign({live:s,seek:n},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedPlayPause=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(271);t.ConnectedPlayPause=function(e){var t=a.useVideoContext(),n=t.controls.togglePlay,s=t.state,u=s.paused,l=s.rebuffering,c=s.hasEnded;return i.default.createElement(o.PlayPause,r.__assign({paused:u&&!l,hasEnded:c,togglePlay:n},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedTime=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(277);t.ConnectedTime=function(e){var t,n=a.useVideoContext(),s=n.state,u=s.contentTime,l=s.contentDuration,c=s.live,d=s.optimisticContentTime,f=s.seekable,h=(null!==(t=e.useOptimisticSeeking)&&void 0!==t?t:n.options.useOptimisticSeeking)?d:u;return c||(h-=f.start),i.default.createElement(o.Time,r.__assign({currentTime:h,duration:l,live:c},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedVolume=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(279);t.ConnectedVolume=function(e){var t=a.useVideoContext(),n=t.controls,s=n.setVolume,u=n.toggleMute,l=t.overlayStates.keepOverlayActiveClassname,c=t.state,d=c.muted,f=c.readonlyVolume,h=c.volume;return i.default.createElement(o.Volume,r.__assign({keepOverlayActiveClassname:l,muted:d,setVolume:s,showVolumeSlider:!f,toggleMute:u,volume:h},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logo=void 0;var r=n(2),i=n(20),a=r.__importStar(n(3)),o=n(13);t.Logo=a.forwardRef((function(e,t){var n=e.url,r=e.alt,s=e.height,u=e.width,l=e.maxHeight,c=e.maxWidth,d=e.position,f=void 0===d?i.LogoPositions.TOP_LEFT:d,h=o.css("ds-logo","ds-logo--"+f.toLowerCase().split("_").join("-"),{"ds-logo--empty":!n},e.className);return a.default.createElement("img",{ref:t,className:h,src:n,alt:r,style:{height:s,maxHeight:l,maxWidth:c,width:u}})}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedThumbnail=void 0;var r=n(2).__importDefault(n(3)),i=n(11),a=n(13),o=n(150),s=n(1003),u=n(308);t.ConnectedThumbnail=function(e){var t=e.imgSrc,n=e.imgAlt,l=e.dateTime,c=i.useVideoContext().state.ready,d=a.css("ds-thumbnail__play",c&&"ds-thumbnail__play--ready"),f=function(e){if(e){var t=new Date(e);return{time:t.toLocaleTimeString().substring(0,5),date:t.toLocaleDateString()}}}(l);return r.default.createElement("div",{className:"ds-thumbnail-wrapper"},r.default.createElement("div",{className:"ds-thumbnail"},r.default.createElement("div",{className:d},r.default.createElement(s.ConnectedPlayPause,null),r.default.createElement(o.ConnectedLoader,null)),f&&!c&&r.default.createElement("div",{className:"ds-thumbnail__schedule"},r.default.createElement("span",{className:"ds-thumbnail__time"},f.time),r.default.createElement("span",{className:"ds-thumbnail__date"},f.date)),r.default.createElement(u.Image,{src:t,alt:null!=n?n:"Thumbnail"})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Image=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13);t.Image=function(e){var t=e.src,n=e.alt,o=r.__rest(e,["src","alt"]),s=r.__read(i.default.useState(!1),2),u=s[0],l=s[1],c=i.default.useRef(null);return i.default.useEffect((function(){var e=c.current;e&&t&&(e.onload=function(){l(!0)},e.onerror=function(){l(!1)},e.src=t)}),[t]),i.default.createElement("div",{className:a.css("ds-image",u&&"ds-image--ready")},i.default.createElement("img",r.__assign({},o,{src:t,alt:n,ref:c,className:"ds-image__thumbnail"})),i.default.createElement("div",{className:"ds-image__placeholder"}))}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(310)),r(n(1032)),r(n(152)),r(n(1033))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(152);t.getCustomParamsFromEPG=async(e,t,n)=>{if(e){const i=new Date(Date.now()-12e3),a=null!=n?n:i,o=await e.getProgramForTime(a,t);if(null==o?void 0:o.daiKeyValues){return{customParameters:r.parseDaiKeyValues(o.daiKeyValues),validFrom:o.startTime,validUntil:o.endTime}}throw new Error("No EPG information is available for the selected live stream!")}throw new Error("Failed to set ad tag parameters. EPGPlugin not found!")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(1038))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vttToJson=void 0;const r=n(1042),i=e=>{const t=e.split(":");return 2===t.length&&t.unshift("00"),t.reduce((e,t,n)=>e+parseInt(t,10)*[r.HOURS,r.MINUTES,r.SECONDS][n],0)};t.vttToJson=e=>new Promise((t,n)=>{const a=e.split("\n");let o=!1;try{if(0!==a[0].indexOf(r.VTT_HEADER))return n({error:"invalid vtt string"});return t(a.reduce((e,t)=>{if(""===t)return o=!1,e;if(t.indexOf("--\x3e")>-1){o=!0;const[n="",a=""]=t.split(r.VTT_TIMING_SEPARATOR),s=n.trim().split(" ").pop()||"",u=a.trim().split(" ").shift()||"";return e.concat(((e,t)=>({start:i(e),end:i(t),part:[]}))(s,u))}if(o&&""!==t){const n=e[e.length-1].part.concat(t);return e.map((t,r)=>r<e.length-1?t:Object.assign(Object.assign({},t),{part:n}))}return e},[]))}catch(e){n(e)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageDirection=void 0,function(e){e.LTR="ltr",e.RTL="rtl"}(t.LanguageDirection||(t.LanguageDirection={}))},function(e,t,n){!function(e){"use strict";e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},r=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},i={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},a=function(e){return function(t,n,a,o){var s=r(t),u=i[e][r(t)];return 2===s&&(u=u[n?0:1]),u.replace(/%d/i,t)}},o=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar",{months:o,monthsShort:o,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:a("s"),ss:a("s"),m:a("m"),mm:a("m"),h:a("h"),hh:a("h"),d:a("d"),dd:a("d"),M:a("M"),MM:a("M"),y:a("y"),yy:a("y")},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(4))},function(e,t,n){!function(e){"use strict";var t=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},n={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},r=function(e){return function(r,i,a,o){var s=t(r),u=n[e][t(r)];return 2===s&&(u=u[i?0:1]),u.replace(/%d/i,r)}},i=["جانفي","فيفري","مارس","أفريل","ماي","جوان","جويلية","أوت","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar-dz",{months:i,monthsShort:i,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:r("s"),ss:r("s"),m:r("m"),mm:r("m"),h:r("h"),hh:r("h"),d:r("d"),dd:r("d"),M:r("M"),MM:r("M"),y:r("y"),yy:r("y")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:0,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ar-kw",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:0,doy:12}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},r={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},i=function(e){return function(t,i,a,o){var s=n(t),u=r[e][n(t)];return 2===s&&(u=u[i?0:1]),u.replace(/%d/i,t)}},a=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"];e.defineLocale("ar-ly",{months:a,monthsShort:a,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اثنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};e.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",ss:"%d ثانية",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"bir neçə saniyə",ss:"%d saniyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(e){return/^(gündüz|axşam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gecə":e<12?"səhər":e<17?"gündüz":"axşam"},dayOfMonthOrdinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(e){if(0===e)return e+"-ıncı";var n=e%10;return e+(t[n]||t[e%100-n]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n){var r,i;return"m"===n?t?"хвіліна":"хвіліну":"h"===n?t?"гадзіна":"гадзіну":e+" "+(r=+e,i={ss:t?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:t?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:t?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"}[n].split("_"),r%10==1&&r%100!=11?i[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?i[1]:i[2])}e.defineLocale("be",{months:{format:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_"),standalone:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_")},monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:{format:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_"),standalone:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),isFormat:/\[ ?[Ууў] ?(?:мінулую|наступную)? ?\] ?dddd/},weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:t,mm:t,h:t,hh:t,d:"дзень",dd:t,M:"месяц",MM:t,y:"год",yy:t},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(e){return/^(дня|вечара)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночы":e<12?"раніцы":e<17?"дня":"вечара"},dayOfMonthOrdinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-ы":e+"-і";case"D":return e+"-га";default:return e}},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"яну_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Миналата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[Миналия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",ss:"%d секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",w:"седмица",ww:"%d седмици",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mɛkalo_Zuwɛnkalo_Zuluyekalo_Utikalo_Sɛtanburukalo_ɔkutɔburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_Mɛ_Zuw_Zul_Uti_Sɛt_ɔku_Now_Des".split("_"),weekdays:"Kari_Ntɛnɛn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Ntɛ_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm"},calendar:{sameDay:"[Bi lɛrɛ] LT",nextDay:"[Sini lɛrɛ] LT",nextWeek:"dddd [don lɛrɛ] LT",lastDay:"[Kunu lɛrɛ] LT",lastWeek:"dddd [tɛmɛnen lɛrɛ] LT",sameElse:"L"},relativeTime:{future:"%s kɔnɔ",past:"a bɛ %s bɔ",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lɛrɛ kelen",hh:"lɛrɛ %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};e.defineLocale("bn",{months:"জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/রাত|সকাল|দুপুর|বিকাল|রাত/,meridiemHour:function(e,t){return 12===e&&(e=0),"রাত"===t&&e>=4||"দুপুর"===t&&e<5||"বিকাল"===t?e+12:e},meridiem:function(e,t,n){return e<4?"রাত":e<10?"সকাল":e<17?"দুপুর":e<20?"বিকাল":"রাত"},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};e.defineLocale("bn-bd",{months:"জানুয়ারি_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব্রু_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্ট_অক্টো_নভে_ডিসে".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি".split("_"),weekdaysMin:"রবি_সোম_মঙ্গল_বুধ_বৃহ_শুক্র_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm সময়",LLLL:"dddd, D MMMM YYYY, A h:mm সময়"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কয়েক সেকেন্ড",ss:"%d সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/রাত|ভোর|সকাল|দুপুর|বিকাল|সন্ধ্যা|রাত/,meridiemHour:function(e,t){return 12===e&&(e=0),"রাত"===t?e<4?e:e+12:"ভোর"===t?e:"সকাল"===t?e:"দুপুর"===t?e>=3?e:e+12:"বিকাল"===t?e+12:"সন্ধ্যা"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"রাত":e<6?"ভোর":e<12?"সকাল":e<15?"দুপুর":e<18?"বিকাল":e<20?"সন্ধ্যা":"রাত"},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"},n={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};e.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་1_ཟླ་2_ཟླ་3_ཟླ་4_ཟླ་5_ཟླ་6_ཟླ་7_ཟླ་8_ཟླ་9_ཟླ་10_ཟླ་11_ཟླ་12".split("_"),monthsShortRegex:/^(ཟླ་\d{1,2})/,monthsParseExact:!0,weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི_ཟླ_མིག_ལྷག_ཕུར_སངས_སྤེན".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",ss:"%d སྐར་ཆ།",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(e){return e.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,meridiemHour:function(e,t){return 12===e&&(e=0),"མཚན་མོ"===t&&e>=4||"ཉིན་གུང"===t&&e<5||"དགོང་དག"===t?e+12:e},meridiem:function(e,t,n){return e<4?"མཚན་མོ":e<10?"ཞོགས་ཀས":e<17?"ཉིན་གུང":e<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n){return e+" "+function(e,t){return 2===t?function(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}(e):e}({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}var n=[/^gen/i,/^c[ʼ\']hwe/i,/^meu/i,/^ebr/i,/^mae/i,/^(mez|eve)/i,/^gou/i,/^eos/i,/^gwe/i,/^her/i,/^du/i,/^ker/i],r=/^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu|gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,i=[/^Su/i,/^Lu/i,/^Me([^r]|$)/i,/^Mer/i,/^Ya/i,/^Gw/i,/^Sa/i];e.defineLocale("br",{months:"Genver_Cʼhwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_Cʼhwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Mercʼher_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParse:i,fullWeekdaysParse:[/^sul/i,/^lun/i,/^meurzh/i,/^merc[ʼ\']her/i,/^yaou/i,/^gwener/i,/^sadorn/i],shortWeekdaysParse:[/^Sul/i,/^Lun/i,/^Meu/i,/^Mer/i,/^Yao/i,/^Gwe/i,/^Sad/i],minWeekdaysParse:i,monthsRegex:r,monthsShortRegex:r,monthsStrictRegex:/^(genver|c[ʼ\']hwevrer|meurzh|ebrel|mae|mezheven|gouere|eost|gwengolo|here|du|kerzu)/i,monthsShortStrictRegex:/^(gen|c[ʼ\']hwe|meu|ebr|mae|eve|gou|eos|gwe|her|du|ker)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY HH:mm",LLLL:"dddd, D [a viz] MMMM YYYY HH:mm"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warcʼhoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Decʼh da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s ʼzo",s:"un nebeud segondennoù",ss:"%d eilenn",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:function(e){switch(function e(t){return t>9?e(t%10):t}(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(añ|vet)/,ordinal:function(e){return e+(1===e?"añ":"vet")},week:{dow:1,doy:4},meridiemParse:/a.m.|g.m./,isPM:function(e){return"g.m."===e},meridiem:function(e,t,n){return e<12?"a.m.":"g.m."}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"ss":return r+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return r+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return r+=1===e?"dan":"dana";case"MM":return r+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return r+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ca",{months:{standalone:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de març_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),n="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_"),r=[/^led/i,/^úno/i,/^bře/i,/^dub/i,/^kvě/i,/^(čvn|červen$|června)/i,/^(čvc|červenec|července)/i,/^srp/i,/^zář/i,/^říj/i,/^lis/i,/^pro/i],i=/^(leden|únor|březen|duben|květen|červenec|července|červen|června|srpen|září|říjen|listopad|prosinec|led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i;function a(e){return e>1&&e<5&&1!=~~(e/10)}function o(e,t,n,r){var i=e+" ";switch(n){case"s":return t||r?"pár sekund":"pár sekundami";case"ss":return t||r?i+(a(e)?"sekundy":"sekund"):i+"sekundami";case"m":return t?"minuta":r?"minutu":"minutou";case"mm":return t||r?i+(a(e)?"minuty":"minut"):i+"minutami";case"h":return t?"hodina":r?"hodinu":"hodinou";case"hh":return t||r?i+(a(e)?"hodiny":"hodin"):i+"hodinami";case"d":return t||r?"den":"dnem";case"dd":return t||r?i+(a(e)?"dny":"dní"):i+"dny";case"M":return t||r?"měsíc":"měsícem";case"MM":return t||r?i+(a(e)?"měsíce":"měsíců"):i+"měsíci";case"y":return t||r?"rok":"rokem";case"yy":return t||r?i+(a(e)?"roky":"let"):i+"lety"}}e.defineLocale("cs",{months:t,monthsShort:n,monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(leden|ledna|února|únor|březen|března|duben|dubna|květen|května|červenec|července|červen|června|srpen|srpna|září|říjen|října|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|úno|bře|dub|kvě|čvn|čvc|srp|zář|říj|lis|pro)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:o,ss:o,m:o,mm:o,h:o,hh:o,d:o,dd:o,M:o,MM:o,y:o,yy:o},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("cv",{months:"кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав".split("_"),monthsShort:"кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кӗҫ_эрн_шӑм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кҫ_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]",LLL:"YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm",LLLL:"dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ӗнер] LT [сехетре]",nextWeek:"[Ҫитес] dddd LT [сехетре]",lastWeek:"[Иртнӗ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(e){return e+(/сехет$/i.exec(e)?"рен":/ҫул$/i.exec(e)?"тан":"ран")},past:"%s каялла",s:"пӗр-ик ҫеккунт",ss:"%d ҫеккунт",m:"пӗр минут",mm:"%d минут",h:"пӗр сехет",hh:"%d сехет",d:"пӗр кун",dd:"%d кун",M:"пӗр уйӑх",MM:"%d уйӑх",y:"пӗр ҫул",yy:"%d ҫул"},dayOfMonthOrdinalParse:/\d{1,2}-мӗш/,ordinal:"%d-мӗш",week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return e>20?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"på dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}e.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}e.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],w:["eine Woche","einer Woche"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}e.defineLocale("de-ch",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,w:t,ww:"%d Wochen",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t=["ޖެނުއަރީ","ފެބްރުއަރީ","މާރިޗު","އޭޕްރީލު","މޭ","ޖޫން","ޖުލައި","އޯގަސްޓު","ސެޕްޓެމްބަރު","އޮކްޓޯބަރު","ނޮވެމްބަރު","ޑިސެމްބަރު"],n=["އާދިއްތަ","ހޯމަ","އަންގާރަ","ބުދަ","ބުރާސްފަތި","ހުކުރު","ހޮނިހިރު"];e.defineLocale("dv",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:"އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/މކ|މފ/,isPM:function(e){return"މފ"===e},meridiem:function(e,t,n){return e<12?"މކ":"މފ"},calendar:{sameDay:"[މިއަދު] LT",nextDay:"[މާދަމާ] LT",nextWeek:"dddd LT",lastDay:"[އިއްޔެ] LT",lastWeek:"[ފާއިތުވި] dddd LT",sameElse:"L"},relativeTime:{future:"ތެރޭގައި %s",past:"ކުރިން %s",s:"ސިކުންތުކޮޅެއް",ss:"d% ސިކުންތު",m:"މިނިޓެއް",mm:"މިނިޓު %d",h:"ގަޑިއިރެއް",hh:"ގަޑިއިރު %d",d:"ދުވަހެއް",dd:"ދުވަސް %d",M:"މަހެއް",MM:"މަސް %d",y:"އަހަރެއް",yy:"އަހަރު %d"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:7,doy:12}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(e,t,n){return e>11?n?"μμ":"ΜΜ":n?"πμ":"ΠΜ"},isPM:function(e){return"μ"===(e+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var n,r=this._calendarEl[e],i=t&&t.hours();return n=r,("undefined"!=typeof Function&&n instanceof Function||"[object Function]"===Object.prototype.toString.call(n))&&(r=r.apply(t)),r.replace("{}",i%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",ss:"%d δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},dayOfMonthOrdinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-in",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("en-sg",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mart_apr_maj_jun_jul_aŭg_sept_okt_nov_dec".split("_"),weekdays:"dimanĉo_lundo_mardo_merkredo_ĵaŭdo_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_ĵaŭ_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_ĵa_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"[la] D[-an de] MMMM, YYYY",LLL:"[la] D[-an de] MMMM, YYYY HH:mm",LLLL:"dddd[n], [la] D[-an de] MMMM, YYYY HH:mm",llll:"ddd, [la] D[-an de] MMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd[n je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasintan] dddd[n je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"antaŭ %s",s:"kelkaj sekundoj",ss:"%d sekundoj",m:"unu minuto",mm:"%d minutoj",h:"unu horo",hh:"%d horoj",d:"unu tago",dd:"%d tagoj",M:"unu monato",MM:"%d monatoj",y:"unu jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4},invalidDate:"Fecha inválida"})}(n(4))},function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-mx",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:4},invalidDate:"Fecha inválida"})}(n(4))},function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",w:"una semana",ww:"%d semanas",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={s:["mõne sekundi","mõni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["ühe minuti","üks minut"],mm:[e+" minuti",e+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[e+" tunni",e+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[e+" kuu",e+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[e+" aasta",e+" aastat"]};return t?i[n][2]?i[n][2]:i[n][1]:r?i[n][0]:i[n][1]}e.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d päeva",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},n={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};e.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(e){return/بعد از ظهر/.test(e)},meridiem:function(e,t,n){return e<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چند ثانیه",ss:"%d ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(e){return e.replace(/[۰-۹]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},dayOfMonthOrdinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}})}(n(4))},function(e,t,n){!function(e){"use strict";var t="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),n=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",t[7],t[8],t[9]];function r(e,r,i,a){var o="";switch(i){case"s":return a?"muutaman sekunnin":"muutama sekunti";case"ss":o=a?"sekunnin":"sekuntia";break;case"m":return a?"minuutin":"minuutti";case"mm":o=a?"minuutin":"minuuttia";break;case"h":return a?"tunnin":"tunti";case"hh":o=a?"tunnin":"tuntia";break;case"d":return a?"päivän":"päivä";case"dd":o=a?"päivän":"päivää";break;case"M":return a?"kuukauden":"kuukausi";case"MM":o=a?"kuukauden":"kuukautta";break;case"y":return a?"vuoden":"vuosi";case"yy":o=a?"vuoden":"vuotta"}return o=function(e,r){return e<10?r?n[e]:t[e]:e}(e,a)+" "+o}e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("fil",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaður",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t=/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?|janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,n=[/^janv/i,/^févr/i,/^mars/i,/^avr/i,/^mai/i,/^juin/i,/^juil/i,/^août/i,/^sept/i,/^oct/i,/^nov/i,/^déc/i];e.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsRegex:t,monthsShortRegex:t,monthsStrictRegex:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i,monthsShortStrictRegex:/(janv\.?|févr\.?|mars|avr\.?|mai|juin|juil\.?|août|sept\.?|oct\.?|nov\.?|déc\.?)/i,monthsParse:n,longMonthsParse:n,shortMonthsParse:n,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",w:"une semaine",ww:"%d semaines",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("fr-ch",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd’hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ga",{months:["Eanáir","Feabhra","Márta","Aibreán","Bealtaine","Meitheamh","Iúil","Lúnasa","Meán Fómhair","Deireadh Fómhair","Samhain","Nollaig"],monthsShort:["Ean","Feabh","Márt","Aib","Beal","Meith","Iúil","Lún","M.F.","D.F.","Samh","Noll"],monthsParseExact:!0,weekdays:["Dé Domhnaigh","Dé Luain","Dé Máirt","Dé Céadaoin","Déardaoin","Dé hAoine","Dé Sathairn"],weekdaysShort:["Domh","Luan","Máirt","Céad","Déar","Aoine","Sath"],weekdaysMin:["Do","Lu","Má","Cé","Dé","A","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amárach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inné ag] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s ó shin",s:"cúpla soicind",ss:"%d soicind",m:"nóiméad",mm:"%d nóiméad",h:"uair an chloig",hh:"%d uair an chloig",d:"lá",dd:"%d lá",M:"mí",MM:"%d míonna",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Màrt","An Giblean","An Cèitean","An t-Ògmhios","An t-Iuchar","An Lùnastal","An t-Sultain","An Dàmhair","An t-Samhain","An Dùbhlachd"],monthsShort:["Faoi","Gear","Màrt","Gibl","Cèit","Ògmh","Iuch","Lùn","Sult","Dàmh","Samh","Dùbh"],monthsParseExact:!0,weekdays:["Didòmhnaich","Diluain","Dimàirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["Dò","Lu","Mà","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-màireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-dè aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mìos",MM:"%d mìosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mércores_xoves_venres_sábado".split("_"),weekdaysShort:"dom._lun._mar._mér._xov._ven._sáb.".split("_"),weekdaysMin:"do_lu_ma_mé_xo_ve_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={s:["थोडया सॅकंडांनी","थोडे सॅकंड"],ss:[e+" सॅकंडांनी",e+" सॅकंड"],m:["एका मिणटान","एक मिनूट"],mm:[e+" मिणटांनी",e+" मिणटां"],h:["एका वरान","एक वर"],hh:[e+" वरांनी",e+" वरां"],d:["एका दिसान","एक दीस"],dd:[e+" दिसांनी",e+" दीस"],M:["एका म्हयन्यान","एक म्हयनो"],MM:[e+" म्हयन्यानी",e+" म्हयने"],y:["एका वर्सान","एक वर्स"],yy:[e+" वर्सांनी",e+" वर्सां"]};return r?i[n][0]:i[n][1]}e.defineLocale("gom-deva",{months:{standalone:"जानेवारी_फेब्रुवारी_मार्च_एप्रील_मे_जून_जुलय_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),format:"जानेवारीच्या_फेब्रुवारीच्या_मार्चाच्या_एप्रीलाच्या_मेयाच्या_जूनाच्या_जुलयाच्या_ऑगस्टाच्या_सप्टेंबराच्या_ऑक्टोबराच्या_नोव्हेंबराच्या_डिसेंबराच्या".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"जाने._फेब्रु._मार्च_एप्री._मे_जून_जुल._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"आयतार_सोमार_मंगळार_बुधवार_बिरेस्तार_सुक्रार_शेनवार".split("_"),weekdaysShort:"आयत._सोम._मंगळ._बुध._ब्रेस्त._सुक्र._शेन.".split("_"),weekdaysMin:"आ_सो_मं_बु_ब्रे_सु_शे".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [वाजतां]",LTS:"A h:mm:ss [वाजतां]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [वाजतां]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [वाजतां]",llll:"ddd, D MMM YYYY, A h:mm [वाजतां]"},calendar:{sameDay:"[आयज] LT",nextDay:"[फाल्यां] LT",nextWeek:"[फुडलो] dddd[,] LT",lastDay:"[काल] LT",lastWeek:"[फाटलो] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s आदीं",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(वेर)/,ordinal:function(e,t){switch(t){case"D":return e+"वेर";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return e}},week:{dow:0,doy:3},meridiemParse:/राती|सकाळीं|दनपारां|सांजे/,meridiemHour:function(e,t){return 12===e&&(e=0),"राती"===t?e<4?e:e+12:"सकाळीं"===t?e:"दनपारां"===t?e>12?e:e+12:"सांजे"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"राती":e<12?"सकाळीं":e<16?"दनपारां":e<20?"सांजे":"राती"}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={s:["thoddea sekondamni","thodde sekond"],ss:[e+" sekondamni",e+" sekond"],m:["eka mintan","ek minut"],mm:[e+" mintamni",e+" mintam"],h:["eka voran","ek vor"],hh:[e+" voramni",e+" voram"],d:["eka disan","ek dis"],dd:[e+" disamni",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineamni",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsamni",e+" vorsam"]};return r?i[n][0]:i[n][1]}e.defineLocale("gom-latn",{months:{standalone:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),format:"Janerachea_Febrerachea_Marsachea_Abrilachea_Maiachea_Junachea_Julaiachea_Agostachea_Setembrachea_Otubrachea_Novembrachea_Dezembrachea".split("_"),isFormat:/MMMM(\s)+D[oD]?/},monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budhvar_Birestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Fuddlo] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fattlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){switch(t){case"D":return e+"er";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return e}},week:{dow:0,doy:3},meridiemParse:/rati|sokallim|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokallim"===t?e:"donparam"===t?e>12?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"rati":e<12?"sokallim":e<16?"donparam":e<20?"sanje":"rati"}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"૧",2:"૨",3:"૩",4:"૪",5:"૫",6:"૬",7:"૭",8:"૮",9:"૯",0:"૦"},n={"૧":"1","૨":"2","૩":"3","૪":"4","૫":"5","૬":"6","૭":"7","૮":"8","૯":"9","૦":"0"};e.defineLocale("gu",{months:"જાન્યુઆરી_ફેબ્રુઆરી_માર્ચ_એપ્રિલ_મે_જૂન_જુલાઈ_ઑગસ્ટ_સપ્ટેમ્બર_ઑક્ટ્બર_નવેમ્બર_ડિસેમ્બર".split("_"),monthsShort:"જાન્યુ._ફેબ્રુ._માર્ચ_એપ્રિ._મે_જૂન_જુલા._ઑગ._સપ્ટે._ઑક્ટ્._નવે._ડિસે.".split("_"),monthsParseExact:!0,weekdays:"રવિવાર_સોમવાર_મંગળવાર_બુધ્વાર_ગુરુવાર_શુક્રવાર_શનિવાર".split("_"),weekdaysShort:"રવિ_સોમ_મંગળ_બુધ્_ગુરુ_શુક્ર_શનિ".split("_"),weekdaysMin:"ર_સો_મં_બુ_ગુ_શુ_શ".split("_"),longDateFormat:{LT:"A h:mm વાગ્યે",LTS:"A h:mm:ss વાગ્યે",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm વાગ્યે",LLLL:"dddd, D MMMM YYYY, A h:mm વાગ્યે"},calendar:{sameDay:"[આજ] LT",nextDay:"[કાલે] LT",nextWeek:"dddd, LT",lastDay:"[ગઇકાલે] LT",lastWeek:"[પાછલા] dddd, LT",sameElse:"L"},relativeTime:{future:"%s મા",past:"%s પહેલા",s:"અમુક પળો",ss:"%d સેકંડ",m:"એક મિનિટ",mm:"%d મિનિટ",h:"એક કલાક",hh:"%d કલાક",d:"એક દિવસ",dd:"%d દિવસ",M:"એક મહિનો",MM:"%d મહિનો",y:"એક વર્ષ",yy:"%d વર્ષ"},preparse:function(e){return e.replace(/[૧૨૩૪૫૬૭૮૯૦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/રાત|બપોર|સવાર|સાંજ/,meridiemHour:function(e,t){return 12===e&&(e=0),"રાત"===t?e<4?e:e+12:"સવાર"===t?e:"બપોર"===t?e>=10?e:e+12:"સાંજ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"રાત":e<10?"સવાર":e<17?"બપોર":e<20?"સાંજ":"રાત"},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY HH:mm",LLLL:"dddd, D [ב]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",ss:"%d שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(e){return 2===e?"שעתיים":e+" שעות"},d:"יום",dd:function(e){return 2===e?"יומיים":e+" ימים"},M:"חודש",MM:function(e){return 2===e?"חודשיים":e+" חודשים"},y:"שנה",yy:function(e){return 2===e?"שנתיים":e%10==0&&10!==e?e+" שנה":e+" שנים"}},meridiemParse:/אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,isPM:function(e){return/^(אחה"צ|אחרי הצהריים|בערב)$/.test(e)},meridiem:function(e,t,n){return e<5?"לפנות בוקר":e<10?"בבוקר":e<12?n?'לפנה"צ':"לפני הצהריים":e<18?n?'אחה"צ':"אחרי הצהריים":"בערב"}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"},r=[/^जन/i,/^फ़र|फर/i,/^मार्च/i,/^अप्रै/i,/^मई/i,/^जून/i,/^जुल/i,/^अग/i,/^सितं|सित/i,/^अक्टू/i,/^नव|नवं/i,/^दिसं|दिस/i];e.defineLocale("hi",{months:{format:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),standalone:"जनवरी_फरवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितंबर_अक्टूबर_नवंबर_दिसंबर".split("_")},monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm बजे",LLLL:"dddd, D MMMM YYYY, A h:mm बजे"},monthsParse:r,longMonthsParse:r,shortMonthsParse:[/^जन/i,/^फ़र/i,/^मार्च/i,/^अप्रै/i,/^मई/i,/^जून/i,/^जुल/i,/^अग/i,/^सित/i,/^अक्टू/i,/^नव/i,/^दिस/i],monthsRegex:/^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,monthsShortRegex:/^(जनवरी|जन\.?|फ़रवरी|फरवरी|फ़र\.?|मार्च?|अप्रैल|अप्रै\.?|मई?|जून?|जुलाई|जुल\.?|अगस्त|अग\.?|सितम्बर|सितंबर|सित\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर|नव\.?|दिसम्बर|दिसंबर|दिस\.?)/i,monthsStrictRegex:/^(जनवरी?|फ़रवरी|फरवरी?|मार्च?|अप्रैल?|मई?|जून?|जुलाई?|अगस्त?|सितम्बर|सितंबर|सित?\.?|अक्टूबर|अक्टू\.?|नवम्बर|नवंबर?|दिसम्बर|दिसंबर?)/i,monthsShortStrictRegex:/^(जन\.?|फ़र\.?|मार्च?|अप्रै\.?|मई?|जून?|जुल\.?|अग\.?|सित\.?|अक्टू\.?|नव\.?|दिस\.?)/i,calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",ss:"%d सेकंड",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात"===t?e<4?e:e+12:"सुबह"===t?e:"दोपहर"===t?e>=10?e:e+12:"शाम"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"रात":e<10?"सुबह":e<17?"दोपहर":e<20?"शाम":"रात"},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"ss":return r+=1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi";case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return r+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return r+=1===e?"dan":"dana";case"MM":return r+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return r+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("hr",{months:{format:"siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"Do MMMM YYYY",LLL:"Do MMMM YYYY H:mm",LLLL:"dddd, Do MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:return"[prošlu] [nedjelju] [u] LT";case 3:return"[prošlu] [srijedu] [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";var t="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");function n(e,t,n,r){var i=e;switch(n){case"s":return r||t?"néhány másodperc":"néhány másodperce";case"ss":return i+(r||t)?" másodperc":" másodperce";case"m":return"egy"+(r||t?" perc":" perce");case"mm":return i+(r||t?" perc":" perce");case"h":return"egy"+(r||t?" óra":" órája");case"hh":return i+(r||t?" óra":" órája");case"d":return"egy"+(r||t?" nap":" napja");case"dd":return i+(r||t?" nap":" napja");case"M":return"egy"+(r||t?" hónap":" hónapja");case"MM":return i+(r||t?" hónap":" hónapja");case"y":return"egy"+(r||t?" év":" éve");case"yy":return i+(r||t?" év":" éve")}return""}function r(e){return(e?"":"[múlt] ")+"["+t[this.day()]+"] LT[-kor]"}e.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan._feb._márc._ápr._máj._jún._júl._aug._szept._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return r.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return r.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("hy-am",{months:{format:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_"),standalone:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_")},monthsShort:"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_"),weekdays:"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_"),weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., HH:mm",LLLL:"dddd, D MMMM YYYY թ., HH:mm"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",ss:"%d վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(e){return/^(ցերեկվա|երեկոյան)$/.test(e)},meridiem:function(e){return e<4?"գիշերվա":e<12?"առավոտվա":e<17?"ցերեկվա":"երեկոյան"},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-ին":e+"-րդ";default:return e}},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e){return e%100==11||e%10!=1}function n(e,n,r,i){var a=e+" ";switch(r){case"s":return n||i?"nokkrar sekúndur":"nokkrum sekúndum";case"ss":return t(e)?a+(n||i?"sekúndur":"sekúndum"):a+"sekúnda";case"m":return n?"mínúta":"mínútu";case"mm":return t(e)?a+(n||i?"mínútur":"mínútum"):n?a+"mínúta":a+"mínútu";case"hh":return t(e)?a+(n||i?"klukkustundir":"klukkustundum"):a+"klukkustund";case"d":return n?"dagur":i?"dag":"degi";case"dd":return t(e)?n?a+"dagar":a+(i?"daga":"dögum"):n?a+"dagur":a+(i?"dag":"degi");case"M":return n?"mánuður":i?"mánuð":"mánuði";case"MM":return t(e)?n?a+"mánuðir":a+(i?"mánuði":"mánuðum"):n?a+"mánuður":a+(i?"mánuð":"mánuði");case"y":return n||i?"ár":"ári";case"yy":return t(e)?a+(n||i?"ár":"árum"):a+(n||i?"ár":"ári")}}e.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:function(){return"[Oggi a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextDay:function(){return"[Domani a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},nextWeek:function(){return"dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastDay:function(){return"[Ieri a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"},lastWeek:function(){switch(this.day()){case 0:return"[La scorsa] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT";default:return"[Lo scorso] dddd [a"+(this.hours()>1?"lle ":0===this.hours()?" ":"ll'")+"]LT"}},sameElse:"L"},relativeTime:{future:"tra %s",past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",w:"una settimana",ww:"%d settimane",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ja",{eras:[{since:"2019-05-01",offset:1,name:"令和",narrow:"㋿",abbr:"R"},{since:"1989-01-08",until:"2019-04-30",offset:1,name:"平成",narrow:"㍻",abbr:"H"},{since:"1926-12-25",until:"1989-01-07",offset:1,name:"昭和",narrow:"㍼",abbr:"S"},{since:"1912-07-30",until:"1926-12-24",offset:1,name:"大正",narrow:"㍽",abbr:"T"},{since:"1873-01-01",until:"1912-07-29",offset:6,name:"明治",narrow:"㍾",abbr:"M"},{since:"0001-01-01",until:"1873-12-31",offset:1,name:"西暦",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"紀元前",narrow:"BC",abbr:"BC"}],eraYearOrdinalRegex:/(元|\d+)年/,eraYearOrdinalParse:function(e,t){return"元"===t[1]?1:parseInt(t[1]||e,10)},months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiemParse:/午前|午後/i,isPM:function(e){return"午後"===e},meridiem:function(e,t,n){return e<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:function(e){return e.week()!==this.week()?"[来週]dddd LT":"dddd LT"},lastDay:"[昨日] LT",lastWeek:function(e){return this.week()!==e.week()?"[先週]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}日/,ordinal:function(e,t){switch(t){case"y":return 1===e?"元年":e+"年";case"d":case"D":case"DDD":return e+"日";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"数秒",ss:"%d秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ka",{months:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:{standalone:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),format:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_"),isFormat:/(წინა|შემდეგ)/},weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(e){return e.replace(/(წამ|წუთ|საათ|წელ|დღ|თვ)(ი|ე)/,(function(e,t,n){return"ი"===n?t+"ში":t+n+"ში"}))},past:function(e){return/(წამი|წუთი|საათი|დღე|თვე)/.test(e)?e.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(e)?e.replace(/წელი$/,"წლის წინ"):e},s:"რამდენიმე წამი",ss:"%d წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},dayOfMonthOrdinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(e){return 0===e?e:1===e?e+"-ლი":e<20||e<=100&&e%20==0||e%100==0?"მე-"+e:e+"-ე"},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={0:"-ші",1:"-ші",2:"-ші",3:"-ші",4:"-ші",5:"-ші",6:"-шы",7:"-ші",8:"-ші",9:"-шы",10:"-шы",20:"-шы",30:"-шы",40:"-шы",50:"-ші",60:"-шы",70:"-ші",80:"-ші",90:"-шы",100:"-ші"};e.defineLocale("kk",{months:"қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан".split("_"),monthsShort:"қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел".split("_"),weekdays:"жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі".split("_"),weekdaysShort:"жек_дүй_сей_сәр_бей_жұм_сен".split("_"),weekdaysMin:"жк_дй_сй_ср_бй_жм_сн".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгін сағат] LT",nextDay:"[Ертең сағат] LT",nextWeek:"dddd [сағат] LT",lastDay:"[Кеше сағат] LT",lastWeek:"[Өткен аптаның] dddd [сағат] LT",sameElse:"L"},relativeTime:{future:"%s ішінде",past:"%s бұрын",s:"бірнеше секунд",ss:"%d секунд",m:"бір минут",mm:"%d минут",h:"бір сағат",hh:"%d сағат",d:"бір күн",dd:"%d күн",M:"бір ай",MM:"%d ай",y:"бір жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(ші|шы)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"១",2:"២",3:"៣",4:"៤",5:"៥",6:"៦",7:"៧",8:"៨",9:"៩",0:"០"},n={"១":"1","២":"2","៣":"3","៤":"4","៥":"5","៦":"6","៧":"7","៨":"8","៩":"9","០":"0"};e.defineLocale("km",{months:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysMin:"អា_ច_អ_ព_ព្រ_សុ_ស".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ព្រឹក|ល្ងាច/,isPM:function(e){return"ល្ងាច"===e},meridiem:function(e,t,n){return e<12?"ព្រឹក":"ល្ងាច"},calendar:{sameDay:"[ថ្ងៃនេះ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",ss:"%d វិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},dayOfMonthOrdinalParse:/ទី\d{1,2}/,ordinal:"ទី%d",preparse:function(e){return e.replace(/[១២៣៤៥៦៧៨៩០]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"೧",2:"೨",3:"೩",4:"೪",5:"೫",6:"೬",7:"೭",8:"೮",9:"೯",0:"೦"},n={"೧":"1","೨":"2","೩":"3","೪":"4","೫":"5","೬":"6","೭":"7","೮":"8","೯":"9","೦":"0"};e.defineLocale("kn",{months:"ಜನವರಿ_ಫೆಬ್ರವರಿ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬರ್_ಅಕ್ಟೋಬರ್_ನವೆಂಬರ್_ಡಿಸೆಂಬರ್".split("_"),monthsShort:"ಜನ_ಫೆಬ್ರ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂ_ಅಕ್ಟೋ_ನವೆಂ_ಡಿಸೆಂ".split("_"),monthsParseExact:!0,weekdays:"ಭಾನುವಾರ_ಸೋಮವಾರ_ಮಂಗಳವಾರ_ಬುಧವಾರ_ಗುರುವಾರ_ಶುಕ್ರವಾರ_ಶನಿವಾರ".split("_"),weekdaysShort:"ಭಾನು_ಸೋಮ_ಮಂಗಳ_ಬುಧ_ಗುರು_ಶುಕ್ರ_ಶನಿ".split("_"),weekdaysMin:"ಭಾ_ಸೋ_ಮಂ_ಬು_ಗು_ಶು_ಶ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[ಇಂದು] LT",nextDay:"[ನಾಳೆ] LT",nextWeek:"dddd, LT",lastDay:"[ನಿನ್ನೆ] LT",lastWeek:"[ಕೊನೆಯ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ನಂತರ",past:"%s ಹಿಂದೆ",s:"ಕೆಲವು ಕ್ಷಣಗಳು",ss:"%d ಸೆಕೆಂಡುಗಳು",m:"ಒಂದು ನಿಮಿಷ",mm:"%d ನಿಮಿಷ",h:"ಒಂದು ಗಂಟೆ",hh:"%d ಗಂಟೆ",d:"ಒಂದು ದಿನ",dd:"%d ದಿನ",M:"ಒಂದು ತಿಂಗಳು",MM:"%d ತಿಂಗಳು",y:"ಒಂದು ವರ್ಷ",yy:"%d ವರ್ಷ"},preparse:function(e){return e.replace(/[೧೨೩೪೫೬೭೮೯೦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/ರಾತ್ರಿ|ಬೆಳಿಗ್ಗೆ|ಮಧ್ಯಾಹ್ನ|ಸಂಜೆ/,meridiemHour:function(e,t){return 12===e&&(e=0),"ರಾತ್ರಿ"===t?e<4?e:e+12:"ಬೆಳಿಗ್ಗೆ"===t?e:"ಮಧ್ಯಾಹ್ನ"===t?e>=10?e:e+12:"ಸಂಜೆ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"ರಾತ್ರಿ":e<10?"ಬೆಳಿಗ್ಗೆ":e<17?"ಮಧ್ಯಾಹ್ನ":e<20?"ಸಂಜೆ":"ರಾತ್ರಿ"},dayOfMonthOrdinalParse:/\d{1,2}(ನೇ)/,ordinal:function(e){return e+"ನೇ"},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",ss:"%d초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"},dayOfMonthOrdinalParse:/\d{1,2}(일|월|주)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"일";case"M":return e+"월";case"w":case"W":return e+"주";default:return e}},meridiemParse:/오전|오후/,isPM:function(e){return"오후"===e},meridiem:function(e,t,n){return e<12?"오전":"오후"}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},r=["کانونی دووەم","شوبات","ئازار","نیسان","ئایار","حوزەیران","تەمموز","ئاب","ئەیلوول","تشرینی یەكەم","تشرینی دووەم","كانونی یەکەم"];e.defineLocale("ku",{months:r,monthsShort:r,weekdays:"یه‌كشه‌ممه‌_دووشه‌ممه‌_سێشه‌ممه‌_چوارشه‌ممه‌_پێنجشه‌ممه‌_هه‌ینی_شه‌ممه‌".split("_"),weekdaysShort:"یه‌كشه‌م_دووشه‌م_سێشه‌م_چوارشه‌م_پێنجشه‌م_هه‌ینی_شه‌ممه‌".split("_"),weekdaysMin:"ی_د_س_چ_پ_ه_ش".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/ئێواره‌|به‌یانی/,isPM:function(e){return/ئێواره‌/.test(e)},meridiem:function(e,t,n){return e<12?"به‌یانی":"ئێواره‌"},calendar:{sameDay:"[ئه‌مرۆ كاتژمێر] LT",nextDay:"[به‌یانی كاتژمێر] LT",nextWeek:"dddd [كاتژمێر] LT",lastDay:"[دوێنێ كاتژمێر] LT",lastWeek:"dddd [كاتژمێر] LT",sameElse:"L"},relativeTime:{future:"له‌ %s",past:"%s",s:"چه‌ند چركه‌یه‌ك",ss:"چركه‌ %d",m:"یه‌ك خوله‌ك",mm:"%d خوله‌ك",h:"یه‌ك كاتژمێر",hh:"%d كاتژمێر",d:"یه‌ك ڕۆژ",dd:"%d ڕۆژ",M:"یه‌ك مانگ",MM:"%d مانگ",y:"یه‌ك ساڵ",yy:"%d ساڵ"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,(function(e){return n[e]})).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]})).replace(/,/g,"،")},week:{dow:6,doy:12}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={0:"-чү",1:"-чи",2:"-чи",3:"-чү",4:"-чү",5:"-чи",6:"-чы",7:"-чи",8:"-чи",9:"-чу",10:"-чу",20:"-чы",30:"-чу",40:"-чы",50:"-чү",60:"-чы",70:"-чи",80:"-чи",90:"-чу",100:"-чү"};e.defineLocale("ky",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),weekdays:"Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби".split("_"),weekdaysShort:"Жек_Дүй_Шей_Шар_Бей_Жум_Ише".split("_"),weekdaysMin:"Жк_Дй_Шй_Шр_Бй_Жм_Иш".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Бүгүн саат] LT",nextDay:"[Эртең саат] LT",nextWeek:"dddd [саат] LT",lastDay:"[Кечээ саат] LT",lastWeek:"[Өткөн аптанын] dddd [күнү] [саат] LT",sameElse:"L"},relativeTime:{future:"%s ичинде",past:"%s мурун",s:"бирнече секунд",ss:"%d секунд",m:"бир мүнөт",mm:"%d мүнөт",h:"бир саат",hh:"%d саат",d:"бир күн",dd:"%d күн",M:"бир ай",MM:"%d ай",y:"бир жыл",yy:"%d жыл"},dayOfMonthOrdinalParse:/\d{1,2}-(чи|чы|чү|чу)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?i[n][0]:i[n][1]}function n(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return n(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return n(e)}return n(e/=1e3)}e.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(e){return n(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e},past:function(e){return n(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e},s:"e puer Sekonnen",ss:"%d Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Méint",y:t,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("lo",{months:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),monthsShort:"ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ".split("_"),weekdays:"ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysShort:"ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"ວັນdddd D MMMM YYYY HH:mm"},meridiemParse:/ຕອນເຊົ້າ|ຕອນແລງ/,isPM:function(e){return"ຕອນແລງ"===e},meridiem:function(e,t,n){return e<12?"ຕອນເຊົ້າ":"ຕອນແລງ"},calendar:{sameDay:"[ມື້ນີ້ເວລາ] LT",nextDay:"[ມື້ອື່ນເວລາ] LT",nextWeek:"[ວັນ]dddd[ໜ້າເວລາ] LT",lastDay:"[ມື້ວານນີ້ເວລາ] LT",lastWeek:"[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT",sameElse:"L"},relativeTime:{future:"ອີກ %s",past:"%sຜ່ານມາ",s:"ບໍ່ເທົ່າໃດວິນາທີ",ss:"%d ວິນາທີ",m:"1 ນາທີ",mm:"%d ນາທີ",h:"1 ຊົ່ວໂມງ",hh:"%d ຊົ່ວໂມງ",d:"1 ມື້",dd:"%d ມື້",M:"1 ເດືອນ",MM:"%d ເດືອນ",y:"1 ປີ",yy:"%d ປີ"},dayOfMonthOrdinalParse:/(ທີ່)\d{1,2}/,ordinal:function(e){return"ທີ່"+e}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={ss:"sekundė_sekundžių_sekundes",m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"};function n(e,t,n,r){return t?i(n)[0]:r?i(n)[1]:i(n)[2]}function r(e){return e%10==0||e>10&&e<20}function i(e){return t[e].split("_")}function a(e,t,a,o){var s=e+" ";return 1===e?s+n(0,t,a[0],o):t?s+(r(e)?i(a)[1]:i(a)[0]):o?s+i(a)[1]:s+(r(e)?i(a)[1]:i(a)[2])}e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:function(e,t,n,r){return t?"kelios sekundės":r?"kelių sekundžių":"kelias sekundes"},ss:a,m:n,mm:a,h:n,hh:a,d:n,dd:a,M:n,MM:a,y:n,yy:a},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={ss:"sekundes_sekundēm_sekunde_sekundes".split("_"),m:"minūtes_minūtēm_minūte_minūtes".split("_"),mm:"minūtes_minūtēm_minūte_minūtes".split("_"),h:"stundas_stundām_stunda_stundas".split("_"),hh:"stundas_stundām_stunda_stundas".split("_"),d:"dienas_dienām_diena_dienas".split("_"),dd:"dienas_dienām_diena_dienas".split("_"),M:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),MM:"mēneša_mēnešiem_mēnesis_mēneši".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){return n?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function r(e,r,i){return e+" "+n(t[i],e,r)}function i(e,r,i){return n(t[i],e,r)}e.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pēc %s",past:"pirms %s",s:function(e,t){return t?"dažas sekundes":"dažām sekundēm"},ss:r,m:i,mm:r,h:i,hh:r,d:i,dd:r,M:i,MM:r,y:i,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedjelje] [u] LT","[prošlog] [ponedjeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srijede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("mi",{months:"Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei".split("_"),weekdaysShort:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),weekdaysMin:"Ta_Ma_Tū_We_Tāi_Pa_Hā".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hēkona ruarua",ss:"%d hēkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"[Во] dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"за %s",past:"пред %s",s:"неколку секунди",ss:"%d секунди",m:"една минута",mm:"%d минути",h:"еден час",hh:"%d часа",d:"еден ден",dd:"%d дена",M:"еден месец",MM:"%d месеци",y:"една година",yy:"%d години"},dayOfMonthOrdinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),monthsParseExact:!0,weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -നു",LLLL:"dddd, D MMMM YYYY, A h:mm -നു"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",ss:"%d സെക്കൻഡ്",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,meridiemHour:function(e,t){return 12===e&&(e=0),"രാത്രി"===t&&e>=4||"ഉച്ച കഴിഞ്ഞ്"===t||"വൈകുന്നേരം"===t?e+12:e},meridiem:function(e,t,n){return e<4?"രാത്രി":e<12?"രാവിലെ":e<17?"ഉച്ച കഴിഞ്ഞ്":e<20?"വൈകുന്നേരം":"രാത്രി"}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n,r){switch(n){case"s":return t?"хэдхэн секунд":"хэдхэн секундын";case"ss":return e+(t?" секунд":" секундын");case"m":case"mm":return e+(t?" минут":" минутын");case"h":case"hh":return e+(t?" цаг":" цагийн");case"d":case"dd":return e+(t?" өдөр":" өдрийн");case"M":case"MM":return e+(t?" сар":" сарын");case"y":case"yy":return e+(t?" жил":" жилийн");default:return e}}e.defineLocale("mn",{months:"Нэгдүгээр сар_Хоёрдугаар сар_Гуравдугаар сар_Дөрөвдүгээр сар_Тавдугаар сар_Зургадугаар сар_Долдугаар сар_Наймдугаар сар_Есдүгээр сар_Аравдугаар сар_Арван нэгдүгээр сар_Арван хоёрдугаар сар".split("_"),monthsShort:"1 сар_2 сар_3 сар_4 сар_5 сар_6 сар_7 сар_8 сар_9 сар_10 сар_11 сар_12 сар".split("_"),monthsParseExact:!0,weekdays:"Ням_Даваа_Мягмар_Лхагва_Пүрэв_Баасан_Бямба".split("_"),weekdaysShort:"Ням_Дав_Мяг_Лха_Пүр_Баа_Бям".split("_"),weekdaysMin:"Ня_Да_Мя_Лх_Пү_Ба_Бя".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY оны MMMMын D",LLL:"YYYY оны MMMMын D HH:mm",LLLL:"dddd, YYYY оны MMMMын D HH:mm"},meridiemParse:/ҮӨ|ҮХ/i,isPM:function(e){return"ҮХ"===e},meridiem:function(e,t,n){return e<12?"ҮӨ":"ҮХ"},calendar:{sameDay:"[Өнөөдөр] LT",nextDay:"[Маргааш] LT",nextWeek:"[Ирэх] dddd LT",lastDay:"[Өчигдөр] LT",lastWeek:"[Өнгөрсөн] dddd LT",sameElse:"L"},relativeTime:{future:"%s дараа",past:"%s өмнө",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2} өдөр/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+" өдөр";default:return e}}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};function r(e,t,n,r){var i="";if(t)switch(n){case"s":i="काही सेकंद";break;case"ss":i="%d सेकंद";break;case"m":i="एक मिनिट";break;case"mm":i="%d मिनिटे";break;case"h":i="एक तास";break;case"hh":i="%d तास";break;case"d":i="एक दिवस";break;case"dd":i="%d दिवस";break;case"M":i="एक महिना";break;case"MM":i="%d महिने";break;case"y":i="एक वर्ष";break;case"yy":i="%d वर्षे"}else switch(n){case"s":i="काही सेकंदां";break;case"ss":i="%d सेकंदां";break;case"m":i="एका मिनिटा";break;case"mm":i="%d मिनिटां";break;case"h":i="एका तासा";break;case"hh":i="%d तासां";break;case"d":i="एका दिवसा";break;case"dd":i="%d दिवसां";break;case"M":i="एका महिन्या";break;case"MM":i="%d महिन्यां";break;case"y":i="एका वर्षा";break;case"yy":i="%d वर्षां"}return i.replace(/%d/i,e)}e.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),monthsParseExact:!0,weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm वाजता",LLLL:"dddd, D MMMM YYYY, A h:mm वाजता"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%sमध्ये",past:"%sपूर्वी",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/पहाटे|सकाळी|दुपारी|सायंकाळी|रात्री/,meridiemHour:function(e,t){return 12===e&&(e=0),"पहाटे"===t||"सकाळी"===t?e:"दुपारी"===t||"सायंकाळी"===t||"रात्री"===t?e>=12?e:e+12:void 0},meridiem:function(e,t,n){return e>=0&&e<6?"पहाटे":e<12?"सकाळी":e<17?"दुपारी":e<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_Ġunju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diċembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_Ġun_Lul_Aww_Set_Ott_Nov_Diċ".split("_"),weekdays:"Il-Ħadd_It-Tnejn_It-Tlieta_L-Erbgħa_Il-Ħamis_Il-Ġimgħa_Is-Sibt".split("_"),weekdaysShort:"Ħad_Tne_Tli_Erb_Ħam_Ġim_Sib".split("_"),weekdaysMin:"Ħa_Tn_Tl_Er_Ħa_Ġi_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Għada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-bieraħ fil-]LT",lastWeek:"dddd [li għadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f’ %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siegħa",hh:"%d siegħat",d:"ġurnata",dd:"%d ġranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"},n={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};e.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",ss:"%d စက္ကန့်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(e){return e.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",w:"en uke",ww:"%d uker",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};e.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),monthsParseExact:!0,weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आ._सो._मं._बु._बि._शु._श.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, Aको h:mm बजे",LLLL:"dddd, D MMMM YYYY, Aको h:mm बजे"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/राति|बिहान|दिउँसो|साँझ/,meridiemHour:function(e,t){return 12===e&&(e=0),"राति"===t?e<4?e:e+12:"बिहान"===t?e:"दिउँसो"===t?e>=10?e:e+12:"साँझ"===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"राति":e<12?"बिहान":e<16?"दिउँसो":e<20?"साँझ":"राति"},calendar:{sameDay:"[आज] LT",nextDay:"[भोलि] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडि",s:"केही क्षण",ss:"%d सेकेण्ड",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],i=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",w:"één week",ww:"%d weken",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],i=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_apr._mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"su._må._ty._on._to._fr._lau.".split("_"),weekdaysMin:"su_må_ty_on_to_fr_la".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",w:"ei veke",ww:"%d veker",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("oc-lnc",{months:{standalone:"genièr_febrièr_març_abril_mai_junh_julhet_agost_setembre_octòbre_novembre_decembre".split("_"),format:"de genièr_de febrièr_de març_d'abril_de mai_de junh_de julhet_d'agost_de setembre_d'octòbre_de novembre_de decembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._març_abr._mai_junh_julh._ago._set._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"dimenge_diluns_dimars_dimècres_dijòus_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dm._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dm_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:"[uèi a] LT",nextDay:"[deman a] LT",nextWeek:"dddd [a] LT",lastDay:"[ièr a] LT",lastWeek:"dddd [passat a] LT",sameElse:"L"},relativeTime:{future:"d'aquí %s",past:"fa %s",s:"unas segondas",ss:"%d segondas",m:"una minuta",mm:"%d minutas",h:"una ora",hh:"%d oras",d:"un jorn",dd:"%d jorns",M:"un mes",MM:"%d meses",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"੧",2:"੨",3:"੩",4:"੪",5:"੫",6:"੬",7:"੭",8:"੮",9:"੯",0:"੦"},n={"੧":"1","੨":"2","੩":"3","੪":"4","੫":"5","੬":"6","੭":"7","੮":"8","੯":"9","੦":"0"};e.defineLocale("pa-in",{months:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),monthsShort:"ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ".split("_"),weekdays:"ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ".split("_"),weekdaysShort:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),weekdaysMin:"ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ".split("_"),longDateFormat:{LT:"A h:mm ਵਜੇ",LTS:"A h:mm:ss ਵਜੇ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ਵਜੇ",LLLL:"dddd, D MMMM YYYY, A h:mm ਵਜੇ"},calendar:{sameDay:"[ਅਜ] LT",nextDay:"[ਕਲ] LT",nextWeek:"[ਅਗਲਾ] dddd, LT",lastDay:"[ਕਲ] LT",lastWeek:"[ਪਿਛਲੇ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ਵਿੱਚ",past:"%s ਪਿਛਲੇ",s:"ਕੁਝ ਸਕਿੰਟ",ss:"%d ਸਕਿੰਟ",m:"ਇਕ ਮਿੰਟ",mm:"%d ਮਿੰਟ",h:"ਇੱਕ ਘੰਟਾ",hh:"%d ਘੰਟੇ",d:"ਇੱਕ ਦਿਨ",dd:"%d ਦਿਨ",M:"ਇੱਕ ਮਹੀਨਾ",MM:"%d ਮਹੀਨੇ",y:"ਇੱਕ ਸਾਲ",yy:"%d ਸਾਲ"},preparse:function(e){return e.replace(/[੧੨੩੪੫੬੭੮੯੦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,meridiemHour:function(e,t){return 12===e&&(e=0),"ਰਾਤ"===t?e<4?e:e+12:"ਸਵੇਰ"===t?e:"ਦੁਪਹਿਰ"===t?e>=10?e:e+12:"ਸ਼ਾਮ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"ਰਾਤ":e<10?"ਸਵੇਰ":e<17?"ਦੁਪਹਿਰ":e<20?"ਸ਼ਾਮ":"ਰਾਤ"},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";var t="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_"),r=[/^sty/i,/^lut/i,/^mar/i,/^kwi/i,/^maj/i,/^cze/i,/^lip/i,/^sie/i,/^wrz/i,/^paź/i,/^lis/i,/^gru/i];function i(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function a(e,t,n){var r=e+" ";switch(n){case"ss":return r+(i(e)?"sekundy":"sekund");case"m":return t?"minuta":"minutę";case"mm":return r+(i(e)?"minuty":"minut");case"h":return t?"godzina":"godzinę";case"hh":return r+(i(e)?"godziny":"godzin");case"ww":return r+(i(e)?"tygodnie":"tygodni");case"MM":return r+(i(e)?"miesiące":"miesięcy");case"yy":return r+(i(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,r){return e?/D MMMM/.test(r)?n[e.month()]:t[e.month()]:t},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_śr_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedzielę o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W środę o] LT";case 6:return"[W sobotę o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:a,m:a,mm:a,h:a,hh:a,d:"1 dzień",dd:"%d dni",w:"tydzień",ww:a,M:"miesiąc",MM:a,y:"rok",yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sáb".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",w:"uma semana",ww:"%d semanas",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"do_2ª_3ª_4ª_5ª_6ª_sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [às] HH:mm"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}º/,ordinal:"%dº",invalidDate:"Data inválida"})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=" ";return(e%100>=20||e>=100&&e%100==0)&&(r=" de "),e+r+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",ww:"săptămâni",MM:"luni",yy:"ani"}[n]}e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._feb._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",ss:t,m:"un minut",mm:t,h:"o oră",hh:t,d:"o zi",dd:t,w:"o săptămână",ww:t,M:"o lună",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n){var r,i;return"m"===n?t?"минута":"минуту":e+" "+(r=+e,i={ss:t?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:t?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",ww:"неделя_недели_недель",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[n].split("_"),r%10==1&&r%100!=11?i[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?i[1]:i[2])}var n=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];e.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:t,m:t,mm:t,h:"час",hh:t,d:"день",dd:t,w:"неделя",ww:t,M:"месяц",MM:t,y:"год",yy:t},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t=["جنوري","فيبروري","مارچ","اپريل","مئي","جون","جولاءِ","آگسٽ","سيپٽمبر","آڪٽوبر","نومبر","ڊسمبر"],n=["آچر","سومر","اڱارو","اربع","خميس","جمع","ڇنڇر"];e.defineLocale("sd",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(e){return"شام"===e},meridiem:function(e,t,n){return e<12?"صبح":"شام"},calendar:{sameDay:"[اڄ] LT",nextDay:"[سڀاڻي] LT",nextWeek:"dddd [اڳين هفتي تي] LT",lastDay:"[ڪالهه] LT",lastWeek:"[گزريل هفتي] dddd [تي] LT",sameElse:"L"},relativeTime:{future:"%s پوء",past:"%s اڳ",s:"چند سيڪنڊ",ss:"%d سيڪنڊ",m:"هڪ منٽ",mm:"%d منٽ",h:"هڪ ڪلاڪ",hh:"%d ڪلاڪ",d:"هڪ ڏينهن",dd:"%d ڏينهن",M:"هڪ مهينو",MM:"%d مهينا",y:"هڪ سال",yy:"%d سال"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("se",{months:"ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu".split("_"),monthsShort:"ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov".split("_"),weekdays:"sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat".split("_"),weekdaysShort:"sotn_vuos_maŋ_gask_duor_bear_láv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geažes",past:"maŋit %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mánnu",MM:"%d mánut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("si",{months:"ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්".split("_"),monthsShort:"ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ".split("_"),weekdays:"ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා".split("_"),weekdaysShort:"ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන".split("_"),weekdaysMin:"ඉ_ස_අ_බ_බ්‍ර_සි_සෙ".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [වැනි] dddd, a h:mm:ss"},calendar:{sameDay:"[අද] LT[ට]",nextDay:"[හෙට] LT[ට]",nextWeek:"dddd LT[ට]",lastDay:"[ඊයේ] LT[ට]",lastWeek:"[පසුගිය] dddd LT[ට]",sameElse:"L"},relativeTime:{future:"%sකින්",past:"%sකට පෙර",s:"තත්පර කිහිපය",ss:"තත්පර %d",m:"මිනිත්තුව",mm:"මිනිත්තු %d",h:"පැය",hh:"පැය %d",d:"දිනය",dd:"දින %d",M:"මාසය",MM:"මාස %d",y:"වසර",yy:"වසර %d"},dayOfMonthOrdinalParse:/\d{1,2} වැනි/,ordinal:function(e){return e+" වැනි"},meridiemParse:/පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,isPM:function(e){return"ප.ව."===e||"පස් වරු"===e},meridiem:function(e,t,n){return e>11?n?"ප.ව.":"පස් වරු":n?"පෙ.ව.":"පෙර වරු"}})}(n(4))},function(e,t,n){!function(e){"use strict";var t="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),n="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");function r(e){return e>1&&e<5}function i(e,t,n,i){var a=e+" ";switch(n){case"s":return t||i?"pár sekúnd":"pár sekundami";case"ss":return t||i?a+(r(e)?"sekundy":"sekúnd"):a+"sekundami";case"m":return t?"minúta":i?"minútu":"minútou";case"mm":return t||i?a+(r(e)?"minúty":"minút"):a+"minútami";case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":return t||i?a+(r(e)?"hodiny":"hodín"):a+"hodinami";case"d":return t||i?"deň":"dňom";case"dd":return t||i?a+(r(e)?"dni":"dní"):a+"dňami";case"M":return t||i?"mesiac":"mesiacom";case"MM":return t||i?a+(r(e)?"mesiace":"mesiacov"):a+"mesiacmi";case"y":return t||i?"rok":"rokom";case"yy":return t||i?a+(r(e)?"roky":"rokov"):a+"rokmi"}}e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i=e+" ";switch(n){case"s":return t||r?"nekaj sekund":"nekaj sekundami";case"ss":return i+=1===e?t?"sekundo":"sekundi":2===e?t||r?"sekundi":"sekundah":e<5?t||r?"sekunde":"sekundah":"sekund";case"m":return t?"ena minuta":"eno minuto";case"mm":return i+=1===e?t?"minuta":"minuto":2===e?t||r?"minuti":"minutama":e<5?t||r?"minute":"minutami":t||r?"minut":"minutami";case"h":return t?"ena ura":"eno uro";case"hh":return i+=1===e?t?"ura":"uro":2===e?t||r?"uri":"urama":e<5?t||r?"ure":"urami":t||r?"ur":"urami";case"d":return t||r?"en dan":"enim dnem";case"dd":return i+=1===e?t||r?"dan":"dnem":2===e?t||r?"dni":"dnevoma":t||r?"dni":"dnevi";case"M":return t||r?"en mesec":"enim mesecem";case"MM":return i+=1===e?t||r?"mesec":"mesecem":2===e?t||r?"meseca":"mesecema":e<5?t||r?"mesece":"meseci":t||r?"mesecev":"meseci";case"y":return t||r?"eno leto":"enim letom";case"yy":return i+=1===e?t||r?"leto":"letom":2===e?t||r?"leti":"letoma":e<5?t||r?"leta":"leti":t||r?"let":"leti"}}e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejšnjo] [nedeljo] [ob] LT";case 3:return"[prejšnjo] [sredo] [ob] LT";case 6:return"[prejšnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"pred %s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",ss:"%d sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={words:{ss:["секунда","секунде","секунди"],m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("sr-cyrl",{months:"јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар".split("_"),monthsShort:"јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.".split("_"),monthsParseExact:!0,weekdays:"недеља_понедељак_уторак_среда_четвртак_петак_субота".split("_"),weekdaysShort:"нед._пон._уто._сре._чет._пет._суб.".split("_"),weekdaysMin:"не_по_ут_ср_че_пе_су".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D. M. YYYY.",LL:"D. MMMM YYYY.",LLL:"D. MMMM YYYY. H:mm",LLLL:"dddd, D. MMMM YYYY. H:mm"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"дан",dd:t.translate,M:"месец",MM:t.translate,y:"годину",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"[På] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},dayOfMonthOrdinalParse:/\d{1,2}(\:e|\:a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?":e":1===t?":a":2===t?":a":":e")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"hh:mm A",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"siku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"௧",2:"௨",3:"௩",4:"௪",5:"௫",6:"௬",7:"௭",8:"௮",9:"௯",0:"௦"},n={"௧":"1","௨":"2","௩":"3","௪":"4","௫":"5","௬":"6","௭":"7","௮":"8","௯":"9","௦":"0"};e.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",ss:"%d விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},dayOfMonthOrdinalParse:/\d{1,2}வது/,ordinal:function(e){return e+"வது"},preparse:function(e){return e.replace(/[௧௨௩௪௫௬௭௮௯௦]/g,(function(e){return n[e]}))},postformat:function(e){return e.replace(/\d/g,(function(e){return t[e]}))},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(e,t,n){return e<2?" யாமம்":e<6?" வைகறை":e<10?" காலை":e<14?" நண்பகல்":e<18?" எற்பாடு":e<22?" மாலை":" யாமம்"},meridiemHour:function(e,t){return 12===e&&(e=0),"யாமம்"===t?e<2?e:e+12:"வைகறை"===t||"காலை"===t?e:"நண்பகல்"===t&&e>=10?e:e+12},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("te",{months:"జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జులై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్".split("_"),monthsShort:"జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జులై_ఆగ._సెప్._అక్టో._నవ._డిసె.".split("_"),monthsParseExact:!0,weekdays:"ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం".split("_"),weekdaysShort:"ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని".split("_"),weekdaysMin:"ఆ_సో_మం_బు_గు_శు_శ".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[నేడు] LT",nextDay:"[రేపు] LT",nextWeek:"dddd, LT",lastDay:"[నిన్న] LT",lastWeek:"[గత] dddd, LT",sameElse:"L"},relativeTime:{future:"%s లో",past:"%s క్రితం",s:"కొన్ని క్షణాలు",ss:"%d సెకన్లు",m:"ఒక నిమిషం",mm:"%d నిమిషాలు",h:"ఒక గంట",hh:"%d గంటలు",d:"ఒక రోజు",dd:"%d రోజులు",M:"ఒక నెల",MM:"%d నెలలు",y:"ఒక సంవత్సరం",yy:"%d సంవత్సరాలు"},dayOfMonthOrdinalParse:/\d{1,2}వ/,ordinal:"%dవ",meridiemParse:/రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,meridiemHour:function(e,t){return 12===e&&(e=0),"రాత్రి"===t?e<4?e:e+12:"ఉదయం"===t?e:"మధ్యాహ్నం"===t?e>=10?e:e+12:"సాయంత్రం"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"రాత్రి":e<10?"ఉదయం":e<17?"మధ్యాహ్నం":e<20?"సాయంత్రం":"రాత్రి"},week:{dow:0,doy:6}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juñu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"segundu balun",ss:"segundu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={0:"-ум",1:"-ум",2:"-юм",3:"-юм",4:"-ум",5:"-ум",6:"-ум",7:"-ум",8:"-ум",9:"-ум",10:"-ум",12:"-ум",13:"-ум",20:"-ум",30:"-юм",40:"-ум",50:"-ум",60:"-ум",70:"-ум",80:"-ум",90:"-ум",100:"-ум"};e.defineLocale("tg",{months:{format:"январи_феврали_марти_апрели_майи_июни_июли_августи_сентябри_октябри_ноябри_декабри".split("_"),standalone:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_")},monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"якшанбе_душанбе_сешанбе_чоршанбе_панҷшанбе_ҷумъа_шанбе".split("_"),weekdaysShort:"яшб_дшб_сшб_чшб_пшб_ҷум_шнб".split("_"),weekdaysMin:"яш_дш_сш_чш_пш_ҷм_шб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Имрӯз соати] LT",nextDay:"[Фардо соати] LT",lastDay:"[Дирӯз соати] LT",nextWeek:"dddd[и] [ҳафтаи оянда соати] LT",lastWeek:"dddd[и] [ҳафтаи гузашта соати] LT",sameElse:"L"},relativeTime:{future:"баъди %s",past:"%s пеш",s:"якчанд сония",m:"як дақиқа",mm:"%d дақиқа",h:"як соат",hh:"%d соат",d:"як рӯз",dd:"%d рӯз",M:"як моҳ",MM:"%d моҳ",y:"як сол",yy:"%d сол"},meridiemParse:/шаб|субҳ|рӯз|бегоҳ/,meridiemHour:function(e,t){return 12===e&&(e=0),"шаб"===t?e<4?e:e+12:"субҳ"===t?e:"рӯз"===t?e>=11?e:e+12:"бегоҳ"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"шаб":e<11?"субҳ":e<16?"рӯз":e<19?"бегоҳ":"шаб"},dayOfMonthOrdinalParse:/\d{1,2}-(ум|юм)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,n){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",w:"1 สัปดาห์",ww:"%d สัปดาห์",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"'inji",5:"'inji",8:"'inji",70:"'inji",80:"'inji",2:"'nji",7:"'nji",20:"'nji",50:"'nji",3:"'ünji",4:"'ünji",100:"'ünji",6:"'njy",9:"'unjy",10:"'unjy",30:"'unjy",60:"'ynjy",90:"'ynjy"};e.defineLocale("tk",{months:"Ýanwar_Fewral_Mart_Aprel_Maý_Iýun_Iýul_Awgust_Sentýabr_Oktýabr_Noýabr_Dekabr".split("_"),monthsShort:"Ýan_Few_Mar_Apr_Maý_Iýn_Iýl_Awg_Sen_Okt_Noý_Dek".split("_"),weekdays:"Ýekşenbe_Duşenbe_Sişenbe_Çarşenbe_Penşenbe_Anna_Şenbe".split("_"),weekdaysShort:"Ýek_Duş_Siş_Çar_Pen_Ann_Şen".split("_"),weekdaysMin:"Ýk_Dş_Sş_Çr_Pn_An_Şn".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün sagat] LT",nextDay:"[ertir sagat] LT",nextWeek:"[indiki] dddd [sagat] LT",lastDay:"[düýn] LT",lastWeek:"[geçen] dddd [sagat] LT",sameElse:"L"},relativeTime:{future:"%s soň",past:"%s öň",s:"birnäçe sekunt",m:"bir minut",mm:"%d minut",h:"bir sagat",hh:"%d sagat",d:"bir gün",dd:"%d gün",M:"bir aý",MM:"%d aý",y:"bir ýyl",yy:"%d ýyl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'unjy";var r=e%10;return e+(t[r]||t[e%100-r]||t[e>=100?100:null])}},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t="pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e,n,r,i){var a=function(e){var n=Math.floor(e%1e3/100),r=Math.floor(e%100/10),i=e%10,a="";return n>0&&(a+=t[n]+"vatlh"),r>0&&(a+=(""!==a?" ":"")+t[r]+"maH"),i>0&&(a+=(""!==a?" ":"")+t[i]),""===a?"pagh":a}(e);switch(r){case"ss":return a+" lup";case"mm":return a+" tup";case"hh":return a+" rep";case"dd":return a+" jaj";case"MM":return a+" jar";case"yy":return a+" DIS"}}e.defineLocale("tlh",{months:"tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’".split("_"),monthsShort:"jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa’leS] LT",nextWeek:"LLL",lastDay:"[wa’Hu’] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"},past:function(e){var t=e;return t=-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu’":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"},s:"puS lup",ss:n,m:"wa’ tup",mm:n,h:"wa’ rep",hh:n,d:"wa’ jaj",dd:n,M:"wa’ jar",MM:n,y:"wa’ DIS",yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};e.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),meridiem:function(e,t,n){return e<12?n?"öö":"ÖÖ":n?"ös":"ÖS"},meridiemParse:/öö|ÖÖ|ös|ÖS/,isPM:function(e){return"ös"===e||"ÖS"===e},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",w:"bir hafta",ww:"%d hafta",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'ıncı";var r=e%10;return e+(t[r]||t[e%100-r]||t[e>=100?100:null])}},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n míut","'iens míut"],mm:[e+" míuts",e+" míuts"],h:["'n þora","'iensa þora"],hh:[e+" þoras",e+" þoras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return r?i[n][0]:t?i[n][0]:i[n][1]}e.defineLocale("tzl",{months:"Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi".split("_"),weekdaysShort:"Súl_Lún_Mai_Már_Xhú_Vié_Sát".split("_"),weekdaysMin:"Sú_Lú_Ma_Má_Xh_Vi_Sá".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi à] LT",nextDay:"[demà à] LT",nextWeek:"dddd [à] LT",lastDay:"[ieiri à] LT",lastWeek:"[sür el] dddd [lasteu à] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",ss:"%d ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("ug-cn",{months:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),monthsShort:"يانۋار_فېۋرال_مارت_ئاپرېل_ماي_ئىيۇن_ئىيۇل_ئاۋغۇست_سېنتەبىر_ئۆكتەبىر_نويابىر_دېكابىر".split("_"),weekdays:"يەكشەنبە_دۈشەنبە_سەيشەنبە_چارشەنبە_پەيشەنبە_جۈمە_شەنبە".split("_"),weekdaysShort:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),weekdaysMin:"يە_دۈ_سە_چا_پە_جۈ_شە".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-يىلىM-ئاينىڭD-كۈنى",LLL:"YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm",LLLL:"dddd، YYYY-يىلىM-ئاينىڭD-كۈنى، HH:mm"},meridiemParse:/يېرىم كېچە|سەھەر|چۈشتىن بۇرۇن|چۈش|چۈشتىن كېيىن|كەچ/,meridiemHour:function(e,t){return 12===e&&(e=0),"يېرىم كېچە"===t||"سەھەر"===t||"چۈشتىن بۇرۇن"===t?e:"چۈشتىن كېيىن"===t||"كەچ"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?"يېرىم كېچە":r<900?"سەھەر":r<1130?"چۈشتىن بۇرۇن":r<1230?"چۈش":r<1800?"چۈشتىن كېيىن":"كەچ"},calendar:{sameDay:"[بۈگۈن سائەت] LT",nextDay:"[ئەتە سائەت] LT",nextWeek:"[كېلەركى] dddd [سائەت] LT",lastDay:"[تۆنۈگۈن] LT",lastWeek:"[ئالدىنقى] dddd [سائەت] LT",sameElse:"L"},relativeTime:{future:"%s كېيىن",past:"%s بۇرۇن",s:"نەچچە سېكونت",ss:"%d سېكونت",m:"بىر مىنۇت",mm:"%d مىنۇت",h:"بىر سائەت",hh:"%d سائەت",d:"بىر كۈن",dd:"%d كۈن",M:"بىر ئاي",MM:"%d ئاي",y:"بىر يىل",yy:"%d يىل"},dayOfMonthOrdinalParse:/\d{1,2}(-كۈنى|-ئاي|-ھەپتە)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"-كۈنى";case"w":case"W":return e+"-ھەپتە";default:return e}},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";function t(e,t,n){var r,i;return"m"===n?t?"хвилина":"хвилину":"h"===n?t?"година":"годину":e+" "+(r=+e,i={ss:t?"секунда_секунди_секунд":"секунду_секунди_секунд",mm:t?"хвилина_хвилини_хвилин":"хвилину_хвилини_хвилин",hh:t?"година_години_годин":"годину_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"}[n].split("_"),r%10==1&&r%100!=11?i[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?i[1]:i[2])}function n(e){return function(){return e+"о"+(11===this.hours()?"б":"")+"] LT"}}e.defineLocale("uk",{months:{format:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_"),standalone:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_")},monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:function(e,t){var n={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")};return!0===e?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):e?n[/(\[[ВвУу]\]) ?dddd/.test(t)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:n.nominative},weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., HH:mm",LLLL:"dddd, D MMMM YYYY р., HH:mm"},calendar:{sameDay:n("[Сьогодні "),nextDay:n("[Завтра "),lastDay:n("[Вчора "),nextWeek:n("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return n("[Минулої] dddd [").call(this);case 1:case 2:case 4:return n("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",ss:t,m:t,mm:t,h:"годину",hh:t,d:"день",dd:t,M:"місяць",MM:t,y:"рік",yy:t},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(e){return/^(дня|вечора)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночі":e<12?"ранку":e<17?"дня":"вечора"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-й";case"D":return e+"-го";default:return e}},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";var t=["جنوری","فروری","مارچ","اپریل","مئی","جون","جولائی","اگست","ستمبر","اکتوبر","نومبر","دسمبر"],n=["اتوار","پیر","منگل","بدھ","جمعرات","جمعہ","ہفتہ"];e.defineLocale("ur",{months:t,monthsShort:t,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd، D MMMM YYYY HH:mm"},meridiemParse:/صبح|شام/,isPM:function(e){return"شام"===e},meridiem:function(e,t,n){return e<12?"صبح":"شام"},calendar:{sameDay:"[آج بوقت] LT",nextDay:"[کل بوقت] LT",nextWeek:"dddd [بوقت] LT",lastDay:"[گذشتہ روز بوقت] LT",lastWeek:"[گذشتہ] dddd [بوقت] LT",sameElse:"L"},relativeTime:{future:"%s بعد",past:"%s قبل",s:"چند سیکنڈ",ss:"%d سیکنڈ",m:"ایک منٹ",mm:"%d منٹ",h:"ایک گھنٹہ",hh:"%d گھنٹے",d:"ایک دن",dd:"%d دن",M:"ایک ماہ",MM:"%d ماہ",y:"ایک سال",yy:"%d سال"},preparse:function(e){return e.replace(/،/g,",")},postformat:function(e){return e.replace(/,/g,"،")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("uz",{months:"январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",ss:"%d фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Thg 01_Thg 02_Thg 03_Thg 04_Thg 05_Thg 06_Thg 07_Thg 08_Thg 09_Thg 10_Thg 11_Thg 12".split("_"),monthsParseExact:!0,weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY HH:mm",LLLL:"dddd, D MMMM [năm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần trước lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",ss:"%d giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",w:"một tuần",ww:"%d tuần",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("x-pseudo",{months:"J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér".split("_"),monthsShort:"J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc".split("_"),monthsParseExact:!0,weekdays:"S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý".split("_"),weekdaysShort:"S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát".split("_"),weekdaysMin:"S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~ódá~ý át] LT",nextDay:"[T~ómó~rró~w át] LT",nextWeek:"dddd [át] LT",lastDay:"[Ý~ést~érdá~ý át] LT",lastWeek:"[L~ást] dddd [át] LT",sameElse:"L"},relativeTime:{future:"í~ñ %s",past:"%s á~gó",s:"á ~féw ~sécó~ñds",ss:"%d s~écóñ~ds",m:"á ~míñ~úté",mm:"%d m~íñú~tés",h:"á~ñ hó~úr",hh:"%d h~óúrs",d:"á ~dáý",dd:"%d d~áýs",M:"á ~móñ~th",MM:"%d m~óñt~hs",y:"á ~ýéár",yy:"%d ý~éárs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("yo",{months:"Sẹ́rẹ́_Èrèlè_Ẹrẹ̀nà_Ìgbé_Èbibi_Òkùdu_Agẹmo_Ògún_Owewe_Ọ̀wàrà_Bélú_Ọ̀pẹ̀̀".split("_"),monthsShort:"Sẹ́r_Èrl_Ẹrn_Ìgb_Èbi_Òkù_Agẹ_Ògú_Owe_Ọ̀wà_Bél_Ọ̀pẹ̀̀".split("_"),weekdays:"Àìkú_Ajé_Ìsẹ́gun_Ọjọ́rú_Ọjọ́bọ_Ẹtì_Àbámẹ́ta".split("_"),weekdaysShort:"Àìk_Ajé_Ìsẹ́_Ọjr_Ọjb_Ẹtì_Àbá".split("_"),weekdaysMin:"Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Ònì ni] LT",nextDay:"[Ọ̀la ni] LT",nextWeek:"dddd [Ọsẹ̀ tón'bọ] [ni] LT",lastDay:"[Àna ni] LT",lastWeek:"dddd [Ọsẹ̀ tólọ́] [ni] LT",sameElse:"L"},relativeTime:{future:"ní %s",past:"%s kọjá",s:"ìsẹjú aayá die",ss:"aayá %d",m:"ìsẹjú kan",mm:"ìsẹjú %d",h:"wákati kan",hh:"wákati %d",d:"ọjọ́ kan",dd:"ọjọ́ %d",M:"osù kan",MM:"osù %d",y:"ọdún kan",yy:"ọdún %d"},dayOfMonthOrdinalParse:/ọjọ́\s\d{1,2}/,ordinal:"ọjọ́ %d",week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:function(e){return e.week()!==this.week()?"[下]dddLT":"[本]dddLT"},lastDay:"[昨天]LT",lastWeek:function(e){return this.week()!==e.week()?"[上]dddLT":"[本]dddLT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s后",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",w:"1 周",ww:"%d 周",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("zh-hk",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1200?"上午":1200===r?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("zh-mo",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"D/M/YYYY",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(4))},function(e,t,n){!function(e){"use strict";e.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:"[今天] LT",nextDay:"[明天] LT",nextWeek:"[下]dddd LT",lastDay:"[昨天] LT",lastWeek:"[上]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s後",past:"%s前",s:"幾秒",ss:"%d 秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"}})}(n(4))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Translation=void 0;const i=n(78);class a{constructor(e){this._defaultLocale=null,this._labels={},this._lastUpdated=null,this._listeners=new Set,this._selectedLocale=null,this.storageProvider=e.storageProvider,this.http=e.http}get listeners(){return this._listeners}addListener(e){this._listeners.add(e)}removeListener(e){this._listeners.delete(e)}fetch(e){return r(this,void 0,void 0,(function*(){const t={};e&&(t.headers={[i.HTTPHeaders.ACCEPT_LANGUAGE]:e});const n=yield this.http.get("/label",t);return yield this.update(n.parsedData)}))}update(e){return r(this,void 0,void 0,(function*(){const{default_locale:t,selected_locale:n,translations:r}=e;return this._defaultLocale=t,this._selectedLocale=n,this._labels=this.getSelectedLabels(r,n),yield this.storageProvider.set(a.KEY_ROOT,JSON.stringify({[a.KEY_DEFAULT_LOCALE]:t,[a.KEY_LAST_UPDATED]:Date.now(),[a.KEY_SELECTED_LOCALE]:n,[a.KEY_SERIALISED_TRANSLATIONS]:r})),this._listeners.forEach(e=>e.notifyTranslationChange()),this._labels}))}get(e,t={}){const n=`__##${e}##__`;if(Object.keys(t).length>0){const r=this._labels[e]||n;return Object.keys(t).reduce((e,n)=>e.replace(`{{${n}}}`,t[n]),r)}return this._labels[e]||n}get labels(){return this._labels}get defaultLocale(){return this._defaultLocale}get lastUpdated(){return this._lastUpdated}get selectedLocale(){return this._selectedLocale}hydrate(){return r(this,void 0,void 0,(function*(){const e=yield this.storageProvider.get(a.KEY_ROOT);if(e){const t=JSON.parse(e);return t[a.KEY_DEFAULT_LOCALE]&&(this._defaultLocale=t[a.KEY_DEFAULT_LOCALE]),t[a.KEY_LAST_UPDATED]&&(this._lastUpdated=t[a.KEY_LAST_UPDATED]),t[a.KEY_SELECTED_LOCALE]&&(this._selectedLocale=t[a.KEY_SELECTED_LOCALE]),t[a.KEY_SERIALISED_TRANSLATIONS]&&(this._labels=this.getSelectedLabels(t[a.KEY_SERIALISED_TRANSLATIONS],this._selectedLocale)),this._listeners.forEach(({notifyTranslationChange:e})=>e()),!0}return!1}))}getSelectedLabels(e,t){return e&&t&&e[t]?e[t]:{}}}t.Translation=a,a.KEY_ROOT="_LABEL_SERVICE",a.KEY_DEFAULT_LOCALE="DEFAULT_LOCALE",a.KEY_LAST_UPDATED="LAST_UPDATED",a.KEY_SELECTED_LOCALE="SELECTED_LOCALE",a.KEY_SERIALISED_TRANSLATIONS="SERIALISED_TRANSLATIONS"},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Http=void 0;const i=n(111),a=n(1049),o=n(451),s=n(154),u=n(78),l={driver:fetch,useAuth:!0,useDefaultRequestMiddleware:!0,useDefaultErrorMiddleware:!0,useDefaultResponseMiddleware:!0},c={},d=(e,t,n,r,i)=>new Promise((t,n)=>n(e)),f=e=>e;t.Http=class{constructor(e){this.driver=fetch,this.driverWithMiddlewares=fetch,this.errorHandler=d,this.responseHandler=f,this.refreshRequest=null,this.fetch=(e,t)=>r(this,void 0,void 0,(function*(){let n=this.driverWithMiddlewares;t.middlewares&&(n=this.driver,[...t.middlewares].reverse().forEach(e=>{n=e(n)}));try{const r=yield n(e,Object.assign(Object.assign({},t),{clientRequestId:e}));if(!r.ok){if(!1===t.useErrorMiddlewares)throw r;return this.errorHandler(r,e,this.optionsHistory[e]||t,n,this.responseHandler)}return this.responseHandler({response:r})}catch(r){if(!1===t.useErrorMiddlewares)throw r;return this.errorHandler(r,e,this.optionsHistory[e]||t,n,this.responseHandler)}})),this.getRequestOptions=e=>Object.assign(Object.assign(Object.assign({},c),{useAuth:this.useAuth}),e||{}),this.get=(e,t)=>{const n=this.getRequestOptions(t);return this.fetch(e,Object.assign({method:s.METHODS.get},n))},this.post=(e,t,n)=>{const r=this.getRequestOptions(n);return this.fetch(e,Object.assign(Object.assign({method:s.METHODS.post},r),{body:t}))},this.put=(e,t,n)=>{const r=this.getRequestOptions(n);return this.fetch(e,Object.assign(Object.assign({method:s.METHODS.put},r),{body:t}))},this.patch=(e,t,n)=>{const r=this.getRequestOptions(n);return this.fetch(e,Object.assign(Object.assign({method:s.METHODS.patch},r),{body:t}))},this.delete=(e,t,n)=>{const r=this.getRequestOptions(n);return this.fetch(e,Object.assign(Object.assign({method:s.METHODS.delete},r),{body:t}))},this.refresh=e=>r(this,void 0,void 0,(function*(){var t;const n=yield this.storageProvider.get(u.AUTH_TOKEN_KEY),r=yield this.storageProvider.get(u.REFRESH_TOKEN_KEY),i=null===(t=null==e?void 0:e.headers)||void 0===t?void 0:t[u.HTTPHeaders.AUTHORIZATION];if(i&&i!==`Bearer ${n}`)return{parsedData:{authorisationToken:n,refreshToken:r}};if(!this.refreshRequest){const t={middlewares:[a.defaultRequestHeaders(this.storageProvider,this.appVersion),a.baseUrlFormatter(this.baseUrl)]},i=e||t;this.refreshRequest=this.fetch(`${this.baseUrl}/token/refresh`,Object.assign(Object.assign({method:s.METHODS.post,body:JSON.stringify({refreshToken:r})},i),{headers:Object.assign(Object.assign({},i.headers),{Authorization:`Bearer ${n}`})}))}try{const e=yield this.refreshRequest,{authorisationToken:t,refreshToken:n}=e.parsedData;return this.refreshRequest=null,yield this.storageProvider.set(u.AUTH_TOKEN_KEY,t),n&&(yield this.storageProvider.set(u.REFRESH_TOKEN_KEY,n)),e}catch(e){throw this.refreshRequest=null,e}})),this.applyRequestMiddleware=e=>{[...e].reverse().forEach(e=>{this.driverWithMiddlewares=e(this.driverWithMiddlewares)})},this.applyErrorMiddleware=e=>{[...e].reverse().forEach(e=>{this.errorHandler=e(this.errorHandler)})},this.applyResponseMiddleware=e=>{[...e].reverse().forEach(e=>{this.responseHandler=e(this.responseHandler)})},this.setMiddlewares=({requestMiddlewares:e,responseMiddlewares:t,errorMiddlewares:n})=>{e&&(this.useDefaultRequestMiddleware=!1,this.driverWithMiddlewares=this.driver,this.applyRequestMiddleware(e)),t&&(this.responseHandler=f,this.useDefaultResponseMiddleware=!1,this.applyResponseMiddleware(t)),n&&(this.useDefaultErrorMiddleware=!1,this.errorHandler=d,this.applyErrorMiddleware(n))},this.baseUrl=e.baseUrl,this.driver=i.pick(e.driver,l.driver),this.driverWithMiddlewares=this.driver,this.storageProvider=e.storageProvider,this.useAuth=i.pick(e.useAuth,l.useAuth),this.useDefaultRequestMiddleware=i.pick(e.useDefaultRequestMiddleware,l.useDefaultRequestMiddleware),this.useDefaultResponseMiddleware=i.pick(e.useDefaultResponseMiddleware,l.useDefaultResponseMiddleware),this.useDefaultErrorMiddleware=i.pick(e.useDefaultErrorMiddleware,l.useDefaultErrorMiddleware),this.appVersion=e.appVersion,this.optionsHistory={},this.useDefaultRequestMiddleware&&this.applyRequestMiddleware([a.defaultRequestHeaders(this.storageProvider,this.appVersion),a.baseUrlFormatter(this.baseUrl),a.queryStringFormatter(),a.jsonPayloadFormatter(),a.applyAuthorizationHeader(this.storageProvider,(e,t)=>{this.optionsHistory[e]=t})]),this.useDefaultErrorMiddleware&&this.applyErrorMiddleware([a.tokenRefresh(this.refresh)]),this.useDefaultResponseMiddleware&&this.applyResponseMiddleware([e=>({response:t})=>r(this,void 0,void 0,(function*(){const n=t.headers.get("content-type"),r=o.isJsonContentType(n)?yield t.json():yield t.text();return e({response:t,parsedData:r})}))])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isJsonContentType=void 0;const r=n(78);t.isJsonContentType=e=>!!e&&e.toLowerCase().substring(0,16)===r.APPLICATION_JSON},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFontName=t.Realm=t.DEFAULT_THEME=void 0;var r=n(1053);Object.defineProperty(t,"DEFAULT_THEME",{enumerable:!0,get:function(){return r.DEFAULT_THEME}});var i=n(1054);Object.defineProperty(t,"Realm",{enumerable:!0,get:function(){return i.Realm}});var a=n(112);Object.defineProperty(t,"getFontName",{enumerable:!0,get:function(){return a.getFontName}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorageProvider=t.LocalStorageProvider=void 0;var r=n(1056);Object.defineProperty(t,"LocalStorageProvider",{enumerable:!0,get:function(){return r.LocalStorageProvider}});var i=n(1057);Object.defineProperty(t,"MemoryStorageProvider",{enumerable:!0,get:function(){return i.MemoryStorageProvider}})},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.Beacon=void 0;const a=n(111),o=n(455),s=n(456),u=n(1064);t.Beacon=class{constructor(e){var{http:t}=e,n=i(e,["http"]);this._stopped=!1,this.sendImmediate=()=>r(this,void 0,void 0,(function*(){if(this.isValidPayload){const{url:e}=this.config;try{this.setState({lastBeaconSentAt:Date.now()});const t=yield this.http.post(e,this.payload);this.handleBeaconResponse(t)}catch(e){this.handleBeaconError(e)}}else this.handleBeaconError(null)})),this.config=n,this.http=t,this.setSessionID(),this.setState(Object.assign({},u.DEFAULT_STATE))}get newCid(){return`${a.getRandomString()}-${a.getRandomString()}`}get isLive(){const{video:e}=this._state;if(e){const{type:t}=e;return t===o.EContentType.LIVE}}get isValidPayload(){const{video:e,cid:t,startedAt:n,action:r}=this._state;if(e){const i=!!(e&&t&&n&&r);return!this.isLive&&e&&e.watchProgress?e.watchProgress>=0&&i:i}}handleBeaconIntervalChange(e){const{interval:t}=this._state,n=e?1e3*e:t;n>=u.MIN_BEACON_INTERVAL&&n!==t&&this.setState({interval:n})}handleBeaconResponse({response:e,parsedData:t}){if(this.setState({isSendingBeacon:!1}),e.ok){const{heartbeatInterval:e}=t;this.handleBeaconIntervalChange(e)}}handleBeaconError(e){const{onError:t}=this.config;if(this.setState({isSendingBeacon:!1}),e){return-1!==u.REJECT_STATUSES.indexOf(e.status)&&this.setState({isSendingBeacon:!1}),t(e)}}get payload(){const{video:e,cid:t,action:n,startedAt:r}=this._state;if(!e)return null;const i={video:e.id,cid:t,startedAt:r,action:n};return this.isLive||(i.progress=e.watchProgress),[i]}get canSendBeacon(){const{lastBeaconSentAt:e,interval:t,isSendingBeacon:n,video:r}=this._state,i=e+t<=Date.now();return!this._stopped&&i&&!n&&!!r}setState(e){this._state=Object.assign(Object.assign({},this._state),e)}get state(){return this._state}set updateConfig(e){this.config=Object.assign(Object.assign({},this.config),e),e.sessionID&&this.setState({cid:e.sessionID})}set progress(e){this._state.video&&(this.isLive||this.setState({video:Object.assign(Object.assign({},this._state.video),{watchProgress:Math.floor(e)})}),this.send())}set video(e){const{lastBeaconSentAt:t}=this._state;t&&this.resetState(),this.setState({video:e,action:s.EBeaconAction[e.type]})}setSessionID(){const e=this.config.sessionID||this.newCid;this.setState({cid:e,startedAt:Date.now()})}send(){this.canSendBeacon&&(this.sendImmediate(),this.setState({isSendingBeacon:!0}))}resetState(){this.setState(Object.assign({},u.DEFAULT_STATE))}start(){this._stopped=!1}stop(){this._stopped=!0}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SubEventDetailsType=t.AnimationType=t.isInternalLinkEventCustomSection=t.isInternalLinkEventPlaylist=t.isInternalLink=t.isExternalLink=t.CtaLinkTypes=t.LinkTypes=t.EContentType=t.PlaylistType=t.SubtitleFormats=t.HeroDisplayMode=t.AccessTypes=t.VerticalAlignment=t.HorizontalAlignment=void 0,function(e){e.LEFT="LEFT",e.CENTER="CENTER",e.RIGHT="RIGHT"}(t.HorizontalAlignment||(t.HorizontalAlignment={})),function(e){e.TOP="TOP",e.MIDDLE="MIDDLE",e.BOTTOM="BOTTOM"}(t.VerticalAlignment||(t.VerticalAlignment={})),function(e){e.GRANTED="GRANTED",e.DENIED="DENIED",e.GEOBLOCKED="GEOBLOCKED"}(t.AccessTypes||(t.AccessTypes={})),function(e){e.ENABLED="ENABLED",e.DISABLED="DISABLED"}(t.HeroDisplayMode||(t.HeroDisplayMode={})),function(e){e.VTT="vtt",e.SCC="scc",e.SRT="srt"}(t.SubtitleFormats||(t.SubtitleFormats={})),function(e){e.BASIC="BASIC",e.SEASON="SEASON"}(t.PlaylistType||(t.PlaylistType={})),function(e){e.LIVE="LIVE",e.LIVE_EVENT="LIVE_EVENT",e.VOD="VOD",e.VOD_VIDEO="VOD_VIDEO",e.VOD_PLAYLIST="VOD_PLAYLIST",e.PLAYLIST="PLAYLIST",e.UPCOMING="UPCOMING",e.DATA_FEED="DATA_FEED",e.SECTION_LINK="SECTION_LINK",e.EPG="EPG"}(t.EContentType||(t.EContentType={})),function(e){e.VOD="VOD",e.LIVE="LIVE",e.PLAYLIST="PLAYLIST",e.WATCH_PLAYLIST="WATCH_PLAYLIST",e.WATCH_WATCHLIST="WATCH_WATCHLIST",e.EXTERNAL="EXTERNAL",e.SECTION_LINK="SECTION_LINK",e.SEASON="SEASON"}(r=t.LinkTypes||(t.LinkTypes={})),function(e){e.EXTERNAL="ExternalLink",e.CONTENT="ContentLink",e.ADD_TO_WATCHLIST="AddToWatchlistLink",e.ADD_TO_FAVOURITES="AddToFavouritesLink"}(t.CtaLinkTypes||(t.CtaLinkTypes={})),t.isExternalLink=function(e){return void 0!==e.url},t.isInternalLink=function(e){return void 0!==e.event},t.isInternalLinkEventPlaylist=function(e){return e.type===r.PLAYLIST},t.isInternalLinkEventCustomSection=function(e){return e.type===r.SECTION_LINK},function(e){e.NONE="NONE",e.PARALLAX="PARALLAX"}(t.AnimationType||(t.AnimationType={})),function(e){e.PARTICIPANTS="PARTICIPANTS",e.MMA="MMA"}(t.SubEventDetailsType||(t.SubEventDetailsType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EBeaconErrors=t.EBeaconAction=void 0,function(e){e[e.VOD=2]="VOD",e[e.LIVE=3]="LIVE"}(t.EBeaconAction||(t.EBeaconAction={})),function(e){e.VIDEO_FORBIDDEN="VIDEO_FORBIDDEN",e.CONFLICT="CONFLICT",e.VIDEO_ERROR="VIDEO_ERROR"}(t.EBeaconErrors||(t.EBeaconErrors={}))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(1068),t),i(n(1069),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeString=void 0;const r={removeAccents:!1,removeNonEnglishCharacters:!1,removeWhitespace:!1,toLowerCase:!1};t.normalizeString=(e,t)=>{if("string"!=typeof e)return e;const{removeAccents:n,removeNonEnglishCharacters:i,removeWhitespace:a,toLowerCase:o}=Object.assign(Object.assign({},r),t);let s=e;return o&&(s=s.toLowerCase()),n&&(s=s.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),a&&(s=s.replace(/\s/g,"")),i&&(s=s.replace(/[^a-zA-Z]/g,"")),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerMessageLevels=void 0,function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR"}(t.LoggerMessageLevels||(t.LoggerMessageLevels={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(459);t.LoggerMessageLevels=r.LoggerMessageLevels,function(e){e[e.VOD=2]="VOD",e[e.LIVE=3]="LIVE"}(t.Action||(t.Action={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(155),i=n(64),a=n(65);t.default=async e=>{const{$logger:t,$storage:n}=a.default,o=await n.get(i.TOKEN_KEYS.authentication),{sub:s,ip:u,loc:l}=o?r(o):{};t.log(Object.assign(Object.assign({},e),{userId:s,location:l,ip:u}))}},function(e,t,n){"use strict";n.r(t);var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function a(e){return"function"==typeof e}var o=!1,s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;o=e},get useDeprecatedSynchronousErrorHandling(){return o}};function u(e){setTimeout((function(){throw e}),0)}var l={closed:!0,next:function(e){},error:function(e){if(s.useDeprecatedSynchronousErrorHandling)throw e;u(e)},complete:function(){}},c=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function d(e){return null!==e&&"object"==typeof e}var f=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),h=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var s=0;s<n.length;++s){n[s].remove(this)}if(a(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(e){t=e instanceof f?p(e.errors):[e]}}if(c(o)){s=-1;for(var u=o.length;++s<u;){var l=o[s];if(d(l))try{l.unsubscribe()}catch(e){t=t||[],e instanceof f?t=t.concat(p(e.errors)):t.push(e)}}}if(t)throw new f(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function p(e){return e.reduce((function(e,t){return e.concat(t instanceof f?t.errors:t)}),[])}var m=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),g=function(e){function t(n,r,i){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=l;break;case 1:if(!n){a.destination=l;break}if("object"==typeof n){n instanceof t?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new v(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new v(a,n,r,i)}return a}return i(t,e),t.prototype[m]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(h),v=function(e){function t(t,n,r,i){var o,s=e.call(this)||this;s._parentSubscriber=t;var u=s;return a(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==l&&(a((u=Object.create(n)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=o,s._error=r,s._complete=i,s}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=s.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):u(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;u(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw e;u(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return s.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(u(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(g);function y(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof g?r:null}return!0}var _=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function b(e){return e}function T(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return E(e)}function E(e){return 0===e.length?b:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var S=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof g)return e;if(e[m])return e[m]()}return e||t||n?new g(e,t,n):new g(l)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||s.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),s.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),y(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=w(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[_]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:E(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=w(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function w(e){if(e||(e=s.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var A=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),M=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return i(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(h),L=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return i(t,e),t}(g),C=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype[m]=function(){return new L(this)},t.prototype.lift=function(e){var t=new D(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new A;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new A;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new A;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new A;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new A;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new M(this,e))},t.prototype.asObservable=function(){var e=new S;return e.source=this,e},t.create=function(e,t){return new D(e,t)},t}(S),D=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):h.EMPTY},t}(C);var k=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new P(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),P=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(g),I=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new h).add(this.source.subscribe(new O(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e},t.prototype.refCount=function(){return(e=this).lift(new k(e));var e},t}(S),O=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(L);var R=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return i(t,e),t.prototype._subscribe=function(e){var t=new h,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new x(n)),t.add(r.subscribe(e)),t},t}(S),x=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return i(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(h),N=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new A;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(C),j=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return i(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return i(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(h)),F=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(j),U=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),B=function(e){function t(n,r){void 0===r&&(r=U.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(U),Y=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(B))(F),H=Y,V=new S((function(e){return e.complete()}));function G(e){return e?function(e){return new S((function(t){return e.schedule((function(){return t.complete()}))}))}(e):V}function K(e){return e&&"function"==typeof e.schedule}var W,q=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function z(e,t){return new S((function(n){var r=new h,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function X(e,t){return t?z(e,t):new S(q(e))}function Q(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return K(n)?(e.pop(),z(e,n)):X(e)}function $(e,t){return new S(t?function(n){return t.schedule(J,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function J(e){var t=e.error;e.subscriber.error(t)}W||(W={});var Z=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return Q(this.value);case"E":return $(this.error);case"C":return G()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();var ee=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return i(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new te(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Z.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Z.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Z.createComplete()),this.unsubscribe()},t}(g),te=function(){return function(e,t){this.notification=e,this.destination=t}}(),ne=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new re(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new A;if(this.isStopped||this.hasError?t=h.EMPTY:(this.observers.push(e),t=new M(this,e)),i&&e.add(e=new ee(e,i)),n)for(var o=0;o<a&&!e.closed;o++)e.next(r[o]);else for(o=0;o<a&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||H).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return i>t&&(a=Math.max(a,i-t)),a>0&&r.splice(0,a),r},t}(C),re=function(){return function(e,t){this.time=e,this.value=t}}(),ie=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return i(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),h.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),h.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(C),ae=1,oe=function(){return Promise.resolve()}(),se={};function ue(e){return e in se&&(delete se[e],!0)}var le=function(e){var t=ae++;return se[t]=!0,oe.then((function(){return ue(t)&&e()})),t},ce=function(e){ue(e)},de=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=le(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(ce(n),t.scheduled=void 0)},t}(j),fe=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(B))(de),he=fe,pe=new B(j),me=pe,ge=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(j),ve=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(B))(ge),ye=ve,_e=function(e){function t(t,n){void 0===t&&(t=be),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(B),be=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return i(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){void 0===r&&(r=0),this.delay=e.frame+r;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){void 0===n&&(n=0)},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(j);function Te(){}function Ee(e){return!!e&&(e instanceof S||"function"==typeof e.lift&&"function"==typeof e.subscribe)}var Se=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),we=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Ae=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}();function Me(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Le(e,t))}}var Le=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Ce(e,this.project,this.thisArg))},e}(),Ce=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(g);function De(e,t,n){if(t){if(!K(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return De(e,n).apply(void 0,r).pipe(Me((function(e){return c(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,a=this,o={context:a,subject:i,callbackFunc:e,scheduler:n};return new S((function(r){if(n){var s={args:t,subscriber:r,params:o};return n.schedule(ke,0,s)}if(!i){i=new ie;try{e.apply(a,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(e.length<=1?e[0]:e),i.complete()}]))}catch(e){y(i)?i.error(e):console.warn(e)}}return i.subscribe(r)}))}}function ke(e){var t=this,n=e.args,r=e.subscriber,i=e.params,a=i.callbackFunc,o=i.context,s=i.scheduler,u=i.subject;if(!u){u=i.subject=new ie;try{a.apply(o,n.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length<=1?e[0]:e;t.add(s.schedule(Pe,0,{value:r,subject:u}))}]))}catch(e){u.error(e)}}this.add(u.subscribe(r))}function Pe(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function Ie(e,t,n){if(t){if(!K(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Ie(e,n).apply(void 0,r).pipe(Me((function(e){return c(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new S((function(r){var a=i.context,o=i.subject;if(n)return n.schedule(Oe,0,{params:i,subscriber:r,context:a});if(!o){o=i.subject=new ie;try{e.apply(a,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.shift();n?o.error(n):(o.next(e.length<=1?e[0]:e),o.complete())}]))}catch(e){y(o)?o.error(e):console.warn(e)}}return o.subscribe(r)}))}}function Oe(e){var t=this,n=e.params,r=e.subscriber,i=e.context,a=n.callbackFunc,o=n.args,s=n.scheduler,u=n.subject;if(!u){u=n.subject=new ie;try{a.apply(i,o.concat([function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.shift();if(r)t.add(s.schedule(xe,0,{err:r,subject:u}));else{var i=e.length<=1?e[0]:e;t.add(s.schedule(Re,0,{value:i,subject:u}))}}]))}catch(e){this.add(s.schedule(xe,0,{err:e,subject:u}))}}this.add(u.subscribe(r))}function Re(e){var t=e.value,n=e.subject;n.next(t),n.complete()}function xe(e){var t=e.err;e.subject.error(t)}var Ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(g),je=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(g);function Fe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Ue=Fe(),Be=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Ye(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var He=function(e){if(e&&"function"==typeof e[_])return r=e,function(e){var t=r[_]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Be(e))return q(e);if(Ye(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,u),e};if(e&&"function"==typeof e[Ue])return t=e,function(e){for(var n=t[Ue]();;){var r=void 0;try{r=n.next()}catch(t){return e.error(t),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,i=d(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Ve(e,t,n,r,i){if(void 0===i&&(i=new je(e,n,r)),!i.closed)return t instanceof S?t.subscribe(i):He(t)(i)}var Ge={};function Ke(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=void 0,r=void 0;return K(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&c(e[0])&&(e=e[0]),X(e,r).lift(new We(n))}var We=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new qe(e,this.resultSelector))},e}(),qe=function(e){function t(t,n){var r=e.call(this,t)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i(t,e),t.prototype._next=function(e){this.values.push(Ge),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Ve(this,r,void 0,n))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=this.values,i=r[n],a=this.toRespond?i===Ge?--this.toRespond:this.toRespond:0;r[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Ne);function ze(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[_]}(e))return function(e,t){return new S((function(n){var r=new h;return r.add(t.schedule((function(){var i=e[_]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(Ye(e))return function(e,t){return new S((function(n){var r=new h;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(Be(e))return z(e,t);if(function(e){return e&&"function"==typeof e[Ue]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new S((function(n){var r,i=new h;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[Ue](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Xe(e,t){return t?ze(e,t):e instanceof S?e:new S(He(e))}var Qe=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(g),$e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(g);function Je(e,t){if(!t.closed){if(e instanceof S)return e.subscribe(t);var n;try{n=He(e)(t)}catch(e){t.error(e)}return n}}function Ze(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(Ze((function(n,r){return Xe(e(n,r)).pipe(Me((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new et(e,n))})}var et=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new tt(e,this.project,this.concurrent))},e}(),tt=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new Qe(this),n=this.destination;n.add(t);var r=Je(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}($e);function nt(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Ze(b,e)}function rt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return nt(1)(Q.apply(void 0,e))}function it(e){return new S((function(t){var n;try{n=e()}catch(e){return void t.error(e)}return(n?Xe(n):G()).subscribe(t)}))}function at(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(c(n))return ot(n,null);if(d(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return ot(r.map((function(e){return n[e]})),r)}}if("function"==typeof e[e.length-1]){var i=e.pop();return ot(e=1===e.length&&c(e[0])?e[0]:e,null).pipe(Me((function(e){return i.apply(void 0,e)})))}return ot(e,null)}function ot(e,t){return new S((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),a=0,o=0,s=function(s){var u=Xe(e[s]),l=!1;n.add(u.subscribe({next:function(e){l||(l=!0,o++),i[s]=e},error:function(e){return n.error(e)},complete:function(){++a!==r&&l||(o===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()}))}function st(e,t,n,r){return a(n)&&(r=n,n=void 0),r?st(e,t,n).pipe(Me((function(e){return c(e)?r.apply(void 0,e):r(e)}))):new S((function(r){!function e(t,n,r,i,a){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var s=t;t.addEventListener(n,r,a),o=function(){return s.removeEventListener(n,r,a)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var u=t;t.on(n,r),o=function(){return u.off(n,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var l=t;t.addListener(n,r),o=function(){return l.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var c=0,d=t.length;c<d;c++)e(t[c],n,r,i,a)}i.add(o)}(e,t,(function(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function ut(e,t,n){return n?ut(e,t).pipe(Me((function(e){return c(e)?n.apply(void 0,e):n(e)}))):new S((function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(e){return void n.error(e)}if(a(t))return function(){return t(i,r)}}))}function lt(e,t,n,r,i){var a,o;if(1==arguments.length){var s=e;o=s.initialState,t=s.condition,n=s.iterate,a=s.resultSelector||b,i=s.scheduler}else void 0===r||K(r)?(o=e,a=b,i=r):(o=e,a=r);return new S((function(e){var r=o;if(i)return i.schedule(ct,0,{subscriber:e,iterate:n,condition:t,resultSelector:a,state:r});for(;;){if(t){var s=void 0;try{s=t(r)}catch(t){return void e.error(t)}if(!s){e.complete();break}}var u=void 0;try{u=a(r)}catch(t){return void e.error(t)}if(e.next(u),e.closed)break;try{r=n(r)}catch(t){return void e.error(t)}}}))}function ct(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function dt(e,t,n){return void 0===t&&(t=V),void 0===n&&(n=V),it((function(){return e()?t:n}))}function ft(e){return!c(e)&&e-parseFloat(e)+1>=0}function ht(e,t){return void 0===e&&(e=0),void 0===t&&(t=me),(!ft(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=me),new S((function(n){return n.add(t.schedule(pt,e,{subscriber:n,counter:0,period:e})),n}))}function pt(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}function mt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return K(i)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof S?e[0]:nt(n)(X(e,r))}var gt=new S(Te);function vt(){return gt}function yt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return V;var n=e[0],r=e.slice(1);return 1===e.length&&c(n)?yt.apply(void 0,n):new S((function(e){var t=function(){return e.add(yt.apply(void 0,r).subscribe(e))};return Xe(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function _t(e,t){return new S(t?function(n){var r=Object.keys(e),i=new h;return i.add(t.schedule(bt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i}:function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})}function bt(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription,a=e.obj;if(!r.closed)if(n<t.length){var o=t[n];r.next([o,a[o]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:a}))}else r.complete()}function Tt(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function Et(e,t){return function(n){return n.lift(new St(e,t))}}var St=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new wt(e,this.predicate,this.thisArg))},e}(),wt=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(g);function At(e,t,n){return[Et(t,n)(new S(He(e))),Et(Tt(t,n))(new S(He(e)))]}function Mt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!c(e[0]))return e[0];e=e[0]}return X(e,void 0).lift(new Lt)}var Lt=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Ct(e))},e}(),Ct=function(e){function t(t){var n=e.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=Ve(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var i=this.subscriptions[r];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(t)},t}(Ne);function Dt(e,t,n){return void 0===e&&(e=0),new S((function(r){void 0===t&&(t=e,e=0);var i=0,a=e;if(n)return n.schedule(kt,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(a++),r.closed)break}}))}function kt(e){var t=e.start,n=e.index,r=e.count,i=e.subscriber;n>=r?i.complete():(i.next(t),i.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function Pt(e,t,n){void 0===e&&(e=0);var r=-1;return ft(t)?r=Number(t)<1?1:Number(t):K(t)&&(n=t),K(n)||(n=me),new S((function(t){var i=ft(e)?e:+e-n.now();return n.schedule(It,i,{index:0,period:r,subscriber:t})}))}function It(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Ot(e,t){return new S((function(n){var r,i;try{r=e()}catch(e){return void n.error(e)}try{i=t(r)}catch(e){return void n.error(e)}var a=(i?Xe(i):V).subscribe(n);return function(){a.unsubscribe(),r&&r.unsubscribe()}}))}function Rt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return"function"==typeof n&&e.pop(),X(e,void 0).lift(new xt(n))}var xt=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Nt(e,this.resultSelector))},e}(),Nt=function(e){function t(t,n,r){void 0===r&&(r=Object.create(null));var i=e.call(this,t)||this;return i.resultSelector=n,i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:void 0,i}return i(t,e),t.prototype._next=function(e){var t=this.iterators;c(e)?t.push(new Ft(e)):"function"==typeof e[Ue]?t.push(new jt(e[Ue]())):t.push(new Ut(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe());else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){if("function"==typeof(o=e[r]).hasValue&&!o.hasValue())return}var i=!1,a=[];for(r=0;r<t;r++){var o,s=(o=e[r]).next();if(o.hasCompleted()&&(i=!0),s.done)return void n.complete();a.push(s.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),i&&n.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(g),jt=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},e}(),Ft=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[Ue]=function(){return this},e.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),Ut=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(t,e),t.prototype[Ue]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Je(this.observable,new Qe(this))},t}($e);n.d(t,"Observable",(function(){return S})),n.d(t,"ConnectableObservable",(function(){return I})),n.d(t,"GroupedObservable",(function(){return R})),n.d(t,"observable",(function(){return _})),n.d(t,"Subject",(function(){return C})),n.d(t,"BehaviorSubject",(function(){return N})),n.d(t,"ReplaySubject",(function(){return ne})),n.d(t,"AsyncSubject",(function(){return ie})),n.d(t,"asap",(function(){return he})),n.d(t,"asapScheduler",(function(){return fe})),n.d(t,"async",(function(){return me})),n.d(t,"asyncScheduler",(function(){return pe})),n.d(t,"queue",(function(){return H})),n.d(t,"queueScheduler",(function(){return Y})),n.d(t,"animationFrame",(function(){return ye})),n.d(t,"animationFrameScheduler",(function(){return ve})),n.d(t,"VirtualTimeScheduler",(function(){return _e})),n.d(t,"VirtualAction",(function(){return be})),n.d(t,"Scheduler",(function(){return U})),n.d(t,"Subscription",(function(){return h})),n.d(t,"Subscriber",(function(){return g})),n.d(t,"Notification",(function(){return Z})),n.d(t,"NotificationKind",(function(){return W})),n.d(t,"pipe",(function(){return T})),n.d(t,"noop",(function(){return Te})),n.d(t,"identity",(function(){return b})),n.d(t,"isObservable",(function(){return Ee})),n.d(t,"ArgumentOutOfRangeError",(function(){return Se})),n.d(t,"EmptyError",(function(){return we})),n.d(t,"ObjectUnsubscribedError",(function(){return A})),n.d(t,"UnsubscriptionError",(function(){return f})),n.d(t,"TimeoutError",(function(){return Ae})),n.d(t,"bindCallback",(function(){return De})),n.d(t,"bindNodeCallback",(function(){return Ie})),n.d(t,"combineLatest",(function(){return Ke})),n.d(t,"concat",(function(){return rt})),n.d(t,"defer",(function(){return it})),n.d(t,"empty",(function(){return G})),n.d(t,"forkJoin",(function(){return at})),n.d(t,"from",(function(){return Xe})),n.d(t,"fromEvent",(function(){return st})),n.d(t,"fromEventPattern",(function(){return ut})),n.d(t,"generate",(function(){return lt})),n.d(t,"iif",(function(){return dt})),n.d(t,"interval",(function(){return ht})),n.d(t,"merge",(function(){return mt})),n.d(t,"never",(function(){return vt})),n.d(t,"of",(function(){return Q})),n.d(t,"onErrorResumeNext",(function(){return yt})),n.d(t,"pairs",(function(){return _t})),n.d(t,"partition",(function(){return At})),n.d(t,"race",(function(){return Mt})),n.d(t,"range",(function(){return Dt})),n.d(t,"throwError",(function(){return $})),n.d(t,"timer",(function(){return Pt})),n.d(t,"using",(function(){return Ot})),n.d(t,"zip",(function(){return Rt})),n.d(t,"scheduled",(function(){return ze})),n.d(t,"EMPTY",(function(){return V})),n.d(t,"NEVER",(function(){return gt})),n.d(t,"config",(function(){return s}))},function(e,t,n){e.exports=n(464)},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),n(465);const i=n(90),a=n(64),o=n(1031),s=n(1075),u=n(1078),l=n(65);null===(r=i.player.setMessageInterceptor)||void 0===r||r.call(i.player,cast.framework.messages.MessageType.LOAD,async e=>{try{return await s.default(e)}catch(e){console.error("Load failed",e)}}),i.context.addCustomMessageListener(a.ERROR_MESSAGE_NAMESPACE,console.warn),i.context.addCustomMessageListener(a.REALM_MESSAGE_NAMESPACE,({data:{realm:e}})=>l.default.setRealm(e)),i.player.on("timeupdate",u.default),o.initLiveEpgUpdates(i.player),i.context.start()},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(27).__exportStar(n(467),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Interceptor=void 0;const r=n(27),i=r.__importStar(n(468)),a=n(231),o=n(8),s=n(142),u=n(74),l=n(213),c=n(10),d=r.__importDefault(n(58)),f=n(1007),h=n(1014),p=n(1016),m=n(1020),g=n(1022),v=n(1025),y=n(1027),_=n(1029),b=cast.framework.messages.MessageType,T="video";t.Interceptor=class{constructor(e,t){this.player=new s.Player(T,(0,g.patchConfig)(p.DORIS_CONFIG)),this.customMessages=new m.CustomMessages(this.player),this.tracks=new _.TracksManager,this.interceptors={},this.mounted=!1,this.mounting=!1,this.load=e=>r.__awaiter(this,void 0,void 0,(function*(){if(this.loadRequestData={},this.mounting||this.mounted)if(this.mounted){const t=yield this.runInterceptor(b.LOAD,e);yield this.changeSource(t)}else console.error("Load called twice during load.");else{this.mounting=!0;const t=yield this.runInterceptor(b.LOAD,e);yield this.mount(t)}return null})),this.stop=e=>{this.player.reset(),this.adBreakManager.reset(),this.playerManager.broadcastStatus(!0,e.requestId)},this.play=e=>{this.player.play(),this.playerManager.broadcastStatus(!0,e.requestId,e.customData)},this.pause=e=>{this.player.pause(),this.playerManager.broadcastStatus(!0,e.requestId,e.customData)},this.seek=e=>{if(!(this.playerManager.getSupportedMediaCommands()&cast.framework.messages.Command.SEEK))return console.warn("Seeking not supported!"),null;const{relativeTime:t,currentTime:n}=e;let r=null!=t?this.player.getCurrentTime()+t:n;if(null!=r){if(null==t&&this.player.getIsLive()){const{start:e}=this.player.getSeekableRange();r+=e}this.player.seekTo(r),this.playerManager.broadcastStatus(!0,e.requestId,e.customData)}},this.setTrack=e=>{const t=e.activeTrackIds;if(t){const e=this.player.getCurrentAudioTrack(),n=this.player.getCurrentTextTrack(),r=this.tracks.getTracks(),i=e?this.tracks.getId("AUDIO",e.label,e.lang):void 0,a=n?this.tracks.getId("TEXT",n.label,n.lang,n.kind):void 0,s=r.find(e=>"AUDIO"===e.type&&t.some(t=>t===e.trackId)),u=r.find(e=>"TEXT"===e.type&&t.some(t=>t===e.trackId));if(null!=(null==s?void 0:s.trackId)&&(null==e||s.trackId!==i)){const e=this.player.getAudioTracks().find(e=>e.label===s.name&&e.lang===s.language);e&&(this.player.setCurrentAudioTrack(e),this.player.sourceHandler.hasType(o.HandlerTypes.HLS)&&(this.player.sourceHandler.getEngine().currentLevel=this.player.sourceHandler.getEngine().currentLevel))}if(!u||null!=n&&u.trackId===a)null==u&&n&&this.player.setCurrentTextTrack(void 0);else{const{subtype:e,language:t,name:n}=u;if(e&&t&&n){const r=this.player.getTextTracks().find(r=>(0,c.isTextTrackEqual)({kind:e,lang:t,label:n},r));this.player.setCurrentTextTrack(r)}}}this.playerManager.broadcastStatus(!0,e.requestId,e.customData)},this.getMediaStatus=e=>{var t;const n=this.player.getCurrentAudioTrack(),r=this.player.getCurrentTextTrack(),i=[];if(n){const e=this.tracks.getId("AUDIO",n.label,n.lang);null!==e&&i.push(e)}if(r){const e=this.tracks.getId("TEXT",r.label,r.lang,r.kind);null!==e&&i.push(e)}if(e.activeTrackIds=i,e.media){const n=this.player.getIsLive()?-1:this.player.getDuration();e.media.duration=isNaN(n)?0:n,e.media.metadata=e.media.metadata||this.getMediaData(),e.media.breakClips=this.adBreakManager.getBreakClips(),e.media.breaks=this.adBreakManager.getBreaks();const r=null===(t=this.player.getStartDate())||void 0===t?void 0:t.getTime();e.media.startAbsoluteTime=r?r/1e3:void 0}let a=this.player.getCurrentTime();if(this.player.getIsLive()){e.liveSeekableRange=this.createLiveSeekableRange();const{start:t}=this.player.getSeekableRange();a-=t}return e.breakStatus=this.adBreakManager.getBreakStatus(),e.currentTime=a,e},this.setMessageInterceptor=(e,t)=>{"function"==typeof t?this.interceptors[e]=t:console.warn(`${e} Interceptor not a function`)},this.volumeChange=e=>e,this.getMediaData=()=>{var e,t;return null===(t=null===(e=this.loadRequestData)||void 0===e?void 0:e.media)||void 0===t?void 0:t.metadata},this.createLiveSeekableRange=()=>{let{end:e,start:t}=this.player.getSeekableRange();return e-=t,t-=t,new cast.framework.messages.LiveSeekableRange(t,e,!0,!1)},this.runInterceptor=(e,t)=>r.__awaiter(this,void 0,void 0,(function*(){return this.interceptors[e]?this.interceptors[e](t):t})),this.setTracksOnLoad=()=>{this.player.once(o.EventTypes.PLAYING,()=>{this.updateMediaInformation()}),this.player.once(o.EventTypes.HANDLER_ELEMENT_CREATED,(e,{sourceHandler:t})=>{const n=t.getElement();n instanceof HTMLVideoElement&&n.textTracks.addEventListener("addtrack",this.handleTextTrackAdded)})},this.updateTextTracks=()=>{const e=this.player.getTextTracks();e.length&&e.forEach(e=>{this.tracks.addTrack(e.label,e.lang,cast.framework.messages.TrackType.TEXT,void 0,void 0,e.kind)})},this.bindEventsOnce=()=>{this.player.once(o.EventTypes.PLAY,this.setPlayingState),this.player.once(o.EventTypes.LOADED_METADATA,()=>{const e=this.player.sourceHandler.getElement();e instanceof HTMLMediaElement&&this.playerManager.setMediaElement(e)}),this.imaPlugin.once(l.StreamEvent.LOADED,(e,t)=>{this.imaStream=t.getStreamData()})},this.bindEvents=()=>{this.player.on(o.EventTypes.LOADED_DATA,()=>{this.player.setIsMuted(!1),this.updateTextTracks(),this.addAudioTracks(),this.updateMediaInformation()}),this.player.on([o.EventTypes.ENDED,o.EventTypes.HANDLER_DESTROYING],()=>{document.body.classList.remove("ds-chromecast--loaded")}),this.player.on([o.EventTypes.AUDIO_TRACK_CHANGE,o.EventTypes.TEXT_TRACK_CHANGE],()=>{this.playerManager.broadcastStatus(!0)})},this.handleTextTrackAdded=()=>{let e=!1;if(this.player.getTextTracks().forEach(({label:t,lang:n,kind:r})=>{this.tracks.trackExists(t,n,cast.framework.messages.TrackType.TEXT)||(this.tracks.addTrack(t,n,cast.framework.messages.TrackType.TEXT,void 0,void 0,r),e=!0)}),e){let e=this.playerManager.getMediaInformation();e&&(e=Object.assign(Object.assign({},e),{tracks:this.tracks.getTracks()}),this.playerManager.setMediaInformation(e,!0))}},this.setPlayingState=()=>{document.body.classList.remove("ds-chromecast--loading"),document.body.classList.add("ds-chromecast--loaded")},new v.IdleListener(t,this.player),this.queueMessageHandler=new y.QueueMessageHandler({castReceiverContext:t,playerManager:e}),this.playerManager=e,this.player.setMessageInterceptor=this.setMessageInterceptor,this.player.Hls=d.default,window.doris=this.player,window.interceptor=this;const n=this.player.getPluginByType(u.IMAPlugin);if(!n)throw new Error("Interceptor must be instantiated with IMA Plugin");this.imaPlugin=n,this.adBreakManager=new h.AdBreakManager(this.player,e,n)}mount(e){return r.__awaiter(this,void 0,void 0,(function*(){e&&e.media?((0,a.mount)(this.player,f.PlayerContainer,{getMediaData:this.getMediaData}),this.bindEvents(),yield this.loadMedia(e),this.mounted=!0):this.mounted=!1,this.mounting=!1}))}changeSource(e){return r.__awaiter(this,void 0,void 0,(function*(){this.tracks.reset(),this.player.reset(),this.imaStream=void 0,this.playerManager.broadcastStatus(!0),this.adBreakManager.reset(),yield this.loadMedia(e)}))}loadMedia(e){var t,n,a;return r.__awaiter(this,void 0,void 0,(function*(){this.loadRequestData=e,this.bindEventsOnce(),this.setTracksOnLoad();const r=(0,g.formatSource)(e),{initialAudioTrack:s,initialTextTrack:u,textTracks:l}=this.getTrackInfo(e);let c=null===(t=e.customData)||void 0===t?void 0:t.currentDate;null!=c&&(c=new Date(1e3*c));const d={source:r,startFrom:null!=c?c:e.currentTime,autoPlay:o.AutoPlayOptions.ANY,customData:e.media.customData,textTracks:l,initialAudioTrack:s,initialTextTrack:u};if((null===(n=e.media.customData)||void 0===n?void 0:n.ima)&&r.sourceType!==o.SourceTypes.RESOLVABLE)yield this.imaPlugin.load(e.media.customData.ima,e.media.customData);else if((null===(a=e.media.customData)||void 0===a?void 0:a.diceDRM)&&d.source.sourceType===o.SourceTypes.STATIC){const{licenseServerUrl:t,token:n}=e.media.customData.diceDRM;yield i.load({player:this.player,loadRequest:d,stream:{dash:{url:d.source.url,drm:{jwtToken:n,url:t}}}})}else yield this.player.load(d)}))}getTrackInfo(e){const{tracks:t,customData:n}=e.media,r={initialTextTrack:[],textTracks:[],initialAudioTrack:[]};return(null==t?void 0:t.length)&&(r.textTracks=t.map(e=>({label:e.name||"",lang:e.language||"",src:e.trackContentId||"",kind:o.TextTrackKinds.SUBTITLES}))),n&&Array.isArray(null==n?void 0:n.initialTextTrack)&&(r.initialTextTrack=n.initialTextTrack),n&&(Array.isArray(n.initialAudioTrack)?r.initialAudioTrack=n.initialAudioTrack:"string"==typeof n.activeAudioTrackLang&&(r.initialAudioTrack=[{lang:n.activeAudioTrackLang}])),r}addAudioTracks(){this.player.getAudioTracks().forEach(({label:e,lang:t})=>{this.tracks.addTrack(e,t,cast.framework.messages.TrackType.AUDIO)})}updateMediaInformation(){var e,t;const n=new cast.framework.messages.MediaInformation;n.contentId=this.loadRequestData.media.contentId,n.contentUrl=null!==(t=null===(e=this.imaStream)||void 0===e?void 0:e.url)&&void 0!==t?t:this.loadRequestData.media.contentUrl,n.contentType=this.loadRequestData.media.contentType,n.streamType=this.player.getIsLive()?cast.framework.messages.StreamType.LIVE:cast.framework.messages.StreamType.BUFFERED,n.tracks=this.tracks.getTracks(),this.playerManager.setMediaInformation(n,!0)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21);r.__exportStar(n(97),t),r.__exportStar(n(104),t),r.__exportStar(n(888),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUTOLEVEL=void 0,t.AUTOLEVEL={width:0,height:0,label:"Auto",bitrate:0,id:-1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CASTING_CLASSNAME=void 0,t.CASTING_CLASSNAME="ds-casting"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CAST_SENDER_URL=void 0,t.CAST_SENDER_URL="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=void 0;var r=n(0),i=n(8),a=n(160),o=n(195),s=n(136),u=n(138),l=n(599),c=r.__importStar(n(602)),d=r.__importStar(n(627)),f=n(163);t.DEFAULT_CONFIG={bandwidthPersistence:!1,bufferManagement:{initial:{bufferTarget:9,enabled:!1,maxRebufferWait:10},rebuffer:{bufferTarget:6,enabled:!1,maxRebufferWait:10}},capLevelToPlayerSize:!0,castConfig:{appId:"7FD419C2",autoCastPolicy:i.AutoCastPolicy.WHEN_IDLE,enabled:!1},dashConfig:{bufferStallRecovery:{enabled:!0,maxRetryCount:5,nudgeSegmentCount:2}},debug:{bufferSize:120,enabled:!1,inputs:[c.handlerType,c.hls,c.tizen,c.dash,c.native,c.chromecast,c.shaka],localStorageKey:"DORIS_DEBUG",metrics:[d.handlerType,d.currentTime,d.seekableRange,d.bufferedRanges,d.quality,d.audioTrack,d.codecs,d.bandwidthEstimate,d.bufferHealth,d.abr,d.sourceUrl],shortcut:{alt:!1,ctrl:!1,key:"d",meta:!1,shift:!0},updateInterval:500},defaultAutoPlay:i.AutoPlayOptions.YES,defaultBandwidthEstimate:35e5,defaultInitialAudioTrack:[],defaultInitialTextTrack:[],drm:{},dvrMinDuration:120,enableContentTypeDetection:{fromExtension:!0,fromGetRequest:!0,fromHeadRequest:!0},enableMediaSessions:!1,handlers:[s.NativeHandler,o.HlsHandler,a.DashHandler],hlsConfig:{abrEwmaFastLive:4,abrEwmaSlowLive:8,autoStartLoad:!1,bufferTargetSmoothFactor:.5,debug:!1},htmlTextTrackContainer:u.TEXT_TRACK_CONTAINER_ID,liveToleranceSeconds:18,logging:{consoleOutput:!0,enabled:!0,level:i.LogLevels.WARN,outputs:[]},middlewares:[l.linearDVRMiddleware,l.dvrMiddleware],mountPluginsToWindow:!1,mountToWindow:!1,overrideNative:!f.browser.isSafari,plugins:[],shakaConfig:{streaming:{jumpLargeGaps:!0,ignoreTextStreamFailures:!0}},sourceExpiryThreshold:2e3,useHTMLTextTracks:!1}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AutoCastPolicy=void 0,(r=t.AutoCastPolicy||(t.AutoCastPolicy={}))[r.ALWAYS=0]="ALWAYS",r[r.WHEN_IDLE=1]="WHEN_IDLE",r[r.NEVER=2]="NEVER"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AutoPlayOptions=void 0,(r=t.AutoPlayOptions||(t.AutoPlayOptions={})).NO="NO",r.YES="YES",r.MUTED="MUTED",r.ANY="ANY"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CanPlaySource=void 0,(r=t.CanPlaySource||(t.CanPlaySource={})).PROBABLY="probably",r.MAYBE="maybe",r.NO=""},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CastStates=void 0,(r=t.CastStates||(t.CastStates={})).CONNECTED="CONNECTED",r.CONNECTING="CONNECTING",r.DISABLED="DISABLED",r.INITIALIZING="INITIALIZING",r.NO_DEVICES_AVAILABLE="NO_DEVICES_AVAILABLE",r.NOT_CONNECTED="NOT_CONNECTED",r.NOT_SUPPORTED="NOT_SUPPORTED"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTypes=void 0,(r=t.ErrorTypes||(t.ErrorTypes={})).UNKNOWN="UNKNOWN",r.AUTO_PLAY_FAILURE="AUTO_PLAY_FAILURE",r.TOTAL_FAILURE="TOTAL_FAILURE",r.SOURCE_ERROR="SOURCE_ERROR",r.SOURCE_EXPIRED="SOURCE_EXPIRED",r.CAST_ERROR="CAST_ERROR",r.MEDIA_ERROR="MEDIA_ERROR"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.EventTypes=void 0,(r=t.EventTypes||(t.EventTypes={})).AUDIO_TRACK_CHANGE="audiotrackchange",r.CAN_PLAY="canplay",r.CAN_PLAY_THROUGH="canplaythrough",r.CAST_STATE_CHANGE="caststatechange",r.DEBUG_OVERLAY_CHANGE="debugoverlaychange",r.DESTROYING="destroying",r.DURATION_CHANGE="durationchange",r.DVR_WINDOW_FORCED_SEEK="dvrwindowforcedseek",r.EMPTIED="emptied",r.ENDED="ended",r.ERROR="error",r.FULLSCREEN_CHANGE="fullscreenchange",r.HANDLER_CREATED="handlercreated",r.HANDLER_DESTROYING="handlerdestroying",r.HANDLER_ELEMENT_CREATED="handlerelementcreated",r.HANDLER_ELEMENT_DESTROYING="handlerelementdestroying",r.LEVEL_CHANGE="levelchange",r.LOADED_DATA="loadeddata",r.LOADED_METADATA="loadedmetadata",r.LOAD_REQUEST="loadrequest",r.LOAD_START="loadstart",r.PAUSE="pause",r.PICTURE_IN_PICTURE_CHANGE="pictureinpicturechange",r.PLUGIN_CREATED="plugincreated",r.PLAY="play",r.PLAYING="playing",r.PROGRESS="progress",r.RATE_CHANGE="ratechange",r.READY="ready",r.RESIZE="resize",r.SEEKED="seeked",r.SEEKING="seeking",r.STALLED="stalled",r.SUSPEND="suspend",r.TEXT_TRACK_CHANGE="texttrackchange",r.TIME_UPDATE="timeupdate",r.VOLUME_CHANGE="volumechange",r.WAITING="waiting"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.HandlerTypes=void 0,(r=t.HandlerTypes||(t.HandlerTypes={})).NONE="NONE",r.NATIVE="NATIVE",r.HLS="HLS",r.DASH="DASH",r.SHAKA="SHAKA",r.CHROMECAST="CHROMECAST",r.TIZEN="TIZEN",r.WEBRTC="WEBRTC"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KeySystems=void 0,(r=t.KeySystems||(t.KeySystems={})).FAIRPLAY="com.apple.fps.1_0",r.WIDEVINE="com.widevine.alpha",r.PLAYREADY="com.microsoft.playready"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevels=void 0,(r=t.LogLevels||(t.LogLevels={}))[r.DEBUG=0]="DEBUG",r[r.LOG=1]="LOG",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.OFF=5]="OFF"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LogoPositions=void 0,(r=t.LogoPositions||(t.LogoPositions={})).TOP_LEFT="TOP_LEFT",r.TOP_RIGHT="TOP_RIGHT",r.BOTTOM_LEFT="BOTTOM_LEFT",r.BOTTOM_RIGHT="BOTTOM_RIGHT"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ReadyStates=void 0,(r=t.ReadyStates||(t.ReadyStates={}))[r.HAVE_NOTHING=0]="HAVE_NOTHING",r[r.HAVE_METADATA=1]="HAVE_METADATA",r[r.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",r[r.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",r[r.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.RepeatMode=void 0,(r=t.RepeatMode||(t.RepeatMode={})).OFF="REPEAT_OFF",r.ALL="REPEAT_ALL",r.SINGLE="REPEAT_SINGLE",r.ALL_AND_SHUFFLE="REPEAT_ALL_AND_SHUFFLE"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SourceTypes=void 0,(r=t.SourceTypes||(t.SourceTypes={})).STATIC="static",r.DYNAMIC="dynamic",r.RESOLVABLE="resolvable"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamTypes=void 0,(r=t.StreamTypes||(t.StreamTypes={})).HLS="application/x-mpegURL",r.DASH="application/dash+xml",r.SMOOTH="application/vnd.ms-sstr+xml"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TextTrackKinds=void 0,(r=t.TextTrackKinds||(t.TextTrackKinds={})).CAPTIONS="captions",r.CHAPTERS="chapters",r.DESCRIPTIONS="descriptions",r.METADATA="metadata",r.SUBTITLES="subtitles"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TextTrackModes=void 0,(r=t.TextTrackModes||(t.TextTrackModes={})).DISABLED="disabled",r.HIDDEN="hidden",r.SHOWING="showing"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TrackListEvents=void 0,(r=t.TrackListEvents||(t.TrackListEvents={})).CHANGE="change",r.ADD_TRACK="addtrack",r.REMOVE_TRACK="removetrack"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WebkitPresentationMode=void 0,(r=t.WebkitPresentationMode||(t.WebkitPresentationMode={})).INLINE="inline",r.PIP="picture-in-picture"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleOutput=void 0;var r=n(0),i=function(e,t){var n="[DS - ".concat(e,"] >");return r.__spreadArray([n],r.__read(t),!1)};t.ConsoleOutput={debug:function(e){var t;return(t=window.console).debug.apply(t,r.__spreadArray([],r.__read(i("debug",e)),!1))},error:function(e){var t;return(t=window.console).error.apply(t,r.__spreadArray([],r.__read(i("error",e)),!1))},info:function(e){var t;return(t=window.console).info.apply(t,r.__spreadArray([],r.__read(i("info",e)),!1))},log:function(e){var t;return(t=window.console).log.apply(t,r.__spreadArray([],r.__read(i("log",e)),!1))},warn:function(e){var t;return(t=window.console).warn.apply(t,r.__spreadArray([],r.__read(i("warn",e)),!1))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerFileNameDecorator=void 0;var r=n(0),i=n(162);t.LoggerFileNameDecorator=function(e){var t=this;this.file="",this._decorator="",this.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return i.logger.debug.apply(i.logger,r.__spreadArray([],r.__read(t.decorate(e)),!1))},this.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return i.logger.error.apply(i.logger,r.__spreadArray([],r.__read(t.decorate(e)),!1))},this.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return i.logger.info.apply(i.logger,r.__spreadArray([],r.__read(t.decorate(e)),!1))},this.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return i.logger.log.apply(i.logger,r.__spreadArray([],r.__read(t.decorate(e)),!1))},this.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return i.logger.warn.apply(i.logger,r.__spreadArray([],r.__read(t.decorate(e)),!1))},this.decorate=function(e){return r.__spreadArray([t._decorator],r.__read(e),!1)},this.file=e,this._decorator="[".concat(e,"]")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(494),t),r.__exportStar(n(495),t),r.__exportStar(n(496),t),r.__exportStar(n(497),t),r.__exportStar(n(498),t),r.__exportStar(n(499),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareDurationChangeEvents=void 0,t.compareDurationChangeEvents=function(e,t){return e.duration===t.duration&&e.isLive===t.isLive&&e.seekableDuration===t.seekableDuration&&e.seekableRange.end===t.seekableRange.end&&e.seekableRange.start===t.seekableRange.start}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareLevelChangeEvents=void 0;var r=n(60);t.compareLevelChangeEvents=function(e,t){return e.currentLevel===t.currentLevel&&e.currentLevelVariant===t.currentLevelVariant&&e.frameRate===t.frameRate&&e.levelVariants===t.levelVariants&&(0,r.isSequenceEqual)(e.levels,t.levels)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareProgressEvents=void 0;var r=n(60);t.compareProgressEvents=function(e,t){return(0,r.isSequenceEqual)(e.bufferedRanges,t.bufferedRanges)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareReadyEvents=void 0,t.compareReadyEvents=function(e,t){return e.isReady===t.isReady}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareResizeEvents=void 0,t.compareResizeEvents=function(e,t){return e.videoHeight===t.videoHeight&&e.videoWidth===t.videoWidth}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareTimeUpdateEvents=void 0,t.compareTimeUpdateEvents=function(e,t){return e.currentDate===t.currentDate&&e.currentTime===t.currentTime&&e.isAtLiveEdge===t.isAtLiveEdge}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lazy=void 0;var r=function(){function e(e){this._isValueCreated=!1,this._valueFactory=e}return Object.defineProperty(e.prototype,"isValueCreated",{get:function(){return this._isValueCreated},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._isValueCreated||(this._value=this._valueFactory(),this._isValueCreated=!0),this._value},enumerable:!1,configurable:!0}),e}();t.Lazy=r},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"BrowserInfo",(function(){return i})),n.d(t,"NodeInfo",(function(){return a})),n.d(t,"SearchBotDeviceInfo",(function(){return o})),n.d(t,"BotInfo",(function(){return s})),n.d(t,"ReactNativeInfo",(function(){return u})),n.d(t,"detect",(function(){return h})),n.d(t,"browserName",(function(){return m})),n.d(t,"parseUserAgent",(function(){return g})),n.d(t,"detectOS",(function(){return v})),n.d(t,"getNodeVersion",(function(){return y}));var r=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},i=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},a=function(t){this.version=t,this.type="node",this.name="node",this.os=e.platform},o=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},s=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},u=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},l=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,c=3,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(e){return e?g(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new u:"undefined"!=typeof navigator?g(navigator.userAgent):y()}function p(e){return""!==e&&d.reduce((function(t,n){var r=n[0],i=n[1];if(t)return t;var a=i.exec(e);return!!a&&[r,a]}),!1)}function m(e){var t=p(e);return t?t[0]:null}function g(e){var t=p(e);if(!t)return null;var n=t[0],a=t[1];if("searchbot"===n)return new s;var u=a[1]&&a[1].split(".").join("_").split("_").slice(0,3);u?u.length<c&&(u=r(r([],u,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(c-u.length),!0)):u=[];var d=u.join("."),f=v(e),h=l.exec(e);return h&&h[1]?new o(n,d,f,h[1]):new i(n,d,f)}function v(e){for(var t=0,n=f.length;t<n;t++){var r=f[t],i=r[0];if(r[1].exec(e))return i}return null}function y(){return void 0!==e&&e.version?new a(e.version.slice(1)):null}}.call(this,n(502))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,l=[],c=!1,d=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=s(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++d<t;)u&&u[d].run();d=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canExitPip=void 0;var r=n(91);t.canExitPip=function(e){return(0,r.hasKeyOfType)(e,"exitPictureInPicture","function")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=void 0,t.clamp=function(e,t,n){return Math.min(n,Math.max(t,e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clip=void 0,t.clip=function(e,t){return void 0===t&&(t=6),parseFloat(e.toFixed(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventProxy=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=n(10),u=n(16),l=n(166),c=n(167),d=new u.LoggerFileNameDecorator("EventProxy");t.EventProxy=function(e){var t=this;this.addEventSource=function(e,n){var i=t.getEventProxy(e);i?i.updateSources(r.__spreadArray(r.__spreadArray([],r.__read(i.sources),!1),[n],!1)):console.warn("Unknown event '".concat(e,"'."))},this.createSubscriptionContext=function(){return new c.SubscriptionContext({addEventListener:t.addEventListener,removeEventListener:t.removeEventListener})},this.destroy=function(){t.getEventTypes().forEach((function(e){t._proxyMap[e].complete()}))},this.off=function(e,n){t.removeEventListener(e,n)},this.on=function(e,n){t.addEventListener(e,n,!1)},this.once=function(e,n){t.addEventListener(e,n,!0)},this.removeEventSource=function(e,n){var r=t.getEventProxy(e);r?r.updateSources(r.sources.filter((function(e){return e!==n}))):console.warn("Unknown event '".concat(e,"'."))},this.addEventListener=function(e,n,i){var u=t.getEventSources(e);if(u.length>0){var l=i?new a.Subject:void 0,c=[];u.forEach((function(e){var i,a,u=e.event,f=e.source,h=(l?f.pipe((0,o.takeUntil)(l)):f).subscribe((function(e){try{n(u,e)}catch(e){d.error("Error in event callback! Event: '".concat(u,"'. Error: ").concat((0,s.errorToString)(e)))}l&&(l.next(),l.complete())}));h.add(t.handleTearDown(u,n,h)),l&&h.add((function(){c.every((function(e){return e.closed}))&&l.complete()}));var p=null!==(i=t._eventMap[u])&&void 0!==i?i:t._eventMap[u]=new Map,m=null!==(a=p.get(n))&&void 0!==a?a:[];p.set(n,r.__spreadArray(r.__spreadArray([],r.__read(m),!1),[h],!1)),c.push(h)}))}},this.getEventProxy=function(e){return t._proxyMap[e]},this.getEventSources=function(e){return(Array.isArray(e)?e:[e]).reduce((function(e,n){var i=t.getEventProxy(n);return i?r.__spreadArray(r.__spreadArray([],r.__read(e),!1),[{event:n,source:i.asObservable()}],!1):(console.warn("Unknown event '".concat(n,"'.")),e)}),[])},this.getEventTypes=function(){return Object.keys(t._eventTypes).map((function(e){return t._eventTypes[e]}))},this.handleTearDown=function(e,n,r){return function(){var i,a=t._eventMap[e];if(a){var o=null===(i=a.get(n))||void 0===i?void 0:i.filter((function(e){return e!==r}));o&&(o.length>0?a.set(n,o):(a.delete(n),0===a.size&&delete t._eventMap[e]))}}},this.removeEventListener=function(e,n){(Array.isArray(e)?e:[e]).forEach((function(e){var r=t._eventMap[e];if(r){var i=r.get(n);i&&i.forEach((function(e){e.unsubscribe()}))}}))},(0,i.default)(this);var n=e.eventTypes,u=e.proxyCreators;this._eventMap={},this._eventTypes=n;var f={};this.getEventTypes().forEach((function(e){var t,n;f[e]=null!==(n=null===(t=null==u?void 0:u[e])||void 0===t?void 0:t.call(u))&&void 0!==n?n:new l.ProxyObservable})),this._proxyMap=f}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(508),t),r.__exportStar(n(509),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBehaviorSubjectProxyObservableConfig=void 0;var r=n(12),i=n(10);t.isBehaviorSubjectProxyObservableConfig=function(e){return e.EmitterEngine===r.BehaviorSubject&&(0,i.hasKey)(e,"defaultValue")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSubjectProxyObservableConfig=void 0;var r=n(12);t.isSubjectProxyObservableConfig=function(e){return void 0===e.EmitterEngine||e.EmitterEngine===r.Subject}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LibraryLoader=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=n(10),u=n(16),l=n(168),c=new u.LoggerFileNameDecorator("LibraryLoader"),d=function(){function e(e){var t=this;(0,i.default)(this),this._config=this.createConfig(e);var n=this.createLibraryLoader(),r=n.libraryLoading,a=n.libraryState,o=n.eventSource;this._eventSource=o,this._libraryLoading=r,this._libraryState=a,this._config.lazyLoadLibrary||this.loadLibrary().catch((function(){c.warn("Eager loading of ".concat(t._config.libraryName," has failed."))}))}return Object.defineProperty(e.prototype,"onLibraryStateChanged",{get:function(){return this._eventSource},enumerable:!1,configurable:!0}),e.prototype.getLibraryState=function(){return this._libraryState.getValue()},e.prototype.loadLibrary=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this._libraryLoading.value];case 1:return e.sent(),[2]}}))}))},e.prototype.createConfig=function(e){var t;return r.__assign(r.__assign({},e),{lazyLoadLibrary:null===(t=e.lazyLoadLibrary)||void 0===t||t})},e.prototype.createLibraryLoader=function(){var e=this,t=this._config,n=t.libraryName,i=t.getIsLibraryLoaded,u=t.libraryUrl,d=new a.BehaviorSubject(l.LibraryState.NOT_LOADED),f=d.pipe((0,o.skip)(1),(0,o.map)((function(e){return{state:e}}))),h=new s.Lazy((function(){return Promise.resolve()}));return i()?(c.info("".concat(n," is already loaded.")),d.next(l.LibraryState.LOADED)):(d.next(l.LibraryState.NOT_LOADED),h=new s.Lazy((function(){return r.__awaiter(e,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(r){switch(r.label){case 0:if(i())return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),c.info("Started loading ".concat(n,".")),d.next(l.LibraryState.LOADING),[4,(0,s.embedScript)(u)];case 2:return r.sent(),[3,4];case 3:throw e=r.sent(),t="Failed to load ".concat(n,". ").concat((0,s.errorToString)(e)),c.error(t),d.next(l.LibraryState.BLOCKED),new Error(t);case 4:return c.info("".concat(n," has loaded.")),d.next(l.LibraryState.LOADED),[2]}}))}))}))),{eventSource:f,libraryLoading:h,libraryState:d}},e}();t.LibraryLoader=d},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LibraryState=void 0,(r=t.LibraryState||(t.LibraryState={})).NOT_LOADED="NOT_LOADED",r.LOADING="LOADING",r.LOADED="LOADED",r.BLOCKED="BLOCKED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaSessionManager=void 0;var r=n(0).__importDefault(n(9)),i=n(8),a=n(16),o=n(513),s=new a.LoggerFileNameDecorator("MediaSessionManager"),u=function(){function e(e){(0,r.default)(this),this._player=e.player,this.getIsMediaSessionSupported()?(this._player.on(i.EventTypes.LOAD_REQUEST,this.handleLoadRequest),this._player.on(i.EventTypes.PAUSE,this.handlePause),this._player.on(i.EventTypes.PLAY,this.handlePlay)):s.info("Media Sessions are not supported by the device.")}return e.prototype.getIsMediaSessionSupported=function(){return void 0!==window.navigator.mediaSession},e.prototype.getImageSizes=function(e,t){return void 0!==e&&void 0!==t?"".concat(e,"x").concat(t):void 0},e.prototype.handleLoadRequest=function(e,t){var n,r=this;if(navigator.mediaSession){var i=t.mediaInfo.metadata;navigator.mediaSession.metadata=new MediaMetadata({title:i.title,artist:i.artist,artwork:null===(n=i.images)||void 0===n?void 0:n.map((function(e){return{src:e.url,sizes:r.getImageSizes(e.width,e.height),type:e.contentType}}))}),navigator.mediaSession.setActionHandler(o.MediaSessionAction.PLAY,this.handlePlayAction),navigator.mediaSession.setActionHandler(o.MediaSessionAction.PAUSE,this.handlePauseAction),navigator.mediaSession.setActionHandler(o.MediaSessionAction.SEEK_BACKWARD,this.handleSeekBackwardAction),navigator.mediaSession.setActionHandler(o.MediaSessionAction.SEEK_FORWARD,this.handleSeekForwardAction)}},e.prototype.handlePause=function(){navigator.mediaSession&&(navigator.mediaSession.playbackState=o.MediaSessionPlaybackState.PAUSED)},e.prototype.handlePauseAction=function(){this._player.pause()},e.prototype.handlePlay=function(){navigator.mediaSession&&(navigator.mediaSession.playbackState=o.MediaSessionPlaybackState.PLAYING)},e.prototype.handlePlayAction=function(){this._player.play()},e.prototype.handleSeekBackwardAction=function(){this._player.nudge(-30)},e.prototype.handleSeekForwardAction=function(){this._player.nudge(30)},e}();t.MediaSessionManager=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(514),t),r.__exportStar(n(515),t)},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MediaSessionAction=void 0,(r=t.MediaSessionAction||(t.MediaSessionAction={})).PLAY="play",r.PAUSE="pause",r.SEEK_BACKWARD="seekbackward",r.SEEK_FORWARD="seekforward",r.PREVIOUS_TRACK="previoustrack",r.NEXT_TRACK="nexttrack"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MediaSessionPlaybackState=void 0,(r=t.MediaSessionPlaybackState||(t.MediaSessionPlaybackState={})).NONE="none",r.PAUSED="paused",r.PLAYING="playing"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueueItemService=void 0;var r=n(0).__importDefault(n(9)),i=new(n(16).LoggerFileNameDecorator)("QueueItemService"),a=1e3,o=function(){function e(){(0,r.default)(this),this._items=new Map,this._pendingItems=new Map}return e.prototype.addCastItemIdToItem=function(e,t,n){i.debug("Adding cast details for item '".concat(e,"'. Cast Session ID: '").concat(t,"' Cast Item ID: '").concat(n,"'")),this.unlinkCastItemIdFromItem(t,n);var r=this._items.get(e);if(void 0===r)throw new Error("The provided itemId is invalid!");r.set(t,n)},e.prototype.addOrGetItemIdByCastDetails=function(e,t,n){var r=this.getItemIdByCastItemId(e,t);return void 0===r&&void 0!==(r=this.getPendingItemIdByCastContentId(e,n))&&(this.deletePendingItemId(e,r),this.addCastItemIdToItem(r,e,t)),void 0===r&&(r=this.generateItemId(),this.addCastItemIdToItem(r,e,t)),r},e.prototype.addPendingItemForCastSession=function(e,t,n){var r=this._pendingItems.get(e);void 0===r&&(r=new Map,this._pendingItems.set(e,r));var i=r.get(t);void 0===i&&(i=[],r.set(t,i)),-1===i.indexOf(n)&&i.push(n)},e.prototype.generateItemId=function(){var e=a++;return i.debug("Generated new item identifier '".concat(e,"'.")),this._items.set(e,new Map),e},e.prototype.getCastItemId=function(e,t){var n;return null===(n=this._items.get(t))||void 0===n?void 0:n.get(e)},e.prototype.getItemIdByCastItemId=function(e,t){var n;return this._items.forEach((function(r,i){r.get(e)===t&&(n=i)})),n},e.prototype.deletePendingItemId=function(e,t){var n=this._pendingItems.get(e);void 0!==n&&(n.forEach((function(e,r){var i=e.indexOf(t);-1!==i&&(e.splice(i,1),0===e.length&&n.delete(r))})),0===n.size&&this._pendingItems.delete(e))},e.prototype.getPendingItemIdByCastContentId=function(e,t){var n,r;return null===(r=null===(n=this._pendingItems.get(e))||void 0===n?void 0:n.get(t))||void 0===r?void 0:r[0]},e.prototype.unlinkCastItemIdFromItem=function(e,t){this._items.forEach((function(n,r){n.get(e)===t&&n.delete(e)}))},e}();t.QueueItemService=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueueManager=void 0;var r=n(0),i=r.__importDefault(n(9)),a=r.__importDefault(n(129)),o=n(12),s=n(15),u=n(8),l=n(10),c=n(16),d=n(518),f=n(179),h=n(180),p=new c.LoggerFileNameDecorator("QueueManager"),m=function(){function e(e){this._isCastInSync=!1,this._items=[],this._mode=f.QueueModes.LOCAL,this._repeatMode=u.RepeatMode.OFF,(0,i.default)(this),this._player=e.player,this._services=e.services,this.tryCreateCastExtension(),this.bindEvents()}return e.prototype.destroy=function(){var e;null===(e=this._cast)||void 0===e||e.destroy(),this.unbindEvents()},e.prototype.getCurrentItem=function(){var e=this.getCurrentItemId();return this._items.find((function(t){return t.itemId===e}))},e.prototype.getCurrentItemId=function(){var e;return null===(e=this._player.getMediaInfo())||void 0===e?void 0:e.itemId},e.prototype.getCurrentItemIndex=function(){var e=this.getCurrentItemId();return this._items.findIndex((function(t){return t.itemId===e}))},e.prototype.getItemById=function(e){return this._items.find((function(t){return t.itemId===e}))},e.prototype.getItems=function(){return this._items},e.prototype.getRepeatMode=function(){return this._repeatMode},e.prototype.insertItems=function(e,t){var n;return r.__awaiter(this,void 0,void 0,(function(){var i,a,o,s,u,c,d=this;return r.__generator(this,(function(h){switch(h.label){case 0:switch(i=e.map((function(e){return(0,l.createMediaInfo)(e,d._player.getConfig(),d._services)})),this._mode){case f.QueueModes.LOCAL:return[3,1];case f.QueueModes.CAST:return[3,2]}return[3,4];case 1:return-1===(a=this._items.findIndex((function(e){return e.itemId===t})))?(u=this._items).push.apply(u,r.__spreadArray([],r.__read(i),!1)):(c=this._items).splice.apply(c,r.__spreadArray([a,0],r.__read(i),!1)),o=this._player.getHasEnded(),s=void 0!==this._player.getMediaInfo(),!o&&s||this.next(),[3,4];case 2:return[4,null===(n=this._cast)||void 0===n?void 0:n.insertItems(i,t)];case 3:return h.sent(),[3,4];case 4:return[2,i]}}))}))},e.prototype.jumpToItem=function(e){var t;return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:switch(this._mode){case f.QueueModes.LOCAL:return[3,1];case f.QueueModes.CAST:return[3,6]}return[3,7];case 1:return n=this.getCurrentItem(),(i=this._items.find((function(t){return t.itemId===e})))?n&&n===i?[4,this._player.seekTo(0)]:[3,3]:[3,5];case 2:return r.sent(),this._player.play(),[3,5];case 3:return[4,this._player.load(i)];case 4:r.sent(),r.label=5;case 5:return[3,7];case 6:return null===(t=this._cast)||void 0===t||t.jumpToItem(e),[3,7];case 7:return[2]}}))}))},e.prototype.next=function(){var e;return r.__awaiter(this,void 0,void 0,(function(){var t,n,i;return r.__generator(this,(function(r){switch(r.label){case 0:switch(this._mode){case f.QueueModes.LOCAL:return[3,1];case f.QueueModes.CAST:return[3,9]}return[3,12];case 1:return this._repeatMode===u.RepeatMode.SINGLE?[3,8]:(t=this.getCurrentItemIndex()+1,n=this.getItems(),t<n.length?(i=n[t],[4,this.jumpToItem(i.itemId)]):[3,3]);case 2:return r.sent(),[3,8];case 3:if(!(n.length>0))return[3,8];switch(this._repeatMode){case u.RepeatMode.ALL_AND_SHUFFLE:return[3,4];case u.RepeatMode.ALL:return[3,6]}return[3,8];case 4:return this.shuffle(),i=n[0],[4,this.jumpToItem(i.itemId)];case 5:return r.sent(),[3,8];case 6:return i=n[0],[4,this.jumpToItem(i.itemId)];case 7:return r.sent(),[3,8];case 8:return[3,12];case 9:return this._cast?[4,null===(e=this._cast)||void 0===e?void 0:e.next()]:[3,11];case 10:r.sent(),r.label=11;case 11:return[3,12];case 12:return[2]}}))}))},e.prototype.removeItems=function(e){var t;return r.__awaiter(this,void 0,void 0,(function(){var n,i,a,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:switch(this._mode){case f.QueueModes.LOCAL:return[3,1];case f.QueueModes.CAST:return[3,2]}return[3,4];case 1:return n=[],i=this.getCurrentItemId(),a=i,this._items.forEach((function(t,r){e.some((function(e){return e===t.itemId}))?t.itemId===a&&(a=o._items.length>r+1?o._items[r+1].itemId:void 0):n.push(t)})),this._items=n,i!==a&&(void 0!==a?this.jumpToItem(a):this._repeatMode!==u.RepeatMode.ALL&&this._repeatMode!==u.RepeatMode.ALL_AND_SHUFFLE||this.next()),[3,4];case 2:return[4,null===(t=this._cast)||void 0===t?void 0:t.removeItems(e)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},e.prototype.reorderItems=function(e){var t;return r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(e.length!==this._items.length)throw new Error("The count of provided item identifiers does not match the count of item identifiers in the queue.");switch(this._mode){case f.QueueModes.LOCAL:return[3,1];case f.QueueModes.CAST:return[3,2]}return[3,4];case 1:return n=Array(this._items.length),e.forEach((function(e,t){var r=i._items.find((function(t){return t.itemId===e}));if(void 0===r)throw new Error("Invalid item identifier.");n[t]=r})),this._items=n,[3,4];case 2:return[4,null===(t=this._cast)||void 0===t?void 0:t.reorderItems(e)];case 3:return r.sent(),[3,4];case 4:return[2]}}))}))},e.prototype.setRepeatMode=function(e){var t;this._repeatMode=e,this._mode===f.QueueModes.CAST&&(null===(t=this._cast)||void 0===t||t.setRepeatMode(e))},e.prototype.shuffle=function(){var e,t;return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:switch(this._mode){case f.QueueModes.LOCAL:return[3,1];case f.QueueModes.CAST:return[3,2]}return[3,4];case 1:return[2,(0,l.shuffleArray)(this._items)];case 2:return[4,null===(e=this._cast)||void 0===e?void 0:e.shuffle()];case 3:return[2,null!==(t=n.sent())&&void 0!==t?t:[]];case 4:return[2]}}))}))},e.prototype.updateItems=function(e){var t,n=this;e.forEach((function(e){var t=n._items.findIndex((function(t){return t.itemId===e.itemId}));t>=0&&(n._items[t]=e)})),this._mode===f.QueueModes.CAST&&(null===(t=this._cast)||void 0===t||t.updateItems(e))},e.prototype.bindEvents=function(){this._player.on(u.EventTypes.ENDED,this.handleItemEnded),this._player.on(u.EventTypes.LOAD_REQUEST,this.handleItemLoad),this._player.on(u.EventTypes.CAST_STATE_CHANGE,this.handleCastStateChange)},e.prototype.handleCastStateChange=function(e,t){var n=this;if(this.tryCreateCastExtension(),this._cast){var r=t.castState===u.CastStates.CONNECTED?f.QueueModes.CAST:f.QueueModes.LOCAL;if(this._mode!==r)switch(r){case f.QueueModes.LOCAL:this._mode=r,this._isCastInSync=!1;break;case f.QueueModes.CAST:this._cast.getIsCurrentSessionSupported()?(this._mode=r,this._isCastInSync=0===this._items.length,(0,a.default)((0,o.of)(this._cast.getItems()),this._cast.onItemsChanged).pipe((0,s.filter)((function(e){return e.length>0})),(0,s.take)(1)).subscribe((function(){n.sendLocalItemsToCast()}))):p.warn("Queueing is not supported by the cast receiver application!")}}},e.prototype.handleItemEnded=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return this._mode===f.QueueModes.LOCAL&&(p.debug("Media has ended."),this.next()),[2]}))}))},e.prototype.handleItemLoad=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:return e=t.mediaInfo,this._items.some((function(t){return t.itemId===e.itemId}))?[3,3]:(this._items=[e],this._cast?(this._isCastInSync=!1,[4,this._cast.refreshItems()]):[3,3]);case 1:return r.sent(),n=this._cast.getItems().map((function(e){return e.itemId})).filter((function(t){return t!==e.itemId})),[4,this._cast.removeItems(n)];case 2:r.sent(),this._isCastInSync=!0,r.label=3;case 3:return[2]}}))}))},e.prototype.sendLocalItemsToCast=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,i,a,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return this._cast?(e=this._cast.getCurrentItemId(),t=this._cast.getItems(),n=t.map((function(e){return e.itemId})),i=this.getItems().slice(),a=this.getCurrentItemIndex(),o=i.slice(0,a).filter((function(e){var t=e.itemId;return-1===n.indexOf(t)})),s=i.slice(a+1).filter((function(e){var t=e.itemId;return-1===n.indexOf(t)})),o.length>0?(p.debug("Transferring missing elements to cast session (before current item).",JSON.stringify(o)),[4,this._cast.insertItems(o,e)]):[3,2]):[3,5];case 1:r.sent(),r.label=2;case 2:return s.length>0?(p.debug("Transferring missing elements to cast session (after current item).",JSON.stringify(s)),[4,this._cast.insertItems(s)]):[3,4];case 3:r.sent(),r.label=4;case 4:this._isCastInSync=!0,r.label=5;case 5:return[2]}}))}))},e.prototype.tryCreateCastExtension=function(e){var t=this;void 0===e&&(e=this._player.getCastState()),void 0===this._cast&&(0,h.isCastAvailable)(e)&&(this._cast=new d.CastExtension(this._player,this._services),this._cast.onItemsChanged.subscribe((function(e){t._isCastInSync&&(t._items=e.slice())})))},e.prototype.unbindEvents=function(){this._player.off(u.EventTypes.ENDED,this.handleItemEnded),this._player.off(u.EventTypes.LOAD_REQUEST,this.handleItemLoad),this._player.off(u.EventTypes.CAST_STATE_CHANGE,this.handleCastStateChange)},e}();t.QueueManager=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CastExtension=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=n(8),u=n(171),l=n(10),c=n(16),d=n(530),f=n(178),h=n(180),p=new c.LoggerFileNameDecorator("CastExtension"),m=new l.Lazy((function(){return{currentItemId:-1,items:[],repeatMode:chrome.cast.media.RepeatMode.OFF,sessionState:cast.framework.SessionState.NO_SESSION}})),g=function(){function e(e,t){var n=this;this._subscriptions=[],(0,i.default)(this),this._player=e,this._services=t;var r=this.getCastContext();this._messageHandler=new d.CastExtensionMessageHandler(r),this._currentItemId=new a.BehaviorSubject(void 0),this._items=new a.BehaviorSubject([]),this._repeatMode=new a.BehaviorSubject(s.RepeatMode.OFF),this.listenForMediaStatusUpdates(),this._player.addCastLoadInterceptor((function(e,t){var r=n.getCurrentSession();if(r){var i=r.getSessionId();n._services.queueItemService.addPendingItemForCastSession(i,e.media.contentId,t.itemId)}return e}))}return Object.defineProperty(e.prototype,"onCurrentItemIdChanged",{get:function(){return this._currentItemId.pipe((0,o.skip)(1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onItemsChanged",{get:function(){return this._items.pipe((0,o.skip)(1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRepeatModeChanged",{get:function(){return this._repeatMode.pipe((0,o.skip)(1))},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._currentItemId.complete(),this._items.complete(),this._repeatMode.complete(),this._subscriptions.forEach((function(e){return e.unsubscribe()})),this._messageHandler.destroy()},e.prototype.getCurrentItemId=function(){return this._currentItemId.getValue()},e.prototype.getIsCurrentSessionSupported=function(){var e=this.getCurrentSession();return!!e&&-1!==e.getApplicationMetadata().namespaces.indexOf(f.CAST_MESSAGE_NAMESPACE)},e.prototype.getItems=function(){return this._items.getValue()},e.prototype.getRepeatMode=function(){return this._repeatMode.getValue()},e.prototype.insertItems=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,a,o,s,u,l=this;return r.__generator(this,(function(r){switch(r.label){case 0:return 0===e.length?[2]:(n=this.getCurrentSession())?(i=n.getMediaSession())?[3,2]:(p.debug("No media session on remote, loading first item."),(a=e.shift())?[4,this._player.load(a)]:[3,2]):[3,5];case 1:r.sent(),r.label=2;case 2:return(i=n.getMediaSession())?[4,this.serializeItems(e)]:[3,5];case 3:return 0===(o=r.sent()).length?[2]:(s=i.sessionId,o.forEach((function(e){var t=e.localItemId,n=e.queueItem;l._services.queueItemService.addPendingItemForCastSession(s,n.media.contentId,t)})),u=new chrome.cast.media.QueueInsertItemsRequest(o.map((function(e){return e.queueItem}))),"number"==typeof t&&(u.insertBefore=t),[4,new Promise((function(e,t){return null==i?void 0:i.queueInsertItems(u,e,t)}))]);case 4:r.sent(),this.refreshItems(),r.label=5;case 5:return[2]}}))}))},e.prototype.jumpToItem=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a;return r.__generator(this,(function(r){switch(r.label){case 0:return(t=this.getMediaSession())?(n=t.sessionId,void 0===(i=this._services.queueItemService.getCastItemId(n,e))?[3,2]:((a=new chrome.cast.media.QueueUpdateItemsRequest([])).currentItemId=i,[4,new Promise((function(e,n){return t.queueUpdateItems(a,e,n)}))])):[3,3];case 1:return r.sent(),[3,3];case 2:p.warn("The cast details for item '".concat(e,"' are unknown!")),r.label=3;case 3:return[2]}}))}))},e.prototype.next=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return(e=this.getMediaSession())?[4,new Promise((function(t,n){return e.queueNext(t,n)}))]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.refreshItems=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,i,a,o,s=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(!(e=this.getMediaSession()))return[3,6];r.label=1;case 1:return r.trys.push([1,4,,5]),t=e.sessionId,p.debug("Requesting item identifiers from remote..."),[4,this._messageHandler.getItemIds()];case 2:return n=r.sent(),this.getMediaSession()!==e?(p.debug("Media session changed. Aborting queue refresh..."),[2]):(p.debug("Requesting items from remote..."),[4,this._messageHandler.getItems(n)]);case 3:return i=r.sent(),a=i.filter((function(e){return e.media})).map((function(e){return(0,u.parseQueueItem)(e,t,s._services)})),this._items.next(a),[3,5];case 4:return o=r.sent(),p.warn("Failed to update queue.",o),[3,5];case 5:return[3,7];case 6:this._items.next([]),r.label=7;case 7:return[2]}}))}))},e.prototype.removeItems=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,o,s,u,l,c;return r.__generator(this,(function(d){switch(d.label){case 0:if(!(t=this.getMediaSession()))return[3,10];n=function(e){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return void 0===(n=i._services.queueItemService.getCastItemId(t.sessionId,e))?[3,2]:[4,new Promise((function(e){return t.queueRemoveItem(n,e,e)}))];case 1:r.sent(),r.label=2;case 2:return[2]}}))},i=this,d.label=1;case 1:d.trys.push([1,6,7,8]),a=r.__values(e),o=a.next(),d.label=2;case 2:return o.done?[3,5]:(s=o.value,[5,n(s)]);case 3:d.sent(),d.label=4;case 4:return o=a.next(),[3,2];case 5:return[3,8];case 6:return u=d.sent(),l={error:u},[3,8];case 7:try{o&&!o.done&&(c=a.return)&&c.call(a)}finally{if(l)throw l.error}return[7];case 8:return[4,this.refreshItems()];case 9:d.sent(),d.label=10;case 10:return[2]}}))}))},e.prototype.reorderItems=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:return(t=this.getMediaSession())?(n=t.sessionId,i=e.map((function(e){var t=o._services.queueItemService.getCastItemId(n,e);if(void 0===t)throw new Error("Invalid item identifier!");return t})),a=new chrome.cast.media.QueueReorderItemsRequest(i),[4,new Promise((function(e,n){t.queueReorderItems(a,e,n)}))]):[3,3];case 1:return r.sent(),[4,this.refreshItems()];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.setRepeatMode=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){return(t=this.getMediaSession())?[2,new Promise((function(n,r){t.queueSetRepeatMode((0,u.serializeRepeatMode)(e),n,r)}))]:[2]}))}))},e.prototype.shuffle=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=this.getItems().map((function(e){return e.itemId})),(0,l.shuffleArray)(e),[4,this.reorderItems(e)];case 1:return t.sent(),[2,this.getItems()]}}))}))},e.prototype.updateItems=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:return(t=this.getMediaSession())?[4,this.serializeItems(e)]:[3,3];case 1:return n=r.sent(),i=t.sessionId,n.forEach((function(e){var t=e.localItemId,n=e.queueItem,r=o._services.queueItemService.getCastItemId(i,t);if(void 0===r)throw new Error("The provided item cannot be updated, as it does not exist on the cast session.");n.itemId=r})),a=new chrome.cast.media.QueueUpdateItemsRequest(n.map((function(e){return e.queueItem}))),[4,new Promise((function(e,n){return t.queueUpdateItems(a,e,n)}))];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.createMediaSessionUpdateEvent=function(){var e=this.getCastContext();return(0,a.merge)((0,a.of)({session:e.getCurrentSession(),sessionState:e.getSessionState()}),(0,a.fromEventPattern)((function(t){return e.addEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,t)}),(function(t){return e.removeEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,t)}))).pipe((0,o.switchMap)((function(e){var t=e.session,n=e.sessionState;return t&&n!==cast.framework.SessionState.SESSION_ENDED?(0,a.merge)((0,a.of)(t.getMediaSession()),(0,a.fromEventPattern)((function(e){return t.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,e)}),(function(e){return t.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,e)})).pipe((0,o.map)((function(e){return e.mediaSession})))).pipe((0,o.map)((function(e){return{mediaSession:e,sessionState:n}}))):(0,a.of)({mediaSession:null,sessionState:n})})),(0,o.switchMap)((function(e){if(null==e?void 0:e.mediaSession){var t=e.mediaSession;return(0,a.merge)((0,a.of)(e),(0,a.fromEventPattern)((function(e){return t.addUpdateListener(e)}),(function(e){return t.removeUpdateListener(e)})).pipe((0,o.map)((function(){return e}))))}return(0,a.of)(e)})),(0,o.filter)((function(e){var t;return(null===(t=null==e?void 0:e.mediaSession)||void 0===t?void 0:t.idleReason)!==chrome.cast.media.IdleReason.INTERRUPTED})),(0,o.map)((function(e){var t,n,r,i=e.mediaSession,a=e.sessionState;return{currentItemId:null!==(t=null==i?void 0:i.currentItemId)&&void 0!==t?t:m.value.currentItemId,items:null!==(n=null==i?void 0:i.items)&&void 0!==n?n:m.value.items,repeatMode:null!==(r=null==i?void 0:i.repeatMode)&&void 0!==r?r:m.value.repeatMode,sessionState:a}})),(0,o.distinctUntilChanged)((function(e,t){return e.currentItemId===t.currentItemId&&(0,l.isSequenceEqual)(e.items,t.items,h.compareQueueItems)&&e.repeatMode===t.repeatMode&&e.sessionState===t.sessionState})))},e.prototype.getCastContext=function(){return cast.framework.CastContext.getInstance()},e.prototype.getCurrentSession=function(){var e;return null!==(e=this.getCastContext().getCurrentSession())&&void 0!==e?e:void 0},e.prototype.getMediaSession=function(){var e,t;return null!==(t=null===(e=this.getCurrentSession())||void 0===e?void 0:e.getMediaSession())&&void 0!==t?t:void 0},e.prototype.listenForMediaStatusUpdates=function(){var e=this,t=this.createMediaSessionUpdateEvent().pipe((0,o.startWith)(m.value),(0,o.pairwise)()).subscribe((function(t){var n=r.__read(t,2),i=n[0],a=n[1];if(a.sessionState===cast.framework.SessionState.SESSION_ENDED)e._currentItemId.next(void 0),e._items.next([]),e._repeatMode.next(s.RepeatMode.OFF);else{var o=function(){var t=a.currentItemId,n=e.getCurrentSession();if(-1===t)e._currentItemId.next(void 0);else if(n){var r=n.getSessionId(),i=e._services.queueItemService.getItemIdByCastItemId(r,t);e._currentItemId.next(i)}};i.currentItemId!==a.currentItemId&&(p.debug("Remote currentItemId changed.",a.currentItemId),o()),(0,l.isSequenceEqual)(i.items,a.items,h.compareQueueItems)||(p.debug("Remote items in media status changed. Updating local items."),e.refreshItems().then((function(){o()}))),i.repeatMode!==a.repeatMode&&(p.debug("Remote repeatMode changed.",a.repeatMode),e._repeatMode.next((0,u.parseRepeatMode)(a.repeatMode)))}}));this._subscriptions.push(t)},e.prototype.serializeItems=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return t=e.map((function(e){return r.__awaiter(n,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return t={localItemId:e.itemId},[4,(0,u.serializeQueueItem)(e,this._services.sourceManager)];case 1:return[2,(t.queueItem=n.sent(),t)]}}))}))})),[4,Promise.all(t.map((function(e){return(0,l.reflectPromise)(e)})))];case 1:return[2,i.sent().filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value}))]}}))}))},e}();t.CastExtension=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareAudioTrackChangeEvents=void 0;var r=n(99),i=n(60);t.compareAudioTrackChangeEvents=function(e,t){return(0,r.isEqual)(e.currentAudioTrack,t.currentAudioTrack)&&(0,i.isSequenceEqual)(e.audioTracks,t.audioTracks,r.isEqual)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareBreaksChangeEvents=void 0;var r=n(99),i=n(60);t.compareBreaksChangeEvents=function(e,t){return!!e.breaks&&!!t.breaks&&(0,i.isSequenceEqual)(e.breaks,t.breaks,r.isEqual)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareIsPlayingBreakChangeEvents=void 0,t.compareIsPlayingBreakChangeEvents=function(e,t){return e.isPlayingBreak===t.isPlayingBreak}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareTextTrackChangeEvents=void 0;var r=n(99),i=n(60);t.compareTextTrackChangeEvents=function(e,t){return(0,r.isEqual)(e.currentTextTrack,t.currentTextTrack)&&(0,i.isSequenceEqual)(e.textTracks,t.textTracks,r.isEqual)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCastState=void 0;var r=n(8);t.parseCastState=function(e){switch(e){case cast.framework.CastState.NO_DEVICES_AVAILABLE:return r.CastStates.NO_DEVICES_AVAILABLE;case cast.framework.CastState.NOT_CONNECTED:return r.CastStates.NOT_CONNECTED;case cast.framework.CastState.CONNECTING:return r.CastStates.CONNECTING;case cast.framework.CastState.CONNECTED:return r.CastStates.CONNECTED}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseQueueItem=void 0;var r=n(8),i=n(10),a=n(172),o=n(173),s=n(174);t.parseQueueItem=function(e,t,n){var u=n.queueItemService,l={autoPlay:e.autoplay?r.AutoPlayOptions.YES:r.AutoPlayOptions.NO,itemId:u.addOrGetItemIdByCastDetails(t,e.itemId,e.media.contentId),metadata:(0,o.parseMetadata)(e.media.metadata),source:(0,a.parseMediaInfo)(e.media),startFrom:e.startTime,textTracks:e.media.tracks.filter((function(e){return e.type===chrome.cast.media.TrackType.TEXT})).map(s.parseTextTrack)};return e.customData&&(0,i.hasKeyOfType)(e.customData,"startDate","number")&&(l.startFrom=new Date(1e3*e.customData.startDate)),(0,i.hasKeyOfType)(e.media.customData,"initialAudioTrack","object")&&(l.initialAudioTrack=e.media.customData.initialAudioTrack),(0,i.hasKeyOfType)(e.media.customData,"initialTextTrack","object")&&(l.initialTextTrack=e.media.customData.initialTextTrack),l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseRepeatMode=void 0;var r=n(8);t.parseRepeatMode=function(e){switch(e){case chrome.cast.media.RepeatMode.ALL:return r.RepeatMode.ALL;case chrome.cast.media.RepeatMode.ALL_AND_SHUFFLE:return r.RepeatMode.ALL_AND_SHUFFLE;case chrome.cast.media.RepeatMode.SINGLE:return r.RepeatMode.SINGLE;case chrome.cast.media.RepeatMode.OFF:return r.RepeatMode.OFF}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeLoadRequest=void 0;var r=n(0),i=n(131),a=n(132);t.serializeLoadRequest=function(e,t,n){return r.__awaiter(void 0,void 0,void 0,(function(){var o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,(0,a.serializeMediaInfo)(e,t,n)];case 1:return o=r.sent(),s=new chrome.cast.media.LoadRequest(o),(0,i.configureLoadRequest)(s,e),[2,s]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeQueueItem=void 0;var r=n(0),i=n(8),a=n(131),o=n(132);t.serializeQueueItem=function(e,t){return r.__awaiter(void 0,void 0,void 0,(function(){var n,s;return r.__generator(this,(function(r){switch(r.label){case 0:if(e.source.sourceType===i.SourceTypes.DYNAMIC)throw new Error("Dynamic sources are deprecated and cannot be used with queuing! Use resolvable sources instead.");return[4,(0,o.serializeMediaInfo)(e,t,{fromGetRequest:!1,fromHeadRequest:!1})];case 1:return n=r.sent(),s=new chrome.cast.media.QueueItem(n),(0,a.configureLoadRequest)(s,e),[2,s]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeRepeatMode=void 0;var r=n(8);t.serializeRepeatMode=function(e){switch(e){case r.RepeatMode.ALL:return chrome.cast.media.RepeatMode.ALL;case r.RepeatMode.ALL_AND_SHUFFLE:return chrome.cast.media.RepeatMode.ALL_AND_SHUFFLE;case r.RepeatMode.SINGLE:return chrome.cast.media.RepeatMode.SINGLE;case r.RepeatMode.OFF:return chrome.cast.media.RepeatMode.OFF}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeTextTrackKinds=void 0;var r=n(8);t.serializeTextTrackKinds=function(e){switch(e){case r.TextTrackKinds.CAPTIONS:return chrome.cast.media.TextTrackType.CAPTIONS;case r.TextTrackKinds.CHAPTERS:return chrome.cast.media.TextTrackType.CHAPTERS;case r.TextTrackKinds.DESCRIPTIONS:return chrome.cast.media.TextTrackType.DESCRIPTIONS;case r.TextTrackKinds.METADATA:return chrome.cast.media.TextTrackType.METADATA;default:case r.TextTrackKinds.SUBTITLES:return chrome.cast.media.TextTrackType.SUBTITLES}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CastExtensionMessageHandler=void 0;var r=n(0),i=n(12),a=n(15),o=n(10),s=n(178),u=n(179),l=0,c=function(){function e(e){this._castContext=e,this._destroyingSource=new i.Subject;var t=new i.Subject;this.multicastMessages(t),this._onMessageReceived=t.asObservable(),this._destroyingSource.subscribe((function(){t.complete()}))}return e.prototype.destroy=function(){this._destroyingSource.next(),this._destroyingSource.complete()},e.prototype.getItemIds=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.request({type:u.RemoteQueueMessageTypes.QUEUE_GET_ITEM_IDS})];case 1:if((e=t.sent()).type===u.RemoteQueueMessageTypes.QUEUE_ITEM_IDS&&(0,o.hasKey)(e,"itemIds")&&Array.isArray(e.itemIds))return[2,e.itemIds];throw new Error("Invalid response message!")}}))}))},e.prototype.getItems=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a;return r.__generator(this,(function(s){switch(s.label){case 0:t=[],n=0,s.label=1;case 1:return n<e.length?(i=e.slice(n,n+20),[4,this.request({type:u.RemoteQueueMessageTypes.QUEUE_GET_ITEMS,itemIds:i})]):[3,4];case 2:if((a=s.sent()).type!==u.RemoteQueueMessageTypes.QUEUE_ITEMS||!(0,o.hasKey)(a,"items")||!Array.isArray(a.items))throw new Error("Invalid response message!");t.push.apply(t,r.__spreadArray([],r.__read(a.items),!1)),s.label=3;case 3:return n+=20,[3,1];case 4:return[2,t]}}))}))},e.prototype.multicastMessages=function(e){var t=this,n=(0,i.merge)((0,i.of)({session:this._castContext.getCurrentSession(),sessionState:this._castContext.getSessionState()}),(0,i.fromEventPattern)((function(e){return t._castContext.addEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,e)}),(function(e){return t._castContext.removeEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,e)}))).pipe((0,a.switchMap)((function(e){var t=e.session,n=e.sessionState;return t&&n!==cast.framework.SessionState.SESSION_ENDED?(0,i.fromEventPattern)((function(e){return t.addMessageListener(s.CAST_MESSAGE_NAMESPACE,e)}),(function(e){return t.removeMessageListener(s.CAST_MESSAGE_NAMESPACE,e)})):i.NEVER})),(0,a.map)((function(e){var t=r.__read(e,2),n=(t[0],t[1]);return JSON.parse(n)})));(0,a.multicast)(e)(n).connect()},e.prototype.request=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,this.sendMessage(e)];case 1:if(-1!==(t=n.sent()))return[2,this._onMessageReceived.pipe((0,a.takeUntil)(this._destroyingSource),(0,a.filter)((function(e){return(0,o.hasKeyOfType)(e,"requestId","number")&&e.requestId===t})),(0,a.first)(),(0,a.timeout)(1e4),(0,a.catchError)((function(){throw new Error("".concat(e.type," request has timed out."))}))).toPromise()];throw new Error("Failed to send message!")}}))}))},e.prototype.sendMessage=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a;return r.__generator(this,(function(o){switch(o.label){case 0:return t=this._castContext.getCurrentSession(),n=null==t?void 0:t.getMediaSession(),t&&n?(i=n.mediaSessionId,a=l++,[4,t.sendMessage(s.CAST_MESSAGE_NAMESPACE,r.__assign(r.__assign({},e),{mediaSessionId:i,requestId:a}))]):[3,2];case 1:return o.sent(),[2,a];case 2:return[2,-1]}}))}))},e}();t.CastExtensionMessageHandler=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CAST_MESSAGE_NAMESPACE=void 0,t.CAST_MESSAGE_NAMESPACE="urn:x-cast:com.doris.cast.queue"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.QueueModes=void 0,(r=t.QueueModes||(t.QueueModes={})).LOCAL="LOCAL",r.CAST="CAST"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteQueueMessageTypes=void 0,(r=t.RemoteQueueMessageTypes||(t.RemoteQueueMessageTypes={})).QUEUE_ITEM_IDS="QUEUE_ITEM_IDS",r.QUEUE_GET_ITEM_IDS="QUEUE_GET_ITEM_IDS",r.QUEUE_GET_ITEMS="QUEUE_GET_ITEMS",r.QUEUE_ITEMS="QUEUE_ITEMS"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareQueueItems=void 0,t.compareQueueItems=function(e,t){var n,r;return e.itemId===t.itemId&&(null===(n=e.media)||void 0===n?void 0:n.contentId)===(null===(r=t.media)||void 0===r?void 0:r.contentId)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCastAvailable=void 0;var r=n(8);t.isCastAvailable=function(e){return e!==r.CastStates.DISABLED&&e!==r.CastStates.INITIALIZING&&e!==r.CastStates.NOT_SUPPORTED}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceManager=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(40),o=n(8),s=n(100),u=n(10),l=new(n(16).LoggerFileNameDecorator)("SourceManager"),c=function(){function e(e){(0,i.default)(this),this._contentTypeDetectionOptions=e.contentTypeDetectionOptions,this._sourceExpiryThreshold=e.sourceExpiryThreshold,this._sourceResolvers=new Map}return e.prototype.addSourceResolver=function(e,t){this._sourceResolvers.has(e)&&l.warn("Overriding source resolver for '".concat(e,"' resolution type.")),this._sourceResolvers.set(e,t)},e.prototype.canResolve=function(e){return this._sourceResolvers.has(e)},e.prototype.getContentType=function(e,t){var n;return void 0===t&&(t={}),r.__awaiter(this,void 0,void 0,(function(){var i,o,s;return r.__generator(this,(function(c){switch(c.label){case 0:return i=r.__assign(r.__assign({},this._contentTypeDetectionOptions),t),(o=null!==(n=e.contentType)&&void 0!==n?n:e.type)?[2,o]:[3,1];case 1:if(!(i.fromExtension||i.fromGetRequest||i.fromHeadRequest))return[3,7];c.label=2;case 2:return c.trys.push([2,5,,6]),[4,this.getUrl(e).catch((function(e){var t=(0,u.errorToString)(e);throw l.error("Defaulting content type to '".concat(a.DEFAULT_CONTENT_TYPE,"'. ").concat(t)),e}))];case 3:return s=c.sent(),[4,(0,u.getContentType)(s,i).catch((function(e){var t=(0,u.errorToString)(e),n=" Reason: ".concat(t);throw l.error(n),e}))];case 4:return[2,c.sent()];case 5:return c.sent(),[2,a.DEFAULT_CONTENT_TYPE];case 6:return[3,8];case 7:return l.error("Source type has not been provided and content type detection is disabled! Defaulting content type to '".concat(a.DEFAULT_CONTENT_TYPE,"'.")),[2,a.DEFAULT_CONTENT_TYPE];case 8:return[2]}}))}))},e.prototype.getId=function(e){var t;return e.sourceType===o.SourceTypes.DYNAMIC||e.sourceType===o.SourceTypes.RESOLVABLE?e.id:null!==(t=e.id)&&void 0!==t?t:e.url},e.prototype.getUrl=function(e,t,n){return void 0===n&&(n=!0),r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.resolveSource(e,t,n)];case 1:return[2,r.sent().url]}}))}))},e.prototype.resolveSource=function(e,t,n){return void 0===n&&(n=!0),r.__awaiter(this,void 0,void 0,(function(){var i,a,l,c,d,f,h,p,m,g;return r.__generator(this,(function(r){switch(r.label){case 0:switch(void 0===t&&(t=this._sourceExpiryThreshold),e.sourceType){case void 0:case o.SourceTypes.STATIC:return[3,1];case o.SourceTypes.DYNAMIC:return[3,2];case o.SourceTypes.RESOLVABLE:return[3,5]}return[3,11];case 1:return[2,{drm:e.drm,expiry:1/0,url:e.url}];case 2:return i=e.currentUrl,a=e.getUrl,d=e.id,!i||this.isSourceExpired(i,t)?[3,3]:[2,i];case 3:return g={expiry:Date.now()},[4,a(d)];case 4:return[2,(g.url=r.sent(),g)];case 5:if(l=e.current,c=e.customData,d=e.id,f=e.resolutionType,l&&!this.isSourceExpired(l,t))return[2,l];if(!(h=this._sourceResolvers.get(f)))return[3,10];r.label=6;case 6:return r.trys.push([6,8,,9]),[4,h(d,c)];case 7:return p=r.sent(),n&&(e.current=p),[2,p];case 8:throw m=r.sent(),new s.SourceError((0,u.errorToString)(m));case 9:return[3,11];case 10:throw new s.SourceError("No source resolver available.");case 11:return[2]}}))}))},e.prototype.isSourceExpired=function(e,t){return e.expiry-Date.now()<t},e}();t.SourceManager=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadInterruptedError=void 0;var r=n(0),i=function(e){function t(t){return e.call(this,"LoadInterruptedError",t||"The load() request was interrupted by a call to destroy().")||this}return r.__extends(t,e),t}(n(133).PlayerError);t.LoadInterruptedError=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceError=void 0;var r=n(0),i=function(e){function t(t){return e.call(this,"SourceError",["Failed to resolve source.",t].join(" "))||this}return r.__extends(t,e),t}(n(133).PlayerError);t.SourceError=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stats=void 0;var r=n(0),i=r.__importDefault(n(9)),a=r.__importDefault(n(101)),o=n(12),s=n(15),u=n(10),l=n(543),c=function(){function e(e){var t;(0,i.default)(this),this._config=e,t=r.__read(this.createEl(e),2),this._el=t[0],this._dragButton=t[1],this._isEnabledChangeSource=new o.BehaviorSubject(!1),this._onIsEnabledChanged=this._isEnabledChangeSource.pipe((0,s.distinctUntilChanged)(),(0,s.skip)(1)),this._metrics=this.createMetrics(this._el),this._position=[0,0],this._statsCollector=new l.StatsCollector(e),document.addEventListener("keydown",this.handleKeyDown),this.bufferMetricData(e.bufferSize),"ON"===a.default.getItem(this._config.localStorageKey)&&this.show()}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabledChangeSource.getValue()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onIsEnabledChanged",{get:function(){return this._onIsEnabledChanged},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){document.removeEventListener("keydown",this.handleKeyDown),this._isEnabledChangeSource.next(!1),this._isEnabledChangeSource.complete(),this._statsCollector.destroy(),(0,u.removeElement)(this._el)},e.prototype.hide=function(){this._el.style.display="none",this._statsCollector.isEnabled=!1,this._isEnabledChangeSource.next(!1),a.default.setItem(this._config.localStorageKey,"OFF")},e.prototype.setSourceHandler=function(e){this._statsCollector.setSourceHandler(e)},e.prototype.show=function(){this._el.style.display="block",this._statsCollector.isEnabled=!0,this._isEnabledChangeSource.next(!0),a.default.setItem(this._config.localStorageKey,"ON")},e.prototype.bufferMetricData=function(e){var t=this,n=Array(e).fill({});return this._isEnabledChangeSource.pipe((0,s.switchMap)((function(e){return e?t._statsCollector.onDataCollected.pipe((0,s.scan)((function(e,t){return e.slice(1).concat(t)}),n)):o.NEVER}))).subscribe(this.handleDataCollected)},e.prototype.createEl=function(e){var t=this,n=e.parentNode,r=document.createElement("div");r.style.display="none",r.style.top="16px",r.style.left="16px",r.style.minWidth="550px",r.style.maxWidth="650px",r.style.minHeight="54px",r.style.zIndex="10000",r.style.fontSize="14px",r.style.color="#ffffff",r.style.position="absolute",r.style.padding="4px",r.style.borderRadius="2px",r.style.backgroundColor="rgba(0,0,0,0.7)",this.isLowPowerDevice()||((0,u.hasKeyOfType)(r.style,"backdropFilter","string")?(r.style.backgroundColor="rgba(0,0,0,0.5)",r.style.backdropFilter="blur(5px)"):(0,u.hasKeyOfType)(r.style,"webkitBackdropFilter","string")&&(r.style.backgroundColor="rgba(0,0,0,0.5)",r.style.webkitBackdropFilter="blur(5px)"));var i=function(){var e=document.createElement("div");return e.style.zIndex="1",e.style.position="absolute",e.style.left="8px",e.style.cursor="pointer",e.style.height="24px",e.style.width="24px",e},a=i();a.style.background='url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path fill="white" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')',a.addEventListener("click",(function(){return t.hide()})),r.appendChild(a);var o=i();return o.style.top="32px",o.style.cursor="grab",o.style.background='url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path fill="white" d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>\')',o.addEventListener("mousedown",this.handleDragMouseDown),r.appendChild(o),n.appendChild(r),[r,o]},e.prototype.createMetrics=function(e){return this._config.metrics.map((function(t){return t(e)}))},e.prototype.handleDataCollected=function(e){this._metrics.forEach((function(t){var n=t.component,r=t.isEnabled,i=t.resultSelector,a=e[e.length-1];if(r(e,a)){n.visible=!0;var o=i(e,a);n.update(o)}else n.visible=!1}))},e.prototype.handleDragMouseDown=function(e){e.preventDefault(),this._dragButton.style.cursor="grabbing",document.addEventListener("mousemove",this.handleDragMouseMove),document.addEventListener("mouseup",this.handleDragMouseUp)},e.prototype.handleDragMouseMove=function(e){e.preventDefault();var t=e.movementX,n=e.movementY,i=r.__read(this._position,2),a=i[0]+t,o=i[1]+n;this._position=[a,o],this._el.style.transform="translateX(".concat(a,"px) translateY(").concat(o,"px)")},e.prototype.handleDragMouseUp=function(){this._dragButton.style.cursor="grab",document.removeEventListener("mousemove",this.handleDragMouseMove),document.removeEventListener("mouseup",this.handleDragMouseUp)},e.prototype.handleKeyDown=function(e){(0,u.isShortcutPressed)(e,this._config.shortcut)&&(this.isEnabled?this.hide():this.show())},e.prototype.isLowPowerDevice=function(){return-1!==navigator.userAgent.indexOf("CrKey")},e}();t.Stats=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage",t=String(e).replace(/storage$/i,"").toLowerCase();if("local"===t)return a("localStorage");if("session"===t)return a("sessionStorage");if("cookie"===t)return(0,r.hasCookies)();if("memory"===t)return!0;throw new Error("Storage method `"+e+"` is not available.\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.")};var r=n(183),i="__test";function a(e){try{var t=window[e];return t.setItem(i,"1"),t.removeItem(i),!0}catch(e){return!1}}},function(e,t,n){"use strict";t.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},i=t||{},o=e.split(a),u=i.decode||r,l=0;l<o.length;l++){var c=o[l],d=c.indexOf("=");if(!(d<0)){var f=c.substr(0,d).trim(),h=c.substr(++d,c.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),null==n[f]&&(n[f]=s(h,u))}}return n},t.serialize=function(e,t,n){var r=n||{},a=r.encode||i;if("function"!=typeof a)throw new TypeError("option encode is invalid");if(!o.test(e))throw new TypeError("argument name is invalid");var s=a(t);if(s&&!o.test(s))throw new TypeError("argument val is invalid");var u=e+"="+s;if(null!=r.maxAge){var l=r.maxAge-0;if(isNaN(l))throw new Error("maxAge should be a Number");u+="; Max-Age="+Math.floor(l)}if(r.domain){if(!o.test(r.domain))throw new TypeError("option domain is invalid");u+="; Domain="+r.domain}if(r.path){if(!o.test(r.path))throw new TypeError("option path is invalid");u+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+r.expires.toUTCString()}r.httpOnly&&(u+="; HttpOnly");r.secure&&(u+="; Secure");if(r.sameSite){switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return u};var r=decodeURIComponent,i=encodeURIComponent,a=/; */,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function s(e,t){try{return t(e)}catch(t){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return r(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:null}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatsCollector=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=n(10),u=new(n(16).LoggerFileNameDecorator)("StatsCollector"),l=function(){function e(e){var t=this;(0,i.default)(this),this._config=e,this._enabled=new a.BehaviorSubject(!1),this._player=e.player,this._sourceHandlerChange=new a.BehaviorSubject(this._config.sourceHandler),this._onDataCollected=this._enabled.pipe((0,o.distinctUntilChanged)(),(0,o.switchMap)((function(e){return e?(0,a.timer)(0,t._config.pollingInterval):a.NEVER})),(0,o.withLatestFrom)(this._sourceHandlerChange),(0,o.map)((function(e){var n=r.__read(e,2),i=(n[0],n[1]);return t.collectData(i,t._config.inputs)})),(0,o.share)())}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._enabled.getValue()},set:function(e){this._enabled.next(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataCollected",{get:function(){return this._onDataCollected},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._enabled.complete()},e.prototype.setSourceHandler=function(e){this._sourceHandlerChange.next(e)},e.prototype.collectData=function(e,t){var n=this;return t.reduce((function(t,i){try{var a=i(n._player,e),o=r.__assign(r.__assign({},t),a);return(t.customData||(null==a?void 0:a.customData))&&(o.customData=r.__assign(r.__assign({},t.customData),null==a?void 0:a.customData)),o}catch(e){return u.error("Failed to collect stats data. ".concat((0,s.errorToString)(e))),t}}),{})},e}();t.StatsCollector=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrackListController=void 0;var r=n(0),i=n(12),a=n(15),o=n(10),s=function(){function e(e){this._parsedTracks=[],this._subscriptions=[],this._tracks=[],this._config=e,this._onChangeSource=new i.Subject,this._parsedTracksChange=new i.Subject,this._trackListChangeSource=new i.Subject,this._changeTrack=this._config.trackListSource.pipe((0,o.switchMapDefined)(e.currentTrackChangedEventCreator)),this._config.trackListSource.subscribe(),this._subscriptions.push(this.syncTrackListChanges(),this.monitorTrackChanges(),this.emitChangeEvents())}return Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChangeSource.asObservable()},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._subscriptions.forEach((function(e){return e.unsubscribe()})),this._onChangeSource.complete(),this._parsedTracksChange.complete(),this._trackListChangeSource.complete()},e.prototype.getCurrentTrack=function(){return this._currentTrack},e.prototype.getTracks=function(){return this._tracks},e.prototype.setCurrentTrack=function(e){var t,n,i=this._trackList;if(i){var a=this._config,o=a.activateTrack,s=a.deactivateTrack,u=a.isParsedTrackEqual,l=a.isTrackActive;try{for(var c=r.__values(this._parsedTracks),d=c.next();!d.done;d=c.next()){var f=r.__read(d.value,2),h=f[0],p=f[1],m=l(h,i),g=Boolean(e&&u(p,e));!m&&g?o(h,i):m&&!g&&(null==s||s(h,i))}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}}},e.prototype.emitChangeEvents=function(){var e=this;return(0,i.combineLatest)(this._parsedTracksChange,this._changeTrack.pipe((0,a.startWith)(void 0))).pipe((0,a.map)((function(t){var n=r.__read(t,1)[0];return{currentTrack:n.filter((function(t){var n=r.__read(t,2),i=n[0];return n[1],e._config.isTrackActive(i,e._trackList)})).map((function(e){var t=r.__read(e,2);return t[0],t[1]}))[0],tracks:n.map((function(e){var t=r.__read(e,2);return t[0],t[1]}))}})),(0,a.distinctUntilChanged)((function(e,t){return e.currentTrack===t.currentTrack&&(0,o.isSequenceEqual)(e.tracks,t.tracks)}))).subscribe((function(t){e._currentTrack=t.currentTrack,e._tracks=t.tracks,e._onChangeSource.next(t)}))},e.prototype.monitorTrackChanges=function(){var e=this,t=this._config.tracksChangedEventCreator;return this._trackListChangeSource.pipe((0,a.switchMap)((function(e){return e?(0,i.merge)((0,i.defer)((function(){return(0,i.of)(Array.from(e))})),t(e).pipe((0,a.map)((function(){return Array.from(e)})))):(0,i.of)([])})),(0,a.map)((function(t){return e._config.filterRawTrack?t.filter(e._config.filterRawTrack):t})),(0,a.distinctUntilChanged)((function(e,t){return(0,o.isSequenceEqual)(e,t)})),(0,a.map)((function(t){return t.map((function(t){return[t,e._config.parseTrack(t)]}))}))).subscribe((function(t){e._parsedTracks=t,e._parsedTracksChange.next(t)}))},e.prototype.syncTrackListChanges=function(){var e=this;return this._config.trackListSource.subscribe((function(t){e._trackList=t,e._trackListChangeSource.next(t)}))},e}();t.TrackListController=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomTextTrack=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(546),s=n(43),u=n(552),l=new s.LoggerFileNameDecorator("CustomTextTrack"),c=function(){function e(e,t,n){var r=this;this.inBandMetadataTrackDispatchType="",this.oncuechange=null,this._activeCues=new u.CustomTextTrackCueList,this._cues=new u.CustomTextTrackCueList,this._id="custom-text-track",this._mode="disabled",this._subscriptions=[],this.handleCueChange=function(e){var t;null===(t=r.oncuechange)||void 0===t||t.call(r,e),r._eventListeners.cuechange.forEach((function(t){return t.call(r,e)}))},(0,i.default)(this),this.installPolyfills(),this._kind=this.sanitizeTextTrackKind(e.kind),this._label=e.label,this._language=e.lang,this._src=e.src,this._video=t,this._callbacks=n,this._eventListeners={cuechange:new Set},this._cueChangeSource=new a.Subject,this._subscriptions.push(this._cueChangeSource.subscribe(this.handleCueChange))}return Object.defineProperty(e.prototype,"activeCues",{get:function(){return this._activeCues},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cues",{get:function(){return this._cues},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"kind",{get:function(){return this._kind},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this._language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(e){"disabled"===this._mode&&"disabled"!==e?(this._video.addEventListener("timeupdate",this.updateActiveCues),this.load()):"disabled"===e&&"disabled"!==this._mode&&(this._video.removeEventListener("timeupdate",this.updateActiveCues),this._cues.clear(),this.updateActiveCues()),this._mode!==e&&(l.debug("Setting '".concat(this.label,"' (").concat(this.language,") mode to '").concat(e,"'")),this._callbacks.onModeChanged(e),this._mode=e)},enumerable:!1,configurable:!0}),e.prototype.addCue=function(e){this._cues.addCue(e)},e.prototype.addEventListener=function(e,t,n){this._eventListeners[e].add(t)},e.prototype.destroy=function(){this._subscriptions.forEach((function(e){return e.unsubscribe()})),this._cueChangeSource.complete()},e.prototype.dispatchEvent=function(e){switch(e.type){case"cuechange":this._cueChangeSource.next(e)}return!0},e.prototype.removeCue=function(e){this._cues.removeCue(e)},e.prototype.removeEventListener=function(e,t,n){this._eventListeners[e].delete(t)},e.prototype.installPolyfills=function(){window.VTTCue||(l.info("Installing VTTCue polyfill..."),window.VTTCue=o.VTTCue),window.VTTRegion||(l.info("Installing VTTRegion polyfill..."),window.VTTRegion=o.VTTRegion)},e.prototype.load=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return l.info("Fetching subtitles at: '".concat(this._src,"'")),[4,fetch(this._src)];case 1:return[4,r.sent().text()];case 2:return e=r.sent(),(t=new o.WebVTT.Parser(window,o.WebVTT.StringDecoder())).oncue=function(e){n._cues.addCue(e)},t.parse(e),t.flush(),[2]}}))}))},e.prototype.sanitizeTextTrackKind=function(e){switch(e){case"subtitles":case"captions":case"descriptions":case"chapters":case"metadata":return e;default:return"subtitles"}},e.prototype.updateActiveCues=function(){var e,t,n,i,a=this._video.currentTime,o=Array.from(this._activeCues),s=!1;function u(e){return e.startTime<=a&&a<=e.endTime}try{for(var l=r.__values(o),c=l.next();!c.done;c=l.next())u(h=c.value)&&-1!==this._cues.indexOf(h)||(this._activeCues.removeCue(h),s=!0)}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}try{for(var d=r.__values(this._cues),f=d.next();!f.done;f=d.next()){var h;u(h=f.value)&&-1===this._activeCues.indexOf(h)&&(this._activeCues.addCue(h),s=!0)}}catch(e){n={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}s&&this.dispatchEvent(new Event("cuechange",{bubbles:!1,cancelable:!1,composed:!1}))},e}();t.CustomTextTrack=c},function(e,t,n){e.exports={WebVTT:n(547).WebVTT,VTTCue:n(548).VTTCue,VTTRegion:n(550).VTTRegion}},function(e,t){!function(e){function t(e,t){return void 0===t&&(t=1),"rgba("+[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16),t].join(",")+")"}var n=1;function r(e,r,a){switch(a){case"webvtt.font.color":case"webvtt.font.opacity":var o=Services.prefs.getCharPref("webvtt.font.color"),s=Services.prefs.getIntPref("webvtt.font.opacity")/100;i.fontSet=t(o,s);break;case"webvtt.font.scale":n=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":var u=Services.prefs.getCharPref("webvtt.bg.color"),l=Services.prefs.getIntPref("webvtt.bg.opacity")/100;i.backgroundSet=t(u,l);break;case"webvtt.edge.color":case"webvtt.edge.type":var c=Services.prefs.getIntPref("webvtt.edge.type"),d=Services.prefs.getCharPref("webvtt.edge.color");i.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][c]+t(d)}}if("undefined"!=typeof Services){var i={};["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach((function(e){r(0,0,e),Services.prefs.addObserver(e,r,!1)}))}var a=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function o(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function s(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function u(){this.values=a(null)}function l(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);if(2===o.length)t(o[0],o[1])}}function c(e,t,n){var r=e;function i(){var t=s(e);if(null===t)throw new o(o.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=i(),a(),"--\x3e"!==e.substr(0,3))throw new o(o.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),a(),t.endTime=i(),a(),function(e,t){var r=new u;l(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];r.integer(e,o),r.percent(e,o)&&r.set("snapToLines",!1),r.alt(e,o,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start","middle","end"]);break;case"position":a=t.split(","),r.percent(e,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start","middle","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","middle","end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical",""),t.line=r.get("line","auto"),t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align","middle"),t.position=r.get("position","auto"),t.positionAlign=r.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}(e,t)}o.prototype=a(Error.prototype),o.prototype.constructor=o,o.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},u.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var d={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},f={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={v:"title",lang:"lang"},p={rt:"ruby"};function m(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]+>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function r(e){return d[e]}function i(e){for(;y=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(y[0],r);return e}function a(e,t){return!p[t.localName]||p[t.localName]===e.localName}function o(t,n){var r=f[t];if(!r)return null;var i=e.document.createElement(r);i.localName=r;var a=h[t];return a&&n&&(i[a]=n.trim()),i}for(var u,l=e.document.createElement("div"),c=l,m=[];null!==(u=n());)if("<"!==u[0])c.appendChild(e.document.createTextNode(i(u)));else{if("/"===u[1]){m.length&&m[m.length-1]===u.substr(2).replace(">","")&&(m.pop(),c=c.parentNode);continue}var g,v=s(u.substr(1,u.length-2));if(v){g=e.document.createProcessingInstruction("timestamp",v),c.appendChild(g);continue}var y=u.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(!(g=o(y[1],y[3])))continue;if(!a(c,g))continue;y[2]&&(g.className=y[2].substr(1).replace("."," ")),m.push(y[1]),c.appendChild(g),c=g}return l}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function v(e){for(var t=0;t<g.length;t++){var n=g[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function y(){}function _(e,t,n){var r="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent),a="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)",s="";void 0!==i&&(a=i.fontSet,o=i.backgroundSet,s=i.edgeSet),r&&(a="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),y.call(this),this.cue=t,this.cueDiv=m(e,t.text);var u={color:a,backgroundColor:o,textShadow:s,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};r||(u.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",u.unicodeBidi="plaintext"),this.applyStyles(u,this.cueDiv),this.div=e.document.createElement("div"),u={textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},r||(u.direction=function(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function i(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var a=n.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):n}return"ruby"===t.tagName?i(e):t.childNodes?(r(e,t),i(e)):void 0}for(r(t,e);n=i(t);)for(var a=0;a<n.length;a++)if(v(n.charCodeAt(a)))return"rtl";return"ltr"}(this.cueDiv),u.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(u),this.div.appendChild(this.cueDiv);var l=0;switch(t.positionAlign){case"start":l=t.position;break;case"middle":l=t.position-t.size/2;break;case"end":l=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(l,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(l,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function b(e){var t,n,r,i,a="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight,a&&!this.lineHeight&&(this.lineHeight=13)}function T(e,t,n,r){var i=new b(t),a=t.cue,o=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(a),s=[];if(a.snapToLines){var u;switch(a.vertical){case"":s=["+y","-y"],u="height";break;case"rl":s=["+x","-x"],u="width";break;case"lr":s=["-x","+x"],u="width"}var l=i.lineHeight,c=l*Math.round(o),d=n[u]+l,f=s[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/l)*l),o<0&&(c+=""===a.vertical?n.height:n.width,s=s.reverse()),i.move(f,c)}else{var h=i.lineHeight/n.height*100;switch(a.lineAlign){case"middle":o-=h/2;break;case"end":o-=h}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],i=new b(t)}var p=function(e,t){for(var i,a=new b(e),o=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var u=e.intersectPercentage(n);o>u&&(i=new b(e),o=u),e=new b(a)}return i||a}(i,s);t.move(p.toCSSCompatValues(n))}function E(){}y.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},y.prototype.formatStyle=function(e,t){return 0===e?0:e+t},_.prototype=a(y.prototype),_.prototype.constructor=_,b.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},b.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},b.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},b.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},b.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},b.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},b.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},b.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},E.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},E.convertCueToDOMTree=function(e,t){return e&&t?m(e,t):null};E.processCues=function(e,t,r){if(!e||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",r.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var a=[],o=b.getSimpleBoxPosition(i),s={font:Math.round(.05*o.height*100)/100*n+"px sans-serif"};!function(){for(var n,r,u=0;u<t.length;u++)r=t[u],n=new _(e,r,s),i.appendChild(n.div),T(0,n,o,a),r.displayState=n.div,a.push(b.getSimpleBoxPosition(n))}()}else for(var u=0;u<t.length;u++)i.appendChild(t[u].displayState)},E.Parser=function(e,t){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]},E.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof o))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}function r(e){l(e,(function(e,n){switch(e){case"Region":!function(e){var n=new u;if(l(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var r=t.split(",");if(2!==r.length)break;var i=new u;if(i.percent("x",r[0]),i.percent("y",r[1]),!i.has("x")||!i.has("y"))break;n.set(e+"X",i.get("x")),n.set(e+"Y",i.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var r=new t.window.VTTRegion;r.width=n.get("width",100),r.lines=n.get("lines",3),r.regionAnchorX=n.get("regionanchorX",0),r.regionAnchorY=n.get("regionanchorY",100),r.viewportAnchorX=n.get("viewportanchorX",0),r.viewportAnchorY=n.get("viewportanchorY",100),r.scroll=n.get("scroll",""),t.onregion&&t.onregion(r),t.regionList.push({id:n.get("id"),region:r})}}(n)}}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(i=n()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new o(o.Errors.BadSignature);t.state="HEADER"}for(var s=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:i=n(),t.state){case"HEADER":/:/.test(i)?r(i):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new t.window.VTTCue(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{c(i,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var d=-1!==i.indexOf("--\x3e");if(!i||d&&(s=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new o(o.Errors.BadSignature)}catch(e){this.reportOrThrowError(e)}return this.onflush&&this.onflush(),this}},e.WebVTT=E}(this)},function(e,t,n){var r;e.exports&&(this.VTTCue=this.VTTCue||n(549).VTTCue),(r=this).VTTCue.prototype.toJSON=function(){var e={},t=this;return Object.keys(this).forEach((function(n){"getCueAsHTML"!==n&&"hasBeenReset"!==n&&"displayState"!==n&&(e[n]=t[n])})),e},r.VTTCue.create=function(e){if(!e.hasOwnProperty("startTime")||!e.hasOwnProperty("endTime")||!e.hasOwnProperty("text"))throw new Error("You must at least have start time, end time, and text.");var t=new r.VTTCue(e.startTime,e.endTime,e.text);for(var n in e)t.hasOwnProperty(n)&&(t[n]=e[n]);return t},r.VTTCue.fromJSON=function(e){return this.create(JSON.parse(e))}},function(e,t){!function(e){var t="auto",n={"":!0,lr:!0,rl:!0},r={start:!0,middle:!0,end:!0,left:!0,right:!0};function i(e){return"string"==typeof e&&(!!r[e.toLowerCase()]&&e.toLowerCase())}function a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function o(e,r,o){var s=this,u=/MSIE\s8\.0/.test(navigator.userAgent),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=e,h=r,p=o,m=null,g="",v=!0,y="auto",_="start",b=50,T="middle",E=50,S="middle";if(Object.defineProperty(s,"id",a({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",a({},l,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",a({},l,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",a({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",a({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",a({},l,{get:function(){return m},set:function(e){m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",a({},l,{get:function(){return g},set:function(e){var t=function(e){return"string"==typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",a({},l,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",a({},l,{get:function(){return y},set:function(e){if("number"!=typeof e&&e!==t)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",a({},l,{get:function(){return _},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",a({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",a({},l,{get:function(){return T},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");T=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",a({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",a({},l,{get:function(){return S},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");S=t,this.hasBeenReset=!0}})),s.displayState=void 0,u)return s}o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.VTTCue=e.VTTCue||o}(this)},function(e,t,n){var r;e.exports&&(this.VTTRegion=n(551).VTTRegion),(r=this).VTTRegion.create=function(e){var t=new r.VTTRegion;for(var n in e)t.hasOwnProperty(n)&&(t[n]=e[n]);return t},r.VTTRegion.fromJSON=function(e){return this.create(JSON.parse(e))}},function(e,t){!function(e){var t={"":!0,up:!0};function n(e){return"number"==typeof e&&e>=0&&e<=100}e.VTTRegion=e.VTTRegion||function(){var e=100,r=3,i=0,a=100,o=0,s=100,u="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!n(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");r=e}},regionAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!n(e))throw new Error("RegionAnchorX must be between 0 and 100.");a=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!n(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!n(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!n(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return u},set:function(e){var n=function(e){return"string"==typeof e&&(!!t[e.toLowerCase()]&&e.toLowerCase())}(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");u=n}}})}}(this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomTextTrackCueList=void 0;var r=n(0),i=function(){function e(){this._length=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),e.prototype[Symbol.iterator]=function(){var e,t=this,n=0;return(e={next:function(){return{done:n===t._length,value:t[n++]}}})[Symbol.iterator]=function(){return this},e},e.prototype.addCue=function(e){if(-1===this.indexOf(e)){this._length++;for(var t=this._length-1;t>0&&e.startTime<this[t-1].startTime;)this[t]=this[t-1],t-=1;this[t]=e}},e.prototype.clear=function(){for(var e=0;e<this._length;e++)delete this[e];this._length=0},e.prototype.getCueById=function(e){var t,n;try{for(var i=r.__values(this),a=i.next();!a.done;a=i.next()){var o=a.value;if(o.id===e)return o}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return null},e.prototype.indexOf=function(e){for(var t=0;t<this._length;t++)if(this[t]===e)return t;return-1},e.prototype.item=function(e){return this[e]},e.prototype.removeCue=function(e){var t=this.indexOf(e);if(-1!==t){for(var n=t;n<this._length;n++)this[n]=this[n+1];delete this[this._length--]}},e}();t.CustomTextTrackCueList=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLTextTrackList=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(8),s=n(16),u=n(10),l=n(554),c=new s.LoggerFileNameDecorator("HTMLTextTrackList"),d=function(){function e(e,t){var n=this;this.onaddtrack=null,this.onchange=null,this.onremovetrack=null,this._length=0,this._renderedCues=[],this._subscriptions=[],this._textTrackContainer=null,this.createTrackEvent=function(e,t){var n=new Event(e,{bubbles:!1,cancelable:!1,composed:!1});return n.track=t,n},this.handleAddTrack=function(e){var t;null===(t=n.onaddtrack)||void 0===t||t.call(n,e),n._eventListeners.addtrack.forEach((function(t){return t.call(n,e)}))},this.handleChange=function(e){var t;null===(t=n.onchange)||void 0===t||t.call(n,e),n._eventListeners.change.forEach((function(t){return t.call(n,e)}))},this.handleCueChange=function(){n.render()},this.handleRemoveTrack=function(e){var t;null===(t=n.onremovetrack)||void 0===t||t.call(n,e),n._eventListeners.removetrack.forEach((function(t){return t.call(n,e)}))},this.linkToTextTrackList=function(e){e.textTracks?(Array.from(e.textTracks).forEach((function(e){return n.addTrack(e)})),n._subscriptions.push((0,a.fromEvent)(e.textTracks,o.TrackListEvents.ADD_TRACK).subscribe((function(e){var t=e.track;t&&(0,u.isTextTrack)(t)&&t.kind!==o.TextTrackKinds.METADATA&&n.addTrack(t)})),(0,a.fromEvent)(e.textTracks,o.TrackListEvents.REMOVE_TRACK).subscribe((function(e){var t=e.track;t&&(0,u.isTextTrack)(t)&&t.kind!==o.TextTrackKinds.METADATA&&n.removeTrack(t)})),(0,a.fromEvent)(e,"emptied").subscribe((function(){n.synchronizeTextTracks(e)})),(0,a.fromEvent)(e.textTracks,o.TrackListEvents.CHANGE).subscribe((function(e){Array.from(n).forEach((function(e){return e.validate()}));var t=new Event(o.TrackListEvents.CHANGE,{bubbles:!1,cancelable:!1,composed:!1});n._changeSource.next(t)})))):c.debug("Failed to link HTMLTextTrackList with native text track list, as it is not natively available!")},this.proxyTextTrack=function(e){return new Proxy(e,function(e,t){var n=e.mode,r=e.mode,i=function(e){switch(e.mode){case o.TextTrackModes.SHOWING:n=e.mode=o.TextTrackModes.HIDDEN;break;case o.TextTrackModes.HIDDEN:n=e.mode=o.TextTrackModes.DISABLED}r=e.mode===o.TextTrackModes.HIDDEN?o.TextTrackModes.SHOWING:e.mode};return i(e),{get:function(e,t){switch(t){case"__target__":return e;case"validate":return function(){n!==e.mode&&i(e)};case"mode":return r;default:return e[t]}},set:function(e,i,a){if("mode"===i){var s=a;r=s,n=e.mode=s===o.TextTrackModes.SHOWING?o.TextTrackModes.HIDDEN:s,t()}else e[i]=a;return!0}}}(e,n.render))},this.render=function(){if(n._textTrackContainer){var e=Array.from(n).map((function(e){var t=e.activeCues;return t?Array.from(t):[]})).reduce((function(e,t){return r.__spreadArray(r.__spreadArray([],r.__read(e),!1),r.__read(t),!1)}),[]);(0,u.isSequenceEqual)(e,n._renderedCues)||(n.clear(),e.forEach((function(e){(0,u.hasKeyOfType)(e,"text","string")&&e.text.split("\n").filter((function(e){return e.length>0})).forEach((function(e){var t,r=n.createCueElement(e);null===(t=n._textTrackContainer)||void 0===t||t.appendChild(r)}))})),n._renderedCues=e)}},this.synchronizeTextTracks=function(e){var t=Array.from(e.textTracks),r=Array.from(n);t.filter((function(e){return!r.some((function(t){return t.__target__===e}))})).forEach((function(e){return n.addTrack(e)})),r.filter((function(e){return!t.some((function(t){return t===e.__target__}))})).forEach((function(e){return n.removeTrack(e)}))},(0,i.default)(this),t&&(this._textTrackContainer=(0,u.getEl)(t)),this._eventListeners={addtrack:new Set,change:new Set,removetrack:new Set},this._addTrackSource=new a.Subject,this._changeSource=new a.Subject,this._removeTrackSource=new a.Subject,this._subscriptions.push(this._addTrackSource.subscribe(this.handleAddTrack),this._changeSource.subscribe(this.handleChange),this._removeTrackSource.subscribe(this.handleRemoveTrack)),this.linkToTextTrackList(e)}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!1,configurable:!0}),e.prototype[Symbol.iterator]=function(){var e,t=this,n=0;return(e={next:function(){return{done:n===t._length,value:t[n++]}}})[Symbol.iterator]=function(){return this},e},e.prototype.addEventListener=function(e,t,n){this._eventListeners[e].add(t)},e.prototype.addTrack=function(e){Array.from(this).some((function(t){return t===e||t.__target__===e}))||(c.info("Adding text track. Kind: '".concat(e.kind,"' Language: '").concat(e.language,"'")),this[this._length++]=this.proxyTextTrack(e),e.addEventListener("cuechange",this.handleCueChange),this._addTrackSource.next(this.createTrackEvent(o.TrackListEvents.ADD_TRACK,e)))},e.prototype.destroy=function(){this._subscriptions.forEach((function(e){return e.unsubscribe()})),this._addTrackSource.complete(),this._changeSource.complete(),this._removeTrackSource.complete(),this.clear()},e.prototype.dispatchEvent=function(e){switch(e.type){case o.TrackListEvents.ADD_TRACK:this._addTrackSource.next(e);break;case o.TrackListEvents.CHANGE:this._changeSource.next(e);break;case o.TrackListEvents.REMOVE_TRACK:this._removeTrackSource.next(e)}return!0},e.prototype.getTrackById=function(e){return Array.from(this).find((function(t){return t.id===e}))||null},e.prototype.item=function(e){return this[e]},e.prototype.removeEventListener=function(e,t,n){this._eventListeners[e].delete(t)},e.prototype.removeTrack=function(e){var t=Array.from(this).findIndex((function(t){return t===e||t.__target__===e}));if(t>-1){c.info("Removing text track. Kind: '".concat(e.kind,"' Language: '").concat(e.language,"'"));for(var n=this[t],r=this._length-1,i=t;i<r;i++)this[i]=this[i+1];delete this[r],this._length--,this._removeTrackSource.next(this.createTrackEvent(o.TrackListEvents.REMOVE_TRACK,n))}},e.prototype.setTextTrackContainer=function(e){this.clear(),this._textTrackContainer=(0,u.getEl)(e),this.render()},e.prototype.clear=function(){this._textTrackContainer&&(this._textTrackContainer.innerHTML=""),this._renderedCues=[]},e.prototype.createCueElement=function(e){var t=document.createElement("span");return t.className=l.TEXT_TRACK_TEXT_CLASSNAME,t.innerText=e,t},e}();t.HTMLTextTrackList=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(138),t),r.__exportStar(n(555),t),r.__exportStar(n(188),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_TRACK_KINDS=void 0,t.TEXT_TRACK_KINDS=["subtitles","captions","descriptions","chapters","metadata"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(557),t),r.__exportStar(n(558),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fairplay=void 0;var r=n(0),i=n(8),a=n(10),o=function(){function e(e){var t=this;this._certificate=new Uint8Array(0),this.createKeySession=function(e,n){var r=t._video.webkitKeys.createSession("video/mp4",n);if(!r)throw new Error("Could not create key session");r.contentId=e,r.addEventListener("webkitkeymessage",t.getLicense,!1),r.addEventListener("webkitkeyerror",(function(e){return console.error("error",e)}),!1)},this.generateKeySessionInitData=function(e,t,n){var r=e.byteLength+4+t.byteLength+4+n.byteLength,i=0,a=new ArrayBuffer(r),o=new DataView(a),s=new Uint8Array(a,i,e.byteLength);s.set(e),i+=s.byteLength,o.setUint32(i,t.byteLength,!0),i+=4;var u=new Uint16Array(a,i,t.length);return u.set(t),i+=u.byteLength,o.setUint32(i,n.byteLength,!0),i+=4,new Uint8Array(a,i,n.byteLength).set(n),new Uint8Array(a,0,a.byteLength)},this.getLicense=function(e){return r.__awaiter(t,void 0,void 0,(function(){var t,n,i;return r.__generator(this,(function(r){switch(r.label){case 0:if(t=e.target,!this._getLicense)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._getLicense(e)];case 2:return n=r.sent(),t.update(n),[3,4];case 3:return i=r.sent(),console.error("error",i),[3,4];case 4:return[3,6];case 5:throw new Error("Get License not set");case 6:return[2]}}))}))},this.needKey=function(e){var n=e.initData,r=e.target,i=t.extractContentId(n),o=(0,a.stringToUint16Array)(i),s=t.generateKeySessionInitData(n,o,t._certificate);r.webkitKeys||t.setMediaKeys(),t.createKeySession(i,s)},this.setMediaKeys=function(){if(!window.WebKitMediaKeys.isTypeSupported(i.KeySystems.FAIRPLAY,"video/mp4"))throw new Error("Key System not supported");t._video.webkitSetMediaKeys(new window.WebKitMediaKeys(i.KeySystems.FAIRPLAY))},this._video=e}return e.prototype.destroy=function(){this._video.removeEventListener("webkitneedkey",this.needKey)},e.prototype.init=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,o=this;return r.__generator(this,(function(s){switch(s.label){case 0:if(!(t=null==e?void 0:e.fairplay))return[3,2];if(n=t.getCertificate,i=t.getLicense,!n||!i)throw new Error("getCertificate and getLicense must be provided in fairplay config - fairplay: ".concat(JSON.stringify(t)));return this._video.addEventListener("webkitneedkey",this.needKey,!1),a=this,[4,n()];case 1:return a._certificate=s.sent(),this._getLicense=i,[3,3];case 2:this._getLicense=function(){return r.__awaiter(o,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,new Uint8Array(0)]}))}))},s.label=3;case 3:return[2]}}))}))},e.prototype.extractContentId=function(e){var t=(0,a.uint16ArrayToString)(e).split("://");if(2!==t.length)throw new Error("Invalid content ID");return t[1]},e}();t.Fairplay=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NativeAudioTrackController=void 0;var r=n(0),i=r.__importDefault(n(9)),a=r.__importDefault(n(93)),o=n(12),s=n(15),u=n(8),l=n(71),c=function(){function e(e){this._subscriptions=[],(0,i.default)(this),this._audioTrackListSource=new o.BehaviorSubject(void 0),this._trackListController=new l.TrackListController({activateTrack:this.activateTrack,currentTrackChangedEventCreator:function(e){return(0,o.fromEvent)(e,u.TrackListEvents.CHANGE)},deactivateTrack:this.deactivateTrack,isParsedTrackEqual:this.isParsedTrackEqual,isTrackActive:this.isTrackActive,parseTrack:this.parseAudioTrack,trackListSource:this._audioTrackListSource,tracksChangedEventCreator:function(e){return(0,o.merge)((0,o.fromEvent)(e,u.TrackListEvents.ADD_TRACK),(0,o.fromEvent)(e,u.TrackListEvents.REMOVE_TRACK))}}),this._subscriptions.push(this.mapElementSourceToAudioTrackList(e))}return Object.defineProperty(e.prototype,"onAudioTrackChange",{get:function(){return this._trackListController.onChange.pipe((0,s.map)((function(e){var t=e.currentTrack;return{audioTracks:e.tracks,currentAudioTrack:t}})))},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._subscriptions.forEach((function(e){return e.unsubscribe()})),this._audioTrackListSource.complete()},e.prototype.getAudioTracks=function(){return this._trackListController.getTracks()},e.prototype.getCurrentAudioTrack=function(){return this._trackListController.getCurrentTrack()},e.prototype.setCurrentAudioTrack=function(e){this._trackListController.setCurrentTrack(e)},e.prototype.activateTrack=function(e){e.enabled=!0},e.prototype.deactivateTrack=function(e){e.enabled=!1},e.prototype.isParsedTrackEqual=function(e,t){return e.id===t.id&&e.label===t.label&&e.lang===t.lang},e.prototype.isTrackActive=function(e){return e.enabled},e.prototype.mapElementSourceToAudioTrackList=function(e){var t=this;return e.elementSource.pipe((0,s.map)((function(e){return e?e.audioTracks:void 0}))).subscribe((function(e){return t._audioTrackListSource.next(e)}))},e.prototype.parseAudioTrack=function(e){var t,n,r=e.id,i=e.label,o=e.language;return{id:parseInt(r),label:null!==(n=null!=i?i:null===(t=a.default[o])||void 0===t?void 0:t.nativeName)&&void 0!==n?n:"",lang:o}},e}();t.NativeAudioTrackController=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMediaInfo=void 0;var r=n(0),i=n(8);t.createMediaInfo=function(e,t,n){var a,o=n.queueItemService,s="string"==typeof e?{source:{sourceType:i.SourceTypes.STATIC,url:e}}:e;return r.__assign(r.__assign({autoPlay:t.defaultAutoPlay,metadata:{},textTracks:[]},s),{itemId:null!==(a=s.itemId)&&void 0!==a?a:o.generateItemId()})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dateToTime=void 0,t.dateToTime=function(e,t){return t?(e.getTime()-t.getTime())/1e3:0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((function(t){return window.setTimeout(t,e)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.embedScript=void 0,t.embedScript=function(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("async","async"),r.setAttribute("src",e),r.onload=t,r.onerror=n,document.body.appendChild(r)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enhanceAudioTrackSelectors=void 0;var r=n(0);t.enhanceAudioTrackSelectors=function(e){var t=[r.__assign({},e)],n=r.__read(t,1)[0],i=Object.keys(n);if(2===i.length)if(i.includes("id")){var a=r.__assign({},n);delete a.id,t=[n,a]}else t=t.concat([{label:n.label},{lang:n.lang}]);else 3===i.length&&(t=t.concat([{label:n.label,lang:n.lang},{label:n.label},{lang:n.lang}]));return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enhanceTextTrackSelectors=void 0;var r=n(0),i=["src","label","lang"];t.enhanceTextTrackSelectors=function(e){var t,n,a,o,s,u,l=[r.__assign({},e)],c=r.__read(l,1)[0],d=Object.keys(c),f=function(e){var t=new Array(4);return e.forEach((function(e){var n=i.indexOf(e);-1!==n&&(t[n]=e)})),t.filter(Boolean)}(d);if(2===d.length)try{for(var h=r.__values(f),p=h.next();!p.done;p=h.next())"src"===(v=p.value)&&null==c.src||l.push(((a={})[v]=c[v],a))}catch(e){t={error:e}}finally{try{p&&!p.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}else if(d.length>=3){["label","lang"].every((function(e){return d.includes(e)}))&&l.push({label:c.label,lang:c.lang});try{for(var m=r.__values(f),g=m.next();!g.done;g=m.next()){var v;"src"===(v=g.value)&&null==c.src||l.push(((u={})[v]=c[v],u))}}catch(e){o={error:e}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}}return l}},function(e,t,n){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.getContentType=void 0;var a=n(0),o=n(40),s={"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"],"application/x-mpegURL":["m3u8"],"application/dash+xml":["mpd"],"application/vnd.ms-sstr+xml":["ism"]},u={};for(var l in s)try{for(var c=(r=void 0,a.__values(s[l])),d=c.next();!d.done;d=c.next()){var f=d.value;u[f.toLowerCase()]=l}}catch(i){r={error:i}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}var h=function(e,t){return a.__awaiter(void 0,void 0,void 0,(function(){return a.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,fetch(e,{method:t})];case 1:return[2,n.sent().headers.get("content-type")||void 0];case 2:return n.sent(),[2,void 0];case 3:return[2]}}))}))};t.getContentType=function(e,t){return a.__awaiter(void 0,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return!n&&t.fromExtension&&(n=function(e){var t=e.replace(/[?#](.*)/,"").replace(/^.*[.]/,"").toLowerCase();return u[t]}(e)),n||!t.fromHeadRequest?[3,2]:[4,h(e,"HEAD")];case 1:n=r.sent(),r.label=2;case 2:return n||!t.fromGetRequest?[3,4]:[4,h(e,"GET")];case 3:n=r.sent(),r.label=4;case 4:return[2,n||o.DEFAULT_CONTENT_TYPE]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEl=void 0,t.getEl=function(e){return"string"==typeof e?document.getElementById(e):e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTextTrackKind=void 0;var r=n(8);t.getTextTrackKind=function(e){return["subtitles","captions","descriptions","chapters","metadata"].some((function(t){return t===e.kind}))?e.kind:r.TextTrackKinds.SUBTITLES}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSupportedKeySystems=t.isKeySystemSupported=void 0;var r=n(0),i=n(8),a=function(e){return r.__awaiter(void 0,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:if("function"!=typeof navigator.requestMediaKeySystemAccess)return[3,5];t=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.42E01E"'}]}],r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.requestMediaKeySystemAccess(e,t)];case 2:return r.sent(),[2,!0];case 3:return r.sent(),[2,!1];case 4:return[3,6];case 5:if("function"==typeof(n=document.createElement("video")).webkitGenerateKeyRequest)return[2,""!==n.canPlayType("video/mp4",e)];r.label=6;case 6:return[2,!1]}}))}))},o=function(){return!(!window.WebKitMediaKeys||!window.WebKitMediaKeys.isTypeSupported)&&window.WebKitMediaKeys.isTypeSupported(i.KeySystems.FAIRPLAY)};t.isKeySystemSupported=function(e){return r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return e===i.KeySystems.FAIRPLAY?[2,o()]:[4,a(e)];case 1:return[2,t.sent()]}}))}))},t.getSupportedKeySystems=function(){return r.__awaiter(void 0,void 0,void 0,(function(){var e,t,n,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return t=e={},n=i.KeySystems.WIDEVINE,[4,a(i.KeySystems.WIDEVINE)];case 1:return t[n]=r.sent(),s=e,u=i.KeySystems.PLAYREADY,[4,a(i.KeySystems.PLAYREADY)];case 2:return s[u]=r.sent(),e[i.KeySystems.FAIRPLAY]=o(),[2,e]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNativeTextTrack=void 0,t.isNativeTextTrack=function(e){return"language"in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isShortcutPressed=void 0;var r=n(190);t.isShortcutPressed=function(e,t){var n=e.shiftKey,i=e.altKey,a=e.ctrlKey,o=e.metaKey,s=t.shift,u=t.alt,l=t.ctrl,c=t.meta,d=t.key,f=(0,r.getNonStandardKey)(e);return(null==f?void 0:f.toLocaleLowerCase())===d.toLocaleLowerCase()&&n===s&&i===u&&a===l&&o===c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTextTrack=void 0,t.isTextTrack=function(e){var t=e;return void 0!==t.activeCues&&void 0!==t.cues}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTextTrackEqual=void 0;var r=n(191);t.isTextTrackEqual=function(e,t){return void 0!==t&&e.kind===t.kind&&(0,r.normaliseTextTrackLang)(e.lang)===(0,r.normaliseTextTrackLang)(t.lang)&&e.label===t.label}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidDate=void 0,t.isValidDate=function(e){return void 0!==e&&!isNaN(e.getTime())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVideoElementWithPip=void 0;var r=n(91);t.isVideoElementWithPip=function(e){return(0,r.hasKeyOfType)(e,"requestPictureInPicture","function")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWebkitAndHasPip=void 0;var r=n(8),i=n(192);t.isWebkitAndHasPip=function(e){return(0,i.isWebkitVideoElement)(e)&&e.webkitSupportsPresentationMode(r.WebkitPresentationMode.PIP)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nativeEventMapper=void 0;var r=n(0),i=n(12),a=n(15),o=n(193);t.nativeEventMapper=function(e){return function(t,n){return e.pipe((0,o.switchMapDefined)((function(e){return(0,i.fromEvent)(e,t).pipe((0,a.map)((function(e){return n?r.__assign({nativeEvent:e},n(e)):{nativeEvent:e}})))})),(0,a.share)())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextTrackKind=void 0;var r=n(8);t.parseTextTrackKind=function(e){return["subtitles","captions","descriptions","chapters","metadata"].some((function(t){return t===e}))?e:r.TextTrackKinds.SUBTITLES}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTimeRanges=void 0,t.parseTimeRanges=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reflectPromise=void 0;var r=n(0);t.reflectPromise=function(e){return r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,e.then((function(e){return{status:"fulfilled",value:e}}),(function(e){return{status:"rejected",reason:e}}))]}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeElement=void 0,t.removeElement=function(e){var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeUndefinedProps=void 0,t.removeUndefinedProps=function(e){var t={};return Object.keys(e).forEach((function(n){void 0!==e[n]&&(t[n]=e[n])})),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectsAudioTrack=void 0;var r=n(0),i=["id","label","lang"];t.selectsAudioTrack=function(e,t){var n,a;try{for(var o=r.__values(i),s=o.next();!s.done;s=o.next()){var u=s.value;if(u in t&&t[u]!==e[u])return!1}}catch(e){n={error:e}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectsTextTrack=void 0;var r=n(0),i=["label","lang","kind","src"];t.selectsTextTrack=function(e,t){var n,a;try{for(var o=r.__values(i),s=o.next();!s.done;s=o.next()){var u=s.value;if(u in t&&t[u]!==e[u])return!1}}catch(e){n={error:e}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shuffleArray=void 0;var r=n(0);t.shuffleArray=function(e){for(var t,n=e.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1));t=r.__read([e[i],e[n]],2),e[n]=t[0],e[i]=t[1]}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToUint16Array=void 0,t.stringToUint16Array=function(e){var t=e.length,n=new ArrayBuffer(2*t),r=new Uint16Array(n);return e.split("").forEach((function(e,t){return r[t]=e.charCodeAt(0)})),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throttleAsync=void 0;var r=n(12);t.throttleAsync=function(e){var t,n;void 0===e&&(e={});var i=function(){var e=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n=void 0,window.setTimeout((function(){return i()}),0),e(t)}};if(void 0!==t&&void 0===n){var r=t.promiseFactory,a=t.reject,o=t.resolve,s=t.cancel,u=t.cancellationSignal;t=void 0,(n={cancel:s,promise:r(u)}).promise.then(e(o),e(a))}};return function(a){var o;if(t){var s=null!==(o=e.operationCancelledMessage)&&void 0!==o?o:"Operation cancelled!",u=new Error(s);t.reject(u),t=void 0}n&&n.cancel();var l=new Promise((function(e,n){var i=new r.Subject,o=i.asObservable();t={promiseFactory:a,reject:n,resolve:e,cancel:function(){i.next(),i.complete()},cancellationSignal:o}}));return i(),l}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeToDate=void 0,t.timeToDate=function(e,t,n){var r=e-t;if(n)return new Date(new Date(n).getTime()-1e3*r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint16ArrayToString=void 0,t.uint16ArrayToString=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(590),t),r.__exportStar(n(591),t),r.__exportStar(n(592),t),r.__exportStar(n(593),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashAudioTrackController=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(128),o=r.__importDefault(n(93)),s=n(12),u=n(15),l=n(71),c=function(){function e(e){var t=this;this._subscriptions=[],(0,i.default)(this),this._dash=e.dash,this._audioTrackListSource=new s.BehaviorSubject(void 0),this._trackListController=new l.TrackListController({activateTrack:this.activateTrack,currentTrackChangedEventCreator:function(){return(0,s.fromEvent)(t._dash,"currentTrackChanged").pipe((0,u.filter)((function(e){var t;return"audio"===(null===(t=e.newMediaInfo)||void 0===t?void 0:t.type)})))},isParsedTrackEqual:this.isParsedTrackEqual,isTrackActive:this.isTrackActive,parseTrack:this.parseAudioTrack,trackListSource:this._audioTrackListSource,tracksChangedEventCreator:function(){return s.NEVER}}),this._subscriptions.push(this.mapElementSourceToAudioTrackList(e))}return Object.defineProperty(e.prototype,"onAudioTrackChange",{get:function(){return this._trackListController.onChange.pipe((0,u.map)((function(e){var t=e.currentTrack;return{audioTracks:e.tracks,currentAudioTrack:t}})))},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._subscriptions.forEach((function(e){return e.unsubscribe()})),this._audioTrackListSource.complete()},e.prototype.getAudioTracks=function(){return this._trackListController.getTracks()},e.prototype.getCurrentAudioTrack=function(){return this._trackListController.getCurrentTrack()},e.prototype.setCurrentAudioTrack=function(e){this._trackListController.setCurrentTrack(e)},e.prototype.activateTrack=function(e){this._dash.setCurrentTrack(e)},e.prototype.isParsedTrackEqual=function(e,t){return e.id===t.id},e.prototype.isTrackActive=function(e){var t=this._dash.getCurrentTrackFor("audio");return(null==t?void 0:t.index)===e.index},e.prototype.mapElementSourceToAudioTrackList=function(e){var t=this,n=e.dash;return(0,s.fromEventPattern)((function(e){return n.on(a.MediaPlayer.events.STREAM_INITIALIZED,e)}),(function(e){return n.off(a.MediaPlayer.events.STREAM_INITIALIZED,e)})).pipe((0,u.map)((function(){return n.getTracksFor("audio")}))).subscribe((function(e){t._audioTrackListSource.next(e)}))},e.prototype.parseAudioTrack=function(e){var t,n,r,i=e.index;if(null!=i){var a=null!==(t=e.lang)&&void 0!==t?t:"",s=e.labels,u=s.length>0?"string"==typeof s[0]?s[0]:s[0].text:void 0;return{id:i,label:null!==(r=null!=u?u:null===(n=o.default[a])||void 0===n?void 0:n.nativeName)&&void 0!==r?r:a,lang:a}}throw new Error("AudioTracks must have index properties.")},e}();t.DashAudioTrackController=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashBufferStallManager=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(15),o=n(16),s=n(10);n(194);var u=new o.LoggerFileNameDecorator("DashBufferStallManager"),l=function(){function e(e,t){this._recoveryPending=!1,(0,i.default)(this),this._config=t,this._handler=e,this._engine=e.getEngine(),this._engine.on("bufferStalled",this.onBufferStalled)}return e.prototype.clearSourceBuffers=function(){var e,t;try{null===(t=null===(e=this._engine.getActiveStream())||void 0===e?void 0:e.getProcessors())||void 0===t||t.forEach((function(e){var t,n,r,i;u.info("Replacing '".concat(null===(t=e.getType)||void 0===t?void 0:t.call(e),"' buffer...")),null===(i=null===(n=e.getBufferController)||void 0===n?void 0:(r=n.call(e)).replaceBuffer)||void 0===i||i.call(r)}))}catch(e){u.warn("Failed to clear source buffers. ".concat((0,s.errorToString)(e)))}},e.prototype.getIsBuffering=function(){return(this._handler.getIsBuffering()||0===this._handler.getPlaybackRate())&&this._handler.getHasPlayed()&&!this._handler.getIsPaused()},e.prototype.getSeekDestination=function(){var e=this._handler.getBufferedRanges(),t=this._handler.getCurrentTime(),n=e.find((function(e){var n=e.start-t;return n>0&&n<30}));return null!=n?n.start:t+this._handler.getTargetDuration()*this._config.nudgeSegmentCount},e.prototype.onBufferStalled=function(){window.clearTimeout(this._timeout),this._recoveryPending||(this._timeout=window.setTimeout(this.recoverPlayback,1e3*this._handler.getTargetDuration()))},e.prototype.recoverPlayback=function(e){return void 0===e&&(e=0),r.__awaiter(this,void 0,void 0,(function(){var t,n,i,o,l;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this.getIsBuffering())return[3,3];if(this._recoveryPending=!0,t=this._handler.getCurrentTime(),n=this.getSeekDestination(),i=1e3*this._handler.getTargetDuration(),0===e)try{this.clearSourceBuffers()}catch(r){u.warn("Failed to clear source buffers. ".concat((0,s.errorToString)(r)))}return u.info("Buffer stalled. Current time: ".concat(t,", seeking to: ").concat(n)),[4,Promise.race([this._handler.seekTo(n),this._handler.onProgress.pipe((0,a.take)(1)).toPromise(),(0,s.delay)(i)])];case 1:return r.sent(),[4,Promise.race([this._handler.seekTo(n).then((function(){return!0})),(0,s.delay)(i).then((function(){return!1}))])];case 2:return r.sent()?(this._recoveryPending=!1,u.info("Successfully recovered from buffer stall.")):(o=this._config.maxRetryCount,e<o?(l=e+1,u.info("Failed to recover from buffer stall, retrying recovery... (".concat(l," / ").concat(o,")")),this.recoverPlayback(l)):(this._recoveryPending=!1,u.error("Failed to recover from buffer stall, max retry count of ".concat(o," has been reached.")))),[3,4];case 3:this._recoveryPending&&(this._recoveryPending=!1,u.info("Skipping recovery the player is no longer buffering.")),r.label=4;case 4:return[2]}}))}))},e}();t.DashBufferStallManager=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DashTextTrackController=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(128),o=n(15),s=n(8),u=function(e){function t(t){var n=e.call(this,t)||this;return(0,i.default)(n),n._dash=t.dash,n._elementSource=t.elementSource,n._useHTMLTextTracks=t.useHTMLTextTracks,n._dash.on(a.MediaPlayer.events.TEXT_TRACKS_ADDED,n.handleTracksAdded),n}return r.__extends(t,e),t.prototype.destroy=function(){this._dash.off(a.MediaPlayer.events.TEXT_TRACKS_ADDED,this.handleTracksAdded),e.prototype.destroy.call(this)},t.prototype.activateTrack=function(e,t){var n=Array.from(t),r=n.findIndex((function(t){return t===e}));this._dash.setTextTrack(r),n.forEach((function(t){t.mode=t===e?s.TextTrackModes.SHOWING:s.TextTrackModes.DISABLED}))},t.prototype.deactivateTrack=function(e){e.mode=s.TextTrackModes.DISABLED},t.prototype.handleTracksAdded=function(){var e=this;this._elementSource.pipe((0,o.first)()).subscribe((function(t){t&&(Array.from(t.textTracks).forEach((function(e){e.mode=s.TextTrackModes.DISABLED})),e._useHTMLTextTracks&&e._dash.enableForcedTextStreaming(!0))}))},t}(n(187).TextTrackController);t.DashTextTrackController=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidevinePlayready=void 0;var r=n(0),i=n(8),a=n(10),o=function(){function e(e,t){this._config=t,this._engine=e}return e.prototype.init=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,o,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return t=null==e?void 0:e.widevine,n=null==e?void 0:e.playready,[4,(0,a.isKeySystemSupported)(i.KeySystems.WIDEVINE)];case 1:return o=r.sent(),[4,(0,a.isKeySystemSupported)(i.KeySystems.PLAYREADY)];case 2:return s=r.sent(),u={},t&&o&&(this._keySystem=i.KeySystems.WIDEVINE,u[i.KeySystems.WIDEVINE]=this.initKeySystem(t,this._config.widevine,0)),n&&s&&(this._keySystem=i.KeySystems.PLAYREADY,u[i.KeySystems.PLAYREADY]=this.initKeySystem(n,this._config.playready)),this._engine.setProtectionData(u),[2]}}))}))},e.prototype.initKeySystem=function(e,t,n){var r={priority:n,serverURL:e.licenseServerUrl,withCredentials:!1};(null==t?void 0:t.distinctiveIdentifierRequired)&&(r.distinctiveIdentifier="required"),(null==t?void 0:t.persistentStateRequired)&&(r.persistentState="required"),"function"==typeof e.headers?this.setHeaders(e.headers):"object"==typeof e.headers&&(r.httpRequestHeaders=e.headers);var i=e;return i.customData&&(r.cdmData=i.customData),r},e.prototype.setHeaders=function(e){var t=this,n=this._engine.getProtectionController().getKeySystems().find((function(e){return e.systemString===t._keySystem}));if(!n)throw new Error("KeySystem cannot be found");n.getRequestHeadersFromMessage=e},e}();t.WidevinePlayready=o},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=102)}({10:function(e,t,n){"use strict";t.a=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=n||null,this.data=r||null}},102:function(e,t,n){"use strict";n.r(t),function(e){var r=n(99);n.d(t,"MssHandler",(function(){return r.a}));var i="undefined"!=typeof window&&window||e,a=i.dashjs;a||(a=i.dashjs={}),a.MssHandler=r.a,t.default=a}.call(this,n(23))},103:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},17:function(e,t,n){"use strict";var r=n(5);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=t||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var t,n;return t=e,(n=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===r.a.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?r.a.INIT_SEGMENT_TYPE:r.a.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}])&&i(t.prototype,n),e}();a.ACTION_DOWNLOAD="download",a.ACTION_COMPLETE="complete",t.a=a},18:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}])&&r(t.prototype,n),e}();t.a=i},23:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},28:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}])&&r(t.prototype,n),e}();t.a=i},4:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).AST_IN_FUTURE="astInFuture",e.BUFFER_EMPTY="bufferStalled",e.BUFFER_LOADED="bufferLoaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.DYNAMIC_TO_STATIC="dynamicToStatic",e.ERROR="error",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",e.LOG="log",e.MANIFEST_LOADED="manifestLoaded",e.METRICS_CHANGED="metricsChanged",e.METRIC_CHANGED="metricChanged",e.METRIC_ADDED="metricAdded",e.METRIC_UPDATED="metricUpdated",e.PERIOD_SWITCH_STARTED="periodSwitchStarted",e.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",e.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",e.QUALITY_CHANGE_RENDERED="qualityChangeRendered",e.TRACK_CHANGE_RENDERED="trackChangeRendered",e.STREAM_INITIALIZING="streamInitializing",e.STREAM_UPDATED="streamUpdated",e.STREAM_ACTIVATED="streamActivated",e.STREAM_DEACTIVATED="streamDeactivated",e.STREAM_INITIALIZED="streamInitialized",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TEXT_TRACKS_ADDED="allTextTracksAdded",e.TEXT_TRACK_ADDED="textTrackAdded",e.TTML_PARSED="ttmlParsed",e.TTML_TO_PARSE="ttmlToParse",e.CAPTION_RENDERED="captionRendered",e.CAPTION_CONTAINER_RESIZE="captionContainerResize",e.CAN_PLAY="canPlay",e.CAN_PLAY_THROUGH="canPlayThrough",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_LOADED_DATA="playbackLoadedData",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_STALLED="playbackStalled",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e.PLAYBACK_WAITING="playbackWaiting",e.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",e.EVENT_MODE_ON_START="eventModeOnStart",e.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",e.CONFORMANCE_VIOLATION="conformanceViolation",e.REPRESENTATION_SWITCH="representationSwitch",e.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",e}return n}(n(18).a));t.a=s},5:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function e(){r(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},a=function e(){r(this,e),this.s=null,this.d=null,this.b=[],this._t=null};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",i.DVB_REPORTING_TYPE="DVBReporting",i.LICENSE="license",i.OTHER_TYPE="other"},57:function(e,t,n){(function(e){var n,r=function(e){"use strict";var t=1e7,n=9007199254740992,i=d(n),a="function"==typeof BigInt;function o(e,t,n,r){return void 0===e?o[0]:void 0===t||10==+t&&!n?K(e):B(e,t,n,r)}function s(e,t){this.value=e,this.sign=t,this.isSmall=!1}function u(e){this.value=e,this.sign=e<0,this.isSmall=!0}function l(e){this.value=e}function c(e){return-n<e&&e<n}function d(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function f(e){h(e);var n=e.length;if(n<4&&C(e,i)<0)switch(n){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function h(e){for(var t=e.length;0===e[--t];);e.length=t+1}function p(e){for(var t=new Array(e),n=-1;++n<e;)t[n]=0;return t}function m(e){return e>0?Math.floor(e):Math.ceil(e)}function g(e,n){var r,i,a=e.length,o=n.length,s=new Array(a),u=0,l=t;for(i=0;i<o;i++)u=(r=e[i]+n[i]+u)>=l?1:0,s[i]=r-u*l;for(;i<a;)u=(r=e[i]+u)===l?1:0,s[i++]=r-u*l;return u>0&&s.push(u),s}function v(e,t){return e.length>=t.length?g(e,t):g(t,e)}function y(e,n){var r,i,a=e.length,o=new Array(a),s=t;for(i=0;i<a;i++)r=e[i]-s+n,n=Math.floor(r/s),o[i]=r-n*s,n+=1;for(;n>0;)o[i++]=n%s,n=Math.floor(n/s);return o}function _(e,t){var n,r,i=e.length,a=t.length,o=new Array(i),s=0;for(n=0;n<a;n++)(r=e[n]-s-t[n])<0?(r+=1e7,s=1):s=0,o[n]=r;for(n=a;n<i;n++){if(!((r=e[n]-s)<0)){o[n++]=r;break}r+=1e7,o[n]=r}for(;n<i;n++)o[n]=e[n];return h(o),o}function b(e,t,n){var r,i,a=e.length,o=new Array(a),l=-t;for(r=0;r<a;r++)i=e[r]+l,l=Math.floor(i/1e7),i%=1e7,o[r]=i<0?i+1e7:i;return"number"==typeof(o=f(o))?(n&&(o=-o),new u(o)):new s(o,n)}function T(e,t){var n,r,i,a,o=e.length,s=t.length,u=p(o+s);for(i=0;i<o;++i){a=e[i];for(var l=0;l<s;++l)n=a*t[l]+u[i+l],r=Math.floor(n/1e7),u[i+l]=n-1e7*r,u[i+l+1]+=r}return h(u),u}function E(e,n){var r,i,a=e.length,o=new Array(a),s=t,u=0;for(i=0;i<a;i++)r=e[i]*n+u,u=Math.floor(r/s),o[i]=r-u*s;for(;u>0;)o[i++]=u%s,u=Math.floor(u/s);return o}function S(e,t){for(var n=[];t-- >0;)n.push(0);return n.concat(e)}function w(e,n,r){return new s(e<t?E(n,e):T(n,d(e)),r)}function A(e){var t,n,r,i,a=e.length,o=p(a+a);for(r=0;r<a;r++){n=0-(i=e[r])*i;for(var s=r;s<a;s++)t=i*e[s]*2+o[r+s]+n,n=Math.floor(t/1e7),o[r+s]=t-1e7*n;o[r+a]=n}return h(o),o}function M(e,t){var n,r,i,a,o=e.length,s=p(o);for(i=0,n=o-1;n>=0;--n)i=(a=1e7*i+e[n])-(r=m(a/t))*t,s[n]=0|r;return[s,0|i]}function L(e,n){var r,i=K(n);if(a)return[new l(e.value/i.value),new l(e.value%i.value)];var c,g=e.value,v=i.value;if(0===v)throw new Error("Cannot divide by zero");if(e.isSmall)return i.isSmall?[new u(m(g/v)),new u(g%v)]:[o[0],e];if(i.isSmall){if(1===v)return[e,o[0]];if(-1==v)return[e.negate(),o[0]];var y=Math.abs(v);if(y<t){c=f((r=M(g,y))[0]);var b=r[1];return e.sign&&(b=-b),"number"==typeof c?(e.sign!==i.sign&&(c=-c),[new u(c),new u(b)]):[new s(c,e.sign!==i.sign),new u(b)]}v=d(y)}var T=C(g,v);if(-1===T)return[o[0],e];if(0===T)return[o[e.sign===i.sign?1:-1],o[0]];c=(r=g.length+v.length<=200?function(e,n){var r,i,a,o,s,u,l,c=e.length,d=n.length,h=t,m=p(n.length),g=n[d-1],v=Math.ceil(h/(2*g)),y=E(e,v),_=E(n,v);for(y.length<=c&&y.push(0),_.push(0),g=_[d-1],i=c-d;i>=0;i--){for(r=h-1,y[i+d]!==g&&(r=Math.floor((y[i+d]*h+y[i+d-1])/g)),a=0,o=0,u=_.length,s=0;s<u;s++)a+=r*_[s],l=Math.floor(a/h),o+=y[i+s]-(a-l*h),a=l,o<0?(y[i+s]=o+h,o=-1):(y[i+s]=o,o=0);for(;0!==o;){for(r-=1,a=0,s=0;s<u;s++)(a+=y[i+s]-h+_[s])<0?(y[i+s]=a+h,a=0):(y[i+s]=a,a=1);o+=a}m[i]=r}return y=M(y,v)[0],[f(m),f(y)]}(g,v):function(e,t){for(var n,r,i,a,o,s=e.length,u=t.length,l=[],c=[];s;)if(c.unshift(e[--s]),h(c),C(c,t)<0)l.push(0);else{i=1e7*c[(r=c.length)-1]+c[r-2],a=1e7*t[u-1]+t[u-2],r>u&&(i=1e7*(i+1)),n=Math.ceil(i/a);do{if(C(o=E(t,n),c)<=0)break;n--}while(n);l.push(n),c=_(c,o)}return l.reverse(),[f(l),f(c)]}(g,v))[0];var S=e.sign!==i.sign,w=r[1],A=e.sign;return"number"==typeof c?(S&&(c=-c),c=new u(c)):c=new s(c,S),"number"==typeof w?(A&&(w=-w),w=new u(w)):w=new s(w,A),[c,w]}function C(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var n=e.length-1;n>=0;n--)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return 0}function D(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function k(e,t){for(var n,i,a,o=e.prev(),s=o,u=0;s.isEven();)s=s.divide(2),u++;e:for(i=0;i<t.length;i++)if(!e.lesser(t[i])&&!(a=r(t[i]).modPow(s,e)).isUnit()&&!a.equals(o)){for(n=u-1;0!=n;n--){if((a=a.square().mod(e)).isUnit())return!1;if(a.equals(o))continue e}return!1}return!0}s.prototype=Object.create(o.prototype),u.prototype=Object.create(o.prototype),l.prototype=Object.create(o.prototype),s.prototype.add=function(e){var t=K(e);if(this.sign!==t.sign)return this.subtract(t.negate());var n=this.value,r=t.value;return t.isSmall?new s(y(n,Math.abs(r)),this.sign):new s(v(n,r),this.sign)},s.prototype.plus=s.prototype.add,u.prototype.add=function(e){var t=K(e),n=this.value;if(n<0!==t.sign)return this.subtract(t.negate());var r=t.value;if(t.isSmall){if(c(n+r))return new u(n+r);r=d(Math.abs(r))}return new s(y(r,Math.abs(n)),n<0)},u.prototype.plus=u.prototype.add,l.prototype.add=function(e){return new l(this.value+K(e).value)},l.prototype.plus=l.prototype.add,s.prototype.subtract=function(e){var t=K(e);if(this.sign!==t.sign)return this.add(t.negate());var n=this.value,r=t.value;return t.isSmall?b(n,Math.abs(r),this.sign):function(e,t,n){var r;return C(e,t)>=0?r=_(e,t):(r=_(t,e),n=!n),"number"==typeof(r=f(r))?(n&&(r=-r),new u(r)):new s(r,n)}(n,r,this.sign)},s.prototype.minus=s.prototype.subtract,u.prototype.subtract=function(e){var t=K(e),n=this.value;if(n<0!==t.sign)return this.add(t.negate());var r=t.value;return t.isSmall?new u(n-r):b(r,Math.abs(n),n>=0)},u.prototype.minus=u.prototype.subtract,l.prototype.subtract=function(e){return new l(this.value-K(e).value)},l.prototype.minus=l.prototype.subtract,s.prototype.negate=function(){return new s(this.value,!this.sign)},u.prototype.negate=function(){var e=this.sign,t=new u(-this.value);return t.sign=!e,t},l.prototype.negate=function(){return new l(-this.value)},s.prototype.abs=function(){return new s(this.value,!1)},u.prototype.abs=function(){return new u(Math.abs(this.value))},l.prototype.abs=function(){return new l(this.value>=0?this.value:-this.value)},s.prototype.multiply=function(e){var n,r,i,a=K(e),u=this.value,l=a.value,c=this.sign!==a.sign;if(a.isSmall){if(0===l)return o[0];if(1===l)return this;if(-1===l)return this.negate();if((n=Math.abs(l))<t)return new s(E(u,n),c);l=d(n)}return new s(-.012*(r=u.length)-.012*(i=l.length)+15e-6*r*i>0?function e(t,n){var r=Math.max(t.length,n.length);if(r<=30)return T(t,n);r=Math.ceil(r/2);var i=t.slice(r),a=t.slice(0,r),o=n.slice(r),s=n.slice(0,r),u=e(a,s),l=e(i,o),c=e(v(a,i),v(s,o)),d=v(v(u,S(_(_(c,u),l),r)),S(l,2*r));return h(d),d}(u,l):T(u,l),c)},s.prototype.times=s.prototype.multiply,u.prototype._multiplyBySmall=function(e){return c(e.value*this.value)?new u(e.value*this.value):w(Math.abs(e.value),d(Math.abs(this.value)),this.sign!==e.sign)},s.prototype._multiplyBySmall=function(e){return 0===e.value?o[0]:1===e.value?this:-1===e.value?this.negate():w(Math.abs(e.value),this.value,this.sign!==e.sign)},u.prototype.multiply=function(e){return K(e)._multiplyBySmall(this)},u.prototype.times=u.prototype.multiply,l.prototype.multiply=function(e){return new l(this.value*K(e).value)},l.prototype.times=l.prototype.multiply,s.prototype.square=function(){return new s(A(this.value),!1)},u.prototype.square=function(){var e=this.value*this.value;return c(e)?new u(e):new s(A(d(Math.abs(this.value))),!1)},l.prototype.square=function(e){return new l(this.value*this.value)},s.prototype.divmod=function(e){var t=L(this,e);return{quotient:t[0],remainder:t[1]}},l.prototype.divmod=u.prototype.divmod=s.prototype.divmod,s.prototype.divide=function(e){return L(this,e)[0]},l.prototype.over=l.prototype.divide=function(e){return new l(this.value/K(e).value)},u.prototype.over=u.prototype.divide=s.prototype.over=s.prototype.divide,s.prototype.mod=function(e){return L(this,e)[1]},l.prototype.mod=l.prototype.remainder=function(e){return new l(this.value%K(e).value)},u.prototype.remainder=u.prototype.mod=s.prototype.remainder=s.prototype.mod,s.prototype.pow=function(e){var t,n,r,i=K(e),a=this.value,s=i.value;if(0===s)return o[1];if(0===a)return o[0];if(1===a)return o[1];if(-1===a)return i.isEven()?o[1]:o[-1];if(i.sign)return o[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&c(t=Math.pow(a,s)))return new u(m(t));for(n=this,r=o[1];!0&s&&(r=r.times(n),--s),0!==s;)s/=2,n=n.square();return r},u.prototype.pow=s.prototype.pow,l.prototype.pow=function(e){var t=K(e),n=this.value,r=t.value,i=BigInt(0),a=BigInt(1),s=BigInt(2);if(r===i)return o[1];if(n===i)return o[0];if(n===a)return o[1];if(n===BigInt(-1))return t.isEven()?o[1]:o[-1];if(t.isNegative())return new l(i);for(var u=this,c=o[1];(r&a)===a&&(c=c.times(u),--r),r!==i;)r/=s,u=u.square();return c},s.prototype.modPow=function(e,t){if(e=K(e),(t=K(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var n=o[1],r=this.mod(t);e.isPositive();){if(r.isZero())return o[0];e.isOdd()&&(n=n.multiply(r).mod(t)),e=e.divide(2),r=r.square().mod(t)}return n},l.prototype.modPow=u.prototype.modPow=s.prototype.modPow,s.prototype.compareAbs=function(e){var t=K(e),n=this.value,r=t.value;return t.isSmall?1:C(n,r)},u.prototype.compareAbs=function(e){var t=K(e),n=Math.abs(this.value),r=t.value;return t.isSmall?n===(r=Math.abs(r))?0:n>r?1:-1:-1},l.prototype.compareAbs=function(e){var t=this.value,n=K(e).value;return(t=t>=0?t:-t)===(n=n>=0?n:-n)?0:t>n?1:-1},s.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=K(e),n=this.value,r=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:C(n,r)*(this.sign?-1:1)},s.prototype.compareTo=s.prototype.compare,u.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=K(e),n=this.value,r=t.value;return t.isSmall?n==r?0:n>r?1:-1:n<0!==t.sign?n<0?-1:1:n<0?1:-1},u.prototype.compareTo=u.prototype.compare,l.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=this.value,n=K(e).value;return t===n?0:t>n?1:-1},l.prototype.compareTo=l.prototype.compare,s.prototype.equals=function(e){return 0===this.compare(e)},l.prototype.eq=l.prototype.equals=u.prototype.eq=u.prototype.equals=s.prototype.eq=s.prototype.equals,s.prototype.notEquals=function(e){return 0!==this.compare(e)},l.prototype.neq=l.prototype.notEquals=u.prototype.neq=u.prototype.notEquals=s.prototype.neq=s.prototype.notEquals,s.prototype.greater=function(e){return this.compare(e)>0},l.prototype.gt=l.prototype.greater=u.prototype.gt=u.prototype.greater=s.prototype.gt=s.prototype.greater,s.prototype.lesser=function(e){return this.compare(e)<0},l.prototype.lt=l.prototype.lesser=u.prototype.lt=u.prototype.lesser=s.prototype.lt=s.prototype.lesser,s.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},l.prototype.geq=l.prototype.greaterOrEquals=u.prototype.geq=u.prototype.greaterOrEquals=s.prototype.geq=s.prototype.greaterOrEquals,s.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},l.prototype.leq=l.prototype.lesserOrEquals=u.prototype.leq=u.prototype.lesserOrEquals=s.prototype.leq=s.prototype.lesserOrEquals,s.prototype.isEven=function(){return 0==(1&this.value[0])},u.prototype.isEven=function(){return 0==(1&this.value)},l.prototype.isEven=function(){return(this.value&BigInt(1))===BigInt(0)},s.prototype.isOdd=function(){return 1==(1&this.value[0])},u.prototype.isOdd=function(){return 1==(1&this.value)},l.prototype.isOdd=function(){return(this.value&BigInt(1))===BigInt(1)},s.prototype.isPositive=function(){return!this.sign},u.prototype.isPositive=function(){return this.value>0},l.prototype.isPositive=u.prototype.isPositive,s.prototype.isNegative=function(){return this.sign},u.prototype.isNegative=function(){return this.value<0},l.prototype.isNegative=u.prototype.isNegative,s.prototype.isUnit=function(){return!1},u.prototype.isUnit=function(){return 1===Math.abs(this.value)},l.prototype.isUnit=function(){return this.abs().value===BigInt(1)},s.prototype.isZero=function(){return!1},u.prototype.isZero=function(){return 0===this.value},l.prototype.isZero=function(){return this.value===BigInt(0)},s.prototype.isDivisibleBy=function(e){var t=K(e);return!t.isZero()&&(!!t.isUnit()||(0===t.compareAbs(2)?this.isEven():this.mod(t).isZero()))},l.prototype.isDivisibleBy=u.prototype.isDivisibleBy=s.prototype.isDivisibleBy,s.prototype.isPrime=function(e){var t=D(this);if(void 0!==t)return t;var n=this.abs(),i=n.bitLength();if(i<=64)return k(n,[2,3,5,7,11,13,17,19,23,29,31,37]);for(var a=Math.log(2)*i.toJSNumber(),o=Math.ceil(!0===e?2*Math.pow(a,2):a),s=[],u=0;u<o;u++)s.push(r(u+2));return k(n,s)},l.prototype.isPrime=u.prototype.isPrime=s.prototype.isPrime,s.prototype.isProbablePrime=function(e){var t=D(this);if(void 0!==t)return t;for(var n=this.abs(),i=void 0===e?5:e,a=[],o=0;o<i;o++)a.push(r.randBetween(2,n.minus(2)));return k(n,a)},l.prototype.isProbablePrime=u.prototype.isProbablePrime=s.prototype.isProbablePrime,s.prototype.modInv=function(e){for(var t,n,i,a=r.zero,o=r.one,s=K(e),u=this.abs();!u.isZero();)t=s.divide(u),n=a,i=s,a=o,s=u,o=n.subtract(t.multiply(o)),u=i.subtract(t.multiply(u));if(!s.isUnit())throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===a.compare(0)&&(a=a.add(e)),this.isNegative()?a.negate():a},l.prototype.modInv=u.prototype.modInv=s.prototype.modInv,s.prototype.next=function(){var e=this.value;return this.sign?b(e,1,this.sign):new s(y(e,1),this.sign)},u.prototype.next=function(){var e=this.value;return e+1<n?new u(e+1):new s(i,!1)},l.prototype.next=function(){return new l(this.value+BigInt(1))},s.prototype.prev=function(){var e=this.value;return this.sign?new s(y(e,1),!0):b(e,1,this.sign)},u.prototype.prev=function(){var e=this.value;return e-1>-n?new u(e-1):new s(i,!0)},l.prototype.prev=function(){return new l(this.value-BigInt(1))};for(var P=[1];2*P[P.length-1]<=t;)P.push(2*P[P.length-1]);var I=P.length,O=P[I-1];function R(e){return Math.abs(e)<=t}function x(e,t,n){t=K(t);for(var i=e.isNegative(),a=t.isNegative(),o=i?e.not():e,s=a?t.not():t,u=0,l=0,c=null,d=null,f=[];!o.isZero()||!s.isZero();)u=(c=L(o,O))[1].toJSNumber(),i&&(u=O-1-u),l=(d=L(s,O))[1].toJSNumber(),a&&(l=O-1-l),o=c[0],s=d[0],f.push(n(u,l));for(var h=0!==n(i?1:0,a?1:0)?r(-1):r(0),p=f.length-1;p>=0;p-=1)h=h.multiply(O).add(r(f[p]));return h}function N(e){var n=e.value,r="number"==typeof n?n|1<<30:"bigint"==typeof n?n|BigInt(1<<30):n[0]+n[1]*t|1073758208;return r&-r}function j(e,t){return e=K(e),t=K(t),e.greater(t)?e:t}function F(e,t){return e=K(e),t=K(t),e.lesser(t)?e:t}function U(e,t){if(e=K(e).abs(),t=K(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var n,r,i=o[1];e.isEven()&&t.isEven();)n=F(N(e),N(t)),e=e.divide(n),t=t.divide(n),i=i.multiply(n);for(;e.isEven();)e=e.divide(N(e));do{for(;t.isEven();)t=t.divide(N(t));e.greater(t)&&(r=t,t=e,e=r),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}s.prototype.shiftLeft=function(e){var t=K(e).toJSNumber();if(!R(t))throw new Error(String(t)+" is too large for shifting.");if(t<0)return this.shiftRight(-t);var n=this;if(n.isZero())return n;for(;t>=I;)n=n.multiply(O),t-=I-1;return n.multiply(P[t])},l.prototype.shiftLeft=u.prototype.shiftLeft=s.prototype.shiftLeft,s.prototype.shiftRight=function(e){var t,n=K(e).toJSNumber();if(!R(n))throw new Error(String(n)+" is too large for shifting.");if(n<0)return this.shiftLeft(-n);for(var r=this;n>=I;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;r=(t=L(r,O))[1].isNegative()?t[0].prev():t[0],n-=I-1}return(t=L(r,P[n]))[1].isNegative()?t[0].prev():t[0]},l.prototype.shiftRight=u.prototype.shiftRight=s.prototype.shiftRight,s.prototype.not=function(){return this.negate().prev()},l.prototype.not=u.prototype.not=s.prototype.not,s.prototype.and=function(e){return x(this,e,(function(e,t){return e&t}))},l.prototype.and=u.prototype.and=s.prototype.and,s.prototype.or=function(e){return x(this,e,(function(e,t){return e|t}))},l.prototype.or=u.prototype.or=s.prototype.or,s.prototype.xor=function(e){return x(this,e,(function(e,t){return e^t}))},l.prototype.xor=u.prototype.xor=s.prototype.xor,s.prototype.bitLength=function(){var e=this;return e.compareTo(r(0))<0&&(e=e.negate().subtract(r(1))),0===e.compareTo(r(0))?r(0):r(function e(t,n){if(n.compareTo(t)<=0){var i=e(t,n.square(n)),a=i.p,o=i.e,s=a.multiply(n);return s.compareTo(t)<=0?{p:s,e:2*o+1}:{p:a,e:2*o}}return{p:r(1),e:0}}(e,r(2)).e).add(r(1))},l.prototype.bitLength=u.prototype.bitLength=s.prototype.bitLength;var B=function(e,t,n,r){n=n||"0123456789abcdefghijklmnopqrstuvwxyz",e=String(e),r||(e=e.toLowerCase(),n=n.toLowerCase());var i,a=e.length,o=Math.abs(t),s={};for(i=0;i<n.length;i++)s[n[i]]=i;for(i=0;i<a;i++)if("-"!==(c=e[i])&&c in s&&s[c]>=o){if("1"===c&&1===o)continue;throw new Error(c+" is not a valid digit in base "+t+".")}t=K(t);var u=[],l="-"===e[0];for(i=l?1:0;i<e.length;i++){var c;if((c=e[i])in s)u.push(K(s[c]));else{if("<"!==c)throw new Error(c+" is not a valid character");var d=i;do{i++}while(">"!==e[i]&&i<e.length);u.push(K(e.slice(d+1,i)))}}return Y(u,t,l)};function Y(e,t,n){var r,i=o[0],a=o[1];for(r=e.length-1;r>=0;r--)i=i.add(e[r].times(a)),a=a.times(t);return n?i.negate():i}function H(e,t){if((t=r(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e.toJSNumber())).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var n=Array.apply(null,Array(e.toJSNumber()-1)).map(Array.prototype.valueOf,[0,1]);return n.unshift([1]),{value:[].concat.apply([],n),isNegative:!1}}var i=!1;if(e.isNegative()&&t.isPositive()&&(i=!0,e=e.abs()),t.isUnit())return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(e.toJSNumber())).map(Number.prototype.valueOf,1),isNegative:i};for(var a,o=[],s=e;s.isNegative()||s.compareAbs(t)>=0;){a=s.divmod(t),s=a.quotient;var u=a.remainder;u.isNegative()&&(u=t.minus(u).abs(),s=s.next()),o.push(u.toJSNumber())}return o.push(s.toJSNumber()),{value:o.reverse(),isNegative:i}}function V(e,t,n){var r=H(e,t);return(r.isNegative?"-":"")+r.value.map((function(e){return function(e,t){return e<(t=t||"0123456789abcdefghijklmnopqrstuvwxyz").length?t[e]:"<"+e+">"}(e,n)})).join("")}function G(e){if(c(+e)){var t=+e;if(t===m(t))return a?new l(BigInt(t)):new u(t);throw new Error("Invalid integer: "+e)}var n="-"===e[0];n&&(e=e.slice(1));var r=e.split(/e/i);if(r.length>2)throw new Error("Invalid integer: "+r.join("e"));if(2===r.length){var i=r[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==m(i)||!c(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var o=r[0],d=o.indexOf(".");if(d>=0&&(i-=o.length-d-1,o=o.slice(0,d)+o.slice(d+1)),i<0)throw new Error("Cannot include negative exponent part for integers");e=o+=new Array(i+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);if(a)return new l(BigInt(n?"-"+e:e));for(var f=[],p=e.length,g=p-7;p>0;)f.push(+e.slice(g,p)),(g-=7)<0&&(g=0),p-=7;return h(f),new s(f,n)}function K(e){return"number"==typeof e?function(e){if(a)return new l(BigInt(e));if(c(e)){if(e!==m(e))throw new Error(e+" is not an integer.");return new u(e)}return G(e.toString())}(e):"string"==typeof e?G(e):"bigint"==typeof e?new l(e):e}s.prototype.toArray=function(e){return H(this,e)},u.prototype.toArray=function(e){return H(this,e)},l.prototype.toArray=function(e){return H(this,e)},s.prototype.toString=function(e,t){if(void 0===e&&(e=10),10!==e)return V(this,e,t);for(var n,r=this.value,i=r.length,a=String(r[--i]);--i>=0;)n=String(r[i]),a+="0000000".slice(n.length)+n;return(this.sign?"-":"")+a},u.prototype.toString=function(e,t){return void 0===e&&(e=10),10!=e?V(this,e,t):String(this.value)},l.prototype.toString=u.prototype.toString,l.prototype.toJSON=s.prototype.toJSON=u.prototype.toJSON=function(){return this.toString()},s.prototype.valueOf=function(){return parseInt(this.toString(),10)},s.prototype.toJSNumber=s.prototype.valueOf,u.prototype.valueOf=function(){return this.value},u.prototype.toJSNumber=u.prototype.valueOf,l.prototype.valueOf=l.prototype.toJSNumber=function(){return parseInt(this.toString(),10)};for(var W=0;W<1e3;W++)o[W]=K(W),W>0&&(o[-W]=K(-W));return o.one=o[1],o.zero=o[0],o.minusOne=o[-1],o.max=j,o.min=F,o.gcd=U,o.lcm=function(e,t){return e=K(e).abs(),t=K(t).abs(),e.divide(U(e,t)).multiply(t)},o.isInstance=function(e){return e instanceof s||e instanceof u||e instanceof l},o.randBetween=function(e,n){var r=F(e=K(e),n=K(n)),i=j(e,n).subtract(r).add(1);if(i.isSmall)return r.add(Math.floor(Math.random()*i));for(var a=H(i,t).value,s=[],u=!0,l=0;l<a.length;l++){var c=u?a[l]:t,d=m(Math.random()*c);s.push(d),d<c&&(u=!1)}return r.add(o.fromArray(s,t,!1))},o.fromArray=function(e,t,n){return Y(e.map(K),K(t||10),n)},o}();e.hasOwnProperty("exports")&&(e.exports=r),void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}).call(this,n(103)(e))},59:function(e,t,n){"use strict";t.a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null}},99:function(e,t,n){"use strict";var r=n(59),i=n(17),a=n(5);function o(e){var t,n,r,o,s,u,l,c,d,f=(e=e||{}).streamProcessor,h=e.baseURLController,p=e.debug;function m(){o&&(n.debug("Stop"),clearTimeout(u),o=!1,l=null,c=null)}function g(){if(o){var e=f.getRepresentationController().getCurrentRepresentation(),t=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],n=t.SegmentTemplate.SegmentTimeline.S_asArray,r=function(e,t,n){var r=e.SegmentTemplate.timescale,o=new i.a;return o.mediaType=s,o.type=a.a.MSS_FRAGMENT_INFO_SEGMENT_TYPE,o.startTime=n.t/r,o.duration=n.d/r,o.timescale=r,o.quality=t.index,o.index=d++,o.mediaInfo=f.getMediaInfo(),o.adaptationIndex=t.adaptation.index,o.representationId=t.id,o.url=h.resolve(t.path).url+e.SegmentTemplate.media,o.url=o.url.replace("$Bandwidth$",t.bandwidth),o.url=o.url.replace("$Time$",n.tManifest?n.tManifest:n.t),o.url=o.url.replace("/Fragments(","/FragmentInfo("),o}(t,e,n[n.length-1]);v.call(this,r)}}function v(e){if(f.getFragmentModel().isFragmentLoadedOrPending(e))return n.debug("End of timeline"),void m();r.executeRequest(e)}return t={initialize:function(){s=f.getType(),r=f.getFragmentModel(),o=!1,l=null,c=null},controllerType:"MssFragmentInfoController",start:function(){o||(n.debug("Start"),o=!0,d=0,g())},fragmentInfoLoaded:function(e){if(o){var t,r,i,a=e.request;e.response?(null===l&&(l=(new Date).getTime()),c||(c=a.startTime),r=((new Date).getTime()-l)/1e3,t=a.startTime+a.duration-c,i=Math.max(0,t-r),clearTimeout(u),u=setTimeout((function(){u=null,g()}),1e3*i)):n.error("Load error",a.url)}},getType:function(){return s},reset:function(){m()}},n=p.getLogger(t),t}o.__dashjs_factory_name="MssFragmentInfoController";var s=dashjs.FactoryMaker.getClassFactory(o),u=n(10);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this)).MSS_NO_TFRF_CODE=200,e.MSS_UNSUPPORTED_CODEC_CODE=201,e.MSS_NO_TFRF_MESSAGE="Missing tfrf in live media segment",e.MSS_UNSUPPORTED_CODEC_MESSAGE="Unsupported codec",e}return n}(n(28).a)),p=n(4);function m(e){var t,n,r,i=(e=e||{}).dashMetrics,a=e.playbackController,o=e.errHandler,s=e.eventBus,l=e.ISOBoxer,c=e.debug;function d(e,t,i,l){var c=l.getRepresentationController().getCurrentRepresentation(),d=c.adaptation.period.mpd.manifest,m=d.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index],g=m.SegmentTemplate.timescale;if(n=l.getType(),"dynamic"===d.type||d.timeShiftBufferDepth)if(t){var v,y,_,b,T=m.SegmentTemplate.SegmentTimeline.S,E=t.entry,S=null,w=null;if(0!==E.length&&(v=E[0],!("static"===d.type&&(y=T[0].tManifest?parseFloat(T[0].tManifest):T[0].t,v.fragment_absolute_time>y+d.timeShiftBufferDepth*g)))){if(y=T[T.length-1].tManifest?parseFloat(T[T.length-1].tManifest):T[T.length-1].t,v.fragment_absolute_time<=y)return _={start:T[0].t/g,end:i.baseMediaDecodeTime/g+e.duration},void f(e.mediaType,_,l.getStreamInfo().manifestInfo);(S={}).t=v.fragment_absolute_time,S.d=v.fragment_duration,T[0].tManifest&&(S.t-=parseFloat(T[0].tManifest)-T[0].t,S.tManifest=v.fragment_absolute_time);var A=T[T.length-1];if(A.t+A.d!==S.t&&(r.debug("Patch segment duration - t = ",A.t+", d = "+A.d+" => "+(S.t-A.t)),A.d=S.t-A.t),T.push(S),"static"!==d.type){if(d.timeShiftBufferDepth&&d.timeShiftBufferDepth>0)for(w=((S=T[T.length-1]).t-d.timeShiftBufferDepth*g)/g,b=((S=T[0]).t+S.d)/g;b<w&&(a.isPaused()||!(a.getTime()<b));)T.splice(0,1),b=((S=T[0]).t+S.d)/g;_={start:T[0].t/g,end:i.baseMediaDecodeTime/g+e.duration},f(n,_,l.getStreamInfo().manifestInfo)}else"video"===n&&(b=((S=T[T.length-1]).t+S.d)/g)>c.adaptation.period.duration&&s.trigger(p.a.MANIFEST_VALIDITY_CHANGED,{sender:this,newDuration:b})}}else o.error(new u.a(h.MSS_NO_TFRF_CODE,h.MSS_NO_TFRF_MESSAGE))}function f(e,t,n){if("video"===e||"audio"===e){var o=i.getCurrentDVRInfo(e);(!o||t.end>o.range.end)&&(r.debug("Update DVR range: ["+t.start+" - "+t.end+"]"),i.addDVRInfo(e,a.getTime(),n,t),a.updateCurrentTime(e))}}function m(e,t){var n=8,r=0;for(r=0;r<e.boxes.length;r++){if(e.boxes[r].type===t)return n;n+=e.boxes[r].size}return n}return t={convertFragment:function(e,t){var n,r=l.parseBuffer(e.response),i=r.fetch("tfhd");i.track_ID=e.request.mediaInfo.index+1;var a=r.fetch("tfdt"),o=r.fetch("traf");null===a&&((a=l.createFullBox("tfdt",o,i)).version=1,a.flags=0,a.baseMediaDecodeTime=Math.floor(e.request.startTime*e.request.timescale));var s=r.fetch("trun"),u=r.fetch("tfxd");u&&(u._parent.boxes.splice(u._parent.boxes.indexOf(u),1),u=null);var c=r.fetch("tfrf");d(e.request,c,a,t),c&&(c._parent.boxes.splice(c._parent.boxes.indexOf(c),1),c=null);var f=r.fetch("sepiff");if(null!==f){f.type="senc",f.usertype=void 0;var h=r.fetch("saio");if(null===h){(h=l.createFullBox("saio",o)).version=0,h.flags=0,h.entry_count=1,h.offset=[0];var p=l.createFullBox("saiz",o);if(p.version=0,p.flags=0,p.sample_count=f.sample_count,p.default_sample_info_size=0,p.sample_info_size=[],2&f.flags)for(n=0;n<f.sample_count;n+=1)p.sample_info_size[n]=10+6*f.entry[n].NumberOfEntries;else p.default_sample_info_size=8}}i.flags&=16777214,i.flags|=131072,s.flags|=1;var g=r.fetch("moof"),v=g.getLength();s.data_offset=v+8;var y=r.fetch("saio");if(null!==y){var _=m(g,"traf"),b=m(o,"senc");y.offset[0]=_+b+16}e.response=r.write()},updateSegmentList:function(e,t){if(!e.response)throw new Error("e.response parameter is missing");var n=l.parseBuffer(e.response),r=n.fetch("tfhd");r.track_ID=e.request.mediaInfo.index+1;var i=n.fetch("tfdt"),a=n.fetch("traf");null===i&&((i=l.createFullBox("tfdt",a,r)).version=1,i.flags=0,i.baseMediaDecodeTime=Math.floor(e.request.startTime*e.request.timescale));var o=n.fetch("tfrf");d(e.request,o,i,t),o&&(o._parent.boxes.splice(o._parent.boxes.indexOf(o),1),o=null)},getType:function(){return n}},r=c.getLogger(t),n="",t}m.__dashjs_factory_name="MssFragmentMoofProcessor";var g=dashjs.FactoryMaker.getClassFactory(m);function v(e){var t,n,r,i,a,o,s=(e=e||{}).constants,u=e.ISOBoxer,l=e.protectionController;function c(e){var c=u.createBox("moov",e);!function(e){var n=u.createFullBox("mvhd",e);n.version=1,n.creation_time=0,n.modification_time=0,n.timescale=a,n.duration=t.duration===1/0?0x10000000000000000:Math.round(t.duration*a),n.rate=1,n.volume=1,n.reserved1=0,n.reserved2=[0,0],n.matrix=[1,0,0,0,1,0,0,0,16384],n.pre_defined=[0,0,0,0,0,0],n.next_track_ID=o+1}(c);var g=u.createBox("trak",c);!function(e){var n=u.createFullBox("tkhd",e);n.version=1,n.flags=7,n.creation_time=0,n.modification_time=0,n.track_ID=o,n.reserved1=0,n.duration=t.duration===1/0?0x10000000000000000:Math.round(t.duration*a),n.reserved2=[0,0],n.layer=0,n.alternate_group=0,n.volume=1,n.reserved3=0,n.matrix=[1,0,0,0,1,0,0,0,16384],n.width=r.width,n.height=r.height}(g);var v=u.createBox("mdia",g);!function(e){var r=u.createFullBox("mdhd",e);r.version=1,r.creation_time=0,r.modification_time=0,r.timescale=a,r.duration=t.duration===1/0?0x10000000000000000:Math.round(t.duration*a),r.language=n.lang||"und",r.pre_defined=0}(v),function(e){var t=u.createFullBox("hdlr",e);switch(t.pre_defined=0,n.type){case s.VIDEO:t.handler_type="vide";break;case s.AUDIO:t.handler_type="soun";break;default:t.handler_type="meta"}t.name=r.id,t.reserved=[0,0,0]}(v);var y=u.createBox("minf",v);switch(n.type){case s.VIDEO:!function(e){var t=u.createFullBox("vmhd",e);t.flags=1,t.graphicsmode=0,t.opcolor=[0,0,0]}(y);break;case s.AUDIO:!function(e){var t=u.createFullBox("smhd",e);t.flags=1,t.balance=0,t.reserved=0}(y)}!function(e){var t=u.createFullBox("dref",e);t.entry_count=1,t.entries=[];var n=u.createFullBox("url ",t,!1);n.location="",n.flags=1,t.entries.push(n)}(u.createBox("dinf",y));var _=u.createBox("stbl",y);u.createFullBox("stts",_)._data=[0,0,0,0,0,0,0,0],u.createFullBox("stsc",_)._data=[0,0,0,0,0,0,0,0],u.createFullBox("stco",_)._data=[0,0,0,0,0,0,0,0],u.createFullBox("stsz",_)._data=[0,0,0,0,0,0,0,0,0,0,0,0],function(e){var t=u.createFullBox("stsd",e);switch(t.entries=[],n.type){case s.VIDEO:case s.AUDIO:t.entries.push(function(e){var t=r.codecs.substring(0,r.codecs.indexOf("."));switch(t){case"avc1":return function(e,t){var n;if((n=i?u.createBox("encv",e,!1):u.createBox("avc1",e,!1)).reserved1=[0,0,0,0,0,0],n.data_reference_index=1,n.pre_defined1=0,n.reserved2=0,n.pre_defined2=[0,0,0],n.height=r.height,n.width=r.width,n.horizresolution=72,n.vertresolution=72,n.reserved3=0,n.frame_count=1,n.compressorname=[10,65,86,67,32,67,111,100,105,110,103,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n.depth=24,n.pre_defined3=65535,n.config=function(){for(var e,t=null,n=15,i=[],a=[],o=0,s=0,u=0,l=r.codecPrivateData.split("00000001").slice(1),c=0;c<l.length;c++)switch(e=m(l[c]),31&e[0]){case 7:i.push(e),n+=e.length+2;break;case 8:a.push(e),n+=e.length+2}i.length>0&&(o=i[0][1],u=i[0][2],s=i[0][3]);var d=0;(t=new Uint8Array(n))[d++]=(4278190080&n)>>24,t[d++]=(16711680&n)>>16,t[d++]=(65280&n)>>8,t[d++]=255&n,t.set([97,118,99,67],d),d+=4,t[d++]=1,t[d++]=o,t[d++]=u,t[d++]=s,t[d++]=255,t[d++]=224|i.length;for(var f=0;f<i.length;f++)t[d++]=(65280&i[f].length)>>8,t[d++]=255&i[f].length,t.set(i[f],d),d+=i[f].length;t[d++]=a.length;for(var h=0;h<a.length;h++)t[d++]=(65280&a[h].length)>>8,t[d++]=255&a[h].length,t.set(a[h],d),d+=a[h].length;return t}(),i){var a=u.createBox("sinf",n);d(a,t),f(a),p(a)}return n}(e,t);case"mp4a":return function(e,t){var n;if((n=i?u.createBox("enca",e,!1):u.createBox("mp4a",e,!1)).reserved1=[0,0,0,0,0,0],n.data_reference_index=1,n.reserved2=[0,0],n.channelcount=r.audioChannels,n.samplesize=16,n.pre_defined=0,n.reserved_3=0,n.samplerate=r.audioSamplingRate<<16,n.esds=function(){var e=m(r.codecPrivateData),t=34+e.length,n=new Uint8Array(t),i=0;return n[i++]=(4278190080&t)>>24,n[i++]=(16711680&t)>>16,n[i++]=(65280&t)>>8,n[i++]=255&t,n.set([101,115,100,115],i),i+=4,n.set([0,0,0,0],i),i+=4,n[i++]=3,n[i++]=20+e.length,n[i++]=(65280&o)>>8,n[i++]=255&o,n[i++]=0,n[i++]=4,n[i++]=15+e.length,n[i++]=64,n[i]=20,n[i]|=0,n[i++]|=1,n[i++]=255,n[i++]=255,n[i++]=255,n[i++]=(4278190080&r.bandwidth)>>24,n[i++]=(16711680&r.bandwidth)>>16,n[i++]=(65280&r.bandwidth)>>8,n[i++]=255&r.bandwidth,n[i++]=(4278190080&r.bandwidth)>>24,n[i++]=(16711680&r.bandwidth)>>16,n[i++]=(65280&r.bandwidth)>>8,n[i++]=255&r.bandwidth,n[i++]=5,n[i++]=e.length,n.set(e,i),n}(),i){var a=u.createBox("sinf",n);d(a,t),f(a),p(a)}return n}(e,t);default:throw{code:h.MSS_UNSUPPORTED_CODEC_CODE,message:h.MSS_UNSUPPORTED_CODEC_MESSAGE,data:{codec:t}}}}(t))}t.entry_count=t.entries.length}(_),function(e){var t=u.createFullBox("trex",e);t.track_ID=o,t.default_sample_description_index=1,t.default_sample_duration=0,t.default_sample_size=0,t.default_sample_flags=0}(u.createBox("mvex",c)),i&&l&&function(e,t){var n,r,i;for(i=0;i<t.length;i+=1)(n=t[i].initData)&&(r=u.parseBuffer(n).fetch("pssh"))&&u.Utils.appendBox(e,r)}(c,l.getSupportedKeySystemsFromContentProtection(i))}function d(e,t){u.createBox("frma",e).data_format=function(e){var t,n=0;for(t=0;t<e.length;t+=1)n|=e.charCodeAt(t)<<8*(e.length-t-1);return n}(t)}function f(e){var t=u.createFullBox("schm",e);t.flags=0,t.version=0,t.scheme_type=1667591779,t.scheme_version=65536}function p(e){!function(e){var t=u.createFullBox("tenc",e);t.flags=0,t.version=0,t.default_IsEncrypted=1,t.default_IV_size=8,t.default_KID=i&&i.length>0&&i[0]["cenc:default_KID"]?i[0]["cenc:default_KID"]:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}(u.createBox("schi",e))}function m(e){var t,n=new Uint8Array(e.length/2);for(t=0;t<e.length/2;t+=1)n[t]=parseInt(""+e[2*t]+e[2*t+1],16);return n}return{generateMoov:function(e){var s;if(e&&e.adaptation)return n=(r=e).adaptation,t=n.period,o=n.index+1,i=t.mpd.manifest.Period_asArray[t.index].AdaptationSet_asArray[n.index].ContentProtection,a=t.mpd.manifest.Period_asArray[t.index].AdaptationSet_asArray[n.index].SegmentTemplate.timescale,function(e){var t=u.createBox("ftyp",e);t.major_brand="iso6",t.minor_version=1,t.compatible_brands=[],t.compatible_brands[0]="isom",t.compatible_brands[1]="iso6",t.compatible_brands[2]="msdh"}(s=u.createFile()),c(s),s.write()}}}v.__dashjs_factory_name="MssFragmentMoovProcessor";var y=dashjs.FactoryMaker.getClassFactory(v);function _(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function b(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}function T(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}function E(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("IV_size","uint",8),this._procEntries("entry",this.sample_count,(function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,(function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)})))}))}function S(){_(this.usertype,[109,29,155,5,66,213,68,230,128,226,20,29,175,247,87,178])&&(this._procFullBox(),this._parsing&&(this.type="tfxd"),this._procField("fragment_absolute_time","uint",1===this.version?64:32),this._procField("fragment_duration","uint",1===this.version?64:32)),_(this.usertype,[212,128,126,242,202,57,70,149,142,84,38,203,158,70,167,159])&&(this._procFullBox(),this._parsing&&(this.type="tfrf"),this._procField("fragment_count","uint",8),this._procEntries("entry",this.fragment_count,(function(e){this._procEntryField(e,"fragment_absolute_time","uint",1===this.version?64:32),this._procEntryField(e,"fragment_duration","uint",1===this.version?64:32)}))),_(this.usertype,[162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244])&&(this._parsing&&(this.type="sepiff"),E.call(this))}function w(e){e=e||{};var t,n,r,i=this.context,o=e.dashMetrics,s=e.playbackController,u=e.eventBus,l=e.protectionController,c=e.ISOBoxer,d=e.debug;return r={generateMoov:function(e){return t.generateMoov(e)},processFragment:function(e,t){if(!e||!e.request||!e.response)throw new Error("e parameter is missing or malformed");"MediaSegment"===e.request.type?n.convertFragment(e,t):e.request.type===a.a.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(n.updateSegmentList(e,t),e.sender=null)}},c.addBoxProcessor("uuid",S),c.addBoxProcessor("saio",b),c.addBoxProcessor("saiz",T),c.addBoxProcessor("senc",E),t=y(i).create({protectionController:l,constants:e.constants,ISOBoxer:c}),n=g(i).create({dashMetrics:o,playbackController:s,ISOBoxer:c,eventBus:u,debug:d,errHandler:e.errHandler}),r}w.__dashjs_factory_name="MssFragmentProcessor";var A=dashjs.FactoryMaker.getClassFactory(w),M=n(57),L=n.n(M);function C(e){var t,n,r,i=(e=e||{}).BASE64,a=e.debug,o=e.constants,s=e.manifestModel,u=e.settings,l=["AAC","AACL","AACH","AACP","AVC1","H264","TTML","DFXP"],c={CAPT:"main",SUBT:"alternate",DESC:"main"},d={DESC:"2"},f={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},h={video:"video/mp4",audio:"audio/mp4",text:"application/mp4"};function p(e,t){var n=e.getAttribute(t);return!!n&&"true"===n.toLowerCase()}function m(e,t){var n,r,i,a,o,s={},u=[],l=e.getAttribute("Name"),f=e.getAttribute("Type"),p=e.getAttribute("Language"),m=p?f+"_"+p:f;if(s.id=l||m,s.contentType=f,s.lang=p||"und",s.mimeType=h[f],s.subType=e.getAttribute("Subtype"),s.maxWidth=e.getAttribute("MaxWidth"),s.maxHeight=e.getAttribute("MaxHeight"),s.subType){if(c[s.subType]){var v={schemeIdUri:"urn:mpeg:dash:role:2011",value:c[s.subType]};s.Role=v,s.Role_asArray=[v]}if(d[s.subType]){var y={schemeIdUri:"urn:tva:metadata:cs:AudioPurposeCS:2007",value:d[s.subType]};s.Accessibility=y,s.Accessibility_asArray=[y]}}for(n=function(e,t){var n,r,i,a={};return n=(n=(i=e.getAttribute("Url"))?i.replace("{bitrate}","$Bandwidth$"):null)?n.replace("{start time}","$Time$"):null,r=(r=e.getAttribute("TimeScale"))?parseFloat(r):t,a.media=n,a.timescale=r,a.SegmentTimeline=function(e,t){var n,r,i,a,o,s,u={},l=e.getElementsByTagName("c"),c=[],d=0;for(a=0;a<l.length;a++)if(n={},(i=l[a].getAttribute("t"))&&L()(i).greater(L()(Number.MAX_SAFE_INTEGER))&&(n.tManifest=i),n.t=parseFloat(i),n.d=parseFloat(l[a].getAttribute("d")),0!==a||n.t||(n.t=0),a>0&&((r=c[c.length-1]).d||(r.tManifest?r.d=L()(i).subtract(L()(r.tManifest)).toJSNumber():r.d=n.t-r.t,d+=r.d),n.t||(r.tManifest?(n.tManifest=L()(r.tManifest).add(L()(r.d)).toString(),n.t=parseFloat(n.tManifest)):n.t=r.t+r.d)),n.d&&(d+=n.d),c.push(n),s=parseFloat(l[a].getAttribute("r")))for(o=0;o<s-1;o++)r=c[c.length-1],(n={}).t=r.t+r.d,n.d=r.d,r.tManifest&&(n.tManifest=L()(r.tManifest).add(L()(r.d)).toString()),d+=n.d,c.push(n);return u.S=c,u.S_asArray=c,u.duration=d/t,u}(e,a.timescale),a.availabilityTimeOffset="INF",a}(e,t),r=e.getElementsByTagName("QualityLevel"),a=0;a<r.length;a++)r[a].BaseURL=s.BaseURL,r[a].mimeType=s.mimeType,o=r[a].getAttribute("Index"),r[a].Id=s.id+(null!==o?"_"+o:""),null!==(i=g(r[a],e))&&(i.SegmentTemplate=n,u.push(i));return 0===u.length?null:(s.Representation=u.length>1?u:u[0],s.Representation_asArray=u,s.SegmentTemplate=n,s)}function g(e,t){var r,i,a={},s=t.getAttribute("Type"),u=null;if(a.id=e.Id,a.bandwidth=parseInt(e.getAttribute("Bitrate"),10),a.mimeType=e.mimeType,r=parseInt(e.getAttribute("MaxWidth"),10),i=parseInt(e.getAttribute("MaxHeight"),10),isNaN(r)||(a.width=r),isNaN(i)||(a.height=i),null!==(u=e.getAttribute("FourCC"))&&""!==u||(u=t.getAttribute("FourCC")),null===u||""===u)if(s===o.AUDIO)u="AAC";else if(s===o.VIDEO)return n.debug('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;return-1===l.indexOf(u.toUpperCase())?(n.warn("Codec not supported: "+u),null):("H264"===u||"AVC1"===u?a.codecs=function(e){var t,n=e.getAttribute("CodecPrivateData").toString();return"avc1."+((t=/00000001[0-9]7/.exec(n))&&t[0]?n.substr(n.indexOf(t[0])+10,6):void 0)}(e):u.indexOf("AAC")>=0?(a.codecs=function(e,t){var n,r,i,a,o=parseInt(e.getAttribute("SamplingRate"),10),s=e.getAttribute("CodecPrivateData").toString(),u=0;return"AACH"===t&&(u=5),void 0===s||""===s?(u=2,i=f[o],"AACH"===t?(u=5,s=new Uint8Array(4),a=f[2*o],s[0]=u<<3|i>>1,s[1]=i<<7|e.Channels<<3|a>>1,s[2]=a<<7|8,s[3]=0,(r=new Uint16Array(2))[0]=(s[0]<<8)+s[1],r[1]=(s[2]<<8)+s[3],n=r[0].toString(16),n=r[0].toString(16)+r[1].toString(16)):((s=new Uint8Array(2))[0]=u<<3|i>>1,s[1]=i<<7|parseInt(e.getAttribute("Channels"),10)<<3,(r=new Uint16Array(1))[0]=(s[0]<<8)+s[1],n=r[0].toString(16)),s=(s=""+n).toUpperCase(),e.setAttribute("CodecPrivateData",s)):0===u&&(u=(248&parseInt(s.substr(0,2),16))>>3),"mp4a.40."+u}(e,u),a.audioSamplingRate=parseInt(e.getAttribute("SamplingRate"),10),a.audioChannels=parseInt(e.getAttribute("Channels"),10)):(u.indexOf("TTML")||u.indexOf("DFXP"))&&(a.codecs=o.STPP),a.codecPrivateData=""+e.getAttribute("CodecPrivateData"),a.BaseURL=e.BaseURL,a)}function v(e){var t,n,r;return(t=function(e){var t,n,r,i=0;for(e[i+3],e[i+2],e[i+1],e[i],e[(i+=4)+1],e[i],i+=2;i<e.length;)if(t=(e[i+1]<<8)+e[i],i+=2,1===t)return n=(e[i+1]<<8)+e[i],i+=2,(r=new Uint8Array(n)).set(e.subarray(i,i+n)),r;return null}(i.decodeArray(e.firstChild.data)))&&(t=new Uint16Array(t.buffer),t=String.fromCharCode.apply(null,t),n=(new DOMParser).parseFromString(t,"application/xml").querySelector("KID").textContent,y(r=n=i.decodeArray(n),0,3),y(r,1,2),y(r,4,5),y(r,6,7)),n}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e){var t,n,a,l,c,d,f,h,g,y,_,b={},T=[],E=e.getElementsByTagName("SmoothStreamingMedia")[0],S=e.getElementsByTagName("Protection")[0],w=null;b.protocol="MSS",b.profiles="urn:mpeg:dash:profile:isoff-live:2011",b.type=p(E,"IsLive")?"dynamic":"static",h=E.getAttribute("TimeScale"),b.timescale=h?parseFloat(h):1e7;var A=parseFloat(E.getAttribute("DVRWindowLength"));"dynamic"!==b.type||0!==A&&!isNaN(A)||(A=1/0),0===A&&p(E,"CanSeek")&&(A=1/0),A>0&&(b.timeShiftBufferDepth=A/b.timescale);var M=parseFloat(E.getAttribute("Duration"));for(b.mediaPresentationDuration=0===M?1/0:M/b.timescale,b.minBufferTime=2,b.ttmlTimeIsRelative=!0,"dynamic"===b.type&&M>0&&(b.type="static",b.timeShiftBufferDepth=M/b.timescale),"dynamic"===b.type&&(b.refreshManifestOnSwitchTrack=!0,b.doNotUpdateDVRWindowOnBufferUpdated=!0,b.ignorePostponeTimePeriod=!0,b.availabilityStartTime=new Date(null)),b.Period=function(e,t){var n,r,i={AdaptationSet_asArray:[]};n=e.getElementsByTagName("StreamIndex");for(var a=0;a<n.length;a++)null!==(r=m(n[a],t))&&i.AdaptationSet_asArray.push(r);return i.AdaptationSet_asArray.length>0&&(i.AdaptationSet=i.AdaptationSet_asArray.length>1?i.AdaptationSet_asArray:i.AdaptationSet_asArray[0]),i}(E,b.timescale),b.Period_asArray=[b.Period],(t=b.Period).start=0,void 0!==S&&((w=e.getElementsByTagName("ProtectionHeader")[0]).firstChild.data=w.firstChild.data.replace(/\n|\r/g,""),l=v(w),(a=function(e){var t={__text:e.firstChild.data,__prefix:"mspr"};return{schemeIdUri:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",value:"com.microsoft.playready",pro:t,pro_asArray:t}}(w))["cenc:default_KID"]=l,T.push(a),(a=function(e){var t={schemeIdUri:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",value:"com.widevine.alpha"};if(!e)return t;var n=new Uint8Array(2+e.length);n[0]=18,n[1]=16,n.set(e,2);var r=32+n.length,a=new Uint8Array(r),o=0;return a[o++]=(4278190080&r)>>24,a[o++]=(16711680&r)>>16,a[o++]=(65280&r)>>8,a[o++]=255&r,a.set([112,115,115,104,0,0,0,0],o),o+=8,a.set([237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237],o),o+=16,a[o++]=(4278190080&n.length)>>24,a[o++]=(16711680&n.length)>>16,a[o++]=(65280&n.length)>>8,a[o++]=255&n.length,a.set(n,o),a=String.fromCharCode.apply(null,a),a=i.encodeASCII(a),t.pssh={__text:a},t}(l))["cenc:default_KID"]=l,T.push(a),b.ContentProtection=T,b.ContentProtection_asArray=T),n=t.AdaptationSet_asArray,y=0;y<n.length;y+=1)n[y].SegmentTemplate.initialization="$Bandwidth$",void 0!==b.ContentProtection&&(n[y].ContentProtection=b.ContentProtection,n[y].ContentProtection_asArray=b.ContentProtection_asArray),"video"===n[y].contentType&&(g=n[y].SegmentTemplate.SegmentTimeline.S_asArray[0].d/n[y].SegmentTemplate.timescale,b.minBufferTime=g,"dynamic"===b.type&&b.timeShiftBufferDepth>0&&b.timeShiftBufferDepth!==1/0&&b.timeShiftBufferDepth>n[y].SegmentTemplate.SegmentTimeline.duration&&(b.timeShiftBufferDepth=n[y].SegmentTemplate.SegmentTimeline.duration));if(b.minBufferTime=Math.min(b.minBufferTime,b.timeShiftBufferDepth?b.timeShiftBufferDepth:1/0),"dynamic"===b.type){var L=u.get().streaming.delay.liveDelay;L||(L=g*(null===u.get().streaming.delay.liveDelayFragmentCount||isNaN(u.get().streaming.delay.liveDelayFragmentCount)?4:u.get().streaming.delay.liveDelayFragmentCount));var C=Math.max(b.timeShiftBufferDepth-10,b.timeShiftBufferDepth/2),D=Math.min(C,L),k=D-1.5*g;r={streaming:{buffer:{stableBufferTime:u.get().streaming.buffer.stableBufferTime,bufferTimeAtTopQuality:u.get().streaming.buffer.bufferTimeAtTopQuality,bufferTimeAtTopQualityLongForm:u.get().streaming.buffer.bufferTimeAtTopQualityLongForm},timeShiftBuffer:{calcFromSegmentTimeline:u.get().streaming.timeShiftBuffer.calcFromSegmentTimeline},delay:{liveDelay:u.get().streaming.delay.liveDelay}}},u.update({streaming:{buffer:{stableBufferTime:k,bufferTimeAtTopQuality:k,bufferTimeAtTopQualityLongForm:k},timeShiftBuffer:{calcFromSegmentTimeline:!0},delay:{liveDelay:D}}})}if(delete b.ContentProtection,delete b.ContentProtection_asArray,"static"===b.type){var P=s.getValue();if(P&&P.timestampOffset)c=P.timestampOffset;else for(y=0;y<n.length;y++)n[y].contentType!==o.AUDIO&&n[y].contentType!==o.VIDEO||(d=(f=n[y].SegmentTemplate.SegmentTimeline.S_asArray)[0].t,void 0===c&&(c=d),c=Math.min(c,d),b.mediaPresentationDuration=Math.min(b.mediaPresentationDuration,n[y].SegmentTemplate.SegmentTimeline.duration));if(c>0){for(b.timestampOffset=c,y=0;y<n.length;y++){for(f=n[y].SegmentTemplate.SegmentTimeline.S_asArray,_=0;_<f.length;_++)f[_].tManifest||(f[_].tManifest=f[_].t.toString()),f[_].t-=c;n[y].contentType!==o.AUDIO&&n[y].contentType!==o.VIDEO||(t.start=Math.max(f[0].t,t.start),n[y].SegmentTemplate.presentationTimeOffset=t.start)}t.start/=b.timescale}}return b.mediaPresentationDuration=Math.floor(1e3*b.mediaPresentationDuration)/1e3,t.duration=b.mediaPresentationDuration,b}return t={parse:function(e){var t,r,i=window.performance.now();t=function(e){var t=null;if(window.DOMParser&&(t=(new window.DOMParser).parseFromString(e,"text/xml")).getElementsByTagName("parsererror").length>0)throw new Error("parsing the manifest failed");return t}(e);var a=window.performance.now();if(null===t)return null;r=_(t,new Date);var o=window.performance.now();return n.info("Parsing complete: (xmlParsing: "+(a-i).toPrecision(3)+"ms, mss2dash: "+(o-a).toPrecision(3)+"ms, total: "+((o-i)/1e3).toPrecision(3)+"s)"),r},getMatchers:function(){return null},getIron:function(){return null},reset:function(){r&&u.update(r)}},n=a.getLogger(t),t}C.__dashjs_factory_name="MssParser";var D=dashjs.FactoryMaker.getClassFactory(C);function k(e){e=e||{};var t,n,o,l=this.context,c=e.eventBus,d=e.events,f=e.constants,h=e.initSegmentType,p=e.dashMetrics,m=e.playbackController,g=e.streamController,v=e.protectionController,y=A(l).create({dashMetrics:p,playbackController:m,protectionController:v,streamController:g,eventBus:c,constants:f,ISOBoxer:e.ISOBoxer,debug:e.debug,errHandler:e.errHandler});function _(e){return g.getActiveStreamProcessors().filter((function(t){return t.getType()===e}))[0]}function b(e){return n.filter((function(t){return t.getType()===e}))[0]}function T(){g.getActiveStreamProcessors().forEach((function(t){if(t.getType()===f.VIDEO||t.getType()===f.AUDIO||t.getType()===f.TEXT){var r=b(t.getType());r||((r=s(l).create({streamProcessor:t,baseURLController:e.baseURLController,debug:e.debug})).initialize(),n.push(r)),r.start()}}))}function E(t){var n=_(t.mediaType);if(n){var a=n.getRepresentationController().getCurrentRepresentation(),o=n.getMediaInfo(),s=new i.a;s.mediaType=a.adaptation.type,s.type=h,s.range=a.range,s.quality=a.index,s.mediaInfo=o,s.representationId=a.id;var l=function(e,t,n){var i=new r.a;return i.streamId=t,i.mediaInfo=e.mediaInfo,i.segmentType=e.type,i.start=e.startTime,i.duration=e.duration,i.end=i.start+i.duration,i.index=e.index,i.quality=e.quality,i.representationId=e.representationId,i.endFragment=n,i}(s,o.streamInfo.id,t.type!==d.FRAGMENT_LOADING_PROGRESS);try{l.bytes=y.generateMoov(a),c.trigger(d.INIT_FRAGMENT_LOADED,{chunk:l},{streamId:o.streamInfo.id,mediaType:a.adaptation.type})}catch(t){e.errHandler.error(new u.a(t.code,t.message,t.data))}t.sender=null}}function S(e){if(!e.error){var t=_(e.request.mediaType);if(t){if(y.processFragment(e,t),e.request.type===a.a.MSS_FRAGMENT_INFO_SEGMENT_TYPE){var n=b(e.request.mediaType);n&&n.fragmentInfoLoaded(e)}var r=e.request.mediaInfo.streamInfo.manifestInfo;r.isDynamic||r.dvrWindowSize===1/0||T()}}}function w(){m.getIsDynamic()&&0!==m.getTime()&&T()}function M(){m.getIsDynamic()&&0!==m.getTime()&&T()}function L(e){e&&e.data&&(e.data=e.data.replace(/http:\/\/www.w3.org\/2006\/10\/ttaf1/gi,"http://www.w3.org/ns/ttml"))}return o={reset:function(){t&&(t.reset(),t=void 0),c.off(d.INIT_FRAGMENT_NEEDED,E,this),c.off(d.PLAYBACK_PAUSED,w,this),c.off(d.PLAYBACK_SEEKING,M,this),c.off(d.FRAGMENT_LOADING_COMPLETED,S,this),c.off(d.TTML_TO_PARSE,L,this),n.forEach((function(e){e.reset()})),n=[]},createMssParser:function(){return t=D(l).create(e)},registerEvents:function(){c.on(d.INIT_FRAGMENT_NEEDED,E,o,{priority:dashjs.FactoryMaker.getSingletonFactoryByName(c.getClassName()).EVENT_PRIORITY_HIGH}),c.on(d.PLAYBACK_PAUSED,w,o,{priority:dashjs.FactoryMaker.getSingletonFactoryByName(c.getClassName()).EVENT_PRIORITY_HIGH}),c.on(d.PLAYBACK_SEEKING,M,o,{priority:dashjs.FactoryMaker.getSingletonFactoryByName(c.getClassName()).EVENT_PRIORITY_HIGH}),c.on(d.FRAGMENT_LOADING_COMPLETED,S,o,{priority:dashjs.FactoryMaker.getSingletonFactoryByName(c.getClassName()).EVENT_PRIORITY_HIGH}),c.on(d.TTML_TO_PARSE,L,o)}},n=[],o}k.__dashjs_factory_name="MssHandler";var P=dashjs.FactoryMaker.getClassFactory(k);P.errors=h,dashjs.FactoryMaker.updateClassFactory(k.__dashjs_factory_name,P),t.a=P}}).default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(596),t),r.__exportStar(n(597),t),r.__exportStar(n(598),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbrController=void 0;var r=n(0),i=r.__importDefault(n(9)),a=r.__importDefault(n(58)),o=n(40),s=function(){function e(e){var t;(0,i.default)(this),this.hls=e;var n=e.config;this._bufferTargetSmoothFactor=n.bufferTargetSmoothFactor,this._bufferTargetLength=null!==(t=n.bufferTargetLength)&&void 0!==t?t:10;var r=new a.default.DefaultConfig.abrController(e);this._defaultAbrController=r,this.hls=e}return Object.defineProperty(e.prototype,"autoLevelCapping",{get:function(){return this._defaultAbrController.autoLevelCapping},set:function(e){this._defaultAbrController.autoLevelCapping=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handledEvents",{get:function(){return this._defaultAbrController.handledEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastLoadedFragLevel",{get:function(){return this._defaultAbrController.lastLoadedFragLevel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextAutoLevel",{get:function(){var e=this.getNextAutoLevel(),t=this._defaultAbrController.nextAutoLevel;return Math.max(e,t)},set:function(e){this._defaultAbrController.nextAutoLevel=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useGenericHandler",{get:function(){return this._defaultAbrController.useGenericHandler},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_bwEstimator",{get:function(){return this._defaultAbrController._bwEstimator},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._defaultAbrController.destroy()},e.prototype.getBufferHealth=function(){var e=this.hls.media;if(null==e)return 0;for(var t=e.buffered,n=e.currentTime,r=0;r<t.length;r++){var i=t.start(r),a=t.end(r);if(i<=n&&n<=a)return a-n}return 0},e.prototype.getNextAutoLevel=function(){var e,t,n,r,i,a=null!==(n=null===(t=null===(e=this.hls.levels[this.hls.currentLevel])||void 0===e?void 0:e.details)||void 0===t?void 0:t.targetduration)&&void 0!==n?n:o.DEFAULT_TARGET_DURATION,s=((this.getBufferHealth()-this._bufferTargetLength-a)*this._bufferTargetSmoothFactor+a)/a,u=null!==(i=null===(r=this._bwEstimator)||void 0===r?void 0:r.getEstimate())&&void 0!==i?i:0;return Math.max(0,this.hls.levels.filter((function(e){var t=e.bitrate;return u/t*s>=1})).length-1)},e}();t.AbrController=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HlsAudioTrackController=void 0;var r=n(0).__importDefault(n(9)),i=n(58),a=n(12),o=n(15),s=n(71),u=function(){function e(e){var t=this;this._subscriptions=[],(0,r.default)(this),this._hls=e.hls,this._audioTrackListSource=new a.BehaviorSubject(void 0),this._trackListController=new s.TrackListController({activateTrack:this.activateTrack,currentTrackChangedEventCreator:function(){return(0,a.fromEventPattern)((function(e){return t._hls.on(i.Events.AUDIO_TRACK_SWITCHING,e)}),(function(e){return t._hls.off(i.Events.AUDIO_TRACK_SWITCHING,e)}))},filterRawTrack:this.filterRawTrack,isParsedTrackEqual:this.isParsedTrackEqual,isTrackActive:this.isTrackActive,parseTrack:this.parseAudioTrack,trackListSource:this._audioTrackListSource,tracksChangedEventCreator:function(){return a.NEVER}}),this._subscriptions.push(this.mapElementSourceToAudioTrackList(e))}return Object.defineProperty(e.prototype,"onAudioTrackChange",{get:function(){return this._trackListController.onChange.pipe((0,o.map)((function(e){var t=e.currentTrack;return{audioTracks:e.tracks,currentAudioTrack:t}})))},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._subscriptions.forEach((function(e){return e.unsubscribe()})),this._audioTrackListSource.complete()},e.prototype.getAudioTracks=function(){return this._trackListController.getTracks()},e.prototype.getCurrentAudioTrack=function(){return this._trackListController.getCurrentTrack()},e.prototype.setCurrentAudioTrack=function(e){this._trackListController.setCurrentTrack(e)},e.prototype.activateTrack=function(e,t){var n=t.find((function(t){return t.name===e.name}));n&&(this._hls.audioTrack=n.id)},e.prototype.filterRawTrack=function(e,t,n){return n.findIndex((function(t){return t.name===e.name}))===t},e.prototype.isParsedTrackEqual=function(e,t){return e.id===t.id},e.prototype.isTrackActive=function(e,t){void 0===t&&(t=[]);var n=t.filter((function(t){return t.name===e.name})).map((function(e){return e.id})),r=this._hls.audioTrack;return n.some((function(e){return r===e}))},e.prototype.mapElementSourceToAudioTrackList=function(e){var t=this,n=e.hls;return(0,a.merge)((0,a.fromEventPattern)((function(e){return n.on(i.Events.MANIFEST_LOADING,e)}),(function(e){return n.off(i.Events.MANIFEST_LOADING,e)})).pipe((0,o.mapTo)([])),(0,a.fromEventPattern)((function(e){return n.on(i.Events.AUDIO_TRACKS_UPDATED,e)}),(function(e){return n.off(i.Events.AUDIO_TRACKS_UPDATED,e)})).pipe((0,o.map)((function(e){return e[1].audioTracks})))).subscribe((function(e){t._audioTrackListSource.next(e)}))},e.prototype.parseAudioTrack=function(e){var t=e.name,n=e.lang,r=void 0===n?"und":n;return{id:e.id,label:t,lang:r}},e}();t.HlsAudioTrackController=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkErrorMonitor=void 0;var r=n(0).__importDefault(n(58)),i=n(12),a=[403,404],o=function(){function e(e){var t,n,o=this;this._errorCount=((t={})[r.default.ErrorDetails.AUDIO_TRACK_LOAD_ERROR]=0,t[r.default.ErrorDetails.FRAG_LOAD_ERROR]=0,t[r.default.ErrorDetails.LEVEL_LOAD_ERROR]=0,t),this._errorLimit=((n={})[r.default.ErrorDetails.AUDIO_TRACK_LOAD_ERROR]=5,n[r.default.ErrorDetails.FRAG_LOAD_ERROR]=5,n[r.default.ErrorDetails.LEVEL_LOAD_ERROR]=5,n),this.destroy=function(){o._hls.off(r.default.Events.ERROR,o.handleError),o._hls.off(r.default.Events.AUDIO_TRACK_LOADED,o.handleSuccess),o._hls.off(r.default.Events.LEVEL_LOADED,o.handleSuccess),o._hls.off(r.default.Events.FRAG_LOADED,o.handleSuccess),o._playlistExpiry.complete()},this.handleError=function(e,t){var n=t.type,i=t.details,s=t.networkDetails;if(s&&-1!==a.indexOf(s.status)&&n===r.default.ErrorTypes.NETWORK_ERROR)switch(i){case r.default.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case r.default.ErrorDetails.FRAG_LOAD_ERROR:case r.default.ErrorDetails.LEVEL_LOAD_ERROR:o._errorCount[i]++,o._errorCount[i]>=o._errorLimit[i]&&(o._errorCount={audioTrackLoadError:0,fragLoadError:0,levelLoadError:0},o._playlistExpiry.next())}},this.handleSuccess=function(e){switch(e){case r.default.Events.AUDIO_TRACK_LOADED:o._errorCount[r.default.ErrorDetails.AUDIO_TRACK_LOAD_ERROR]=0;break;case r.default.Events.LEVEL_LOADED:o._errorCount[r.default.ErrorDetails.LEVEL_LOAD_ERROR]=0;break;case r.default.Events.FRAG_LOADED:o._errorCount[r.default.ErrorDetails.FRAG_LOAD_ERROR]=0}},this._playlistExpiry=new i.Subject,this._hls=e,this._hls.on(r.default.Events.ERROR,this.handleError),this._hls.on(r.default.Events.AUDIO_TRACK_LOADED,this.handleSuccess),this._hls.on(r.default.Events.LEVEL_LOADED,this.handleSuccess),this._hls.on(r.default.Events.FRAG_LOADED,this.handleSuccess)}return Object.defineProperty(e.prototype,"onPlaylistExpiry",{get:function(){return this._playlistExpiry.asObservable()},enumerable:!1,configurable:!0}),e}();t.NetworkErrorMonitor=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(600),t),r.__exportStar(n(601),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dvrMiddleware=void 0;var r=n(0),i=n(113),a=n(12),o=n(15),s=n(10);t.dvrMiddleware=function(e,t){var n=(0,i.createSelector)((function(e){return e}),(function(e){return e.onDurationChange}),(function(e,t){return(0,a.merge)((0,a.defer)((function(){return(0,a.of)(e.getIsLive())})),t.pipe((0,o.map)((function(e){return e.isLive})))).pipe((0,o.distinctUntilChanged)())})),u=(0,i.createSelector)((function(e){return e}),(function(e){return e.onDurationChange}),(function(e,t){return(0,a.merge)((0,a.defer)((function(){return(0,a.of)(e.getSeekableRange().end)})),t.pipe((0,o.map)((function(e){return e.seekableRange.end})))).pipe((0,o.distinctUntilChanged)())})),l=(0,i.createSelector)((function(e){return e}),(function(e){return e.onPlay}),(function(e){return e.onPause}),(function(e,t,n){return(0,a.merge)((0,a.defer)((function(){return(0,a.of)(e.getIsPaused())})),n.pipe((0,o.mapTo)(!0)),t.pipe((0,o.mapTo)(!1))).pipe((0,o.distinctUntilChanged)())})),c=(0,i.createSelector)((function(e){return e.onDurationChange}),(function(e){return e.pipe((0,o.map)((function(e){if(e.isLive){var t=e.seekableRange,n=r.__rest(e,["seekableRange"]),i=t.start,a=t.end;return r.__assign(r.__assign({},n),{seekableRange:{start:(0,s.clip)(i-a),end:0}})}return e})),(0,o.distinctUntilChanged)(s.compareDurationChangeEvents))})),d=(0,i.createSelector)((function(e){return n(e)}),(function(e){return u(e)}),(function(e){return e.onDVRWindowForcedSeek}),(function(e,t,n){return e.pipe((0,o.switchMap)((function(e){return e?n.pipe((0,o.withLatestFrom)(t),(0,o.map)((function(e){var t=e,n=r.__read(t,2),i=n[0],a=n[1],o=i.seekingTo,u=r.__rest(i,["seekingTo"]);return r.__assign(r.__assign({},u),{seekingTo:(0,s.clip)(o-a)})}))):n})))})),f=(0,i.createSelector)((function(e){return n(e)}),(function(e){return u(e)}),(function(e){return e.onProgress}),(function(e,t,n){return e.pipe((0,o.switchMap)((function(e){return e?n.pipe((0,o.withLatestFrom)(t),(0,o.map)((function(e){var t=e,n=r.__read(t,2),i=n[0],a=n[1],o=i.bufferedRanges,u=r.__rest(i,["bufferedRanges"]);return r.__assign(r.__assign({},u),{bufferedRanges:o.map((function(e){var t=e.start,n=e.end;return{start:(0,s.clip)(t-a),end:(0,s.clip)(n-a)}}))})}))):n})))})),h=(0,i.createSelector)((function(e){return n(e)}),(function(e){return u(e)}),(function(e){return e.onSeeked}),(function(e,t,n){return e.pipe((0,o.switchMap)((function(e){return e?n.pipe((0,o.withLatestFrom)(t),(0,o.map)((function(e){var t=e,n=r.__read(t,2),i=n[0],a=n[1],o=i.currentTime,u=r.__rest(i,["currentTime"]);return r.__assign(r.__assign({},u),{currentTime:(0,s.clip)(o-a)})}))):n})))})),p=(0,i.createSelector)((function(e){return n(e)}),(function(e){return u(e)}),(function(e){return e.onSeeking}),(function(e,t,n){return e.pipe((0,o.switchMap)((function(e){return e?n.pipe((0,o.withLatestFrom)(t),(0,o.map)((function(e){var t=e,n=r.__read(t,2),i=n[0],a=n[1],o=i.seekingTo,u=r.__rest(i,["seekingTo"]);return r.__assign(r.__assign({},u),{seekingTo:(0,s.clip)(o-a)})}))):n})))})),m=(0,i.createSelector)((function(e){return n(e)}),(function(e){return u(e)}),(function(e){return l(e)}),(function(e){return e}),(function(e){return e.onTimeUpdate}),(function(e,t,n,i,u){return e.pipe((0,o.switchMap)((function(e){return e?(0,a.merge)((0,a.defer)((function(){return(0,a.of)({currentDate:i.getCurrentDate(),currentTime:i.getCurrentTime(),isAtLiveEdge:i.getIsAtLiveEdge()})})),n.pipe((0,o.switchMap)((function(e){return e?(0,a.merge)(u,(0,a.interval)(250).pipe((0,o.map)((function(){return{currentDate:i.getCurrentDate(),currentTime:i.getCurrentTime(),isAtLiveEdge:i.getIsAtLiveEdge()}})))):u})))).pipe((0,o.withLatestFrom)(t),(0,o.map)((function(e){var t=e,n=r.__read(t,2),i=n[0],a=n[1],o=i.currentTime,u=r.__rest(i,["currentTime"]);return r.__assign(r.__assign({},u),{currentTime:(0,s.clip)(o-a)})})),(0,o.distinctUntilChanged)(s.compareTimeUpdateEvents)):(0,a.merge)((0,a.defer)((function(){return(0,a.of)({currentDate:i.getCurrentDate(),currentTime:i.getCurrentTime(),isAtLiveEdge:i.getIsAtLiveEdge()})})),u)})))}));return{get:function(e,t){switch(t){case"getBufferedRanges":return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.getBufferedRanges.apply(e,r.__spreadArray([],r.__read(t),!1));if(e.getIsLive()){var a=e.getSeekableRange().end;return i.map((function(e){var t=e.start,n=e.end;return{start:(0,s.clip)(t-a),end:(0,s.clip)(n-a)}}))}return i};case"getCurrentTime":return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.getCurrentTime.apply(e,r.__spreadArray([],r.__read(t),!1));if(e.getIsLive()){var a=e.getSeekableRange().end;return(0,s.clip)(i-a)}return i};case"getSeekableRange":return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.getSeekableRange.apply(e,r.__spreadArray([],r.__read(t),!1));if(e.getIsLive()){var a=i.start,o=i.end;return{start:(0,s.clip)(a-o),end:0}}return i};case"load":return function(t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,a;return r.__generator(this,(function(s){switch(s.label){case 0:return"number"==typeof(n=t.startFrom)&&n<0?(i=r.__assign(r.__assign({},t),{startFrom:void 0}),[4,Promise.all([e.load(i),e.onLoadedMetadata.pipe((0,o.take)(1)).toPromise()])]):[3,4];case 1:return s.sent(),e.getIsLive()?(a=e.getSeekableRange().end,[4,e.seekTo(n+a)]):[3,3];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:return[2,e.load(t)];case 5:return[2]}}))}))};case"onDurationChange":return c(e);case"onDVRWindowForcedSeek":return d(e);case"onProgress":return f(e);case"onSeeked":return h(e);case"onSeeking":return p(e);case"onTimeUpdate":return m(e);case"seekTo":return function(t){if(e.getIsLive()&&"number"==typeof t){var n=e.getSeekableRange().end;return e.seekTo(t+n)}return e.seekTo(t)};default:return e[t]}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linearDVRMiddleware=void 0;var r=n(0),i=n(113),a=n(12),o=n(15),s=n(10);t.linearDVRMiddleware=function(e,t){var n=void 0;(0,a.merge)(t.onLoadStart,t.onEmptied,t.onReset).pipe((0,o.takeUntil)(t.onDestroying)).subscribe((function(){n=void 0}));var u=function(){if(void 0===n)return 0;var e=(Date.now()-n)/1e3;return Math.min(e,12)},l=(0,i.createSelector)((function(e){return e.onDurationChange}),(function(e){return e.pipe((0,o.tap)((function(){n=Date.now()})),(0,o.switchMap)((function(e){return e.isLive?(0,a.merge)((0,a.of)(e),(0,a.interval)(250).pipe((0,o.map)((function(){var t=e.duration,n=e.isLive,r=e.seekableDuration,i=e.seekableRange,a=u();return{duration:t,isLive:n,seekableDuration:r,seekableRange:{start:(0,s.clip)(i.start+a),end:(0,s.clip)(i.end+a)}}})))):(0,a.of)(e)})),(0,o.distinctUntilChanged)(s.compareDurationChangeEvents),(0,o.share)())}));return{get:function(e,t){switch(t){case"getSeekableRange":return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=e.getSeekableRange.apply(e,r.__spreadArray([],r.__read(t),!1));if(e.getIsLive()){var a=i.start,o=i.end,l=u();return{start:(0,s.clip)(a+l),end:(0,s.clip)(o+l)}}return i};case"onDurationChange":return l(e);default:return e[t]}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(603),t),r.__exportStar(n(604),t),r.__exportStar(n(605),t),r.__exportStar(n(606),t),r.__exportStar(n(607),t),r.__exportStar(n(608),t),r.__exportStar(n(609),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chromecast=void 0;var r=n(8);t.chromecast=function(e,t){var n,i;if(t.hasType(r.HandlerTypes.CHROMECAST)){var a=null!==(i=null===(n=t.getCurrentAudioTrack())||void 0===n?void 0:n.label)&&void 0!==i?i:null,o=t.getDuration(),s=t.getDimensions(),u=s.videoHeight,l=s.videoWidth;return{audioTrack:a,currentTime:t.getCurrentTime(),duration:o,seekableRange:t.getSeekableRange(),videoHeight:u,videoWidth:l}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dash=void 0;var r=n(8),i=function(e,t){var n,r,i=e.getCurrentTrackFor(t);if(null==i?void 0:i.codec){var a=i.codec;return null!==(r=null===(n=new RegExp(/codecs="(.*?)"/i).exec(a))||void 0===n?void 0:n[1])&&void 0!==r?r:a}return null};t.dash=function(e,t){var n,a;if(t.hasType(r.HandlerTypes.DASH)){var o=t.getEngine(),s=i(o,"audio"),u=function(e){var t=e.getCurrentTrackFor("audio");return t?t.lang:null}(o),l=function(e){var t=e.getAverageThroughput("video");return t&&(t*=1e3),t}(o),c=function(e){var t=e.getBitrateInfoListFor("video").map((function(e){return{bitrate:e.bitrate,height:e.height,width:e.width}})),n=e.getQualityFor("video");return{availableLevels:t,nextLoadLevel:t.length>0?n:null}}(o),d=function(e){var t=e.getSource();return"string"==typeof t?t:null}(o),f=i(o,"video"),h=null!==(a=null===(n=t.getElement())||void 0===n?void 0:n.duration)&&void 0!==a?a:0,p=t.getDimensions(),m=p.videoHeight,g=p.videoWidth;return{audioCodec:s,audioTrack:u,bandwidthEstimate:l,bufferedRanges:t.getBufferedRanges(),currentTime:t.getCurrentTime(),duration:h,levelInfo:c,seekableRange:t.getSeekableRange(),sourceUrl:d,videoCodec:f,videoHeight:m,videoWidth:g}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handlerType=void 0,t.handlerType=function(e,t){var n=t.getEngineVersion(),r=t.getType();return{handlerType:n?"".concat(r," (").concat(n,")"):r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hls=void 0;var r=n(8);t.hls=function(e,t){var n,i;if(t.hasType(r.HandlerTypes.HLS)){var a=t.getEngine(),o=function(e){var t,n=e.audioTracks[e.audioTrack];return null!==(t=null==n?void 0:n.audioCodec)&&void 0!==t?t:null}(a),s=function(e){var t=e.audioTracks[e.audioTrack];return t?"".concat(t.name," - ").concat(t.groupId):null}(a),u=function(e){var t=e.bandwidthEstimate;return isNaN(t)?null:t}(a),l=function(e){var t=e.levels;if(t){var n=function(e){return void 0!==e&&e>=0?e:null};return{availableLevels:t.map((function(e){return{bitrate:e.bitrate,height:e.height,width:e.width}})),currentLevel:n(e.currentLevel),loadLevel:n(e.loadLevel),nextLevel:n(e.nextLevel),nextLoadLevel:n(e.nextLoadLevel)}}return null}(a),c=function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.levels)||void 0===t?void 0:t[e.currentLevel])||void 0===n?void 0:n.videoCodec)&&void 0!==r?r:null}(a),d=null!==(i=null===(n=t.getElement())||void 0===n?void 0:n.duration)&&void 0!==i?i:0,f=t.getDimensions(),h=f.videoHeight,p=f.videoWidth;return{audioCodec:o,audioTrack:s,bandwidthEstimate:u,bufferedRanges:t.getBufferedRanges(),currentTime:t.getCurrentTime(),duration:d,levelInfo:l,seekableRange:t.getSeekableRange(),sourceUrl:t.getSourceUrl(),videoCodec:c,videoHeight:h,videoWidth:p}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.native=void 0;var r=n(8);t.native=function(e,t){var n,i;if(t.hasType(r.HandlerTypes.NATIVE)){var a=null!==(i=null===(n=t.getCurrentAudioTrack())||void 0===n?void 0:n.label)&&void 0!==i?i:null,o=t.getDuration(),s=t.getDimensions(),u=s.videoHeight,l=s.videoWidth;return{audioTrack:a,bufferedRanges:t.getBufferedRanges(),currentTime:t.getCurrentTime(),duration:o,seekableRange:t.getSeekableRange(),sourceUrl:t.getSourceUrl(),videoHeight:u,videoWidth:l}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shaka=void 0;var r=n(8),i=function(e,t){var n=e.getVariantTracks().find((function(e){return e.active}));if(n){if("audio"===t)return n.audioCodec;if("video"===t)return n.videoCodec}return null};t.shaka=function(e,t){if(t.hasType(r.HandlerTypes.SHAKA)){var n=t.getEngine(),a=i(n,"audio"),o=function(e){var t=e.getVariantTracks().find((function(e){return e.active}));return t?t.language:null}(n),s=n.getStats(),u=isNaN(s.estimatedBandwidth)?0:s.estimatedBandwidth,l=function(e){var t=e.getVariantTracks();(t=t.filter((function(e){return e.videoId}))).sort((function(e,t){return e.bandwidth-t.bandwidth}));var n=t.find((function(e){return e.active}));n&&(t=t.filter((function(e){return e.audioId===n.audioId})));var r=t.map((function(e){var t=e.videoBandwidth,n=e.bandwidth;return{bitrate:null!=t?t:n,height:e.height||0,width:e.width||0}})),i=r.findIndex((function(e){var t,r=null!==(t=null==n?void 0:n.videoBandwidth)&&void 0!==t?t:null==n?void 0:n.bandwidth;return e.bitrate===r}));return{availableLevels:r,nextLoadLevel:r.length>0?i:null}}(n),c=n.getAssetUri(),d=i(n,"video"),f=n.isLive()?void 0:n.getMediaElement().duration,h=t.getDimensions(),p=h.videoHeight,m=h.videoWidth;return{audioCodec:a,audioTrack:o,bandwidthEstimate:u,bufferedRanges:t.getBufferedRanges(),currentTime:t.getCurrentTime(),duration:f,levelInfo:l,seekableRange:t.getSeekableRange(),sourceUrl:c,videoCodec:d,videoHeight:p,videoWidth:m}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tizen=void 0;var r=n(8),i=n(72),a=n(196);t.tizen=function(e,t){if(t.hasType(r.HandlerTypes.TIZEN)){var n=t.getEngine(),o=n.getDuration()/1e3,s=function(e){var t,n,r,o,s=e.getCurrentStreamInfo();return{audioCodec:null!==(n=null===(t=s.filter((function(e){return e.type===i.AVPlayStreamType.AUDIO})).map(a.parseAudioTrackInfo)[0])||void 0===t?void 0:t.fourCC)&&void 0!==n?n:null,videoCodec:null!==(o=null===(r=s.filter((function(e){return e.type===i.AVPlayStreamType.VIDEO})).map(a.parseVideoTrackInfo)[0])||void 0===r?void 0:r.fourCC)&&void 0!==o?o:null}}(n),u=s.audioCodec,l=s.videoCodec,c=t.getDimensions(),d=c.videoHeight,f=c.videoWidth;return{audioCodec:u,currentTime:t.getCurrentTime(),duration:o,seekableRange:t.getSeekableRange(),videoCodec:l,videoHeight:d,videoWidth:f}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(611),t),r.__exportStar(n(612),t),r.__exportStar(n(613),t),r.__exportStar(n(614),t),r.__exportStar(n(615),t),r.__exportStar(n(616),t),r.__exportStar(n(617),t),r.__exportStar(n(618),t),r.__exportStar(n(619),t),r.__exportStar(n(620),t)},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AVPlayBufferOption=void 0,(r=t.AVPlayBufferOption||(t.AVPlayBufferOption={})).PLAYER_BUFFER_FOR_PLAY="PLAYER_BUFFER_FOR_PLAY",r.PLAYER_BUFFER_FOR_RESUME="PLAYER_BUFFER_FOR_RESUME"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AVPlayBufferSizeUnit=void 0,(r=t.AVPlayBufferSizeUnit||(t.AVPlayBufferSizeUnit={})).PLAYER_BUFFER_SIZE_IN_BYTE="PLAYER_BUFFER_SIZE_IN_BYTE",r.PLAYER_BUFFER_SIZE_IN_SECOND="PLAYER_BUFFER_SIZE_IN_SECOND"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AVPlayDisplayMode=void 0,(r=t.AVPlayDisplayMode||(t.AVPlayDisplayMode={})).PLAYER_DISPLAY_MODE_LETTER_BOX="PLAYER_DISPLAY_MODE_LETTER_BOX",r.PLAYER_DISPLAY_MODE_FULL_SCREEN="PLAYER_DISPLAY_MODE_FULL_SCREEN",r.PLAYER_DISPLAY_MODE_AUTO_ASPECT_RATIO="PLAYER_DISPLAY_MODE_AUTO_ASPECT_RATIO"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AVPlayDrmOperation=void 0,(r=t.AVPlayDrmOperation||(t.AVPlayDrmOperation={})).SET_PROPERTIES="SetProperties",r.INSTALL_LICENSE="InstallLicense",r.PROCESS_INITIATOR="ProcessInitiator",r.GET_UID="GetUID",r.INITIALIZE="Initialize",r.FINALIZE="Finalize",r.WIDEVINE_LICENSE_DATA="widevine_license_data",r.WIDEVINE_APP_SESSION="widevine_app_session",r.WIDEVINE_DATA_TYPE="widevine_data_type"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AVPlayDrmType=void 0,(r=t.AVPlayDrmType||(t.AVPlayDrmType={})).PLAYREADY="PLAYREADY",r.VERIMATRIX="VERIMATRIX",r.WIDEVINE_CDM="WIDEVINE_CDM"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AVPlayError=void 0,(r=t.AVPlayError||(t.AVPlayError={})).PLAYER_ERROR_NONE="PLAYER_ERROR_NONE",r.PLAYER_ERROR_INVALID_PARAMETER="PLAYER_ERROR_INVALID_PARAMETER",r.PLAYER_ERROR_NO_SUCH_FILE="PLAYER_ERROR_NO_SUCH_FILE",r.PLAYER_ERROR_INVALID_OPERATION="PLAYER_ERROR_INVALID_OPERATION",r.PLAYER_ERROR_SEEK_FAILED="PLAYER_ERROR_SEEK_FAILED",r.PLAYER_ERROR_INVALID_STATE="PLAYER_ERROR_INVALID_STATE",r.PLAYER_ERROR_NOT_SUPPORTED_FILE="PLAYER_ERROR_NOT_SUPPORTED_FILE",r.PLAYER_ERROR_INVALID_URI="PLAYER_ERROR_INVALID_URI",r.PLAYER_ERROR_CONNECTION_FAILED="PLAYER_ERROR_CONNECTION_FAILED",r.PLAYER_ERROR_GENEREIC="PLAYER_ERROR_GENEREIC"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AVPlayEvent=void 0,(r=t.AVPlayEvent||(t.AVPlayEvent={})).PLAYER_MSG_NONE="PLAYER_MSG_NONE",r.PLAYER_MSG_RESOLUTION_CHANGED="PLAYER_MSG_RESOLUTION_CHANGED",r.PLAYER_MSG_BITRATE_CHANGE="PLAYER_MSG_BITRATE_CHANGE",r.PLAYER_MSG_FRAGMENT_INFO="PLAYER_MSG_FRAGMENT_INFO",r.PLAYER_SPARSE_TRACK_DETECT="PLAYER_SPARSE_TRACK_DETECT",r.PLAYER_STREAMING_EVENT="PLAYER_STREAMING_EVENT",r.PLAYER_MSG_HTTP_ERROR_CODE="PLAYER_MSG_HTTP_ERROR_CODE",r.PLAYER_MSG_DRM_CHALLENGE_DATA="PLAYER_MSG_DRM_CHALLENGE_DATA"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AVPlayPlayerState=void 0,(r=t.AVPlayPlayerState||(t.AVPlayPlayerState={})).NONE="NONE",r.IDLE="IDLE",r.READY="READY",r.PLAYING="PLAYING",r.PAUSED="PAUSED"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AVPlayStreamType=void 0,(r=t.AVPlayStreamType||(t.AVPlayStreamType={})).VIDEO="VIDEO",r.AUDIO="AUDIO",r.TEXT="TEXT"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AVPlayStreamingPropertyType=void 0,(r=t.AVPlayStreamingPropertyType||(t.AVPlayStreamingPropertyType={})).COOKIE="COOKIE",r.USER_AGENT="USER_AGENT",r.PREBUFFER_MODE="PREBUFFER_MODE",r.ADAPTIVE_INFO="ADAPTIVE_INFO",r.SET_MODE_4K="SET_MODE_4K",r.PROPERTY_HD_AUDIO="PROPERTY_HD_AUDIO",r.LISTEN_SPARSE_TRACK="LISTEN_SPARSE_TRACK",r.IS_LIVE="IS_LIVE",r.AVAILABLE_BITRATE="AVAILABLE_BITRATE",r.GET_LIVE_DURATION="GET_LIVE_DURATION",r.CURRENT_BANDWIDTH="CURRENT_BANDWIDTH",r.SET_VR360_MODE="SET_VR360_MODE",r.WIDEVINE="WIDEVINE"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(622),t),r.__exportStar(n(623),t)},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AudioBeepType=void 0,(r=t.AudioBeepType||(t.AudioBeepType={})).UP="UP",r.DOWN="DOWN",r.LEFT="LEFT",r.RIGHT="RIGHT",r.PAGE_LEFT="PAGE_LEFT",r.PAGE_RIGHT="PAGE_RIGHT",r.BACK="BACK",r.SELECT="SELECT",r.CANCEL="CANCEL",r.WARNING="WARNING",r.KEYPAD="KEYPAD",r.KEYPAD_ENTER="KEYPAD_ENTER",r.KEYPAD_DEL="KEYPAD_DEL",r.MOVE="MOVE",r.PREPARING="PREPARING"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputMode=void 0,(r=t.AudioOutputMode||(t.AudioOutputMode={})).PCM="PCM",r.DOLBY="DOLBY",r.DTS="DTS",r.AAC="AAC"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseAudioTrackInfo=void 0;var r=n(0),i=n(72);t.parseAudioTrackInfo=function(e){var t=e.index,n=e.type;if(n===i.AVPlayStreamType.AUDIO){var a=JSON.parse(e.extra_info);return r.__assign({index:t,type:n},a)}throw new Error('The track is not of type "'.concat(i.AVPlayStreamType.AUDIO,'"'))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTextTrackInfo=void 0;var r=n(0),i=n(72);t.parseTextTrackInfo=function(e){var t=e.index,n=e.type;if(n===i.AVPlayStreamType.TEXT){var a=JSON.parse(e.extra_info);return r.__assign({index:t,type:n},a)}throw new Error('The track is not of type "'.concat(i.AVPlayStreamType.TEXT,'"'))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseVideoTrackInfo=void 0;var r=n(0),i=n(72);t.parseVideoTrackInfo=function(e){var t=e.index,n=e.type;if(n===i.AVPlayStreamType.VIDEO){var a=JSON.parse(e.extra_info);return r.__assign({index:t,type:n},a)}throw new Error('The track is not of type "'.concat(i.AVPlayStreamType.VIDEO,'"'))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(628),t),r.__exportStar(n(633),t),r.__exportStar(n(634),t),r.__exportStar(n(635),t),r.__exportStar(n(636),t),r.__exportStar(n(637),t),r.__exportStar(n(638),t),r.__exportStar(n(639),t),r.__exportStar(n(640),t),r.__exportStar(n(641),t),r.__exportStar(n(642),t),r.__exportStar(n(643),t),r.__exportStar(n(644),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.abr=void 0;var r=n(0),i=n(33),a=n(102);t.abr=function(e){return{component:new i.Chart({label:"ABR",invertPalette:!0,parentNode:e}),isEnabled:function(e,t){var n;return void 0!==(null===(n=t.levelInfo)||void 0===n?void 0:n.nextLoadLevel)},resultSelector:function(e,t){var n,i,o,s,u=null===(i=t.levelInfo)||void 0===i?void 0:i.availableLevels,l=null===(o=t.levelInfo)||void 0===o?void 0:o.nextLoadLevel,c=null!=u&&null!=l?(0,a.formatBitrate)(u[l].bitrate):"-",d=(n=[0]).concat.apply(n,r.__spreadArray([],r.__read(null!==(s=null==u?void 0:u.map((function(e,t){return t+1})))&&void 0!==s?s:[]),!1)),f=e.map((function(e){var t,n;return(null!==(n=null===(t=e.levelInfo)||void 0===t?void 0:t.nextLoadLevel)&&void 0!==n?n:-1)+1}));return{limits:d,maxValue:d.length,value:c,values:f,windowTop:1,windowBottom:0}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chart=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(139),o={height:18,label:"-",invertPalette:!1,palette:["#3852a3","#009898","#6abc44","#a3cd39","#fff102","#ffd102","#faa819","#f37421"],width:240},s=function(e){function t(t){var n=e.call(this,r.__assign(r.__assign({},o),t))||this;n._isAreaChart=!1,(0,i.default)(n);var a=n.createEl(n._config),s=a.canvas,u=a.root,l=a.value;return n._el=u,n._canvas=s,n._value=l,n._ctx=n._canvas.getContext("2d"),n}return r.__extends(t,e),t.prototype.destroy=function(){this._config.parentNode.removeChild(this._el)},t.prototype.update=function(e){this._data=e,this.render(e),this._value.innerText=e.value},t.prototype.createEl=function(t){var n=e.prototype.createEl.call(this,t).root,r=t.height,i=t.width,a=document.createElement("canvas");a.height=r,a.width=i,a.style.height="".concat(r,"px"),a.style.width="".concat(i,"px"),a.style.verticalAlign="bottom",a.style.backgroundColor="rgba(0,0,0,0.7)",a.style.userSelect="none",a.onclick=this.handleCanvasClick,n.appendChild(a);var o=document.createElement("span");return o.style.padding="0 4px",n.appendChild(o),{canvas:a,root:n,value:o}},t.prototype.createSubPalette=function(e){var t=this._config.invertPalette?this._config.palette.slice().reverse():this._config.palette,n=[];if(e>0){for(var r=0;r<e-1;r++)n.push(t[Math.floor(r/e*t.length)]);n.push(t[t.length-1])}return n},t.prototype.handleCanvasClick=function(e){this._isAreaChart=!this._isAreaChart,this._data&&this.render(this._data)},t.prototype.normalizeValue=function(e,t,n){return(1-(e-t)/n)*this._config.height},t.prototype.render=function(e){var t=this,n=this._ctx;if(n&&e){var r=this._config,i=r.height,a=r.width,o=e.limits,s=e.values;if(n.clearRect(0,0,a,i),!1===this._isAreaChart){var u=e.maxValue,l=0===u?s:s.map((function(e){return e/u}));if(l.length>0){var c=a/l.length;n.beginPath(),n.moveTo(0,this.normalizeValue(l[0],0,1));for(var d=0;d<l.length;d++)n.lineTo((d+1)*c,this.normalizeValue(l[d],0,1));n.globalAlpha=1,n.strokeStyle="#fff",n.stroke(),n.lineTo(a,i),n.lineTo(0,i),n.lineTo(0,this.normalizeValue(l[0],0,1)),n.closePath(),n.globalAlpha=.2,n.fillStyle="#fff",n.fill()}}else{var f=e.windowTop,h=e.windowBottom,p=this.createSubPalette(o.length);if(s.length>0){var m=a/s.length;o.forEach((function(e,r){n.beginPath(),n.moveTo(0,t.normalizeValue(s[0]-e,h,f));for(var u=0;u<s.length;u++)n.lineTo((u+1)*m,t.normalizeValue(s[u]-e,h,f));if(n.strokeStyle=p[r],n.stroke(),o[r+1]){var l=o[r+1];for(u=s.length-1;u>=0;u--)n.lineTo((u+1)*m,t.normalizeValue(s[u]-l,h,f));n.lineTo(0,t.normalizeValue(s[0]-l,h,f))}else n.lineTo(a,i),n.lineTo(0,i);n.lineTo(0,t.normalizeValue(s[0]-e,h,f)),n.closePath(),n.globalAlpha=.6,n.fillStyle=p[r],n.fill(),n.globalAlpha=1}))}}}},t}(a.MetricComponentBase);t.Chart=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyValue=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(139),o={label:"-"},s=function(e){function t(t){var n=e.call(this,r.__assign(r.__assign({},o),t))||this;(0,i.default)(n);var a=n.createEl(n._config),s=a.root,u=a.value;return n._el=s,n._value=u,n}return r.__extends(t,e),t.prototype.destroy=function(){this._config.parentNode.removeChild(this._el)},t.prototype.update=function(e){this._value.value=e.value},t.prototype.createEl=function(t){var n=e.prototype.createEl.call(this,t).root,r=document.createElement("input");r.type="text",r.style.display="none",r.style.position="fixed",r.style.top="-200px",n.appendChild(r);var i=document.createElement("button");return i.innerText="Copy",i.style.all="revert",i.style.border="none",i.style.height="18px",i.style.fontSize="10px",i.style.padding="3px 6px",i.style.margin="3px",i.style.cursor="pointer",i.onclick=this.handleClick.bind(this,i),n.appendChild(i),{root:n,value:r}},t.prototype.handleClick=function(e){this._value.style.display="block",this._value.select(),this._value.setSelectionRange(0,99999),document.execCommand("copy"),e.innerText="Copied!",setTimeout((function(){e.innerText="Copy"}),1500),this._value.style.display="none"},t}(a.MetricComponentBase);t.CopyValue=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyValue=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(139),o={label:"-"},s=function(e){function t(t){var n=e.call(this,r.__assign(r.__assign({},o),t))||this;(0,i.default)(n);var a=n.createEl(n._config),s=a.root,u=a.value;return n._el=s,n._value=u,n._valueString="",n}return r.__extends(t,e),t.prototype.destroy=function(){this._config.parentNode.removeChild(this._el)},t.prototype.update=function(e){var t=e.value;this._valueString!==t&&(this._value.innerText=t,this._valueString=t)},t.prototype.createEl=function(t){var n=e.prototype.createEl.call(this,t).root,r=document.createElement("span");return r.style.padding="0 4px 0 0",n.appendChild(r),{root:n,value:r}},t}(a.MetricComponentBase);t.KeyValue=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatBitrate=void 0,t.formatBitrate=function(e,t){if(void 0===t&&(t=2),0===e)return"0 bps";var n=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,r)).toFixed(n))+" "+["bps","kbps","Mbps","Gbps"][r]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.audioTrack=void 0;var r=n(33);t.audioTrack=function(e){return{component:new r.KeyValue({label:"Audio Track",parentNode:e}),isEnabled:function(e,t){return void 0!==t.audioTrack},resultSelector:function(e,t){var n;return{value:null!==(n=t.audioTrack)&&void 0!==n?n:"-"}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bandwidthEstimate=void 0;var r=n(0),i=n(33),a=n(102);t.bandwidthEstimate=function(e){return{component:new i.Chart({label:"Bandwidth Estimate",invertPalette:!0,parentNode:e}),isEnabled:function(e,t){return void 0!==t.bandwidthEstimate},resultSelector:function(e,t){var n=function(e){var t;return null!==(t=e.bandwidthEstimate)&&void 0!==t?t:0},i=e.map(n);return{limits:[0,3e6,6e6,9e6,12e6],maxValue:Math.max.apply(Math,r.__spreadArray([],r.__read(i),!1)),value:(0,a.formatBitrate)(n(t)),values:i,windowTop:3e6,windowBottom:0}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buffer=void 0;var r=n(33);t.buffer=function(e){return{component:new r.Chart({label:"Buffer",invertPalette:!0,parentNode:e}),isEnabled:function(e,t){var n;return void 0!==(null===(n=t.levelInfo)||void 0===n?void 0:n.nextLoadLevel)},resultSelector:function(e,t){var n,r,i,a=null===(n=t.levelInfo)||void 0===n?void 0:n.availableLevels,o=null!==(r=t.buffer)&&void 0!==r?r:[],s=null!==(i=null==a?void 0:a.length)&&void 0!==i?i:0;return{limits:[0],maxValue:s,value:"",values:o,windowTop:s,windowBottom:-1}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bufferHealth=void 0;var r=n(0),i=n(33);t.bufferHealth=function(e){return{component:new i.Chart({label:"Buffer Health",invertPalette:!0,parentNode:e}),isEnabled:function(e,t){return void 0!==t.bufferedRanges&&void 0!==t.currentTime},resultSelector:function(e,t){var n=function(e){var t,n,r=null!==(t=e.bufferedRanges)&&void 0!==t?t:[],i=null!==(n=e.currentTime)&&void 0!==n?n:0,a=null==r?void 0:r.find((function(e){return e.start<=i&&i<=e.end}));return a?a.end-i:0},i=e.map(n);return{limits:[0,6,12,18,24,30],maxValue:Math.max.apply(Math,r.__spreadArray([],r.__read(i),!1)),value:"".concat(n(t).toFixed(2),"s"),values:i,windowTop:6,windowBottom:0}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bufferedRanges=void 0;var r=n(33);t.bufferedRanges=function(e){return{component:new r.KeyValue({label:"Buffered Ranges",parentNode:e}),isEnabled:function(e,t){return void 0!==t.bufferedRanges},resultSelector:function(e,t){var n=t.bufferedRanges,r=[];return n&&n.forEach((function(e){var t=e.start,n=e.end;r.push("".concat(t.toFixed(2),"s - ").concat(n.toFixed(2),"s"))})),{value:r.length?r.join(", "):"-"}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codecs=void 0;var r=n(33);t.codecs=function(e){return{component:new r.KeyValue({label:"Codecs",parentNode:e}),isEnabled:function(e,t){return void 0!==t.audioCodec||void 0!==t.videoCodec},resultSelector:function(e,t){var n,r;return{value:"".concat(null!==(n=t.videoCodec)&&void 0!==n?n:"-"," / ").concat(null!==(r=t.audioCodec)&&void 0!==r?r:"-")}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.currentTime=void 0;var r=n(33);t.currentTime=function(e){return{component:new r.KeyValue({label:"Current Time",parentNode:e}),isEnabled:function(e,t){return void 0!==t.currentTime||void 0!==t.duration},resultSelector:function(e,t){var n=t.currentTime,r=t.duration;return void 0===r||r===1/0||null!==r&&isNaN(r)?{value:"".concat((null!=n?n:0).toFixed(2),"s")}:{value:"".concat((null!=n?n:0).toFixed(2),"s / ").concat((null!=r?r:0).toFixed(2),"s")}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handlerType=void 0;var r=n(33);t.handlerType=function(e){return{component:new r.KeyValue({label:"Handler Type",parentNode:e}),isEnabled:function(e,t){return void 0!==t.handlerType},resultSelector:function(e,t){var n;return{value:null!==(n=t.handlerType)&&void 0!==n?n:"UNKNOWN"}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadLevel=void 0;var r=n(0),i=n(33),a=n(102);t.loadLevel=function(e){return{component:new i.Chart({label:"ABR (loaded)",invertPalette:!0,parentNode:e}),isEnabled:function(e,t){var n;return void 0!==(null===(n=t.levelInfo)||void 0===n?void 0:n.nextLoadLevel)},resultSelector:function(e,t){var n,i,o,s,u=null===(i=t.levelInfo)||void 0===i?void 0:i.availableLevels,l=null===(o=t.levelInfo)||void 0===o?void 0:o.loadLevel,c=null!=u&&null!=l?(0,a.formatBitrate)(u[l].bitrate):"-",d=(n=[0]).concat.apply(n,r.__spreadArray([],r.__read(null!==(s=null==u?void 0:u.map((function(e,t){return t+1})))&&void 0!==s?s:[]),!1)),f=e.map((function(e){var t,n;return(null!==(n=null===(t=e.levelInfo)||void 0===t?void 0:t.loadLevel)&&void 0!==n?n:-1)+1}));return{limits:d,maxValue:d.length,value:c,values:f,windowTop:1,windowBottom:0}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.quality=void 0;var r=n(33),i=n(102);t.quality=function(e){return{component:new r.KeyValue({label:"Quality",parentNode:e}),isEnabled:function(e,t){var n=void 0!==t.levelInfo,r=void 0!==t.videoHeight&&void 0!==t.videoWidth;return n||r},resultSelector:function(e,t){var n=t.levelInfo,r=t.videoHeight,a=t.videoWidth;if(n&&null!=n.currentLevel){var o=n.availableLevels[n.currentLevel],s=null!=n.nextLevel?n.availableLevels[n.nextLevel]:void 0,u=function(e){var t=e.bitrate,n=e.height,r=e.width;return"".concat(r,"x").concat(n," (").concat((0,i.formatBitrate)(t),")")};return{value:"".concat(u(o)).concat(void 0===s?"":" -> ".concat(null===s?"?":u(s)))}}return r&&a?{value:"".concat(a,"x").concat(r)}:{value:"-"}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seekableRange=void 0;var r=n(33);t.seekableRange=function(e){return{component:new r.KeyValue({label:"Seekable Range",parentNode:e}),isEnabled:function(e,t){return void 0!==t.seekableRange},resultSelector:function(e,t){var n=t.seekableRange;if(n){var r=n.start,i=n.end;return{value:"".concat(r.toFixed(2),"s - ").concat(i.toFixed(2),"s")}}return{value:"-"}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sourceUrl=void 0;var r=n(33);t.sourceUrl=function(e){return{component:new r.CopyValue({label:"Source Url",parentNode:e}),isEnabled:function(e,t){return void 0!==t.sourceUrl},resultSelector:function(e,t){var n;return{value:null!==(n=t.sourceUrl)&&void 0!==n?n:""}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONTENT_TYPE=void 0,t.DEFAULT_CONTENT_TYPE="application/octet-stream"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_TARGET_DURATION=void 0,t.DEFAULT_TARGET_DURATION=6},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LEVEL_KEY=void 0,t.LEVEL_KEY="DORIS_LEVEL_KEY"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(649),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromecastHandler=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=n(40),u=n(8),l=n(16),c=n(10),d=n(137),f=n(171),h=new l.LoggerFileNameDecorator("ChromecastHandler"),p=new c.Lazy((function(){return new cast.framework.RemotePlayer})),m=new c.Lazy((function(){return new cast.framework.RemotePlayerController(p.value)})),g=function(e){function t(t,n,o){var s=e.call(this,t,n,o)||this;return s._engine=void 0,s._type=u.HandlerTypes.CHROMECAST,s._hasEnded=!1,s._hasPlayed=!1,s._isLoadPending=!1,s._onBreaksChange=a.NEVER,s._onIsPlayingBreakChange=a.NEVER,s.addLoadInterceptor=function(e){s._loadInterceptors.add(e)},s.removeLoadInterceptor=function(e){s._loadInterceptors.delete(e)},s.activateTrack=function(e,t){return void 0===e&&void 0===t?Promise.resolve():new Promise((function(n,i){var a=s.getMediaSession();if(a){var o=r.__spreadArray([],r.__read(a.activeTrackIds),!1);void 0!==t&&o.splice(o.indexOf(t),1),void 0!==e&&o.push(e);var u=new chrome.cast.media.EditTracksInfoRequest(o);a.editTracksInfo(u,n,i)}else i()}))},s.handleCastStateChanged=function(e){var t,n=(0,f.parseCastState)(e.castState),r=null===(t=s.getCurrentSession())||void 0===t?void 0:t.getCastDevice().friendlyName;s._castStateChangeSource.next({castState:n,deviceName:r})},s.handleCurrentTimeChanged=function(){var e=s.getCurrentDate(),t=s.getCurrentTime(),n=s.getIsAtLiveEdge();void 0!==s._seekingTo&&(s._seekingTo=void 0,s._seekedSource.next({currentTime:t})),s._timeUpdateSource.next({currentDate:e,currentTime:t,isAtLiveEdge:n})},s.handleDurationChanged=function(){s._durationChangeSource.next({duration:s.getDuration(),isLive:s.getIsLive(),seekableDuration:s.getSeekableDuration(),seekableRange:s.getSeekableRange()})},s.handleIsConnectedChanged=function(){s._remotePlayer.isConnected?document.addEventListener("keypress",s.handleKeyPress):document.removeEventListener("keypress",s.handleKeyPress)},s.handleIsMediaLoadedChanged=function(){if(s._remotePlayer.isMediaLoaded){s._loadedMetadataSource.next(r.__assign({duration:s.getDuration(),isLive:s.getIsLive(),startDate:s.getStartDate()},s.getDimensions())),s._readySource.next({isReady:!0}),s._loadedDataSource.next({}),s._canPlaySource.next({}),s._canPlayThroughSource.next({});var e=s.getMediaSession();e&&e.addUpdateListener(s.handleMediaSessionUpdate)}},s.handleIsPausedChanged=function(){s._remotePlayer.isPaused?s._pauseSource.next({}):s._playSource.next({})},s.handleKeyPress=function(e){s._config.debug.enabled&&(0,c.isShortcutPressed)(e,s._config.debug.shortcut)&&s.toggleDebug()},s.handleMediaInfoChanged=function(){var e;if(s._isLoadPending)h.debug("Skipping media info update from receiver, as there is a pending load request.");else{var t=s.getCurrentSession(),n=s.getCurrentItem(!1),r=null==n?void 0:n.media.contentId,i=null===(e=s.getMediaInfo())||void 0===e?void 0:e.source;if(r!==(i&&s._services.sourceManager.getId(i)))if(n&&t){var a=(0,f.parseQueueItem)(n,t.getSessionId(),s._services);h.log("Loaded media changed.",s.getMediaInfo(),a),s._mediaInfo=a}else s.getCastState()!==u.CastStates.CONNECTED&&(h.log("Media unloaded."),s._mediaInfo=void 0);s._durationChangeSource.next({duration:s.getDuration(),isLive:s.getIsLive(),seekableDuration:s.getSeekableDuration(),seekableRange:s.getSeekableRange()}),s._textTrackChangeSource.next({textTracks:s.getTextTracks(),currentTextTrack:s.getCurrentTextTrack()}),s._audioTrackChangeSource.next({audioTracks:s.getAudioTracks(),currentAudioTrack:s.getCurrentAudioTrack()})}},s.handleMediaSessionUpdate=function(e){var t;e?(s._pendingTextTrack&&s.setCurrentTextTrack(s._pendingTextTrack),s._isPlayingBreakChangeSource.next({isPlayingBreak:s.getIsPlayingBreak()}),s._breaksChangeSource.next({breaks:s.getBreaks()})):null===(t=s._loadedMedia)||void 0===t||t.removeUpdateListener(s.handleMediaSessionUpdate)},s.handlePlayerStateChanged=function(){var e=s._remotePlayer.playerState;if(null!=e)switch(e){case chrome.cast.media.PlayerState.PLAYING:s._hasPlayed=!0,s._playingSource.next({});break;case chrome.cast.media.PlayerState.BUFFERING:s._waitingSource.next({});break;case chrome.cast.media.PlayerState.IDLE:if(s._loadedMedia&&s._loadedMedia.idleReason===chrome.cast.media.IdleReason.FINISHED){s._hasEnded=!0,s._remotePlayer.isPaused=!0;var t=s.getCurrentDate(),n=s.getCurrentTime(),r=s.getIsAtLiveEdge();s._timeUpdateSource.next({currentDate:t,currentTime:n,isAtLiveEdge:r}),s._pauseSource.next({}),s._endedSource.next({})}}},s.handleVideoInfoChanged=function(){s._resizeSource.next(r.__assign({},s.getDimensions()))},s.handleVolumeChanged=function(){s._volumeChangeSource.next({isMuted:s.getIsMuted(),volume:s.getVolume()})},(0,i.default)(s),s._remotePlayer=p.value,s._remotePlayerController=m.value,s._loadInterceptors=new Set,s.addLoadInterceptor(s.initialTrackInterceptor),s._enableTextTrackPreselection=!1,s._audioTrackChangeSource=new a.Subject,s._breaksChangeSource=new a.Subject,s._canPlaySource=new a.Subject,s._canPlayThroughSource=new a.Subject,s._castStateChangeSource=new a.Subject,s._durationChangeSource=new a.Subject,s._endedSource=new a.Subject,s._isPlayingBreakChangeSource=new a.Subject,s._loadStartSource=new a.Subject,s._loadedDataSource=new a.Subject,s._loadedMetadataSource=new a.Subject,s._pauseSource=new a.Subject,s._playSource=new a.Subject,s._playingSource=new a.Subject,s._resizeSource=new a.Subject,s._seekedSource=new a.Subject,s._seekingSource=new a.Subject,s._textTrackChangeSource=new a.Subject,s._timeUpdateSource=new a.Subject,s._volumeChangeSource=new a.Subject,s._waitingSource=new a.Subject,s.configureEvents(),s.init(),s.initializeCastApi(),s}return r.__extends(t,e),Object.defineProperty(t.prototype,"onBreaksChange",{get:function(){return this._onBreaksChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onIsPlayingBreakChange",{get:function(){return this._onIsPlayingBreakChange},enumerable:!1,configurable:!0}),t.canPlayType=function(){return u.CanPlaySource.MAYBE},t.prototype.addTextTracks=function(e){if(this._mediaInfo){var t=r.__assign(r.__assign({},this._mediaInfo),{autoPlay:u.AutoPlayOptions.YES,startFrom:this.getCurrentTime(),textTracks:r.__spreadArray(r.__spreadArray([],r.__read(this._mediaInfo.textTracks),!1),r.__read(e),!1)});this.load(t)}},t.prototype.connect=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(n){switch(n.label){case 0:e=this.getCastContext(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.requestSession()];case 2:return n.sent(),[3,4];case 3:if((t=n.sent())!==chrome.cast.ErrorCode.CANCEL)throw h.error("Failed to connect to Chromecast. (".concat(t,")")),t;return[3,4];case 4:return[2]}}))}))},t.prototype.destroy=function(){this.startDestroying(),document.removeEventListener("keypress",this.handleKeyPress),this.getCastContext().removeEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.handleCastStateChanged);var t=cast.framework.RemotePlayerEventType;this._remotePlayerController.removeEventListener(t.CURRENT_TIME_CHANGED,this.handleCurrentTimeChanged),this._remotePlayerController.removeEventListener(t.DURATION_CHANGED,this.handleDurationChanged),this._remotePlayerController.removeEventListener(t.IS_CONNECTED_CHANGED,this.handleIsConnectedChanged),this._remotePlayerController.removeEventListener(t.IS_MEDIA_LOADED_CHANGED,this.handleIsMediaLoadedChanged),this._remotePlayerController.removeEventListener(t.IS_MUTED_CHANGED,this.handleVolumeChanged),this._remotePlayerController.removeEventListener(t.IS_PAUSED_CHANGED,this.handleIsPausedChanged),this._remotePlayerController.removeEventListener(t.MEDIA_INFO_CHANGED,this.handleMediaInfoChanged),this._remotePlayerController.removeEventListener(t.PLAYER_STATE_CHANGED,this.handlePlayerStateChanged),this._remotePlayerController.removeEventListener(t.VOLUME_LEVEL_CHANGED,this.handleVolumeChanged),this._remotePlayerController.removeEventListener(t.VIDEO_INFO_CHANGED,this.handleVideoInfoChanged);var n=this.getMediaSession();n&&n.removeUpdateListener(this.handleMediaSessionUpdate),e.prototype.destroy.call(this)},t.prototype.disconnect=function(){this.getCastContext().endCurrentSession(!0)},t.prototype.getAudioTracks=function(){return this.getTracks().filter((function(e){return e.type===chrome.cast.media.TrackType.AUDIO})).map(this.parseAudioTrack)},t.prototype.getBreakClips=function(){var e,t=null===(e=this.getMediaSession())||void 0===e?void 0:e.media;if(t&&(0,c.hasKeyOfType)(t,"breakClips","object"))return t.breakClips},t.prototype.getBreakStatus=function(){var e=this.getMediaSession();if(e&&(0,c.hasKeyOfType)(e,"breakStatus","object"))return e.breakStatus},t.prototype.getBreaks=function(){var e,t=null===(e=this.getMediaSession())||void 0===e?void 0:e.media;if(t&&(0,c.hasKeyOfType)(t,"breaks","object"))return t.breaks},t.prototype.getBufferedRanges=function(){return[]},t.prototype.getCanControlVolume=function(){return this._remotePlayer.canControlVolume},t.prototype.getCastContext=function(){return cast.framework.CastContext.getInstance()},t.prototype.getCastState=function(){var e=this.getCastContext().getCastState();return(0,f.parseCastState)(e)},t.prototype.getCurrentAudioTrack=function(){var e=this.getActiveTrackIds();return this.getTracks().filter((function(t){return t.type===chrome.cast.media.TrackType.AUDIO&&-1!==e.indexOf(t.trackId)})).map(this.parseAudioTrack)[0]},t.prototype.getCurrentLevel=function(){},t.prototype.getCurrentLevelVariant=function(){return-1},t.prototype.getCurrentTextTrack=function(){var e=this.getActiveTrackIds();return this.getTracks().filter((function(t){return t.type===chrome.cast.media.TrackType.TEXT&&-1!==e.indexOf(t.trackId)})).map(this.parseTextTrack)[0]},t.prototype.getCurrentTime=function(e){return void 0===e&&(e=!1),e&&this._seekingTo?this._seekingTo:this._remotePlayer.isMediaLoaded?this._remotePlayer.currentTime:this._loadedMedia?this._hasEnded?this._loadedMedia.media.duration:this._loadedMedia.currentTime:0},t.prototype.getDimensions=function(){var e=this._remotePlayer.videoInfo;if(e){var t=e.height,n=void 0===t?0:t,r=e.width;return{videoHeight:n,videoWidth:void 0===r?0:r}}return{videoHeight:0,videoWidth:0}},t.prototype.getDuration=function(){return this.getIsLive()?1/0:this._remotePlayer.isMediaLoaded?this._remotePlayer.duration:this._loadedMedia?this._loadedMedia.media.duration:NaN},t.prototype.getFrameRate=function(){},t.prototype.getHasEnded=function(){return this._hasEnded},t.prototype.getHasPlayed=function(){return this._hasPlayed},t.prototype.getIsBuffering=function(){return this._remotePlayer.playerState===chrome.cast.media.PlayerState.BUFFERING},t.prototype.getIsLive=function(){var e=this.getCastMediaInfo();return(null==e?void 0:e.streamType)===chrome.cast.media.StreamType.LIVE},t.prototype.getIsMuted=function(){return this._remotePlayer.isMuted},t.prototype.getIsPaused=function(){return this._remotePlayer.isPaused},t.prototype.getIsPlaying=function(){return this._remotePlayer.playerState===chrome.cast.media.PlayerState.PLAYING},t.prototype.getIsPlayingBreak=function(){return this._remotePlayer.isPlayingBreak},t.prototype.getIsSeeking=function(){return void 0!==this._seekingTo},t.prototype.getLevelVariants=function(){return 0},t.prototype.getLevels=function(){return[]},t.prototype.getPlaybackRate=function(){return 1},t.prototype.getReadyState=function(){if(this._remotePlayer.isMediaLoaded)switch(this._remotePlayer.playerState){case chrome.cast.media.PlayerState.BUFFERING:return u.ReadyStates.HAVE_METADATA;case chrome.cast.media.PlayerState.PLAYING:case chrome.cast.media.PlayerState.PAUSED:return u.ReadyStates.HAVE_ENOUGH_DATA}return this.getCastMediaInfo()?u.ReadyStates.HAVE_METADATA:u.ReadyStates.HAVE_NOTHING},t.prototype.getSeekableRange=function(){if(this.getIsLive()){var e=this._remotePlayer.liveSeekableRange;return e?{start:e.start,end:e.end}:{start:0,end:0}}var t=this.getDuration();return{start:0,end:isNaN(t)?0:t}},t.prototype.getSourceUrl=function(){var e,t=null===(e=this.getMediaSession())||void 0===e?void 0:e.media;return(null==t?void 0:t.contentUrl)||(null==t?void 0:t.contentId)},t.prototype.getStartDate=function(){if(this.getIsLive()){var e=this.getCastMediaInfo();if(e&&(0,c.hasKeyOfType)(e,"startAbsoluteTime","number"))return new Date(1e3*e.startAbsoluteTime)}},t.prototype.getTextTracks=function(){return this.getTracks().filter((function(e){return e.type===chrome.cast.media.TrackType.TEXT})).map(this.parseTextTrack)},t.prototype.getVolume=function(){return this._remotePlayer.volumeLevel},t.prototype.load=function(t){var n,i;return r.__awaiter(this,void 0,void 0,(function(){var a,o,s,l,c,d,f,p;return r.__generator(this,(function(r){switch(r.label){case 0:return a=t.source,o=this.getMediaSession(!1),s=null!==(i=null===(n=null==o?void 0:o.media)||void 0===n?void 0:n.contentId)&&void 0!==i?i:void 0,l=this._services.sourceManager.getId(a),s!==l?[3,2]:[4,e.prototype.load.call(this,t)];case 1:return r.sent(),this._loadedMedia=this.getMediaSession(),this._loadedMedia&&-1!==this._loadedMedia.currentItemId&&this._services.queueItemService.addCastItemIdToItem(t.itemId,this._loadedMedia.sessionId,this._loadedMedia.currentItemId),[3,9];case 2:return this._isLoadPending=!0,this.resetState(),[4,e.prototype.load.call(this,t)];case 3:return r.sent(),this._loadStartSource.next({}),[4,this.createLoadRequest(t)];case 4:if(null===(c=r.sent()))return this.emitError({type:u.ErrorTypes.CAST_ERROR,message:"Load cancelled by cast load interceptor."}),this._isLoadPending=!1,[2];if(!(d=this.getCurrentSession()))return[3,8];r.label=5;case 5:return r.trys.push([5,7,,8]),h.log("Sending load request to cast receiver.",JSON.stringify(c)),[4,d.loadMedia(c)];case 6:return r.sent(),(f=this.getMediaSession())?this._loadedMedia=f:this.emitError({type:u.ErrorTypes.CAST_ERROR,message:"Failed to cast media."}),[3,8];case 7:return p=r.sent(),this.emitError({type:u.ErrorTypes.CAST_ERROR,message:"Failed to cast media. (".concat(p,")")}),[3,8];case 8:this._isLoadPending=!1,r.label=9;case 9:return[2]}}))}))},t.prototype.pause=function(){!1===this._remotePlayer.isPaused&&this._remotePlayerController.playOrPause()},t.prototype.play=function(){var e=this;return new Promise((function(t,n){if(e._hasEnded){var r=new Promise((function(t){var n=cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,r=function(){e._remotePlayer.isPaused||(t(),e._remotePlayerController.removeEventListener(n,r))};e._remotePlayerController.addEventListener(n,r),e.replay()})),i=new Promise((function(e,t){window.setTimeout((function(){t()}),6e4)}));return Promise.race([r,i])}var a=e.getMediaSession();if(a){var o=new chrome.cast.media.PlayRequest;a.play(o,(function(){return t()}),(function(){return n()}))}else n()}))},t.prototype.reset=function(){this.resetState(!0),e.prototype.reset.call(this)},t.prototype.seekTo=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a;return r.__generator(this,(function(r){switch(r.label){case 0:return this._remotePlayer.isMediaLoaded?(t="number"==typeof e?e:this.dateToTime(e),n=this.getSeekableRange(),i=n.start,a=n.end,t=(0,c.clamp)(t,i,a),this._seekingSource.next({seekingTo:t}),this._remotePlayer.currentTime=this._seekingTo=t,this._remotePlayerController.seek(),[4,this.onSeeked.pipe((0,o.take)(1)).toPromise()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.setCurrentAudioTrack=function(e){var t;if(this._remotePlayer.isMediaLoaded){var n=e.id,r=null===(t=this.getCurrentAudioTrack())||void 0===t?void 0:t.id;this.activateTrack(n,r)}},t.prototype.setCurrentLevel=function(e){},t.prototype.setCurrentLevelVariant=function(e){},t.prototype.setCurrentTextTrack=function(e){if(this._remotePlayer.isMediaLoaded){this._pendingTextTrack=void 0;var t=e&&this.getTextTrackByLanguageAndKind(e.lang,e.kind)||void 0,n=null==t?void 0:t.trackId,r=this.getActiveTrackIds(),i=this.getTracks().find((function(e){return e.type===chrome.cast.media.TrackType.TEXT&&-1!==r.indexOf(e.trackId)})),a=null==i?void 0:i.trackId;e&&!t&&(this._pendingTextTrack=e),this.activateTrack(n,a)}},t.prototype.setIsMuted=function(e){this._remotePlayer.isMuted!==e&&this._remotePlayerController.muteOrUnmute()},t.prototype.setPlaybackRate=function(e){},t.prototype.setVolume=function(e){this._remotePlayer.volumeLevel=(0,c.clamp)(e,0,1),this._remotePlayerController.setVolumeLevel()},t.prototype.configureEvents=function(){e.prototype.configureEvents.call(this),this._onAudioTrackChange=this._audioTrackChangeSource.pipe((0,o.distinctUntilChanged)(f.compareAudioTrackChangeEvents)),this._onBreaksChange=this._breaksChangeSource.pipe((0,o.distinctUntilChanged)(f.compareBreaksChangeEvents)),this._onCanPlay=this._canPlaySource.asObservable(),this._onCanPlayThrough=this._canPlayThroughSource.asObservable(),this._onCastStateChange=this._castStateChangeSource.asObservable(),this._onDurationChange=this._durationChangeSource.pipe((0,o.distinctUntilChanged)(c.compareDurationChangeEvents)),this._onEnded=this._endedSource.asObservable(),this._onIsPlayingBreakChange=this._isPlayingBreakChangeSource.pipe((0,o.distinctUntilChanged)(f.compareIsPlayingBreakChangeEvents)),this._onLoadStart=this._loadStartSource.asObservable(),this._onLoadedData=this._loadedDataSource.asObservable(),this._onLoadedMetadata=this._loadedMetadataSource.asObservable(),this._onPause=this._pauseSource.asObservable(),this._onPlay=this._playSource.asObservable(),this._onPlaying=this._playingSource.asObservable(),this._onResize=this._resizeSource.pipe((0,o.distinctUntilChanged)(c.compareResizeEvents)),this._onSeeked=this._seekedSource.asObservable(),this._onSeeking=this._seekingSource.asObservable(),this._onTextTrackChange=this._textTrackChangeSource.pipe((0,o.distinctUntilChanged)(f.compareTextTrackChangeEvents)),this._onTimeUpdate=this._timeUpdateSource.asObservable(),this._onVolumeChange=this._volumeChangeSource.asObservable(),this._onWaiting=this._waitingSource.asObservable()},t.prototype.createLoadRequest=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,o,s,u,l,c;return r.__generator(this,(function(d){switch(d.label){case 0:return[4,(0,f.serializeLoadRequest)(e,this._services.sourceManager,{fromHeadRequest:!1,fromGetRequest:!1})];case 1:t=d.sent(),d.label=2;case 2:d.trys.push([2,7,8,9]),n=r.__values(this._loadInterceptors),i=n.next(),d.label=3;case 3:return i.done?[3,6]:(a=i.value,null===(o=a(t,e))?[3,5]:[4,Promise.resolve(o)]);case 4:if(null===(s=d.sent()))return[2,null];t=s,d.label=5;case 5:return i=n.next(),[3,3];case 6:return[3,9];case 7:return u=d.sent(),l={error:u},[3,9];case 8:try{i&&!i.done&&(c=n.return)&&c.call(n)}finally{if(l)throw l.error}return[7];case 9:return[2,t]}}))}))},t.prototype.getActiveTrackIds=function(){var e,t;return null!==(t=null===(e=this.getMediaSession())||void 0===e?void 0:e.activeTrackIds)&&void 0!==t?t:[]},t.prototype.getCastMediaInfo=function(){var e,t;return null!==(e=this._remotePlayer.mediaInfo)&&void 0!==e?e:null===(t=this._loadedMedia)||void 0===t?void 0:t.media},t.prototype.getCurrentItem=function(e){var t=this.getMediaSession(e);if(t){var n=t.currentItemId,r=t.items;if(null!=n&&null!=r)return r.find((function(e){return e.itemId===n}))}},t.prototype.getCurrentSession=function(){var e;return null!==(e=this.getCastContext().getCurrentSession())&&void 0!==e?e:void 0},t.prototype.getMediaSession=function(e){var t,n;return void 0===e&&(e=!0),null!==(n=null===(t=this.getCurrentSession())||void 0===t?void 0:t.getMediaSession())&&void 0!==n?n:e?this._loadedMedia:void 0},t.prototype.getTextTrackByLanguageAndKind=function(e,t){return this.getTracks().filter((function(e){return e.type===chrome.cast.media.TrackType.TEXT})).find((function(n){return(0,c.normaliseTextTrackLang)(n.language)===(0,c.normaliseTextTrackLang)(e)&&n.subtype===t}))},t.prototype.getTracks=function(){var e,t=this.getCastMediaInfo();return null!==(e=null==t?void 0:t.tracks)&&void 0!==e?e:[]},t.prototype.initialTrackInterceptor=function(e,t){if(e.media.customData=r.__assign(r.__assign({},e.media.customData),{initialTextTrack:t.initialTextTrack,initialAudioTrack:t.initialAudioTrack}),t.customData&&(0,c.hasKeyOfType)(t.customData,"activeAudioTrackLang","string")){var n=[{lang:t.customData.activeAudioTrackLang}];e.media.customData=r.__assign(r.__assign({},e.media.customData),{initialAudioTrack:n})}return e},t.prototype.initializeCastApi=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return(e=this.getCastContext()).setOptions({autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:this._config.castConfig.appId,resumeSavedSession:!0}),e.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.handleCastStateChanged),t=cast.framework.RemotePlayerEventType,this._remotePlayerController.addEventListener(t.CURRENT_TIME_CHANGED,this.handleCurrentTimeChanged),this._remotePlayerController.addEventListener(t.DURATION_CHANGED,this.handleDurationChanged),this._remotePlayerController.addEventListener(t.IS_CONNECTED_CHANGED,this.handleIsConnectedChanged),this._remotePlayerController.addEventListener(t.IS_MEDIA_LOADED_CHANGED,this.handleIsMediaLoadedChanged),this._remotePlayerController.addEventListener(t.IS_MUTED_CHANGED,this.handleVolumeChanged),this._remotePlayerController.addEventListener(t.IS_PAUSED_CHANGED,this.handleIsPausedChanged),this._remotePlayerController.addEventListener(t.MEDIA_INFO_CHANGED,this.handleMediaInfoChanged),this._remotePlayerController.addEventListener(t.PLAYER_STATE_CHANGED,this.handlePlayerStateChanged),this._remotePlayerController.addEventListener(t.VOLUME_LEVEL_CHANGED,this.handleVolumeChanged),this._remotePlayerController.addEventListener(t.VIDEO_INFO_CHANGED,this.handleVideoInfoChanged),[4,Promise.resolve()];case 1:return r.sent(),n=e.getCastState(),this.handleCastStateChanged({castState:n}),this.handleIsConnectedChanged(),this.handleIsMediaLoadedChanged(),this.handlePlayerStateChanged(),[2]}}))}))},t.prototype.parseAudioTrack=function(e){return{id:e.trackId,label:e.name,lang:e.language}},t.prototype.parseTextTrack=function(e){return{kind:e.subtype,label:e.name,lang:e.language}},t.prototype.replay=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return this._loadedMedia&&this._mediaInfo?(e=r.__assign(r.__assign({},this._mediaInfo),{startFrom:0}),[4,this.load(e)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.resetState=function(e){if(void 0===e&&(e=!1),e&&this._remotePlayer.isMediaLoaded){var t=this.getMediaSession(!1);if(t){var n=new chrome.cast.media.StopRequest;t.stop(n,(function(){h.debug("Media session stopped.")}),(function(e){h.warn("Failed to stop media session. ".concat(e.code," ").concat(e.description," ").concat(e.details))}))}}this._loadedMedia=void 0,this._hasEnded=!1,this._hasPlayed=!1},t.prototype.sendCustomMessage=function(e){var t=this.getCurrentSession();t&&t.sendMessage(s.DORIS_CAST_CHANNEL,e)},t.prototype.toggleDebug=function(){this.sendCustomMessage({kind:u.CustomChromecastMessage.TOGGLE_DEBUG})},t.canCast=function(){return!(!c.browser||!c.browser.isChrome)&&(c.browser.version<=71||"localhost"===window.location.hostname||"https:"===window.location.protocol)},t}(d.SourceHandlerBase);t.ChromecastHandler=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(651),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FALLBACK_HANDLER=t.FallbackHandler=void 0;var r=n(0),i=n(12),a=n(8),o=n(185),s=function(e){throw new Error("Failed to execute '".concat(e,"'. No source handler is available for the requested media type!"))},u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addTextTracks=function(){return s("addTextTracks")},t.destroy=function(){},t.exitFullscreen=function(){return s("exitFullscreen")},t.exitPictureInPicture=function(){return s("exitPictureInPicture")},t.getAudioTracks=function(){return[]},t.getBufferedRanges=function(){return[]},t.getCanControlVolume=function(){return!1},t.getCurrentAudioTrack=function(){},t.getCurrentDate=function(){},t.getCurrentLevel=function(){},t.getCurrentLevelVariant=function(){return 0},t.getCurrentTextTrack=function(){},t.getCurrentTime=function(){return 0},t.getDimensions=function(){return{videoHeight:NaN,videoWidth:NaN}},t.getDuration=function(){return NaN},t.getElement=function(){},t.getEngine=function(){},t.getEngineVersion=function(){},t.getFrameRate=function(){},t.getFullscreenElement=function(){},t.getHasEnded=function(){return!1},t.getHasPlayed=function(){return!1},t.getIsAtLiveEdge=function(){return!1},t.getIsBuffering=function(){return!1},t.getIsFullscreenActive=function(){return!1},t.getIsFullscreenSupported=function(){return!1},t.getIsLive=function(){return!1},t.getIsMuted=function(){return!1},t.getIsPaused=function(){return!0},t.getIsPictureInPictureActive=function(){return!1},t.getIsPictureInPictureSupported=function(){return!1},t.getIsPlaying=function(){return!1},t.getIsRebuffering=function(){return!1},t.getIsSeeking=function(){return!1},t.getLevelVariants=function(){return 0},t.getLevels=function(){return[]},t.getMediaInfo=function(){},t.getPlaybackRate=function(){return 1},t.getReadyState=function(){return a.ReadyStates.HAVE_NOTHING},t.getSeekableDuration=function(){return NaN},t.getSeekableRange=function(){return{start:NaN,end:NaN}},t.getSourceUrl=function(){},t.getStartDate=function(){},t.getTextTracks=function(){return[]},t.getVolume=function(){return 1},t.load=function(){return s("load")},t.nudge=function(){return s("nudge")},t.nudgeVolume=function(){return s("nudgeVolume")},t.pause=function(){return s("pause")},t.play=function(){return s("play")},t.requestFullscreen=function(){return s("requestFullscreen")},t.requestPictureInPicture=function(){return s("requestPictureInPicture")},t.reset=function(){},t.seekTo=function(){return s("seekTo")},t.setCurrentAudioTrack=function(){return s("setCurrentAudioTrack")},t.setCurrentLevel=function(){return s("setCurrentLevel")},t.setCurrentLevelVariant=function(){return s("setCurrentLevelVariant")},t.setCurrentTextTrack=function(){return s("setCurrentTextTrack")},t.setHtmlTextTrackContainer=function(){return s("setHtmlTextTrackContainer")},t.setIsMuted=function(){return s("setIsMuted")},t.setPlaybackRate=function(){return s("setPlaybackRate")},t.setVolume=function(){return s("setVolume")},t}return r.__extends(t,e),Object.defineProperty(t.prototype,"onDestroyed",{get:function(){return i.NEVER},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDestroying",{get:function(){return i.NEVER},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onElementCreated",{get:function(){return i.NEVER},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onElementDestroying",{get:function(){return i.NEVER},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onReset",{get:function(){return i.NEVER},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return a.HandlerTypes.NONE},t.prototype.hasType=function(e){return a.HandlerTypes.NONE===e},t}(o.EventEmitter);t.FallbackHandler=u,t.FALLBACK_HANDLER=new u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(653),t),r.__exportStar(n(654),t),r.__exportStar(n(655),t),r.__exportStar(n(656),t),r.__exportStar(n(658),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(160),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(195),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(136),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(657),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebRTCHandler=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(15),o=n(8),s=n(16),u=n(92),l=new s.LoggerFileNameDecorator("WebRTCHandler"),c=function(e){function t(t,n,r){var a=e.call(this,t,n,r)||this;return a._engine=void 0,a._type=o.HandlerTypes.WEBRTC,a._retryCount=10,(0,i.default)(a),a.configureEvents(),a.init(),a}return r.__extends(t,e),t.canPlayType=function(e){return"application/webrtc"===e?o.CanPlaySource.MAYBE:o.CanPlaySource.NO},t.prototype.getAudioTracks=function(){return[]},t.prototype.getCurrentAudioTrack=function(){},t.prototype.load=function(t){return r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,e.prototype.load.call(this,t)];case 1:if(r.sent(),void 0===this.getElement())throw new Error("Failed to get HTMLVideoElement.");if(n=t.source,!this.isWebRTCSource(n))throw new Error("Load must be called with IWebRTCSource.");return t.autoPlay&&this.handleAutoPlay(t.autoPlay),this.onLoadedMetadata.pipe((0,a.take)(1)).subscribe((function(){i._readySource.next({isReady:!0})})),this._retryCount=10,this._streamInfo={applicationName:n.webRTC.applicationName,streamName:n.webRTC.streamName},[4,this.connect(n.url)];case 2:return r.sent(),[2]}}))}))},t.prototype.setCurrentAudioTrack=function(e){},t.prototype.connect=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(n){return l.info("Opening web socket to '".concat(e,"'...")),this._connection=new WebSocket(e),this._connection.binaryType="blob",this._connection.addEventListener("open",this.handleConnectionOpened),this._connection.addEventListener("message",this.handleMessageReceived),this._connection.addEventListener("close",(function(){l.info("Web socket closed")})),this._connection.addEventListener("error",(function(e){l.info("Error occurred",e),t.emitError({type:o.ErrorTypes.UNKNOWN,message:"A WebRTC connection error has occurred."})})),[2]}))}))},t.prototype.getOffer=function(){if(this._connection){l.info("Sending `getOffer`...");var e={direction:"play",command:"getOffer",streamInfo:this._streamInfo,userData:{}};this._connection.send(JSON.stringify(e))}else l.error("Failed to send `getOffer`, as no connection is open.")},t.prototype.handleConnectionOpened=function(){var e=this;l.info("Web socket opened!"),this._peerConnection=new RTCPeerConnection,"ontrack"in this._peerConnection?this._peerConnection.addEventListener("track",(function(t){var n=t.streams[0];l.info("Track '".concat(t.track.kind,"' loaded for stream '").concat(n.id,"'.")),e.setSourceObject(n)})):this._peerConnection.addEventListener("addstream",(function(t){var n=t.stream;l.info("Setting stream as source",n),e.setSourceObject(n)})),this.getOffer()},t.prototype.handleMessageReceived=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,s,u,c,d,f=this;return r.__generator(this,(function(h){switch(h.label){case 0:return t=JSON.parse(e.data),l.info("Message received!",t),514!==(n=t.status)?[3,1]:(this._retryCount--,this._retryCount>0?window.setTimeout(this.getOffer,500):this.emitError({type:o.ErrorTypes.TOTAL_FAILURE,message:"Failed to connect to WebRTC stream."}),[3,7]);case 1:return 200===n?[3,2]:(window.setTimeout((function(){f._connection&&f.connect(f._connection.url)}),5e3),[3,7]);case 2:return this._retryCount=10,t.streamInfo&&(this._streamInfo=t.streamInfo),this._peerConnection?t.sdp?(l.info("Setting remote description"),[4,this._peerConnection.setRemoteDescription(t.sdp)]):[3,6]:[3,7];case 3:return h.sent(),l.info("Setting local description"),[4,this._peerConnection.createAnswer()];case 4:return i=h.sent(),[4,this._peerConnection.setLocalDescription(i)];case 5:h.sent(),this.sendResponse(i),h.label=6;case 6:if(t.iceCandidates)try{for(a=r.__values(t.iceCandidates),s=a.next();!s.done;s=a.next())u=s.value,l.info("Adding ICE candidate...",u),this._peerConnection.addIceCandidate(u)}catch(e){c={error:e}}finally{try{s&&!s.done&&(d=a.return)&&d.call(a)}finally{if(c)throw c.error}}h.label=7;case 7:return[2]}}))}))},t.prototype.isWebRTCSource=function(e){var t=e;return e.sourceType!==o.SourceTypes.DYNAMIC&&void 0!==t.webRTC&&"string"==typeof t.webRTC.applicationName&&"string"==typeof t.webRTC.streamName},t.prototype.sendResponse=function(e){if(this._connection){l.info("Sending `sendResponse`...");var t={direction:"play",command:"sendResponse",streamInfo:this._streamInfo,sdp:e,userData:{}};this._connection.send(JSON.stringify(t))}else l.error("Failed to send `sendResponse`, as no connection is open.")},t.prototype.setSourceObject=function(e){var t=this.getElement();if(t&&this._streamId!==e.id){l.info("Loading media stream '".concat(e.id,"'."),e),this._streamId=e.id;try{t.srcObject=e}catch(n){l.warn("Failed to set srcObject, creating object url...",n),t.src=URL.createObjectURL(e)}}},t}(u.HTMLVideoHandlerBase);t.WebRTCHandler=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(659),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShakaHandler=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=r.__importStar(n(140)),u=n(20),l=n(43),c=n(10),d=n(92),f=n(141),h=n(661),p=n(665);window.muxjs=n(667);var m=new l.LoggerFileNameDecorator("ShakaHandler"),g=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;o._type=u.HandlerTypes.SHAKA,(0,i.default)(o),o._levelState=new a.BehaviorSubject({currentLevel:e.prototype.getCurrentLevel.call(o),currentLevelVariant:e.prototype.getCurrentLevelVariant.call(o),frameRate:e.prototype.getFrameRate.call(o),levelVariants:e.prototype.getLevelVariants.call(o),levels:e.prototype.getLevels.call(o)}),o._engine=new s.Player;var l=n.shakaConfig;return o._engine.configure(l),m.debug("Using shaka-player ",s.Player.version,l),o._shakaAudioTrackController=new h.ShakaAudioTrackController({shaka:o._engine}),o._textTrackController.destroy(),o._textTrackController=new h.ShakaTextTrackController({shaka:o._engine,elementSource:o._elementSource,textTrackContainer:n.htmlTextTrackContainer,useHTMLTextTracks:n.useHTMLTextTracks}),o.configureEvents(),o.init(),o}return r.__extends(t,e),Object.defineProperty(t.prototype,"currentLevel",{get:function(){var e;if(null===(e=this._engine.getConfiguration().abr)||void 0===e?void 0:e.enabled)return u.AUTOLEVEL;var t=this._engine.getVariantTracks().find((function(e){return e.active}));return t?this.parseLevel(t):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentLevelVariant",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"frameRate",{get:function(){var e,t=this._engine.getVariantTracks().find((function(e){return e.active}));return null!==(e=null==t?void 0:t.frameRate)&&void 0!==e?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levelVariants",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){var e=this,t=this._engine.getVariantTracks();(t=t.filter((function(e){return e.videoId}))).sort((function(e,t){return t.bandwidth-e.bandwidth}));var n=t.find((function(e){return e.active}));return n&&(t=t.filter((function(e){return e.audioId==n.audioId}))),t.length>0?t.map((function(t){return e.parseLevel(t)})).concat(u.AUTOLEVEL):[]},enumerable:!1,configurable:!0}),t.canPlayType=function(e){return s.default.polyfill.installAll(),s.Player.isBrowserSupported()&&(e=e.toLowerCase(),["application/dash+xml"].some((function(t){return-1!==e.indexOf(t)})))?u.CanPlaySource.PROBABLY:u.CanPlaySource.NO},t.prototype.destroy=function(){this.startDestroying(),this.reset(),this._levelState.complete(),this._shakaAudioTrackController.destroy(),e.prototype.destroy.call(this)},t.prototype.getAudioTracks=function(){return this._shakaAudioTrackController.getAudioTracks()},t.prototype.getCurrentAudioTrack=function(){return this._shakaAudioTrackController.getCurrentAudioTrack()},t.prototype.getCurrentLevel=function(){return this._levelState.getValue().currentLevel},t.prototype.getCurrentLevelVariant=function(){return this._levelState.getValue().currentLevelVariant},t.prototype.getEngineVersion=function(){var e=s.Player.version;return"v"===(null==e?void 0:e[0])&&(e=e.substring(1)),e},t.prototype.getFrameRate=function(){return this._levelState.getValue().frameRate},t.prototype.getIsLive=function(){return this._engine.isLive()},t.prototype.getLevelVariants=function(){return this._levelState.getValue().levelVariants},t.prototype.getLevels=function(){return this._levelState.getValue().levels},t.prototype.getSeekableRange=function(){return this._engine.seekRange()},t.prototype.getShaka=function(){return s.default},t.prototype.getSourceUrl=function(){var t;return null!==(t=this._engine.getAssetUri())&&void 0!==t?t:e.prototype.getSourceUrl.call(this)},t.prototype.getStartDate=function(){var e;if(this.getIsLive())return null!==(e=this._engine.getPresentationStartTimeAsDate())&&void 0!==e?e:void 0},t.prototype.load=function(t){var n;return r.__awaiter(this,void 0,void 0,(function(){var i,a,s,u,l,c,d,p;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,e.prototype.load.call(this,t)];case 1:if(r.sent(),m.debug("load",t),i=this._engine,void 0===(a=this.getElement()))throw new Error("Failed to get HTMLVideoElement.");return i.attach(a),[4,this.resolveSource(t.source)];case 2:return s=r.sent(),u=s.url,[4,new h.Drm(i,this._config.drm).init(null!==(n=s.drm)&&void 0!==n?n:t.drm)];case 3:r.sent(),i.addEventListener(f.ShakaEventTypes.ERROR,this.handleError),i.addEventListener(f.ShakaEventTypes.VARIANT_CHANGED,this.handleTracksChanged),i.addEventListener(f.ShakaEventTypes.TRACKS_CHANGED,this.handleTracksChanged),"number"==typeof(l=t.startFrom)&&l>0?c=l:l instanceof Date&&(c=l.getTime()/1e3),d=navigator.languages||["en-us"],i.configure({preferredAudioLanguage:d[0],preferredTextLanguage:d[0]}),r.label=4;case 4:return r.trys.push([4,7,,8]),[4,i.load(u,c)];case 5:return r.sent(),this.handleAutoPlay(t.autoPlay),[4,this.onLoadedMetadata.pipe((0,o.take)(1)).toPromise()];case 6:return r.sent(),this._readySource.next({isReady:!0}),[3,8];case 7:return p=r.sent(),this.handleError(p),[3,8];case 8:return[2]}}))}))},t.prototype.reset=function(){var t=this._engine;t.removeEventListener(f.ShakaEventTypes.ERROR,this.handleError),t.removeEventListener(f.ShakaEventTypes.VARIANT_CHANGED,this.handleTracksChanged),t.removeEventListener(f.ShakaEventTypes.TRACKS_CHANGED,this.handleTracksChanged),t.detach(),this._levelState.next({currentLevel:e.prototype.getCurrentLevel.call(this),currentLevelVariant:e.prototype.getCurrentLevelVariant.call(this),frameRate:e.prototype.getFrameRate.call(this),levelVariants:e.prototype.getLevelVariants.call(this),levels:e.prototype.getLevels.call(this)}),e.prototype.reset.call(this)},t.prototype.setCurrentAudioTrack=function(e){this._shakaAudioTrackController.setCurrentAudioTrack(e)},t.prototype.setCurrentLevel=function(e){var t=e.id===u.AUTOLEVEL.id;if(this._engine.configure({abr:{enabled:t}}),!t){var n=this._engine.getVariantTracks(),i=n.find((function(e){return e.active})),a=n.find((function(t){var n,r=null!==(n=null==t?void 0:t.videoBandwidth)&&void 0!==n?n:null==t?void 0:t.bandwidth;return(null==i?void 0:i.language)===t.language&&i.channelsCount===t.channelsCount&&r===e.bitrate}));a&&this._engine.selectVariantTrack(a)}this._levelState.next(r.__assign(r.__assign({},this._levelState.getValue()),{currentLevel:e,frameRate:this.frameRate}))},t.prototype.setCurrentLevelVariant=function(e){if(e<0||e>=this.getLevelVariants())throw new Error("Invalid level variant!");this._levelState.next(r.__assign(r.__assign({},this._levelState.getValue()),{currentLevelVariant:e}))},t.prototype.configureEvents=function(){e.prototype.configureEvents.call(this),this._onAudioTrackChange=this._shakaAudioTrackController.onAudioTrackChange,this._onLevelChange=this._levelState.pipe((0,o.distinctUntilChanged)(c.compareLevelChangeEvents))},t.prototype.handleError=function(e){var t;try{var n=null!==(t=e.detail)&&void 0!==t?t:e;m.error(n);var r=s.util.Error,i=r.Severity,a=r.Category,o=r.Code,l=n.severity,c=n.category,d=n.code,f=n.data;if(l===i.CRITICAL){var h=(0,p.getEnumValueAsString)(a,c),g=(0,p.getEnumValueAsString)(o,d);this.emitError({type:u.ErrorTypes.TOTAL_FAILURE,message:"SHAKA ".concat(h," failure: ").concat(g," ").concat(JSON.stringify(f)),nativeEvent:e})}}catch(t){this.emitError({type:u.ErrorTypes.TOTAL_FAILURE,message:"SHAKA failure: ".concat(JSON.stringify(e)),nativeEvent:e})}},t.prototype.handleTracksChanged=function(){var e=this,t=e.levels,n=e.levelVariants,i=e.currentLevel,a=e.currentLevelVariant,o=e.frameRate;this._levelState.next(r.__assign(r.__assign({},this._levelState.getValue()),{levels:t,levelVariants:n,currentLevel:i,currentLevelVariant:a,frameRate:o}))},t.prototype.parseLevel=function(e){var t=e.id,n=e.bandwidth,r=e.videoBandwidth,i=e.height,a=e.width,o=e.label,s=e.language;return{bitrate:null!=r?r:n,height:null!=i?i:0,id:t,label:null!=o?o:s,width:null!=a?a:0}},t}(d.HTMLVideoHandlerBase);t.ShakaHandler=g},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ShakaEventTypes=void 0,(r=t.ShakaEventTypes||(t.ShakaEventTypes={})).ERROR="error",r.MANIFEST_PARSED="manifestparsed",r.TEXT_CHANGED="textchanged",r.TRACKS_CHANGED="trackschanged",r.VARIANT_CHANGED="variantchanged"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(662),t),r.__exportStar(n(663),t),r.__exportStar(n(664),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Drm=void 0;var r=n(0),i=r.__importDefault(n(9)),a=r.__importDefault(n(140)),o=n(20),s=n(43),u=n(10),l=new s.LoggerFileNameDecorator("Drm"),c=function(){function e(e,t){(0,i.default)(this),this._config=t,this._engine=e}return e.prototype.init=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a,s,l,c,d,f,h;return r.__generator(this,(function(r){switch(r.label){case 0:return t=this._config,n=t.playready,i=t.widevine,a=null==e?void 0:e.widevine,s=null==e?void 0:e.playready,this._options=e,[4,(0,u.isKeySystemSupported)(o.KeySystems.WIDEVINE)];case 1:return l=r.sent(),[4,(0,u.isKeySystemSupported)(o.KeySystems.PLAYREADY)];case 2:return c=r.sent(),d={},f={},h=!1,a&&l&&(h=!0,a.licenseServerUrl&&(d[o.KeySystems.WIDEVINE]=a.licenseServerUrl),i&&(f[o.KeySystems.WIDEVINE]=this.getAdvancedConfig(i))),s&&c&&(h=!0,s.licenseServerUrl&&(d[o.KeySystems.PLAYREADY]=s.licenseServerUrl),n&&(f[o.KeySystems.PLAYREADY]=this.getAdvancedConfig(n))),h&&(this._engine.configure({drm:{advanced:f,servers:d}}),this._engine.getNetworkingEngine().registerRequestFilter(this.handleLicenseRequest)),[2]}}))}))},e.prototype.getAdvancedConfig=function(e){return{distinctiveIdentifierRequired:e.distinctiveIdentifierRequired,persistentStateRequired:e.persistentStateRequired}},e.prototype.getDrmOptions=function(){var e,t,n=this._engine.drmInfo();if(n)return n.keySystem===o.KeySystems.WIDEVINE?null===(e=this._options)||void 0===e?void 0:e.widevine:n.keySystem.startsWith(o.KeySystems.PLAYREADY)?null===(t=this._options)||void 0===t?void 0:t.playready:void 0},e.prototype.handleLicenseRequest=function(e,t){if(e===a.default.net.NetworkingEngine.RequestType.LICENSE){var n=this.getDrmOptions();if(!n)return void l.error("License request is attempted without DRM information!");var i=n.headers;"function"==typeof i?t.headers=i():"object"==typeof i&&(t.headers=i),"customData"in n&&n.customData&&(t.headers=r.__assign(r.__assign({},t.headers),{CustomData:n.customData}))}},e}();t.Drm=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShakaAudioTrackController=void 0;var r=n(0),i=r.__importDefault(n(9)),a=r.__importDefault(n(93)),o=n(12),s=n(15),u=n(71),l=n(141),c=function(){function e(e){var t=this;this._subscriptions=[],(0,i.default)(this),this._shaka=e.shaka,this._audioTrackListSource=new o.BehaviorSubject(void 0),this._trackListController=new u.TrackListController({activateTrack:this.activateTrack,currentTrackChangedEventCreator:function(){return(0,o.fromEvent)(t._shaka,l.ShakaEventTypes.VARIANT_CHANGED).pipe((0,s.filter)((function(e){var t=e.oldTrack,n=e.newTrack;return t.audioId!==n.audioId})))},isParsedTrackEqual:this.isParsedTrackEqual,isTrackActive:this.isTrackActive,parseTrack:this.parseAudioTrack,trackListSource:this._audioTrackListSource,tracksChangedEventCreator:function(){return o.NEVER}}),this._subscriptions.push(this.mapElementSourceToAudioTrackList(e))}return Object.defineProperty(e.prototype,"onAudioTrackChange",{get:function(){return this._trackListController.onChange.pipe((0,s.map)((function(e){var t=e.currentTrack;return{audioTracks:e.tracks,currentAudioTrack:t}})))},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._subscriptions.forEach((function(e){return e.unsubscribe()})),this._audioTrackListSource.complete()},e.prototype.getAudioTracks=function(){return this._trackListController.getTracks()},e.prototype.getCurrentAudioTrack=function(){return this._trackListController.getCurrentTrack()},e.prototype.setCurrentAudioTrack=function(e){this._trackListController.setCurrentTrack(e)},e.prototype.activateTrack=function(e){this._shaka.selectAudioLanguage(e.language,e.roles[0])},e.prototype.isParsedTrackEqual=function(e,t){return e.id===t.id},e.prototype.isTrackActive=function(e){return e.active},e.prototype.mapElementSourceToAudioTrackList=function(e){var t=this,n=e.shaka;return(0,o.merge)((0,o.fromEvent)(n,l.ShakaEventTypes.MANIFEST_PARSED).pipe((0,s.mapTo)([])),(0,o.merge)((0,o.fromEvent)(n,l.ShakaEventTypes.TRACKS_CHANGED),(0,o.fromEvent)(n,l.ShakaEventTypes.VARIANT_CHANGED)).pipe((0,s.map)((function(e){var t=n.getVariantTracks(),r=t.find((function(e){return e.active}));return t.filter((function(e){return e.videoId===(null==r?void 0:r.videoId)})).filter((function(e,t,n){return n.findIndex((function(t){return t.audioRoles&&t.audioRoles.toString()===e.audioRoles.toString()&&t.language===e.language}))===t}))})))).subscribe((function(e){t._audioTrackListSource.next(e)}))},e.prototype.parseAudioTrack=function(e){var t,n,r=e.label,i=e.language;return{id:e.id,label:null!==(n=null!=r?r:null===(t=a.default[i])||void 0===t?void 0:t.nativeName)&&void 0!==n?n:i,lang:i}},e}();t.ShakaAudioTrackController=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShakaTextTrackController=void 0;var r=n(0),i=r.__importDefault(n(9)),a=r.__importDefault(n(93)),o=n(12),s=n(15),u=n(20),l=n(10),c=n(186),d=n(141),f=function(e){function t(t){var n=e.call(this,t)||this;return n._isTextTrackVisible=!1,n._useHTMLTextTracks=!1,(0,i.default)(n),n._shaka=t.shaka,n._baseTextTrackContainer=t.textTrackContainer,n._useHTMLTextTracks=t.useHTMLTextTracks,n._shaka.addEventListener(d.ShakaEventTypes.MANIFEST_PARSED,n.onManifestParsed),n}return r.__extends(t,e),Object.defineProperty(t.prototype,"onTextTrackChange",{get:function(){var e=this;return(0,o.merge)((0,o.fromEvent)(this._shaka,d.ShakaEventTypes.TRACKS_CHANGED),(0,o.fromEvent)(this._shaka,d.ShakaEventTypes.TEXT_CHANGED)).pipe((0,s.map)((function(){return{currentTextTrack:e.getCurrentTextTrack(),textTracks:e.getTextTracks()}})))},enumerable:!1,configurable:!0}),t.prototype.addTextTrack=function(e){var t=e.src,n=e.kind,r=e.label,i=e.lang;t&&this._shaka.addTextTrack(t,i,n,"text/vtt",void 0,r)},t.prototype.destroy=function(){this._shaka.removeEventListener(d.ShakaEventTypes.MANIFEST_PARSED,this.onManifestParsed),e.prototype.destroy.call(this)},t.prototype.getCurrentTextTrack=function(){if(this._isTextTrackVisible){var e=this._shaka.getTextTracks().find((function(e){return e.active}));return e?this.parseShakaTextTrack(e):void 0}},t.prototype.getTextTracks=function(){var e=this;return this._shaka.getTextTracks().map((function(t){return e.parseShakaTextTrack(t)}))},t.prototype.setCurrentTextTrack=function(e){this._isTextTrackVisible=void 0!==e,this._isTextTrackVisible||this._useHTMLTextTracks||this._shaka.setTextTrackVisibility(!1),this._useHTMLTextTracks&&this.setHtmlTextTractVisibility(this._isTextTrackVisible);var t=this._shaka.getTextTracks().find((function(t){return(null==e?void 0:e.src)===t.id.toString()}));t&&(this._shaka.selectTextTrack(t),this._shaka.isTextTrackVisible()||this._shaka.setTextTrackVisibility(!0))},t.prototype.onManifestParsed=function(){this._useHTMLTextTracks&&this._shaka.configure({streaming:{alwaysStreamText:!0}})},t.prototype.parseShakaTextTrack=function(e){var t,n,r=e.id,i=e.kind,o=e.label,s=e.language;return{kind:null!=i?i:u.TextTrackKinds.SUBTITLES,label:null!==(n=null!=o?o:null===(t=a.default[s])||void 0===t?void 0:t.nativeName)&&void 0!==n?n:s,lang:s,src:r.toString()}},t.prototype.setHtmlTextTractVisibility=function(t){e.prototype.setTextTrackContainer.call(this,t?this._baseTextTrackContainer:""),(0,l.getEl)(this._baseTextTrackContainer).innerHTML=""},t}(c.TextTrackController);t.ShakaTextTrackController=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(666),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEnumValueAsString=void 0,t.getEnumValueAsString=function(e,t){for(var n in e)if(e[n]===t)return n;return""}},function(e,t,n){e.exports=function(){"use strict";var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,a;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,n,r,i,a,o,s,u=e;a=function(e,n){return t(i(e,n))},o=function(e,t){return n(r(e),t)},s=function(e,t,n){return r(n?e:e-t)};var l,c=9e4,d=(t=function(e){return 9e4*e},n=function(e,t){return e*t},r=function(e){return e/9e4}),f=(i=function(e,t){return e/t},a),h=o,p=s,m=c,g=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(l=function(e){var t,n=0;l.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+n+" outside syncword"})},this.push=function(r){var i,a,o,s,u,l=0;if(e||(n=0),"audio"===r.type){var c;for(t&&t.length?(o=t,(t=new Uint8Array(o.byteLength+r.data.byteLength)).set(o),t.set(r.data,o.byteLength)):t=r.data;l+7<t.length;)if(255===t[l]&&240==(246&t[l+1])){if("number"==typeof c&&(this.skipWarn_(c,l),c=null),a=2*(1&~t[l+1]),i=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,u=(s=1024*(1+(3&t[l+6])))*m/g[(60&t[l+2])>>>2],t.byteLength-l<i)break;this.trigger("data",{pts:r.pts+n*u,dts:r.dts+n*u,sampleCount:s,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:g[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+a,l+i)}),n++,l+=i}else"number"!=typeof c&&(c=l),l++;"number"==typeof c&&(this.skipWarn_(c,l),c=null),t=t.subarray(l)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new u;var v,y,_,b=l,T=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,a=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");a.set(e.subarray(i,i+o)),n=new DataView(a.buffer).getUint32(0),r=8*o,t-=o},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),a=n>>>32-i;return(r-=i)>0?n<<=i:t>0&&this.loadWord(),(i=e-i)>0?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(0!=(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(y=function(){var e,t,n=0;y.prototype.init.call(this),this.push=function(r){var i;t?((i=new Uint8Array(t.byteLength+r.data.byteLength)).set(t),i.set(r.data,t.byteLength),t=i):t=r.data;for(var a=t.byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<a);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new u,_={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(v=function(){var e,t,n,r,i,a,o,s=new y;v.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,r=e.dts,s.push(e))},s.on("data",(function(o){var s={trackId:t,pts:n,dts:r,data:o,nalUnitTypeCode:31&o[0]};switch(s.nalUnitTypeCode){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=i(o.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=i(o.subarray(1)),s.config=a(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",s)})),s.on("done",(function(){e.trigger("done")})),s.on("partialdone",(function(){e.trigger("partialdone")})),s.on("reset",(function(){e.trigger("reset")})),s.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},o=function(e,t){var n,r=8,i=8;for(n=0;n<e;n++)0!==i&&(i=(r+t.readExpGolomb()+256)%256),r=0===i?r:i},i=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},a=function(e){var t,n,r,i,a,s,u,l,c,d,f,h,p=0,m=0,g=0,v=0,y=[1,1];if(n=(t=new T(e)).readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),_[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(f=3!==a?8:12,h=0;h<f;h++)t.readBoolean()&&o(h<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),h=0;h<u;h++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(p=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}y&&(y[0],y[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:16*(l+1)-2*p-2*m,height:(2-d)*(c+1)*16-2*g-2*v,sarRatio:y}}}).prototype=new u;var E,S,w,A,M,L,C,D,k,P,I,O,R,x,N,j,F,U,B,Y,H,V,G,K,W,q,z,X,Q,$,J,Z,ee,te,ne,re,ie,ae,oe,se,ue={H264Stream:v,NalByteStream:y},le={Adts:b,h264:ue},ce=Math.pow(2,32)-1;(function(){var e;if(V={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in V)V.hasOwnProperty(e)&&(V[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);G=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),W=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),K=new Uint8Array([0,0,0,1]),q=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),z=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),X={video:q,audio:z},J=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),$=new Uint8Array([0,0,0,0,0,0,0,0]),Z=new Uint8Array([0,0,0,0,0,0,0,0]),ee=Z,te=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ne=Z,Q=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),E=function(e){var t,n,r=[],i=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)i+=r[t].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,i=8;t<r.length;t++)n.set(r[t],i),i+=r[t].byteLength;return n},S=function(){return E(V.dinf,E(V.dref,J))},w=function(e){return E(V.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},N=function(e){return E(V.hdlr,X[e])},x=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),E(V.mdhd,t)},R=function(e){return E(V.mdia,x(e),N(e.type),L(e))},M=function(e){return E(V.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},L=function(e){return E(V.minf,"video"===e.type?E(V.vmhd,Q):E(V.smhd,$),S(),F(e))},C=function(e,t){for(var n=[],r=t.length;r--;)n[r]=B(t[r]);return E.apply(null,[V.moof,M(e)].concat(n))},D=function(e){for(var t=e.length,n=[];t--;)n[t]=I(e[t]);return E.apply(null,[V.moov,P(4294967295)].concat(n).concat(k(e)))},k=function(e){for(var t=e.length,n=[];t--;)n[t]=Y(e[t]);return E.apply(null,[V.mvex].concat(n))},P=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return E(V.mvhd,t)},j=function(e){var t,n,r=e.samples||[],i=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)t=r[n].flags,i[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return E(V.sdtp,i)},F=function(e){return E(V.stbl,U(e),E(V.stts,ne),E(V.stsc,ee),E(V.stsz,te),E(V.stco,Z))},U=function(e){return E(V.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?oe(e):se(e))},oe=function(e){var t,n,r=e.sps||[],i=e.pps||[],a=[],o=[];for(t=0;t<r.length;t++)a.push((65280&r[t].byteLength)>>>8),a.push(255&r[t].byteLength),a=a.concat(Array.prototype.slice.call(r[t]));for(t=0;t<i.length;t++)o.push((65280&i[t].byteLength)>>>8),o.push(255&i[t].byteLength),o=o.concat(Array.prototype.slice.call(i[t]));if(n=[V.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),E(V.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],a,[i.length],o))),E(V.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var s=e.sarRatio[0],u=e.sarRatio[1];n.push(E(V.pasp,new Uint8Array([(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return E.apply(null,n)},se=function(e){return E(V.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),w(e))},O=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return E(V.tkhd,t)},B=function(e){var t,n,r,i,a,o;return t=E(V.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/(ce+1)),o=Math.floor(e.baseMediaDecodeTime%(ce+1)),n=E(V.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===e.type?(r=H(e,92),E(V.traf,t,n,r)):(i=j(e),r=H(e,i.length+92),E(V.traf,t,n,r,i))},I=function(e){return e.duration=e.duration||4294967295,E(V.trak,O(e),R(e))},Y=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),E(V.trex,t)},ae=function(e,t){var n=0,r=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},ie=function(e,t){var n,r,i,a,o,s;for(t+=20+16*(a=e.samples||[]).length,i=ae(a,t),(r=new Uint8Array(i.length+16*a.length)).set(i),n=i.length,s=0;s<a.length;s++)o=a[s],r[n++]=(4278190080&o.duration)>>>24,r[n++]=(16711680&o.duration)>>>16,r[n++]=(65280&o.duration)>>>8,r[n++]=255&o.duration,r[n++]=(4278190080&o.size)>>>24,r[n++]=(16711680&o.size)>>>16,r[n++]=(65280&o.size)>>>8,r[n++]=255&o.size,r[n++]=o.flags.isLeading<<2|o.flags.dependsOn,r[n++]=o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,r[n++]=61440&o.flags.degradationPriority,r[n++]=15&o.flags.degradationPriority,r[n++]=(4278190080&o.compositionTimeOffset)>>>24,r[n++]=(16711680&o.compositionTimeOffset)>>>16,r[n++]=(65280&o.compositionTimeOffset)>>>8,r[n++]=255&o.compositionTimeOffset;return E(V.trun,r)},re=function(e,t){var n,r,i,a,o,s;for(t+=20+8*(a=e.samples||[]).length,i=ae(a,t),(n=new Uint8Array(i.length+8*a.length)).set(i),r=i.length,s=0;s<a.length;s++)o=a[s],n[r++]=(4278190080&o.duration)>>>24,n[r++]=(16711680&o.duration)>>>16,n[r++]=(65280&o.duration)>>>8,n[r++]=255&o.duration,n[r++]=(4278190080&o.size)>>>24,n[r++]=(16711680&o.size)>>>16,n[r++]=(65280&o.size)>>>8,n[r++]=255&o.size;return E(V.trun,n)},H=function(e,t){return"audio"===e.type?re(e,t):ie(e,t)};var de,fe,he,pe,me,ge,ve={ftyp:A=function(){return E(V.ftyp,G,K,G,W)},mdat:function(e){return E(V.mdat,e)},moof:C,moov:D,initSegment:function(e){var t,n=A(),r=D(e);return(t=new Uint8Array(n.byteLength+r.byteLength)).set(n),t.set(r,n.byteLength),t}},ye=function(e){return e>>>0},_e=function(e){return("00"+e.toString(16)).slice(-2)},be=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},Te=ye,Ee=function e(t,n){var r,i,a,o,s,u=[];if(!n.length)return null;for(r=0;r<t.byteLength;)i=Te(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]),a=be(t.subarray(r+4,r+8)),o=i>1?r+i:t.byteLength,a===n[0]&&(1===n.length?u.push(t.subarray(r+8,o)):(s=e(t.subarray(r+8,o),n.slice(1))).length&&(u=u.concat(s))),r=o;return u},Se=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],o=8&r.flags[2],s=16&r.flags[2],u=32&r.flags[2],l=65536&r.flags[0],c=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),a&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(r.defaultSampleDuration=n.getUint32(t),t+=4),s&&(r.defaultSampleSize=n.getUint32(t),t+=4),u&&(r.defaultSampleFlags=n.getUint32(t)),l&&(r.durationIsEmpty=!0),!i&&c&&(r.baseDataOffsetIsMoof=!0),r},we=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Ae=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],s=2&n.flags[1],u=4&n.flags[1],l=8&n.flags[1],c=r.getUint32(4),d=8;for(i&&(n.dataOffset=r.getInt32(d),d+=4),a&&c&&(t={flags:we(e.subarray(d,d+4))},d+=4,o&&(t.duration=r.getUint32(d),d+=4),s&&(t.size=r.getUint32(d),d+=4),l&&(1===n.version?t.compositionTimeOffset=r.getInt32(d):t.compositionTimeOffset=r.getUint32(d),d+=4),n.samples.push(t),c--);c--;)t={},o&&(t.duration=r.getUint32(d),d+=4),s&&(t.size=r.getUint32(d),d+=4),u&&(t.flags=we(e.subarray(d,d+4)),d+=4),l&&(1===n.version?t.compositionTimeOffset=r.getInt32(d):t.compositionTimeOffset=r.getUint32(d),d+=4),n.samples.push(t);return n},Me=ye,Le=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:Me(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=Me(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t},Ce=ye,De=_e;de=function(e){return Ee(e,["moov","trak"]).reduce((function(e,t){var n,r,i,a,o;return(n=Ee(t,["tkhd"])[0])?(r=n[0],a=Ce(n[i=0===r?12:20]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3]),(o=Ee(t,["mdia","mdhd"])[0])?(i=0===(r=o[0])?12:20,e[a]=Ce(o[i]<<24|o[i+1]<<16|o[i+2]<<8|o[i+3]),e):null):null}),{})},fe=function(e,t){var n,r,i;return n=Ee(t,["moof","traf"]),r=[].concat.apply([],n.map((function(t){return Ee(t,["tfhd"]).map((function(n){var r,i,a;return r=Ce(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),i=e[r]||9e4,(a="number"!=typeof(a=Ee(t,["tfdt"]).map((function(e){var t,n;return t=e[0],n=Ce(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=Ce(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n}))[0])||isNaN(a)?1/0:a)/i}))}))),i=Math.min.apply(null,r),isFinite(i)?i:0},he=function(e,t){var n,r=Ee(t,["moof","traf"]),i=0,a=0;if(r&&r.length){var o=Ee(r[0],["tfhd"])[0],s=Ee(r[0],["trun"])[0],u=Ee(r[0],["tfdt"])[0];if(o&&(n=Se(o).trackId),u&&(i=Le(u).baseMediaDecodeTime),s){var l=Ae(s);l.samples&&l.samples.length&&(a=l.samples[0].compositionTimeOffset||0)}}return(i+a)/(e[n]||9e4)},pe=function(e){var t=Ee(e,["moov","trak"]),n=[];return t.forEach((function(e){var t=Ee(e,["mdia","hdlr"]),r=Ee(e,["tkhd"]);t.forEach((function(e,t){var i,a,o=be(e.subarray(8,12)),s=r[t];"vide"===o&&(a=0===(i=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20),n.push(a))}))})),n},me=function(e){var t=Ee(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,r,i={},a=Ee(e,["tkhd"])[0];a&&(r=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),i.id=0===r?t.getUint32(12):t.getUint32(20));var o=Ee(e,["mdia","hdlr"])[0];if(o){var s=be(o.subarray(8,12));i.type="vide"===s?"video":"soun"===s?"audio":s}var u=Ee(e,["mdia","minf","stbl","stsd"])[0];if(u){var l=u.subarray(8);i.codec=be(l.subarray(4,8));var c,d=Ee(l,[i.codec])[0];d&&(/^[a-z]vc[1-9]$/i.test(i.codec)?(c=d.subarray(78),"avcC"===be(c.subarray(4,8))&&c.length>11?(i.codec+=".",i.codec+=De(c[9]),i.codec+=De(c[10]),i.codec+=De(c[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)?(c=d.subarray(28),"esds"===be(c.subarray(4,8))&&c.length>20&&0!==c[19]?(i.codec+="."+De(c[19]),i.codec+="."+De(c[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"):i.codec=i.codec.toLowerCase())}var f=Ee(e,["mdia","mdhd"])[0];f&&(i.timescale=ge(f)),n.push(i)})),n};var ke,Pe={findBox:Ee,parseType:be,timescale:de,startTime:fe,compositionStartTime:he,videoTrackIds:pe,tracks:me,getTimescaleFromMediaHeader:ge=function(e){var t=0===e[0]?12:20;return Ce(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])}},Ie=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},Oe=function(e){var t,n,r=[],i=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,r.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r),i},Re=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i},xe=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},Ne=function(e,t){var n,r,i,a,o,s=t||0,u=[];for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++)o=a[r],s+=(i=Ie(o,s)).size,u.push(i);return u},je=function(e){var t,n,r,i,a,o,s=0,u=e.byteLength,l=e.nalCount,c=new Uint8Array(u+4*l),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)o=a[r],d.setUint32(s,o.data.byteLength),s+=4,c.set(o.data,s),s+=o.data.byteLength;return c},Fe=function(e,t){var n,r=[];return n=Ie(e,t||0),r.push(n),r},Ue=function(e){var t,n,r=0,i=e.byteLength,a=e.length,o=new Uint8Array(i+4*a),s=new DataView(o.buffer);for(t=0;t<e.length;t++)n=e[t],s.setUint32(r,n.data.byteLength),r+=4,o.set(n.data,r),r+=n.data.byteLength;return o},Be=[33,16,5,32,164,27],Ye=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],He=function(e){for(var t=[];e--;)t.push(0);return t},Ve=function(){if(!ke){var e={96e3:[Be,[227,64],He(154),[56]],88200:[Be,[231],He(170),[56]],64e3:[Be,[248,192],He(240),[56]],48e3:[Be,[255,192],He(268),[55,148,128],He(54),[112]],44100:[Be,[255,192],He(268),[55,163,128],He(84),[112]],32e3:[Be,[255,192],He(268),[55,234],He(226),[112]],24e3:[Be,[255,192],He(268),[55,255,128],He(268),[111,112],He(126),[224]],16e3:[Be,[255,192],He(268),[55,255,128],He(268),[111,255],He(269),[223,108],He(195),[1,192]],12e3:[Ye,He(268),[3,127,248],He(268),[6,255,240],He(268),[13,255,224],He(268),[27,253,128],He(259),[56]],11025:[Ye,He(268),[3,127,248],He(268),[6,255,240],He(268),[13,255,224],He(268),[27,255,192],He(268),[55,175,128],He(108),[112]],8e3:[Ye,He(268),[3,121,16],He(47),[7]]};t=e,ke=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return ke},Ge=function(e,t,n,r){var i,a,o,s,u,l=0,d=0,p=0;if(t.length&&(i=f(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(c/(e.samplerate/1024)),n&&r&&(l=i-Math.max(n,r),p=(d=Math.floor(l/a))*a),!(d<1||p>c/2))){for((o=Ve()[e.samplerate])||(o=t[0].data),s=0;s<d;s++)u=t[0],t.splice(0,0,{data:o,dts:u.dts-a,pts:u.pts-a});return e.baseMediaDecodeTime-=Math.floor(h(p,e.samplerate)),p}},Ke=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},We=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r},qe=function(e){var t,n,r=0,i=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i},ze=c,Xe=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Qe=function(e,t){var n,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/ze,n=Math.floor(n)),n},$e=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Je=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===r){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}n.payload=void 0}t+=i,r=0,i=0}return n},Ze=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},et=function(e,t){var n,r,i,a,o=[];if(!(64&t[0]))return o;for(r=31&t[0],n=0;n<r;n++)a={type:3&t[2+(i=3*n)],pts:e},4&t[i+2]&&(a.ccData=t[i+3]<<8|t[i+4],o.push(a));return o},tt=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},nt=4,rt=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new ht(0,0),new ht(0,1),new ht(1,0),new ht(1,1)],this.parse708captions_&&(this.cc708Stream_=new ut({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(rt.prototype=new u).push=function(e){var t,n,r;if("sei_rbsp"===e.nalUnitType&&(t=Je(e.escapedRBSP)).payload&&t.payloadType===nt&&(n=Ze(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=et(e.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},rt.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},rt.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},rt.prototype.flush=function(){return this.flushStream("flush")},rt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},rt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},rt.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},rt.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},rt.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},rt.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},rt.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var it={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},at=function(e){return 32<=e&&e<=127||160<=e&&e<=255},ot=function(e){this.windowNum=e,this.reset()};ot.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},ot.prototype.getText=function(){return this.rows.join("\n")},ot.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},ot.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},ot.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},ot.prototype.addText=function(e){this.rows[this.rowIdx]+=e},ot.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var st=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new ot(-1),this.windows=[],this.stream=n,"string"==typeof t&&this.createTextDecoder(t)};st.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new ot(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},st.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},st.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var ut=function e(t){t=t||{},e.prototype.init.call(this);var n,r=this,i=t.captionServices||{},a={};Object.keys(i).forEach((function(e){n=i[e],/^SERVICE/.test(e)&&(a[e]=n.encoding)})),this.serviceEncodings=a,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(r.new708Packet(),r.add708Bytes(e)):(null===r.current708Packet&&r.new708Packet(),r.add708Bytes(e))}};ut.prototype=new u,ut.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},ut.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,r=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(r)},ut.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,r=null,i=0,a=t[i++];for(e.seq=a>>6,e.sizeCode=63&a;i<t.length;i++)r=31&(a=t[i++]),7==(n=a>>5)&&r>0&&(n=a=t[i++]),this.pushServiceBlock(n,i,r),r>0&&(i+=r-1)},ut.prototype.pushServiceBlock=function(e,t,n){var r,i=t,a=this.current708Packet.data,o=this.services[e];for(o||(o=this.initService(e,i));i<t+n&&i<a.length;i++)r=a[i],at(r)?i=this.handleText(i,o):24===r?i=this.multiByteCharacter(i,o):16===r?i=this.extendedCommands(i,o):128<=r&&r<=135?i=this.setCurrentWindow(i,o):152<=r&&r<=159?i=this.defineWindow(i,o):136===r?i=this.clearWindows(i,o):140===r?i=this.deleteWindows(i,o):137===r?i=this.displayWindows(i,o):138===r?i=this.hideWindows(i,o):139===r?i=this.toggleWindows(i,o):151===r?i=this.setWindowAttributes(i,o):144===r?i=this.setPenAttributes(i,o):145===r?i=this.setPenColor(i,o):146===r?i=this.setPenLocation(i,o):143===r?o=this.reset(i,o):8===r?o.currentWindow.backspace():12===r?o.currentWindow.clearText():13===r?o.currentWindow.pendingNewLine=!0:14===r?o.currentWindow.clearText():141===r&&i++},ut.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return at(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},ut.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},ut.prototype.initService=function(e,t){var n,r,i=this;return(n="SERVICE"+e)in this.serviceEncodings&&(r=this.serviceEncodings[n]),this.services[e]=new st(e,r,i),this.services[e].init(this.getPts(t),(function(t){i.flushDisplayed(t,i.services[e])})),this.services[e]},ut.prototype.handleText=function(e,t,n){var r,i,a,o,s=n&&n.isExtended,u=n&&n.isMultiByte,l=this.current708Packet.data,c=s?4096:0,d=l[e],f=l[e+1],h=t.currentWindow;return t.textDecoder_&&!s?(u?(i=[d,f],e++):i=[d],r=t.textDecoder_.decode(new Uint8Array(i))):(o=it[a=c|d]||a,r=4096&a&&a===o?"":String.fromCharCode(o)),h.pendingNewLine&&!h.isEmpty()&&h.newLine(this.getPts(e)),h.pendingNewLine=!1,h.addText(r),e},ut.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,r=n[e+1],i=n[e+2];return at(r)&&at(i)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},ut.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},ut.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,r=n[e],i=7&r;t.setCurrentWindow(i);var a=t.currentWindow;return r=n[++e],a.visible=(32&r)>>5,a.rowLock=(16&r)>>4,a.columnLock=(8&r)>>3,a.priority=7&r,r=n[++e],a.relativePositioning=(128&r)>>7,a.anchorVertical=127&r,r=n[++e],a.anchorHorizontal=r,r=n[++e],a.anchorPoint=(240&r)>>4,a.rowCount=15&r,r=n[++e],a.columnCount=63&r,r=n[++e],a.windowStyle=(56&r)>>3,a.penStyle=7&r,a.virtualRowCount=a.rowCount+1,e},ut.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.winAttr;return r=n[++e],i.fillOpacity=(192&r)>>6,i.fillRed=(48&r)>>4,i.fillGreen=(12&r)>>2,i.fillBlue=3&r,r=n[++e],i.borderType=(192&r)>>6,i.borderRed=(48&r)>>4,i.borderGreen=(12&r)>>2,i.borderBlue=3&r,r=n[++e],i.borderType+=(128&r)>>5,i.wordWrap=(64&r)>>6,i.printDirection=(48&r)>>4,i.scrollDirection=(12&r)>>2,i.justify=3&r,r=n[++e],i.effectSpeed=(240&r)>>4,i.effectDirection=(12&r)>>2,i.displayEffect=3&r,e},ut.prototype.flushDisplayed=function(e,t){for(var n=[],r=0;r<8;r++)t.windows[r].visible&&!t.windows[r].isEmpty()&&n.push(t.windows[r].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},ut.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},ut.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=1);return e},ut.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=0);return e},ut.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible^=1);return e},ut.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].clearText();return e},ut.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].reset();return e},ut.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penAttr;return r=n[++e],i.textTag=(240&r)>>4,i.offset=(12&r)>>2,i.penSize=3&r,r=n[++e],i.italics=(128&r)>>7,i.underline=(64&r)>>6,i.edgeType=(56&r)>>3,i.fontStyle=7&r,e},ut.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penColor;return r=n[++e],i.fgOpacity=(192&r)>>6,i.fgRed=(48&r)>>4,i.fgGreen=(12&r)>>2,i.fgBlue=3&r,r=n[++e],i.bgOpacity=(192&r)>>6,i.bgRed=(48&r)>>4,i.bgGreen=(12&r)>>2,i.bgBlue=3&r,r=n[++e],i.edgeRed=(48&r)>>4,i.edgeGreen=(12&r)>>2,i.edgeBlue=3&r,e},ut.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,r=n[++e],i.row=15&r,r=n[++e],i.column=63&r,e},ut.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var lt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ct=function(e){return null===e?"":(e=lt[e]||e,String.fromCharCode(e))},dt=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ft=function(){for(var e=[],t=15;t--;)e.push("");return e},ht=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=ft();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ft();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=ft()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(r,i))a=ct((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=ct((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var o=dt.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=ct(r),a+=ct(i),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};ht.prototype=new u,ht.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},ht.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ft(),this.nonDisplayed_=ft(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ht.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ht.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},ht.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},ht.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},ht.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},ht.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},ht.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},ht.prototype.isNormalChar=function(e){return e>=32&&e<=127},ht.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=ft(),this.displayed_=ft()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},ht.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},ht.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},ht.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},ht.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},ht.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},ht.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var pt={CaptionStream:rt,Cea608Stream:ht,Cea708Stream:ut},mt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},gt=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},vt=function e(t){var n,r;e.prototype.init.call(this),this.type_=t||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===r&&(r=e.dts),e.dts=gt(e.dts,r),e.pts=gt(e.pts,r),n=e.dts,this.trigger("data",e))},this.flush=function(){r=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){r=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};vt.prototype=new u;var yt,_t=vt,bt=gt,Tt=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},Et=function(e,t,n){return decodeURIComponent(Tt(e,t,n))},St=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},wt={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Et(e.data,1,t),e.value=Et(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Et(e.data,1,t),e.url=Et(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(Tt(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(yt=function(e){var t,n={descriptor:e&&e.descriptor},r=0,i=[],a=0;if(yt.prototype.init.call(this),this.dispatchType=mt.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,o,s,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,i.length=0),0===i.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(i.push(e),a+=e.data.byteLength,1===i.length&&(r=St(e.data.subarray(6,10)),r+=10),!(a<r)){for(t={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts},u=0;u<r;)t.data.set(i[0].data.subarray(0,r-u),u),u+=i[0].data.byteLength,a-=i[0].data.byteLength,i.shift();n=10,64&t.data[5]&&(n+=4,n+=St(t.data.subarray(10,14)),r-=St(t.data.subarray(16,20)));do{if((o=St(t.data.subarray(n+4,n+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((s={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+o+10)}).key=s.id,wt[s.id]&&(wt[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner)){var l=s.data,c=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;c*=4,c+=3&l[7],s.timeStamp=c,void 0===t.pts&&void 0===t.dts&&(t.pts=s.timeStamp,t.dts=s.timeStamp),this.trigger("timestamp",s)}t.frames.push(s),n+=10,n+=o}while(n<r);this.trigger("data",t)}}}).prototype=new u;var At,Mt,Lt,Ct=yt,Dt=_t;(At=function(){var e=new Uint8Array(188),t=0;At.prototype.init.call(this),this.push=function(n){var r,i=0,a=188;for(t?((r=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),r.set(n,t),t=0):r=n;a<r.byteLength;)71!==r[i]||71!==r[a]?(i++,a++):(this.trigger("data",r.subarray(i,a)),i+=188,a+=188);i<r.byteLength&&(e.set(r.subarray(i),0),t=r.byteLength-i)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new u,(Mt=function(){var e,t,n,r;Mt.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var i=0;r.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===r.type?t(e.subarray(i),r):n(e.subarray(i),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var a=e[i],o=(31&e[i+1])<<8|e[i+2];a===mt.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=o:a===mt.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=o:a===mt.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][o]=a),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=r.programMapTable}},this.push=function(t){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid)n.type="pat",e(t.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=mt.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=mt.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new u,Mt.STREAM_TYPES={h264:27,adts:15},(Lt=function(){var e,t=this,n=!1,r={data:[],size:0},i={data:[],size:0},a={data:[],size:0},o=function(e,n,r){var i,a,o=new Uint8Array(e.size),s={type:n},u=0,l=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,u=0;u<e.data.length;u++)a=e.data[u],o.set(a.data,l),l+=a.data.byteLength;var c,d,f,h;d=s,h=(c=o)[0]<<16|c[1]<<8|c[2],d.data=new Uint8Array,1===h&&(d.packetLength=6+(c[4]<<8|c[5]),d.dataAlignmentIndicator=0!=(4&c[6]),192&(f=c[7])&&(d.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,d.pts*=4,d.pts+=(6&c[13])>>>1,d.dts=d.pts,64&f&&(d.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,d.dts*=4,d.dts+=(6&c[18])>>>1)),d.data=c.subarray(9+c[8])),i="video"===n||s.packetLength<=e.size,(r||i)&&(e.size=0,e.data.length=0),i&&t.trigger("data",s)}};Lt.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,t;switch(s.streamType){case mt.H264_STREAM_TYPE:e=r,t="video";break;case mt.ADTS_STREAM_TYPE:e=i,t="audio";break;case mt.METADATA_STREAM_TYPE:e=a,t="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&o(e,t,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var r={type:"metadata",tracks:[]};null!==(e=s.programMapTable).video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",r)}})[s.type]()},this.reset=function(){r.size=0,r.data.length=0,i.size=0,i.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(r,"video"),o(i,"audio"),o(a,"timed-metadata")},this.flush=function(){if(!n&&e){var r={type:"metadata",tracks:[]};null!==e.video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",r)}n=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new u;var kt={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:At,TransportParseStream:Mt,ElementaryStream:Lt,TimestampRolloverStream:Dt,CaptionStream:pt.CaptionStream,Cea608Stream:pt.Cea608Stream,Cea708Stream:pt.Cea708Stream,MetadataStream:Ct};for(var Pt in mt)mt.hasOwnProperty(Pt)&&(kt[Pt]=mt[Pt]);var It,Ot=kt,Rt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],xt=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},Nt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},jt={isLikelyAacData:function(e){var t=function e(t,n){return t.length-n<10||t[n]!=="I".charCodeAt(0)||t[n+1]!=="D".charCodeAt(0)||t[n+2]!=="3".charCodeAt(0)?n:e(t,n+=xt(t,n))}(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:xt,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return Rt[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=Nt(e.subarray(10,14)));do{if((n=Nt(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var i=0;i<r.byteLength;i++)if(0===r[i]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(r,0,i))){var a=r.subarray(i+1),o=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return o*=4,o+=3&a[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null}};(It=function(){var e=new Uint8Array,t=0;It.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var r,i,a,o,s=0,u=0;for(e.length?(o=e.length,(e=new Uint8Array(n.byteLength+o)).set(e.subarray(0,o)),e.set(n,o)):e=n;e.length-u>=3;)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(255!=(255&e[u])||240!=(240&e[u+1]))u++;else{if(e.length-u<7)break;if(u+(s=jt.parseAdtsSize(e,u))>e.length)break;a={type:"audio",data:e.subarray(u,u+s),pts:t,dts:t},this.trigger("data",a),u+=s}else{if(e.length-u<10)break;if(u+(s=jt.parseId3TagSize(e,u))>e.length)break;i={type:"timed-metadata",data:e.subarray(u,u+s)},this.trigger("data",i),u+=s}r=e.length-u,e=r>0?e.subarray(u):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new u;var Ft,Ut,Bt,Yt,Ht=It,Vt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Gt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Kt=ue.H264Stream,Wt=jt.isLikelyAacData,qt=c,zt=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Xt=function(e,t,n,r,i,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(r-t),pts:e+(i-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};(Ut=function(e,t){var n,r=[],i=0,a=0,o=1/0;n=(t=t||{}).firstSequenceNumber||0,Ut.prototype.init.call(this),this.push=function(t){$e(e,t),e&&Vt.forEach((function(n){e[n]=t[n]})),r.push(t)},this.setEarliestDts=function(e){i=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var s,u,l,c,d,h,p;0!==r.length?(s=Ke(r,e,i),e.baseMediaDecodeTime=Qe(e,t.keepOriginalTimestamps),p=Ge(e,s,a,o),e.samples=We(s),l=ve.mdat(qe(s)),r=[],u=ve.moof(n,[e]),c=new Uint8Array(u.byteLength+l.byteLength),n++,c.set(u),c.set(l,u.byteLength),Xe(e),d=Math.ceil(1024*qt/e.samplerate),s.length&&(h=s.length*d,this.trigger("segmentTimingInfo",Xt(f(e.baseMediaDecodeTime,e.samplerate),s[0].dts,s[0].pts,s[0].dts+h,s[0].pts+h,p||0)),this.trigger("timingInfo",{start:s[0].pts,end:s[0].pts+h})),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Xe(e),r=[],this.trigger("reset")}}).prototype=new u,(Ft=function(e,t){var n,r,i,a=[],o=[];n=(t=t||{}).firstSequenceNumber||0,Ft.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){$e(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.config,e.sps=[t.data],Gt.forEach((function(t){e[t]=r[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var r,i,s,u,l,c,d,f,h=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(r=Oe(a),(s=Re(r))[0][0].keyFrame||((i=this.getGopForFusion_(a[0],e))?(h=i.duration,s.unshift(i),s.byteLength+=i.byteLength,s.nalCount+=i.nalCount,s.pts=i.pts,s.dts=i.dts,s.duration+=i.duration):s=xe(s)),o.length){var p;if(!(p=t.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Xe(e),s=p}$e(e,s),e.samples=Ne(s),l=ve.mdat(je(s)),e.baseMediaDecodeTime=Qe(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),d=s[0],f=s[s.length-1],this.trigger("segmentTimingInfo",Xt(e.baseMediaDecodeTime,d.dts,d.pts,f.dts+f.duration,f.pts+f.duration,h)),this.trigger("timingInfo",{start:s[0].pts,end:s[s.length-1].pts+s[s.length-1].duration}),this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),u=ve.moof(n,[e]),c=new Uint8Array(u.byteLength+l.byteLength),n++,c.set(u),c.set(l,u.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){Xe(e),r=void 0,i=void 0},this.getGopForFusion_=function(t){var n,r,i,a,o,s=1/0;for(o=0;o<this.gopCache_.length;o++)i=(a=this.gopCache_[o]).gop,e.pps&&zt(e.pps[0],a.pps[0])&&e.sps&&zt(e.sps[0],a.sps[0])&&(i.dts<e.timelineStartInfo.dts||(n=t.dts-i.dts-i.duration)>=-1e4&&n<=45e3&&(!r||s>n)&&(r=a,s=n));return r?r.gop:null},this.alignGopsAtStart_=function(e){var t,n,r,i,a,s,u,l;for(a=e.byteLength,s=e.nalCount,u=e.duration,t=n=0;t<o.length&&n<e.length&&(r=o[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,a-=i.byteLength,s-=i.nalCount,u-=i.duration);return 0===n?e:n===e.length?null:((l=e.slice(n)).byteLength=a,l.duration=u,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,n,r,i,a,s,u;for(t=o.length-1,n=e.length-1,a=null,s=!1;t>=0&&n>=0;){if(r=o[t],i=e[n],r.pts===i.pts){s=!0;break}r.pts>i.pts?t--:(t===o.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(u=s?n:a))return e;var l=e.slice(u),c=l.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){o=e}}).prototype=new u,(Yt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Yt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new u,Yt.prototype.flush=function(e){var t,n,r,i,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,Gt.forEach((function(e){o.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,Vt.forEach((function(e){o.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,r=ve.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(r.byteLength),o.initSegment.set(r),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=p(t.startPts,s,this.keepOriginalTimestamps),t.endTime=p(t.endPts,s,this.keepOriginalTimestamps),o.captionStreams[t.stream]=!0,o.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=p(n.pts,s,this.keepOriginalTimestamps),o.metadata.push(n);for(o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),i=0;i<o.captions.length;i++)t=o.captions[i],this.trigger("caption",t);for(i=0;i<o.metadata.length;i++)n=o.metadata[i],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Yt.prototype.setRemux=function(e){this.remuxTracks=e},(Bt=function(e){var t,n,r=this,i=!0;Bt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="aac",i.metadataStream=new Ot.MetadataStream,i.aacStream=new Ht,i.audioTimestampRolloverStream=new Ot.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new Ot.TimestampRolloverStream("timed-metadata"),i.adtsStream=new b,i.coalesceStream=new Yt(e,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",(function(e){i.aacStream.setTimestamp(e.timeStamp)})),i.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||i.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new Ut(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new Ot.MetadataStream,i.packetStream=new Ot.TransportPacketStream,i.parseStream=new Ot.TransportParseStream,i.elementaryStream=new Ot.ElementaryStream,i.timestampRolloverStream=new Ot.TimestampRolloverStream,i.adtsStream=new b,i.h264Stream=new Kt,i.captionStream=new Ot.CaptionStream(e),i.coalesceStream=new Yt(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",(function(a){var o;if("metadata"===a.type){for(o=a.tracks.length;o--;)t||"video"!==a.tracks[o].type?n||"audio"!==a.tracks[o].type||((n=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(t=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new Ft(t,e),i.videoSegmentStream.on("log",r.getLogTrigger_("videoSegmentStream")),i.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts-r.baseMediaDecodeTime))})),i.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),i.videoSegmentStream.on("timingInfo",r.trigger.bind(r,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),n&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new Ut(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.audioSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"audioSegmentTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",(function(e){e.dispatchType=i.metadataStream.dispatchType,r.trigger("id3Frame",e)})),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(r){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=r),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,Xe(n),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,Xe(t),i.captionStream.reset()),i.timestampRolloverStream&&i.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(i){var t=Wt(e);if(t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),this.transmuxPipeline_)for(var n=Object.keys(this.transmuxPipeline_),r=0;r<n.length;r++){var a=n[r];"headOfPipeline"!==a&&this.transmuxPipeline_[a].on&&this.transmuxPipeline_[a].on("log",this.getLogTrigger_(a))}i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new u;var Qt,$t={Transmuxer:Bt,VideoSegmentStream:Ft,AudioSegmentStream:Ut,AUDIO_PROPERTIES:Vt,VIDEO_PROPERTIES:Gt,generateSegmentTimingInfo:Xt},Jt=tt,Zt=pt.CaptionStream,en=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(n<i.size)return i;n-=i.size}return null},tn=function(e,t){var n=Ee(e,["moof","traf"]),r=Ee(e,["mdat"]),i={},a=[];return r.forEach((function(e,t){var r=n[t];a.push({mdat:e,traf:r})})),a.forEach((function(e){var n,r=e.mdat,a=e.traf,o=Ee(a,["tfhd"]),s=Se(o[0]),u=s.trackId,l=Ee(a,["tfdt"]),c=l.length>0?Le(l[0]).baseMediaDecodeTime:0,d=Ee(a,["trun"]);t===u&&d.length>0&&(n=function(e,t,n){var r,i,a,o,s=new DataView(e.buffer,e.byteOffset,e.byteLength),u={logs:[],seiNals:[]};for(i=0;i+4<e.length;i+=a)if(a=s.getUint32(i),i+=4,!(a<=0))switch(31&e[i]){case 6:var l=e.subarray(i+1,i+1+a),c=en(i,t);if(r={nalUnitType:"sei_rbsp",size:a,data:l,escapedRBSP:Jt(l),trackId:n},c)r.pts=c.pts,r.dts=c.dts,o=c;else{if(!o){u.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+i+" for trackId "+n+". See mux.js#223."});break}r.pts=o.pts,r.dts=o.dts}u.seiNals.push(r)}return u}(r,function(e,t,n){var r=t,i=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,o=n.trackId,s=[];return e.forEach((function(e){var t=Ae(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=r+e.compositionTimeOffset,r+=e.duration})),s=s.concat(t)})),s}(d,c,s),u),i[u]||(i[u]={seiNals:[],logs:[]}),i[u].seiNals=i[u].seiNals.concat(n.seiNals),i[u].logs=i[u].logs.concat(n.logs))})),i},nn={generator:ve,probe:Pe,Transmuxer:$t.Transmuxer,AudioSegmentStream:$t.AudioSegmentStream,VideoSegmentStream:$t.VideoSegmentStream,CaptionParser:function(){var e,t,n,r,i,a,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new Zt,o=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/r,e.endTime=e.endPts/r,i.captions.push(e),i.captionStreams[e.stream]=!0})),e.on("log",(function(e){i.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&r===t[n])},this.parse=function(e,a,o){var s;if(!this.isInitialized())return null;if(!a||!o)return null;if(this.isNewInit(a,o))n=a[0],r=o[n];else if(null===n||!r)return t.push(e),null;for(;t.length>0;){var u=t.shift();this.parse(u,a,o)}return(s=function(e,t,n){if(null===t)return null;var r=tn(e,t)[t]||{};return{seiNals:r.seiNals,logs:r.logs,timescale:n}}(e,n,r))&&s.logs&&(i.logs=i.logs.concat(s.logs)),null!==s&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),i):i.logs.length?{logs:i.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={},i.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,r=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()}};(Qt=function(e,t){var n,r=0,i=16384,a=function(e,t){var n,r=e.position+t;r<e.bytes.byteLength||((n=new Uint8Array(2*r)).set(e.bytes.subarray(0,e.position),0),e.bytes=n,e.view=new DataView(e.bytes.buffer))},o=Qt.widthBytes||new Uint8Array("width".length),s=Qt.heightBytes||new Uint8Array("height".length),u=Qt.videocodecidBytes||new Uint8Array("videocodecid".length);if(!Qt.widthBytes){for(n=0;n<"width".length;n++)o[n]="width".charCodeAt(n);for(n=0;n<"height".length;n++)s[n]="height".charCodeAt(n);for(n=0;n<"videocodecid".length;n++)u[n]="videocodecid".charCodeAt(n);Qt.widthBytes=o,Qt.heightBytes=s,Qt.videocodecidBytes=u}switch(this.keyFrame=!1,e){case Qt.VIDEO_TAG:this.length=16,i*=6;break;case Qt.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case Qt.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(i),this.view=new DataView(this.bytes.buffer),this.bytes[0]=e,this.position=this.length,this.keyFrame=t,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var r,i=t||0;r=i+(n=n||e.byteLength),a(this,n),this.bytes.set(e.subarray(i,r),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){a(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){a(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return 0===r?0:this.length-(r+4)},this.startNalUnit=function(){if(r>0)throw new Error("Attempted to create new NAL wihout closing the old one");r=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===r+4?this.length-=4:r>0&&(t=r+4,n=this.length-t,this.position=r,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),r=0},this.writeMetaDataDouble=function(e,t){var n;if(a(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(o,this.position),this.position+=5;else if("height"===e)this.bytes.set(s,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(u,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++r},this.writeMetaDataBoolean=function(e,t){var n;for(a(this,2),this.view.setUint16(this.position,e.length),this.position+=2,n=0;n<e.length;n++)a(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++r},this.finalize=function(){var e,n;switch(this.bytes[0]){case Qt.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||t?16:32),this.bytes[12]=t?0:1,e=this.pts-this.dts,this.bytes[13]=(16711680&e)>>>16,this.bytes[14]=(65280&e)>>>8,this.bytes[15]=(255&e)>>>0;break;case Qt.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=t?0:1;break;case Qt.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,r),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return n=this.length-11,this.bytes[1]=(16711680&n)>>>16,this.bytes[2]=(65280&n)>>>8,this.bytes[3]=(255&n)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=Qt.frameTime(this.bytes),this}}).AUDIO_TAG=8,Qt.VIDEO_TAG=9,Qt.METADATA_TAG=18,Qt.isAudioFrame=function(e){return Qt.AUDIO_TAG===e[0]},Qt.isVideoFrame=function(e){return Qt.VIDEO_TAG===e[0]},Qt.isMetaData=function(e){return Qt.METADATA_TAG===e[0]},Qt.isKeyFrame=function(e){return Qt.isVideoFrame(e)?23===e[11]:!!Qt.isAudioFrame(e)||!!Qt.isMetaData(e)},Qt.frameTime=function(e){var t=e[4]<<16;return t|=e[5]<<8,t|=e[6]<<0,t|=e[7]<<24};var rn=Qt,an=function e(t){this.numberOfTracks=0,this.metadataStream=t.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,e.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}};(an.prototype=new u).flush=function(e){var t,n,r,i,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?i=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(i=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,r=0;r<this.pendingCaptions.length;r++)(n=this.pendingCaptions[r]).startTime=n.startPts-i,n.startTime/=9e4,n.endTime=n.endPts-i,n.endTime/=9e4,a.captionStreams[n.stream]=!0,a.captions.push(n);for(r=0;r<this.pendingMetadata.length;r++)(t=this.pendingMetadata[r]).cueTime=t.pts-i,t.cueTime/=9e4,a.metadata.push(t);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}};var on,sn,un,ln,cn,dn,fn=an,hn=function(){var e=this;this.list=[],this.push=function(e){this.list.push({bytes:e.bytes,dts:e.dts,pts:e.pts,keyFrame:e.keyFrame,metaDataTag:e.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return e.list.length}})},pn=ue.H264Stream;ln=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts?e.timelineStartInfo.pts=t.pts:e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts?e.timelineStartInfo.dts=t.dts:e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts))},cn=function(e,t){var n=new rn(rn.METADATA_TAG);return n.dts=t,n.pts=t,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",e.width),n.writeMetaDataDouble("height",e.height),n},dn=function(e,t){var n,r=new rn(rn.VIDEO_TAG,!0);for(r.dts=t,r.pts=t,r.writeByte(1),r.writeByte(e.profileIdc),r.writeByte(e.profileCompatibility),r.writeByte(e.levelIdc),r.writeByte(255),r.writeByte(225),r.writeShort(e.sps[0].length),r.writeBytes(e.sps[0]),r.writeByte(e.pps.length),n=0;n<e.pps.length;++n)r.writeShort(e.pps[n].length),r.writeBytes(e.pps[n]);return r},(un=function(e){var t,n=[],r=[];un.prototype.init.call(this),this.push=function(t){ln(e,t),e&&(e.audioobjecttype=t.audioobjecttype,e.channelcount=t.channelcount,e.samplerate=t.samplerate,e.samplingfrequencyindex=t.samplingfrequencyindex,e.samplesize=t.samplesize,e.extraData=e.audioobjecttype<<11|e.samplingfrequencyindex<<7|e.channelcount<<3),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),n.push(t)},this.flush=function(){var i,a,o,s=new hn;if(0!==n.length){for(o=-1/0;n.length;)i=n.shift(),r.length&&i.pts>=r[0]&&(o=r.shift(),this.writeMetaDataTags(s,o)),(e.extraData!==t||i.pts-o>=1e3)&&(this.writeMetaDataTags(s,i.pts),t=e.extraData,o=i.pts),(a=new rn(rn.AUDIO_TAG)).pts=i.pts,a.dts=i.dts,a.writeBytes(i.data),s.push(a.finalize());r.length=0,t=null,this.trigger("data",{track:e,tags:s.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(t,n){var r;(r=new rn(rn.METADATA_TAG)).pts=n,r.dts=n,r.writeMetaDataDouble("audiocodecid",10),r.writeMetaDataBoolean("stereo",2===e.channelcount),r.writeMetaDataDouble("audiosamplerate",e.samplerate),r.writeMetaDataDouble("audiosamplesize",16),t.push(r.finalize()),(r=new rn(rn.AUDIO_TAG,!0)).pts=n,r.dts=n,r.view.setUint16(r.position,e.extraData),r.position+=2,r.length=Math.max(r.length,r.position),t.push(r.finalize())},this.onVideoKeyFrame=function(e){r.push(e)}}).prototype=new u,(sn=function(e){var t,n,r=[];sn.prototype.init.call(this),this.finishFrame=function(r,i){if(i){if(t&&e&&e.newMetadata&&(i.keyFrame||0===r.length)){var a=cn(t,i.dts).finalize(),o=dn(e,i.dts).finalize();a.metaDataTag=o.metaDataTag=!0,r.push(a),r.push(o),e.newMetadata=!1,this.trigger("keyframe",i.dts)}i.endNalUnit(),r.push(i.finalize()),n=null}},this.push=function(t){ln(e,t),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),r.push(t)},this.flush=function(){for(var i,a=new hn;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0!==r.length){for(;r.length;)"seq_parameter_set_rbsp"===(i=r.shift()).nalUnitType?(e.newMetadata=!0,t=i.config,e.width=t.width,e.height=t.height,e.sps=[i.data],e.profileIdc=t.profileIdc,e.levelIdc=t.levelIdc,e.profileCompatibility=t.profileCompatibility,n.endNalUnit()):"pic_parameter_set_rbsp"===i.nalUnitType?(e.newMetadata=!0,e.pps=[i.data],n.endNalUnit()):"access_unit_delimiter_rbsp"===i.nalUnitType?(n&&this.finishFrame(a,n),(n=new rn(rn.VIDEO_TAG)).pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.endNalUnit()),n.startNalUnit(),n.writeBytes(i.data);n&&this.finishFrame(a,n),this.trigger("data",{track:e,tags:a.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new u,(on=function(e){var t,n,r,i,a,o,s,u,l,c,d,f,h=this;on.prototype.init.call(this),e=e||{},this.metadataStream=new Ot.MetadataStream,e.metadataStream=this.metadataStream,t=new Ot.TransportPacketStream,n=new Ot.TransportParseStream,r=new Ot.ElementaryStream,i=new Ot.TimestampRolloverStream("video"),a=new Ot.TimestampRolloverStream("audio"),o=new Ot.TimestampRolloverStream("timed-metadata"),s=new b,u=new pn,f=new fn(e),t.pipe(n).pipe(r),r.pipe(i).pipe(u),r.pipe(a).pipe(s),r.pipe(o).pipe(this.metadataStream).pipe(f),d=new Ot.CaptionStream(e),u.pipe(d).pipe(f),r.on("data",(function(e){var t,n,r;if("metadata"===e.type){for(t=e.tracks.length;t--;)"video"===e.tracks[t].type?n=e.tracks[t]:"audio"===e.tracks[t].type&&(r=e.tracks[t]);n&&!l&&(f.numberOfTracks++,l=new sn(n),u.pipe(l).pipe(f)),r&&!c&&(f.numberOfTracks++,c=new un(r),s.pipe(c).pipe(f),l&&l.on("keyframe",c.onVideoKeyFrame))}})),this.push=function(e){t.push(e)},this.flush=function(){t.flush()},this.resetCaptions=function(){d.reset()},f.on("data",(function(e){h.trigger("data",e)})),f.on("done",(function(){h.trigger("done")}))}).prototype=new u;var mn={tag:rn,Transmuxer:on,getFlvHeader:function(e,t,n){var r,i,a,o=new Uint8Array(9),s=new DataView(o.buffer);return e=e||0,t=void 0===t||t,n=void 0===n||n,s.setUint8(0,70),s.setUint8(1,76),s.setUint8(2,86),s.setUint8(3,1),s.setUint8(4,(t?4:0)|(n?1:0)),s.setUint32(5,o.byteLength),e<=0?((i=new Uint8Array(o.byteLength+4)).set(o),i.set([0,0,0,0],o.byteLength),i):((r=new rn(rn.METADATA_TAG)).pts=r.dts=0,r.writeMetaDataDouble("duration",e),a=r.finalize().length,(i=new Uint8Array(o.byteLength+a)).set(o),i.set(s.byteLength,a),i)}},gn=Ot,vn=c,yn=function e(t,n){var r=[],i=0,a=0,o=0,s=1/0,u=null,l=null;n=n||{},e.prototype.init.call(this),this.push=function(e){$e(t,e),t&&Vt.forEach((function(n){t[n]=e[n]})),r.push(e)},this.setEarliestDts=function(e){a=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){o=e},this.processFrames_=function(){var e,c,d,f,h;0!==r.length&&0!==(e=Ke(r,t,a)).length&&(t.baseMediaDecodeTime=Qe(t,n.keepOriginalTimestamps),Ge(t,e,o,s),t.samples=We(e),d=ve.mdat(qe(e)),r=[],c=ve.moof(i,[t]),i++,t.initSegment=ve.initSegment([t]),(f=new Uint8Array(c.byteLength+d.byteLength)).set(c),f.set(d,c.byteLength),Xe(t),null===u&&(l=u=e[0].pts),l+=e.length*(1024*vn/t.samplerate),h={start:u},this.trigger("timingInfo",h),this.trigger("data",{track:t,boxes:f}))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:u,end:l}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){Xe(t),u=null,l=null},this.reset=function(){this.resetTiming_(),r=[],this.trigger("reset")}};yn.prototype=new u;var _n=yn,bn=function e(t,n){var r,i,a,o=0,s=[],u=[],l=null,c=null,d=!0;n=n||{},e.prototype.init.call(this),this.push=function(e){$e(t,e),void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),"seq_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.config,t.sps=[e.data],Gt.forEach((function(e){t[e]=r[e]}),this)),"pic_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.data,t.pps=[e.data]),s.push(e)},this.processNals_=function(e){var r;for(s=u.concat(s);s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0!==s.length){var i=Oe(s);if(i.length)if(u=i[i.length-1],e&&(i.pop(),i.duration-=u.duration,i.nalCount-=u.length,i.byteLength-=u.byteLength),i.length){if(this.trigger("timelineStartInfo",t.timelineStartInfo),d){if(!(a=Re(i))[0][0].keyFrame){if(!(a=xe(a))[0][0].keyFrame)return s=[].concat.apply([],i).concat(u),void(u=[]);(i=[].concat.apply([],a)).duration=a.duration}d=!1}for(null===l&&(l=i[0].pts,c=l),c+=i.duration,this.trigger("timingInfo",{start:l,end:c}),r=0;r<i.length;r++){var f=i[r];t.samples=Fe(f);var h=ve.mdat(Ue(f));Xe(t),$e(t,f),t.baseMediaDecodeTime=Qe(t,n.keepOriginalTimestamps);var p=ve.moof(o,[t]);o++,t.initSegment=ve.initSegment([t]);var m=new Uint8Array(p.byteLength+h.byteLength);m.set(p),m.set(h,p.byteLength),this.trigger("data",{track:t,boxes:m,sequence:o,videoFrameDts:f.dts,videoFramePts:f.pts})}s=[]}else s=[]}},this.resetTimingAndConfig_=function(){r=void 0,i=void 0,l=null,c=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),u=[],s=[],d=!0,this.trigger("reset")}};bn.prototype=new u;var Tn=bn,En=jt.isLikelyAacData,Sn=function(e){return e.prototype=new u,e.prototype.init.call(e),e},wn=function(e,t){e.on("data",t.trigger.bind(t,"data")),e.on("done",t.trigger.bind(t,"done")),e.on("partialdone",t.trigger.bind(t,"partialdone")),e.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),e.on("audioTimingInfo",t.trigger.bind(t,"audioTimingInfo")),e.on("videoTimingInfo",t.trigger.bind(t,"videoTimingInfo")),e.on("trackinfo",t.trigger.bind(t,"trackinfo")),e.on("id3Frame",(function(n){n.dispatchType=e.metadataStream.dispatchType,n.cueTime=d(n.pts),t.trigger("id3Frame",n)})),e.on("caption",(function(e){t.trigger("caption",e)}))},An=function e(t){var n=null,r=!0;t=t||{},e.prototype.init.call(this),t.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.push=function(e){if(r){var i=En(e);!i||n&&"aac"===n.type?i||n&&"ts"===n.type||(n=function(e){var t={type:"ts",tracks:{audio:null,video:null},packet:new Ot.TransportPacketStream,parse:new Ot.TransportParseStream,elementary:new Ot.ElementaryStream,timestampRollover:new Ot.TimestampRolloverStream,adts:new le.Adts,h264:new le.h264.H264Stream,captionStream:new Ot.CaptionStream(e),metadataStream:new Ot.MetadataStream};return t.headOfPipeline=t.packet,t.packet.pipe(t.parse).pipe(t.elementary).pipe(t.timestampRollover),t.timestampRollover.pipe(t.h264),t.h264.pipe(t.captionStream),t.timestampRollover.pipe(t.metadataStream),t.timestampRollover.pipe(t.adts),t.elementary.on("data",(function(n){if("metadata"===n.type){for(var r=0;r<n.tracks.length;r++)t.tracks[n.tracks[r].type]||(t.tracks[n.tracks[r].type]=n.tracks[r],t.tracks[n.tracks[r].type].timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime);t.tracks.video&&!t.videoSegmentStream&&(t.videoSegmentStream=new Tn(t.tracks.video,e),t.videoSegmentStream.on("timelineStartInfo",(function(n){t.tracks.audio&&!e.keepOriginalTimestamps&&t.audioSegmentStream.setEarliestDts(n.dts-e.baseMediaDecodeTime)})),t.videoSegmentStream.on("timingInfo",t.trigger.bind(t,"videoTimingInfo")),t.videoSegmentStream.on("data",(function(e){t.trigger("data",{type:"video",data:e})})),t.videoSegmentStream.on("done",t.trigger.bind(t,"done")),t.videoSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.videoSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.h264.pipe(t.videoSegmentStream)),t.tracks.audio&&!t.audioSegmentStream&&(t.audioSegmentStream=new _n(t.tracks.audio,e),t.audioSegmentStream.on("data",(function(e){t.trigger("data",{type:"audio",data:e})})),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adts.pipe(t.audioSegmentStream)),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video})}})),t.captionStream.on("data",(function(n){var r;r=t.tracks.video&&t.tracks.video.timelineStartInfo.pts||0,n.startTime=p(n.startPts,r,e.keepOriginalTimestamps),n.endTime=p(n.endPts,r,e.keepOriginalTimestamps),t.trigger("caption",n)})),(t=Sn(t)).metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t}(t),wn(n,this)):(n=function(e){var t={type:"aac",tracks:{audio:null},metadataStream:new Ot.MetadataStream,aacStream:new Ht,audioRollover:new Ot.TimestampRolloverStream("audio"),timedMetadataRollover:new Ot.TimestampRolloverStream("timed-metadata"),adtsStream:new b(!0)};return t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioRollover).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataRollover).pipe(t.metadataStream),t.metadataStream.on("timestamp",(function(e){t.aacStream.setTimestamp(e.timeStamp)})),t.aacStream.on("data",(function(n){"timed-metadata"!==n.type&&"audio"!==n.type||t.audioSegmentStream||(t.tracks.audio=t.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:e.baseMediaDecodeTime},codec:"adts",type:"audio"},t.audioSegmentStream=new _n(t.tracks.audio,e),t.audioSegmentStream.on("data",(function(e){t.trigger("data",{type:"audio",data:e})})),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video}))})),(t=Sn(t)).metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t}(t),wn(n,this)),r=!1}n.headOfPipeline.push(e)},this.flush=function(){n&&(r=!0,n.headOfPipeline.flush())},this.partialFlush=function(){n&&n.headOfPipeline.partialFlush()},this.endTimeline=function(){n&&n.headOfPipeline.endTimeline()},this.reset=function(){n&&n.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(e){t.keepOriginalTimestamps||(t.baseMediaDecodeTime=e),n&&(n.tracks.audio&&(n.tracks.audio.timelineStartInfo.dts=void 0,n.tracks.audio.timelineStartInfo.pts=void 0,Xe(n.tracks.audio),n.audioRollover&&n.audioRollover.discontinuity()),n.tracks.video&&(n.videoSegmentStream&&(n.videoSegmentStream.gopCache_=[]),n.tracks.video.timelineStartInfo.dts=void 0,n.tracks.video.timelineStartInfo.pts=void 0,Xe(n.tracks.video)),n.timestampRollover&&n.timestampRollover.discontinuity())},this.setRemux=function(e){t.remux=e,n&&n.coalesceStream&&n.coalesceStream.setRemux(e)},this.setAudioAppendStart=function(e){n&&n.tracks.audio&&n.audioSegmentStream&&n.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){}};An.prototype=new u;var Mn,Ln,Cn={Transmuxer:An},Dn=Math.pow(2,32),kn=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;0===n.version?(n.earliestPresentationTime=t.getUint32(r),n.firstOffset=t.getUint32(r+4),r+=8):(n.earliestPresentationTime=t.getUint32(r)*Dn+t.getUint32(r+4),n.firstOffset=t.getUint32(r+8)*Dn+t.getUint32(r+12),r+=16),r+=2;var i=t.getUint16(r);for(r+=2;i>0;r+=12,i--)n.references.push({referenceType:(128&e[r])>>>7,referencedSize:2147483647&t.getUint32(r),subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(128&e[r+8]),sapType:(112&e[r+8])>>>4,sapDeltaTime:268435455&t.getUint32(r+8)});return n},Pn=Math.pow(2,32),In=function(e){return new Date(1e3*e-20828448e5)},On=function(e){var t,n,r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=[];for(t=0;t+4<e.length;t+=n)if(n=r.getUint32(t),t+=4,n<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+e[t]&31)}return i},Rn={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:Mn(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,r,i,a=new DataView(e.buffer,e.byteOffset,e.byteLength),o={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},s=31&e[5];for(r=6,i=0;i<s;i++)n=a.getUint16(r),r+=2,o.sps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;for(t=e[r],r++,i=0;i<t;i++)n=a.getUint16(r),r+=2,o.pps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;return o},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},edts:function(e){return{boxes:Mn(e)}},elst:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),edits:[]},i=n.getUint32(4);for(t=8;i;i--)0===r.version?(r.edits.push({segmentDuration:n.getUint32(t),mediaTime:n.getInt32(t+4),mediaRate:n.getUint16(t+8)+n.getUint16(t+10)/65536}),t+=12):(r.edits.push({segmentDuration:n.getUint32(t)*Pn+n.getUint32(t+4),mediaTime:n.getUint32(t+8)*Pn+n.getUint32(t+12),mediaRate:n.getUint16(t+16)+n.getUint16(t+18)/65536}),t+=20);return r},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:be(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},r=8;r<e.byteLength;)n.compatibleBrands.push(be(e.subarray(r,r+4))),r+=4;return n},dinf:function(e){return{boxes:Mn(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:Mn(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:be(e.subarray(8,12)),name:""},n=8;for(n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:On(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===i.version?(r+=4,i.creationTime=In(n.getUint32(r)),r+=8,i.modificationTime=In(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=8,i.duration=n.getUint32(r)):(i.creationTime=In(n.getUint32(r)),r+=4,i.modificationTime=In(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=4,i.duration=n.getUint32(r)),r+=4,t=n.getUint16(r),i.language+=String.fromCharCode(96+(t>>10)),i.language+=String.fromCharCode(96+((992&t)>>5)),i.language+=String.fromCharCode(96+(31&t)),i},mdia:function(e){return{boxes:Mn(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:Mn(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(n.streamDescriptor=Mn(e.subarray(28))[0]),n},moof:function(e){return{boxes:Mn(e)}},moov:function(e){return{boxes:Mn(e)}},mvex:function(e){return{boxes:Mn(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=In(t.getUint32(n)),n+=8,r.modificationTime=In(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=8,r.duration=t.getUint32(n)):(r.creationTime=In(t.getUint32(n)),n+=4,r.modificationTime=In(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=4,r.duration=t.getUint32(n)),n+=4,r.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,r.nextTrackId=t.getUint32(n),r},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:kn,smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:Mn(e)}},ctts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),compositionOffsets:[]},i=n.getUint32(4);for(t=8;i;t+=8,i--)r.compositionOffsets.push({sampleCount:n.getUint32(t),sampleOffset:n[0===r.version?"getUint32":"getInt32"](t+4)});return r},stss:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),syncSamples:[]},i=n.getUint32(4);for(t=8;i;t+=4,i--)r.syncSamples.push(n.getUint32(t));return r},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},i=n.getUint32(4);for(t=8;i;t+=4,i--)r.chunkOffsets.push(n.getUint32(t));return r},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=n.getUint32(4),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;r;t+=12,r--)i.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return i},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:Mn(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)r.entries.push(n.getUint32(t));return r},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},i=n.getUint32(4);for(t=8;i;t+=8,i--)r.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return r},styp:function(e){return Rn.ftyp(e)},tfdt:Le,tfhd:Se,tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=In(t.getUint32(n)),n+=8,r.modificationTime=In(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=8,r.duration=t.getUint32(n)):(r.creationTime=In(t.getUint32(n)),n+=4,r.modificationTime=In(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=4,r.duration=t.getUint32(n)),n+=4,n+=8,r.layer=t.getUint16(n),n+=2,r.alternateGroup=t.getUint16(n),n+=2,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,r.width=t.getUint16(n)+t.getUint16(n+2)/65536,n+=4,r.height=t.getUint16(n)+t.getUint16(n+2)/65536,r},traf:function(e){return{boxes:Mn(e)}},trak:function(e){return{boxes:Mn(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:Ae,"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},xn={inspect:Mn=function(e){for(var t,n,r,i,a,o=0,s=[],u=new ArrayBuffer(e.length),l=new Uint8Array(u),c=0;c<e.length;++c)l[c]=e[c];for(t=new DataView(u);o<e.byteLength;)n=t.getUint32(o),r=be(e.subarray(o+4,o+8)),i=n>1?o+n:e.byteLength,(a=(Rn[r]||function(e){return{data:e}})(e.subarray(o+8,i))).size=n,a.type=r,s.push(a),o=i;return s},textify:Ln=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map((function(e,r){return n+e.type+"\n"+Object.keys(e).filter((function(e){return"type"!==e&&"boxes"!==e})).map((function(t){var r=n+"  "+t+": ",i=e[t];if(i instanceof Uint8Array||i instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map((function(e){return" "+("00"+e.toString(16)).slice(-2)})).join("").match(/.{1,24}/g);return a?1===a.length?r+"<"+a.join("").slice(1)+">":r+"<\n"+a.map((function(e){return n+"  "+e})).join("\n")+"\n"+n+"  >":r+"<>"}return r+JSON.stringify(i,null,2).split("\n").map((function(e,t){return 0===t?e:n+"  "+e})).join("\n")})).join("\n")+(e.boxes?"\n"+Ln(e.boxes,t+1):"")})).join("\n")},parseType:be,findBox:Ee,parseTraf:Rn.traf,parseTfdt:Rn.tfdt,parseHdlr:Rn.hdlr,parseTfhd:Rn.tfhd,parseTrun:Rn.trun,parseSidx:Rn.sidx},Nn={8:"audio",9:"video",18:"metadata"},jn=function(e){for(var t,n=[];e.byteLength>0;)t=0,n.push("0x"+("00"+e[t++].toString(16)).slice(-2).toUpperCase()),e=e.subarray(1);return n.join(" ")},Fn=function(e,t){var n=e[0]&parseInt("00001111",2);return(t=t||{}).frameType=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"][(e[0]&parseInt("11110000",2))>>>4],t.codecID=n,7===n?function(e,t){var n=e[1]&parseInt("01111111",2)<<16|e[2]<<8|e[3];return(t=t||{}).avcPacketType=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"][e[0]],t.CompositionTime=e[1]&parseInt("10000000",2)?-n:n,1===e[0]?t.nalUnitTypeRaw=jn(e.subarray(4,100)):t.data=jn(e.subarray(4)),t}(e.subarray(1),t):t},Un=function(e,t){var n=(e[0]&parseInt("11110000",2))>>>4;return(t=t||{}).soundFormat=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"][n],t.soundRate=["5.5-kHz","11-kHz","22-kHz","44-kHz"][(e[0]&parseInt("00001100",2))>>>2],t.soundSize=(e[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",t.soundType=e[0]&parseInt("00000001",2)?"Stereo":"Mono",10===n?function(e,t){return(t=t||{}).aacPacketType=["AAC Sequence Header","AAC Raw"][e[0]],t.data=jn(e.subarray(1)),t}(e.subarray(1),t):t},Bn=function(e){var t=function(e){return{tagType:Nn[e[0]],dataSize:e[1]<<16|e[2]<<8|e[3],timestamp:e[7]<<24|e[4]<<16|e[5]<<8|e[6],streamID:e[8]<<16|e[9]<<8|e[10]}}(e);switch(e[0]){case 8:Un(e.subarray(11),t);break;case 9:Fn(e.subarray(11),t)}return t},Yn={inspectTag:Bn,inspect:function(e){var t,n,r=9,i=[];for(r+=4;r<e.byteLength;)t=e[r+1]<<16,t|=e[r+2]<<8,t|=e[r+3],t+=11,n=e.subarray(r,r+t),i.push(Bn(n)),r+=t+4;return i},textify:function(e){return JSON.stringify(e,null,2)}},Hn=function(e){var t=31&e[1];return t<<=8,t|=e[2]},Vn=function(e){return!!(64&e[1])},Gn=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Kn=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Wn={parseType:function(e,t){var n=Hn(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Vn(e),n=4+Gn(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Vn(e),r=4+Gn(e);if(n&&(r+=e[r]+1),1&e[r+5]){var i;i=3+((15&e[r+1])<<8|e[r+2])-4;for(var a=12+((15&e[r+10])<<8|e[r+11]);a<i;){var o=r+a;t[(31&e[o+1])<<8|e[o+2]]=e[o],a+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:Vn,parsePesType:function(e,t){switch(t[Hn(e)]){case mt.H264_STREAM_TYPE:return"video";case mt.ADTS_STREAM_TYPE:return"audio";case mt.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Vn(e))return null;var t=4+Gn(e);if(t>=e.byteLength)return null;var n,r=null;return 192&(n=e[t+7])&&((r={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},videoPacketContainsKeyFrame:function(e){for(var t=4+Gn(e),n=e.subarray(t),r=0,i=0,a=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===Kn(31&n[i+3])&&(a=!0);do{r++}while(1!==n[r]&&r<n.length);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Kn(31&n[i+3])&&(a=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Kn(31&n[i+3])&&(a=!0),a}},qn=bt,zn={};zn.ts=Wn,zn.aac=jt;var Xn=c,Qn=function(e,t,n){for(var r,i,a,o,s=0,u=188,l=!1;u<=e.byteLength;)if(71!==e[s]||71!==e[u]&&u!==e.byteLength)s++,u++;else{switch(r=e.subarray(s,u),zn.ts.parseType(r,t.pid)){case"pes":i=zn.ts.parsePesType(r,t.table),a=zn.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(o=zn.ts.parsePesTime(r))&&(o.type="audio",n.audio.push(o),l=!0)}if(l)break;s+=188,u+=188}for(s=(u=e.byteLength)-188,l=!1;s>=0;)if(71!==e[s]||71!==e[u]&&u!==e.byteLength)s--,u--;else{switch(r=e.subarray(s,u),zn.ts.parseType(r,t.pid)){case"pes":i=zn.ts.parsePesType(r,t.table),a=zn.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(o=zn.ts.parsePesTime(r))&&(o.type="audio",n.audio.push(o),l=!0)}if(l)break;s-=188,u-=188}},$n=function(e,t,n){for(var r,i,a,o,s,u,l,c=0,d=188,f=!1,h={data:[],size:0};d<e.byteLength;)if(71!==e[c]||71!==e[d])c++,d++;else{switch(r=e.subarray(c,d),zn.ts.parseType(r,t.pid)){case"pes":if(i=zn.ts.parsePesType(r,t.table),a=zn.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(a&&!f&&(o=zn.ts.parsePesTime(r))&&(o.type="video",n.video.push(o),f=!0),!n.firstKeyFrame)){if(a&&0!==h.size){for(s=new Uint8Array(h.size),u=0;h.data.length;)l=h.data.shift(),s.set(l,u),u+=l.byteLength;if(zn.ts.videoPacketContainsKeyFrame(s)){var p=zn.ts.parsePesTime(s);p?(n.firstKeyFrame=p,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}h.size=0}h.data.push(r),h.size+=r.byteLength}}if(f&&n.firstKeyFrame)break;c+=188,d+=188}for(c=(d=e.byteLength)-188,f=!1;c>=0;)if(71!==e[c]||71!==e[d])c--,d--;else{switch(r=e.subarray(c,d),zn.ts.parseType(r,t.pid)){case"pes":i=zn.ts.parsePesType(r,t.table),a=zn.ts.parsePayloadUnitStartIndicator(r),"video"===i&&a&&(o=zn.ts.parsePesTime(r))&&(o.type="video",n.video.push(o),f=!0)}if(f)break;c-=188,d-=188}},Jn=function(e){var t={pid:null,table:null},n={};for(var r in function(e,t){for(var n,r=0,i=188;i<e.byteLength;)if(71!==e[r]||71!==e[i])r++,i++;else{switch(n=e.subarray(r,i),zn.ts.parseType(n,t.pid)){case"pat":t.pid=zn.ts.parsePat(n);break;case"pmt":var a=zn.ts.parsePmt(n);t.table=t.table||{},Object.keys(a).forEach((function(e){t.table[e]=a[e]}))}r+=188,i+=188}}(e,t),t.table)if(t.table.hasOwnProperty(r))switch(t.table[r]){case mt.H264_STREAM_TYPE:n.video=[],$n(e,t,n),0===n.video.length&&delete n.video;break;case mt.ADTS_STREAM_TYPE:n.audio=[],Qn(e,t,n),0===n.audio.length&&delete n.audio}return n},Zn={inspect:function(e,t){var n;return(n=zn.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,r=0,i=null,a=null,o=0,s=0;e.length-s>=3;){switch(zn.aac.parseType(e,s)){case"timed-metadata":if(e.length-s<10){n=!0;break}if((o=zn.aac.parseId3TagSize(e,s))>e.length){n=!0;break}null===a&&(t=e.subarray(s,s+o),a=zn.aac.parseAacTimestamp(t)),s+=o;break;case"audio":if(e.length-s<7){n=!0;break}if((o=zn.aac.parseAdtsSize(e,s))>e.length){n=!0;break}null===i&&(t=e.subarray(s,s+o),i=zn.aac.parseSampleRate(t)),r++,s+=o;break;default:s++}if(n)return null}if(null===i||null===a)return null;var u=Xn/i;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*r*u,pts:a+1024*r*u}]}}(e):Jn(e))&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;(void 0===n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=qn(e.dts,n),e.pts=qn(e.pts,n),e.dtsTime=e.dts/Xn,e.ptsTime=e.pts/Xn}))}if(e.video&&e.video.length){var r=t;if((void 0===r||isNaN(r))&&(r=e.video[0].dts),e.video.forEach((function(e){e.dts=qn(e.dts,r),e.pts=qn(e.pts,r),e.dtsTime=e.dts/Xn,e.ptsTime=e.pts/Xn})),e.firstKeyFrame){var i=e.firstKeyFrame;i.dts=qn(i.dts,r),i.pts=qn(i.pts,r),i.dtsTime=i.dts/Xn,i.ptsTime=i.pts/Xn}}}(n,t),n):null},parseAudioPes_:Qn},er={codecs:le,mp4:nn,flv:mn,mp2t:gn,partial:Cn};return er.mp4.tools=xn,er.flv.tools=Yn,er.mp2t.tools=Zn,er}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(669),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TizenHandler=void 0;var r=n(0),i=r.__importDefault(n(9)),a=r.__importDefault(n(93)),o=n(12),s=n(15),u=n(40),l=n(8),c=n(16),d=n(10),f=n(137),h=n(670),p=n(72),m=n(196),g=new c.LoggerFileNameDecorator("TizenHandler"),v=function(e){function t(t,n,r){var u=e.call(this,t,n,r)||this;u._type=l.HandlerTypes.TIZEN,u._audioTracks=[],u._hasEnded=!1,u._hasPlayed=!1,u._isBuffering=!1,u._isWaiting=!1,u._textTracks=[],u._throttleSeek=(0,d.throttleAsync)({operationCancelledMessage:"The seekTo() request was interrupted by a new seek request."}),u.attachListeners=function(){window.addEventListener("beforeunload",u.destroy),u._engine.onBufferingComplete.subscribe(u.handleBufferingComplete),u._engine.onBufferingProgress.subscribe(u.handleBufferingProgress),u._engine.onBufferingStart.subscribe(u.handleBufferingStart),u._engine.onCurrentPlayTime.subscribe(u.handleCurrentPlayTime),u._engine.onDurationChange.subscribe(u.handleDurationChange),u._engine.onError.subscribe(u.handleError),u._engine.onEvent.subscribe(u.handleEvent),u._engine.onStreamCompleted.subscribe(u.handleStreamCompleted),u.tvaudiocontrol.setVolumeChangeListener(u.handleVolumeChange)},u.configurePlayReady=function(e){var t={DeleteLicenseAfterUse:!0,CustomData:e.customData,HttpHeader:function(){var t=e.headers;if(t){var n="function"==typeof t?t():t;return Object.keys(n).map((function(e){return"".concat(e,":").concat(n[e])})).join("\n")}}(),LicenseServer:e.licenseServerUrl};g.debug("Configuring PlayReady with:",t),u._engine.setDrm(p.AVPlayDrmType.PLAYREADY,p.AVPlayDrmOperation.SET_PROPERTIES,JSON.stringify(t))},u.createEl=function(e){var t=document.createElement("object");return t.setAttribute("class","tizen-player"),t.setAttribute("type","application/avplayer"),e.prepend(t),t},u.handleBufferingComplete=function(){u.handleBufferingProgress({progress:100}),u._isBuffering=!1,u._isWaiting=!1,u._loadedDataSource.next({}),u._canPlaySource.next({}),u._canPlayThroughSource.next({}),u.getIsPaused()||u._playingSource.next({})},u.handleBufferingProgress=function(e){u._isWaiting||u.getIsPaused()||(u._isWaiting=!0,u._waitingSource.next({})),u._progressSource.next({bufferedRanges:u.getBufferedRanges()})},u.handleBufferingStart=function(){u._isBuffering=!0,u.handleBufferingProgress({progress:0})},u.handleCurrentPlayTime=function(){u._hasEnded=!1,u._timeUpdateSource.next({currentDate:u.getCurrentDate(),currentTime:u.getCurrentTime(),isAtLiveEdge:u.getIsAtLiveEdge()})},u.handleDurationChange=function(){u._durationChangeSource.next({duration:u.getDuration(),isLive:u.getIsLive(),seekableDuration:u.getSeekableDuration(),seekableRange:u.getSeekableRange()})},u.handleError=function(e){u.emitError({type:l.ErrorTypes.UNKNOWN,message:e.eventid})},u.handleEvent=function(e){switch(e.eventid){case p.AVPlayEvent.PLAYER_MSG_RESOLUTION_CHANGED:u._resizeSource.next(u.getDimensions())}},u.handleStreamCompleted=function(){u.pause(),u._hasEnded=!0,u._endedSource.next({})},u.handleVolumeChange=function(){u._volumeChangeSource.next({isMuted:u.getIsMuted(),volume:u.getVolume()})},u.setDisplayRect=function(){var e=u._elementSource.getValue();if(e){var t=e.getBoundingClientRect(),n=t.height,r=t.left,i=t.top,a=t.width;u._engine.setDisplayRect(i,r,a,n)}},u.syncAudioTracks=function(){u._audioTracks=u._engine.getTotalTrackInfo().filter((function(e){return e.type===p.AVPlayStreamType.AUDIO})).sort((function(e,t){return e.index-t.index})).map((function(e){var t=(0,m.parseAudioTrackInfo)(e),n=t.language,r=a.default[n]?a.default[n].nativeName:"";return{id:t.index,label:r,lang:n}}))},u.syncTextTracks=function(){u._textTracks=u._engine.getTotalTrackInfo().filter((function(e){return e.type===p.AVPlayStreamType.TEXT})).map((function(e){return(0,m.parseTextTrackInfo)(e)})).sort((function(e,t){return e.track_num-t.track_num})).map((function(e){var t=e.index,n=e.subtitle_type.toString(),r=e.track_lang;return{id:t,kind:n,lang:r,label:a.default[r]?a.default[r].nativeName:""}}))},u.whenReady=function(){return u.onReady.pipe((0,s.filter)((function(e){return e.isReady})),(0,s.takeUntil)(u.onDestroyed),(0,s.take)(1))},(0,i.default)(u),u._engine=new h.AVPlayWrapper(window.webapis.avplay),u._audioTrackChangeSource=new o.Subject,u._canPlaySource=new o.Subject,u._canPlayThroughSource=new o.Subject,u._durationChangeSource=new o.Subject,u._emptiedSource=new o.Subject,u._endedSource=new o.Subject,u._loadStartSource=new o.Subject,u._loadedDataSource=new o.Subject,u._loadedMetadataSource=new o.Subject,u._pauseSource=new o.Subject,u._playSource=new o.Subject,u._playingSource=new o.Subject,u._progressSource=new o.Subject,u._resizeSource=new o.Subject,u._seekedSource=new o.Subject,u._seekingSource=new o.Subject,u._textTrackChangeSource=new o.Subject,u._timeUpdateSource=new o.Subject,u._volumeChangeSource=new o.Subject,u._waitingSource=new o.Subject;var c=u.createEl(t);return u._elementSource.next(c),u.attachListeners(),u.configureEvents(),u.init(),u}return r.__extends(t,e),Object.defineProperty(t.prototype,"tvaudiocontrol",{get:function(){return window.tizen.tvaudiocontrol},enumerable:!1,configurable:!0}),t.canPlayType=function(e){return window.webapis&&window.webapis.avplay?l.CanPlaySource.MAYBE:l.CanPlaySource.NO},t.prototype.addTextTracks=function(e){this.syncTextTracks(),console.error("External text tracks are not yet supported by Tizen Handler.")},t.prototype.destroy=function(){this.startDestroying(),this.reset(),window.removeEventListener("beforeunload",this.destroy),this.tvaudiocontrol.unsetVolumeChangeListener();var t=this._elementSource.getValue();t&&(this._elementDestroyingSource.next(),this._elementSource.next(void 0),this._parent.removeChild(t)),this._engine.destroy(),e.prototype.destroy.call(this)},t.prototype.getAudioTracks=function(){return this._audioTracks},t.prototype.getBufferedRanges=function(){return[]},t.prototype.getCanControlVolume=function(){return!0},t.prototype.getCurrentAudioTrack=function(){var e=this._engine.getCurrentStreamInfo().find((function(e){return e.type===p.AVPlayStreamType.AUDIO}));if(e){var t=e.index;return this._audioTracks.find((function(e){return e.id===t}))}},t.prototype.getCurrentLevel=function(){return u.AUTOLEVEL},t.prototype.getCurrentLevelVariant=function(){return-1},t.prototype.getCurrentTextTrack=function(){var e=this._engine.getCurrentStreamInfo().find((function(e){return e.type===p.AVPlayStreamType.TEXT}));if(e){var t=e.index;return this._textTracks.find((function(e){return e.id===t}))}},t.prototype.getCurrentTime=function(e){return e&&this.getIsSeeking()&&void 0!==this._seekingTo?this._seekingTo:(0,d.clip)(this._engine.getCurrentTime()/1e3)},t.prototype.getDimensions=function(){var e=this._engine.getCurrentStreamInfo().find((function(e){return e.type===p.AVPlayStreamType.VIDEO}));if(e){var t=(0,m.parseVideoTrackInfo)(e);return{videoHeight:t.Height,videoWidth:t.Width}}return{videoHeight:0,videoWidth:0}},t.prototype.getDuration=function(){return this.getIsLive()?1/0:this._engine.getDuration()/1e3},t.prototype.getFrameRate=function(){},t.prototype.getHasEnded=function(){return this._hasEnded},t.prototype.getHasPlayed=function(){return this._hasPlayed},t.prototype.getIsBuffering=function(){return this._isBuffering},t.prototype.getIsLive=function(){return"1"===this._engine.getStreamingProperty(p.AVPlayStreamingPropertyType.IS_LIVE)},t.prototype.getIsMuted=function(){return this.tvaudiocontrol.isMute()},t.prototype.getIsPaused=function(){return this._engine.getState()!==p.AVPlayPlayerState.PLAYING},t.prototype.getIsPlaying=function(){return!this.getIsPaused()&&!this.getIsBuffering()},t.prototype.getIsSeeking=function(){return void 0!==this._seekingTo},t.prototype.getLevelVariants=function(){return 0},t.prototype.getLevels=function(){return[u.AUTOLEVEL]},t.prototype.getPlaybackRate=function(){return 1},t.prototype.getReadyState=function(){var e=this._engine.getState();return e===p.AVPlayPlayerState.NONE||e===p.AVPlayPlayerState.IDLE?l.ReadyStates.HAVE_NOTHING:this._isBuffering?l.ReadyStates.HAVE_METADATA:l.ReadyStates.HAVE_ENOUGH_DATA},t.prototype.getSeekableRange=function(){if(this.getIsLive()){var e=this._engine.getStreamingProperty(p.AVPlayStreamingPropertyType.GET_LIVE_DURATION),t=r.__read(e.split("|").map((function(e){return(0,d.clip)(parseFloat(e)/1e3)})),2);return{start:t[0],end:t[1]-3*this._targetDuration}}return{start:0,end:(0,d.clip)(this._engine.getDuration()/1e3)}},t.prototype.getSourceUrl=function(){return this._sourceUrl},t.prototype.getStartDate=function(){},t.prototype.getTextTracks=function(){return this._textTracks},t.prototype.getVolume=function(){return this.tvaudiocontrol.getVolume()/100},t.prototype.load=function(t){var n,i;return r.__awaiter(this,void 0,void 0,(function(){var a,o,s;return r.__generator(this,(function(u){switch(u.label){case 0:return[4,e.prototype.load.call(this,t)];case 1:return u.sent(),[4,this.resolveSource(t.source)];case 2:return a=u.sent(),this._sourceUrl=a.url,this._engine.open(this._sourceUrl),this._engine.setStreamingProperty(p.AVPlayStreamingPropertyType.ADAPTIVE_INFO,"STARTBITRATE=HIGHEST"),this._engine.setDisplayMethod(p.AVPlayDisplayMode.PLAYER_DISPLAY_MODE_LETTER_BOX),this.setDisplayRect(),(null==(o=null!==(n=a.drm)&&void 0!==n?n:t.drm)?void 0:o.playready)&&this.configurePlayReady(o.playready),[4,this._engine.prepareAsync()];case 3:if(u.sent(),this._readySource.next({isReady:!0}),this._durationChangeSource.next({duration:this.getDuration(),isLive:this.getIsLive(),seekableDuration:this.getSeekableDuration(),seekableRange:this.getSeekableRange()}),this._loadedMetadataSource.next(r.__assign(r.__assign({},this.getDimensions()),{duration:this.getDuration(),isLive:this.getIsLive(),startDate:this.getStartDate()})),this.syncAudioTracks(),this.syncTextTracks(),!("number"==typeof(s=t.startFrom)&&s>0))return[3,7];u.label=4;case 4:return u.trys.push([4,6,,7]),[4,null!==(i=this._pendingSeek)&&void 0!==i?i:this.seekTo(s)];case 5:return u.sent(),[3,7];case 6:return u.sent(),console.warn("Seek to start position has been interrupted by another seek!"),[3,7];case 7:return this.handleAutoPlay(t.autoPlay),[2]}}))}))},t.prototype.pause=function(){var e=this;this.getIsPaused()||(this._pauseSource.next({}),this.whenReady().subscribe((function(){e._engine.pause()})))},t.prototype.play=function(){return r.__awaiter(this,void 0,void 0,(function(){var e=this;return r.__generator(this,(function(t){switch(t.label){case 0:return this.getIsPaused()?this.getHasEnded()?[4,this.seekTo(0)]:[3,2]:[3,3];case 1:t.sent(),t.label=2;case 2:this._hasPlayed=!0,this._playSource.next({}),this.whenReady().subscribe((function(){e._engine.play(),e._playingSource.next({})})),t.label=3;case 3:return[2]}}))}))},t.prototype.reset=function(){this._engine.close(),this._sourceUrl=void 0,this._hasEnded=!1,this._hasPlayed=!1,this._readySource.next({isReady:!1}),this._emptiedSource.next({}),e.prototype.reset.call(this)},t.prototype.seekTo=function(e){var t=this,n="number"==typeof e?e:this.dateToTime(e),i=this.getSeekableRange(),a=i.start,o=i.end;return n=(0,d.clamp)(n,a,o),this._seekingTo=n,this._seekingSource.next({seekingTo:n}),this._pendingSeek=this._throttleSeek((function(e){return r.__awaiter(t,void 0,void 0,(function(){var t,i,a,o;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.whenReady().pipe((0,s.takeUntil)(e),(0,s.first)()).toPromise()];case 1:return r.sent(),[3,3];case 2:throw r.sent(),new Error("The seekTo() request was interrupted by a new seek request.");case 3:return r.trys.push([3,5,,6]),[4,this._engine.seekTo(1e3*n)];case 4:return r.sent(),this._seekingTo=void 0,t=this.getCurrentTime(),i=this.getIsAtLiveEdge(),this._seekedSource.next({currentTime:t}),this._timeUpdateSource.next({currentTime:t,isAtLiveEdge:i}),[3,6];case 5:return a=r.sent(),this._seekingTo=void 0,this.emitError({type:l.ErrorTypes.UNKNOWN,message:null!==(o=null==a?void 0:a.name)&&void 0!==o?o:"Failed to seek."}),[3,6];case 6:return[2]}}))}))})),this._pendingSeek},t.prototype.setCurrentAudioTrack=function(e){if(e){var t=e.id;if(null==t||!this._audioTracks.some((function(e){return e.id===t})))throw new Error("Invalid audio track identifier.");this._engine.setSelectTrack(p.AVPlayStreamType.AUDIO,t)}},t.prototype.setCurrentLevel=function(e){},t.prototype.setCurrentLevelVariant=function(e){},t.prototype.setCurrentTextTrack=function(t){if(e.prototype.setCurrentTextTrack.call(this,t),t){var n=t.label,r=this._textTracks.find((function(e){return e.label===n}));if(void 0===(null==r?void 0:r.id))throw new Error("Invalid text track label.");this._engine.setSilentSubtitle(!0),this._engine.setSelectTrack(p.AVPlayStreamType.TEXT,r.id)}else this._engine.setSilentSubtitle(!0)},t.prototype.setIsMuted=function(e){e!==this.getIsMuted()&&(this.tvaudiocontrol.setMute(e),this._volumeChangeSource.next({isMuted:e,volume:this.getVolume()}))},t.prototype.setPlaybackRate=function(e){},t.prototype.setVolume=function(e){var t=(0,d.clamp)(Math.floor(100*e),0,100);this.tvaudiocontrol.setVolume(t)},t.prototype.configureEvents=function(){e.prototype.configureEvents.call(this),this._onAudioTrackChange=this._audioTrackChangeSource.asObservable(),this._onCanPlay=this._canPlaySource.asObservable(),this._onCanPlayThrough=this._canPlayThroughSource.asObservable(),this._onDurationChange=this._durationChangeSource.pipe((0,s.distinctUntilChanged)(d.compareDurationChangeEvents)),this._onEmptied=this._emptiedSource.asObservable(),this._onEnded=this._endedSource.asObservable(),this._onLoadStart=this._loadStartSource.asObservable(),this._onLoadedData=this._loadedDataSource.asObservable(),this._onLoadedMetadata=this._loadedMetadataSource.asObservable(),this._onPause=this._pauseSource.asObservable(),this._onPlay=this._playSource.asObservable(),this._onPlaying=this._playingSource.asObservable(),this._onProgress=this._progressSource.asObservable(),this._onResize=this._resizeSource.pipe((0,s.distinctUntilChanged)(d.compareResizeEvents)),this._onSeeked=this._seekedSource.asObservable(),this._onSeeking=this._seekingSource.asObservable(),this._onTextTrackChange=this._textTrackChangeSource.asObservable(),this._onTimeUpdate=this._timeUpdateSource.asObservable(),this._onVolumeChange=this._volumeChangeSource.asObservable(),this._onWaiting=this._waitingSource.asObservable()},t.prototype.handleAutoPlay=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:switch(n.trys.push([0,6,,7]),e){case l.AutoPlayOptions.ANY:case l.AutoPlayOptions.YES:return[3,1];case l.AutoPlayOptions.MUTED:return[3,3]}return[3,5];case 1:return[4,this.play()];case 2:return n.sent(),[3,5];case 3:return this.setIsMuted(!0),[4,this.play()];case 4:return n.sent(),[3,5];case 5:return[3,7];case 6:return t=n.sent(),this.emitError({type:l.ErrorTypes.AUTO_PLAY_FAILURE,message:t}),[3,7];case 7:return[2]}}))}))},t}(f.SourceHandlerBase);t.TizenHandler=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AVPlayWrapper=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=n(16),u=n(72),l=new s.LoggerFileNameDecorator("AVPlayWrapper"),c=function(){function e(e){(0,i.default)(this),this.avplay=e,this._bufferingCompleteSource=new a.Subject,this._bufferingProgressSource=new a.Subject,this._bufferingStartSource=new a.Subject,this._currentPlayTimeSource=new a.Subject,this._drmEventSource=new a.Subject,this._errorSource=new a.Subject,this._eventSource=new a.Subject,this._onDurationChange=a.NEVER,this._streamCompletedSource=new a.Subject,this._subtitleChangeSource=new a.Subject,this.configureEvents()}return Object.defineProperty(e.prototype,"onBufferingComplete",{get:function(){return this._bufferingCompleteSource.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onBufferingProgress",{get:function(){return this._bufferingProgressSource.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onBufferingStart",{get:function(){return this._bufferingStartSource.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCurrentPlayTime",{get:function(){return this._currentPlayTimeSource.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDRMEvent",{get:function(){return this._drmEventSource.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDurationChange",{get:function(){return this._onDurationChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._errorSource.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onEvent",{get:function(){return this._eventSource.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onStreamCompleted",{get:function(){return this._streamCompletedSource.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSubtitleChange",{get:function(){return this._subtitleChangeSource.asObservable()},enumerable:!1,configurable:!0}),e.prototype.close=function(){this.avplay.close()},e.prototype.destroy=function(){this._bufferingCompleteSource.complete(),this._bufferingProgressSource.complete(),this._bufferingStartSource.complete(),this._currentPlayTimeSource.complete(),this._drmEventSource.complete(),this._errorSource.complete(),this._eventSource.complete(),this._streamCompletedSource.complete(),this._subtitleChangeSource.complete()},e.prototype.getCurrentStreamInfo=function(){var e=[u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];return this.hasState(e)?this.avplay.getCurrentStreamInfo():(this.logSkipped("getCurrentStreamInfo",e),[])},e.prototype.getCurrentTime=function(){return this.avplay.getCurrentTime()},e.prototype.getDuration=function(){return this.avplay.getDuration()},e.prototype.getPlaybackListener=function(){var e=this;return{onbufferingcomplete:function(){return e._bufferingCompleteSource.next({})},onbufferingprogress:function(t){return e._bufferingProgressSource.next({progress:t})},onbufferingstart:function(){return e._bufferingStartSource.next({})},oncurrentplaytime:function(t){return e._currentPlayTimeSource.next({currentTime:t})},ondrmevent:function(t,n){return e._drmEventSource.next({type:t,data:n})},onerror:function(t){return e._errorSource.next({eventid:t})},onevent:function(t,n){return e._eventSource.next({eventid:t,data:n})},onstreamcompleted:function(){return e._streamCompletedSource.next({})},onsubtitlechange:function(t,n,r,i){return e._subtitleChangeSource.next({duration:t,subtitles:n,type:r,attributes:i})}}},e.prototype.getState=function(){return this.avplay.getState()},e.prototype.getStreamingProperty=function(e){var t=[u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];return this.hasState(t)?this.avplay.getStreamingProperty(e):(this.logSkipped("getStreamingProperty('".concat(e,"')"),t),"")},e.prototype.getTotalTrackInfo=function(){var e=[u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];return this.hasState(e)?this.avplay.getTotalTrackInfo():(this.logSkipped("getTotalTrackInfo",e),[])},e.prototype.getUID=function(e){return this.avplay.getUID(e)},e.prototype.getVersion=function(){return this.avplay.getVersion()},e.prototype.jumpBackward=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(r){return t=[u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED],this.hasState(t)?[2,new Promise((function(t,r){return n.avplay.jumpBackward(e,t,r)}))]:(this.logSkipped("jumpBackward",t),[2])}))}))},e.prototype.jumpForward=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(r){return t=[u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED],this.hasState(t)?[2,new Promise((function(t,r){return n.avplay.jumpForward(e,t,r)}))]:(this.logSkipped("jumpForward",t),[2])}))}))},e.prototype.open=function(e){this.hasState([u.AVPlayPlayerState.NONE,u.AVPlayPlayerState.IDLE])||this.avplay.close(),this.avplay.open(e)},e.prototype.pause=function(){var e=[u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];this.hasState(e)?this.avplay.pause():this.logSkipped("pause",e)},e.prototype.play=function(){var e=[u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];this.hasState(e)?this.avplay.play():this.logSkipped("play",e)},e.prototype.prepareAsync=function(){return r.__awaiter(this,void 0,void 0,(function(){var e=this;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){return e.avplay.prepareAsync(t,n)}))];case 1:return t.sent(),[2]}}))}))},e.prototype.restoreAsync=function(e,t,n){return r.__awaiter(this,void 0,void 0,(function(){var i,a=this;return r.__generator(this,(function(r){return i=[u.AVPlayPlayerState.NONE,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED],this.hasState(i)?[2,new Promise((function(r,i){return a.avplay.restoreAsync(e,t,n,r,i)}))]:(this.logSkipped("restoreAsync",i),[2])}))}))},e.prototype.seekTo=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n=this;return r.__generator(this,(function(r){return t=[u.AVPlayPlayerState.IDLE,u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED],this.hasState(t)?[2,new Promise((function(t,r){return n.avplay.seekTo(e,t,r)}))]:(this.logSkipped("seekTo",t),[2])}))}))},e.prototype.setBufferingParam=function(e,t,n){var r=u.AVPlayPlayerState.IDLE;this.hasState(r)?this.avplay.setBufferingParam(e,t,n):this.logSkipped("setBufferingParam",r)},e.prototype.setDisplayMethod=function(e){var t=[u.AVPlayPlayerState.IDLE,u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];this.hasState(t)?this.avplay.setDisplayMethod(e):this.logSkipped("setDisplayMethod",t)},e.prototype.setDisplayRect=function(e,t,n,r){this.avplay.setDisplayRect(e,t,n,r)},e.prototype.setDrm=function(e,t,n){var r=u.AVPlayPlayerState.IDLE;return this.hasState(r)?this.avplay.setDrm(e,t,n):(this.logSkipped("setDrm",r),"")},e.prototype.setExternalSubtitlePath=function(e){var t=[u.AVPlayPlayerState.IDLE,u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];this.hasState(t)?this.avplay.setExternalSubtitlePath(e):this.logSkipped("setExternalSubtitlePath",t)},e.prototype.setSelectTrack=function(e,t){var n=[u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];this.hasState(n)?this.avplay.setSelectTrack(e,t):this.logSkipped("setSelectTrack",n)},e.prototype.setSilentSubtitle=function(e){var t=[u.AVPlayPlayerState.IDLE,u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];this.hasState(t)?this.avplay.setSilentSubtitle(e):this.logSkipped("setSilentSubtitle",t)},e.prototype.setSpeed=function(e){var t=[u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];this.hasState(t)?this.avplay.setSpeed(e):this.logSkipped("setSpeed",t)},e.prototype.setStreamingProperty=function(e,t){var n=u.AVPlayPlayerState.IDLE;if(this.hasState(n))return this.avplay.setStreamingProperty(e,t);this.logSkipped("setStreamingProperty",n)},e.prototype.setSubtitlePosition=function(e){var t=[u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];this.hasState(t)?this.avplay.setSubtitlePosition(e):this.logSkipped("setSubtitlePosition",t)},e.prototype.setTimeoutForBuffering=function(e){var t=[u.AVPlayPlayerState.IDLE,u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];this.hasState(t)?this.avplay.setTimeoutForBuffering(e):this.logSkipped("setTimeoutForBuffering",t)},e.prototype.stop=function(){this.avplay.stop()},e.prototype.suspend=function(){var e=[u.AVPlayPlayerState.READY,u.AVPlayPlayerState.PLAYING,u.AVPlayPlayerState.PAUSED];this.hasState(e)?this.avplay.suspend():this.logSkipped("suspend",e)},e.prototype.configureEvents=function(){var e=this,t=this.getPlaybackListener();this.avplay.setListener(t);var n=(0,a.interval)(500).pipe((0,o.share)());this._onDurationChange=n.pipe((0,o.map)((function(){return{duration:e.getDuration()}})),(0,o.distinctUntilChanged)((function(e,t){return e.duration===t.duration})),(0,o.share)())},e.prototype.hasState=function(e){var t=this.avplay.getState();return Array.isArray(e)?e.some((function(e){return e===t})):e===t},e.prototype.logSkipped=function(e,t){var n=(Array.isArray(t)?t:[t]).map((function(e){return"'".concat(e,"'")})).join(", ");l.debug("Function '".concat(e,"' has been skipped as it can only be called in the following states: ").concat(n))},e}();t.AVPlayWrapper=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(672),t),r.__exportStar(n(712),t),r.__exportStar(n(713),t),r.__exportStar(n(714),t),r.__exportStar(n(715),t),r.__exportStar(n(716),t),r.__exportStar(n(717),t),r.__exportStar(n(718),t),r.__exportStar(n(719),t),r.__exportStar(n(720),t),r.__exportStar(n(721),t),r.__exportStar(n(722),t),r.__exportStar(n(723),t),r.__exportStar(n(724),t),r.__exportStar(n(725),t),r.__exportStar(n(726),t),r.__exportStar(n(727),t),r.__exportStar(n(728),t),r.__exportStar(n(729),t),r.__exportStar(n(730),t),r.__exportStar(n(731),t),r.__exportStar(n(732),t),r.__exportStar(n(733),t),r.__exportStar(n(734),t),r.__exportStar(n(735),t),r.__exportStar(n(736),t),r.__exportStar(n(737),t),r.__exportStar(n(738),t),r.__exportStar(n(739),t),r.__exportStar(n(740),t),r.__exportStar(n(741),t),r.__exportStar(n(742),t),r.__exportStar(n(743),t),r.__exportStar(n(744),t),r.__exportStar(n(745),t),r.__exportStar(n(746),t),r.__exportStar(n(747),t),r.__exportStar(n(748),t),r.__exportStar(n(749),t),r.__exportStar(n(750),t),r.__exportStar(n(751),t),r.__exportStar(n(752),t),r.__exportStar(n(753),t),r.__exportStar(n(754),t),r.__exportStar(n(755),t),r.__exportStar(n(756),t),r.__exportStar(n(757),t),r.__exportStar(n(758),t),r.__exportStar(n(759),t),r.__exportStar(n(760),t),r.__exportStar(n(761),t),r.__exportStar(n(762),t),r.__exportStar(n(763),t),r.__exportStar(n(764),t),r.__exportStar(n(765),t),r.__exportStar(n(766),t),r.__exportStar(n(767),t),r.__exportStar(n(768),t),r.__exportStar(n(769),t),r.__exportStar(n(770),t),r.__exportStar(n(771),t),r.__exportStar(n(772),t),r.__exportStar(n(773),t),r.__exportStar(n(774),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(673),t),r.__exportStar(n(674),t),r.__exportStar(n(675),t),r.__exportStar(n(676),t),r.__exportStar(n(677),t),r.__exportStar(n(678),t),r.__exportStar(n(679),t),r.__exportStar(n(680),t),r.__exportStar(n(681),t),r.__exportStar(n(682),t),r.__exportStar(n(683),t),r.__exportStar(n(684),t),r.__exportStar(n(685),t),r.__exportStar(n(686),t),r.__exportStar(n(687),t),r.__exportStar(n(688),t),r.__exportStar(n(689),t),r.__exportStar(n(690),t),r.__exportStar(n(691),t),r.__exportStar(n(692),t),r.__exportStar(n(693),t),r.__exportStar(n(694),t),r.__exportStar(n(695),t),r.__exportStar(n(696),t),r.__exportStar(n(697),t),r.__exportStar(n(698),t),r.__exportStar(n(699),t),r.__exportStar(n(700),t),r.__exportStar(n(701),t),r.__exportStar(n(702),t),r.__exportStar(n(703),t),r.__exportStar(n(704),t),r.__exportStar(n(705),t),r.__exportStar(n(706),t),r.__exportStar(n(707),t),r.__exportStar(n(708),t),r.__exportStar(n(709),t),r.__exportStar(n(710),t),r.__exportStar(n(711),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerHandlerProxy=void 0;var r=n(12),i=n(15),a=n(8),o=n(61),s=n(10),u=function(){function e(){var e,t,n=this;this.connectHandler=function(e){Object.keys(n._eventSelectors).forEach((function(t){var r=n._eventSelectors[t];r&&n._eventProxy.addEventSource(t,r(e))}));var t=e.onDestroying.pipe((0,i.map)((function(){return{sourceHandler:e}}))),r=e.onElementCreated.pipe((0,i.map)((function(){return{sourceHandler:e}}))),o=e.onElementDestroying.pipe((0,i.map)((function(){return{sourceHandler:e}})));n._eventProxy.addEventSource(a.EventTypes.HANDLER_DESTROYING,t),n._eventProxy.addEventSource(a.EventTypes.HANDLER_ELEMENT_CREATED,r),n._eventProxy.addEventSource(a.EventTypes.HANDLER_ELEMENT_DESTROYING,o),e.onDestroyed.subscribe((function(){n.disconnectHandler(e),n._eventProxy.removeEventSource(a.EventTypes.HANDLER_DESTROYING,t),n._eventProxy.removeEventSource(a.EventTypes.HANDLER_ELEMENT_CREATED,r),n._eventProxy.removeEventSource(a.EventTypes.HANDLER_ELEMENT_DESTROYING,o)}))},this.disconnectHandler=function(e){Object.keys(n._eventSelectors).forEach((function(t){var r=n._eventSelectors[t];r&&n._eventProxy.removeEventSource(t,r(e))}))},this._eventProxy=new o.EventProxy({eventTypes:a.EventTypes,proxyCreators:(e={},e[a.EventTypes.READY]=function(){return new o.ProxyObservable({EmitterEngine:r.BehaviorSubject,defaultValue:{isReady:!1},filters:[(0,i.distinctUntilChanged)(s.compareReadyEvents),(0,i.filter)((function(e){return e.isReady}))]})},e)}),this.createSubscriptionContext=this._eventProxy.createSubscriptionContext,this.off=this._eventProxy.off,this.on=this._eventProxy.on,this.once=this._eventProxy.once,this._eventSelectors=((t={})[a.EventTypes.AUDIO_TRACK_CHANGE]=function(e){return e.onAudioTrackChange},t[a.EventTypes.CAN_PLAY]=function(e){return e.onCanPlay},t[a.EventTypes.CAN_PLAY_THROUGH]=function(e){return e.onCanPlayThrough},t[a.EventTypes.CAST_STATE_CHANGE]=function(e){return e.onCastStateChange},t[a.EventTypes.DURATION_CHANGE]=function(e){return e.onDurationChange},t[a.EventTypes.DVR_WINDOW_FORCED_SEEK]=function(e){return e.onDVRWindowForcedSeek},t[a.EventTypes.EMPTIED]=function(e){return e.onEmptied},t[a.EventTypes.ENDED]=function(e){return e.onEnded},t[a.EventTypes.ERROR]=function(e){return e.onError},t[a.EventTypes.FULLSCREEN_CHANGE]=function(e){return e.onFullscreenChange},t[a.EventTypes.LEVEL_CHANGE]=function(e){return e.onLevelChange},t[a.EventTypes.LOADED_DATA]=function(e){return e.onLoadedData},t[a.EventTypes.LOADED_METADATA]=function(e){return e.onLoadedMetadata},t[a.EventTypes.LOAD_START]=function(e){return e.onLoadStart},t[a.EventTypes.PAUSE]=function(e){return e.onPause},t[a.EventTypes.PICTURE_IN_PICTURE_CHANGE]=function(e){return e.onPictureInPictureChange},t[a.EventTypes.PLAY]=function(e){return e.onPlay},t[a.EventTypes.PLAYING]=function(e){return e.onPlaying},t[a.EventTypes.PROGRESS]=function(e){return e.onProgress},t[a.EventTypes.RATE_CHANGE]=function(e){return e.onRateChange},t[a.EventTypes.READY]=function(e){return e.onReady},t[a.EventTypes.RESIZE]=function(e){return e.onResize},t[a.EventTypes.SEEKED]=function(e){return e.onSeeked},t[a.EventTypes.SEEKING]=function(e){return e.onSeeking},t[a.EventTypes.STALLED]=function(e){return e.onStalled},t[a.EventTypes.SUSPEND]=function(e){return e.onSuspend},t[a.EventTypes.TEXT_TRACK_CHANGE]=function(e){return e.onTextTrackChange},t[a.EventTypes.TIME_UPDATE]=function(e){return e.onTimeUpdate},t[a.EventTypes.VOLUME_CHANGE]=function(e){return e.onVolumeChange},t[a.EventTypes.WAITING]=function(e){return e.onWaiting},t)}return e.prototype.addTextTracks=function(e){return this.sourceHandler.addTextTracks(e)},e.prototype.exitFullscreen=function(){return this.sourceHandler.exitFullscreen()},e.prototype.exitPictureInPicture=function(){return this.sourceHandler.exitPictureInPicture()},e.prototype.getAudioTracks=function(){return this.sourceHandler.getAudioTracks()},e.prototype.getBufferedRanges=function(){return this.sourceHandler.getBufferedRanges()},e.prototype.getCanControlVolume=function(){return this.sourceHandler.getCanControlVolume()},e.prototype.getCurrentAudioTrack=function(){return this.sourceHandler.getCurrentAudioTrack()},e.prototype.getCurrentDate=function(e){return this.sourceHandler.getCurrentDate(e)},e.prototype.getCurrentLevel=function(){return this.sourceHandler.getCurrentLevel()},e.prototype.getCurrentLevelVariant=function(){return this.sourceHandler.getCurrentLevelVariant()},e.prototype.getCurrentTextTrack=function(){return this.sourceHandler.getCurrentTextTrack()},e.prototype.getCurrentTime=function(e){return this.sourceHandler.getCurrentTime(e)},e.prototype.getDimensions=function(){return this.sourceHandler.getDimensions()},e.prototype.getDuration=function(){return this.sourceHandler.getDuration()},e.prototype.getEngine=function(){return this.sourceHandler.getEngine()},e.prototype.getFrameRate=function(){return this.sourceHandler.getFrameRate()},e.prototype.getFullscreenElement=function(){return this.sourceHandler.getFullscreenElement()},e.prototype.getHasEnded=function(){return this.sourceHandler.getHasEnded()},e.prototype.getHasPlayed=function(){return this.sourceHandler.getHasPlayed()},e.prototype.getIsAtLiveEdge=function(e){return this.sourceHandler.getIsAtLiveEdge(e)},e.prototype.getIsBuffering=function(){return this.sourceHandler.getIsBuffering()},e.prototype.getIsFullscreenActive=function(){return this.sourceHandler.getIsFullscreenActive()},e.prototype.getIsFullscreenSupported=function(){return this.sourceHandler.getIsFullscreenSupported()},e.prototype.getIsLive=function(){return this.sourceHandler.getIsLive()},e.prototype.getIsMuted=function(){return this.sourceHandler.getIsMuted()},e.prototype.getIsPaused=function(){return this.sourceHandler.getIsPaused()},e.prototype.getIsPictureInPictureActive=function(){return this.sourceHandler.getIsPictureInPictureActive()},e.prototype.getIsPictureInPictureSupported=function(){return this.sourceHandler.getIsPictureInPictureSupported()},e.prototype.getIsPlaying=function(){return this.sourceHandler.getIsPlaying()},e.prototype.getIsRebuffering=function(){return this.sourceHandler.getIsRebuffering()},e.prototype.getIsSeeking=function(){return this.sourceHandler.getIsSeeking()},e.prototype.getLevelVariants=function(){return this.sourceHandler.getLevelVariants()},e.prototype.getLevels=function(){return this.sourceHandler.getLevels()},e.prototype.getPlaybackRate=function(){return this.sourceHandler.getPlaybackRate()},e.prototype.getReadyState=function(){return this.sourceHandler.getReadyState()},e.prototype.getSeekableDuration=function(){return this.sourceHandler.getSeekableDuration()},e.prototype.getSeekableRange=function(){return this.sourceHandler.getSeekableRange()},e.prototype.getSourceUrl=function(){return this.sourceHandler.getSourceUrl()},e.prototype.getStartDate=function(){return this.sourceHandler.getStartDate()},e.prototype.getTextTracks=function(){return this.sourceHandler.getTextTracks()},e.prototype.getVolume=function(){return this.sourceHandler.getVolume()},e.prototype.nudge=function(e){return this.sourceHandler.nudge(e)},e.prototype.nudgeVolume=function(e){return this.sourceHandler.nudgeVolume(e)},e.prototype.pause=function(){return this.sourceHandler.pause()},e.prototype.play=function(){return this.sourceHandler.play()},e.prototype.requestFullscreen=function(){return this.sourceHandler.requestFullscreen()},e.prototype.requestPictureInPicture=function(){return this.sourceHandler.requestPictureInPicture()},e.prototype.seekTo=function(e){return this.sourceHandler.seekTo(e)},e.prototype.setCurrentAudioTrack=function(e){return this.sourceHandler.setCurrentAudioTrack(e)},e.prototype.setCurrentLevel=function(e){return this.sourceHandler.setCurrentLevel(e)},e.prototype.setCurrentLevelVariant=function(e){return this.sourceHandler.setCurrentLevelVariant(e)},e.prototype.setCurrentTextTrack=function(e){return this.sourceHandler.setCurrentTextTrack(e)},e.prototype.setHtmlTextTrackContainer=function(e){return this.sourceHandler.setHtmlTextTrackContainer(e)},e.prototype.setIsMuted=function(e){return this.sourceHandler.setIsMuted(e)},e.prototype.setPlaybackRate=function(e){return this.sourceHandler.setPlaybackRate(e)},e.prototype.setVolume=function(e){return this.sourceHandler.setVolume(e)},e}();t.PlayerHandlerProxy=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(103),a=n(200);t.addDiceSourceResolver=function(e){return r.__awaiter(void 0,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){switch(n.label){case 0:return[4,a.createDiceSourceResolver(e)];case 1:return t=n.sent(),e.player.addSourceResolver(i.DICE_RESOLVABLE_SOURCE,t),[2]}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_LIVE_PARAMS={sportId:0,propertyId:0,tournamentId:0,displayGeoblockedLive:"false"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DICE_RESOLVABLE_SOURCE="dice"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENDPOINTS={LIVE:"/stream",VOD:"/stream/vod"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_FORMATS={WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(20),a=function(e){function t(t,n,r){return e.call(this,t,n,r,i.KeySystems.PLAYREADY)||this}return r.__extends(t,e),t}(n(202).DashDrmBase);t.Playready=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=r.__importDefault(n(9)),a=function(e){function t(t,n,r){var a=e.call(this,n,r)||this;return i.default(a),a.getEngine=t,a}return r.__extends(t,e),t.prototype.headers=function(){var e=this.getEngine();if(!e.getCurrentTrackFor)return{Authorization:""+this.authorizationToken};var t=e.getCurrentTrackFor("video"),n=this.getKIDs();if(this.getCENC(t)){var r={system:this.keySystem};return n.length>0&&(r.key_ids=n),{"X-DRM-INFO":btoa(JSON.stringify(r)),Authorization:""+this.authorizationToken}}return{}},t.prototype.getKIDs=function(){var e=this,t=this.getEngine();return t?r.__spread(t.getTracksFor("audio"),t.getTracksFor("video")).map((function(t){var n=e.getCENC(t);return(null==n?void 0:n.KID)||""})).filter((function(e){return Boolean(e)})):[]},t.prototype.getCENC=function(e){if(e&&e.contentProtection)return e.contentProtection.find((function(e){return"cenc"===e.value||"cbcs"===e.value}))},t}(n(143).HandlerDrm);t.HandlerDrmDash=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=r.__importDefault(n(9)),a=function(e){function t(t,n,r){var a=e.call(this,n,r)||this;return i.default(a),a.getEngine=t,a}return r.__extends(t,e),t.prototype.headers=function(){var e,t=this,n=this.getEngine(),r=null==n?void 0:n.getManifest(),i=null===(e=null==r?void 0:r.periods)||void 0===e?void 0:e.reduce((function(e,n){return e.concat(n.variants.reduce((function(e,n){var r,i,a;return e.concat(null!==(a=null===(i=null===(r=n.drmInfos)||void 0===r?void 0:r.find((function(e){return e.keySystem===t.keySystem})))||void 0===i?void 0:i.keyIds)&&void 0!==a?a:[])}),[]))}),[]).filter((function(e,t,n){return n.findIndex((function(t){return t===e}))===t})),a={system:this.keySystem};return i&&i.length>0&&(a.key_ids=i),{"X-DRM-INFO":btoa(JSON.stringify(a)),Authorization:""+this.authorizationToken}},t}(n(143).HandlerDrm);t.HandlerDrmShaka=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(20),a=r.__importDefault(n(9)),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return a.default(r),r}return r.__extends(t,e),Object.defineProperty(t.prototype,"customData",{get:function(){return this.keySystem===i.KeySystems.PLAYREADY?btoa(JSON.stringify({authorization:this.authorizationToken,system:i.KeySystems.PLAYREADY})):""},enumerable:!0,configurable:!0}),t}(n(143).HandlerDrm);t.HandlerDrmTizen=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(20),a=function(e){function t(t,n,r){return e.call(this,t,n,r,i.KeySystems.WIDEVINE)||this}return r.__extends(t,e),t}(n(202).DashDrmBase);t.Widevine=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21);r.__exportStar(n(787),t),r.__exportStar(n(224),t),r.__exportStar(n(225),t),r.__exportStar(n(226),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54);t.getImaPlugin=function(e){var t,n=null!==(t=e.getPluginByType(r.IMAPlugin))&&void 0!==t?t:e.getPluginByName("ima");if(!n)throw new Error("Ad Plugin not defined!");return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(789),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BIFPlugin=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(8),o=n(16),s=n(790),u=new o.LoggerFileNameDecorator("BIFPlugin"),l=function(){function e(e){var t=this;this.version=-1,(0,i.default)(this),e.on([a.EventTypes.DESTROYING],this.reset),e.on([a.EventTypes.LOAD_REQUEST],(function(e,n){var r=n.mediaInfo;t.reset(),t.handleLoadRequest(r)}))}return e.prototype.fetchBifData=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return u.debug("Fetching BIF data as ArrayBuffer"),[4,fetch(e)];case 1:return[4,t.sent().arrayBuffer()];case 2:return[2,t.sent()]}}))}))},e.prototype.getImageDataAtSecond=function(e){if(null!=this._framewiseSeparation&&null!=this._bifIndex&&null!=this._arrayBuffer){var t=Math.floor(e/(this._framewiseSeparation/1e3)),n=this._bifIndex[t];if(!n)return null;var i=new Uint8Array(this._arrayBuffer,n.offset,n.length);return"".concat("data:image/jpeg;base64,").concat(btoa(String.fromCharCode.apply(String,r.__spreadArray([],r.__read(i),!1))))}return null},e.prototype.loadBIF=function(t){u.debug("Loading BIF data");var n=new Uint8Array(t,0,8);if(!(0,s.validate)(n))throw new Error("Invalid BIF file.");this._arrayBuffer=t,this._framewiseSeparation=e.getUint32(this._arrayBuffer,16)||1e3,this._numberOfBifImages=e.getUint32(this._arrayBuffer,12),this.version=e.getUint32(this._arrayBuffer,8),this._bifIndex=this.generateBifIndex()},e.prototype.generateBifIndex=function(){if(null!=this._numberOfBifImages&&null!=this._arrayBuffer){for(var t=[],n=0,r=64;n<this._numberOfBifImages;n+=1,r+=8){var i=r,a=r+4,o=a+8,s=e.getUint32(this._arrayBuffer,a),u=e.getUint32(this._arrayBuffer,o),l=e.getUint32(this._arrayBuffer,i);t.push({offset:s,timestamp:l,length:u-s})}return t}throw new Error("Invalid operation!")},e.prototype.handleLoadRequest=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i;return r.__generator(this,(function(r){switch(r.label){case 0:if(t=null==e?void 0:e.customData,!(0,s.isCustomDataWithBifRequest)(t))return[3,4];u.debug("Found BIF request in `mediaInfo`, loading BIF data"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.fetchBifData(t.bif.srcUrl)];case 2:return n=r.sent(),this.loadBIF(n),[3,4];case 3:return i=r.sent(),u.error("Failed to load bif data.",i),[3,4];case 4:return[2]}}))}))},e.prototype.reset=function(){this._arrayBuffer=void 0,this._bifIndex=[]},e.getUint32=function(e,t){var n=new Uint8Array(e,t,4);return n[3]<<24|n[2]<<16|n[1]<<8|n[0]},e}();t.BIFPlugin=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(791),t),r.__exportStar(n(792),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCustomDataWithBifRequest=void 0,t.isCustomDataWithBifRequest=function(e){return void 0!==e&&"bif"in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;var r=n(793);t.validate=function(e){return r.MAGIC_NUMBER.every((function(t,n){return t===e[n]}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(794),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAGIC_NUMBER=void 0,t.MAGIC_NUMBER=new Uint8Array([parseInt("0x89",16),parseInt("0x42",16),parseInt("0x49",16),parseInt("0x46",16),parseInt("0x0d",16),parseInt("0x0a",16),parseInt("0x1a",16),parseInt("0x0a",16)])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientSideImaPlugin=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=n(8),u=n(70),l=n(16),c=n(10),d=n(207),f=n(73),h=n(801),p=n(803),m=n(106),g=n(210),v=new l.LoggerFileNameDecorator("ClientSideImaPlugin"),y=function(){function e(e,t){this._isAdClicked=!1,(0,i.default)(this),this._config=r.__assign(r.__assign({},d.DEFAULT_CONFIG),t),this._player=e,this._clientSideImaEventProxy=new p.ClientSideImaEventProxy,this._imaSdkEventProxy=new p.ImaSdkEventProxy,this.attachMiddlewares(),this.createSubscriptionContext=this._clientSideImaEventProxy.createSubscriptionContext,this.off=this._clientSideImaEventProxy.off,this.on=this._clientSideImaEventProxy.on,this.once=this._clientSideImaEventProxy.once,this._libraryLoader=this.createLibraryLoader();var n=this.createPlayerManagerChangedSource(),a=n.changedEvent,o=n.source;this._playerManagerChangedSource=o,this._onPlayerManagerChanged=a,this.initEventSubscriptions()}return Object.defineProperty(e.prototype,"onPlayerManagerChanged",{get:function(){return this._onPlayerManagerChanged},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"google",{get:function(){if(!window.google)throw new Error("Google Client-Side IMA SDK is not loaded on the page");return window.google},enumerable:!1,configurable:!0}),e.prototype.getAdContainer=function(){return this._adContainer},e.prototype.getAdsManager=function(){return this._adsManager},e.prototype.getConfig=function(){return this._config},e.prototype.getCuePoints=function(){var e,t;return null===(t=null===(e=this.getPlayerManager())||void 0===e?void 0:e.getCuePointsManager())||void 0===t?void 0:t.getCuePoints()},e.prototype.getHasPostRoll=function(){var e,t=null===(e=this._adsManager)||void 0===e?void 0:e.getCuePoints(),n=this.getCuePoints();return!(!(null==t?void 0:t.length)||!(null==n?void 0:n.length)||-1===t.indexOf(-1)||n[(null==n?void 0:n.length)-1].played)},e.prototype.getIsActive=function(){return Boolean(this.getAdsManager())},e.prototype.getIsPlayingBreak=function(){var e,t;return null!==(t=null===(e=this.getPlayerManager())||void 0===e?void 0:e.getIsPlayingBreak())&&void 0!==t&&t},e.prototype.getIsPlayingLinearBreak=function(){var e,t=this.getPlayerManager();return null!==(e=(null==t?void 0:t.getIsPlayingBreak())&&(null==t?void 0:t.getIsCurrentAdLinear()))&&void 0!==e&&e},e.prototype.getLibraryState=function(){return this._libraryLoader.getLibraryState()},e.prototype.getPlayerManager=function(){return this._playerManagerChangedSource.getValue().playerManager},e.prototype.loadLibrary=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this._libraryLoader.loadLibrary()];case 1:return e.sent(),[2]}}))}))},e.prototype.requestAds=function(e){var t=this;return v.debug("Requesting Ads"),new Promise((function(n,r){var i=t.getVideoElement();t._adContainer||(t._adContainer=t.createAdContainer()),t.google.ima.settings.setVpaidMode(t.getVpaidMode()),t.google.ima.settings.setDisableCustomPlaybackForIOS10Plus(t._config.disableCustomPlaybackForIOS10Plus),t._adsLoader?t._adsLoader.contentComplete():(t._adDisplayContainer=new t.google.ima.AdDisplayContainer(t._adContainer,i),t._adsLoader=new t.google.ima.AdsLoader(t._adDisplayContainer),t._adsLoader.addEventListener(t.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){t.handleAdsManagerLoaded(e),n()}),!1),t._adsLoader.addEventListener(t.google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){t.handleAdError(e),r()}),!1),i.addEventListener("ended",(function(){var e;v.debug("Content playback ended"),null===(e=t._adsLoader)||void 0===e||e.contentComplete()}))),t._adsLoader.requestAds(t.getAdsRequest(e))}))},e.prototype.startPlayingAds=function(){var e,t;try{v.info("Start AdsManager");var n=this.getVideoElement(),r=n.clientHeight,i=n.clientWidth;null===(e=this._adsManager)||void 0===e||e.init(i,r,this.google.ima.ViewMode.NORMAL),null===(t=this._adsManager)||void 0===t||t.start()}catch(e){var a=(0,g.isImaError)(e)?e.toString():(0,c.errorToString)(e);v.error("AdsManager could not be started",a)}},e.prototype.attachMiddlewares=function(){this._config.withControlAdPlayerMiddleware&&this._player.getConfig().middlewares.push(h.controlAdPlayerMiddleware)},e.prototype.clearAdIframe=function(){var e;null===(e=this._adContainer)||void 0===e||e.querySelectorAll("iframe").forEach((function(e){e.remove()}))},e.prototype.createAdContainer=function(){var e=this._config.adContainerParent,t=e?(0,c.getEl)(e):this._player.getElement(),n=document.createElement("div");return n.className=d.AD_CLASSNAMES.container,t.appendChild(n),n},e.prototype.createLibraryLoader=function(){var e=new u.LibraryLoader({getIsLibraryLoaded:this.isLibraryLoaded,libraryName:"Google IMA Client-Side SDK",libraryUrl:d.IMA_SDK_URL,lazyLoadLibrary:this._config.lazyLoadLibrary});return this._clientSideImaEventProxy.getEventProxy().addEventSource(f.ClientSideImaEvents.LIBRARY_STATE_CHANGED,e.onLibraryStateChanged),e},e.prototype.createPlayerManagerChangedSource=function(){var e=new a.BehaviorSubject({}),t=e.pipe((0,o.skip)(1),(0,o.share)());return this._clientSideImaEventProxy.getEventProxy().addEventSource(f.ClientSideImaEvents.PLAYER_MANAGER_CHANGED,t),{source:e,changedEvent:t}},e.prototype.destroy=function(){var e;v.debug("Destroying ClientSideImaPlugin."),this.reset(),this._imaSdkEventProxy.destroy(),this._clientSideImaEventProxy.destroy(),null===(e=this._adContainer)||void 0===e||e.remove(),document.removeEventListener("visibilitychange",this.handleVisibilityChange),window.removeEventListener("resize",this.handleResize)},e.prototype.getAdsRequest=function(e){var t=this.getVideoElement(),n=e.adTagUrl,r=e.contentKeywords,i=e.contentTitle,a=e.liveStreamPrefetchSeconds,o=new this.google.ima.AdsRequest;return o.adTagUrl=n,o.contentKeywords=r,o.contentTitle=i,o.linearAdSlotWidth=t.clientWidth,o.linearAdSlotHeight=t.clientHeight,o.nonLinearAdSlotWidth=t.clientWidth,o.nonLinearAdSlotHeight=t.clientHeight/3,o.contentDuration=t.duration,o.setAdWillAutoPlay(!0),o.setAdWillPlayMuted(this._player.getIsMuted()),null!=a&&(o.liveStreamPrefetchSeconds=a),o},e.prototype.getVideoElement=function(){var e=this._player.sourceHandler.getElement();if(e instanceof HTMLVideoElement)return e;throw new Error("Video element not found")},e.prototype.getVpaidMode=function(){switch(this._config.vpaidMode){case f.VpaidMode.DISABLED:return this.google.ima.ImaSdkSettings.VpaidMode.DISABLED;case f.VpaidMode.ENABLED:return this.google.ima.ImaSdkSettings.VpaidMode.ENABLED;case f.VpaidMode.INSECURE:return this.google.ima.ImaSdkSettings.VpaidMode.INSECURE}},e.prototype.handleAdClick=function(){this._config.pauseOnClick&&(this._isAdClicked=!0,this._player.pause())},e.prototype.handleAdError=function(e){var t;v.error(e.getError().toString()),null===(t=this._adsManager)||void 0===t||t.destroy()},e.prototype.handleAdLoaded=function(e,t){v.debug("AdLoaded");var n=t.getAd();(null==n?void 0:n.isLinear())||this._player.play()},e.prototype.handleAdsManagerLoaded=function(e){var t,n;v.debug("AdsManager loaded");var r=this.getVideoElement(),i=this.getAdContainer();if(!i)throw new Error("Ad Container not found.");var a=new this.google.ima.AdsRenderingSettings;a.restoreCustomPlaybackStateOnAdBreakComplete=!0,a.enablePreloading=this._config.enablePreloading,null===(t=this._disconnectAdsManager)||void 0===t||t.call(this),this._adsManager=e.getAdsManager(r,a),this._disconnectAdsManager=this._imaSdkEventProxy.connectAdsManager(this._adsManager,this.google),null===(n=this.getPlayerManager())||void 0===n||n.destroy();var o=new p.PlayerManager({adContainer:i,adsManager:this._adsManager,config:this._config,csImaEventProxy:this._clientSideImaEventProxy,imaSdkEventProxy:this._imaSdkEventProxy,player:this._player});this._playerManagerChangedSource.next({playerManager:o})},e.prototype.handleLoadRequest=function(e){var t=null==e?void 0:e.customData;(0,g.isCustomDataWithImaRequest)(t)&&(v.info("Found IMA request in `mediaInfo`, initialising Ad playback."),this.load(t.clientSideAds))},e.prototype.handleResize=function(){if(this._adsManager){var e=this.getVideoElement(),t=e.clientHeight,n=e.clientWidth,r=this.google.ima.ViewMode,i=this._player.getIsFullscreenActive()?r.FULLSCREEN:r.NORMAL;this._adsManager.resize(n,t,i)}},e.prototype.handleVisibilityChange=function(){!document.hidden&&this.getIsPlayingBreak()&&this._player.getIsPaused()&&this._isAdClicked&&(v.debug("Tab is focused during an Ad, resuming playback"),this._isAdClicked=!1,this._player.play())},e.prototype.initEventSubscriptions=function(){var e=this;this._player.on(s.EventTypes.HANDLER_DESTROYING,this.reset),this._player.on(s.EventTypes.DESTROYING,this.destroy),this._player.on(s.EventTypes.CAST_STATE_CHANGE,(function(t,n){n.castState===s.CastStates.CONNECTED&&e.reset()})),this._player.on(s.EventTypes.LOAD_REQUEST,(function(t,n){var r=n.mediaInfo;e.reset(),e.handleLoadRequest(r)})),this._config.pauseOnClick&&this._config.resumeOnTabFocus&&document.addEventListener("visibilitychange",this.handleVisibilityChange),window.addEventListener("resize",this.handleResize),this._player.on(s.EventTypes.FULLSCREEN_CHANGE,this.handleResize),this._imaSdkEventProxy.on(m.ImaEventTypes.LOADED,this.handleAdLoaded),this._imaSdkEventProxy.on(m.ImaEventTypes.AD_ERROR,(function(t,n){return e.handleAdError(n)})),this._imaSdkEventProxy.on(m.ImaEventTypes.CLICK,this.handleAdClick)},e.prototype.isLibraryLoaded=function(){var e;return Boolean(null===(e=window.google)||void 0===e?void 0:e.ima.AdsLoader)},e.prototype.load=function(e){var t;return r.__awaiter(this,void 0,void 0,(function(){var n,i,a,o=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(this._player.getCastState()===s.CastStates.CONNECTED)return v.debug("Cast connected - will not initialise Ad playback."),[2];r.label=1;case 1:return r.trys.push([1,8,,9]),(0,g.isUsingCustomPlaybackForIos)(this._config)?(v.info("Using custom playback in iOS Safari"),[4,Promise.all([this.loadLibrary(),this.waitForElementCreated()])]):[3,4];case 2:return r.sent(),[4,this.requestAds(e)];case 3:return r.sent(),document.body.addEventListener("click",(function(){var e;v.info("Initialise AdDisplayContainer container"),null===(e=o._adDisplayContainer)||void 0===e||e.initialize(),o._adDisplayContainerInitialised=!0}),{once:!0}),n=this._player.createSubscriptionContext().on(s.EventTypes.PLAYING,(function(){o._adDisplayContainerInitialised?(n.unsubscribe(),o.startPlayingAds()):(v.info("AdDisplayContainer not initialised. Pausing video to elicit interaction"),o._player.pause())})),[3,7];case 4:return[4,Promise.all([this.loadLibrary(),this.waitForPlaying()])];case 5:return r.sent(),[4,this.requestAds(e)];case 6:r.sent(),null===(t=this._adDisplayContainer)||void 0===t||t.initialize(),this.startPlayingAds(),r.label=7;case 7:return[3,9];case 8:return i=r.sent(),a=(0,g.isImaError)(i)?i.toString():(0,c.errorToString)(i),v.error("AdsManager could not be started",a),[3,9];case 9:return[2]}}))}))},e.prototype.reset=function(){var e,t,n,r,i;v.debug("Resetting ClientSideImaPlugin."),this._isAdClicked=!1,null===(e=this.getPlayerManager())||void 0===e||e.destroy(),this._playerManagerChangedSource.next({}),null===(t=this._adDisplayContainer)||void 0===t||t.destroy(),null===(n=this._adsLoader)||void 0===n||n.destroy(),null===(r=this._adsManager)||void 0===r||r.destroy(),this._adDisplayContainer=void 0,this._adsLoader=void 0,this._adsManager=void 0,null===(i=this._disconnectAdsManager)||void 0===i||i.call(this),this._disconnectAdsManager=void 0,this._adDisplayContainerInitialised=void 0,this.clearAdIframe()},e.prototype.waitForElementCreated=function(){var e=this;return this._player.sourceHandler.getElement()?Promise.resolve():new Promise((function(t){e._player.once(s.EventTypes.HANDLER_ELEMENT_CREATED,(function(){return t()}))}))},e.prototype.waitForPlaying=function(){var e=this;return new Promise((function(t){e._player.once(s.EventTypes.PLAYING,(function(){return t()}))}))},e}();t.ClientSideImaPlugin=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AD_CLASSNAMES=void 0,t.AD_CLASSNAMES={container:"ds-ad-container ds-ad-container--csai",adPlaying:"ds-ad-playing"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=void 0;var r=n(73);t.DEFAULT_CONFIG={delayAdPlaybackUntilFirstPlay:!0,disableCustomPlaybackForIOS10Plus:!1,enablePreloading:!0,lazyLoadLibrary:!0,muteLiveOnAdPlayback:!0,pauseOnClick:!0,resumeOnTabFocus:!0,vpaidMode:r.VpaidMode.ENABLED,withControlAdPlayerMiddleware:!0}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ClientSideImaEvents=void 0,(r=t.ClientSideImaEvents||(t.ClientSideImaEvents={})).ALL_ADS_COMPLETED="alladscompleted",r.BREAK_STATUS_CHANGED="breakstatuschanged",r.CUE_POINTS_CHANGED="cuepointschanged",r.IS_FULLSCREEN_ALLOWED_CHANGED="isfullscreenallowedchange",r.IS_PICTURE_IN_PICTURE_ALLOWED_CHANGED="ispictureinpictureallowedchanged",r.IS_PLAYING_BREAK_CHANGED="isplayingbreakchanged",r.IS_SKIPPABLE_STATE_CHANGED="isskippablestatechanged",r.LIBRARY_STATE_CHANGED="librarystatechanged",r.PLAYER_MANAGER_CHANGED="playermanagerchanged"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.VpaidMode=void 0,(r=t.VpaidMode||(t.VpaidMode={})).ENABLED="ENABLED",r.INSECURE="INSECURE",r.DISABLED="DISABLED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMA_SDK_URL=void 0,t.IMA_SDK_URL="https://imasdk.googleapis.com/js/sdkloader/ima3.js"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(802),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.controlAdPlayerMiddleware=void 0;var r=n(0),i=n(113),a=n(12),o=n(15),s=n(8),u=n(144);t.controlAdPlayerMiddleware=function(e,t){var n=e.getPluginByType(u.ClientSideImaPlugin);if(!n||t.hasType(s.HandlerTypes.CHROMECAST))return{};var l=function(){return n.getPlayerManager()},c=function(){return n.getIsPlayingLinearBreak()},d=function(){return Boolean(l())},f=n.onPlayerManagerChanged.pipe((0,o.switchMap)((function(e){var t,n=e.playerManager;return null!==(t=null==n?void 0:n.onIsPlayingBreak.pipe((0,o.map)((function(e){return{isPlayingBreak:e&&(null==n?void 0:n.getIsCurrentAdLinear()),playerManager:n}}))))&&void 0!==t?t:(0,a.of)({isPlayingBreak:!1})})),(0,o.distinctUntilChanged)()),h=(0,i.createSelector)((function(e){return e}),(function(e){return e.onDurationChange}),(function(e,t){return(0,a.merge)(t.pipe((0,o.filter)((function(){return!d()}))),f.pipe((0,o.switchMap)((function(n){var r,i,o,s,u,c,d=e.getSeekableRange();return n.isPlayingBreak?(0,a.of)({duration:(null!==(i=null===(r=l())||void 0===r?void 0:r.getDuration())&&void 0!==i?i:0)+e.getDuration(),isLive:e.getIsLive(),seekableDuration:(null!==(s=null===(o=l())||void 0===o?void 0:o.getSeekableDuration())&&void 0!==s?s:0)+e.getSeekableDuration(),seekableRange:{start:d.start,end:(null!==(c=null===(u=l())||void 0===u?void 0:u.getSeekableRange().end)&&void 0!==c?c:0)+d.end}}):(0,a.merge)(t,(0,a.of)({duration:e.getDuration(),isLive:e.getIsLive(),seekableDuration:e.getSeekableDuration(),seekableRange:d}))})),(0,o.share)()))})),p=(0,i.createSelector)((function(e){return e}),(function(e){return e.onPause}),(function(e,t){return(0,a.merge)(t.pipe((0,o.filter)((function(){return!d()}))),n.onPlayerManagerChanged.pipe((0,o.switchMap)((function(e){var t=e.playerManager;return t?t.onPostRollEnd:a.NEVER}))),f.pipe((0,o.switchMap)((function(r){return r.isPlayingBreak?r.playerManager.onPause:t.pipe((0,o.filter)((function(){return!(n.getHasPostRoll()&&e.getHasEnded())})))}))))})),m=(0,i.createSelector)((function(e){return e.onPlay}),(function(e){return(0,a.merge)(e.pipe((0,o.filter)((function(){return!d()}))),f.pipe((0,o.switchMap)((function(t){return t.isPlayingBreak?t.playerManager.onPlay:e}))))})),g=(0,i.createSelector)((function(e){return e.onPlaying}),(function(e){return(0,a.merge)(e.pipe((0,o.filter)((function(){return!d()}))),f.pipe((0,o.switchMap)((function(t){return t.isPlayingBreak?t.playerManager.onPlaying:e}))))})),v=(0,i.createSelector)((function(e){return e.onEnded}),(function(e){return(0,a.merge)(e.pipe((0,o.filter)((function(){return!n.getHasPostRoll()}))),n.onPlayerManagerChanged.pipe((0,o.switchMap)((function(e){var t=e.playerManager;return t?t.onPostRollEnd:a.NEVER}))))})),y=(0,i.createSelector)((function(e){return e.onTimeUpdate}),(function(e){return(0,a.merge)(e.pipe((0,o.filter)((function(){return!d()}))),f.pipe((0,o.switchMap)((function(t){return t.isPlayingBreak?t.playerManager.onTimeUpdate.pipe((0,o.map)((function(e){return{currentTime:e.currentTime+t.playerManager.getTimeOffset(),isAtLiveEdge:e.isAtLiveEdge}}))):e}))))})),_=(0,i.createSelector)((function(e){return e.onVolumeChange}),(function(e){return(0,a.merge)(e.pipe((0,o.filter)((function(){return!d()}))),f.pipe((0,o.switchMap)((function(t){return t.isPlayingBreak?t.playerManager.onVolumeChange:e}))))})),b=(0,i.createSelector)((function(e){return e.onWaiting}),(function(e){return(0,a.merge)(e.pipe((0,o.filter)((function(){return!d()}))),f.pipe((0,o.switchMap)((function(t){return t.isPlayingBreak?t.playerManager.onWaiting:e}))))}));return{get:function(e,t){switch(t){case"getCurrentTime":return function(){var t=l();return t&&c()?t.getCurrentTime()+t.getTimeOffset():e.getCurrentTime()};case"getDuration":return function(){var t=l();return t&&c()?t.getDuration()+e.getDuration():e.getDuration()};case"getHasEnded":return function(){var t=l()&&c();return!t&&!(!t&&n.getHasPostRoll())&&e.getHasEnded()};case"getIsMuted":return function(){var t=l();return t&&c()?t.getIsMuted():e.getIsMuted()};case"getIsPaused":return function(){var t=l();return t&&c()?t.getIsPaused():(!e.getHasEnded()||!n.getHasPostRoll())&&e.getIsPaused()};case"getIsPlaying":return function(){var t=l();return t&&c()?t.getIsPlaying():e.getIsPlaying()};case"getSeekableDuration":return function(){var t=l();return t&&c()?t.getSeekableDuration()+e.getSeekableDuration():e.getSeekableDuration()};case"getSeekableRange":return function(){var t=l();return t&&c()?{start:e.getSeekableRange().start,end:t.getSeekableRange().end+e.getSeekableRange().end}:e.getSeekableRange()};case"getVolume":return function(){var t=l();return t&&c()?t.getVolume():e.getVolume()};case"onDurationChange":return h(e);case"onEnded":return v(e);case"onPause":return p(e);case"onPlay":return m(e);case"onPlaying":return g(e);case"onTimeUpdate":return y(e);case"onVolumeChange":return _(e);case"onWaiting":return b(e);case"play":return function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){return[2,(t=l())&&c()?t.play():e.play()]}))}))};case"pause":return function(){var t=l();return t&&c()?t.pause():e.pause()};case"setIsMuted":return function(t){var r=l();return c()&&n.getConfig().muteLiveOnAdPlayback&&e.getIsLive()||e.setIsMuted(t),null==r?void 0:r.setIsMuted(t)};case"setVolume":return function(t){var n=l();return null==n||n.setVolume(t),e.setVolume(t)};case"nudgeVolume":return function(t){var n=l();return null==n||n.nudgeVolume(t),e.nudgeVolume(t)};default:return e[t]}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(804),t),r.__exportStar(n(208),t),r.__exportStar(n(810),t),r.__exportStar(n(812),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(805),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientSideImaEventProxy=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(61),o=n(16),s=n(73),u=new o.LoggerFileNameDecorator("ClientSideImaEventProxy"),l=function(){function e(){(0,i.default)(this),this._eventProxy=new a.EventProxy({eventTypes:r.__assign({},s.ClientSideImaEvents)}),this.createSubscriptionContext=this._eventProxy.createSubscriptionContext,this.off=this._eventProxy.off,this.on=this._eventProxy.on,this.once=this._eventProxy.once}return e.prototype.destroy=function(){u.debug("Destroying event proxy."),this._eventProxy.destroy()},e.prototype.getEventProxy=function(){return this._eventProxy},e}();t.ClientSideImaEventProxy=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CuePointsManager=void 0;var r=n(0).__importDefault(n(9)),i=n(12),a=n(8),o=n(16),s=n(73),u=n(106),l=new o.LoggerFileNameDecorator("ClientSideImaCuePointsManager"),c=function(){function e(e){(0,r.default)(this);var t=e.adsManager,n=e.csImaEventProxy,i=e.imaSdkEventProxy,a=e.player;this._adsManager=t,this._csImaEventProxy=n,this._imaSdkEventProxy=i,this._player=a,this._adDurations=[],this._adPlayed=[],this._cuePointsChangedSource=this.createCuePointsChangedSource(),this.attachListeners(),this.setInitialCuePoints()}return e.prototype.getCuePointByTimeOffset=function(e){var t,n=this._adsManager.getCuePoints().indexOf(e);return null===(t=this._cuePoints)||void 0===t?void 0:t[n]},e.prototype.getCuePoints=function(){return this._cuePoints},e.prototype.attachListeners=function(){var e=this;l.debug("Attaching listeners."),this._imaSdkEventProxy.on(u.ImaEventTypes.STARTED,(function(t,n){var r=n.getAd();if(r){var i=e._adsManager.getCuePoints().indexOf(r.getAdPodInfo().getTimeOffset());e._adPlayed[i]=!0,e._adDurations[i]=r.getDuration();var a=e.setCuePoints();e._cuePointsChangedSource.next({cuePoints:a})}})),this._imaSdkEventProxy.on(u.ImaEventTypes.COMPLETE,(function(t,n){var r=n.getAd();if(r){var i=e._adsManager.getCuePoints().indexOf(r.getAdPodInfo().getTimeOffset());e._adDurations[i]=0;var a=e.setCuePoints();e._cuePointsChangedSource.next({cuePoints:a})}})),this._player.on(a.EventTypes.DURATION_CHANGE,(function(){var t=e.setCuePoints();e._cuePointsChangedSource.next({cuePoints:t})}))},e.prototype.createCuePointsChangedSource=function(){var e=new i.Subject;return this._csImaEventProxy.getEventProxy().addEventSource(s.ClientSideImaEvents.CUE_POINTS_CHANGED,e),e},e.prototype.setCuePoints=function(){var e=this;return this._cuePoints=this._adsManager.getCuePoints().map((function(t,n){var r,i,a=-1===t,o=null!==(r=e._adDurations[n])&&void 0!==r?r:0,s=t;return a&&(s=e._player.getDuration()-o),{end:s+o,played:null!==(i=e._adPlayed[n])&&void 0!==i&&i,start:s}})),this._cuePoints},e.prototype.setInitialCuePoints=function(){this._player.getIsLive()||this.setCuePoints()},e}();t.CuePointsManager=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImaEventTypes=void 0;var r=n(0),i=n(209);t.ImaEventTypes=r.__assign(r.__assign({},i.AdErrorEventTypes),i.AdEventTypes)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdErrorEventTypes=void 0,(t.AdErrorEventTypes||(t.AdErrorEventTypes={})).AD_ERROR="AD_ERROR"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AdEventTypes=void 0,(r=t.AdEventTypes||(t.AdEventTypes={})).AD_BREAK_READY="AD_BREAK_READY",r.AD_BUFFERING="AD_BUFFERING",r.AD_METADATA="AD_METADATA",r.AD_PROGRESS="AD_PROGRESS",r.ALL_ADS_COMPLETED="ALL_ADS_COMPLETED",r.CLICK="CLICK",r.COMPLETE="COMPLETE",r.CONTENT_PAUSE_REQUESTED="CONTENT_PAUSE_REQUESTED",r.CONTENT_RESUME_REQUESTED="CONTENT_RESUME_REQUESTED",r.DURATION_CHANGE="DURATION_CHANGE",r.FIRST_QUARTILE="FIRST_QUARTILE",r.IMPRESSION="IMPRESSION",r.INTERACTION="INTERACTION",r.LINEAR_CHANGED="LINEAR_CHANGED",r.LOADED="LOADED",r.LOG="LOG",r.MIDPOINT="MIDPOINT",r.PAUSED="PAUSED",r.RESUMED="RESUMED",r.SKIPPABLE_STATE_CHANGED="SKIPPABLE_STATE_CHANGED",r.SKIPPED="SKIPPED",r.STARTED="STARTED",r.THIRD_QUARTILE="THIRD_QUARTILE",r.USER_CLOSE="USER_CLOSE",r.VOLUME_CHANGED="VOLUME_CHANGED",r.VOLUME_MUTED="VOLUME_MUTED",r.VIDEO_CLICKED="VIDEO_CLICKED",r.VIDEO_ICON_CLICKED="VIDEO_ICON_CLICKED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(811),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImaSdkEventProxy=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(61),s=n(16),u=n(106),l=n(209),c=new s.LoggerFileNameDecorator("ClientSideImaSdkEventProxy"),d=function(){function e(){(0,i.default)(this),this._eventProxy=new o.EventProxy({eventTypes:r.__assign({},u.ImaEventTypes)}),this.createSubscriptionContext=this._eventProxy.createSubscriptionContext,this.off=this._eventProxy.off,this.on=this._eventProxy.on,this.once=this._eventProxy.once}return e.prototype.connectAdsManager=function(e,t){var n=this;c.debug("Connecting Ads Manager.");var i=Object.keys(l.AdEventTypes).map((function(e){return l.AdEventTypes[e]})).map((function(n){var r=(0,a.fromEventPattern)((function(r){return e.addEventListener(t.ima.AdEvent.Type[n],r)}),(function(r){return e.removeEventListener(t.ima.AdEvent.Type[n],r)}));return[n,r]})),o=Object.keys(l.AdErrorEventTypes).map((function(e){return l.AdErrorEventTypes[e]})).map((function(n){var r=(0,a.fromEventPattern)((function(r){return e.addEventListener(t.ima.AdErrorEvent.Type[n],r)}),(function(r){return e.removeEventListener(t.ima.AdErrorEvent.Type[n],r)}));return[n,r]}));return i.forEach((function(e){var t=r.__read(e,2),i=t[0],a=t[1];return n._eventProxy.addEventSource(i,a)})),o.forEach((function(e){var t=r.__read(e,2),i=t[0],a=t[1];return n._eventProxy.addEventSource(i,a)})),function(){i.forEach((function(e){var t=r.__read(e,2),i=t[0],a=t[1];n._eventProxy.removeEventSource(i,a)})),o.forEach((function(e){var t=r.__read(e,2),i=t[0],a=t[1];n._eventProxy.removeEventSource(i,a)}))}},e.prototype.destroy=function(){c.debug("Destroying event proxy."),this._eventProxy.destroy()},e.prototype.getEventProxy=function(){return this._eventProxy},e}();t.ImaSdkEventProxy=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(813),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerManager=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(15),s=n(8),u=n(16),l=n(10),c=n(207),d=n(73),f=n(210),h=n(208),p=n(106),m=new u.LoggerFileNameDecorator("ClientSideImaPlayerManager"),g=function(){function e(e){var t;this._onDurationChange=a.NEVER,this._onPause=a.NEVER,this._onPlay=a.NEVER,this._onPlaying=a.NEVER,this._onTimeUpdate=a.NEVER,this._onVolumeChange=a.NEVER,this._onWaiting=a.NEVER,(0,i.default)(this);var n=e.adContainer,r=e.adsManager,o=e.config,s=e.csImaEventProxy,u=e.player,l=e.imaSdkEventProxy;this._adContainer=n,this._adsManager=r,this._config=o,this._csImaEventProxy=s,this._cuePointsManager=new h.CuePointsManager({player:u,csImaEventProxy:s,adsManager:r,imaSdkEventProxy:l}),this._imaSubscriptionContext=l.createSubscriptionContext(),this._contentPlayer=u,this._playerSubscriptionContext=u.createSubscriptionContext(),this._emitPostRollEnded=!1,this._isBuffering=!1,this._isDiscardAdBreakCalled=!1,this._isMuted=null!==(t=this._contentPlayer.getConfig().muted)&&void 0!==t&&t,this._isPaused=!0,this._volumeBeforeMuted=1,this._isUsingCustomPlaybackForIos=(0,f.isUsingCustomPlaybackForIos)(this._config),this._allAdsCompletedSource=this.createAllAdsCompletedSource(),this._breakStatusSource=this.createBreakStatusChangeSource(),this._isFullscreenAllowedSource=this.createIsFullscreenAllowedChangeSource(),this._isPictureInPictureAllowedSource=this.createIsPictureInPictureAllowedChangeSource(),this._isPlayingBreakSource=this.createIsPlayingBreakChangeSource(),this._isSkippableStateSource=this.createIsSkippableStateChangeSource(),this._postRollEndSource=this.createPostRollEndSource(),this.attachListeners(),this.configureEvents()}return Object.defineProperty(e.prototype,"onDurationChange",{get:function(){return this._onDurationChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onIsPlayingBreak",{get:function(){return this._isPlayingBreakSource},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onPause",{get:function(){return this._onPause},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onPlay",{get:function(){return this._onPlay},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onPlaying",{get:function(){return this._onPlaying},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onPostRollEnd",{get:function(){return this._postRollEndSource.pipe((0,o.skip)(1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTimeUpdate",{get:function(){return this._onTimeUpdate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onVolumeChange",{get:function(){return this._onVolumeChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onWaiting",{get:function(){return this._onWaiting},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){m.debug("Destroying"),this._breakStatusSource.next({}),this._isPlayingBreakSource.next(!1),this._breakStatusSource.complete(),this._isPlayingBreakSource.complete(),this._imaSubscriptionContext.unsubscribe(),this._playerSubscriptionContext.unsubscribe(),this._emitPostRollEnded=!1,this._isBuffering=!1,this._isDiscardAdBreakCalled=!1,this._isPaused=!0,this._volumeBeforeMuted=1},e.prototype.discardAdBreak=function(){m.debug("Issue request to discard the next/current ad break"),this._adsManager.discardAdBreak(),this._currentAd&&(this._isDiscardAdBreakCalled=!0)},e.prototype.getCuePointsManager=function(){return this._cuePointsManager},e.prototype.getCurrentAd=function(){return this._currentAd},e.prototype.getCurrentTime=function(){return this.getDuration()-this._adsManager.getRemainingTime()},e.prototype.getDuration=function(){var e,t;return null!==(t=null===(e=this._currentAd)||void 0===e?void 0:e.getDuration())&&void 0!==t?t:0},e.prototype.getIsCurrentAdLinear=function(){var e,t;return null!==(t=null===(e=this._currentAd)||void 0===e?void 0:e.isLinear())&&void 0!==t&&t},e.prototype.getIsMuted=function(){return this._isMuted},e.prototype.getIsPaused=function(){return this._isPaused},e.prototype.getIsPlaying=function(){return!this._isPaused&&!this._isBuffering},e.prototype.getIsPlayingBreak=function(){return this._isPlayingBreakSource.getValue()},e.prototype.getSeekableDuration=function(){var e=this.getSeekableRange(),t=e.start,n=e.end;return(0,l.clip)(n-t)},e.prototype.getSeekableRange=function(){return this._currentAd?{start:0,end:this._currentAd.getDuration()}:{start:0,end:0}},e.prototype.getTimeOffset=function(){var e;if(this._currentAd){var t=this._currentAd.getAdPodInfo().getTimeOffset(),n=this._cuePointsManager.getCuePointByTimeOffset(t);return null!==(e=null==n?void 0:n.start)&&void 0!==e?e:0}return 0},e.prototype.getVolume=function(){return this._adsManager.getVolume()},e.prototype.nudgeVolume=function(e){this.getIsMuted()?this._volumeBeforeMuted=this._volumeBeforeMuted+e:this.setVolume(this.getVolume()+e)},e.prototype.pause=function(){return this._adsManager.pause()},e.prototype.play=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return[2,this._adsManager.resume()]}))}))},e.prototype.setIsMuted=function(e){e?(this._volumeBeforeMuted=this.getVolume(),this.setVolume(0)):this.setVolume(this._volumeBeforeMuted),this._isMuted=e},e.prototype.setVolume=function(e){this._adsManager.setVolume((0,l.clamp)(e,0,1))},e.prototype.activateContentPlayer=function(){this._contentPlayer.getIsLive()&&this._config.muteLiveOnAdPlayback?(m.debug("Unmuting content player"),this.setContentPlayerMuted(this.getIsMuted())):(m.debug("Playing content player"),this._contentPlayer.play())},e.prototype.attachListeners=function(){var e=this;this._imaSubscriptionContext.on(p.ImaEventTypes.STARTED,(function(){e.canPictureInPictureStayActive()||e._isPictureInPictureAllowedSource.next(!1),e._isUsingCustomPlaybackForIos&&(m.info("Using custom playback, emitting disable fullscreen mode"),e._isFullscreenAllowedSource.next(!1),e._contentPlayer.getIsFullscreenActive()&&(m.info("Using custom playback, exiting fullscreen mode"),e._contentPlayer.exitFullscreen()))})),this._imaSubscriptionContext.on(p.ImaEventTypes.STARTED,(function(t,n){var r,i;e._currentAd=null!==(r=n.getAd())&&void 0!==r?r:void 0,-1===(null===(i=e._currentAd)||void 0===i?void 0:i.getAdPodInfo().getPodIndex())&&(m.debug("Content ended, post roll ended event will be emitted"),e._emitPostRollEnded=!0),e._isPlayingBreakSource.next(!0),e.handleAdBreakStarted()})),this._imaSubscriptionContext.on([p.ImaEventTypes.COMPLETE,p.ImaEventTypes.ALL_ADS_COMPLETED],this.handleAdComplete),this._imaSubscriptionContext.on(p.ImaEventTypes.ALL_ADS_COMPLETED,(function(){e._allAdsCompletedSource.next({})})),this._imaSubscriptionContext.on(p.ImaEventTypes.CONTENT_PAUSE_REQUESTED,this.handleContentPauseRequested),this._imaSubscriptionContext.on(p.ImaEventTypes.CONTENT_RESUME_REQUESTED,this.handleContentResumeRequested),this._imaSubscriptionContext.on(p.ImaEventTypes.SKIPPABLE_STATE_CHANGED,(function(){e._isSkippableStateSource.next(e._adsManager.getAdSkippableState())})),this._imaSubscriptionContext.on(p.ImaEventTypes.AD_PROGRESS,(function(t,n){var r=n.getAdData(),i=r.adPosition,a=r.currentTime,o=r.duration,s={breakStatus:{breakClipCount:r.totalAds,breakClipIndex:i-1,currentBreakClipDuration:o,currentBreakClipTime:a}};e._isPlayingBreakSource.value?e._breakStatusSource.next(s):m.debug("Delaying break status change until ad playback begins.")}))},e.prototype.canPictureInPictureStayActive=function(){return l.browser.isSafari&&l.browser.isMobile&&!this._config.disableCustomPlaybackForIOS10Plus},e.prototype.configureEvents=function(){var e=this;this._onTimeUpdate=(0,a.fromEventPattern)((function(t){return e._adsManager.addEventListener(window.google.ima.AdEvent.Type.AD_PROGRESS,t)}),(function(t){return e._adsManager.removeEventListener(window.google.ima.AdEvent.Type.AD_PROGRESS,t)})).pipe((0,o.map)((function(e){return{currentTime:e.getAdData().currentTime,isAtLiveEdge:!1}}))),this._onTimeUpdate.subscribe((function(){e._isPaused=!1,e._isBuffering=!1})),this._onDurationChange=(0,a.merge)((0,a.fromEventPattern)((function(t){return e._adsManager.addEventListener(window.google.ima.AdEvent.Type.STARTED,t)}),(function(t){return e._adsManager.removeEventListener(window.google.ima.AdEvent.Type.STARTED,t)})).pipe((0,o.map)((function(){var t=e.getDuration();return{duration:t,isLive:!1,seekableDuration:t,seekableRange:e.getSeekableRange()}}))),(0,a.fromEventPattern)((function(t){return e._adsManager.addEventListener(window.google.ima.AdEvent.Type.COMPLETE,t)}),(function(t){return e._adsManager.removeEventListener(window.google.ima.AdEvent.Type.COMPLETE,t)})).pipe((0,o.map)((function(){return{duration:0,isLive:!1,seekableDuration:0,seekableRange:{start:0,end:0}}})))),this._onDurationChange.subscribe((function(){e._isPaused=!1,e._isBuffering=!1})),this._onPause=(0,a.fromEventPattern)((function(t){return e._adsManager.addEventListener(window.google.ima.AdEvent.Type.PAUSED,t)}),(function(t){return e._adsManager.removeEventListener(window.google.ima.AdEvent.Type.PAUSED,t)})).pipe((0,o.map)((function(){return{}}))),this._onPause.subscribe((function(){e._isPaused=!0})),this._onPlay=(0,a.fromEventPattern)((function(t){return e._adsManager.addEventListener(window.google.ima.AdEvent.Type.RESUMED,t)}),(function(t){return e._adsManager.removeEventListener(window.google.ima.AdEvent.Type.RESUMED,t)})).pipe((0,o.map)((function(){return{}}))),this._onPlay.subscribe((function(){e._isPaused=!1,e._isBuffering=!1})),this._onPlaying=(0,a.fromEventPattern)((function(t){return e._adsManager.addEventListener(window.google.ima.AdEvent.Type.RESUMED,t)}),(function(t){return e._adsManager.removeEventListener(window.google.ima.AdEvent.Type.RESUMED,t)})).pipe((0,o.map)((function(){return{}}))),this._onPlaying.subscribe((function(){e._isPaused=!1,e._isBuffering=!1})),this._onVolumeChange=(0,a.fromEventPattern)((function(t){return e._adsManager.addEventListener(window.google.ima.AdEvent.Type.VOLUME_CHANGED,t)}),(function(t){return e._adsManager.removeEventListener(window.google.ima.AdEvent.Type.VOLUME_CHANGED,t)})).pipe((0,o.map)((function(t){return{isMuted:e.getIsMuted(),volume:e.getVolume()}}))),this._onWaiting=(0,a.fromEventPattern)((function(t){return e._adsManager.addEventListener(window.google.ima.AdEvent.Type.AD_BUFFERING,t)}),(function(t){return e._adsManager.removeEventListener(window.google.ima.AdEvent.Type.AD_BUFFERING,t)})).pipe((0,o.map)((function(){return{}}))),this._onWaiting.subscribe((function(){e._isBuffering=!0}))},e.prototype.createAllAdsCompletedSource=function(){var e=new a.BehaviorSubject({});return this._csImaEventProxy.getEventProxy().addEventSource(d.ClientSideImaEvents.ALL_ADS_COMPLETED,e.pipe((0,o.skip)(1))),e},e.prototype.createBreakStatusChangeSource=function(){var e=new a.BehaviorSubject({});return this._csImaEventProxy.getEventProxy().addEventSource(d.ClientSideImaEvents.BREAK_STATUS_CHANGED,e.pipe((0,o.skip)(1),(0,o.distinctUntilChanged)((function(e,t){return(0,f.compareBreakStatusEvents)(e.breakStatus,t.breakStatus)})),(0,o.share)())),e},e.prototype.createIsFullscreenAllowedChangeSource=function(){var e=new a.BehaviorSubject(!1);return this._csImaEventProxy.getEventProxy().addEventSource(d.ClientSideImaEvents.IS_FULLSCREEN_ALLOWED_CHANGED,e.pipe((0,o.skip)(1),(0,o.map)((function(e){return{isFullscreenAllowed:e}})),(0,o.distinctUntilChanged)((function(e,t){return e.isFullscreenAllowed===t.isFullscreenAllowed})),(0,o.share)())),e},e.prototype.createIsPictureInPictureAllowedChangeSource=function(){var e=new a.BehaviorSubject(!1);return this._csImaEventProxy.getEventProxy().addEventSource(d.ClientSideImaEvents.IS_PICTURE_IN_PICTURE_ALLOWED_CHANGED,e.pipe((0,o.skip)(1),(0,o.map)((function(e){return{isPictureInPictureAllowed:e}})),(0,o.distinctUntilChanged)((function(e,t){return e.isPictureInPictureAllowed===t.isPictureInPictureAllowed})),(0,o.share)())),e},e.prototype.createIsPlayingBreakChangeSource=function(){var e=new a.BehaviorSubject(!1);return this._csImaEventProxy.getEventProxy().addEventSource(d.ClientSideImaEvents.IS_PLAYING_BREAK_CHANGED,e.pipe((0,o.skip)(1),(0,o.map)((function(e){return{isPlayingBreak:e}})),(0,o.distinctUntilChanged)((function(e,t){return e.isPlayingBreak===t.isPlayingBreak})),(0,o.share)())),e},e.prototype.createIsSkippableStateChangeSource=function(){var e=new a.BehaviorSubject(!1);return this._csImaEventProxy.getEventProxy().addEventSource(d.ClientSideImaEvents.IS_SKIPPABLE_STATE_CHANGED,e.pipe((0,o.skip)(1),(0,o.map)((function(e){return{isAdSkippable:e}})),(0,o.distinctUntilChanged)((function(e,t){return e.isAdSkippable===t.isAdSkippable})))),e},e.prototype.createPostRollEndSource=function(){return new a.BehaviorSubject({})},e.prototype.deactivateContentPlayer=function(){this._contentPlayer.getIsLive()&&this._config.muteLiveOnAdPlayback?(m.debug("Muting content player"),this.setContentPlayerMuted(!0)):(m.debug("Pausing content player"),this._contentPlayer.pause())},e.prototype.handleAdBreakStarted=function(){m.debug("AdBreak Started"),this._contentPlayer.getElement().classList.add(c.AD_CLASSNAMES.adPlaying),this._adContainer.classList.add(c.AD_CLASSNAMES.adPlaying)},e.prototype.handleAdComplete=function(){m.debug("AdBreak Complete"),this._currentAd=void 0,this._isPlayingBreakSource.next(!1),this._breakStatusSource.next({}),this._isSkippableStateSource.next(!1),this._contentPlayer.getElement().classList.remove(c.AD_CLASSNAMES.adPlaying),this._adContainer.classList.remove(c.AD_CLASSNAMES.adPlaying),this._emitPostRollEnded&&(m.debug("Post-roll ended"),this._postRollEndSource.next({}),this._emitPostRollEnded=!1),this._isPictureInPictureAllowedSource.next(!0),this._isFullscreenAllowedSource.next(!0)},e.prototype.handleContentPauseRequested=function(){var e=this;m.debug("Content pause requested");var t=this._contentPlayer.getReadyState(),n=s.ReadyStates[t];t>s.ReadyStates.HAVE_NOTHING?this.deactivateContentPlayer():(m.debug("ReadyState is ".concat(n,". Waiting for content load before pausing content player")),this._playerSubscriptionContext.once(s.EventTypes.LOADED_METADATA,(function(){m.debug("Content player loaded, pausing content"),e.deactivateContentPlayer()}))),m.debug("Content player state",{readyState:n,isBuffering:this._contentPlayer.getIsBuffering(),isRebuffering:this._contentPlayer.getIsRebuffering(),hasPlayed:this._contentPlayer.getHasPlayed()})},e.prototype.handleContentResumeRequested=function(){var e=this;if(m.debug("Content resume requested"),this._isDiscardAdBreakCalled&&(this._isDiscardAdBreakCalled=!1,this.handleAdComplete()),this.getIsPlayingBreak()){m.debug("Still playing ad break. Will resume content playback after IS_PLAYING_BREAK_CHANGED");var t=this._csImaEventProxy.createSubscriptionContext().once(d.ClientSideImaEvents.IS_PLAYING_BREAK_CHANGED,(function(t,n){n.isPlayingBreak||e._contentPlayer.getHasEnded()||e.activateContentPlayer()})).unsubscribe;this._contentPlayer.once(s.EventTypes.HANDLER_DESTROYING,t)}else this._contentPlayer.getHasEnded()||(m.debug("Content has not ended, resuming playback"),this.activateContentPlayer())},e.prototype.setContentPlayerMuted=function(e){var t=this._contentPlayer.sourceHandler.getElement();t instanceof HTMLVideoElement&&(t.muted=e)},e}();t.PlayerManager=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareBreakStatusEvents=void 0,t.compareBreakStatusEvents=function(e,t){return(null==e?void 0:e.breakClipCount)===(null==t?void 0:t.breakClipCount)&&(null==e?void 0:e.breakClipIndex)===(null==t?void 0:t.breakClipIndex)&&(null==e?void 0:e.currentBreakClipDuration)===(null==t?void 0:t.currentBreakClipDuration)&&(null==e?void 0:e.currentBreakClipTime)===(null==t?void 0:t.currentBreakClipTime)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCustomDataWithImaRequest=void 0,t.isCustomDataWithImaRequest=function(e){return void 0!==e&&"clientSideAds"in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isImaError=void 0,t.isImaError=function(e){return"object"==typeof e&&"toString"in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUsingCustomPlaybackForIos=void 0;var r=n(10);t.isUsingCustomPlaybackForIos=function(e){return!!e.disableCustomPlaybackForIOS10Plus&&r.browser.isIos}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvivaPlugin=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(8),o=n(61),s=n(70),u=n(16),l=n(10),c=n(198),d=n(107),f=n(824),h=n(840),p=new u.LoggerFileNameDecorator("ConvivaPlugin"),m=function(){function e(e,t){var n,u=this;(0,i.default)(this),this._player=e,this._config=this.createConfig(t),this._subscriptionContext=e.createSubscriptionContext(),this._adsManager=new f.ConvivaPluginAdsManager(e,this),this._isAnalyticsInitialised=!1,this._isCreatingSession=!1,this._eventProxy=new o.EventProxy({eventTypes:d.ConvivaEvents}),this.createSubscriptionContext=this._eventProxy.createSubscriptionContext,this.off=this._eventProxy.off,this.on=this._eventProxy.on,this.once=this._eventProxy.once,this._libraryLoader=new s.LibraryLoader({getIsLibraryLoaded:this.isLibraryLoaded,libraryName:"Conviva Core SDK",libraryUrl:null!==(n=this._config.convivaSdkUrl)&&void 0!==n?n:"",lazyLoadLibrary:this._config.lazyLoadLibrary}),this._eventProxy.addEventSource(d.ConvivaEvents.LIBRARY_STATE_CHANGED,this._libraryLoader.onLibraryStateChanged),this._subscriptionContext.on(a.EventTypes.DESTROYING,this.destroy).on(a.EventTypes.HANDLER_ELEMENT_DESTROYING,this.reset).on(a.EventTypes.LOAD_REQUEST,(function(e,t){var n=t.mediaInfo;u.reset(),u.createSession(n)})),this._player.addCastLoadInterceptor((function(e,t){var n=u.getCustomDataWithConviva(t);return n&&(e.media.customData=r.__assign(r.__assign({},e.media.customData),{conviva:n.conviva})),e})),this.registerListeners()}return Object.defineProperty(e.prototype,"Conviva",{get:function(){var e,t=null!==(e=this._config.convivaSdk)&&void 0!==e?e:window.Conviva;if(!t)throw new Error("Conviva SDK is not loaded on the page");return t},enumerable:!1,configurable:!0}),e.prototype.getLibraryState=function(){return this._libraryLoader.getLibraryState()},e.prototype.getVideoAnalytics=function(){return this._videoAnalytics},e.prototype.loadLibrary=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this._libraryLoader.loadLibrary()];case 1:return e.sent(),[2]}}))}))},e.prototype.createConfig=function(e){var t,n,i;if(e.isProduction||e.gatewayUrl||p.warn("Please provide the Touchstone gateway URL when not in production."),!e.convivaSdk&&!e.convivaSdkUrl)throw new Error("Conviva will not initialise. Please provide either one of the following in the config: convivaSdkUrl or convivaSdk.");return r.__assign(r.__assign({},e),{logLevel:null!==(t=e.logLevel)&&void 0!==t?t:d.ConvivaLogLevel.NONE,isProduction:null===(n=e.isProduction)||void 0===n||n,lazyLoadLibrary:null!==(i=e.lazyLoadLibrary)&&void 0!==i&&i})},e.prototype.createSession=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i,a;return r.__generator(this,(function(r){switch(r.label){case 0:return this.getIsCastConnected()?(p.info("CastStates.CONNECTED is connected. Conviva initialisation is deferred."),[2]):(t=this.getCustomDataWithConviva(e))?(this._isCreatingSession=!0,[4,this.loadLibrary()]):(p.warn("Conviva metadata not found `mediaInfo`. Will not create Conviva session."),[2]);case 1:return r.sent(),p.info("Found Conviva metadata in `mediaInfo`, creating Conviva session."),n=t.conviva.deviceMetadata,i=this.getPlayerInfo(),this.initAnalytics(),a=this.getDeviceMetadata(n),this.Conviva.Analytics.setDeviceMetadata(a),this._videoAnalytics=this.Conviva.Analytics.buildVideoAnalytics(),this._videoAnalytics.setPlayerInfo(i),this._videoAnalytics.setCallback(this.videoAnalyticsCallbacks),this._videoAnalytics.reportPlaybackRequested(),this._isCreatingSession=!1,[2]}}))}))},e.prototype.destroy=function(){var e=Boolean(this._videoAnalytics);this.reset(),this._adsManager.destroy(),this._subscriptionContext.unsubscribe(),document.removeEventListener("visibilitychange",this.onVisibilityChanged),window.removeEventListener("unload",this.destroy),window.Conviva&&e&&this.Conviva.Analytics.release(),this._isAnalyticsInitialised=!1},e.prototype.getBitrateAsKbps=function(){var e,t=this._player.getCurrentLevel();t&&-1!=t.id&&(e=t.bitrate);var n=this._player.sourceHandler,r=this._player.getLevels();if(n.hasType(a.HandlerTypes.HLS)){var i=n.getEngine().currentLevel;e=i>-1?r[i].bitrate:void 0}else if(n.hasType(a.HandlerTypes.DASH)){var o=n.getEngine().getQualityFor("video");e=o>-1?r[o].bitrate:void 0}return void 0!==e?e/1e3:void 0},e.prototype.getBufferLength=function(){var e=this._player.getBufferedRanges(),t=this._player.getCurrentTime();if(e.length)return 1e3*e.reduce((function(e,n){var r=n.end,i=e;return n.start<=t&&t<r&&(i+=r-t),i}),0)},e.prototype.getContentInfo=function(){var e=this.getCustomDataWithConviva();if(e)return this.getContentMetadata(e.conviva.contentMetadata)},e.prototype.getContentMetadata=function(e){var t,n,r,i,a={},o=null!==(t=e.custom)&&void 0!==t?t:{},s=null===(n=this._player.getFrameRate())||void 0===n?void 0:n.toString(),u=this._player.getSourceUrl();for(var l in a[this.Conviva.Constants.ASSET_NAME]=e.assetName,a[this.Conviva.Constants.DEFAULT_RESOURCE]=null!==(r=e.defaultResource)&&void 0!==r?r:this.getDefaultResource(),a[this.Conviva.Constants.DURATION]=this._player.getDuration(),a[this.Conviva.Constants.ENCODED_FRAMERATE]=s,a[this.Conviva.Constants.IS_LIVE]=(0,h.getStreamType)(this._player.getIsLive(),this.Conviva),a[this.Conviva.Constants.PLAYER_NAME]=null!==(i=e.playerName)&&void 0!==i?i:"Doris",a[this.Conviva.Constants.STREAM_URL]=u,a[this.Conviva.Constants.VIEWER_ID]=e.viewerId,o)a[l]=String(o[l]);return a},e.prototype.getCustomDataWithConviva=function(e){var t,n,r=null!==(t=null==e?void 0:e.customData)&&void 0!==t?t:null===(n=this._player.getMediaInfo())||void 0===n?void 0:n.customData;if((0,h.isCustomDataWithConviva)(r))return r},e.prototype.getDefaultResource=function(){var e,t=null===(e=this._player.getSourceUrl())||void 0===e?void 0:e.toLocaleLowerCase();if(t){if(t.includes("akamai"))return"AKAMAI";if(t.includes("fastly"))return"FASTLY"}},e.prototype.getDeviceMetadata=function(e){var t=this._config,n=t.deviceCategory,r=t.deviceType,i={};return i[this.Conviva.Constants.DeviceMetadata.CATEGORY]=(0,h.getDeviceCategory)(n,this.Conviva),i[this.Conviva.Constants.DeviceMetadata.TYPE]=(0,h.getDeviceType)(r,this.Conviva),e&&(i[this.Conviva.Constants.DeviceMetadata.BRAND]=e.brand,i[this.Conviva.Constants.DeviceMetadata.MANUFACTURER]=e.manufacturer,i[this.Conviva.Constants.DeviceMetadata.MODEL]=e.model,i[this.Conviva.Constants.DeviceMetadata.OS_NAME]=e.osName,i[this.Conviva.Constants.DeviceMetadata.OS_VERSION]=e.osVersion,i[this.Conviva.Constants.DeviceMetadata.VERSION]=e.version),i},e.prototype.getIsCastConnected=function(){return this._player.getCastState()===a.CastStates.CONNECTED},e.prototype.getPlayHeadTime=function(){var e=this._player.sourceHandler.getElement();if(e instanceof HTMLVideoElement)return 1e3*e.currentTime},e.prototype.getPlayerInfo=function(){var e={};return e[this.Conviva.Constants.FRAMEWORK_NAME]="Doris",e[this.Conviva.Constants.FRAMEWORK_VERSION]=c.VERSION,e},e.prototype.initAnalytics=function(){if(!this._isAnalyticsInitialised){var e=this._config,t=e.gatewayUrl,n=e.logLevel,r={};if(!this._config.isProduction){if(!t)throw new Error("Failed to initialise Conviva Analytics. Gateway URL must be provided for non-production environments.");p.info("Not production environment. Using Conviva gateway URL."),r[this.Conviva.Constants.GATEWAY_URL]=t,r[this.Conviva.Constants.LOG_LEVEL]=(0,h.getLogLevel)(n,this.Conviva)}p.info("Initialising Conviva Analytics"),this.Conviva.Analytics.init(this._config.customerKey,null,r),this._isAnalyticsInitialised=!0}},e.prototype.isLibraryLoaded=function(){return Boolean(window.Conviva)||Boolean(this._config.convivaSdk)},e.prototype.onVisibilityChanged=function(){var e=this._player.sourceHandler.hasType(a.HandlerTypes.TIZEN);(l.browser.isMobile||e)&&this.isLibraryLoaded()&&this._videoAnalytics&&(document.hidden?this.Conviva.Analytics.reportAppBackgrounded():this.Conviva.Analytics.reportAppForegrounded())},e.prototype.registerListeners=function(){var e=this;document.addEventListener("visibilitychange",this.onVisibilityChanged),window.addEventListener("unload",this.destroy),this._subscriptionContext.on(a.EventTypes.ERROR,(function(t,n){var i=n.type,o=n.message;return r.__awaiter(e,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(n){switch(n.label){case 0:return i!==a.ErrorTypes.TOTAL_FAILURE?[3,3]:this._player.getHasPlayed()?[3,2]:[4,this.loadLibrary()];case 1:return n.sent(),null===(e=this._videoAnalytics)||void 0===e||e.reportPlaybackFailed("Fatal error: ".concat(o),this.getContentInfo()),this.reset(),[3,3];case 2:null===(t=this._videoAnalytics)||void 0===t||t.reportPlaybackError(o,this.Conviva.Constants.ErrorSeverity.FATAL),this.reset(),n.label=3;case 3:return[2]}}))}))})).on(a.EventTypes.LOADED_METADATA,(function(){e.setContentInfo()})).on(a.EventTypes.PAUSE,(function(){var t;null===(t=e._videoAnalytics)||void 0===t||t.reportPlaybackMetric(e.Conviva.Constants.Playback.PLAYER_STATE,e.Conviva.Constants.PlayerState.PAUSED)})).on(a.EventTypes.PLAY,(function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=this._player.getMediaInfo(),this._isCreatingSession||this._videoAnalytics||!e?[3,2]:(p.info("Video replay, will create new analytics session if Conviva metadata exists."),[4,this.createSession(e)]);case 1:t.sent(),this.setContentInfo(),t.label=2;case 2:return[2]}}))}))})).on(a.EventTypes.PLAYING,(function(){var t;null===(t=e._videoAnalytics)||void 0===t||t.reportPlaybackMetric(e.Conviva.Constants.Playback.PLAYER_STATE,e.Conviva.Constants.PlayerState.PLAYING)})).on([a.EventTypes.EMPTIED,a.EventTypes.WAITING],(function(){var t;null===(t=e._videoAnalytics)||void 0===t||t.reportPlaybackMetric(e.Conviva.Constants.Playback.PLAYER_STATE,e.Conviva.Constants.PlayerState.BUFFERING)})).on([a.EventTypes.TIME_UPDATE],(function(){var t;null===(t=e._videoAnalytics)||void 0===t||t.reportPlaybackMetric(e.Conviva.Constants.Playback.RESOLUTION,e._player.getDimensions().videoWidth,e._player.getDimensions().videoHeight)})).on([a.EventTypes.LOADED_DATA,a.EventTypes.PROGRESS],(function(){var t,n=e.getBitrateAsKbps();null!=n&&(null===(t=e._videoAnalytics)||void 0===t||t.reportPlaybackMetric(e.Conviva.Constants.Playback.BITRATE,n))})).on(a.EventTypes.SEEKED,(function(){var t;null===(t=e._videoAnalytics)||void 0===t||t.reportPlaybackMetric(e.Conviva.Constants.Playback.SEEK_ENDED)})).on(a.EventTypes.SEEKING,(function(){var t;null===(t=e._videoAnalytics)||void 0===t||t.reportPlaybackMetric(e.Conviva.Constants.Playback.SEEK_STARTED)})).on(a.EventTypes.ENDED,(function(){var t;null===(t=e._videoAnalytics)||void 0===t||t.reportPlaybackMetric(e.Conviva.Constants.Playback.PLAYER_STATE,e.Conviva.Constants.PlayerState.STOPPED),e.reset()}))},e.prototype.reset=function(){var e,t;this._isCreatingSession=!1,null===(e=this._videoAnalytics)||void 0===e||e.reportPlaybackEnded(),null===(t=this._videoAnalytics)||void 0===t||t.release(),this._videoAnalytics=void 0},e.prototype.setContentInfo=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.loadLibrary()];case 1:return t.sent(),(e=this.getContentInfo())&&this._videoAnalytics&&(p.info("Setting the video analytics content information."),this._videoAnalytics.setContentInfo(e)),[2]}}))}))},e.prototype.videoAnalyticsCallbacks=function(){if(this._videoAnalytics){var e=this.getPlayHeadTime(),t=this.getBufferLength(),n=this._player.getFrameRate();null!=e&&this._videoAnalytics.reportPlaybackMetric(this.Conviva.Constants.Playback.PLAY_HEAD_TIME,e),null!=t&&this._videoAnalytics.reportPlaybackMetric(this.Conviva.Constants.Playback.BUFFER_LENGTH,t),null!=n&&this._videoAnalytics.reportPlaybackMetric(this.Conviva.Constants.Playback.RENDERED_FRAMERATE,n)}},e}();t.ConvivaPlugin=m},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConvivaContentMetadataStreamType=void 0,(r=t.ConvivaContentMetadataStreamType||(t.ConvivaContentMetadataStreamType={}))[r.UNKNOWN=0]="UNKNOWN",r[r.LIVE=1]="LIVE",r[r.VOD=2]="VOD"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConvivaDeviceCategory=void 0,(r=t.ConvivaDeviceCategory||(t.ConvivaDeviceCategory={}))[r.ANDROID_DEVICE=0]="ANDROID_DEVICE",r[r.APPLE_DEVICE=1]="APPLE_DEVICE",r[r.CHROMECAST=2]="CHROMECAST",r[r.DESKTOP_APP=3]="DESKTOP_APP",r[r.DEVICE_SIMULATOR=4]="DEVICE_SIMULATOR",r[r.LG_TV=5]="LG_TV",r[r.NINTENDO=6]="NINTENDO",r[r.PLAYSTATION=7]="PLAYSTATION",r[r.ROKU=8]="ROKU",r[r.SAMSUNG_TV=9]="SAMSUNG_TV",r[r.SMART_TV=10]="SMART_TV",r[r.SET_TOP_BOX=11]="SET_TOP_BOX",r[r.TIVO=12]="TIVO",r[r.WEB=13]="WEB",r[r.WINDOWS_DEVICE=14]="WINDOWS_DEVICE",r[r.XBOX=15]="XBOX",r[r.KAIOS_DEVICE=16]="KAIOS_DEVICE"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConvivaDeviceType=void 0,(r=t.ConvivaDeviceType||(t.ConvivaDeviceType={}))[r.DESKTOP=0]="DESKTOP",r[r.CONSOLE=1]="CONSOLE",r[r.SETTOP=2]="SETTOP",r[r.MOBILE=3]="MOBILE",r[r.TABLET=4]="TABLET",r[r.SMARTTV=5]="SMARTTV"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvivaEvents=void 0,(t.ConvivaEvents||(t.ConvivaEvents={})).LIBRARY_STATE_CHANGED="librarystatechanged"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConvivaLogLevel=void 0,(r=t.ConvivaLogLevel||(t.ConvivaLogLevel={}))[r.DEBUG=0]="DEBUG",r[r.INFO=1]="INFO",r[r.WARNING=2]="WARNING",r[r.ERROR=3]="ERROR",r[r.NONE=4]="NONE"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(825),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(826),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvivaPluginAdsManager=void 0;var r=n(0).__importDefault(n(9)),i=n(8),a=n(16),o=n(74),s=n(75),u=new a.LoggerFileNameDecorator("ConvivaPluginAdsManager"),l=function(){function e(e,t){(0,r.default)(this),this._player=e,this._convivaPlugin=t,this.setImaPluginInstance()}return Object.defineProperty(e.prototype,"Conviva",{get:function(){if(!window.Conviva)throw new Error("Conviva SDK is not loaded on the page");return window.Conviva},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imaPlugin",{get:function(){if(!this._imaPluginInstance)throw new Error("IMAPlugin not found.");return this._imaPluginInstance},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e;null===(e=this._imaSubscriptionContext)||void 0===e||e.unsubscribe()},e.prototype.getAdBreakInfo=function(){var e={},t=this.getPodDuration(),n=this.getPodIndex(),r=this.getPodPosition();return null!=t&&(e[this.Conviva.Constants.POD_DURATION]=t),n&&(e[this.Conviva.Constants.POD_INDEX]=n),r&&(e[this.Conviva.Constants.POD_POSITION]=r),u.debug("AdBreakInfo",e),e},e.prototype.getCurrentCuePoint=function(){var e,t,n=this._player.getCurrentTime();return null!==(t=null===(e=this.imaPlugin.getStreamManager())||void 0===e?void 0:e.previousCuePointForStreamTime(n))&&void 0!==t?t:void 0},e.prototype.getPodDuration=function(){var e=this.getCurrentCuePoint();if(e)return String(e.end-e.start)},e.prototype.getPodIndex=function(){var e=this.getCurrentCuePoint(),t=this.imaPlugin.getCuePoints();if(u.debug("CuePoint for PodIndex",e),(null==t?void 0:t.length)&&e){var n=t.findIndex((function(t){return t.end===e.end&&t.start==t.start}));return String(n)}},e.prototype.getPodPosition=function(){if(this._player.getIsLive())return this.Conviva.Constants.AdPosition.MIDROLL;var e=this.imaPlugin.getStreamManager(),t=this._player.getCurrentTime(),n=this._player.getDuration(),r=null==e?void 0:e.contentTimeForStreamTime(t),i=null==e?void 0:e.contentTimeForStreamTime(n);if(void 0!==r){if(0===r)return this.Conviva.Constants.AdPosition.PREROLL;if(void 0!==i&&Math.floor(i)===Math.floor(r))return this.Conviva.Constants.AdPosition.POSTROLL}return this.Conviva.Constants.AdPosition.MIDROLL},e.prototype.registerListeners=function(){var e=this;this._imaSubscriptionContext=this.imaPlugin.createSubscriptionContext().on(s.StreamEvent.AD_BREAK_STARTED,(function(){var t=e._convivaPlugin.getVideoAnalytics();if(t){var n=e.Conviva.Constants.AdType.SERVER_SIDE,r=e.Conviva.Constants.AdPlayer.CONTENT;u.debug("Reporting Ad break started."),t.reportAdBreakStarted(n,r,e.getAdBreakInfo())}})).on(s.StreamEvent.AD_BREAK_ENDED,(function(){var t=e._convivaPlugin.getVideoAnalytics();t&&(u.debug("Reporting Ad break ended."),t.reportAdBreakEnded())}))},e.prototype.setImaPluginInstance=function(){var e=this;if(this._imaPluginInstance=this._player.getPluginByType(o.IMAPlugin),this._imaPluginInstance)this.registerListeners();else var t=this._player.createSubscriptionContext().on(i.EventTypes.PLUGIN_CREATED,(function(n,r){var i=r.plugin;i instanceof o.IMAPlugin&&(e._imaPluginInstance=i,e.registerListeners(),t())})).on(i.EventTypes.DESTROYING,(function(){u.debug("IMAPlugin not found. Conviva did not track ad playback."),t()})).unsubscribe},e}();t.ConvivaPluginAdsManager=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(828),t),r.__exportStar(n(829),t),r.__exportStar(n(830),t),r.__exportStar(n(831),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AD_CLASSNAMES=void 0,t.AD_CLASSNAMES={container:"ds-ad-container",adPlaying:"ds-ad-playing"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_AD_TAG_PARAMETER_METADATA=void 0;var r=new Date(-864e13),i=new Date(864e13);t.DEFAULT_AD_TAG_PARAMETER_METADATA={adTagParameters:{},adTagParametersValidFrom:r,adTagParametersValidUntil:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={delaySnapbackUntilFirstPlay:!1,disableAdsBeforeStartPosition:!1,disableSnapbackNearEnd:10,evictBufferAfterSnapback:!1,lazyLoadLibrary:!0,pauseOnClick:!0,resumeOnTabFocus:!0,validateAdTagParametersOnLoad:!0,withAdContainer:!0,withSeekBlockingMiddleware:!0,withSnapback:!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMA_DAI_URL=void 0,t.IMA_DAI_URL="https://imasdk.googleapis.com/js/sdkloader/ima3_dai.js"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.IMAEvents=void 0,(r=t.IMAEvents||(t.IMAEvents={})).AD_TAG_PARAMETERS_UPDATED="adtagparametersupdated",r.IS_PLAYING_BREAK_CHANGED="isplayingbreakchanged",r.IS_PLAYING_CLICKABLE_BREAK_CHANGED="isplayingclickablebreakchanged",r.LIBRARY_STATE_CHANGED="librarystatechanged",r.REQUIRE_AD_TAG_PARAMETERS="requireadtagparameters"},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamFormat=void 0,(r=t.StreamFormat||(t.StreamFormat={})).DASH="DASH",r.HLS="HLS"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(835),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.seekBlockingMiddleware=void 0;var r=n(0),i=n(10),a=n(74);t.seekBlockingMiddleware=function(e,t){var n=e.getPluginByType(a.IMAPlugin);if(!n)return{};var o=function(){return Boolean(n.getStreamManager())&&e.getIsLive()};return{get:function(e,t){switch(t){case"seekTo":return function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(r){switch(r.label){case 0:return o()?[3,3]:"number"!=typeof t?[3,2]:[4,n.ensureSnapbackPerformed(t)];case 1:return[2,r.sent()?void 0:e.seekTo(t)];case 2:return[2,e.seekTo(t)];case 3:return[4,n.requestAdTagParamsForTimeOrDate(t)];case 4:return r.sent()?[2,e.seekTo(t)]:[2]}}))}))};case"nudge":return function(t){return r.__awaiter(this,void 0,void 0,(function(){var a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return o()?(a=e.getCurrentTime(),s=(0,i.clip)(a+t),[4,n.requestAdTagParamsForTimeOrDate(s)]):[2,e.nudge(t)];case 1:return r.sent()?[2,e.nudge(t)]:[2]}}))}))};default:return e[t]}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(837),t),r.__exportStar(n(838),t),r.__exportStar(n(839),t),r.__exportStar(n(214),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdTagParameterRequest=void 0;var r=function(){function e(e){this._date=e}return Object.defineProperty(e.prototype,"date",{get:function(){return this._date},enumerable:!1,configurable:!0}),e.prototype.cancel=function(){var e;null===(e=this._completionHandler)||void 0===e||e.call(this)},e.prototype.setCompletionHandler=function(e){this._completionHandler=e},e}();t.AdTagParameterRequest=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeCustomParameters=void 0,t.encodeCustomParameters=function(e){var t=Object.keys(e).map((function(t){var n=e[t];if(null!=n)return[t,n]})).filter((function(e){return void 0!==e}));return new URLSearchParams(t).toString()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeAdTagParameters=void 0;var r=n(0),i=n(214),a=function(e){return"string"==typeof e?(0,i.parseCustomParameters)(e):e};t.mergeAdTagParameters=function(e,t){var n=r.__assign(r.__assign({},e),t);return n.cust_params&&(n.cust_params=r.__assign(r.__assign({},a(e.cust_params)),a(t.cust_params))),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(841),t),r.__exportStar(n(842),t),r.__exportStar(n(843),t),r.__exportStar(n(844),t),r.__exportStar(n(845),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceCategory=void 0;var r=n(107);t.getDeviceCategory=function(e,t){switch(e){case r.ConvivaDeviceCategory.ANDROID_DEVICE:return t.Constants.DeviceCategory.ANDROID_DEVICE;case r.ConvivaDeviceCategory.APPLE_DEVICE:return t.Constants.DeviceCategory.APPLE_DEVICE;case r.ConvivaDeviceCategory.CHROMECAST:return t.Constants.DeviceCategory.CHROMECAST;case r.ConvivaDeviceCategory.DESKTOP_APP:return t.Constants.DeviceCategory.DESKTOP_APP;case r.ConvivaDeviceCategory.DEVICE_SIMULATOR:return t.Constants.DeviceCategory.DEVICE_SIMULATOR;case r.ConvivaDeviceCategory.KAIOS_DEVICE:return t.Constants.DeviceCategory.KAIOS_DEVICE;case r.ConvivaDeviceCategory.LG_TV:return t.Constants.DeviceCategory.LG_TV;case r.ConvivaDeviceCategory.NINTENDO:return t.Constants.DeviceCategory.NINTENDO;case r.ConvivaDeviceCategory.PLAYSTATION:return t.Constants.DeviceCategory.PLAYSTATION;case r.ConvivaDeviceCategory.ROKU:return t.Constants.DeviceCategory.ROKU;case r.ConvivaDeviceCategory.SAMSUNG_TV:return t.Constants.DeviceCategory.SAMSUNG_TV;case r.ConvivaDeviceCategory.SET_TOP_BOX:return t.Constants.DeviceCategory.SET_TOP_BOX;case r.ConvivaDeviceCategory.SMART_TV:return t.Constants.DeviceCategory.SMART_TV;case r.ConvivaDeviceCategory.TIVO:return t.Constants.DeviceCategory.TIVO;case r.ConvivaDeviceCategory.WEB:return t.Constants.DeviceCategory.WEB;case r.ConvivaDeviceCategory.WINDOWS_DEVICE:return t.Constants.DeviceCategory.WINDOWS_DEVICE;case r.ConvivaDeviceCategory.XBOX:return t.Constants.DeviceCategory.XBOX;default:return console.warn("Device category '".concat(e,"' not found. Defaulting to ").concat(t.Constants.DeviceCategory.WEB,".")),t.Constants.DeviceCategory.WEB}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceType=void 0;var r=n(107);t.getDeviceType=function(e,t){switch(e){case r.ConvivaDeviceType.CONSOLE:return t.Constants.DeviceType.CONSOLE;case r.ConvivaDeviceType.DESKTOP:return t.Constants.DeviceType.DESKTOP;case r.ConvivaDeviceType.MOBILE:return t.Constants.DeviceType.MOBILE;case r.ConvivaDeviceType.SETTOP:return t.Constants.DeviceType.SETTOP;case r.ConvivaDeviceType.SMARTTV:return t.Constants.DeviceType.SMARTTV;case r.ConvivaDeviceType.TABLET:return t.Constants.DeviceType.TABLET;default:return console.warn("Device type '".concat(e,"' not found. Defaulting to ").concat(t.Constants.DeviceType.DESKTOP,".")),t.Constants.DeviceType.DESKTOP}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLogLevel=void 0;var r=n(107);t.getLogLevel=function(e,t){switch(e){case r.ConvivaLogLevel.DEBUG:return t.Constants.LogLevel.DEBUG;case r.ConvivaLogLevel.ERROR:return t.Constants.LogLevel.ERROR;case r.ConvivaLogLevel.INFO:return t.Constants.LogLevel.INFO;case r.ConvivaLogLevel.NONE:return t.Constants.LogLevel.NONE;case r.ConvivaLogLevel.WARNING:return t.Constants.LogLevel.WARNING;default:return console.warn("Log level '".concat(e,"' not found. Defaulting to ").concat(t.Constants.LogLevel.NONE,".")),t.Constants.LogLevel.NONE}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStreamType=void 0,t.getStreamType=function(e,t){return e?t.Constants.StreamType.LIVE:t.Constants.StreamType.VOD}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCustomDataWithConviva=void 0,t.isCustomDataWithConviva=function(e){return void 0!==e&&"conviva"in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(847),t),r.__exportStar(n(854),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LimitSeekableRangePlugin=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(8),s=n(43),u=n(10),l=n(215),c=n(850),d=n(216),f=new s.LoggerFileNameDecorator("LimitSeekableRangePlugin"),h=function(){function e(e,t){void 0===t&&(t={}),(0,i.default)(this),this._config=r.__assign(r.__assign({},l.DEFAULT_CONFIG),t),this._player=e,this._hasEnded=!1,this._keepPlayerInSeekableRange=!1,this._endedSource=new a.Subject,this._seekInRange=new a.Subject,this._seekableRangeLimitsSource=new a.BehaviorSubject(void 0),this.init()}return e.prototype.getSeekableRangeLimits=function(){return this._seekableRangeLimitsSource.getValue()},e.prototype.limitSeekableRange=function(e){this.updateSeekableRangeLimits(e)},e.prototype.handleAutoPlay=function(){var e,t;return r.__awaiter(this,void 0,void 0,(function(){var n,i,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:n=null!==(t=null===(e=this._player.getMediaInfo())||void 0===e?void 0:e.autoPlay)&&void 0!==t?t:this._player.getConfig().defaultAutoPlay,f.log("Triggering auto-play handling with option '".concat(n,"'...")),r.label=1;case 1:if(r.trys.push([1,19,,20]),!this._player.getIsPaused())return[3,17];switch(n){case o.AutoPlayOptions.YES:return[3,2];case o.AutoPlayOptions.MUTED:return[3,4];case o.AutoPlayOptions.ANY:return[3,6]}return[3,16];case 2:return[4,this._player.play()];case 3:return r.sent(),[3,16];case 4:return this._player.setIsMuted(!0),[4,this._player.play()];case 5:return r.sent(),[3,16];case 6:return r.trys.push([6,8,,15]),[4,this._player.play()];case 7:return r.sent(),[3,15];case 8:if(i=r.sent(),!1!==this._player.getIsMuted())return[3,13];this._player.setIsMuted(!0),r.label=9;case 9:return r.trys.push([9,11,,12]),[4,this._player.play()];case 10:return r.sent(),[3,12];case 11:throw a=r.sent(),this._player.setIsMuted(!1),a;case 12:return[3,14];case 13:throw i;case 14:return[3,15];case 15:return[3,16];case 16:return[3,18];case 17:n!==o.AutoPlayOptions.NO||this._player.getIsPaused()||this._player.pause(),r.label=18;case 18:return[3,20];case 19:return s=r.sent(),f.warn("Auto-play handling failure!",(0,u.errorToString)(s)),[3,20];case 20:return[2]}}))}))},e.prototype.handleHandlerElementDestroying=function(){this.reset()},e.prototype.handleLoadRequest=function(e,t){var n=t.mediaInfo;if(this.reset(),(0,d.isCustomDataWithSeekableRangeLimits)(n.customData)){var r=n.customData.seekableRangeLimits;this.overrideStartFrom(n,r),this.updateSeekableRangeLimits(r,!0)}},e.prototype.handleLoadStart=function(){this._keepPlayerInSeekableRange=!0},e.prototype.handleSeekableRangeLimitsChange=function(e){if(this._keepPlayerInSeekableRange&&null!=e){var t=this._player.getCurrentDate();if(null!=t){var n=null!=e.start&&t<e.start,r=null!=e.end&&t>e.end;(n||r)&&(e.start?(f.debug("Attempting to seek to start position..."),this._seekInRange.next({date:e.start,allowSeekToLive:!0})):(f.info("Seeking to the start of the seekable range..."),this._player.seekTo(l.MIN_DATE)))}}},e.prototype.handleTimeUpdate=function(e,t){var n=t.currentDate;if(null!=n&&this._player.getHasPlayed()&&!this.shouldIgnoreTimeupdate(t.currentTime)){var r=this._player.getIsPaused(),i=this.getSeekableRangeLimits();if(null!=(null==i?void 0:i.start)&&!r){var a=(i.start.getTime()-n.getTime())/1e3;this._config.dvrWindowForcedSeekTolerance<a&&(f.debug("Attempting to seek into the seekable range..."),this._seekInRange.next({date:i.start}))}null!=(null==i?void 0:i.end)&&i.end<=n&&!this._hasEnded&&(f.info("Reached end of seekable range, emitting ended event..."),this._hasEnded=!0,this._player.pause(),this._seekInRange.next({date:i.end}),this._endedSource.next()),this._hasEnded&&null!=(null==i?void 0:i.end)&&n<i.end&&(f.info("No longer at the end of the seekable range."),this._hasEnded=!1)}},e.prototype.init=function(){var e=this,t=(0,c.createLimitSeekableRangeMiddleware)({getHasEnded:function(){return e._hasEnded},onEnded:this._endedSource.asObservable(),onSeekInRange:this._seekInRange.asObservable(),pluginConfig:this._config,seekableRangeLimitsSource:this._seekableRangeLimitsSource});this._player.getConfig().middlewares.unshift(t),this._player.on(o.EventTypes.LOAD_REQUEST,this.handleLoadRequest),this._player.on(o.EventTypes.LOAD_START,this.handleLoadStart),this._player.on(o.EventTypes.TIME_UPDATE,this.handleTimeUpdate),this._player.on(o.EventTypes.HANDLER_ELEMENT_DESTROYING,this.handleHandlerElementDestroying),this._seekableRangeLimitsSource.subscribe(this.handleSeekableRangeLimitsChange)},e.prototype.overrideStartFrom=function(e,t){var n;if(!(null==t.end||Date.now()<t.end.getTime())&&null==e.startFrom){var r=null!==(n=t.start)&&void 0!==n?n:l.MIN_DATE;f.debug("Overriding startFrom to ".concat(r.toISOString(),"...")),e.startFrom=r}},e.prototype.reset=function(){this._hasEnded=!1,this._keepPlayerInSeekableRange=!1,this.updateSeekableRangeLimits(void 0,!0)},e.prototype.shouldIgnoreTimeupdate=function(e){return e<5&&"safari"===u.browser.name&&u.browser.version>=14.2&&u.browser.version<=15.4},e.prototype.updateSeekableRangeLimits=function(e,t){if(void 0===t&&(t=!1),(null==e?void 0:e.start)&&e.end&&e.start>=e.end)throw new Error("Invalid seekable range limits!");var n=this.getSeekableRangeLimits();(null==n?void 0:n.start)===(null==e?void 0:e.start)&&(null==n?void 0:n.end)===(null==e?void 0:e.end)||((null==e?void 0:e.start)||(null==e?void 0:e.end)?(f.log("Limiting seekable range to ".concat(JSON.stringify(e),"...")),this._seekableRangeLimitsSource.next(e)):(f.log("Clearing limited seekable range..."),this._seekableRangeLimitsSource.next(void 0)),!t&&this._config.enableAutoPlayHandling&&this.handleAutoPlay())},e}();t.LimitSeekableRangePlugin=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={dvrWindowForcedSeekTolerance:12,enableAutoPlayHandling:!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_DATE=void 0,t.MIN_DATE=new Date(-864e13)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(851),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLimitSeekableRangeMiddleware=void 0;var r=n(0),i=n(113),a=n(12),o=n(15),s=n(43),u=n(10),l=n(215),c=n(216),d=new s.LoggerFileNameDecorator("LimitSeekableRangePlugin");t.createLimitSeekableRangeMiddleware=function(e){return function(t,n){var s=e.onSeekInRange,f=e.seekableRangeLimitsSource,h=function(){return f.getValue()};s.pipe((0,o.takeUntil)(n.onDestroying)).subscribe((function(e){var t=e.date,r=e.allowSeekToLive,i=n.getStartDate();if(null==i)return!1;var a=n.getSeekableRange(),o=new Date(i.getTime()+1e3*a.start),s=new Date(i.getTime()+1e3*a.end);if(!(t<o||s<t)){var u=h(),l=(null==u?void 0:u.end)&&u.end<=s;r&&!l?(d.log("Performing seek to live edge..."),n.seekTo(a.end)):(d.log("Performing seek to '".concat(t.toISOString(),"'...")),n.seekTo(t))}}));var p=(0,i.createSelector)((function(e){return e}),(function(e){return e.onDurationChange}),(function(e,t){return t.pipe((0,o.withLatestFrom)(f),(0,o.map)((function(t){var n=r.__read(t,2),i=n[0],a=n[1],o=e.getStartDate();if(!a||!o)return i;var s=(0,c.limitSeekableRange)(o,i.seekableRange,a),u=s.isEndLimited,l=s.limitedSeekableRange,d=l.end-l.start;return r.__assign(r.__assign({},i),{seekableDuration:d,seekableRange:l,duration:u?d:1/0,isLive:!u})})),(0,o.distinctUntilChanged)(u.compareDurationChangeEvents))})),m=(0,i.createSelector)((function(e){return e.onEnded}),(function(t){return(0,a.merge)(t,e.onEnded.pipe((0,o.mapTo)({})))})),g=(0,i.createSelector)((function(e){return e}),(function(e){return e.onLoadedMetadata}),(function(e,t){return t.pipe((0,o.withLatestFrom)(f),(0,o.map)((function(t){var n=r.__read(t,2),i=n[0],a=n[1],o=i.startDate;if(!a||!o)return i;var s=e.getSeekableRange(),u=(0,c.limitSeekableRange)(o,s,a),l=u.isEndLimited,d=u.limitedSeekableRange,f=d.end-d.start;return r.__assign(r.__assign({},i),{duration:l?f:1/0,isLive:!l})})))}));return{get:function(t,n){switch(n){case"getDuration":return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.getDuration.apply(t,r.__spreadArray([],r.__read(e),!1)),a=t.getStartDate(),o=h();if(!o||!a)return i;var s=t.getSeekableRange(),u=(0,c.limitSeekableRange)(a,s,o),l=u.isEndLimited,d=u.limitedSeekableRange;return l?d.end-d.start:1/0};case"getHasEnded":return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.getHasEnded.apply(t,r.__spreadArray([],r.__read(n),!1))||e.getHasEnded()};case"getIsLive":return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.getIsLive.apply(t,r.__spreadArray([],r.__read(e),!1)),a=t.getStartDate(),o=h();if(!o||!a)return i;var s=t.getSeekableRange(),u=(0,c.limitSeekableRange)(a,s,o).isEndLimited;return!u};case"getSeekableDuration":return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.getStartDate(),a=h();if(!a||!i)return t.getSeekableDuration.apply(t,r.__spreadArray([],r.__read(e),!1));var o=t.getSeekableRange.apply(t,r.__spreadArray([],r.__read(e),!1)),s=(0,c.limitSeekableRange)(i,o,a).limitedSeekableRange;return s.end-s.start};case"getSeekableRange":return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.getStartDate(),a=t.getSeekableRange.apply(t,r.__spreadArray([],r.__read(e),!1)),o=h();if(!o||!i)return a;var s=(0,c.limitSeekableRange)(i,a,o).limitedSeekableRange;return s};case"onDurationChange":return p(t);case"onEnded":return m(t);case"onLoadedMetadata":return g(t);case"play":return function(){for(var n,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return r.__awaiter(this,void 0,void 0,(function(){var a;return r.__generator(this,(function(o){switch(o.label){case 0:return(a=h())?e.getHasEnded()?[4,t.seekTo(null!==(n=a.start)&&void 0!==n?n:l.MIN_DATE)]:[3,2]:[2,t.play.apply(t,r.__spreadArray([],r.__read(i),!1))];case 1:o.sent(),o.label=2;case 2:return[2,t.play.apply(t,r.__spreadArray([],r.__read(i),!1))]}}))}))};case"seekTo":return function(e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,a,o,s,l,f,p;return r.__generator(this,(function(r){return n=t.getStartDate(),(i=h())&&n?(a="number"==typeof e?e:(0,u.dateToTime)(e,n),o=t.getSeekableRange(),s=(0,c.limitSeekableRange)(n,o,i).limitedSeekableRange,l=s.start,f=s.end,(p=(0,u.clamp)(a,l,f))!==a&&d.info("Seeking adjusted to ".concat(p," as ").concat(a," was outside the seekable range!")),[2,t.seekTo(p)]):[2,t.seekTo(e)]}))}))};default:return t[n]}}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCustomDataWithSeekableRangeLimits=void 0,t.isCustomDataWithSeekableRangeLimits=function(e){return void 0!==e&&"seekableRangeLimits"in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.limitSeekableRange=void 0;var r=n(10);t.limitSeekableRange=function(e,t,n){var i=t.start,a=t.end,o=!1,s=!1;if(n.start){var u=(0,r.clip)((n.start.getTime()-e.getTime())/1e3);i<u&&u<=a&&(i=u,o=!0)}if(n.end){var l=(0,r.clip)((n.end.getTime()-e.getTime())/1e3);l<a&&i<=l&&(a=l,s=!0)}return i>a&&(i=a),{isEndLimited:s,isStartLimited:o,limitedSeekableRange:{start:i,end:a}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MuxPlugin=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(8),s=n(61),u=n(168),l=n(16),c=n(10),d=n(856),f=n(860),h=n(863),p=new l.LoggerFileNameDecorator("MuxPlugin"),m=function(){function e(e,t){(0,i.default)(this),this._player=e,this._subscriptionContext=e.createSubscriptionContext(),this._config=this.createConfig(t),this._eventProxy=new s.EventProxy({eventTypes:f.MuxEvents}),this.createSubscriptionContext=this._eventProxy.createSubscriptionContext,this.off=this._eventProxy.off,this.on=this._eventProxy.on,this.once=this._eventProxy.once,this._muxSdkHandlers=new Map,this._subscriptionContext.on(o.EventTypes.DESTROYING,this.destroy).on(o.EventTypes.LOAD_REQUEST,this.onLoadRequest).on(o.EventTypes.LOAD_START,this.onLoadStart).on(o.EventTypes.HANDLER_CREATED,this.onHandlerCreated).on(o.EventTypes.HANDLER_ELEMENT_DESTROYING,this.onHandlerElementDestroying)}return e.prototype.emitFatalError=function(e,t){var n;(null===(n=this.getMuxSdk())||void 0===n?void 0:n.emit(f.MuxEventTypes.ERROR,{player_error_code:e,player_error_message:t}))||p.warn("Mux is not initialised. Will not emit error: ".concat(e," ").concat(t))},e.prototype.getLibraryState=function(){var e,t;return null!==(t=null===(e=this.getMuxSdk())||void 0===e?void 0:e.libraryLoader.getLibraryState())&&void 0!==t?t:u.LibraryState.NOT_LOADED},e.prototype.loadLibrary=function(){var e;return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,null===(e=this.getMuxSdk())||void 0===e?void 0:e.libraryLoader.loadLibrary()];case 1:return t.sent(),[2]}}))}))},e.prototype.setProgram=function(e){var t,n;return r.__awaiter(this,void 0,void 0,(function(){var i;return r.__generator(this,(function(r){return i=null===(t=this._player.getMediaInfo())||void 0===t?void 0:t.customData,(0,h.isCustomDataWithMux)(i)&&(p.info("Updating the Mux metadata in the media info"),i.mux.data=e),this.getIsCastConnected()?(p.warn("CastStates.CONNECTED is connected. Will not emit MuxEventTypes.PROGRAM_CHANGE."),[2]):((null===(n=this.getMuxSdk())||void 0===n?void 0:n.emit(f.MuxEventTypes.PROGRAM_CHANGE,e))||p.warn("You cannot emit a ".concat(f.MuxEventTypes.PROGRAM_CHANGE," before initialising Mux.")),[2])}))}))},e.prototype.createConfig=function(e){var t,n,i,a,o,s;return e.environmentKey||p.warn("Missing `environmentKey` from the config."),e.playerName||p.warn("Missing `playerName` from the config."),r.__assign(r.__assign({},e),{debug:null!==(t=e.debug)&&void 0!==t&&t,disableCookies:null!==(n=e.disableCookies)&&void 0!==n&&n,lazyLoadLibrary:null!==(i=e.lazyLoadLibrary)&&void 0!==i&&i,playerSoftware:e.playerSoftware,playerSoftwareVersion:e.playerSoftwareVersion,respectDoNotTrack:null!==(a=e.respectDoNotTrack)&&void 0!==a&&a,muxSDKUrl:null!==(o=e.muxSDKUrl)&&void 0!==o?o:d.WEB_MUX_SDK_URL,shakaMuxSDKUrl:null!==(s=e.shakaMuxSDKUrl)&&void 0!==s?s:d.SHAKA_MUX_SDK_URL})},e.prototype.destroy=function(){this.destroyMux(),this._subscriptionContext.unsubscribe(),this._loadRequestTime=void 0},e.prototype.destroyMux=function(e){var t,n,i,a=e?[e]:Array.from(this._muxSdkHandlers.keys());try{for(var o=r.__values(a),s=o.next();!s.done;s=o.next()){var u=s.value;null===(i=this._muxSdkHandlers.get(u))||void 0===i||i.destroy(),this._muxSdkHandlers.delete(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.getConfig=function(e){var t,n,i,a=this._loadRequestTime;void 0===a&&(p.warn("Player init time is not set! Value will not be measured accurately."),a=Date.now()),this._config.environmentKey||p.error("Missing `environmentKey` from the config.");var o=null!==(n=null!==(t=this._config.playerSoftwareName)&&void 0!==t?t:this._config.playerSoftware)&&void 0!==n?n:this.getPlayerSoftwareName(),s=null!==(i=this._config.playerSoftware)&&void 0!==i?i:this.getPlayerSoftwareVersion(),u=r.__assign({debug:this._config.debug,data:r.__assign(r.__assign({env_key:this._config.environmentKey,player_name:this._config.playerName,player_version:this._config.playerVersion,player_software:o,player_software_name:o,player_software_version:s,player_init_time:a},(0,c.removeUndefinedProps)({viewer_device_category:this._config.deviceCategory,viewer_device_manufacturer:this._config.deviceManufacturer,viewer_device_model:this._config.deviceModel,viewer_device_name:this._config.deviceName,sub_property_id:this._config.subPropertyId,viewer_user_id:this._config.userId,player_mux_plugin_name:this._config.muxPluginName,player_mux_plugin_version:this._config.muxPluginVersion})),e)},(0,c.removeUndefinedProps)({minimumRebufferDuration:this._config.minimumRebufferDuration,sustainedRebufferThreshold:this._config.sustainedRebufferThreshold}));return p.debug("Mux config:",u),u},e.prototype.getIsCastConnected=function(){return this._player.getCastState()===o.CastStates.CONNECTED},e.prototype.getMuxSdk=function(e){return this._muxSdkHandlers.get(null!=e?e:this._player.sourceHandler)},e.prototype.getPlayerSoftwareName=function(){return"Doris / ".concat(this._player.sourceHandler.getType())},e.prototype.getPlayerSoftwareVersion=function(){return"".concat(this._player.version," / ").concat(this._player.sourceHandler.getEngineVersion())},e.prototype.monitor=function(e){var t;return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:if(this.getIsCastConnected())return p.info("CastStates.CONNECTED is connected. Mux initialisation is deferred."),[2];n=this.getConfig(e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,null===(t=this.getMuxSdk())||void 0===t?void 0:t.monitor(n)];case 2:return r.sent(),[3,4];case 3:return i=r.sent(),p.error("Failed to start monitoring! ".concat((0,c.errorToString)(i))),[3,4];case 4:return[2]}}))}))},e.prototype.onHandlerCreated=function(e,t){var n=this,r=t.sourceHandler;if(!r.hasType(o.HandlerTypes.CHROMECAST)){this._muxSdkHandlers.forEach((function(e){n._eventProxy.removeEventSource(f.MuxEvents.LIBRARY_STATE_CHANGED,e.libraryLoader.onLibraryStateChanged)}));var i=r.hasType(o.HandlerTypes.SHAKA)?new h.ShakaMuxSdk(this._player,r,this._config):new h.DefaultMuxSdk(this._player,r,this._config);this._eventProxy.addEventSource(f.MuxEvents.LIBRARY_STATE_CHANGED,i.libraryLoader.onLibraryStateChanged),this._eventProxy.addEventSource(f.MuxEvents.LIBRARY_STATE_CHANGED,(0,a.of)({state:i.libraryLoader.getLibraryState()})),this._muxSdkHandlers.set(r,i)}},e.prototype.onHandlerElementDestroying=function(e,t){var n=t.sourceHandler;this.destroyMux(n)},e.prototype.onLoadRequest=function(){this._loadRequestTime=Date.now()},e.prototype.onLoadStart=function(){var e,t=null===(e=this._player.getMediaInfo())||void 0===e?void 0:e.customData;(0,h.isCustomDataWithMux)(t)&&(p.info("Found Mux metadata in `mediaInfo`, initialising Mux."),this.monitor(t.mux.data))},e}();t.MuxPlugin=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(857),t),r.__exportStar(n(858),t),r.__exportStar(n(859),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHAKA_MUX_SDK_URL=void 0,t.SHAKA_MUX_SDK_URL="https://src.litix.io/shakaplayer/5/shakaplayer-mux.js"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TIZEN_MUX_SDK_URL=void 0,t.TIZEN_MUX_SDK_URL="https://src.litix.io/tizen/2/tizen-mux.js"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WEB_MUX_SDK_URL=void 0,t.WEB_MUX_SDK_URL="https://src.litix.io/core/4/mux.js"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(861),t),r.__exportStar(n(862),t)},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MuxEventTypes=void 0,(r=t.MuxEventTypes||(t.MuxEventTypes={})).ERROR="error",r.PROGRAM_CHANGE="programchange"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MuxEvents=void 0,(t.MuxEvents||(t.MuxEvents={})).LIBRARY_STATE_CHANGED="librarystatechanged"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);r.__exportStar(n(864),t),r.__exportStar(n(865),t),r.__exportStar(n(866),t),r.__exportStar(n(219),t),r.__exportStar(n(218),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultMuxSdk=void 0;var r=n(0),i=r.__importDefault(n(9)),a=r.__importDefault(n(58)),o=n(8),s=n(43),u=n(70),l=n(218),c=new s.LoggerFileNameDecorator("DefaultMuxSdk"),d=function(){function e(e,t,n){(0,i.default)(this),this._config=n,this._handler=t,this._libraryLoader=new u.LibraryLoader({getIsLibraryLoaded:this.isLibraryLoaded,libraryName:"Mux SDK",libraryUrl:n.muxSDKUrl,lazyLoadLibrary:n.lazyLoadLibrary})}return Object.defineProperty(e.prototype,"libraryLoader",{get:function(){return this._libraryLoader},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mux",{get:function(){var e,t=null!==(e=this._config.muxSDK)&&void 0!==e?e:window.mux;if(!t)throw new Error("Mux SDK is not loaded on the page.");return t},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e=this._handler,t=e.getElement();return!!(0,l.isMuxVideoElement)(t)&&(e.hasType(o.HandlerTypes.HLS)?t.mux.removeHLSJS():e.hasType(o.HandlerTypes.DASH)&&t.mux.removeDashJS(),c.debug("Destroying the mux instance on the video element."),t.mux.destroy(),!0)},e.prototype.emit=function(e,t){var n=this._handler.getElement();return!!(0,l.isMuxVideoElement)(n)&&(c.debug("Emitting '".concat(e,"' event.")),n.mux.emit(e,t),!0)},e.prototype.monitor=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._libraryLoader.loadLibrary()];case 1:return r.sent(),t=this._handler,(n=t.getElement())instanceof HTMLVideoElement?(t.hasType(o.HandlerTypes.HLS)?(e.hlsjs=t.getEngine(),e.Hls=a.default):t.hasType(o.HandlerTypes.DASH)&&(e.dashjs=t.getEngine()),this.mux.monitor(n,e),c.info("Mux attached to media element.")):n instanceof HTMLObjectElement&&t.hasType(o.HandlerTypes.TIZEN)?this._config.monitor?(e.playbackListener=t.getEngine().getPlaybackListener(),n.url=t.getSourceUrl(),this._config.monitor(n,e),c.info("Mux attached to media element.")):c.warn("Missing Tizen `monitor` from the config"):c.warn("Element not found, Mux not attached."),[2]}}))}))},e.prototype.isLibraryLoaded=function(){return Boolean(window.mux)||Boolean(this._config.muxSDK)},e}();t.DefaultMuxSdk=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShakaMuxSdk=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(8),o=n(43),s=n(70),u=n(219),l=new o.LoggerFileNameDecorator("ShakaMuxSdk"),c=function(){function e(e,t,n){(0,i.default)(this),this._player=e,this._handler=t,this._libraryLoader=new s.LibraryLoader({getIsLibraryLoaded:this.isLibraryLoaded,libraryName:"Shaka Mux SDK",libraryUrl:n.shakaMuxSDKUrl,lazyLoadLibrary:n.lazyLoadLibrary})}return Object.defineProperty(e.prototype,"libraryLoader",{get:function(){return this._libraryLoader},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){var e=this._handler;if(!e.hasType(a.HandlerTypes.SHAKA))return!1;var t=e.getEngine();return!!(0,u.isMuxShakaPlayer)(t)&&(l.debug("Destroying the mux instance on the shaka player instance."),t.mux.destroy(),!0)},e.prototype.emit=function(e,t){var n=this._handler;if(!n.hasType(a.HandlerTypes.SHAKA))return!1;var r=n.getEngine();return!!(0,u.isMuxShakaPlayer)(r)&&(l.debug("Emitting '".concat(e,"' event.")),r.mux.emit(e,t),!0)},e.prototype.monitor=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this._libraryLoader.loadLibrary()];case 1:if(r.sent(),!window.initShakaPlayerMux)throw new Error("Shaka MUX SDK not available!");return(t=this._handler).hasType(a.HandlerTypes.SHAKA)?(n=t.getEngine(),i=window.initShakaPlayerMux(n,e,t.getShaka()),this._player.once([a.EventTypes.ERROR,a.EventTypes.PLAYING,a.EventTypes.HANDLER_DESTROYING],(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e[0]===a.EventTypes.ERROR){var n=e[1],r=n.type,o=n.nativeEvent;(o||r!==a.ErrorTypes.TOTAL_FAILURE)&&i.loadErrorHandler(o)}})),l.info("Mux attached to shaka player instance."),[2]):[2]}}))}))},e.prototype.isLibraryLoaded=function(){return Boolean(window.initShakaPlayerMux)},e}();t.ShakaMuxSdk=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCustomDataWithMux=void 0,t.isCustomDataWithMux=function(e){return void 0!==e&&"mux"in e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(868),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PPMPlugin=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(8);t.PPMPlugin=function(e){var t=this;this.setIsMuted=function(e){var n,r;e!==t._muted&&(t._muted=e,e?null===(n=t._source)||void 0===n||n.disconnect(t._context.destination):null===(r=t._source)||void 0===r||r.connect(t._context.destination))},this.bindEvents=function(){t._player.on(a.EventTypes.READY,(function(){var e=t._player.sourceHandler.getElement();if(!(e instanceof HTMLMediaElement))throw new Error("Video element does not exist, cannot start PPM");t._player.setIsMuted(!1),t._playerParent=t._player.getElement(),t._source=t._context.createMediaElementSource(e),t._source.connect(t._context.destination),t._source.connect(t._analyser),t._analyser.fftSize=128,t._frequencyData=new Uint8Array(t._analyser.frequencyBinCount),t.createDom(),t.update()})),t._player.on(a.EventTypes.DESTROYING,t.destroy)},this.createDom=function(){t._playerParent&&(t._meterContainer=document.createElement("div"),t._meter=document.createElement("div"),t._meterContainer.className="ds-meter-container",t._meter.className="ds-meter",t._meterContainer.appendChild(t._meter),t._playerParent.appendChild(t._meterContainer))},this.destroy=function(){var e;null===(e=t._meterContainer)||void 0===e||e.remove(),t._analyser.disconnect(),t._context.close(),t._running=!1},this.getRollingAverage=function(e){return t._values.push(e),t._values.length>10&&t._values.shift(),t._values.reduce((function(e,t){return e+t}),0)/10},this.update=function(){if(t._running&&t._meter){t._analyser.getByteFrequencyData(t._frequencyData);var e=Math.max.apply(Math,r.__spreadArray([],r.__read(Array.from(t._frequencyData).map((function(e){return e/256}))),!1)),n=t.getRollingAverage(e);t._meter.style.transform="scaleY(".concat(1-n,")"),requestAnimationFrame(t.update)}},(0,i.default)(this),this._context=new AudioContext,this._analyser=this._context.createAnalyser(),this._frequencyData=new Uint8Array,this._running=!0,this._muted=!1,this._player=e,this._values=[],this.bindEvents()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayPlugin=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(221),o=n(8),s=n(142),u=n(16),l=n(10),c=n(62),d=n(871),f=new u.LoggerFileNameDecorator("ReplayPlugin"),h=function(e){function t(t,n){var a=e.call(this)||this;return a._parentPlayerWasMuted=!1,a._state=c.State.NOT_AVAILABLE,(0,i.default)(a),a._config=n,a._parentPlayer=t,a._internalPlayer=a.createInternalPlayer(n,t),a._cacheController=n.maxCacheSize?new d.ResponseCacheController(n.maxCacheSize):void 0,a._context=a._parentPlayer.createSubscriptionContext().on(o.EventTypes.DESTROYING,a.destroy).on(o.EventTypes.LOAD_REQUEST,(function(e,t){return r.__awaiter(a,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this._mediaInfo=t.mediaInfo,this._internalPlayer?[4,this.loadMedia(this._internalPlayer,t.mediaInfo)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})).on(o.EventTypes.HANDLER_DESTROYING,(function(){a._mediaInfo=void 0,a._internalPlayer&&(a._internalPlayer.reset(),a.setState(c.State.NOT_AVAILABLE))})).on(o.EventTypes.HANDLER_CREATED,(function(e,t){var n,r,i=t.sourceHandler;i.hasType(o.HandlerTypes.DASH)?null===(n=a._cacheController)||void 0===n||n.configureDash(i.getEngine(),{writeToCache:!0}):i.hasType(o.HandlerTypes.SHAKA)&&(null===(r=a._cacheController)||void 0===r||r.configureShaka(i.getEngine(),{writeToCache:!0}))})).on(o.EventTypes.VOLUME_CHANGE,(function(e,t){a.setVolume(t.volume)})).on(o.EventTypes.AUDIO_TRACK_CHANGE,(function(e,t){var n,r=t.currentAudioTrack;r&&a._parentPlayer&&!a.getIsCastConnected()&&(null===(n=a._internalPlayer)||void 0===n||n.setCurrentAudioTrack(r))})),a}return r.__extends(t,e),t.prototype.cancelReplay=function(){this._internalPlayer&&this.finishReplay(this._internalPlayer)},t.prototype.getInternalPlayer=function(){return this._internalPlayer},t.prototype.getState=function(){return this._state},t.prototype.setRootElement=function(e){var t;this._config.rootEl===e&&void 0!==this._internalPlayer||(this._config.rootEl=e,null===(t=this._internalPlayer)||void 0===t||t.destroy(),this._internalPlayer=this.createInternalPlayer(this._config,this._parentPlayer))},t.prototype.startReplay=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n,i,a,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:if(n=this._internalPlayer,i=this._parentPlayer,void 0===n||this.getState()===c.State.NOT_AVAILABLE)throw new Error("Replay is not available!");(a=this.getState()!==c.State.IDLE)&&this.emit(c.ReplayEvents.REPLAY_INTERRUPTED),o={},r.label=1;case 1:return r.trys.push([1,,5,7]),this._replayReference=o,this.setState(c.State.LOADING),[4,n.seekTo(e)];case 2:return r.sent(),this._textTrack=i.getCurrentTextTrack(),i.setCurrentTextTrack(void 0),n.setCurrentTextTrack(this._textTrack),a||(this._parentPlayerWasMuted=i.getIsMuted(),n.setIsMuted(this._parentPlayerWasMuted),i.setIsMuted(!0)),[4,n.play()];case 3:return r.sent(),this.setState(c.State.PLAYING),s={startFrom:e,duration:t},this.emit(c.ReplayEvents.REPLAY_STARTED,s),[4,(0,l.delay)(1e3*t)];case 4:return r.sent(),[3,7];case 5:return[4,this.finishReplay(n,o)];case 6:return r.sent(),[7];case 7:return[2]}}))}))},t.prototype.createInternalPlayer=function(e,t){var n=this,r=t.getConfig(),i=this.getElementFromReference(e.rootEl);if(void 0!==i){f.info("Root element has been set to: ",i);var a=new s.Player(i,{debug:r.debug,handlers:r.handlers,useHTMLTextTracks:r.useHTMLTextTracks,defaultAutoPlay:o.AutoPlayOptions.NO,hlsConfig:{capLevelToPlayerSize:!0},muted:!0});return this.setVolume(t.getVolume()),a.getServices().sourceManager=t.getServices().sourceManager,a.on(o.EventTypes.HANDLER_CREATED,(function(e,t){var r,i,a=t.sourceHandler;a.hasType(o.HandlerTypes.DASH)?null===(r=n._cacheController)||void 0===r||r.configureDash(a.getEngine(),{readFromCache:!0}):a.hasType(o.HandlerTypes.SHAKA)&&(null===(i=n._cacheController)||void 0===i||i.configureShaka(a.getEngine(),{readFromCache:!0}))})),this.loadMedia(a),a}e.rootEl?f.warn("Root element '".concat(e.rootEl,"' cannot be found.")):f.info("No root element provided.")},t.prototype.destroy=function(){var e,t;this._context.unsubscribe(),null===(e=this._internalPlayer)||void 0===e||e.destroy(),null===(t=this._cacheController)||void 0===t||t.release(),this.setState(c.State.NOT_AVAILABLE),this.getState()===c.State.PLAYING&&(this.emit(c.ReplayEvents.REPLAY_ENDED),delete this._replayReference)},t.prototype.finishReplay=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return t=null!=t?t:this._replayReference,this.getState()!==c.State.LOADING&&this.getState()!==c.State.PLAYING||this._replayReference!==t?[3,3]:(this._parentPlayer.setIsMuted(this._parentPlayerWasMuted),e.setIsMuted(!0),this.setState(c.State.IDLE),this.emit(c.ReplayEvents.REPLAY_ENDED),(n=this._config.pauseDelay)?[4,(0,l.delay)(n)]:[3,2]);case 1:r.sent(),r.label=2;case 2:this._replayReference===t&&(e.pause(),delete this._replayReference),this._parentPlayer.setCurrentTextTrack(this._textTrack),e.setCurrentTextTrack(void 0),r.label=3;case 3:return[2]}}))}))},t.prototype.getElementFromReference=function(e){var t;return"string"==typeof e?null!==(t=document.getElementById(e))&&void 0!==t?t:void 0:e},t.prototype.getIsCastConnected=function(){return this._parentPlayer.getCastState()===o.CastStates.CONNECTED},t.prototype.loadMedia=function(e,t){var n,i;return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(a){switch(a.label){case 0:return null===(n=this._cacheController)||void 0===n||n.release(),(t=null!==(i=null!=t?t:this._parentPlayer.getMediaInfo())&&void 0!==i?i:this._mediaInfo)?[4,e.load(r.__assign(r.__assign({},t),{autoPlay:o.AutoPlayOptions.NO}))]:[3,2];case 1:a.sent(),this.setState(c.State.IDLE),a.label=2;case 2:return[2]}}))}))},t.prototype.setState=function(e){if(this._state!==e){this._state=e;var t={state:e};this.emit(c.ReplayEvents.REPLAY_STATE_CHANGED,t)}},t.prototype.setVolume=function(e){var t;try{null===(t=this._internalPlayer)||void 0===t||t.setVolume(e)}catch(e){}},t}(a.EventEmitter);t.ReplayPlugin=h},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayEvents=void 0,(r=t.ReplayEvents||(t.ReplayEvents={})).REPLAY_ENDED="replayended",r.REPLAY_INTERRUPTED="replayinterrupted",r.REPLAY_STARTED="replaystarted",r.REPLAY_STATE_CHANGED="replaystatechanged"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(872),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(873),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseCacheController=void 0;var r=n(874),i=n(875),a=n(876),o=function(){function e(e){this._buffer=new i.ResponseCache({getAssetSize:function(e){var t,n,r;if(e.dash){var i=null===(t=e.dash.xhr.response)||void 0===t?void 0:t.length;return isNaN(i)?null!==(r=null===(n=e.dash)||void 0===n?void 0:n.args[0].total)&&void 0!==r?r:0:i}if(e.shaka){var a=e.shaka.data.byteLength;return isNaN(a)?0:a}},maxCacheSize:e})}return e.prototype.configureDash=function(e,t){e.extend("XHRLoader",(0,r.createCachedDashXHRLoader)(this._buffer,t),!0)},e.prototype.configureShaka=function(e,t){var n;null===(n=this._shakaCacheController)||void 0===n||n.destroy(),this._shakaCacheController=new a.ShakaResponseCacheController({shaka:e,cache:this._buffer,options:t})},e.prototype.release=function(){var e;null===(e=this._shakaCacheController)||void 0===e||e.destroy(),this._buffer.release()},e}();t.ResponseCacheController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCachedDashXHRLoader=void 0;var r=n(0);t.createCachedDashXHRLoader=function(e,t){return function(t){void 0===t&&(t={});var n=t.requestModifier;return{load:function(t){var i=new Date,a=t.request,o=e.get({url:a.url});if(null==o?void 0:o.dash){var s=o.dash,u=s.xhr,l=s.args;if(u.response)return t.response=u,void t.onload.apply(t,r.__spreadArray([],r.__read(l),!1))}var c=new XMLHttpRequest;c.open(t.method,t.url,!0),a.responseType&&(c.responseType=a.responseType),a.range&&c.setRequestHeader("Range","bytes="+a.range),a.requestStartDate||(a.requestStartDate=i),n&&(c=n.modifyRequestHeader(c)),c.withCredentials=t.withCredentials,c.onload=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];e.set({url:a.url},{dash:{xhr:c,args:n}}),t.onload.apply(t,r.__spreadArray([],r.__read(n),!1))},c.onloadend=t.onend,c.onerror=t.onerror,c.onprogress=t.progress,c.onabort=t.onabort,c.send(),t.response=c}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseCache=void 0;var r=n(0),i=r.__importDefault(n(9)),a=function(){function e(e){(0,i.default)(this),this._cache=[],this._config=e}return e.prototype.delete=function(e){var t=this.findIndex(e);return t>=0&&(this._cache.splice(t,1),!0)},e.prototype.get=function(e){var t,n=this.findIndex(e);return null===(t=this._cache[n])||void 0===t?void 0:t[1]},e.prototype.getTotalSize=function(){var e=this;return this._cache.map((function(t){return e._config.getAssetSize(t[1])})).reduce((function(e,t){return e+t}),0)},e.prototype.release=function(e){if("number"==typeof e)for(var t=0;t<e&&this._cache.length>0;){var n=this._cache.shift();n&&(t+=this._config.getAssetSize(n[1]))}else this._cache=[]},e.prototype.set=function(e,t){this.delete(e),this._cache.push([e,t]);var n=this.getTotalSize();n>this._config.maxCacheSize&&this.release(n-this._config.maxCacheSize)},e.prototype.findIndex=function(e){return this._cache.findIndex((function(t){return r.__read(t,1)[0].url===e.url}))},e}();t.ResponseCache=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShakaResponseCacheController=void 0;var r=n(0),i=r.__importDefault(n(9)),a=r.__importDefault(n(140)),o=function(){function e(e){(0,i.default)(this),this._shaka=e.shaka,this._cache=e.cache,this._options=e.options,this._options.readFromCache&&(a.default.net.NetworkingEngine.registerScheme("http",this.shakaRequestPlugin),a.default.net.NetworkingEngine.registerScheme("https",this.shakaRequestPlugin)),this._options.writeToCache&&this._shaka.getNetworkingEngine().registerResponseFilter(this.handleShakaResponse)}return e.prototype.destroy=function(){this._options.writeToCache&&this._shaka.getNetworkingEngine().unregisterResponseFilter(this.handleShakaResponse)},e.prototype.handleShakaResponse=function(e,t){e===a.default.net.NetworkingEngine.RequestType.SEGMENT&&this._cache.set({url:t.uri},{shaka:t})},e.prototype.shakaRequestPlugin=function(e,t,n,r){var i=this._cache.get({url:e});if(null==i?void 0:i.shaka){var o=Promise.resolve(i.shaka);return new a.default.util.AbortableOperation(o,(function(){return Promise.resolve()}))}return a.default.net.HttpFetchPlugin(e,t,n,r)},e}();t.ShakaResponseCacheController=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(878),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronisePlugin=void 0;var r=n(0),i=r.__importDefault(n(9)),a=n(12),o=n(8),s=n(16),u=n(10),l=new s.LoggerFileNameDecorator("SynchronisePlugin"),c=function(){function e(e){this._players=new Set,this._playersReady=[],this._subscriptions=[],(0,i.default)(this),e.on(o.EventTypes.DESTROYING,this.destroy),this._players.add(e)}return e.prototype.addPlayer=function(e){this._players.add(e)},e.prototype.reset=function(){var e=this;this.detachPlayerReadyListeners(),Array.from(this._players).slice(1).forEach((function(t){return e._players.delete(t)})),this._playersReady=[]},e.prototype.synchronise=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this._playersReady=[],this.detachPlayerReadyListeners(),this.pausePlayers(),[4,this.alignCurrentDates()];case 1:return e.sent(),this.triggerPlayback(),[2]}}))}))},e.prototype.alignCurrentDates=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n;return r.__generator(this,(function(i){switch(i.label){case 0:return(e=Array.from(this._players).map((function(e){var t;return{player:e,currentDateTime:null===(t=e.getCurrentDate())||void 0===t?void 0:t.getTime()}})).filter((function(e){return void 0!==e.currentDateTime&&0!==e.player.getSeekableDuration()}))).length!==this._players.size&&l.warn("Not all players have `currentDate` available, therefore they will not be synchronised."),t=Math.min.apply(Math,r.__spreadArray([],r.__read(e.map((function(e){return e.currentDateTime}))),!1)),isFinite(t)?(n=new Date(t),[4,Promise.all(e.map((function(e){return e.player.seekTo(n)})))]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},e.prototype.arePlayersReady=function(){return this._playersReady.every(Boolean)},e.prototype.attachPlayerReadyListeners=function(){var e=this;r.__spreadArray([],r.__read(this._players),!1).forEach((function(t,n){var r=t.sourceHandler.getElement();if(r){var i=(0,a.fromEvent)(r,o.EventTypes.PROGRESS).subscribe((function(){e._playersReady[n]=t.getReadyState()>=o.ReadyStates.HAVE_ENOUGH_DATA,e.playWhenReady()}));e._subscriptions.push(i)}}))},e.prototype.canPlayAll=function(){return r.__spreadArray([],r.__read(this._players),!1).every((function(e){return e.getReadyState()>=o.ReadyStates.HAVE_ENOUGH_DATA}))},e.prototype.destroy=function(){this.reset(),this._players.clear()},e.prototype.detachPlayerReadyListeners=function(){this._subscriptions.forEach((function(e){return e.unsubscribe()})),this._subscriptions=[]},e.prototype.pausePlayers=function(){this._players.forEach((function(e){try{e.pause()}catch(e){l.warn((0,u.errorToString)(e))}}))},e.prototype.playWhenReady=function(){this.arePlayersReady()&&(this.detachPlayerReadyListeners(),this.triggerPlayback(!0),this._playersReady=[])},e.prototype.triggerPlayback=function(e){void 0===e&&(e=!1),e||this.canPlayAll()?this._players.forEach((function(e){try{e.play()}catch(e){l.warn((0,u.errorToString)(e))}})):this.attachPlayerReadyListeners()},e}();t.SynchronisePlugin=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(880),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShortcutPlugin=void 0;var r=n(0).__importDefault(n(9)),i=n(8),a=n(16),o=n(10),s=n(223),u=n(882),l=new a.LoggerFileNameDecorator("ShortcutPlugin"),c=function(){function e(e,t){void 0===t&&(t={}),(0,r.default)(this),this._player=e,this._config=t,this._htmlElement=this.getTargetElement(),this._player.on(i.EventTypes.DESTROYING,this.deregisterListeners),this.registerListeners()}return e.prototype.modifyShortcuts=function(e){var t,n=null!==(t=this._config.disableShortcut)&&void 0!==t?t:{};Object.keys(e).forEach((function(t){(0,u.isValidKeyCodeName)(t)&&(n[t]=e[t])})),this._config.disableShortcut=n},e.prototype.setTargetElement=function(e){var t;this.deregisterListeners(),this._htmlElement=null!==(t=(0,o.getEl)(e))&&void 0!==t?t:this._player.getElement(),this.registerListeners()},e.prototype.deregisterListeners=function(){this._htmlElement.removeEventListener("keydown",this.handleKeyDown),this._htmlElement.removeAttribute("tabindex")},e.prototype.getTargetElement=function(){var e=this._config.targetElement;return e&&(0,o.getEl)(e)||this._player.getElement()},e.prototype.handleKeyDown=function(e){var t=e.keyCode,n=e.shiftKey,r=e.altKey,i=e.ctrlKey,a=e.metaKey;if(l.debug("KeyCode pressed",t),!(n||r||i||a)){var u=this._player,c=this._config.disableShortcut;switch(t){case s.KeyCode.ARROW_UP:(null==c?void 0:c.ARROW_UP)||u.nudgeVolume(.05);break;case s.KeyCode.ARROW_DOWN:(null==c?void 0:c.ARROW_DOWN)||u.nudgeVolume(-.05);break;case s.KeyCode.ARROW_LEFT:(null==c?void 0:c.ARROW_LEFT)||u.nudge(-5);break;case s.KeyCode.ARROW_RIGHT:(null==c?void 0:c.ARROW_RIGHT)||u.nudge(5);break;case s.KeyCode.F:(null==c?void 0:c.F)||(o.fullscreen.fullscreenEnabled?o.fullscreen.fullscreenElement?o.fullscreen.exitFullscreen():o.fullscreen.requestFullscreen(this._htmlElement):u.getIsFullscreenSupported()&&(u.getIsFullscreenActive()?u.exitFullscreen():u.requestFullscreen()));break;case s.KeyCode.J:(null==c?void 0:c.J)||u.nudge(-10);break;case s.KeyCode.L:(null==c?void 0:c.L)||u.nudge(10);break;case s.KeyCode.SPACE:(null==c?void 0:c.SPACE)||(u.getIsPaused()?u.play():u.pause());break;case s.KeyCode.K:(null==c?void 0:c.K)||(u.getIsPaused()?u.play():u.pause());break;case s.KeyCode.M:(null==c?void 0:c.M)||u.setIsMuted(!u.getIsMuted());break;case s.KeyCode.I:(null==c?void 0:c.I)||u.getIsPictureInPictureSupported()&&(u.getIsPictureInPictureActive()?u.exitPictureInPicture():u.requestPictureInPicture())}}},e.prototype.registerListeners=function(){this._htmlElement.setAttribute("tabindex","-1"),this._htmlElement.addEventListener("keydown",this.handleKeyDown),l.info("Attached listener to: ",this._htmlElement)},e}();t.ShortcutPlugin=c},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyCode=void 0,(r=t.KeyCode||(t.KeyCode={}))[r.SPACE=32]="SPACE",r[r.K=75]="K",r[r.J=74]="J",r[r.L=76]="L",r[r.F=70]="F",r[r.ARROW_LEFT=37]="ARROW_LEFT",r[r.ARROW_RIGHT=39]="ARROW_RIGHT",r[r.ARROW_UP=38]="ARROW_UP",r[r.ARROW_DOWN=40]="ARROW_DOWN",r[r.M=77]="M",r[r.I=73]="I"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(883),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidKeyCodeName=void 0;var r=n(223);t.isValidKeyCodeName=function(e){return-1!==Object.getOwnPropertyNames(r.KeyCode).indexOf(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64DecodeUint8Array=function(e){for(var t=atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64EncodeUint8Array=function(e){for(var t,n,r,i,a,o,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,c="";l<e.length;)i=(t=e[l++])>>2,a=(3&t)<<4|(n=l<e.length?e[l++]:Number.NaN)>>4,o=(15&n)<<2|(r=l<e.length?e[l++]:Number.NaN)>>6,s=63&r,isNaN(n)?o=s=64:isNaN(r)&&(s=64),c+=u.charAt(i)+u.charAt(a)+u.charAt(o)+u.charAt(s);return c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21);t.shuffleArray=function(e){for(var t,n=e.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1));t=r.__read([e[i],e[n]],2),e[n]=t[0],e[i]=t[1]}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21);r.__exportStar(n(204),t),r.__exportStar(n(201),t),r.__exportStar(n(105),t),r.__exportStar(n(203),t),r.__exportStar(n(230),t),r.__exportStar(n(205),t),r.__exportStar(n(889),t),r.__exportStar(n(206),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),i=n(20),a=n(10),o=n(104),s=n(97),u=n(105),l=n(230),c=function(e){return r.__awaiter(void 0,void 0,void 0,(function(){var t,n,o,s,u,l,c;return r.__generator(this,(function(r){switch(r.label){case 0:return t=e.stream,n=t.hls,o=t.dash,[4,a.getSupportedKeySystems()];case 1:return s=r.sent(),u=i.KeySystems.PLAYREADY,l=i.KeySystems.FAIRPLAY,c=i.KeySystems.WIDEVINE,(null==n?void 0:n.drm)&&s[l]?[2,i.StreamTypes.HLS]:(null==o?void 0:o.drm)&&s[c]||(null==o?void 0:o.drm)&&s[u]?[2,i.StreamTypes.DASH]:[2]}}))}))},d=function(e,t,n){return r.__awaiter(void 0,void 0,void 0,(function(){var l,c,d,f,h,p,m,g,v,y;return r.__generator(this,(function(r){switch(r.label){case 0:return l=e.hls,c=e.dash,[4,a.getSupportedKeySystems()];case 1:if(d=r.sent(),n.drm){if(f=d[i.KeySystems.FAIRPLAY],h=d[i.KeySystems.WIDEVINE],p=d[i.KeySystems.PLAYREADY],(null==l?void 0:l.drm)&&f)return m=u.formatDrmParams(l.drm),v=m.licenseServerUrl,y=m.token,n.drm.fairplay=new s.Fairplay(y,v),[2,l.url];if((null==c?void 0:c.drm)&&(h||p))return g=u.formatDrmParams(c.drm),v=g.licenseServerUrl,y=g.token,h&&(n.drm.widevine=new o.Widevine(t,y,v),n.customData&&(n.customData.diceDRM?(n.customData.diceDRM.licenseServerUrl=v,n.customData.diceDRM.token=y):n.customData.diceDRM={licenseServerUrl:v,token:y})),p&&(n.drm.playready=new o.Playready(t,y,v)),[2,c.url];if((null==c?void 0:c.drm)||(null==l?void 0:l.drm))throw new Error("No supported DRM key system found!")}return[2]}}))}))};t.load=function(e){return r.__awaiter(void 0,void 0,void 0,(function(){var t,n,a,o,s,u,f,h;return r.__generator(this,(function(p){switch(p.label){case 0:return t=e.player,n=e.stream,(null===(u=n.dash)||void 0===u?void 0:u.drm)||(null===(f=n.hls)||void 0===f?void 0:f.drm)||(null===(h=n.hlsWidevine)||void 0===h?void 0:h.drm)?"getStream"in e?(a=function(e){return function(t,n){var i,a;void 0===n&&(n=null!==(i=e._mediaInfo)&&void 0!==i?i:e._loaded);var o=n;return(null===(a=null==o?void 0:o.customData)||void 0===a?void 0:a.diceDRM)&&(t.media.customData=r.__assign(r.__assign({},t.media.customData),{diceDRM:r.__assign({},o.customData.diceDRM)})),t}}(t),t.addCastLoadInterceptor(a),[4,(m=e,r.__awaiter(void 0,void 0,void 0,(function(){var e,t,n,a,o;return r.__generator(this,(function(s){switch(s.label){case 0:return e=m.loadRequest,t=e.source,n=r.__assign(r.__assign({},e),{drm:{},customData:r.__assign({},e.customData)}),[4,c(m)];case 1:if(a=s.sent(),t.sourceType===i.SourceTypes.DYNAMIC)o={getUrl:function(e){return r.__awaiter(void 0,void 0,void 0,(function(){var i,a,o,s;return r.__generator(this,(function(r){switch(r.label){case 0:return i=m.getStream,a=m.player,[4,i(e)];case 1:return o=r.sent(),[4,d(o,a,n)];case 2:return(s=r.sent())?[2,s]:[3,3];case 3:return[4,t.getUrl(e)];case 4:return[2,s=r.sent()]}}))}))},id:t.id,sourceType:i.SourceTypes.DYNAMIC,type:a},n.source=o;else{if(t.sourceType!==i.SourceTypes.STATIC&&void 0!==t.sourceType)throw new Error("Not supported source type '"+t.sourceType+"'!");o={getUrl:function(e){return r.__awaiter(void 0,void 0,void 0,(function(){var t,i,a,o;return r.__generator(this,(function(r){switch(r.label){case 0:return t=m.getStream,i=m.player,[4,t(e)];case 1:return a=r.sent(),[4,d(a,i,n)];case 2:return[2,null!=(o=r.sent())?o:e]}}))}))},id:t.url,sourceType:i.SourceTypes.DYNAMIC,type:a},n.source=o}return[2,n]}}))})))]):[3,3]:[3,7];case 1:return o=p.sent(),[4,t.load(o)];case 2:return p.sent(),[3,6];case 3:return[4,l.getDrmConfig(n,t,e.loadRequest,e.playlistInterceptor,e.enableHlsWidevine)];case 4:return s=p.sent(),[4,t.load(s)];case 5:p.sent(),p.label=6;case 6:return[3,9];case 7:return[4,t.load(e.loadRequest)];case 8:p.sent(),p.label=9;case 9:return[2]}var m}))}))}},function(e,t,n){"use strict";var r=n(232),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var l=60115,c=60116;if("function"==typeof Symbol&&Symbol.for){var d=Symbol.for;i=d("react.element"),a=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),o=d("react.provider"),s=d("react.context"),u=d("react.forward_ref"),t.Suspense=d("react.suspense"),l=d("react.memo"),c=d("react.lazy")}var f="function"==typeof Symbol&&Symbol.iterator;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var _=y.prototype=new v;_.constructor=y,r(_,g.prototype),_.isPureReactComponent=!0;var b={current:null},T=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)T.call(t,r)&&!E.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:b.current}}function w(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var A=/\/+/g;function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function L(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+M(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(A,"$&/")+"/"),L(o,t,n,"",(function(e){return e}))):null!=o&&(w(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=r+M(s=e[l],l);u+=L(s,t,n,c,o)}else if("function"==typeof(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e)))for(e=c.call(e),l=0;!(s=e.next()).done;)u+=L(s=s.value,t,n,c=r+M(s,l++),o);else if("object"===s)throw t=""+e,Error(h(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return L(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var k={current:null};function P(){var e=k.current;if(null===e)throw Error(h(321));return e}var I={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!w(e))throw Error(h(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.cloneElement=function(e,t,n){if(null==e)throw Error(h(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)T.call(t,c)&&!E.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=w,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return P().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,n){return P().useReducer(e,t,n)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.2"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_CONTAINER_STATE=void 0;var r=n(20),i=n(62);t.INITIAL_CONTAINER_STATE={atLiveEdge:!1,audioTracks:[],breaks:[],breakStatus:void 0,canDvr:!1,canSeek:!1,castState:r.CastStates.DISABLED,castConnecting:!1,contentDuration:0,contentTime:0,currentTime:0,duration:0,hasAutoPlayFailed:!1,hasEnded:!1,hasPlayed:!1,htmlTextTrackDisplaySettings:{},isBreakClickable:!1,isBreakSkippable:!1,isCasting:!1,isFullscreen:!1,isFullscreenAllowed:!0,isPipActive:!1,isPipAllowed:!0,isPipSupported:!1,isPlaying:!1,isPlayingBreak:!1,isPlayingClickableBreak:!1,levels:[],levelVariant:-1,levelVariants:0,live:!1,loaded:!1,muted:!1,optimisticContentTime:0,optimisticCurrentTime:0,overlayIsActive:!1,keepOverlayActivated:!1,paused:!0,playbackRate:1,readonlyVolume:!1,ready:!1,rebuffering:!1,replayState:i.State.NOT_AVAILABLE,seekable:{end:0,start:0},seekableDuration:0,seekingTo:null,showCast:!1,textTracks:[],useHTMLTextTracks:!1,volume:1,waiting:!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2).__exportStar(n(893),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2).__exportStar(n(894),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextTrackSettings=void 0;var r=n(2),i=r.__importDefault(n(101)),a=n(235),o=n(897),s=function(){function e(){}return e.updateDisplaySettings=function(t){return e.saveDisplaySettings(t),e._trackDisplay.updateDisplaySettings(t),e._styleState},e.resetDisplaySettings=function(){return e.saveDisplaySettings(),e._trackDisplay.reset(),e._styleState},e.setInitialDisplaySettings=function(){if(Object.keys(e._styleState).length)e.updateDisplaySettings(e._styleState);else try{var t=i.default.getItem(a.TEXT_TRACK_DISPLAY_SETTINGS);t&&e.updateDisplaySettings(JSON.parse(t))}catch(e){}return e._styleState},e.saveDisplaySettings=function(t){t?(e._styleState=r.__assign(r.__assign({},e._styleState),t),i.default.setItem(a.TEXT_TRACK_DISPLAY_SETTINGS,JSON.stringify(e._styleState))):(e._styleState={},i.default.removeItem(a.TEXT_TRACK_DISPLAY_SETTINGS))},e._styleState={},e._trackDisplay=new o.TextTrackDisplay,e}();t.TextTrackSettings=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_DISPLAY_CONFIG=void 0;var r=n(236);t.DEFAULT_DISPLAY_CONFIG={styleTagId:r.STYLE_TAG_ID}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_TRACK_DISPLAY_SETTINGS=void 0,t.TEXT_TRACK_DISPLAY_SETTINGS="ds-ui-text-track-display-settings"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextTrackDisplay=void 0;var r=n(2),i=n(188),a=n(146),o=n(235),s=n(898),u=function(){function e(e){this._config=r.__assign(r.__assign({},o.DEFAULT_DISPLAY_CONFIG),e)}return e.prototype.updateDisplaySettings=function(e){var t,n;this.createStyleElement();var r=this._styleElement,i=null===(t=null==r?void 0:r.sheet)||void 0===t?void 0:t.rules[s.CssStyleRules.CUE_WRAPPER],a=null===(n=null==r?void 0:r.sheet)||void 0===n?void 0:n.rules[s.CssStyleRules.CUE];if(i instanceof CSSStyleRule&&a instanceof CSSStyleRule){if(e.fontColor&&(a.style.color=e.fontColor.value),e.backgroundColor&&(a.style.backgroundColor=e.backgroundColor.value),e.fontFamily&&(a.style.fontFamily=e.fontFamily),e.fontSize&&(a.style.fontSize=e.fontSize.value),e.fontVariant&&(a.style.fontVariant=e.fontVariant),e.characterEdgeStyle){var o=e.characterEdgeStyle,u=o.cssProperty,l=o.cssValue;a.style[u]=l}e.windowColor&&(i.style.backgroundColor=e.windowColor.value)}},e.prototype.reset=function(){this._styleElement&&(document.head.removeChild(this._styleElement),this._styleElement=void 0)},e.prototype.createStyleElement=function(){if(!this._styleElement){var e=document.createElement("style"),t=this._config,n=t.styleTagId,r=t.wrapperClassName,o=r?"."+r:"";e.id=n,e.innerHTML="\n                "+o+" ."+a.TEXT_CONTAINER_CLASSNAME+" ."+a.TEXT_WRAPPER_CLASSNAME+" {}\n                "+o+" ."+a.TEXT_CONTAINER_CLASSNAME+" ."+i.TEXT_TRACK_TEXT_CLASSNAME+" {}\n            ",document.head.appendChild(e),this._styleElement=e}},e}();t.TextTrackDisplay=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2).__exportStar(n(899),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CssStyleRules=void 0,function(e){e[e.CUE_WRAPPER=0]="CUE_WRAPPER",e[e.CUE=1]="CUE"}(t.CssStyleRules||(t.CssStyleRules={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chromecastBreaksToBreaks=void 0;t.chromecastBreaksToBreaks=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){var n=t.duration,r=t.position,i=t.isWatched;return n&&e.push({duration:n,isWatched:i,startTime:r}),e}),[])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copyToClipboard=void 0;t.copyToClipboard=function(e){var t="object"==typeof e?JSON.stringify(e,null,2):e,n=document.createElement("textarea");n.value=t,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cuePointsToBreaks=void 0;t.cuePointsToBreaks=function(e){return e.map((function(e){var t=e.end,n=e.played,r=e.start;return{duration:t-r,isWatched:n,startTime:r}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatTime=void 0;t.formatTime=function(e,t){var n=function(e){return e<10?"0"+e:e},r="";(e=isNaN(e)||e===1/0?0:e)<0&&(r="-",e*=-1);var i=Math.floor(e%60),a=Math.floor(e/60%60),o=Math.floor(e/3600);return t||o>0?""+r+o+":"+n(a)+":"+n(i):""+r+a+":"+n(i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getContentRangeFromStreamRange=void 0;t.getContentRangeFromStreamRange=function(e,t){var n=e.start,r=e.end,i=t.reduce((function(e,t){var i=t.startTime,a=i+t.duration;if(i>r||n>a)return e;var o=Math.max(n,i);return e+(Math.min(r,a)-o)}),0);return{start:n,end:r-i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getContentTimeFromStreamTime=void 0;t.getContentTimeFromStreamTime=function(e,t){var n=t.reduce((function(t,n){var r=n.startTime,i=n.duration;if(r<e){var a=e-r;return t+Math.min(i,a)}return t}),0);return e-n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLevelLabel=void 0,t.getLevelLabel=function(e,t){if(void 0===t&&(t=!0),e.label&&"auto"===e.label.toLowerCase())return e.label;var n=e.height+"p";return t?n+" ("+Math.round(e.bitrate/1e3)+"kbps)":n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStreamTimeFromContentTime=void 0;t.getStreamTimeFromContentTime=function(e,t){return t.sort((function(e,t){return e.startTime-t.startTime})).reduce((function(e,t){var n=t.startTime,r=t.duration;return n<e?e+r:e}),e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTextTrackTypes=void 0;var r=n(2);t.getTextTrackTypes=function(e){var t=new Set(e.reduce((function(e,t){var n=t.kind;return t.label?r.__spreadArray(r.__spreadArray([],r.__read(e)),[n]):e}),[]));return r.__spreadArray([],r.__read(t)).sort()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isActiveLevel=void 0,t.isActiveLevel=function(e){var t=e.currentBitrate,n=e.levelBitrate,r=e.levelVariant,i=e.currentVariant;return e.showLevelVariants?t===n&&i===r:t===n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=void 0;t.noop=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onWindowResize=void 0;var r=n(462);t.onWindowResize=r.fromEvent(window,"resize")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(94),t),r.__exportStar(n(913),t),r.__exportStar(n(240),t),r.__exportStar(n(241),t),r.__exportStar(n(242),t),r.__exportStar(n(243),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatDateCountdown=void 0;var r=n(240),i=n(241),a=n(242),o=n(243),s=function(e){return e<0?0:e};t.formatDateCountdown=function(e,t){var n=e-t,u=s(r.getDays(n,!0)),l=u.toString();return{days:!!u&&l,hours:s(i.getHours(n,!0)).toString(),minutes:s(a.getMinutes(n,!0)).toString(),seconds:s(o.getSeconds(n,!0)).toString()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mount=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(915),o=n(234);t.mount=function(e,t,n){void 0===n&&(n={});var s=document.createElement("div");s.className="ds-container";var u=e.getElement();return u.classList.add("ds-parent"),u.appendChild(s),{component:a.render(i.default.createElement(o.Container,r.__assign({},n,{player:e}),i.default.createElement(t,r.__assign({},n))),s),unmountComponent:function(){s&&(a.unmountComponentAtNode(s),u.removeChild(s))}}}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=n(916)},function(e,t,n){"use strict";var r=n(3),i=n(232),a=n(917);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h=Object.prototype.hasOwnProperty,p={},m={};function g(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(m,e)||!h.call(p,e)&&(f.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,_);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,_);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,_);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var T=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,S=60106,w=60107,A=60108,M=60114,L=60109,C=60110,D=60112,k=60113,P=60120,I=60115,O=60116,R=60121,x=60128,N=60129,j=60130,F=60131;if("function"==typeof Symbol&&Symbol.for){var U=Symbol.for;E=U("react.element"),S=U("react.portal"),w=U("react.fragment"),A=U("react.strict_mode"),M=U("react.profiler"),L=U("react.provider"),C=U("react.context"),D=U("react.forward_ref"),k=U("react.suspense"),P=U("react.suspense_list"),I=U("react.memo"),O=U("react.lazy"),R=U("react.block"),U("react.scope"),x=U("react.opaque.id"),N=U("react.debug_trace_mode"),j=U("react.offscreen"),F=U("react.legacy_hidden")}var B,Y="function"==typeof Symbol&&Symbol.iterator;function H(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Y&&e[Y]||e["@@iterator"])?e:null}function V(e){if(void 0===B)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var G=!1;function K(e,t){if(!e||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{G=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function W(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 22:return e=K(e.type._render,!1);case 1:return e=K(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case w:return"Fragment";case S:return"Portal";case M:return"Profiler";case A:return"StrictMode";case k:return"Suspense";case P:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case L:return(e._context.displayName||"Context")+".Provider";case D:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case I:return q(e.type);case R:return q(e._render);case O:t=e._payload,e=e._init;try{return q(e(t))}catch(e){}}return null}function z(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function le(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,me=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==de.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ye=["Webkit","ms","Moz","O"];function _e(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=_e(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ve).forEach((function(e){ye.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var Te=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(Te[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ae=null,Me=null,Le=null;function Ce(e){if(e=$r(e)){if("function"!=typeof Ae)throw Error(o(280));var t=e.stateNode;t&&(t=Zr(t),Ae(e.stateNode,e.type,t))}}function De(e){Me?Le?Le.push(e):Le=[e]:Me=e}function ke(){if(Me){var e=Me,t=Le;if(Le=Me=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Pe(e,t){return e(t)}function Ie(e,t,n,r,i){return e(t,n,r,i)}function Oe(){}var Re=Pe,xe=!1,Ne=!1;function je(){null===Me&&null===Le||(Oe(),ke())}function Fe(e,t){var n=e.stateNode;if(null===n)return null;var r=Zr(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var Ue=!1;if(d)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){Ue=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(e){Ue=!1}function Ye(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}var He=!1,Ve=null,Ge=!1,Ke=null,We={onError:function(e){He=!0,Ve=e}};function qe(e,t,n,r,i,a,o,s,u){He=!1,Ve=null,Ye.apply(We,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Qe(e){if(ze(e)!==e)throw Error(o(188))}function $e(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Qe(i),e;if(a===r)return Qe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Je(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var Ze,et,tt,nt,rt=!1,it=[],at=null,ot=null,st=null,ut=new Map,lt=new Map,ct=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function ht(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":ot=null;break;case"mouseover":case"mouseout":st=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lt.delete(t.pointerId)}}function pt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=ft(t,n,r,i,a),null!==t&&(null!==(t=$r(t))&&et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=Qr(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void nt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){tt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=$r(n))&&et(t),e.blockedOn=n,!1;t.shift()}return!0}function vt(e,t,n){gt(e)&&n.delete(t)}function yt(){for(rt=!1;0<it.length;){var e=it[0];if(null!==e.blockedOn){null!==(e=$r(e.blockedOn))&&Ze(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&it.shift()}null!==at&&gt(at)&&(at=null),null!==ot&&gt(ot)&&(ot=null),null!==st&&gt(st)&&(st=null),ut.forEach(vt),lt.forEach(vt)}function _t(e,t){e.blockedOn===t&&(e.blockedOn=null,rt||(rt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,yt)))}function bt(e){function t(t){return _t(t,e)}if(0<it.length){_t(it[0],e);for(var n=1;n<it.length;n++){var r=it[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==at&&_t(at,e),null!==ot&&_t(ot,e),null!==st&&_t(st,e),ut.forEach(t),lt.forEach(t),n=0;n<ct.length;n++)(r=ct[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ct.length&&null===(n=ct[0]).blockedOn;)mt(n),null===n.blockedOn&&ct.shift()}function Tt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:Tt("Animation","AnimationEnd"),animationiteration:Tt("Animation","AnimationIteration"),animationstart:Tt("Animation","AnimationStart"),transitionend:Tt("Transition","TransitionEnd")},St={},wt={};function At(e){if(St[e])return St[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in wt)return St[e]=n[t];return e}d&&(wt=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Mt=At("animationend"),Lt=At("animationiteration"),Ct=At("animationstart"),Dt=At("transitionend"),kt=new Map,Pt=new Map,It=["abort","abort",Mt,"animationEnd",Lt,"animationIteration",Ct,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function Ot(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),kt.set(r,i),l(i,[r])}}(0,a.unstable_now)();var Rt=8;function xt(e){if(0!=(1&e))return Rt=15,1;if(0!=(2&e))return Rt=14,2;if(0!=(4&e))return Rt=13,4;var t=24&e;return 0!==t?(Rt=12,t):0!=(32&e)?(Rt=11,32):0!==(t=192&e)?(Rt=10,t):0!=(256&e)?(Rt=9,256):0!==(t=3584&e)?(Rt=8,t):0!=(4096&e)?(Rt=7,4096):0!==(t=4186112&e)?(Rt=6,t):0!==(t=62914560&e)?(Rt=5,t):67108864&e?(Rt=4,67108864):0!=(134217728&e)?(Rt=3,134217728):0!==(t=805306368&e)?(Rt=2,t):0!=(1073741824&e)?(Rt=1,1073741824):(Rt=8,e)}function Nt(e,t){var n=e.pendingLanes;if(0===n)return Rt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Rt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=xt(u),i=Rt):0!==(s&=a)&&(r=xt(s),i=Rt)}else 0!==(a=n&~o)?(r=xt(a),i=Rt):0!==s&&(r=xt(s),i=Rt);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&o)){if(xt(t),i<=Rt)return t;Rt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ht(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ft(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ut(24&~t))?Ft(10,t):e;case 10:return 0===(e=Ut(192&~t))?Ft(8,t):e;case 8:return 0===(e=Ut(3584&~t))&&(0===(e=Ut(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Ut(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Ut(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Yt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Vt(e)/Gt|0)|0},Vt=Math.log,Gt=Math.LN2;var Kt=a.unstable_UserBlockingPriority,Wt=a.unstable_runWithPriority,qt=!0;function zt(e,t,n,r){xe||Oe();var i=Qt,a=xe;xe=!0;try{Ie(i,e,t,n,r)}finally{(xe=a)||je()}}function Xt(e,t,n,r){Wt(Kt,Qt.bind(null,e,t,n,r))}function Qt(e,t,n,r){var i;if(qt)if((i=0==(4&t))&&0<it.length&&-1<dt.indexOf(e))e=ft(null,e,t,n,r),it.push(e);else{var a=$t(e,t,n,r);if(null===a)i&&ht(e,r);else{if(i){if(-1<dt.indexOf(e))return e=ft(a,e,t,n,r),void it.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return at=pt(at,e,t,n,r,i),!0;case"dragenter":return ot=pt(ot,e,t,n,r,i),!0;case"mouseover":return st=pt(st,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return ut.set(a,pt(ut.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,lt.set(a,pt(lt.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;ht(e,r)}Dr(e,t,r,null,n)}}}function $t(e,t,n,r){var i=we(r);if(null!==(i=Qr(i))){var a=ze(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Dr(e,t,r,i,n),null}var Jt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function an(){return!1}function on(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:an,this.isPropagationStopped=an,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var sn,un,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=on(cn),fn=i({},cn,{view:0,detail:0}),hn=on(fn),pn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,un=e.screenY-ln.screenY):un=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:un}}),mn=on(pn),gn=on(i({},pn,{dataTransfer:0})),vn=on(i({},fn,{relatedTarget:0})),yn=on(i({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=on(i({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),bn=on(i({},cn,{data:0})),Tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function An(){return wn}var Mn=on(i({},fn,{key:function(e){if(e.key){var t=Tn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Ln=on(i({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=on(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Dn=on(i({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=on(i({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Pn=[9,13,27,32],In=d&&"CompositionEvent"in window,On=null;d&&"documentMode"in document&&(On=document.documentMode);var Rn=d&&"TextEvent"in window&&!On,xn=d&&(!In||On&&8<On&&11>=On),Nn=String.fromCharCode(32),jn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Yn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Yn[e.type]:"textarea"===t}function Vn(e,t,n,r){De(r),0<(t=Pr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Wn(e){Sr(e,0)}function qn(e){if($(Jr(e)))return e}function zn(e,t){if("change"===e)return t}var Xn=!1;if(d){var Qn;if(d){var $n="oninput"in document;if(!$n){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),$n="function"==typeof Jn.oninput}Qn=$n}else Qn=!1;Xn=Qn&&(!document.documentMode||9<document.documentMode)}function Zn(){Gn&&(Gn.detachEvent("onpropertychange",er),Kn=Gn=null)}function er(e){if("value"===e.propertyName&&qn(Kn)){var t=[];if(Vn(t,Kn,e,we(e)),e=Wn,xe)e(t);else{xe=!0;try{Pe(e,t)}finally{xe=!1,je()}}}}function tr(e,t,n){"focusin"===e?(Zn(),Kn=n,(Gn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Zn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Kn)}function rr(e,t){if("click"===e)return qn(t)}function ir(e,t){if("input"===e||"change"===e)return qn(t)}var ar="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},or=Object.prototype.hasOwnProperty;function sr(e,t){if(ar(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!or.call(t,n[r])||!ar(e[n[r]],t[n[r]]))return!1;return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function cr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var fr=d&&"documentMode"in document&&11>=document.documentMode,hr=null,pr=null,mr=null,gr=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;gr||null==hr||hr!==J(r)||("selectionStart"in(r=hr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&sr(mr,r)||(mr=r,0<(r=Pr(pr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=hr)))}Ot("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ot("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ot(It,2);for(var yr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),_r=0;_r<yr.length;_r++)Pt.set(yr[_r],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var br="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(br));function Er(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,l){if(qe.apply(this,arguments),He){if(!He)throw Error(o(198));var c=Ve;He=!1,Ve=null,Ge||(Ge=!0,Ke=c)}}(r,t,void 0,e),e.currentTarget=null}function Sr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Er(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Er(i,s,l),a=u}}}if(Ge)throw e=Ke,Ge=!1,Ke=null,e}function wr(e,t){var n=ei(t),r=e+"__bubble";n.has(r)||(Cr(t,e,2,!1),n.add(r))}var Ar="_reactListening"+Math.random().toString(36).slice(2);function Mr(e){e[Ar]||(e[Ar]=!0,s.forEach((function(t){Tr.has(t)||Lr(t,!1,e,null),Lr(t,!0,e,null)})))}function Lr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=ei(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Cr(a,e,i,t),o.add(s))}function Cr(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=zt;break;case 1:i=Xt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!Ue||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,i){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=Qr(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ne)return e(t,n);Ne=!0;try{Re(e,t,n)}finally{Ne=!1,je()}}((function(){var r=a,i=we(n),o=[];e:{var s=kt.get(e);if(void 0!==s){var u=dn,l=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":u=Mn;break;case"focusin":l="focus",u=vn;break;case"focusout":l="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Cn;break;case Mt:case Lt:case Ct:u=yn;break;case Dt:u=Dn;break;case"scroll":u=hn;break;case"wheel":u=kn;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Ln}var c=0!=(4&t),d=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==f&&(null!=(m=Fe(p,f))&&c.push(kr(p,m,h)))),d)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(l=n.relatedTarget||n.fromElement)||!Qr(l)&&!l[zr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?Qr(l):null)&&(l!==(d=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=mn,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ln,m="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==u?s:Jr(u),h=null==l?s:Jr(l),(s=new c(m,p+"leave",u,n,i)).target=d,s.relatedTarget=h,m=null,Qr(i)===r&&((c=new c(f,p+"enter",l,n,i)).target=h,c.relatedTarget=d,m=c),d=m,u&&l)e:{for(f=l,p=0,h=c=u;h;h=Ir(h))p++;for(h=0,m=f;m;m=Ir(m))h++;for(;0<p-h;)c=Ir(c),p--;for(;0<h-p;)f=Ir(f),h--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=Ir(c),f=Ir(f)}c=null}else c=null;null!==u&&Or(o,s,u,c,!1),null!==l&&null!==d&&Or(o,d,l,c,!0)}if("select"===(u=(s=r?Jr(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=zn;else if(Hn(s))if(Xn)g=ir;else{g=nr;var v=tr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=rr);switch(g&&(g=g(e,r))?Vn(o,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ie(s,"number",s.value)),v=r?Jr(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(hr=v,pr=r,mr=null);break;case"focusout":mr=pr=hr=null;break;case"mousedown":gr=!0;break;case"contextmenu":case"mouseup":case"dragend":gr=!1,vr(o,n,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":vr(o,n,i)}var y;if(In)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?Fn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(xn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(y=tn()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(v=Pr(r,_)).length&&(_=new bn(_,e,null,n,i),o.push({event:_,listeners:v}),y?_.data=y:null!==(y=Un(n))&&(_.data=y))),(y=Rn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(jn=!0,Nn);case"textInput":return(e=t.data)===Nn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!In&&Fn(e,t)?(e=tn(),en=Zt=Jt=null,Bn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Pr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Sr(o,t)}))}function kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Pr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Fe(e,n))&&r.unshift(kr(e,a,i)),null!=(a=Fe(e,t))&&r.push(kr(e,a,i))),e=e.return}return r}function Ir(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Or(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Fe(n,a))&&o.unshift(kr(n,u,s)):i||null!=(u=Fe(n,a))&&o.push(kr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Rr(){}var xr=null,Nr=null;function jr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Fr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ur="function"==typeof setTimeout?setTimeout:void 0,Br="function"==typeof clearTimeout?clearTimeout:void 0;function Yr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Vr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Gr=0;var Kr=Math.random().toString(36).slice(2),Wr="__reactFiber$"+Kr,qr="__reactProps$"+Kr,zr="__reactContainer$"+Kr,Xr="__reactEvents$"+Kr;function Qr(e){var t=e[Wr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zr]||n[Wr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Vr(e);null!==e;){if(n=e[Wr])return n;e=Vr(e)}return t}n=(e=n).parentNode}return null}function $r(e){return!(e=e[Wr]||e[zr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Jr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Zr(e){return e[qr]||null}function ei(e){var t=e[Xr];return void 0===t&&(t=e[Xr]=new Set),t}var ti=[],ni=-1;function ri(e){return{current:e}}function ii(e){0>ni||(e.current=ti[ni],ti[ni]=null,ni--)}function ai(e,t){ti[++ni]=e.current,e.current=t}var oi={},si=ri(oi),ui=ri(!1),li=oi;function ci(e,t){var n=e.type.contextTypes;if(!n)return oi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function di(e){return null!=(e=e.childContextTypes)}function fi(){ii(ui),ii(si)}function hi(e,t,n){if(si.current!==oi)throw Error(o(168));ai(si,t),ai(ui,n)}function pi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,q(t)||"Unknown",a));return i({},n,r)}function mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||oi,li=si.current,ai(si,e),ai(ui,ui.current),!0}function gi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=pi(e,t,li),r.__reactInternalMemoizedMergedChildContext=e,ii(ui),ii(si),ai(si,e)):ii(ui),ai(ui,n)}var vi=null,yi=null,_i=a.unstable_runWithPriority,bi=a.unstable_scheduleCallback,Ti=a.unstable_cancelCallback,Ei=a.unstable_shouldYield,Si=a.unstable_requestPaint,wi=a.unstable_now,Ai=a.unstable_getCurrentPriorityLevel,Mi=a.unstable_ImmediatePriority,Li=a.unstable_UserBlockingPriority,Ci=a.unstable_NormalPriority,Di=a.unstable_LowPriority,ki=a.unstable_IdlePriority,Pi={},Ii=void 0!==Si?Si:function(){},Oi=null,Ri=null,xi=!1,Ni=wi(),ji=1e4>Ni?wi:function(){return wi()-Ni};function Fi(){switch(Ai()){case Mi:return 99;case Li:return 98;case Ci:return 97;case Di:return 96;case ki:return 95;default:throw Error(o(332))}}function Ui(e){switch(e){case 99:return Mi;case 98:return Li;case 97:return Ci;case 96:return Di;case 95:return ki;default:throw Error(o(332))}}function Bi(e,t){return e=Ui(e),_i(e,t)}function Yi(e,t,n){return e=Ui(e),bi(e,t,n)}function Hi(){if(null!==Ri){var e=Ri;Ri=null,Ti(e)}Vi()}function Vi(){if(!xi&&null!==Oi){xi=!0;var e=0;try{var t=Oi;Bi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Oi=null}catch(t){throw null!==Oi&&(Oi=Oi.slice(e+1)),bi(Mi,Hi),t}finally{xi=!1}}}var Gi=T.ReactCurrentBatchConfig;function Ki(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Wi=ri(null),qi=null,zi=null,Xi=null;function Qi(){Xi=zi=qi=null}function $i(e){var t=Wi.current;ii(Wi),e.type._context._currentValue=t}function Ji(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function Zi(e,t){qi=e,Xi=zi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Po=!0),e.firstContext=null)}function ea(e,t){if(Xi!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Xi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===zi){if(null===qi)throw Error(o(308));zi=t,qi.dependencies={lanes:0,firstContext:t,responders:null}}else zi=zi.next=t;return e._currentValue}var ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function oa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var a=e.updateQueue;ta=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var d=e.alternate;if(null!==d){var f=(d=d.updateQueue).lastBaseUpdate;f!==s&&(null===f?d.firstBaseUpdate=c:f.next=c,d.lastBaseUpdate=l)}}if(null!==o){for(f=a.baseState,s=0,d=c=l=null;;){u=o.lane;var h=o.eventTime;if((r&u)===u){null!==d&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(u=t,h=n,m.tag){case 1:if("function"==typeof(p=m.payload)){f=p.call(h,f,u);break e}f=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(u="function"==typeof(p=m.payload)?p.call(h,f,u):p))break e;f=i({},f,u);break e;case 2:ta=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else h={eventTime:h,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=h,l=f):d=d.next=h,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===d&&(l=f),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=d,Rs|=s,e.lanes=s,e.memoizedState=f}}function ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var la=(new r.Component).refs;function ca(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var da={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=au(),i=ou(e),a=ia(r,i);a.payload=t,null!=n&&(a.callback=n),aa(e,a),su(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=au(),i=ou(e),a=ia(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),aa(e,a),su(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=au(),r=ou(e),i=ia(n,r);i.tag=2,null!=t&&(i.callback=t),aa(e,i),su(e,r,n)}};function fa(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function ha(e,t,n){var r=!1,i=oi,a=t.contextType;return"object"==typeof a&&null!==a?a=ea(a):(i=di(t)?li:si.current,a=(r=null!=(r=t.contextTypes))?ci(e,i):oi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=da,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function pa(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&da.enqueueReplaceState(t,t.state,null)}function ma(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=ea(a):(a=di(t)?li:si.current,i.context=ci(e,a)),sa(e,n,i,r),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(ca(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&da.enqueueReplaceState(i,i.state,null),sa(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var ga=Array.isArray;function va(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===la&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function ya(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function _a(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Uu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Vu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=va(e,t,n),r.return=e,r):((r=Bu(n.type,n.key,n.props,null,e.mode,r)).ref=va(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Yu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Vu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Bu(t.type,t.key,t.props,null,e.mode,n)).ref=va(e,null,t),n.return=e,n;case S:return(t=Gu(t,e.mode,n)).return=e,t}if(ga(t)||H(t))return(t=Yu(t,e.mode,n,null)).return=e,t;ya(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?n.type===w?d(e,t,n.props.children,r,i):l(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null}if(ga(n)||H(n))return null!==i?null:d(e,t,n,r,null);ya(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case E:return e=e.get(null===r.key?n:r.key)||null,r.type===w?d(t,e,r.props.children,i,r.key):l(t,e,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ga(r)||H(r))return d(t,e=e.get(n)||null,r,i,null);ya(t,r)}return null}function m(i,o,s,u){for(var l=null,c=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=h(i,d,s[m],u);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=a(v,o,m),null===c?l=v:c.sibling=v,c=v,d=g}if(m===s.length)return n(i,d),l;if(null===d){for(;m<s.length;m++)null!==(d=f(i,s[m],u))&&(o=a(d,o,m),null===c?l=d:c.sibling=d,c=d);return l}for(d=r(i,d);m<s.length;m++)null!==(g=p(d,i,m,s[m],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?l=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),l}function g(i,s,u,l){var c=H(u);if("function"!=typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var d=c=null,m=s,g=s=0,v=null,y=u.next();null!==m&&!y.done;g++,y=u.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=h(i,m,y.value,l);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(i,m),s=a(_,s,g),null===d?c=_:d.sibling=_,d=_,m=v}if(y.done)return n(i,m),c;if(null===m){for(;!y.done;g++,y=u.next())null!==(y=f(i,y.value,l))&&(s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return c}for(m=r(i,m);!y.done;g++,y=u.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,a,u){var l="object"==typeof a&&null!==a&&a.type===w&&null===a.key;l&&(a=a.props.children);var c="object"==typeof a&&null!==a;if(c)switch(a.$$typeof){case E:e:{for(c=a.key,l=r;null!==l;){if(l.key===c){switch(l.tag){case 7:if(a.type===w){n(e,l.sibling),(r=i(l,a.props.children)).return=e,e=r;break e}break;default:if(l.elementType===a.type){n(e,l.sibling),(r=i(l,a.props)).ref=va(e,l,a),r.return=e,e=r;break e}}n(e,l);break}t(e,l),l=l.sibling}a.type===w?((r=Yu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Bu(a.type,a.key,a.props,null,e.mode,u)).ref=va(e,r,a),u.return=e,e=u)}return s(e);case S:e:{for(l=a.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Gu(a,e.mode,u)).return=e,e=r}return s(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Vu(a,e.mode,u)).return=e,e=r),s(e);if(ga(a))return m(e,r,a,u);if(H(a))return g(e,r,a,u);if(c&&ya(e,a),void 0===a&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,q(e.type)||"Component"))}return n(e,r)}}var ba=_a(!0),Ta=_a(!1),Ea={},Sa=ri(Ea),wa=ri(Ea),Aa=ri(Ea);function Ma(e){if(e===Ea)throw Error(o(174));return e}function La(e,t){switch(ai(Aa,t),ai(wa,e),ai(Sa,Ea),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ii(Sa),ai(Sa,t)}function Ca(){ii(Sa),ii(wa),ii(Aa)}function Da(e){Ma(Aa.current);var t=Ma(Sa.current),n=he(t,e.type);t!==n&&(ai(wa,e),ai(Sa,n))}function ka(e){wa.current===e&&(ii(Sa),ii(wa))}var Pa=ri(0);function Ia(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oa=null,Ra=null,xa=!1;function Na(e,t){var n=ju(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function ja(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Fa(e){if(xa){var t=Ra;if(t){var n=t;if(!ja(e,t)){if(!(t=Hr(n.nextSibling))||!ja(e,t))return e.flags=-1025&e.flags|2,xa=!1,void(Oa=e);Na(Oa,n)}Oa=e,Ra=Hr(t.firstChild)}else e.flags=-1025&e.flags|2,xa=!1,Oa=e}}function Ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Oa=e}function Ba(e){if(e!==Oa)return!1;if(!xa)return Ua(e),xa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Fr(t,e.memoizedProps))for(t=Ra;t;)Na(e,t),t=Hr(t.nextSibling);if(Ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ra=Hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ra=null}}else Ra=Oa?Hr(e.stateNode.nextSibling):null;return!0}function Ya(){Ra=Oa=null,xa=!1}var Ha=[];function Va(){for(var e=0;e<Ha.length;e++)Ha[e]._workInProgressVersionPrimary=null;Ha.length=0}var Ga=T.ReactCurrentDispatcher,Ka=T.ReactCurrentBatchConfig,Wa=0,qa=null,za=null,Xa=null,Qa=!1,$a=!1;function Ja(){throw Error(o(321))}function Za(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function eo(e,t,n,r,i,a){if(Wa=a,qa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ga.current=null===e||null===e.memoizedState?Lo:Co,e=n(r,i),$a){a=0;do{if($a=!1,!(25>a))throw Error(o(301));a+=1,Xa=za=null,t.updateQueue=null,Ga.current=Do,e=n(r,i)}while($a)}if(Ga.current=Mo,t=null!==za&&null!==za.next,Wa=0,Xa=za=qa=null,Qa=!1,t)throw Error(o(300));return e}function to(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Xa?qa.memoizedState=Xa=e:Xa=Xa.next=e,Xa}function no(){if(null===za){var e=qa.alternate;e=null!==e?e.memoizedState:null}else e=za.next;var t=null===Xa?qa.memoizedState:Xa.next;if(null!==t)Xa=t,za=e;else{if(null===e)throw Error(o(310));e={memoizedState:(za=e).memoizedState,baseState:za.baseState,baseQueue:za.baseQueue,queue:za.queue,next:null},null===Xa?qa.memoizedState=Xa=e:Xa=Xa.next=e}return Xa}function ro(e,t){return"function"==typeof t?t(e):t}function io(e){var t=no(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=za,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,l=i;do{var c=l.lane;if((Wa&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),r=l.eagerReducer===e?l.eagerState:e(r,l.action);else{var d={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=d,a=r):u=u.next=d,qa.lanes|=c,Rs|=c}l=l.next}while(null!==l&&l!==i);null===u?a=r:u.next=s,ar(r,t.memoizedState)||(Po=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ao(e){var t=no(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);ar(a,t.memoizedState)||(Po=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function oo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Wa&e)===e)&&(t._workInProgressVersionPrimary=r,Ha.push(t))),e)return n(t._source);throw Ha.push(t),Error(o(350))}function so(e,t,n,r){var i=Ms;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Ga.current,l=u.useState((function(){return oo(i,t,n)})),c=l[1],d=l[0];l=Xa;var f=e.memoizedState,h=f.refs,p=h.getSnapshot,m=f.source;f=f.subscribe;var g=qa;return e.memoizedState={refs:h,source:t,subscribe:r},u.useEffect((function(){h.getSnapshot=n,h.setSnapshot=c;var e=a(t._source);if(!ar(s,e)){e=n(t._source),ar(d,e)||(c(e),e=ou(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Ht(o),l=1<<u;r[u]|=e,o&=~l}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=h.getSnapshot,n=h.setSnapshot;try{n(e(t._source));var r=ou(g);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),ar(p,n)&&ar(m,t)&&ar(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:ro,lastRenderedState:d}).dispatch=c=Ao.bind(null,qa,e),l.queue=e,l.baseQueue=null,d=oo(i,t,n),l.memoizedState=l.baseState=d),d}function uo(e,t,n){return so(no(),e,t,n)}function lo(e){var t=to();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ro,lastRenderedState:e}).dispatch=Ao.bind(null,qa,e),[t.memoizedState,e]}function co(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=qa.updateQueue)?(t={lastEffect:null},qa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function fo(e){return e={current:e},to().memoizedState=e}function ho(){return no().memoizedState}function po(e,t,n,r){var i=to();qa.flags|=e,i.memoizedState=co(1|t,n,void 0,void 0===r?null:r)}function mo(e,t,n,r){var i=no();r=void 0===r?null:r;var a=void 0;if(null!==za){var o=za.memoizedState;if(a=o.destroy,null!==r&&Za(r,o.deps))return void co(t,n,a,r)}qa.flags|=e,i.memoizedState=co(1|t,n,a,r)}function go(e,t){return po(516,4,e,t)}function vo(e,t){return mo(516,4,e,t)}function yo(e,t){return mo(4,2,e,t)}function _o(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function bo(e,t,n){return n=null!=n?n.concat([e]):null,mo(4,2,_o.bind(null,t,e),n)}function To(){}function Eo(e,t){var n=no();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Za(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function So(e,t){var n=no();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Za(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function wo(e,t){var n=Fi();Bi(98>n?98:n,(function(){e(!0)})),Bi(97<n?97:n,(function(){var n=Ka.transition;Ka.transition=1;try{e(!1),t()}finally{Ka.transition=n}}))}function Ao(e,t,n){var r=au(),i=ou(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===qa||null!==o&&o===qa)$a=Qa=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,ar(u,s))return}catch(e){}su(e,i,r)}}var Mo={readContext:ea,useCallback:Ja,useContext:Ja,useEffect:Ja,useImperativeHandle:Ja,useLayoutEffect:Ja,useMemo:Ja,useReducer:Ja,useRef:Ja,useState:Ja,useDebugValue:Ja,useDeferredValue:Ja,useTransition:Ja,useMutableSource:Ja,useOpaqueIdentifier:Ja,unstable_isNewReconciler:!1},Lo={readContext:ea,useCallback:function(e,t){return to().memoizedState=[e,void 0===t?null:t],e},useContext:ea,useEffect:go,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,po(4,2,_o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return po(4,2,e,t)},useMemo:function(e,t){var n=to();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=to();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ao.bind(null,qa,e),[r.memoizedState,e]},useRef:fo,useState:lo,useDebugValue:To,useDeferredValue:function(e){var t=lo(e),n=t[0],r=t[1];return go((function(){var t=Ka.transition;Ka.transition=1;try{r(e)}finally{Ka.transition=t}}),[e]),n},useTransition:function(){var e=lo(!1),t=e[0];return fo(e=wo.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=to();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},so(r,e,t,n)},useOpaqueIdentifier:function(){if(xa){var e=!1,t=function(e){return{$$typeof:x,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Gr++).toString(36))),Error(o(355))})),n=lo(t)[1];return 0==(2&qa.mode)&&(qa.flags|=516,co(5,(function(){n("r:"+(Gr++).toString(36))}),void 0,null)),t}return lo(t="r:"+(Gr++).toString(36)),t},unstable_isNewReconciler:!1},Co={readContext:ea,useCallback:Eo,useContext:ea,useEffect:vo,useImperativeHandle:bo,useLayoutEffect:yo,useMemo:So,useReducer:io,useRef:ho,useState:function(){return io(ro)},useDebugValue:To,useDeferredValue:function(e){var t=io(ro),n=t[0],r=t[1];return vo((function(){var t=Ka.transition;Ka.transition=1;try{r(e)}finally{Ka.transition=t}}),[e]),n},useTransition:function(){var e=io(ro)[0];return[ho().current,e]},useMutableSource:uo,useOpaqueIdentifier:function(){return io(ro)[0]},unstable_isNewReconciler:!1},Do={readContext:ea,useCallback:Eo,useContext:ea,useEffect:vo,useImperativeHandle:bo,useLayoutEffect:yo,useMemo:So,useReducer:ao,useRef:ho,useState:function(){return ao(ro)},useDebugValue:To,useDeferredValue:function(e){var t=ao(ro),n=t[0],r=t[1];return vo((function(){var t=Ka.transition;Ka.transition=1;try{r(e)}finally{Ka.transition=t}}),[e]),n},useTransition:function(){var e=ao(ro)[0];return[ho().current,e]},useMutableSource:uo,useOpaqueIdentifier:function(){return ao(ro)[0]},unstable_isNewReconciler:!1},ko=T.ReactCurrentOwner,Po=!1;function Io(e,t,n,r){t.child=null===e?Ta(t,null,n,r):ba(t,e.child,n,r)}function Oo(e,t,n,r,i){n=n.render;var a=t.ref;return Zi(t,i),r=eo(e,t,n,r,a,i),null===e||Po?(t.flags|=1,Io(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,es(e,t,i))}function Ro(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!=typeof o||Fu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Bu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,xo(e,t,o,r,i,a))}return o=e.child,0==(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:sr)(i,r)&&e.ref===t.ref)?es(e,t,a):(t.flags|=1,(e=Uu(o,r)).ref=t.ref,e.return=t,t.child=e)}function xo(e,t,n,r,i,a){if(null!==e&&sr(e.memoizedProps,r)&&e.ref===t.ref){if(Po=!1,0==(a&i))return t.lanes=e.lanes,es(e,t,a);0!=(16384&e.flags)&&(Po=!0)}return Fo(e,t,n,r,a)}function No(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},mu(t,n);else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},mu(t,e),null;t.memoizedState={baseLanes:0},mu(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,mu(t,r);return Io(e,t,i,n),t.child}function jo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Fo(e,t,n,r,i){var a=di(n)?li:si.current;return a=ci(t,a),Zi(t,i),n=eo(e,t,n,r,a,i),null===e||Po?(t.flags|=1,Io(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,es(e,t,i))}function Uo(e,t,n,r,i){if(di(n)){var a=!0;mi(t)}else a=!1;if(Zi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ha(t,n,r),ma(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"==typeof l&&null!==l?l=ea(l):l=ci(t,l=di(n)?li:si.current);var c=n.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||u!==l)&&pa(t,o,r,l),ta=!1;var f=t.memoizedState;o.state=f,sa(t,r,o,i),u=t.memoizedState,s!==r||f!==u||ui.current||ta?("function"==typeof c&&(ca(t,n,c,r),u=t.memoizedState),(s=ta||fa(t,n,s,r,f,u,l))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ra(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Ki(t.type,s),o.props=l,d=t.pendingProps,f=o.context,"object"==typeof(u=n.contextType)&&null!==u?u=ea(u):u=ci(t,u=di(n)?li:si.current);var h=n.getDerivedStateFromProps;(c="function"==typeof h||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==d||f!==u)&&pa(t,o,r,u),ta=!1,f=t.memoizedState,o.state=f,sa(t,r,o,i);var p=t.memoizedState;s!==d||f!==p||ui.current||ta?("function"==typeof h&&(ca(t,n,h,r),p=t.memoizedState),(l=ta||fa(t,n,l,r,f,p,u))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Bo(e,t,n,r,a,i)}function Bo(e,t,n,r,i,a){jo(e,t);var o=0!=(64&t.flags);if(!r&&!o)return i&&gi(t,n,!1),es(e,t,a);r=t.stateNode,ko.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,s,a)):Io(e,t,s,a),t.memoizedState=r.state,i&&gi(t,n,!0),t.child}function Yo(e){var t=e.stateNode;t.pendingContext?hi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&hi(0,t.context,!1),La(e,t.containerInfo)}var Ho,Vo,Go,Ko,Wo={dehydrated:null,retryLane:0};function qo(e,t,n){var r,i=t.pendingProps,a=Pa.current,o=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),ai(Pa,1&a),null===e?(void 0!==i.fallback&&Fa(t),e=i.children,a=i.fallback,o?(e=zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Wo,e):"number"==typeof i.unstable_expectedLoadTime?(e=zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Wo,t.lanes=33554432,e):((n=Hu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=Qo(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Wo,i):(n=Xo(e,t,i.children,n),t.memoizedState=null,n))}function zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Hu(t,i,0,null),n=Yu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function Xo(e,t,n,r){var i=e.child;return e=i.sibling,n=Uu(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Qo(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0==(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Uu(o,s),null!==e?r=Uu(e,r):(r=Yu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function $o(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ji(e.return,t)}function Jo(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function Zo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Io(e,t,r.children,n),0!=(2&(r=Pa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$o(e,n);else if(19===e.tag)$o(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ai(Pa,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ia(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Jo(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ia(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Jo(t,!0,n,null,a,t.lastEffect);break;case"together":Jo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function es(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rs|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Uu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ts(e,t){if(!xa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ns(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return di(t.type)&&fi(),null;case 3:return Ca(),ii(ui),ii(si),Va(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ba(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Vo(t),null;case 5:ka(t);var a=Ma(Aa.current);if(n=t.type,null!==e&&null!=t.stateNode)Go(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ma(Sa.current),Ba(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Wr]=t,r[qr]=s,n){case"dialog":wr("cancel",r),wr("close",r);break;case"iframe":case"object":case"embed":wr("load",r);break;case"video":case"audio":for(e=0;e<br.length;e++)wr(br[e],r);break;case"source":wr("error",r);break;case"img":case"image":case"link":wr("error",r),wr("load",r);break;case"details":wr("toggle",r);break;case"input":ee(r,s),wr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},wr("invalid",r);break;case"textarea":ue(r,s),wr("invalid",r)}for(var l in Ee(n,s),e=null,s)s.hasOwnProperty(l)&&(a=s[l],"children"===l?"string"==typeof a?r.textContent!==a&&(e=["children",a]):"number"==typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(l)&&null!=a&&"onScroll"===l&&wr("scroll",r));switch(n){case"input":Q(r),re(r,s,!0);break;case"textarea":Q(r),ce(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Rr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(l=9===a.nodeType?a:a.ownerDocument,e===de.html&&(e=fe(n)),e===de.html?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Wr]=t,e[qr]=r,Ho(e,t,!1,!1),t.stateNode=e,l=Se(n,r),n){case"dialog":wr("cancel",e),wr("close",e),a=r;break;case"iframe":case"object":case"embed":wr("load",e),a=r;break;case"video":case"audio":for(a=0;a<br.length;a++)wr(br[a],e);a=r;break;case"source":wr("error",e),a=r;break;case"img":case"image":case"link":wr("error",e),wr("load",e),a=r;break;case"details":wr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),wr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),wr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),wr("invalid",e);break;default:a=r}Ee(n,a);var c=a;for(s in c)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?be(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&me(e,d):"children"===s?"string"==typeof d?("textarea"!==n||""!==d)&&ge(e,d):"number"==typeof d&&ge(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=d&&"onScroll"===s&&wr("scroll",e):null!=d&&b(e,s,d,l))}switch(n){case"input":Q(e),re(e,r,!1);break;case"textarea":Q(e),ce(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=Rr)}jr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ko(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));n=Ma(Aa.current),Ma(Sa.current),Ba(t)?(r=t.stateNode,n=t.memoizedProps,r[Wr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Wr]=t,t.stateNode=r)}return null;case 13:return ii(Pa),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ba(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Pa.current)?0===Ps&&(Ps=3):(0!==Ps&&3!==Ps||(Ps=4),null===Ms||0==(134217727&Rs)&&0==(134217727&xs)||du(Ms,Cs))),(r||n)&&(t.flags|=4),null);case 4:return Ca(),Vo(t),null===e&&Mr(t.stateNode.containerInfo),null;case 10:return $i(t),null;case 17:return di(t.type)&&fi(),null;case 19:if(ii(Pa),null===(r=t.memoizedState))return null;if(s=0!=(64&t.flags),null===(l=r.rendering))if(s)ts(r,!1);else{if(0!==Ps||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=Ia(e))){for(t.flags|=64,ts(r,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ai(Pa,1&Pa.current|2),t.child}e=e.sibling}null!==r.tail&&ji()>Us&&(t.flags|=64,s=!0,ts(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Ia(l))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ts(r,!0),null===r.tail&&"hidden"===r.tailMode&&!l.alternate&&!xa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*ji()-r.renderingStartTime>Us&&1073741824!==n&&(t.flags|=64,s=!0,ts(r,!1),t.lanes=33554432);r.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=r.last)?n.sibling=l:t.child=l,r.last=l)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=ji(),n.sibling=null,t=Pa.current,ai(Pa,s?1&t|2:1&t),n):null;case 23:case 24:return gu(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function rs(e){switch(e.tag){case 1:di(e.type)&&fi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ca(),ii(ui),ii(si),Va(),0!=(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return ka(e),null;case 13:return ii(Pa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ii(Pa),null;case 4:return Ca(),null;case 10:return $i(e),null;case 23:case 24:return gu(),null;default:return null}}function is(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function as(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Vo=function(){},Go=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ma(Sa.current);var o,s=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=Rr)}for(d in Ee(n,r),n=null,a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(u.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=a?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!=typeof c&&"number"!=typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(u.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&wr("scroll",e),s||l===c||(s=[])):"object"==typeof c&&null!==c&&c.$$typeof===x?c.toString():(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Ko=function(e,t,n,r){n!==r&&(t.flags|=4)};var os="function"==typeof WeakMap?WeakMap:Map;function ss(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vs||(Vs=!0,Gs=r),as(0,t)},n}function us(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return as(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ks?Ks=new Set([this]):Ks.add(this),as(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ls="function"==typeof WeakSet?WeakSet:Set;function cs(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Ou(e,t)}else t.current=null}function ds(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ki(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Yr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function fs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(ku(n,e),Du(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ki(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ua(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}ua(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&jr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&bt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function hs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=_e("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ps(e,t){if(yi&&"function"==typeof yi.onCommitFiberUnmount)try{yi.onCommitFiberUnmount(vi,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))ku(t,n);else{r=t;try{i()}catch(e){Ou(r,e)}}n=n.next}while(n!==e)}break;case 1:if(cs(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Ou(t,e)}break;case 5:cs(t);break;case 4:ys(e,t)}}function ms(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function gs(e){return 5===e.tag||3===e.tag||4===e.tag}function vs(e){e:{for(var t=e.return;null!==t;){if(gs(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||gs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a)t=a?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode,n.insertBefore(t,r)):(n=r,n.appendChild(t)),r=r._reactRootContainer,null!=r||null!==n.onclick||(n.onclick=Rr));else if(4!==i&&(t=t.child,null!==t))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a)t=a?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&(t=t.child,null!==t))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function ys(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,l=u;;)if(ps(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break e;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ps(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function _s(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,i),t=Se(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?be(n,u):"dangerouslySetInnerHTML"===s?me(n,u):"children"===s?ge(n,u):b(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":le(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,bt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Fs=ji(),hs(t.child,!0)),void bs(t);case 19:return void bs(t);case 17:return;case 23:case 24:return void hs(t,null!==t.memoizedState)}throw Error(o(163))}function bs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ls),t.forEach((function(t){var r=xu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ts(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Es=Math.ceil,Ss=T.ReactCurrentDispatcher,ws=T.ReactCurrentOwner,As=0,Ms=null,Ls=null,Cs=0,Ds=0,ks=ri(0),Ps=0,Is=null,Os=0,Rs=0,xs=0,Ns=0,js=null,Fs=0,Us=1/0;function Bs(){Us=ji()+500}var Ys,Hs=null,Vs=!1,Gs=null,Ks=null,Ws=!1,qs=null,zs=90,Xs=[],Qs=[],$s=null,Js=0,Zs=null,eu=-1,tu=0,nu=0,ru=null,iu=!1;function au(){return 0!=(48&As)?ji():-1!==eu?eu:eu=ji()}function ou(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Fi()?1:2;if(0===tu&&(tu=Os),0!==Gi.transition){0!==nu&&(nu=null!==js?js.pendingLanes:0),e=tu;var t=4186112&~nu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Fi(),0!=(4&As)&&98===e?e=Ft(12,tu):e=Ft(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),tu),e}function su(e,t,n){if(50<Js)throw Js=0,Zs=null,Error(o(185));if(null===(e=uu(e,t)))return null;Yt(e,t,n),e===Ms&&(xs|=t,4===Ps&&du(e,Cs));var r=Fi();1===t?0!=(8&As)&&0==(48&As)?fu(e):(lu(e,n),0===As&&(Bs(),Hi())):(0==(4&As)||98!==r&&99!==r||(null===$s?$s=new Set([e]):$s.add(e)),lu(e,n)),js=e}function uu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function lu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Ht(s),l=1<<u,c=a[u];if(-1===c){if(0==(l&r)||0!=(l&i)){c=t,xt(l);var d=Rt;a[u]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=t&&(e.expiredLanes|=l);s&=~l}if(r=Nt(e,e===Ms?Cs:0),t=Rt,0===r)null!==n&&(n!==Pi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Pi&&Ti(n)}15===t?(n=fu.bind(null,e),null===Oi?(Oi=[n],Ri=bi(Mi,Vi)):Oi.push(n),n=Pi):14===t?n=Yi(99,fu.bind(null,e)):n=Yi(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),cu.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function cu(e){if(eu=-1,nu=tu=0,0!=(48&As))throw Error(o(327));var t=e.callbackNode;if(Cu()&&e.callbackNode!==t)return null;var n=Nt(e,e===Ms?Cs:0);if(0===n)return null;var r=n,i=As;As|=16;var a=_u();for(Ms===e&&Cs===r||(Bs(),vu(e,r));;)try{Eu();break}catch(t){yu(e,t)}if(Qi(),Ss.current=a,As=i,null!==Ls?r=0:(Ms=null,Cs=0,r=Ps),0!=(Os&xs))vu(e,0);else if(0!==r){if(2===r&&(As|=64,e.hydrate&&(e.hydrate=!1,Yr(e.containerInfo)),0!==(n=jt(e))&&(r=bu(e,n))),1===r)throw t=Is,vu(e,0),du(e,n),lu(e,ji()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:Au(e);break;case 3:if(du(e,n),(62914560&n)===n&&10<(r=Fs+500-ji())){if(0!==Nt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){au(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ur(Au.bind(null,e),r);break}Au(e);break;case 4:if(du(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Ht(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=ji()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Es(n/1960))-n)){e.timeoutHandle=Ur(Au.bind(null,e),n);break}Au(e);break;case 5:Au(e);break;default:throw Error(o(329))}}return lu(e,ji()),e.callbackNode===t?cu.bind(null,e):null}function du(e,t){for(t&=~Ns,t&=~xs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function fu(e){if(0!=(48&As))throw Error(o(327));if(Cu(),e===Ms&&0!=(e.expiredLanes&Cs)){var t=Cs,n=bu(e,t);0!=(Os&xs)&&(n=bu(e,t=Nt(e,t)))}else n=bu(e,t=Nt(e,0));if(0!==e.tag&&2===n&&(As|=64,e.hydrate&&(e.hydrate=!1,Yr(e.containerInfo)),0!==(t=jt(e))&&(n=bu(e,t))),1===n)throw n=Is,vu(e,0),du(e,t),lu(e,ji()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Au(e),lu(e,ji()),null}function hu(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(Bs(),Hi())}}function pu(e,t){var n=As;As&=-2,As|=8;try{return e(t)}finally{0===(As=n)&&(Bs(),Hi())}}function mu(e,t){ai(ks,Ds),Ds|=t,Os|=t}function gu(){Ds=ks.current,ii(ks)}function vu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Br(n)),null!==Ls)for(n=Ls.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&fi();break;case 3:Ca(),ii(ui),ii(si),Va();break;case 5:ka(r);break;case 4:Ca();break;case 13:case 19:ii(Pa);break;case 10:$i(r);break;case 23:case 24:gu()}n=n.return}Ms=e,Ls=Uu(e.current,null),Cs=Ds=Os=t,Ps=0,Is=null,Ns=xs=Rs=0}function yu(e,t){for(;;){var n=Ls;try{if(Qi(),Ga.current=Mo,Qa){for(var r=qa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Qa=!1}if(Wa=0,Xa=za=qa=null,$a=!1,ws.current=null,null===n||null===n.return){Ps=1,Is=t,Ls=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Cs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var l=u;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!=(1&Pa.current),f=o;do{var h;if(h=13===f.tag){var p=f.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var m=f.memoizedProps;h=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!d)}}if(h){var g=f.updateQueue;if(null===g){var v=new Set;v.add(l),f.updateQueue=v}else g.add(l);if(0==(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=ia(-1,1);y.tag=2,aa(s,y)}s.lanes|=1;break e}u=void 0,s=t;var _=a.pingCache;if(null===_?(_=a.pingCache=new os,u=new Set,_.set(l,u)):void 0===(u=_.get(l))&&(u=new Set,_.set(l,u)),!u.has(s)){u.add(s);var b=Ru.bind(null,a,l,s);l.then(b,b)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((q(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ps&&(Ps=2),u=is(u,s),f=o;do{switch(f.tag){case 3:a=u,f.flags|=4096,t&=-t,f.lanes|=t,oa(f,ss(0,a,t));break e;case 1:a=u;var T=f.type,E=f.stateNode;if(0==(64&f.flags)&&("function"==typeof T.getDerivedStateFromError||null!==E&&"function"==typeof E.componentDidCatch&&(null===Ks||!Ks.has(E)))){f.flags|=4096,t&=-t,f.lanes|=t,oa(f,us(f,a,t));break e}}f=f.return}while(null!==f)}wu(n)}catch(e){t=e,Ls===n&&null!==n&&(Ls=n=n.return);continue}break}}function _u(){var e=Ss.current;return Ss.current=Mo,null===e?Mo:e}function bu(e,t){var n=As;As|=16;var r=_u();for(Ms===e&&Cs===t||vu(e,t);;)try{Tu();break}catch(t){yu(e,t)}if(Qi(),As=n,Ss.current=r,null!==Ls)throw Error(o(261));return Ms=null,Cs=0,Ps}function Tu(){for(;null!==Ls;)Su(Ls)}function Eu(){for(;null!==Ls&&!Ei();)Su(Ls)}function Su(e){var t=Ys(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?wu(e):Ls=t,ws.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=ns(n,t,Ds)))return void(Ls=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Ds)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=rs(t)))return n.flags&=2047,void(Ls=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ls=t);Ls=t=e}while(null!==t);0===Ps&&(Ps=5)}function Au(e){var t=Fi();return Bi(99,Mu.bind(null,e,t)),null}function Mu(e,t){do{Cu()}while(null!==qs);if(0!=(48&As))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var l=31-Ht(a),c=1<<l;i[l]=0,s[l]=-1,u[l]=-1,a&=~c}if(null!==$s&&0==(24&r)&&$s.has(e)&&$s.delete(e),e===Ms&&(Ls=Ms=null,Cs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=As,As|=32,ws.current=null,xr=qt,dr(s=cr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,a=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(e){u=null;break e}var d=0,f=-1,h=-1,p=0,m=0,g=s,v=null;t:for(;;){for(var y;g!==u||0!==a&&3!==g.nodeType||(f=d+a),g!==l||0!==c&&3!==g.nodeType||(h=d+c),3===g.nodeType&&(d+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===s)break t;if(v===u&&++p===a&&(f=d),v===l&&++m===c&&(h=d),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}u=-1===f||-1===h?null:{start:f,end:h}}else u=null;u=u||{start:0,end:0}}else u=null;Nr={focusedElem:s,selectionRange:u},qt=!1,ru=null,iu=!1,Hs=r;do{try{Lu()}catch(e){if(null===Hs)throw Error(o(330));Ou(Hs,e),Hs=Hs.nextEffect}}while(null!==Hs);ru=null,Hs=r;do{try{for(s=e;null!==Hs;){var _=Hs.flags;if(16&_&&ge(Hs.stateNode,""),128&_){var b=Hs.alternate;if(null!==b){var T=b.ref;null!==T&&("function"==typeof T?T(null):T.current=null)}}switch(1038&_){case 2:vs(Hs),Hs.flags&=-3;break;case 6:vs(Hs),Hs.flags&=-3,_s(Hs.alternate,Hs);break;case 1024:Hs.flags&=-1025;break;case 1028:Hs.flags&=-1025,_s(Hs.alternate,Hs);break;case 4:_s(Hs.alternate,Hs);break;case 8:ys(s,u=Hs);var E=u.alternate;ms(u),null!==E&&ms(E)}Hs=Hs.nextEffect}}catch(e){if(null===Hs)throw Error(o(330));Ou(Hs,e),Hs=Hs.nextEffect}}while(null!==Hs);if(T=Nr,b=cr(),_=T.focusedElem,s=T.selectionRange,b!==_&&_&&_.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(_.ownerDocument.documentElement,_)){null!==s&&dr(_)&&(b=s.start,void 0===(T=s.end)&&(T=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(T,_.value.length)):(T=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(T=T.getSelection(),u=_.textContent.length,E=Math.min(s.start,u),s=void 0===s.end?E:Math.min(s.end,u),!T.extend&&E>s&&(u=s,s=E,E=u),u=lr(_,E),a=lr(_,s),u&&a&&(1!==T.rangeCount||T.anchorNode!==u.node||T.anchorOffset!==u.offset||T.focusNode!==a.node||T.focusOffset!==a.offset)&&((b=b.createRange()).setStart(u.node,u.offset),T.removeAllRanges(),E>s?(T.addRange(b),T.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),T.addRange(b))))),b=[];for(T=_;T=T.parentNode;)1===T.nodeType&&b.push({element:T,left:T.scrollLeft,top:T.scrollTop});for("function"==typeof _.focus&&_.focus(),_=0;_<b.length;_++)(T=b[_]).element.scrollLeft=T.left,T.element.scrollTop=T.top}qt=!!xr,Nr=xr=null,e.current=n,Hs=r;do{try{for(_=e;null!==Hs;){var S=Hs.flags;if(36&S&&fs(_,Hs.alternate,Hs),128&S){b=void 0;var w=Hs.ref;if(null!==w){var A=Hs.stateNode;switch(Hs.tag){case 5:b=A;break;default:b=A}"function"==typeof w?w(b):w.current=b}}Hs=Hs.nextEffect}}catch(e){if(null===Hs)throw Error(o(330));Ou(Hs,e),Hs=Hs.nextEffect}}while(null!==Hs);Hs=null,Ii(),As=i}else e.current=n;if(Ws)Ws=!1,qs=e,zs=t;else for(Hs=r;null!==Hs;)t=Hs.nextEffect,Hs.nextEffect=null,8&Hs.flags&&((S=Hs).sibling=null,S.stateNode=null),Hs=t;if(0===(r=e.pendingLanes)&&(Ks=null),1===r?e===Zs?Js++:(Js=0,Zs=e):Js=0,n=n.stateNode,yi&&"function"==typeof yi.onCommitFiberRoot)try{yi.onCommitFiberRoot(vi,n,void 0,64==(64&n.current.flags))}catch(e){}if(lu(e,ji()),Vs)throw Vs=!1,e=Gs,Gs=null,e;return 0!=(8&As)?null:(Hi(),null)}function Lu(){for(;null!==Hs;){var e=Hs.alternate;iu||null===ru||(0!=(8&Hs.flags)?Je(Hs,ru)&&(iu=!0):13===Hs.tag&&Ts(e,Hs)&&Je(Hs,ru)&&(iu=!0));var t=Hs.flags;0!=(256&t)&&ds(e,Hs),0==(512&t)||Ws||(Ws=!0,Yi(97,(function(){return Cu(),null}))),Hs=Hs.nextEffect}}function Cu(){if(90!==zs){var e=97<zs?97:zs;return zs=90,Bi(e,Pu)}return!1}function Du(e,t){Xs.push(t,e),Ws||(Ws=!0,Yi(97,(function(){return Cu(),null})))}function ku(e,t){Qs.push(t,e),Ws||(Ws=!0,Yi(97,(function(){return Cu(),null})))}function Pu(){if(null===qs)return!1;var e=qs;if(qs=null,0!=(48&As))throw Error(o(331));var t=As;As|=32;var n=Qs;Qs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===a)throw Error(o(330));Ou(a,e)}}for(n=Xs,Xs=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(e){if(null===a)throw Error(o(330));Ou(a,e)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return As=t,Hi(),!0}function Iu(e,t,n){aa(e,t=ss(0,t=is(n,t),1)),t=au(),null!==(e=uu(e,1))&&(Yt(e,1,t),lu(e,t))}function Ou(e,t){if(3===e.tag)Iu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Iu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ks||!Ks.has(r))){var i=us(n,e=is(t,e),1);if(aa(n,i),i=au(),null!==(n=uu(n,1)))Yt(n,1,i),lu(n,i);else if("function"==typeof r.componentDidCatch&&(null===Ks||!Ks.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Ru(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=au(),e.pingedLanes|=e.suspendedLanes&n,Ms===e&&(Cs&n)===n&&(4===Ps||3===Ps&&(62914560&Cs)===Cs&&500>ji()-Fs?vu(e,0):Ns|=n),lu(e,t)}function xu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Fi()?1:2:(0===tu&&(tu=Os),0===(t=Ut(62914560&~tu))&&(t=4194304))),n=au(),null!==(e=uu(e,t))&&(Yt(e,t,n),lu(e,n))}function Nu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ju(e,t,n,r){return new Nu(e,t,n,r)}function Fu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uu(e,t){var n=e.alternate;return null===n?((n=ju(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Bu(e,t,n,r,i,a){var s=2;if(r=e,"function"==typeof e)Fu(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case w:return Yu(n.children,i,a,t);case N:s=8,i|=16;break;case A:s=8,i|=1;break;case M:return(e=ju(12,n,t,8|i)).elementType=M,e.type=M,e.lanes=a,e;case k:return(e=ju(13,n,t,i)).type=k,e.elementType=k,e.lanes=a,e;case P:return(e=ju(19,n,t,i)).elementType=P,e.lanes=a,e;case j:return Hu(n,i,a,t);case F:return(e=ju(24,n,t,i)).elementType=F,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case L:s=10;break e;case C:s=9;break e;case D:s=11;break e;case I:s=14;break e;case O:s=16,r=null;break e;case R:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=ju(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Yu(e,t,n,r){return(e=ju(7,e,r,t)).lanes=n,e}function Hu(e,t,n,r){return(e=ju(23,e,r,t)).elementType=j,e.lanes=n,e}function Vu(e,t,n){return(e=ju(6,e,null,t)).lanes=n,e}function Gu(e,t,n){return(t=ju(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ku(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Wu(e,t,n,r){var i=t.current,a=au(),s=ou(i);e:if(n){t:{if(ze(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(di(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var l=n.type;if(di(l)){n=pi(n,l,u);break e}}n=u}else n=oi;return null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),su(i,s,a),s}function qu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xu(e,t){zu(e,t),(e=e.alternate)&&zu(e,t)}function Qu(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ku(e,t,null!=n&&!0===n.hydrate),t=ju(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,na(t),e[zr]=n.current,Mr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=qu(o);s.call(e)}}Wu(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Qu(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"==typeof i){var u=i;i=function(){var e=qu(o);u.call(e)}}pu((function(){Wu(t,o,e,i)}))}return qu(o)}function Zu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$u(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ys=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ui.current)Po=!0;else{if(0==(n&r)){switch(Po=!1,t.tag){case 3:Yo(t),Ya();break;case 5:Da(t);break;case 1:di(t.type)&&mi(t);break;case 4:La(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ai(Wi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?qo(e,t,n):(ai(Pa,1&Pa.current),null!==(t=es(e,t,n))?t.sibling:null);ai(Pa,1&Pa.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Zo(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ai(Pa,Pa.current),r)break;return null;case 23:case 24:return t.lanes=0,No(e,t,n)}return es(e,t,n)}Po=0!=(16384&e.flags)}else Po=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=ci(t,si.current),Zi(t,n),i=eo(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,di(r)){var a=!0;mi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&ca(t,r,s,e),i.updater=da,t.stateNode=i,i._reactInternals=t,ma(t,r,e,n),t=Bo(null,t,r,!0,a,n)}else t.tag=0,Io(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"==typeof e)return Fu(e)?1:0;if(null!=e){if((e=e.$$typeof)===D)return 11;if(e===I)return 14}return 2}(i),e=Ki(i,e),a){case 0:t=Fo(null,t,i,e,n);break e;case 1:t=Uo(null,t,i,e,n);break e;case 11:t=Oo(null,t,i,e,n);break e;case 14:t=Ro(null,t,i,Ki(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Fo(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 1:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 3:if(Yo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ra(e,t),sa(t,r,null,n),(r=t.memoizedState.element)===i)Ya(),t=es(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Ra=Hr(t.stateNode.containerInfo.firstChild),Oa=t,a=xa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Ha.push(a);for(n=Ta(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Io(e,t,r,n),Ya();t=t.child}return t;case 5:return Da(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Fr(r,i)?s=null:null!==a&&Fr(r,a)&&(t.flags|=16),jo(e,t),Io(e,t,s,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return qo(e,t,n);case 4:return La(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ba(t,null,r,n):Io(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Oo(e,t,r,i=t.elementType===r?i:Ki(r,i),n);case 7:return Io(e,t,t.pendingProps,n),t.child;case 8:case 12:return Io(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(ai(Wi,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=ar(u,a)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!ui.current){t=es(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&a)){1===u.tag&&((c=ia(-1,n&-n)).tag=2,aa(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),Ji(u.return,n),l.lanes|=n;break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Io(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,Zi(t,n),r=r(i=ea(i,a.unstable_observedBits)),t.flags|=1,Io(e,t,r,n),t.child;case 14:return a=Ki(i=t.type,t.pendingProps),Ro(e,t,i,a=Ki(i.type,a),r,n);case 15:return xo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ki(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,di(r)?(e=!0,mi(t)):e=!1,Zi(t,n),ha(t,r,i),ma(t,r,i,n),Bo(null,t,r,!0,e,n);case 19:return Zo(e,t,n);case 23:case 24:return No(e,t,n)}throw Error(o(156,t.tag))},Qu.prototype.render=function(e){Wu(e,this._internalRoot,null,null)},Qu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Wu(null,e,null,(function(){t[zr]=null}))},Ze=function(e){13===e.tag&&(su(e,4,au()),Xu(e,4))},et=function(e){13===e.tag&&(su(e,67108864,au()),Xu(e,67108864))},tt=function(e){if(13===e.tag){var t=au(),n=ou(e);su(e,n,t),Xu(e,n)}},nt=function(e,t){return t()},Ae=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Zr(r);if(!i)throw Error(o(90));$(r),ne(r,i)}}}break;case"textarea":le(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=hu,Ie=function(e,t,n,r,i){var a=As;As|=4;try{return Bi(98,e.bind(null,t,n,r,i))}finally{0===(As=a)&&(Bs(),Hi())}},Oe=function(){0==(49&As)&&(function(){if(null!==$s){var e=$s;$s=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,lu(e,ji())}))}Hi()}(),Cu())},Re=function(e,t){var n=As;As|=2;try{return e(t)}finally{0===(As=n)&&(Bs(),Hi())}};var el={Events:[$r,Jr,Zr,De,ke,Cu,{current:!1}]},tl={findFiberByHostInstance:Qr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{vi=rl.inject(nl),yi=rl}catch(e){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=Zu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=As;if(0!=(48&n))return e(t);As|=1;try{if(e)return Bi(99,e.bind(null,t))}finally{As=n,Hi()}},t.hydrate=function(e,t,n){if(!$u(t))throw Error(o(200));return Ju(null,e,t,!0,n)},t.render=function(e,t,n){if(!$u(t))throw Error(o(200));return Ju(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$u(e))throw Error(o(40));return!!e._reactRootContainer&&(pu((function(){Ju(null,null,e,!1,(function(){e._reactRootContainer=null,e[zr]=null}))})),!0)},t.unstable_batchedUpdates=hu,t.unstable_createPortal=function(e,t){return Zu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$u(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Ju(e,t,n,!1,r)},t.version="17.0.2"},function(e,t,n){"use strict";e.exports=n(918)},function(e,t,n){"use strict";var r,i,a,o;if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var u=Date,l=u.now();t.unstable_now=function(){return u.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,d=null,f=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(f,0),e}};r=function(e){null!==c?setTimeout(r,0,e):(c=e,setTimeout(f,0))},i=function(e,t){d=setTimeout(e,t)},a=function(){clearTimeout(d)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,v=null,y=-1,_=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5};var T=new MessageChannel,E=T.port2;T.port1.onmessage=function(){if(null!==v){var e=t.unstable_now();b=e+_;try{v(!0,e)?E.postMessage(null):(g=!1,v=null)}catch(e){throw E.postMessage(null),e}}else g=!1},r=function(e){v=e,g||(g=!0,E.postMessage(null))},i=function(e,n){y=h((function(){e(t.unstable_now())}),n)},a=function(){p(y),y=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<M(i,t)))break e;e[r]=t,e[n]=i,n=r}}function w(e){return void 0===(e=e[0])?null:e}function A(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>M(o,n))void 0!==u&&0>M(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>M(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function M(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var L=[],C=[],D=1,k=null,P=3,I=!1,O=!1,R=!1;function x(e){for(var t=w(C);null!==t;){if(null===t.callback)A(C);else{if(!(t.startTime<=e))break;A(C),t.sortIndex=t.expirationTime,S(L,t)}t=w(C)}}function N(e){if(R=!1,x(e),!O)if(null!==w(L))O=!0,r(j);else{var t=w(C);null!==t&&i(N,t.startTime-e)}}function j(e,n){O=!1,R&&(R=!1,a()),I=!0;var r=P;try{for(x(n),k=w(L);null!==k&&(!(k.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=k.callback;if("function"==typeof o){k.callback=null,P=k.priorityLevel;var s=o(k.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?k.callback=s:k===w(L)&&A(L),x(n)}else A(L);k=w(L)}if(null!==k)var u=!0;else{var l=w(C);null!==l&&i(N,l.startTime-n),u=!1}return u}finally{k=null,P=r,I=!1}}var F=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){O||I||(O=!0,r(j))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return w(L)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,n,o){var s=t.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:D++,callback:n,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,S(C,e),null===w(L)&&e===w(C)&&(R?a():R=!0,i(N,o-s))):(e.sortIndex=u,S(L,e),O||I||(O=!0,r(j))),e},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(244),t),r.__exportStar(n(252),t),r.__exportStar(n(253),t),r.__exportStar(n(254),t),r.__exportStar(n(255),t),r.__exportStar(n(256),t),r.__exportStar(n(257),t),r.__exportStar(n(258),t),r.__exportStar(n(259),t),r.__exportStar(n(260),t),r.__exportStar(n(261),t),r.__exportStar(n(262),t),r.__exportStar(n(263),t),r.__exportStar(n(264),t),r.__exportStar(n(265),t),r.__exportStar(n(266),t),r.__exportStar(n(267),t),r.__exportStar(n(268),t),r.__exportStar(n(269),t),r.__exportStar(n(270),t),r.__exportStar(n(271),t),r.__exportStar(n(272),t),r.__exportStar(n(273),t),r.__exportStar(n(274),t),r.__exportStar(n(275),t),r.__exportStar(n(149),t),r.__exportStar(n(146),t),r.__exportStar(n(276),t),r.__exportStar(n(277),t),r.__exportStar(n(278),t),r.__exportStar(n(279),t),r.__exportStar(n(280),t),r.__exportStar(n(973),t),r.__exportStar(n(150),t),r.__exportStar(n(1006),t),r.__exportStar(n(76),t),r.__exportStar(n(23),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CaretDown=void 0;var r=n(2),i=r.__importDefault(n(3));t.CaretDown=function(e){return i.default.createElement("svg",r.__assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"ds-icon ds-icon--caret-down"},e),i.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),i.default.createElement("path",{d:"M7 10l5 5 5-5z"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckIcon=void 0;var r=n(2),i=r.__importDefault(n(3)),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.default.createElement("svg",r.__assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",className:"ds-icon ds-icon--check"},this.props),i.default.createElement("path",{d:"M29.813 10.125c0 0.438-0.125 0.875-0.5 1.188l-15.313 15.375c-0.375 0.313-0.75 0.5-1.25 0.5-0.438 0-0.875-0.188-1.188-0.5l-8.875-8.875c-0.375-0.375-0.5-0.75-0.5-1.25 0-0.438 0.125-0.875 0.5-1.188l2.375-2.438c0.375-0.313 0.75-0.5 1.25-0.5 0.438 0 0.875 0.188 1.188 0.5l5.25 5.25 11.75-11.75c0.313-0.313 0.75-0.5 1.188-0.5 0.5 0 0.875 0.188 1.25 0.5l2.375 2.438c0.375 0.375 0.5 0.75 0.5 1.25z"}))},t}(i.default.PureComponent);t.CheckIcon=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChevronRight=void 0;var r=n(2),i=r.__importDefault(n(3));t.ChevronRight=function(e){return i.default.createElement("svg",r.__assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"icon icon--chevron-right"},e),i.default.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromecastIcon=void 0;var r=n(2),i=n(20),a=r.__importDefault(n(3)),o=n(245),s=n(246),u=n(247);t.ChromecastIcon=function(e){var t=e.castState,n=r.__rest(e,["castState"]);switch(t){case i.CastStates.CONNECTED:return a.default.createElement(o.CastConnectedIcon,r.__assign({},n));case i.CastStates.CONNECTING:return a.default.createElement(s.CastConnectingIcon,r.__assign({},n));default:return a.default.createElement(u.CastDisconnectedIcon,r.__assign({},n))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Close=void 0;var r=n(2),i=r.__importDefault(n(3));t.Close=function(e){return i.default.createElement("svg",r.__assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"ds-icon ds-icon--close"},e),i.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),i.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CogIcon=void 0;var r=n(2),i=r.__importDefault(n(3)),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"ds-icon ds-icon--cog"},i.default.createElement("path",{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}))},t}(i.default.PureComponent);t.CogIcon=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnterFullscreenIcon=void 0;var r=n(2),i=r.__importDefault(n(3)),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",className:"ds-icon ds-icon--enter-fullscreen"},i.default.createElement("path",{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"}))},t}(i.default.PureComponent);t.EnterFullscreenIcon=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExitFullscreenIcon=void 0;var r=n(2),i=r.__importDefault(n(3)),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",className:"ds-icon ds-icon--exit-fullscreen"},i.default.createElement("path",{d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"}))},t}(i.default.PureComponent);t.ExitFullscreenIcon=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForwardTenIcon=void 0;var r=n(2).__importDefault(n(3));t.ForwardTenIcon=function(){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",viewBox:"0 0 24 24",className:"ds-icon ds-icon--forward-ten"},r.default.createElement("g",null,r.default.createElement("rect",{fill:"none",height:"24",width:"24"})),r.default.createElement("g",null,r.default.createElement("g",null,r.default.createElement("path",{d:"M18,13c0,3.31-2.69,6-6,6s-6-2.69-6-6s2.69-6,6-6v4l5-5l-5-5v4c-4.42,0-8,3.58-8,8c0,4.42,3.58,8,8,8s8-3.58,8-8H18z"}),r.default.createElement("polygon",{points:"10.86,15.94 10.86,11.67 10.77,11.67 9,12.3 9,12.99 10.01,12.68 10.01,15.94"}),r.default.createElement("path",{d:"M12.25,13.44v0.74c0,1.9,1.31,1.82,1.44,1.82c0.14,0,1.44,0.09,1.44-1.82v-0.74c0-1.9-1.31-1.82-1.44-1.82 C13.55,11.62,12.25,11.53,12.25,13.44z M14.29,13.32v0.97c0,0.77-0.21,1.03-0.59,1.03c-0.38,0-0.6-0.26-0.6-1.03v-0.97 c0-0.75,0.22-1.01,0.59-1.01C14.07,12.3,14.29,12.57,14.29,13.32z"}))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeadphonesIcon=void 0;var r=n(2),i=r.__importDefault(n(3)),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"ds-icon ds-icon--headphones"},i.default.createElement("path",{d:"M160 288h-16c-35.35 0-64 28.7-64 64.12v63.76c0 35.41 28.65 64.12 64 64.12h16c17.67 0 32-14.36 32-32.06V320.06c0-17.71-14.33-32.06-32-32.06zm208 0h-16c-17.67 0-32 14.35-32 32.06v127.88c0 17.7 14.33 32.06 32 32.06h16c35.35 0 64-28.71 64-64.12v-63.76c0-35.41-28.65-64.12-64-64.12zM256 32C112.91 32 4.57 151.13 0 288v112c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16V288c0-114.67 93.33-207.8 208-207.82 114.67.02 208 93.15 208 207.82v112c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16V288C507.43 151.13 399.09 32 256 32z"}))},t}(i.default.PureComponent);t.HeadphonesIcon=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfoIcon=void 0;var r=n(2),i=r.__importDefault(n(3));t.InfoIcon=function(e){return i.default.createElement("svg",r.__assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"ds-icon ds-icon--info"},e),i.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstantReplayIcon=void 0;var r=n(2).__importDefault(n(3));t.InstantReplayIcon=function(){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"ds-icon ds-icon--instant-replay"},r.default.createElement("path",{d:"M504 255.532c.252 136.64-111.182 248.372-247.822 248.468-64.014.045-122.373-24.163-166.394-63.942-5.097-4.606-5.3-12.543-.443-17.4l16.96-16.96c4.529-4.529 11.776-4.659 16.555-.395C158.208 436.843 204.848 456 256 456c110.549 0 200-89.468 200-200 0-110.549-89.468-200-200-200-55.52 0-105.708 22.574-141.923 59.043l49.091 48.413c7.641 7.535 2.305 20.544-8.426 20.544H26.412c-6.627 0-12-5.373-12-12V45.443c0-10.651 12.843-16.023 20.426-8.544l45.097 44.474C124.866 36.067 187.15 8 256 8c136.811 0 247.747 110.781 248 247.532zm-167.058 90.173l14.116-19.409c3.898-5.36 2.713-12.865-2.647-16.763L280 259.778V116c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v168.222l88.179 64.13c5.36 3.897 12.865 2.712 16.763-2.647z"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenInNewIcon=void 0;var r=n(2),i=r.__importDefault(n(3));t.OpenInNewIcon=function(e){return i.default.createElement("svg",r.__assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"ds-icon ds-icon--open-in-new"},e),i.default.createElement("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PictureInPictureIcon=void 0;var r=n(2),i=r.__importDefault(n(3));t.PictureInPictureIcon=function(e){return i.default.createElement("svg",r.__assign({className:"ds-icon ds-icon--pip",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},e),i.default.createElement("path",{d:"M19 11h-8v6h8v-6zm4 8V4.98C23 3.88 22.1 3 21 3H3c-1.1 0-2 .88-2 1.98V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H3V4.97h18v14.05z"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayIcon=void 0;var r=n(2),i=r.__importDefault(n(3)),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.default.createElement("svg",{viewBox:"0 0 89 102",xmlns:"http://www.w3.org/2000/svg",className:"ds-icon ds-icon--play"},i.default.createElement("path",{d:"M88.5 51.0955L0 102.191V0L88.5 51.0955Z"}))},t}(i.default.PureComponent);t.PlayIcon=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayIcon=void 0;var r=n(2).__importDefault(n(3));t.ReplayIcon=function(){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"ds-icon ds-icon--replay"},r.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.default.createElement("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayTenIcon=void 0;var r=n(2).__importDefault(n(3));t.ReplayTenIcon=function(){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",className:"ds-icon ds-icon--replay-ten",viewBox:"0 0 24 24"},r.default.createElement("g",null,r.default.createElement("rect",{fill:"none",height:"24",width:"24"})),r.default.createElement("g",null,r.default.createElement("g",null,r.default.createElement("path",{d:"M11.99,5V1l-5,5l5,5V7c3.31,0,6,2.69,6,6s-2.69,6-6,6s-6-2.69-6-6h-2c0,4.42,3.58,8,8,8s8-3.58,8-8S16.41,5,11.99,5z"}),r.default.createElement("g",null,r.default.createElement("path",{d:"M10.89,16h-0.85v-3.26l-1.01,0.31v-0.69l1.77-0.63h0.09V16z"}),r.default.createElement("path",{d:"M15.17,14.24c0,0.32-0.03,0.6-0.1,0.82s-0.17,0.42-0.29,0.57s-0.28,0.26-0.45,0.33s-0.37,0.1-0.59,0.1 s-0.41-0.03-0.59-0.1s-0.33-0.18-0.46-0.33s-0.23-0.34-0.3-0.57s-0.11-0.5-0.11-0.82V13.5c0-0.32,0.03-0.6,0.1-0.82 s0.17-0.42,0.29-0.57s0.28-0.26,0.45-0.33s0.37-0.1,0.59-0.1s0.41,0.03,0.59,0.1c0.18,0.07,0.33,0.18,0.46,0.33 s0.23,0.34,0.3,0.57s0.11,0.5,0.11,0.82V14.24z M14.32,13.38c0-0.19-0.01-0.35-0.04-0.48s-0.07-0.23-0.12-0.31 s-0.11-0.14-0.19-0.17s-0.16-0.05-0.25-0.05s-0.18,0.02-0.25,0.05s-0.14,0.09-0.19,0.17s-0.09,0.18-0.12,0.31 s-0.04,0.29-0.04,0.48v0.97c0,0.19,0.01,0.35,0.04,0.48s0.07,0.24,0.12,0.32s0.11,0.14,0.19,0.17s0.16,0.05,0.25,0.05 s0.18-0.02,0.25-0.05s0.14-0.09,0.19-0.17s0.09-0.19,0.11-0.32s0.04-0.29,0.04-0.48V13.38z"})))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareIcon=void 0;var r=n(2),i=r.__importDefault(n(3));t.ShareIcon=function(e){return i.default.createElement("svg",r.__assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",className:"ds-icon ds-icon--share"},e),i.default.createElement("path",{fill:"currentColor",d:"M564.907 196.35L388.91 12.366C364.216-13.45 320 3.746 320 40.016v88.154C154.548 130.155 0 160.103 0 331.19c0 94.98 55.84 150.231 89.13 174.571 24.233 17.722 58.021-4.992 49.68-34.51C100.937 336.887 165.575 321.972 320 320.16V408c0 36.239 44.19 53.494 68.91 27.65l175.998-184c14.79-15.47 14.79-39.83-.001-55.3zm-23.127 33.18l-176 184c-4.933 5.16-13.78 1.73-13.78-5.53V288c-171.396 0-295.313 9.707-243.98 191.7C72 453.36 32 405.59 32 331.19 32 171.18 194.886 160 352 160V40c0-7.262 8.851-10.69 13.78-5.53l176 184a7.978 7.978 0 0 1 0 11.06z"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextTracksIcon=void 0;var r=n(2),i=r.__importDefault(n(3)),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.default.createElement("svg",{viewBox:"0 0 512 512",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:"ds-icon ds-icon--text-tracks"},i.default.createElement("path",{d:"M0,86v340h512V86H0z M482,396H30V116h452V396z"}),i.default.createElement("rect",{x:"70",y:"266",width:"252",height:"30"}),i.default.createElement("rect",{x:"352",y:"266",width:"90",height:"30"}),i.default.createElement("rect",{x:"190",y:"326",width:"252",height:"30"}),i.default.createElement("rect",{x:"70",y:"326",width:"90",height:"30"}))},t}(i.default.PureComponent);t.TextTracksIcon=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VolumeIcon=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getIconClassName=function(){var e=t.props,n=e.muted,r=e.volume,i="ds-icon__volume";return n||0===r?i+"--muted":r<.25?i+"--low":r<.75?i+"--mid":i+"--high"},t}return r.__extends(t,e),t.prototype.render=function(){var e=a.css("ds-icon","ds-icon__volume",this.getIconClassName());return i.default.createElement("svg",{className:e,viewBox:"0 0 576 480",xmlns:"http://www.w3.org/2000/svg"},i.default.createElement("path",{className:"ds-icon__volume-speaker",d:"M215.03,55.05 L126.06,144 L24,144 C10.74,144 0,154.74 0,168 L0,312 C0,325.25 10.74,336 24,336 L126.06,336 L215.03,424.95 C230.06,439.98 256,429.42 256,407.98 L256,72.02 C256,50.56 230.04,40.04 215.03,55.05 Z",fillRule:"nonzero"}),i.default.createElement("path",{className:"ds-icon__volume-muted",d:"M461.64,240 L507.28,194.36 C513.58,188.06 513.58,177.84 507.28,171.54 L484.46,148.72 C478.16,142.42 467.94,142.42 461.64,148.72 L416,194.36 L370.36,148.72 C364.06,142.42 353.84,142.42 347.54,148.72 L324.72,171.54 C318.42,177.84 318.42,188.06 324.72,194.36 L370.36,240 L324.73,285.63 C318.43,291.93 318.43,302.15 324.73,308.45 L347.55,331.27 C353.85,337.57 364.07,337.57 370.37,331.27 L416,285.64 L461.64,331.28 C467.94,337.58 478.16,337.58 484.46,331.28 L507.28,308.46 C513.58,302.16 513.58,291.94 507.28,285.64 L461.64,240 Z",fillRule:"nonzero"}),i.default.createElement("path",{className:"ds-icon__volume-low",d:"M338.23,163.13 C326.65,156.8 312.04,160.97 305.62,172.58 C299.23,184.19 303.46,198.78 315.07,205.19 C327.98,212.28 336,225.63 336,240 C336,254.38 327.98,267.72 315.08,274.81 C303.47,281.22 299.24,295.81 305.63,307.42 C312.06,319.08 326.68,323.22 338.24,316.87 C366.47,301.32 384.01,271.87 384.01,239.99 C384.01,208.11 366.47,178.67 338.23,163.13 Z",fillRule:"nonzero"}),i.default.createElement("path",{className:"ds-icon__volume-mid",d:"M480,240 C480,176.47 447.94,118.06 394.23,83.76 C383.04,76.62 368.2,79.94 361.11,91.22 C354.02,102.5 357.33,117.43 368.52,124.58 C408.27,149.97 432,193.11 432,240 C432,286.89 408.27,330.03 368.52,355.42 C357.33,362.56 354.02,377.49 361.11,388.78 C367.62,399.14 382.23,403.92 394.23,396.24 C447.94,361.94 480,303.54 480,240 Z",fillRule:"nonzero"}),i.default.createElement("path",{className:"ds-icon__volume-high",d:"M448.35,3.97 C437.18,-3.36 422.17,-0.27 414.84,10.92 C407.5,22.09 410.62,37.1 421.79,44.43 C488.06,87.92 527.61,161.03 527.61,240.01 C527.61,318.99 488.06,392.1 421.79,435.59 C410.62,442.91 407.5,457.93 414.84,469.09 C421.88,479.8 436.77,483.65 448.35,476.04 C528.27,423.58 576,335.33 576,240 C576,144.67 528.27,56.43 448.35,3.97 Z",fillRule:"nonzero"}))},t}(i.default.PureComponent);t.VolumeIcon=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13),o=n(23),s=n(148),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.$menu=i.default.createRef(),t.MenuCommon=new s.MenuCommon(t.$menu),t.getHeader=function(){var e=t.props.header;return e?i.default.createElement("div",{className:"ds-menu__heading"},e):null},t.getItems=function(){return t.props.items.map((function(e,t){var n=e.label,r=e.onClick,s=e.isActive;return i.default.createElement("div",{key:t,className:"ds-menu__item",onClick:r},i.default.createElement("div",{className:a.css("ds-menu__item-active",s&&"ds-menu__item-is-active")},i.default.createElement(o.CheckIcon,null)),i.default.createElement("span",{className:"ds-menu__item-label"},n))}))},t}return r.__extends(t,e),t.prototype.render=function(){var e=a.css("ds-menu",this.props.className);return i.default.createElement("div",{className:e,ref:this.$menu,onMouseEnter:this.MenuCommon.mouseEnter,onMouseLeave:this.MenuCommon.mouseLeave},i.default.createElement("div",{className:"ds-menu__content"},this.getHeader(),this.getItems()),i.default.createElement("div",{className:"ds-menu__icon"}," ",this.props.icon," "))},t}(i.default.PureComponent);t.Menu=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiMenu=void 0;var r=n(2),i=n(10),a=r.__importDefault(n(3)),o=n(13),s=n(23),u=n(148),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.$menu=a.default.createRef(),t.MenuCommon=new u.MenuCommon(t.$menu),t.getContent=function(e){return e.map((function(e,n){return a.default.createElement("div",{key:n,className:"ds-menu__section"},a.default.createElement("div",{className:"ds-menu__heading"},t.getHeader(n)),t.getItems(e))}))},t.getHeader=function(e){var n=t.props.headings;return n&&n[e]?n[e]:""},t.getItems=function(e){return e.map((function(e,t){var n=e.label,r=e.onClick,i=e.isActive;return a.default.createElement("div",{key:t,className:"ds-menu__item",onClick:r},a.default.createElement("div",{className:o.css("ds-menu__item-active",i&&"ds-menu__item-is-active")},a.default.createElement(s.CheckIcon,null)),a.default.createElement("div",{className:"ds-menu__item-label"},n))}))},t}return r.__extends(t,e),t.prototype.render=function(){var e=o.css("ds-menu",this.props.className),t=o.css("ds-menu__content",i.browser.isIE&&"ds-menu__content--compat");return a.default.createElement("div",{className:e,ref:this.$menu,onMouseEnter:this.MenuCommon.mouseEnter,onMouseLeave:this.MenuCommon.mouseLeave},a.default.createElement("div",{className:t},this.getContent(this.props.sections)),a.default.createElement("div",{className:"ds-menu__icon"}," ",this.props.icon," "))},t}(a.default.PureComponent);t.MultiMenu=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.default.createElement("div",{className:a.css("ds-button",this.props.className),onClick:this.props.onClick},this.props.children)},t}(i.default.PureComponent);t.Button=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useEnableAdControls=void 0;var r=n(2),i=n(144),a=n(74),o=n(10),s=r.__importStar(n(3)),u=n(282);t.useEnableAdControls=function(){var e=u.useVideoContext(),t=e.state.isPlayingBreak,n=e.player,l=r.__read(s.useState({enableAdCountDown:!0,enableLearnMore:!0}),2),c=l[0],d=l[1];return s.useEffect((function(){var e,r,s=null===(e=null==n?void 0:n.getPluginByType(a.IMAPlugin))||void 0===e?void 0:e.getIsActive(),u=null===(r=null==n?void 0:n.getPluginByType(i.ClientSideImaPlugin))||void 0===r?void 0:r.getIsActive();t&&(s&&(o.browser.isMobile?d({enableAdCountDown:!0,enableLearnMore:!1}):d({enableAdCountDown:!0,enableLearnMore:!0})),u&&(o.browser.isMobile?d({enableAdCountDown:!1,enableLearnMore:!1}):d({enableAdCountDown:!0,enableLearnMore:!0})))}),[t,n]),c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useScrollable=void 0;var r=n(2),i=r.__importStar(n(3));t.useScrollable=function(e,t){var n=e.parentElement,a=e.parentTargetHeightRatio,o=void 0===a?.8:a,s=e.targetElement;return i.useEffect((function(){if(n&&s){var e=n.getBoundingClientRect().height;return s.getBoundingClientRect().height/e<=o||(s.firstChild instanceof HTMLElement&&s.firstChild.focus(),s.style.height=e*o+"px",s.style.overflowY="auto"),function(){s.style.height="auto",s.style.overflowY="initial"}}}),r.__spreadArray(r.__spreadArray([],r.__read(t)),[s,n])),null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuOption=void 0,function(e){e.PLAYBACK_SPEED="PLAYBACK_SPEED",e.TEXT_TRACKS="TEXT_TRACKS",e.QUALITY="QUALITY",e.AUDIO_TRACKS="AUDIO_TRACKS"}(t.MenuOption||(t.MenuOption={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(13),s=n(23),u=n(108),l=n(288),c=n(44),d=n(63),f=function(e){var t=e.onClick,n=e.isOpen,r=e.containerRef,a=u.useSettingsContext().showSettingsControl,d=o.css(c.CLASSNAME,"ds-control",n&&"ds-settings--open");return a?i.default.createElement("div",{className:d,ref:r},i.default.createElement(l.SettingsMenu,{isOpen:n}),i.default.createElement("div",{className:"ds-menu__icon",onClick:t},i.default.createElement(s.CogIcon,null))):null};t.Settings=function(e){var t=a.useVideoContext().state.overlayIsActive,n=r.__read(i.default.useState(!1),2),o=n[0],s=n[1],l=i.default.useRef(null);return i.default.useEffect((function(){!t&&o&&s(!1)}),[t,o]),i.default.useEffect((function(){var e=l.current,t=function(t){var n=t.target;e===n||d.isSettingsNode(n)||s(!1)};return o&&document.body.addEventListener("click",t),function(){return document.body.removeEventListener("click",t)}}),[o]),i.default.createElement(u.SettingsContextProvider,r.__assign({},e),i.default.createElement(f,{onClick:function(){s((function(e){return!e}))},isOpen:o,containerRef:l}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextTracks=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(948),o=n(109),s=n(971),u=n(972);t.TextTracks=function(e){var t=e.goBack,n=e.selectSubMenuItem,l=r.__read(i.default.useState(!1),2),c=l[0],d=l[1],f=r.__read(i.default.useState(),2),h=f[0],p=f[1],m=function(e){n(null!=e?e:o.SubMenuOption.SHOW_TEXT_TRACK_OPTIONS),p(e)};return i.default.createElement(i.default.Fragment,null,!h&&(c?i.default.createElement(s.TextTrackOptions,{goBack:function(){n(),d(!1)},setActiveTextTrackOption:m}):i.default.createElement(u.TextTracksList,{openSubMenu:function(){n(o.SubMenuOption.SHOW_TEXT_TRACK_OPTIONS),d((function(e){return!e}))},goBack:function(){n(),t()}})),h?i.default.createElement(a.DisplayActiveTextTrackOption,{activeOption:h,goBack:function(){return m(void 0)}}):null)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayActiveTextTrackOption=void 0;var r=n(2).__importStar(n(3)),i=n(949),a=n(963),o=n(964),s=n(109),u=n(965),l=n(966),c=n(967),d=n(968),f=n(969),h=n(970);t.DisplayActiveTextTrackOption=function(e){var t=e.activeOption,n=e.goBack;switch(t){case s.TextTrackOption.BACKGROUND_COLOUR:return r.createElement(i.BackgroundColor,{goBack:n});case s.TextTrackOption.BACKGROUND_OPACITY:return r.createElement(a.BackgroundOpacity,{goBack:n});case s.TextTrackOption.CHARACTER_EDGE_STYLE:return r.createElement(o.CharacterEdgeStyle,{goBack:n});case s.TextTrackOption.FONT_COLOUR:return r.createElement(u.FontColor,{goBack:n});case s.TextTrackOption.FONT_FAMILY:return r.createElement(l.FontFamily,{goBack:n});case s.TextTrackOption.FONT_SIZE:return r.createElement(d.FontSize,{goBack:n});case s.TextTrackOption.FONT_OPACITY:return r.createElement(c.FontOpacity,{goBack:n});case s.TextTrackOption.WINDOW_COLOUR:return r.createElement(f.WindowColor,{goBack:n});case s.TextTrackOption.WINDOW_OPACITY:return r.createElement(h.WindowOpacity,{goBack:n});default:return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundColor=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(34),s=n(31),u=n(28),l=n(44),c=n(63);t.BackgroundColor=function(e){var t,n=e.goBack,d=a.useVideoContext(),f=d.controls.updateHtmlTextTrackDisplaySettings,h=null!==(t=d.state.htmlTextTrackDisplaySettings.backgroundColor)&&void 0!==t?t:void 0,p=null==h?void 0:h.opacityLabel,m=r.__read(i.useState(null==h?void 0:h.identifier),2),g=m[0],v=m[1];return i.createElement("div",{className:"ds-settings-menu__sub-menu"},i.createElement(s.SettingsHeading,{onClick:n},"Background colour"),l.COLOURS.map((function(e){return i.createElement(u.SettingsItem,{key:e,onClick:function(){return t=e,n=c.getOpacityValueFromLabel(p),r=c.getColourAsRgba(t,n),f({backgroundColor:{identifier:t,value:r,opacityLabel:p}}),void v(t);var t,n,r}},i.createElement(o.SettingsActiveItem,{isActive:e===g}),i.createElement("span",null,e))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLASSNAME=void 0,t.CLASSNAME="ds-settings"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COLOURS=void 0,t.COLOURS=["White","Yellow","Green","Cyan","Blue","Magenta","Red","Black"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BACKGROUND_OPACITY=void 0,t.DEFAULT_BACKGROUND_OPACITY={identifier:"Black",value:"#000",opacityLabel:"100%"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_FONT_OPACITY=void 0,t.DEFAULT_FONT_OPACITY={identifier:"White",value:"#fff",opacityLabel:"100%"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FONT_FAMILIES=void 0,t.FONT_FAMILIES=["Arial","Verdana","Lucida","Times New Roman","Courier","Impact","Trebuchet","Georgia"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FONT_SIZES=void 0,t.FONT_SIZES={"50%":.75,"75%":1,"100%":1.5,"150%":2,"200%":3,"300%":4,"400%":5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OPACITY_LEVELS=void 0,t.OPACITY_LEVELS={"0%":0,"25%":.25,"50%":.5,"75%":.75,"100%":1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getColourAsRgba=void 0;var r=n(109);t.getColourAsRgba=function(e,t){return void 0===t&&(t=1),r.Colours[e].replace("%",t.toString())}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Colours=void 0,function(e){e.Black="rgba(0, 0, 0, %)",e.Blue="rgba(0, 0, 255, %)",e.Cyan="rgba(0, 255, 255, %)",e.Green="rgba(0, 128, 0, %)",e.Magenta="rgba(255, 0, 255, %)",e.Red="rgba(255, 0, 0, %)",e.Yellow="rgba(255, 255, 0, %)",e.White="rgba(255, 255, 255, %)"}(t.Colours||(t.Colours={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubMenuOption=void 0,function(e){e.SHOW_TEXT_TRACK_OPTIONS="SHOW_TEXT_TRACK_OPTIONS"}(t.SubMenuOption||(t.SubMenuOption={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextTrackOption=void 0,function(e){e.BACKGROUND_COLOUR="BACKGROUND_COLOUR",e.BACKGROUND_OPACITY="BACKGROUND_OPACITY",e.CHARACTER_EDGE_STYLE="CHARACTER_EDGE_STYLE",e.FONT_COLOUR="FONT_COLOUR",e.FONT_FAMILY="FONT_FAMILY",e.FONT_SIZE="FONT_SIZE",e.FONT_OPACITY="FONT_OPACITY",e.WINDOW_COLOUR="WINDOW_COLOUR",e.WINDOW_OPACITY="WINDOW_OPACITY"}(t.TextTrackOption||(t.TextTrackOption={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOpacityValueFromLabel=void 0;var r=n(44);t.getOpacityValueFromLabel=function(e){if(e)return r.OPACITY_LEVELS[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSettingsNode=void 0;var r=n(2),i=n(44);t.isSettingsNode=function(e){for(var t=e,n=0;t&&n<10;){if(r.__spreadArray([],r.__read(t.classList)).some((function(e){return e.includes(i.CLASSNAME)})))return!0;t=t.parentElement,n+=1}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundOpacity=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(34),s=n(31),u=n(28),l=n(44),c=n(63),d=Object.keys(l.OPACITY_LEVELS);t.BackgroundOpacity=function(e){var t,n,f=e.goBack,h=a.useVideoContext(),p=h.controls.updateHtmlTextTrackDisplaySettings,m=h.state.htmlTextTrackDisplaySettings,g=null!==(t=m.backgroundColor)&&void 0!==t?t:void 0,v=r.__read(i.useState(null!==(n=null==g?void 0:g.opacityLabel)&&void 0!==n?n:l.DEFAULT_BACKGROUND_OPACITY.opacityLabel),2),y=v[0],_=v[1];return i.createElement("div",{className:"ds-settings-menu__sub-menu"},i.createElement(s.SettingsHeading,{onClick:f},"Background opacity"),d.map((function(e){return i.createElement(u.SettingsItem,{key:e,onClick:function(){return function(e){var t,n=null!==(t=m.backgroundColor)&&void 0!==t?t:l.DEFAULT_BACKGROUND_OPACITY,r=l.OPACITY_LEVELS[e],i=c.getColourAsRgba(n.identifier,r);p({backgroundColor:{identifier:n.identifier,value:i,opacityLabel:e}}),_(e)}(e)}},i.createElement(o.SettingsActiveItem,{isActive:e===y}),i.createElement("span",null,e))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterEdgeStyle=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(34),s=n(31),u=n(28),l=n(291),c=Object.keys(l.CHARACTER_EDGE_STYLE);t.CharacterEdgeStyle=function(e){var t,n=e.goBack,d=a.useVideoContext(),f=d.controls.updateHtmlTextTrackDisplaySettings,h=null!==(t=d.state.htmlTextTrackDisplaySettings.characterEdgeStyle)&&void 0!==t?t:void 0,p=r.__read(i.useState(null==h?void 0:h.label),2),m=p[0],g=p[1];return i.createElement("div",{className:"ds-settings-menu__sub-menu"},i.createElement(s.SettingsHeading,{onClick:n},"Character Edge Style"),c.map((function(e){return i.createElement(u.SettingsItem,{key:e,onClick:function(){return function(e){var t=l.CHARACTER_EDGE_STYLE[e],n=t.cssProperty,r=t.cssValue;f({characterEdgeStyle:{cssProperty:n,cssValue:r,label:e}}),g(e)}(e)}},i.createElement(o.SettingsActiveItem,{isActive:e===m}),i.createElement("span",null,e))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontColor=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(34),s=n(31),u=n(28),l=n(44),c=n(63);t.FontColor=function(e){var t,n=e.goBack,d=a.useVideoContext(),f=d.controls.updateHtmlTextTrackDisplaySettings,h=null!==(t=d.state.htmlTextTrackDisplaySettings.fontColor)&&void 0!==t?t:void 0,p=null==h?void 0:h.opacityLabel,m=r.__read(i.useState(null==h?void 0:h.identifier),2),g=m[0],v=m[1];return i.createElement("div",{className:"ds-settings-menu__sub-menu"},i.createElement(s.SettingsHeading,{onClick:n},"Font colour"),l.COLOURS.map((function(e){return i.createElement(u.SettingsItem,{key:e,onClick:function(){return t=e,n=c.getOpacityValueFromLabel(p),r=c.getColourAsRgba(t,n),f({fontColor:{identifier:t,value:r,opacityLabel:p}}),void v(t);var t,n,r}},i.createElement(o.SettingsActiveItem,{isActive:e===g}),i.createElement("span",null,e))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontFamily=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(34),s=n(31),u=n(28),l=n(44);t.FontFamily=function(e){var t,n=e.goBack,c=a.useVideoContext(),d=c.controls.updateHtmlTextTrackDisplaySettings,f=null!==(t=c.state.htmlTextTrackDisplaySettings.fontFamily)&&void 0!==t?t:void 0,h=r.__read(i.useState(f),2),p=h[0],m=h[1];return i.createElement("div",{className:"ds-settings-menu__sub-menu"},i.createElement(s.SettingsHeading,{onClick:n},"Font family"),l.FONT_FAMILIES.map((function(e){return i.createElement(u.SettingsItem,{key:e,onClick:function(){return d({fontFamily:t=e}),void m(t);var t}},i.createElement(o.SettingsActiveItem,{isActive:e===p}),i.createElement("span",null,e))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontOpacity=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(34),s=n(31),u=n(28),l=n(44),c=n(63),d=Object.keys(l.OPACITY_LEVELS);t.FontOpacity=function(e){var t,n,f=e.goBack,h=a.useVideoContext(),p=h.controls.updateHtmlTextTrackDisplaySettings,m=h.state.htmlTextTrackDisplaySettings,g=null!==(t=m.fontColor)&&void 0!==t?t:void 0,v=r.__read(i.useState(null!==(n=null==g?void 0:g.opacityLabel)&&void 0!==n?n:l.DEFAULT_FONT_OPACITY.opacityLabel),2),y=v[0],_=v[1];return i.createElement("div",{className:"ds-settings-menu__sub-menu"},i.createElement(s.SettingsHeading,{onClick:f},"Font opacity"),d.map((function(e){return i.createElement(u.SettingsItem,{key:e,onClick:function(){return function(e){var t,n=null!==(t=m.fontColor)&&void 0!==t?t:l.DEFAULT_FONT_OPACITY,r=l.OPACITY_LEVELS[e],i=c.getColourAsRgba(n.identifier,r);p({fontColor:{identifier:n.identifier,value:i,opacityLabel:e}}),_(e)}(e)}},i.createElement(o.SettingsActiveItem,{isActive:e===y}),i.createElement("span",null,e))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontSize=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(34),s=n(31),u=n(28),l=n(44),c=Object.keys(l.FONT_SIZES);t.FontSize=function(e){var t,n=e.goBack,d=a.useVideoContext(),f=d.controls.updateHtmlTextTrackDisplaySettings,h=null!==(t=d.state.htmlTextTrackDisplaySettings.fontSize)&&void 0!==t?t:void 0,p=r.__read(i.useState(null==h?void 0:h.identifier),2),m=p[0],g=p[1];return i.createElement("div",{className:"ds-settings-menu__sub-menu"},i.createElement(s.SettingsHeading,{onClick:n},"Font size"),c.map((function(e){return i.createElement(u.SettingsItem,{key:e,onClick:function(){return function(e){var t=l.FONT_SIZES[e]+"rem";f({fontSize:{identifier:e,value:t}}),g(e)}(e)}},i.createElement(o.SettingsActiveItem,{isActive:e===m}),i.createElement("span",null,e))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowColor=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(34),s=n(31),u=n(28),l=n(44),c=n(63);t.WindowColor=function(e){var t,n=e.goBack,d=a.useVideoContext(),f=d.controls.updateHtmlTextTrackDisplaySettings,h=null!==(t=d.state.htmlTextTrackDisplaySettings.windowColor)&&void 0!==t?t:void 0,p=null==h?void 0:h.opacityLabel,m=r.__read(i.useState(null==h?void 0:h.identifier),2),g=m[0],v=m[1];return i.createElement("div",{className:"ds-settings-menu__sub-menu"},i.createElement(s.SettingsHeading,{onClick:n},"Window colour"),l.COLOURS.map((function(e){return i.createElement(u.SettingsItem,{key:e,onClick:function(){return t=e,n=c.getOpacityValueFromLabel(p),r=c.getColourAsRgba(t,n),f({windowColor:{identifier:t,value:r,opacityLabel:p}}),void v(t);var t,n,r}},i.createElement(o.SettingsActiveItem,{isActive:e===g}),i.createElement("span",null,e))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowOpacity=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(34),s=n(31),u=n(28),l=n(44),c=n(63),d=Object.keys(l.OPACITY_LEVELS);t.WindowOpacity=function(e){var t,n,f=e.goBack,h=a.useVideoContext(),p=h.controls.updateHtmlTextTrackDisplaySettings,m=h.state.htmlTextTrackDisplaySettings,g=null!==(t=m.windowColor)&&void 0!==t?t:void 0,v=r.__read(i.useState(null!==(n=null==g?void 0:g.opacityLabel)&&void 0!==n?n:l.DEFAULT_BACKGROUND_OPACITY.opacityLabel),2),y=v[0],_=v[1];return i.createElement("div",{className:"ds-settings-menu__sub-menu"},i.createElement(s.SettingsHeading,{onClick:f},"Window opacity"),d.map((function(e){return i.createElement(u.SettingsItem,{key:e,onClick:function(){return function(e){var t,n=null!==(t=m.windowColor)&&void 0!==t?t:l.DEFAULT_BACKGROUND_OPACITY,r=l.OPACITY_LEVELS[e],i=c.getColourAsRgba(n.identifier,r);p({windowColor:{identifier:n.identifier,value:i,opacityLabel:e}}),_(e)}(e)}},i.createElement(o.SettingsActiveItem,{isActive:e===y}),i.createElement("span",null,e))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextTrackOptions=void 0;var r=n(2).__importStar(n(3)),i=n(11),a=n(23),o=n(31),s=n(28),u=n(109),l=function(e){var t=e.label,n=e.onClick,i=e.withIcon,o=void 0===i||i;return r.createElement(s.SettingsItem,{classNames:"ds-settings-menu__item-space",onClick:n},r.createElement("span",null,t),o&&r.createElement("span",null,r.createElement(a.ChevronRight,null)))};t.TextTrackOptions=function(e){var t=e.goBack,n=e.setActiveTextTrackOption,a=i.useVideoContext().controls.resetHtmlTextTrackDisplaySettings;return r.createElement("div",{className:"ds-settings-menu__sub-menu"},r.createElement(o.SettingsHeading,{onClick:function(){n(void 0),t()}},"Options"),r.createElement(l,{label:"Font family",onClick:function(){return n(u.TextTrackOption.FONT_FAMILY)}}),r.createElement(l,{label:"Font colour",onClick:function(){return n(u.TextTrackOption.FONT_COLOUR)}}),r.createElement(l,{label:"Font size",onClick:function(){return n(u.TextTrackOption.FONT_SIZE)}}),r.createElement(l,{label:"Background colour",onClick:function(){return n(u.TextTrackOption.BACKGROUND_COLOUR)}}),r.createElement(l,{label:"Background opacity",onClick:function(){return n(u.TextTrackOption.BACKGROUND_OPACITY)}}),r.createElement(l,{label:"Window colour",onClick:function(){return n(u.TextTrackOption.WINDOW_COLOUR)}}),r.createElement(l,{label:"Window opacity",onClick:function(){return n(u.TextTrackOption.WINDOW_OPACITY)}}),r.createElement(l,{label:"Character edge style",onClick:function(){return n(u.TextTrackOption.CHARACTER_EDGE_STYLE)}}),r.createElement(l,{label:"Font opacity",onClick:function(){return n(u.TextTrackOption.FONT_OPACITY)}}),r.createElement(l,{label:"Reset",onClick:a,withIcon:!1}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextTracksList=void 0;var r=n(2),i=n(10),a=r.__importDefault(n(3)),o=n(11),s=n(23),u=n(34),l=n(31),c=n(28);t.TextTracksList=function(e){var t=e.goBack,n=e.openSubMenu,r=o.useVideoContext(),d=r.state,f=d.currentTextTrack,h=d.textTracks,p=d.useHTMLTextTracks,m=d.isCasting,g=r.controls.setTextTrack;function v(e){g(e),t()}var y=m||!p;return a.default.createElement("div",{className:"ds-settings-menu__sub-menu"},a.default.createElement(l.SettingsHeading,{withIcon:!1,classNames:"ds-settings-menu__heading-space"},a.default.createElement("div",{className:"ds-settings-menu__nav-back",onClick:t},a.default.createElement("span",{className:"icon-wrapper"},a.default.createElement(s.ChevronLeft,null)),a.default.createElement("span",null,"Subtitles/CC")),y?null:a.default.createElement("button",{onClick:n},"Options")),a.default.createElement(c.SettingsItem,{onClick:function(){return v()}},a.default.createElement(u.SettingsActiveItem,{isActive:void 0===f}),a.default.createElement("span",null,"Off")),h.map((function(e){var t=i.isTextTrackEqual(e,f);return a.default.createElement(c.SettingsItem,{key:e.lang,onClick:function(){return v(e)}},a.default.createElement(u.SettingsActiveItem,{isActive:t}),a.default.createElement("span",null,e.label))})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(292),t),r.__exportStar(n(975),t),r.__exportStar(n(307),t),r.__exportStar(n(308),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioLangModal=void 0;var r=n(2).__importDefault(n(3)),i=n(13),a=n(23),o=8;t.AudioLangModal=function(e){var t=e.setAudioTrack,n=e.tracks,s=e.toggleModal,u=e.isModalActive,l=e.currentTrack,c=r.default.useRef(null),d=r.default.useRef(null),f=r.default.useRef(null),h=r.default.useRef(null),p=r.default.useRef(null),m=r.default.useRef({}),g=r.default.useRef(0),v=n.length>2,y=i.css("ds-audio-modal",u&&"ds-audio-modal--active",v&&"ds-audio-modal--large"),_=r.default.useCallback((function(){s(!1)}),[s]);function b(){var e=d.current,t=f.current,n=h.current,r=p.current;if(e&&n&&r&&t){var i=e.scrollWidth-t.clientWidth+o,a=g.current-100;a=Math.abs(a)>=i?-i:a,Math.abs(a)<=i&&(g.current=a,e.style.transform="translateX("+g.current+"px)",n.classList.remove("ds-audio-modal-carousel__arrow--hide")),Math.abs(a)>=i&&r.classList.add("ds-audio-modal-carousel__arrow--hide")}}function T(){var e=d.current,t=h.current,n=p.current;if(e&&t&&n){var r=g.current,i=r+100;i=Math.abs(r)<=100?0:i,Math.abs(i)>=0&&(g.current=i,e.style.transform="translateX("+g.current+"px)",n.classList.remove("ds-audio-modal-carousel__arrow--hide")),0===i&&t.classList.add("ds-audio-modal-carousel__arrow--hide")}}return r.default.useLayoutEffect((function(){var e=d.current,t=f.current,n=c.current,r=h.current;e&&t&&n&&r&&(e.scrollWidth>t.clientWidth&&v?(n.classList.add("ds-audio-modal--carousel"),r.classList.add("ds-audio-modal-carousel__arrow--hide")):n.classList.remove("ds-audio-modal--carousel"))}),[u,v]),r.default.useEffect((function(){var e=d.current,t=c.current,n=p.current;e&&t&&!u&&n&&(g.current=0,n.classList.remove("ds-audio-modal-carousel__arrow--hide"),e.style.transform&&t.addEventListener("transitionend",(function(){e.style.transform="translateX(0)"}),{once:!0}))}),[u]),r.default.useEffect((function(){var e=c.current;if(u&&e){var t=function(t){var n=t.target;e.contains(n)||s(!1)};return document.addEventListener("click",t),function(){return document.removeEventListener("click",t)}}}),[u,s]),r.default.createElement("div",{className:y,ref:c},r.default.createElement("button",{className:"ds-audio-modal__close","aria-label":"close",onClick:_},r.default.createElement(a.Close,null)),r.default.createElement("span",{className:"ds-audio-modal__title"},"Audio Selection:"),r.default.createElement("div",{className:"ds-audio-modal-carousel"},r.default.createElement("button",{className:"ds-audio-modal-carousel__arrow","aria-label":"scroll left",onClick:T,ref:h},r.default.createElement("span",null,r.default.createElement(a.ChevronLeft,null))),r.default.createElement("div",{className:"ds-audio-modal__options",ref:f,onTouchStart:function(e){m.current.start=e.changedTouches[0].clientX},onTouchEnd:function(e){m.current.end=e.changedTouches[0].clientX;var t=m.current;t&&null!=t.start&&null!=t.end&&(t.start>t.end?b():T())}},r.default.createElement("div",{className:"ds-audio-modal__content-wrapper",ref:d},n.map((function(e){return r.default.createElement("button",{key:e.id,onClick:function(){return function(e){t(e),_()}(e)},className:i.css((null==l?void 0:l.id)===e.id&&"ds-audio-active-track")},e.label)})))),r.default.createElement("button",{className:"ds-audio-modal-carousel__arrow","aria-label":"scroll right",onClick:b,ref:p},r.default.createElement("span",null,r.default.createElement(a.ChevronRight,null)))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedAudioOnlyOverlay=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(13),s=n(150),u=n(292),l=n(1002),c=n(307),d=n(1004),f=n(1005);t.ConnectedAudioOnlyOverlay=function(e){var t=e.title,n=e.dateTime,h=e.imgSrc,p=r.__read(i.default.useState(!1),2),m=p[0],g=p[1],v=a.useVideoContext(),y=v.state,_=y.ready,b=y.readonlyVolume,T=v.overlayStates.keepOverlayActivated;return i.default.useEffect((function(){T(_)}),[_,T]),i.default.createElement("div",{className:"ds-audio-only__wrapper"},i.default.createElement("div",{className:o.css("ds-audio-overlay",m&&"ds-audio-overlay--in")}),i.default.createElement("div",{className:"ds-audio-controls"},i.default.createElement(c.ConnectedThumbnail,{imgSrc:h,dateTime:n,imgAlt:t+" thumbnail"}),i.default.createElement("div",{className:"ds-audio-sub-controls"},i.default.createElement("div",{className:o.css("ds-audio-labels",_&&"ds-audio-labels--ready")},i.default.createElement(s.ConnectedLive,{disableSeek:!0}),i.default.createElement(f.Marquee,{text:t})),_&&i.default.createElement("div",{className:o.css("ds-audio-volume-lang",b&&"ds-audio-volume-lang--readonly")},i.default.createElement(s.ConnectedVolume,{sliderProps:{orientation:"horizontal"},alwaysActive:!0}),i.default.createElement(u.ConnectedAudioLang,{isModalActive:m,toggleModal:function(e){g((function(t){return null!=e?e:!t}))}})),!_&&n&&i.default.createElement(d.CountDown,{dateTime:n}))),i.default.createElement(l.ConnectedAudioSeekBar,null))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedAdsLearnMore=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(244);t.ConnectedAdsLearnMore=function(e){var t=a.useVideoContext(),n=t.player,s=t.state,u=s.isCasting,l=s.isPlayingClickableBreak;return i.default.createElement(o.AdsLearnMore,r.__assign({player:n,isHidden:u,isPlayingBreak:l},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedAdsProgress=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(252);t.ConnectedAdsProgress=function(e){var t=a.useVideoContext().player;return i.default.createElement(o.AdsProgress,r.__assign({player:t},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedAnnotations=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(253);t.ConnectedAnnotations=function(e){var t=a.useVideoContext(),n=t.state,s=n.live,u=n.seekableDuration,l=t.controls.seek;return i.default.createElement(o.Annotations,r.__assign({onClick:l,live:s,seekableDuration:u},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedAudioMenu=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(254);t.ConnectedAudioMenu=function(e){var t=a.useVideoContext(),n=t.controls.setAudioTrack,s=t.state,u=s.audioTrack,l=s.audioTracks;return i.default.createElement(o.AudioMenu,r.__assign({audioTrack:u,audioTracks:l,setAudioTrack:n},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedBreakStatus=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(255);t.ConnectedBreakStatus=function(e){var t=a.useVideoContext().state.breakStatus;if(t){var n=t.breakClipCount,s=t.breakClipIndex,u=t.currentBreakClipDuration,l=t.currentBreakClipTime;return i.default.createElement(o.BreakStatus,r.__assign({breakClipCount:n,breakClipIndex:s,currentBreakClipDuration:u,currentBreakClipTime:l},e))}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedBreakStatusContainer=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(256);t.ConnectedBreakStatusContainer=function(e){var t=a.useVideoContext().state.overlayIsActive;return i.default.createElement(o.BreakStatusContainer,r.__assign({isOverlayActive:t},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedContextMenu=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(294);t.ConnectedContextMenu=function(e){var t=a.useVideoContext().player;return i.createElement(o.ContextMenu,r.__assign({player:t},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedControlBarWithControls=void 0;var r=n(2).__importDefault(n(3)),i=n(11),a=n(259),o=n(280),s=n(293),u=n(300),l=n(301),c=n(302),d=n(303),f=n(151),h=n(304),p=n(305);t.ConnectedControlBarWithControls=function(){var e=i.useVideoContext().state,t=e.canDvr,n=e.live,m=r.default.useMemo((function(){return n?void 0:[.25,.5,{label:"Normal",value:1},1.25,1.5,2]}),[n]);return r.default.createElement(u.ConnectedControlBar,null,r.default.createElement(a.ControlBarSection,{position:a.ControlBarSectionPosition.LEFT},r.default.createElement(d.ConnectedPlayPause,null),r.default.createElement(c.ConnectedLive,null)),r.default.createElement(a.ControlBarSection,{position:a.ControlBarSectionPosition.MAIN},(t||!n)&&r.default.createElement(f.ConnectedSeekBar,null)),r.default.createElement(a.ControlBarSection,{position:a.ControlBarSectionPosition.RIGHT},r.default.createElement(p.ConnectedVolume,null),r.default.createElement(h.ConnectedTime,null),r.default.createElement(s.ConnectedChromecastButton,null),r.default.createElement(o.Settings,{qualityLevelsOptions:{showBitrate:!0,showLevelVariants:!0},playbackSpeeds:m}),r.default.createElement(l.ConnectedFullscreen,null)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedErrorModal=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(260);t.ConnectedErrorModal=function(e){var t=a.useVideoContext().player;return i.default.createElement(o.ErrorModal,r.__assign({player:t},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedInstantReplayButton=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(262);t.ConnectedInstantReplayButton=function(e){var t=a.useVideoContext().player;return i.default.createElement(o.InstantReplayButton,r.__assign({player:t},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedInstantReplayTitle=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(263);t.ConnectedInstantReplayTitle=function(e){var t=a.useVideoContext().player;return i.default.createElement(o.InstantReplayTitle,r.__assign({player:t},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedLevelsMenu=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(264);t.ConnectedLevelsMenu=function(e){var t=a.useVideoContext(),n=t.controls.setLevel,s=t.state,u=s.levels,l=s.level,c=s.levelVariant,d=s.levelVariants;return i.default.createElement(o.LevelsMenu,r.__assign({level:l,levels:u,levelVariant:c,levelVariants:d,setLevel:n},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedLoader=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(266);t.ConnectedLoader=function(e){var t=a.useVideoContext().state.waiting;return i.default.createElement(o.Loader,r.__assign({waiting:t},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedLogo=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(306);t.ConnectedLogo=function(e){var t=a.useVideoContext().state.logo;return t?i.default.createElement(o.Logo,r.__assign({},t,e)):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedNudge=void 0;var r=n(2).__importDefault(n(3)),i=n(11),a=n(267);t.ConnectedNudge=function(e){var t=i.useVideoContext().controls;return t.canNudge()?r.default.createElement(a.Nudge,{nudge:t.nudge,time:e.time,iconNudgeBackward:e.iconNudgeBackward,iconNudgeForward:e.iconNudgeForward}):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedOverlay=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(268);t.ConnectedOverlay=function(e){var t=a.useVideoContext(),n=t.controls.toggleFullscreen,s=t.overlayStates,u=s.activateOverlay,l=s.activateOverlayTimed,c=s.deactivateOverlay,d=s.keepOverlayActiveClassname,f=t.state,h=f.loaded,p=f.overlayIsActive,m=f.isFullscreenAllowed;return i.default.createElement(o.Overlay,r.__assign({activateOverlay:u,activateOverlayTimed:l,deactivateOverlay:c,isFullscreenAllowed:m,keepOverlayActiveClassname:d,loaded:h,overlayIsActive:p,toggleFullscreen:n},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedPictureInPictureButton=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(270);t.ConnectedPictureInPictureButton=function(e){var t=a.useVideoContext(),n=t.controls,s=n.exitPip,u=n.requestPip,l=t.state,c=l.isPipActive,d=l.isPipSupported;return i.default.createElement(o.PictureInPictureButton,r.__assign({isPipSupported:d,onClick:function(){c?s():u()}},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedPoster=void 0;var r=n(2).__importDefault(n(3)),i=n(11),a=n(272);t.ConnectedPoster=function(){var e=i.useVideoContext().state,t=e.hasPlayed,n=e.hasEnded,o=e.isCasting,s=e.posterUrl,u=void 0!==s&&(!t||n||o);return r.default.createElement(a.Poster,{isActive:u,posterUrl:s})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedReplayPlayer=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(273);t.ConnectedReplayPlayer=function(e){var t=a.useVideoContext(),n=t.player,s=t.state.replayState;return i.default.createElement(o.ReplayPlayer,r.__assign({player:n,replayState:s},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedReplayWrapper=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(274);t.ConnectedReplayWrapper=function(e){var t=a.useVideoContext().player;return i.default.createElement(o.ReplayWrapper,r.__assign({player:t},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedResizingLogo=void 0;var r=n(2),i=r.__importStar(n(3)),a=n(11),o=n(997),s=n(306);t.ConnectedResizingLogo=function(e){var t=e.transformUrl,n=r.__rest(e,["transformUrl"]),u=a.useVideoContext(),l=o.useResizeObserver(),c=l.setRef,d=l.width,f=l.height,h=l.error,p=u.state.logo,m=null==p?void 0:p.url,g=void 0!==(null==p?void 0:p.width)||void 0!==n.width,v=void 0!==(null==p?void 0:p.height)||void 0!==n.height,y=i.useMemo((function(){if(!h&&m&&t){var e=t(m,d,f,g,v);return r.__assign(r.__assign({},p),{url:e})}return p}),[t,p,m,d,f,g,v,h]);return y?i.default.createElement(s.Logo,r.__assign({ref:c},y,n)):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useResizeObserver=void 0;var r=n(2),i=r.__importDefault(n(998)),a=n(3);t.useResizeObserver=function(e){void 0===e&&(e=1e3);var t=r.__read(a.useState({width:0,height:0}),2),n=t[0],o=n.width,s=n.height,u=t[1],l=a.useMemo((function(){return i.default(u,e)}),[u,e]),c=a.useRef(null!=window.ResizeObserver?new ResizeObserver((function(e){var t=r.__read(e,1)[0];l({width:Math.floor(t.contentRect.width),height:Math.floor(t.contentRect.height)})})):void 0),d=a.useCallback((function(){return u({width:0,height:0})}),[]),f=a.useCallback((function(e){var t=c.current;null!==e&&null!=t&&(t.disconnect(),t.observe(e))}),[]);return a.useEffect((function(){return function(){var e;return null===(e=c.current)||void 0===e?void 0:e.disconnect()}}),[]),{width:o,height:s,setRef:f,reset:d,error:void 0===c.current}}},function(e,t,n){(function(t){var n="Expected a function",r=NaN,i="[object Symbol]",a=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,f=c||d||Function("return this")(),h=Object.prototype.toString,p=Math.max,m=Math.min,g=function(){return f.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&h.call(e)==i}(e))return r;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=s.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):o.test(e)?r:+e}e.exports=function(e,t,r){var i,a,o,s,u,l,c=0,d=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError(n);function _(t){var n=i,r=a;return i=a=void 0,c=t,s=e.apply(r,n)}function b(e){var n=e-l;return void 0===l||n>=t||n<0||f&&e-c>=o}function T(){var e=g();if(b(e))return E(e);u=setTimeout(T,function(e){var n=t-(e-l);return f?m(n,o-(e-c)):n}(e))}function E(e){return u=void 0,h&&i?_(e):(i=a=void 0,s)}function S(){var e=g(),n=b(e);if(i=arguments,a=this,l=e,n){if(void 0===u)return function(e){return c=e,u=setTimeout(T,t),d?_(e):s}(l);if(f)return u=setTimeout(T,t),_(l)}return void 0===u&&(u=setTimeout(T,t)),s}return t=y(t)||0,v(r)&&(d=!!r.leading,o=(f="maxWait"in r)?p(y(r.maxWait)||0,t):o,h="trailing"in r?!!r.trailing:h),S.cancel=function(){void 0!==u&&clearTimeout(u),c=0,i=l=a=u=void 0},S.flush=function(){return void 0===u?s:E(g())},S}}).call(this,n(130))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedTextTrack=void 0;var r=n(2),i=n(20),a=r.__importStar(n(3)),o=n(11),s=n(146);t.ConnectedTextTrack=function(e){var t=o.useVideoContext().player,n=a.useRef(null);return a.useEffect((function(){t&&n.current&&(t.sourceHandler.hasType(i.HandlerTypes.NONE)?t.getConfig().htmlTextTrackContainer=n.current:t.setHtmlTextTrackContainer(n.current))}),[t]),a.default.createElement(s.TextTrack,r.__assign({ref:n},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedTextTrackMenu=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(276);t.ConnectedTextTrackMenu=function(e){var t=a.useVideoContext(),n=t.controls.setTextTrack,s=t.state,u=s.currentTextTrack,l=s.textTracks;return i.default.createElement(o.TextTrackMenu,r.__assign({currentTextTrack:u,setTextTrack:n,textTracks:l},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedTooltip=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(11),o=n(278);t.ConnectedTooltip=function(e){var t=a.useVideoContext().player;return i.default.createElement(o.Tooltip,r.__assign({player:t},e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedAudioSeekBar=void 0;var r=n(2).__importDefault(n(3)),i=n(11),a=n(13),o=n(151);t.ConnectedAudioSeekBar=function(){var e=i.useVideoContext().state,t=e.live,n=e.currentTime,s=e.duration,u=e.ready;if(t||!u)return null;var l=s>=a.HOUR;return r.default.createElement("div",{className:"ds-audio-seek"},r.default.createElement("span",{className:"ds-audio-seek__time"},a.formatTime(n,l)),r.default.createElement(o.ConnectedSeekBar,null),r.default.createElement("span",{className:"ds-audio-seek__time"},a.formatTime(s,l)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectedPlayPause=void 0;var r=n(2).__importDefault(n(3)),i=n(11),a=n(13);t.ConnectedPlayPause=function(){var e=i.useVideoContext(),t=e.state.paused,n=e.controls.togglePlay,o=a.css("ds-play-pause-morph",t&&"ds-play-pause-morph--paused");return r.default.createElement("div",{className:"ds-play-pause-wrapper"},r.default.createElement("div",{className:o,onClick:n}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CountDown=void 0;var r=n(2),i=r.__importDefault(n(3)),a=n(13);t.CountDown=function(e){var t=e.dateTime,n=r.__read(i.default.useState(a.formatDateCountdown(t,Date.now())),2),o=n[0],s=n[1],u=i.default.useRef(null);return i.default.useEffect((function(){var e=function(){if(Date.now()<t){var n=a.formatDateCountdown(t,Date.now());s(n),window.setTimeout(e,1e3)}};return window.setTimeout(e,1e3),function(){var e;return window.clearTimeout(null!==(e=null==u?void 0:u.current)&&void 0!==e?e:void 0)}}),[t]),i.default.createElement("div",{className:"ds-countdown"},o.days&&i.default.createElement("div",{className:"ds-countdown__item"},i.default.createElement("span",{className:"ds-countdown__value"},o.days),i.default.createElement("span",{className:"ds-countdown__label"},"Day")),i.default.createElement("div",{className:"ds-countdown__item"},i.default.createElement("span",{className:"ds-countdown__value"},o.hours),i.default.createElement("span",{className:"ds-countdown__label"},"Hours")),i.default.createElement("div",{className:"ds-countdown__item"},i.default.createElement("span",{className:"ds-countdown__value"},o.minutes),i.default.createElement("span",{className:"ds-countdown__label"},"Mins")),i.default.createElement("div",{className:"ds-countdown__item"},i.default.createElement("span",{className:"ds-countdown__value"},o.seconds),i.default.createElement("span",{className:"ds-countdown__label"},"Secs")))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Marquee=void 0;var r=n(2).__importDefault(n(3));t.Marquee=function(e){var t=e.text,n=r.default.useRef(null),i=r.default.useRef();return r.default.useLayoutEffect((function(){var e=n.current;if(e){if(e.scrollWidth>e.clientWidth){var t=-e.scrollWidth-10;e.style.transform="translateX("+t+"px)",e.addEventListener("transitionend",(function(){var n,r;e.removeAttribute("style"),i.current=(n=t,(r=document.createElement("style")).innerHTML="@keyframes ds-marquee {\n        0% {\n            transform: translateX(100%);\n        }\n        100% {\n            transform: translateX("+n+"px);\n        }\n    }\n\n    @keyframes ds-marquee-small {\n        0% {\n            transform: translateX(100%);\n        }\n        100% {\n            transform: translateX("+n+"px);\n        }\n    }",document.head.appendChild(r),function(){return r.remove()}),e.classList.add("ds-marquee__scroll")}))}return function(){var e;return null===(e=null==i?void 0:i.current)||void 0===e?void 0:e.call(i)}}}),[t]),r.default.createElement("div",{className:"ds-marquee"},r.default.createElement("div",{className:"ds-marquee__content",ref:n},r.default.createElement("span",null,t)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);r.__exportStar(n(294),t),r.__exportStar(n(298),t),r.__exportStar(n(77),t),r.__exportStar(n(295),t),r.__exportStar(n(296),t),r.__exportStar(n(297),t),r.__exportStar(n(299),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerContainer=t.OVERLAY_ACTIVE_DURATION=void 0;const r=n(27),i=n(231),a=n(251),o=n(8),s=r.__importStar(n(3)),u=n(110),l=r.__importDefault(n(1013));t.OVERLAY_ACTIVE_DURATION=3500;class c extends s.PureComponent{componentDidMount(){const{on:e,activateOverlayTimed:n,live:r}=this.props;e(o.EventTypes.SEEKED,()=>{const{paused:e}=this.props;r||e||n(t.OVERLAY_ACTIVE_DURATION)})}get controls(){const{paused:e,hasPlayed:t,waiting:n,atLiveEdge:r}=this.props;return t?s.createElement(i.ConnectedControlBar,{className:(0,u.css)((e||n)&&"ds-control-bar--in")},s.createElement("div",{className:"ds-control-bar__section ds-control-bar__section--left"},!e&&!n&&r&&s.createElement(i.ConnectedLive,{showLiveDot:!0}),!n&&e&&s.createElement(a.PauseIcon,null)),s.createElement("div",{className:"ds-control-bar__section ds-control-bar__section--main"},s.createElement(i.ConnectedSeekBar,{sliderProps:{draggable:!1}})),s.createElement("div",{className:"ds-control-bar__section ds-control-bar__section--right"},s.createElement(i.ConnectedTime,null))):null}get adProgress(){const{paused:e,waiting:t}=this.props;return s.createElement(i.BreakStatusContainer,{isOverlayActive:e||t},s.createElement(i.ConnectedBreakStatus,null))}render(){const{paused:e,overlayIsActive:t,loaded:n,waiting:r,hasPlayed:a,getMediaData:o,duration:u}=this.props,c=u>0,d=r||!a,f=d?"ds-chromecast--waiting":"",h=o();return s.createElement(s.Fragment,null,c&&s.createElement(i.OverlayLite,{overlayIsActive:t,loaded:n,className:f},s.createElement(l.default,Object.assign({},h,{paused:e,waiting:r})),s.createElement(i.Loader,{waiting:d}),this.adProgress,this.controls))}}t.PlayerContainer=e=>s.createElement(i.Consumer,null,({state:{paused:t,overlayIsActive:n,loaded:r,canDvr:i,live:a,waiting:o,hasPlayed:u,duration:l,atLiveEdge:d},controls:{on:f},overlayStates:{activateOverlayTimed:h}})=>s.createElement(c,Object.assign({},e,{paused:t,on:f,canDvr:i,live:a,duration:l,loaded:r,waiting:o,hasPlayed:u,activateOverlayTimed:h,overlayIsActive:n,atLiveEdge:d})))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(27);r.__exportStar(n(1009),t),r.__exportStar(n(1010),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.css=void 0;t.css=(...e)=>e.filter(e=>"string"==typeof e&&!!e.trim()).join(" ")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModelName=void 0;t.getModelName=function(){try{const{hardwareConcurrency:e,userAgent:t}=window.navigator,n=cast.framework.CastReceiverContext.getInstance();if(n.canDisplayType('video/mp4; codecs="avc1.640033'))return"gen4";if(t.includes("Android"))return"built-in";if(n.canDisplayType("video/mp4; codecs=hev1.1.6.L93.B0"))return"ultra";if(n.canDisplayType("video/mp4; codecs=avc1.64002A"))return"gen3";if(2===e)return"gen2";if(1===e)return"gen1"}catch(e){}return"unknown"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(27).__exportStar(n(1012),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindToContext=void 0;t.bindToContext=e=>{const t=e.start;return e.start=n=>(n||(n=new cast.framework.CastReceiverOptions),n.disableIdleTimeout=!0,n.skipPlayersLoad=!0,t.call(e,n),e),e.getPlayerManager=()=>(console.error("CANNOT get player manager with Doris receiver"),{}),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(27),i=n(20),a=n(23),o=r.__importStar(n(3)),s=n(110),u=({logoURL:e})=>o.createElement("div",{className:"cover__logo"},o.createElement("img",{src:e,alt:"cover logo"}));t.default=({paused:e,waiting:t,title:n,description:r,logoURL:l})=>{const c=(0,s.css)("cover",e&&"cover--in",t&&"cover--hide"),d=Boolean(n)||Boolean(r);return o.createElement("div",{className:c},o.createElement("div",{className:"cover__overlay"},l&&o.createElement(u,{logoURL:l}),o.createElement("div",{className:(0,s.css)("cover__content",!d&&"cover__content--pause")},n&&o.createElement("h1",null,n),r&&o.createElement("p",null,r),!d&&o.createElement("div",{className:"cover__play"},o.createElement(a.PauseIcon,null)),o.createElement("div",{className:(0,s.css)("cover__chromecast",!r&&"cover__chromecast--no-description")},o.createElement(a.ChromecastIcon,{castState:i.CastStates.CONNECTED})))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(27).__exportStar(n(1015),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdBreakManager=void 0;const r=n(27),i=n(75),a=r.__importDefault(n(9));t.AdBreakManager=class{constructor(e,t,n){(0,a.default)(this),this.player=e,this.playerManager=t,this.imaPlugin=n,this.subscriptionContext=n.createSubscriptionContext(),this.listenToEvents(),window.adBreakManager=this}getBreakStatus(){return this.breakStatus}getBreakClips(){return this.breakClips}getBreaks(){return this.breaks}destroy(){this.reset(),this.subscriptionContext.unsubscribe()}reset(){this.breakClips=void 0,this.breaks=void 0,this.breakStatus=void 0,this.currentBreak=void 0,this.levelSwitchTimeout=void 0,this.setSeekable(!0)}setSeekable(e=!0){this.imaPlugin.getIsSnapbackEnabled()&&(e?this.playerManager.addSupportedMediaCommands(cast.framework.messages.Command.SEEK,!0):this.playerManager.removeSupportedMediaCommands(cast.framework.messages.Command.SEEK,!0))}listenToEvents(){this.subscriptionContext.on([i.StreamEvent.AD_BREAK_ENDED,i.StreamEvent.AD_BREAK_STARTED,i.StreamEvent.CUEPOINTS_CHANGED,i.StreamEvent.AD_PROGRESS,i.StreamEvent.LOADED],(e,t)=>{switch(t.type){case i.StreamEvent.LOADED:this.setAdBreakNotPlaying();break;case i.StreamEvent.AD_BREAK_STARTED:{const e=this.getCurrentBreak();if(this.levelSwitchTimeout=void 0,null!=e){const{breakClipIds:t,id:n}=e;this.currentBreak=e,this.breakStatus=new cast.framework.messages.BreakStatus(0,0),this.breakStatus.breakClipId=t[0],this.breakStatus.breakId=n}this.setSeekable(!1);break}case i.StreamEvent.AD_BREAK_ENDED:this.setAdBreakNotPlaying(),this.setSeekable(!0),this.currentBreak=void 0,this.setAutoLevel();break;case i.StreamEvent.CUEPOINTS_CHANGED:{const{cuePoints:e}=t;this.createAdBreaksFromCuePoints(e),this.playerManager.broadcastStatus(!0);break}case i.StreamEvent.AD_PROGRESS:{const{adProgressData:{totalAds:e,adPosition:n}}=t.getStreamData();if(e-n==0&&this.imaPlugin.getWillSnapForward()&&this.adDiscontinuityWorkAround(),this.breakStatus&&this.currentBreak){const e=this.player.getCurrentTime()-this.currentBreak.position;this.breakStatus.currentBreakClipTime=e,this.breakStatus.currentBreakTime=e}break}}})}createAdBreaksFromCuePoints(e){const t=[],n=[];e.map((e,r)=>{const i=new cast.framework.messages.BreakClip(`bc${r}`),a=e.end-e.start;i.duration=a,t.push(i);const o=new cast.framework.messages.Break(`b${r}`,[`bc${r}`],r);o.position=e.start,o.isEmbedded=!0,o.duration=a,o.isWatched=e.played,n.push(o)}),this.breakClips=t,this.breaks=n}getCurrentBreak(){var e,t;if(!(null===(e=this.breakClips)||void 0===e?void 0:e.length)||!(null===(t=this.breaks)||void 0===t?void 0:t.length))return;const n=Math.floor(this.player.getCurrentTime());return this.breaks.find(({position:e,duration:t})=>{if(null!=t){const r=Math.floor(e),i=Math.floor(t+e);return r<=n&&n<=i}})}setAdBreakNotPlaying(){this.breakStatus=new cast.framework.messages.BreakStatus}adDiscontinuityWorkAround(){const e=this.player.getCurrentLevel();if(e&&e.height<720&&e.bitrate>0)return;const t=this.player.getLevels().reduce((e,t)=>{let n=e;return t.height<720&&t.bitrate>0&&(n=t),n},e);t&&this.player.setCurrentLevel(t)}setAutoLevel(){const e=this.player.getLevels().find(e=>0===e.bitrate);this.player.getCurrentLevel()!==e&&(this.levelSwitchTimeout=window.setTimeout(()=>{e&&void 0!==this.levelSwitchTimeout&&(this.player.setCurrentLevel(e),this.levelSwitchTimeout=void 0)},12e3))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(27).__exportStar(n(1017),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DORIS_CONFIG=void 0;const r=n(20),i=n(74),a=n(1018),o=n(40),s={name:"ima",Plugin:i.IMAPlugin,config:{disableAdsBeforeStartPosition:!0,evictBufferAfterSnapback:!0,withAdContainer:!1}};t.DORIS_CONFIG={bandwidthPersistence:!0,bufferManagement:{initial:{enabled:!0}},debug:{enabled:!0,bufferSize:60,updateInterval:1e3,inputs:[...o.DEFAULT_CONFIG.debug.inputs,a.imaStreamDataInput],metrics:[...o.DEFAULT_CONFIG.debug.metrics,a.imaStreamDataMetric]},handlers:[r.HlsHandler,r.ShakaHandler],hlsConfig:{debug:!1,maxBufferSize:2e7,maxBufferLength:12,maxMaxBufferLength:18,maxStarvationDelay:2,maxBufferHole:1,startLevel:10,abrMaxWithRealBitrate:!0,abrBandWidthFactor:.9,liveBackBufferLength:0},shakaConfig:{abr:{defaultBandwidthEstimate:1e7},streaming:{bufferBehind:6,bufferingGoal:12,rebufferingGoal:6}},overrideNative:!0,plugins:[s]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(0).__exportStar(n(1019),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imaStreamDataMetric=t.imaStreamDataInput=void 0;var r=n(33),i=n(212);t.imaStreamDataInput=function(e,t){var n,r,a=null===(r=null===(n=e.getPluginByType(i.IMAPlugin))||void 0===n?void 0:n.getStreamData())||void 0===r?void 0:r.streamId;if(a)return{customData:{streamId:a}}},t.imaStreamDataMetric=function(e){return{component:new r.KeyValue({label:"IMA Stream ID",parentNode:e}),isEnabled:function(e,t){var n;return void 0!==(null===(n=t.customData)||void 0===n?void 0:n.streamId)},resultSelector:function(e,t){var n;return{value:null!==(n=function(e){var t;return null!==(t=e.customData)&&void 0!==t?t:{}}(t).streamId)&&void 0!==n?n:"-"}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(27).__exportStar(n(1021),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomMessages=void 0;const r=n(158);t.CustomMessages=class{constructor(e){this.messageInterceptor=e=>{if(this.hasKind(e))switch(e.data.kind){case r.CustomChromecastMessage.TOGGLE_DEBUG:this.player.toggleDebugOverlay();break;default:console.warn("event not supported",e)}},this.player=e}hasKind(e){var t;return Boolean(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.kind)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(27);r.__exportStar(n(1023),t),r.__exportStar(n(1024),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatSource=void 0;const r=n(20);t.formatSource=e=>{var t,n;return(null===(t=e.media.customData)||void 0===t?void 0:t.sourceType)===r.SourceTypes.RESOLVABLE?{sourceType:r.SourceTypes.RESOLVABLE,contentType:e.media.contentType,id:e.media.contentId,resolutionType:null===(n=e.media.customData)||void 0===n?void 0:n.resolutionType,customData:e.media.customData.resolutionCustomData}:{sourceType:r.SourceTypes.STATIC,url:e.media.contentUrl||e.media.contentId,contentType:e.media.contentType}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patchConfig=void 0;const r=n(110);t.patchConfig=e=>{var t;const n=(0,r.getModelName)();return"gen1"!==n&&"gen2"!==n||(e.dashConfig=Object.assign(Object.assign({},e.dashConfig),{streaming:{abr:{limitBitrateByPortal:!1,maxBitrate:{video:6500}}}}),e.shakaConfig=Object.assign(Object.assign({},e.shakaConfig),{abr:Object.assign(Object.assign({},null===(t=e.shakaConfig)||void 0===t?void 0:t.abr),{restrictions:{maxBandwidth:65e5}})})),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(27).__exportStar(n(1026),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdleListener=void 0;const r=n(20),i=3e5;t.IdleListener=class{constructor(e,t){this.destroy=()=>{this.resetIdleTimeout(),this.idleTimeout=window.setTimeout(()=>{this.player.destroy(),this.context.stop()},i)},this.resetIdleTimeout=()=>{this.idleTimeout&&!this.player.getHasEnded()&&(window.clearTimeout(this.idleTimeout),this.idleTimeout=void 0)},this.context=e,this.player=t,this.listen()}listen(){this.player.on([r.EventTypes.ENDED,r.EventTypes.WAITING],this.destroy),this.player.on([r.EventTypes.LOAD_START,r.EventTypes.PAUSE,r.EventTypes.PLAYING],this.resetIdleTimeout)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(27).__exportStar(n(1028),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueueMessageHandler=void 0;t.QueueMessageHandler=class{constructor(e){this.queueChangeInterceptor=e=>(this.sendMessage("*:*",e),e),this.listener=e=>{var t;switch(null===(t=e.data)||void 0===t?void 0:t.type){case"QUEUE_GET_ITEM_IDS":{const t=this.getQueueItemIds();this.sendMessage(e.senderId,{type:"QUEUE_ITEM_IDS",requestId:e.data.requestId,mediaSessionId:e.data.mediaSessionId,itemIds:t});break}case"QUEUE_GET_ITEMS":{const t=e.data.itemIds,n=this.getQueueItems(t);this.sendMessage(e.senderId,{type:"QUEUE_ITEMS",requestId:e.data.requestId,mediaSessionId:e.data.mediaSessionId,items:n});break}}},this.getQueueItemIds=()=>{var e,t;return null!==(t=null===(e=this._playerManager.getQueueManager())||void 0===e?void 0:e.getItems().map(e=>{var t;return null!==(t=e.itemId)&&void 0!==t?t:-1}))&&void 0!==t?t:[]},this.getQueueItems=e=>{var t,n;return null!==(n=null===(t=this._playerManager.getQueueManager())||void 0===t?void 0:t.getItems().filter(t=>e.some(e=>e===t.itemId)))&&void 0!==n?n:[]},this.sendMessage=(e,t)=>{this._castReceiverContext.sendCustomMessage("urn:x-cast:com.doris.cast.queue",e,t)},this._castReceiverContext=e.castReceiverContext,this._playerManager=e.playerManager}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(27).__exportStar(n(1030),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TracksManager=void 0;t.TracksManager=class{constructor(){this.nextId=0,this.tracks=[],this.trackExists=(e,t,n)=>this.tracks.find(r=>r.name===e&&r.language===t&&r.type===n),this.getTracks=()=>[...this.tracks],this.getTrack=e=>this.tracks.find(({trackId:t})=>t===e),this.getId=(e,t,n,r)=>{const i=this.tracks.find(({name:i,type:a,language:o,subtype:s})=>i===t&&a===e&&o===n&&s===r);return i&&void 0!==i.trackId?i.trackId:null},this.reset=()=>this.tracks=[]}addTracksFromLoad(e){let t=0;e.forEach(e=>{e&&void 0!==e.trackId&&e.trackId>t&&(t=e.trackId),this.tracks.push(e)}),this.nextId=t+=1}addTrack(e,t,n,r,i,a){if(this.trackExists(e,t,n)){const r="Attempting to add duplicate track!";return void console.warn(r,`name: ${e}, language: ${t}, type: ${n}`)}const o={trackId:this.nextId,name:e,language:t,type:n,trackContentType:r,trackContentId:i,subtype:a};this.tracks.push(o),this.nextId+=1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(309),i=n(64),a=n(156),o=n(153),s=n(65),u=async(e,t,n,i)=>{const{customParameters:a,validFrom:s,validUntil:u}=await r.getCustomParamsFromEPG(e.getPluginByType(o.EPGPlugin),n,i),l=e.getElement().getBoundingClientRect(),c=(e=>{if(!e)return{};const t="string"==typeof e?r.parseCustomParameters(e):e,{deep_link:n,neighborhood:i,row:a}=t;return{deep_link:n,neighborhood:i,row:a}})(t.adTagParameters.cust_params),d={adTagParameters:Object.assign(Object.assign({},t.adTagParameters),{cust_params:Object.assign(Object.assign({ph:String(l.height),pw:String(l.width)},c),a)}),adTagParametersValidFrom:s,adTagParametersValidUntil:u};return console.log(`Ad tag parameters updated for ${null==s?void 0:s.toLocaleTimeString()} to ${null==u?void 0:u.toLocaleTimeString()}:`,d.adTagParameters),d};t.initLiveEpgUpdates=e=>{e.addPlugin({name:"epg",Plugin:o.EPGPlugin});const t=e.getPluginByName("ima"),n=e.getPluginByName("epg");t&&t.on("requireadtagparameters",async(o,l)=>{if(s.default.realm!==i.UNIVISION_REALM)return console.error(`Ad tag parameter updates are only supported for '${i.UNIVISION_REALM}'.`),void a.setError(i.NO_AD_TAG_PARAMS_ERROR);const{isBlocking:c,date:d}=l,f=t.getAdTagParameterMetadata();if(void 0===f)return console.error("Initial ad tag parameters have not been set. Failed to update custom data."),void a.setError(i.NO_AD_TAG_PARAMS_ERROR);if(void 0!==(null==n?void 0:n.getChannelId()))try{const{adTagParameters:n,adTagParametersValidFrom:i,adTagParametersValidUntil:a}=await u(e,f,c,d),o=r.sanitiseAdTagParams(n);t.replaceAdTagParameters(o,i,a)}catch(e){a.setError(i.NO_AD_TAG_PARAMS_ERROR)}else console.warn("EPG channel ID is not specified, so we cannot update ad tag parameters.")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseCustomParameters=e=>{const t={};return new URLSearchParams(e).forEach((e,n)=>{t[n]=e}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(153),i=n(310),a=n(152),o={toLowerCase:!0,removeNonEnglishChars:!0,removeEmptyChars:!1},s=(e,t=o)=>{if("string"!=typeof e)return e;let n=e;return t.toLowerCase&&(n=n.toLowerCase()),n=n.normalize("NFD").replace(/[\u0300-\u036f]/g,""),t.removeEmptyChars&&(n=n.replace(/ /g,"")),t.removeNonEnglishChars&&(n=n.replace(/[^a-z]/g,"")),n},u={toLowerCase:!0,removeNonEnglishChars:!1,removeEmptyChars:!0};t.sanitiseAdTagParams=e=>{const n={};for(const r in e){const i=e[r];n[r]="string"==typeof i?s(i,u):"object"==typeof i?t.sanitiseAdTagParams(i):i}return n};var l,c,d,f;!function(e){e.VOD="xml_vmap4",e.LIVE="xml_vast4"}(l||(l={})),function(e){e[e.VOD=1]="VOD",e[e.LIVE=2]="LIVE"}(c||(c={})),function(e){e[e.INACTIVE=0]="INACTIVE",e[e.ACTIVE=1]="ACTIVE"}(d||(d={})),function(e){e.LIVE="live",e.VOD="vod"}(f||(f={})),t.setInitialAdTagParameters=async e=>{var n,o,u;const{domain:h,http:p,media:m,gamNetworkId:g,gamProductName:v,player:y}=e;if("dice"===m.customData.resolutionType&&(null===(n=m.customData)||void 0===n?void 0:n.imaAdMetadata)){const{imaAdMetadata:e,resolutionCustomData:n}=m.customData,_=m.contentId,b=null==n?void 0:n.isLive;if(isNaN(parseInt(_))||"boolean"!=typeof b)return void console.warn("Dice resolvable source is not configured properly.");const T=await(async(e,t,n)=>{if(t){const{parsedData:t}=await n.get(`/event/${e}`,{queryParams:{displayGeoblockedLive:"false"}});return t}{const{parsedData:t}=await n.get(`/vod/${e}`);return t}})(_,b,p);let E,S,w={};if(b){const e=y.getPluginByType(r.EPGPlugin);(null==T?void 0:T.programmingInfo)?null==e||e.addLiveProgrammes(T.programmingInfo.currentProgramme,T.programmingInfo.nextProgramme):console.log("Programming info not found, live programmes not added.");try{const t=await i.getCustomParamsFromEPG(e,!0);w=t.customParameters,E=t.validFrom,S=t.validUntil}catch(t){const n=(null==e?void 0:e.getChannelId())?"":"EPG channel ID not specified.";console.warn(n,null==t?void 0:t.message)}}else(null===(o=T.ssai)||void 0===o?void 0:o.daiKeyValues)&&(w=a.parseDaiKeyValues(T.ssai.daiKeyValues));const{adUnit:A,isDeepLink:M=!1,neighborhood:L,row:C}=e,D=y.getElement().getBoundingClientRect(),k=(e=>{var t;const{adUnit:n,content:r,gamNetworkId:i,gamProductName:a,isLive:o}=e,u=[i,a,o?f.LIVE:f.VOD,"chromecast"];return n?u.push(s(n)):o&&(null===(t=r.ssai)||void 0===t?void 0:t.neighbourhood)&&u.push(s(r.ssai.neighbourhood)),`/${u.join("/")}`})({adUnit:A,content:T,gamNetworkId:g,gamProductName:v,isLive:b}),P=null!==(u=e.url)&&void 0!==u?u:encodeURIComponent(`https://${h}/video/${_}`),I=t.sanitiseAdTagParams({iu:k,output:b?l.LIVE:l.VOD,ad_rule:b?d.INACTIVE:d.ACTIVE,vconp:b?c.LIVE:c.VOD,cust_params:Object.assign({ph:String(D.height),pw:String(D.width),deep_link:M.toString(),neighborhood:L,row:C},w),url:P,description_url:P});console.log(`Ad tag parameters generated for ${null==E?void 0:E.toLocaleTimeString()} to ${null==S?void 0:S.toLocaleTimeString()}:`,I),m.customData.resolutionCustomData=Object.assign(Object.assign({},n),{ima:Object.assign(Object.assign({},null==n?void 0:n.ima),{adTagParameters:I,adTagParametersValidFrom:E,adTagParametersValidUntil:S})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(1035))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),i=n(1036),a=n(311),o=n(1039),s=5e3+55e3*Math.random();t.EPGPlugin=class{constructor(e,t){var n;this.epg=[],this.addProgrammes=(...e)=>{const t=this.epg.concat(e),n=t.map(({startTime:e})=>e.getTime());this.epg=t.filter(({startTime:e},t)=>!n.includes(e.getTime(),t+1)).sort((e,t)=>e.startTime.getTime()-t.startTime.getTime())},this.addLiveProgrammes=(...e)=>{const t=e.map(e=>({startTime:new Date(e.startDate),endTime:new Date(e.endDate),daiKeyValues:e.daiKeyValues}));this.addProgrammes(...t)},this.getApiUrl=()=>this.apiUrl,this.getChannelId=()=>this.channelId,this.getHttpService=()=>this.http,this.getProgramForTime=async(e,t=!1)=>{let n=this.findProgramForTime(e);const r=this.pubNubListener.getIsListening();if(!n&&(t||!r)){const r=this.loadDataForTime(e);t&&(await r,n=this.findProgramForTime(e))}return n},this.setApiUrl=e=>{this.apiUrl=e},this.setChannelId=e=>{void 0===this.channelId&&void 0!==e?this.player.on(r.EventTypes.TIME_UPDATE,this.handleTimeUpdate):void 0!==this.channelId&&void 0===e&&this.player.off(r.EventTypes.TIME_UPDATE,this.handleTimeUpdate),this.pubNubListener.setChannelId(e),this.channelId=e,this.epg=[],this.pendingFetch=void 0},this.setHttpService=e=>{this.http=e},this.setPubNubChannel=e=>{this.pubNubListener.setChannel(e)},this.fetchContent=async e=>{var t;if(!this.http||!this.apiUrl||!this.channelId)return void console.error("Failed to fetch EPG data. EPGPlugin is not configured!");const n=new Date(e.getTime()+216e5);this.pendingFetch||(this.pendingFetch=this.http.get(this.apiUrl,{queryParams:{from:e.toISOString(),to:n.toISOString(),channel:null===(t=this.channelId)||void 0===t?void 0:t.toString()}}));const r=this.pendingFetch;try{const{parsedData:e}=await this.pendingFetch;return r===this.pendingFetch&&(this.pendingFetch=void 0),e}catch(e){r===this.pendingFetch&&(this.pendingFetch=void 0)}},this.findProgramForTime=e=>this.epg.find(t=>t.startTime<=e&&e<t.endTime),this.handleProgrammeReceived=e=>{this.addProgrammes(e.programme)},this.handleTimeUpdate=(e,t)=>{const{currentDate:n}=t;if(n){const e=new Date(n.getTime()+this.preFetchDistance);this.getProgramForTime(e)}},this.loadDataForTime=async e=>{var t;const n=new Date(e),r=await this.fetchContent(n),i=null===(t=null==r?void 0:r.channels)||void 0===t?void 0:t[0];if(!i)return;const a=i.programmes;this.addLiveProgrammes(...a)},this.apiUrl=null==t?void 0:t.apiUrl,this.http=null==t?void 0:t.http,this.player=e,this.preFetchDistance=null!==(n=null==t?void 0:t.preFetchDistance)&&void 0!==n?n:s,this.pubNubListener=new o.PubNubListener({subscribeKey:i.PUB_NUB_SUBSCRIBE_KEY}),this.pubNubListener.on(a.PubNubListenerEvents.PROGRAMME_RECEIVED,this.handleProgrammeReceived)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(1037))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PUB_NUB_SUBSCRIBE_KEY="sub-c-2e73f4e0-1dd7-11e7-894d-0619f8945a4f"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PROGRAMME_RECEIVED="PROGRAMME_RECEIVED"}(t.PubNubListenerEvents||(t.PubNubListenerEvents={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1040),i=n(221),a=n(311);t.PubNubListener=class extends i.EventEmitter{constructor(e){super(),this.getChannel=()=>this.channel,this.getIsListening=()=>!!this.channel,this.setChannel=e=>{this.channel!==e&&(this.channel&&this.subscriber.unsubscribe({channel:this.channel}),e&&this.subscriber.subscribe({channel:e,handler:this.handleMessage}),this.channel=e)},this.setChannelId=e=>{this.channelId=e},this.handleMessage=e=>{const{message:t}=e;if("string"!=typeof t)return void console.error(`PubNub message was expected to be of type 'string' but receiver '${typeof t}' instead.`);let n;try{n=JSON.parse(t)}catch(e){}if(!n)return void console.error("Failed to parse PubNub payload.");if(!Array.isArray(n.programmingInfo))return void console.error("PubNub payload 'programmingInfo' was expected to be an Array.");const r=n.programmingInfo.find(({channelId:e})=>this.channelId===e);r&&[r.currentProgramme,r.nextProgramme].forEach(e=>{e&&this.emit(a.PubNubListenerEvents.PROGRAMME_RECEIVED,{programme:{daiKeyValues:e.daiKeyValues,endTime:new Date(e.endDate),startTime:new Date(e.startDate)}})})},this.subscriber=new r.Subscriber({pubnubConfig:{subscribeKey:e.subscribeKey}}),this.setChannel(e.channel),this.setChannelId(e.channelId)}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(1041),t),i(n(1043),t),i(n(450),t),i(n(452),t),i(n(453),t),i(n(1058),t),i(n(1062),t),i(n(454),t),i(n(1065),t),i(n(1066),t)},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getAnnotations=void 0;const i=n(312);t.getAnnotations=(e,t)=>r(void 0,void 0,void 0,(function*(){const{chaptersUrl:n,thumbnailsUrl:r,errorHandler:a}=e,o=a||Promise.reject,s=t(n,{}),u=t(r,{});try{const e=yield Promise.all([s,u]),t=yield Promise.all(e.map(e=>e.text())),[n,r]=yield Promise.all(t.map(i.vttToJson));return n.map((e,t)=>{const i=((e,t,n)=>e.find(e=>e.start===t[n].start))(r,n,t),a=i?i.part[0]:null;return Object.assign(Object.assign({},e),{thumbnailUrl:a})})}catch(e){return o(e)}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SECONDS=t.MINUTES=t.HOURS=t.VTT_TIMING_SEPARATOR=t.VTT_HEADER=void 0,t.VTT_HEADER="WEBVTT",t.VTT_TIMING_SEPARATOR="--\x3e",t.HOURS=36e5,t.MINUTES=6e4,t.SECONDS=1e3},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedLabel=t.Translation=void 0,i(n(1044),t),i(n(1045),t),i(n(313),t),i(n(1046),t);var a=n(449);Object.defineProperty(t,"Translation",{enumerable:!0,get:function(){return a.Translation}});var o=n(1048);Object.defineProperty(t,"getFormattedLabel",{enumerable:!0,get:function(){return o.getFormattedLabel}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CURRENCY_LIST=t.CURRENCIES=t.Currencies=t.CurrencyKeys=t.formatWithCurrency=void 0;const r={AED:e=>`${i(e)}${s.AED}${a(e)}`,ARS:e=>`${i(e)}${s.ARS}${a(e)}`,AUD:e=>`${i(e)}${s.AUD}${a(e)}`,BRL:e=>`${i(e)}${s.BRL}${a(e)}`,CAD:e=>`${i(e)}${s.CAD}${a(e)}`,CHF:e=>`${i(e)}${a(e)}${s.CHF}`,CLP:e=>`${i(e)}${s.CLP}${a(e)}`,CNY:e=>`${i(e)}${s.CNY}${a(e)}`,DKK:e=>`${i(e)}${a(e)}${s.DKK}`,EUR:e=>`${i(e)}${s.EUR}${a(e)}`,GBP:e=>`${i(e)}${s.GBP}${a(e)}`,HKD:e=>`${i(e)}${s.HKD}${a(e)}`,ILS:e=>`${i(e)}${s.ILS}${a(e)}`,INR:e=>`${i(e)}${s.INR}${a(e)}`,JPY:e=>`${i(e)}${s.JPY}${a(e)}`,MXN:e=>`${i(e)}${s.MXN}${a(e)}`,NOK:e=>`${i(e)}${a(e)}${s.NOK}`,NZD:e=>`${i(e)}${s.NZD}${a(e)}`,PEN:e=>`${i(e)}${s.PEN}${a(e)}`,PHP:e=>`${i(e)}${s.PHP}${a(e)}`,PLN:e=>`${i(e)}${a(e)}${s.PLN}`,RSD:e=>`${i(e)}${a(e)}${s.RSD}`,RUB:e=>`${i(e)}${a(e)}${s.RUB}`,SAR:e=>`${i(e)}${a(e)}${s.SAR}`,SEK:e=>`${i(e)}${a(e)}${s.SEK}`,TRY:e=>`${i(e)}${s.TRY}${a(e)}`,USD:e=>`${i(e)}${s.USD}${a(e)}`},i=e=>parseFloat(e)<0?"-":"",a=e=>{const t=parseFloat(e);return isNaN(t)?"NaN":e.replace("-","")};var o,s;t.formatWithCurrency=(e,t)=>{return(r[t]||(e=>t=>`${i(t)}${a(t)}${s[e]||e}`)(t))(e)},function(e){e.AED="AED",e.ARS="ARS",e.AUD="AUD",e.BRL="BRL",e.CAD="CAD",e.CHF="CHF",e.CLP="CLP",e.CNY="CNY",e.DKK="DKK",e.EUR="EUR",e.GBP="GBP",e.HKD="HKD",e.ILS="ILS",e.INR="INR",e.JPY="JPY",e.MXN="MXN",e.NOK="NOK",e.NZD="NZD",e.PEN="PEN",e.PLN="PLN",e.PHP="PHP",e.RSD="RSD",e.RUB="RUB",e.SAR="SAR",e.SEK="SEK",e.TRY="TRY",e.USD="USD"}(o=t.CurrencyKeys||(t.CurrencyKeys={})),function(e){e.AED="د.إ",e.ARS="N$",e.AUD="A$",e.BRL="R$",e.CAD="C$",e.CHF="Fr.",e.CLP="CLP$",e.CNY="元",e.DKK="kr",e.EUR="€",e.GBP="£",e.HKD="HK$",e.ILS="₪",e.INR="₹",e.JPY="¥",e.MXN="Mex$",e.NOK="kr",e.NZD="NZ$",e.PEN="S/.",e.PHP="₱",e.PLN="zł",e.RSD="din",e.RUB="₽",e.SAR="SAR",e.SEK="kr",e.TRY="₺",e.USD="US$"}(s=t.Currencies||(t.Currencies={})),t.CURRENCIES={AED:{code:o.AED,label:"United Arab Emirates Dirham",symbol:s.AED,formatter:r.AED},ARS:{code:o.ARS,label:"Argentine Peso",symbol:s.ARS,formatter:r.ARS},AUD:{code:o.AUD,label:"Australian Dollar",symbol:s.AUD,formatter:r.AUD},BRL:{code:o.BRL,label:"Brazilian Real",symbol:s.BRL,formatter:r.BRL},CAD:{code:o.CAD,label:"Canadian Dollar",symbol:s.CAD,formatter:r.CAD},CHF:{code:o.CHF,label:"Swiss franc",symbol:s.CHF,formatter:r.CHF},CLP:{code:o.CLP,label:"Chilean Peso",symbol:s.CLP,formatter:r.CLP},CNY:{code:o.CNY,label:"Chinese Yuan Renminbi",symbol:s.CNY,formatter:r.CNY},DKK:{code:o.DKK,label:"Danish Krona",symbol:s.DKK,formatter:r.DKK},EUR:{code:o.EUR,label:"Euro",symbol:s.EUR,formatter:r.EUR},GBP:{code:o.GBP,label:"Pound Sterling",symbol:s.GBP,formatter:r.GBP},HKD:{code:o.HKD,label:"Hong Kong Dollar",symbol:s.HKD,formatter:r.HKD},ILS:{code:o.ILS,label:"Israeli Shekel",symbol:s.ILS,formatter:r.ILS},INR:{code:o.INR,label:"Indian Rupee",symbol:s.INR,formatter:r.INR},JPY:{code:o.JPY,label:"Japanese Yen",symbol:s.JPY,formatter:r.JPY},MXN:{code:o.MXN,label:"Mexican Peso",symbol:s.MXN,formatter:r.MXN},NOK:{code:o.NOK,label:"Norwegian Krona",symbol:s.NOK,formatter:r.NOK},NZD:{code:o.NZD,label:"New Zealand Dollar",symbol:s.NZD,formatter:r.NZD},PEN:{code:o.PEN,label:"Peruvian Sol",symbol:s.PEN,formatter:r.PEN},PHP:{code:o.PHP,label:"Philippine Peso",symbol:s.PHP,formatter:r.PHP},PLN:{code:o.PLN,label:"Polish Zloty",symbol:s.PLN,formatter:r.PLN},RSD:{code:o.RSD,label:"Serbian Dinar",symbol:s.RSD,formatter:r.RSD},RUB:{code:o.RUB,label:"Russian Ruble",symbol:s.RUB,formatter:r.RUB},SAR:{code:o.SAR,label:"Saudi Arabia Riyal",symbol:s.SAR,formatter:r.SAR},SEK:{code:o.SEK,label:"Swedish Krona",symbol:s.SEK,formatter:r.SEK},TRY:{code:o.TRY,label:"Turkish Lira",symbol:s.TRY,formatter:r.TRY},USD:{code:o.USD,label:"US Dollar",symbol:s.USD,formatter:r.USD}},t.CURRENCY_LIST=Object.keys(t.CURRENCIES).map(e=>t.CURRENCIES[e])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.i18nLanguages=void 0;const r=n(313);t.i18nLanguages={primaryDialects:{af:"af_ZA",ar:"ar",bg:"bg_BG",ca:"ca_AD",cs:"cs_CZ",cy:"cy_GB",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_US",es:"es_ES",et:"et_EE",eu:"eu",fa:"fa_IR",fi:"fi_FI",fr:"fr_FR",he:"he_IL",hr:"hr_HR",hu:"hu_HU",id:"id_ID",is:"is_IS",it:"it_IT",ja:"ja_JP",km:"km_KH",ko:"ko_KR",lt:"lt_LT",lv:"lv_LV",mn:"mn_MN",nb:"nb_NO",nl:"nl_NL",nn:"nn_NO",pl:"pl_PL",pt:"pt_PT",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sl:"sl_SI",sr:"sr_RS",sv:"sv_SE",th:"th_TH",tr:"tr_TR",uk:"uk_UA",vi:"vi_VN",zh:"zh_CN"},languageNames:{af_ZA:{af_ZA:"Afrikaans",en_GB:"Afrikaans",direction:r.LanguageDirection.LTR},ar:{ar:"العربية",en_GB:"Arabic",direction:r.LanguageDirection.RTL},bg_BG:{bg_BG:"Български",en_GB:"Bulgarian",direction:r.LanguageDirection.LTR},ca_AD:{ca_AD:"Català",en_GB:"Catalan",direction:r.LanguageDirection.LTR},cs_CZ:{cs_CZ:"Čeština",en_GB:"Czech",direction:r.LanguageDirection.LTR},cy_GB:{en_GB:"Welsh",cy_GB:"Cymraeg",direction:r.LanguageDirection.LTR},da_DK:{da_DK:"Dansk",en_GB:"Danish",direction:r.LanguageDirection.LTR},de_AT:{de_AT:"Deutsch (Österreich)",en_GB:"German (Austria)",direction:r.LanguageDirection.LTR},de_CH:{de_CH:"Deutsch (Schweiz)",en_GB:"German (Switzerland)",direction:r.LanguageDirection.LTR},de_DE:{de_DE:"Deutsch (Deutschland)",en_GB:"German (Germany)",direction:r.LanguageDirection.LTR},el_GR:{el_GR:"Ελληνικά",en_GB:"Greek",direction:r.LanguageDirection.LTR},en_GB:{en_GB:"English (UK)",direction:r.LanguageDirection.LTR},en_US:{en_US:"English (US)",en_GB:"English (US)",direction:r.LanguageDirection.LTR},es_CL:{es_CL:"Español (Chile)",en_GB:"Spanish (Chile)",direction:r.LanguageDirection.LTR},es_ES:{es_ES:"Español (España)",en_GB:"Spanish (Spain)",direction:r.LanguageDirection.LTR},es_MX:{es_MX:"Español (México)",en_GB:"Spanish (Mexico)",direction:r.LanguageDirection.LTR},et_EE:{et_EE:"Eesti",en_GB:"Estonian",direction:r.LanguageDirection.LTR},eu:{eu:"Euskara",en_GB:"Basque",direction:r.LanguageDirection.LTR},fa_IR:{fa_IR:"فارسی",en_GB:"Persian",direction:r.LanguageDirection.RTL},fi_FI:{fi_FI:"Suomi",en_GB:"Finnish",direction:r.LanguageDirection.LTR},fr_CA:{fr_CA:"Français (Canada)",en_GB:"French (Canada)",direction:r.LanguageDirection.LTR},fr_FR:{fr_FR:"Français",en_GB:"French (France)",direction:r.LanguageDirection.LTR},he_IL:{he_IL:"עברית",en_GB:"Hebrew",direction:r.LanguageDirection.RTL},hr_HR:{hr_HR:"Hrvatski",en_GB:"Croatian",direction:r.LanguageDirection.LTR},hu_HU:{hu_HU:"Magyar",en_GB:"Hungarian",direction:r.LanguageDirection.LTR},id_ID:{id_ID:"Bahasa Indonesia",en_GB:"Indonesian",direction:r.LanguageDirection.LTR},is_IS:{is_IS:"Íslenska",en_GB:"Icelandic",direction:r.LanguageDirection.LTR},it_IT:{it_IT:"Italiano",en_GB:"Italian",direction:r.LanguageDirection.LTR},ja_JP:{ja_JP:"日本語",en_GB:"Japanese",direction:r.LanguageDirection.LTR},km_KH:{km_KH:"ភាសាខ្មែរ",en_GB:"Khmer",direction:r.LanguageDirection.LTR},ko_KR:{ko_KR:"한국어",en_GB:"Korean",direction:r.LanguageDirection.LTR},lt_LT:{lt_LT:"Lietuvių",en_GB:"Lithuanian",direction:r.LanguageDirection.LTR},lv_LV:{lv_LV:"Latviešu",en_GB:"Latvian",direction:r.LanguageDirection.LTR},mn_MN:{mn_MN:"Монгол",en_GB:"Mongolian",direction:r.LanguageDirection.LTR},nb_NO:{nb_NO:"Norsk bokmål",en_GB:"Norwegian (Bokmål)",direction:r.LanguageDirection.LTR},nl_BE:{nl_BE:"Vlaams",en_GB:"Flemish",direction:r.LanguageDirection.LTR},nl_NL:{nl_NL:"Nederlands",en_GB:"Dutch",direction:r.LanguageDirection.LTR},nn_NO:{nn_NO:"Norsk nynorsk",en_GB:"Norwegian (Nynorsk)",direction:r.LanguageDirection.LTR},pl_PL:{pl_PL:"Polski",en_GB:"Polish",direction:r.LanguageDirection.LTR},pt_BR:{pt_BR:"Português (Brasil)",en_GB:"Portuguese (Brazil)",direction:r.LanguageDirection.LTR},pt_PT:{pt_PT:"Português (Portugal)",en_GB:"Portuguese (Portugal)",direction:r.LanguageDirection.LTR},ro_RO:{ro_RO:"Română",en_GB:"Romanian",direction:r.LanguageDirection.LTR},ru_RU:{ru_RU:"Русский",en_GB:"Russian",direction:r.LanguageDirection.LTR},sk_SK:{sk_SK:"Slovenčina",en_GB:"Slovak",direction:r.LanguageDirection.LTR},sl_SI:{sl_SI:"Slovenščina",en_GB:"Slovenian",direction:r.LanguageDirection.LTR},sr_RS:{sr_RS:"Српски / Srpski",en_GB:"Serbian",direction:r.LanguageDirection.LTR},sv_SE:{sv_SE:"Svenska",en_GB:"Swedish",direction:r.LanguageDirection.LTR},th_TH:{th_TH:"ไทย",en_GB:"Thai",direction:r.LanguageDirection.LTR},tr_TR:{tr_TR:"Türkçe",en_GB:"Turkish",direction:r.LanguageDirection.LTR},uk_UA:{uk_UA:"Українська",en_GB:"Ukrainian",direction:r.LanguageDirection.LTR},vi_VN:{vi_VN:"Tiếng Việt",en_GB:"Vietnamese",direction:r.LanguageDirection.LTR},zh_CN:{zh_CN:"中文 (中国大陆)",en_GB:"Chinese (PRC)",direction:r.LanguageDirection.LTR},zh_TW:{zh_TW:"中文 (台灣)",en_GB:"Chinese (Taiwan)",direction:r.LanguageDirection.LTR}}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getTimezoneOffsetInMs=t.getTimezoneOffset=t.getDateTimeLong=t.getDateTime=t.getTime=t.getDate=t.getDateFormat=t.getDuration=t.getDurationTimeFormat=t.stripHour=t.TIME_FORMATS=t.DATE_FORMATS=void 0;const i=r(n(4));t.DATE_FORMATS={scheduleTitleFormat:{default:"dddd Do MMMM",en_US:"dddd MMMM Do",tr_TR:"DD MMMM dddd"},US_DATE:"MM/DD/YYYY",EU_DATE:"DD/MM/YYYY",RU_DATE:"DD.MM.YYYY",JP_DATE:"LL",US_TIME:"h:mm A",EU_TIME:"HH:mm",RU_TIME:"HH:mm",JP_TIME:"LT",US_TIME_DATE:"h:mm A, MM/DD/YY",EU_TIME_DATE:"HH:mm, DD/MM/YY",RU_TIME_DATE:"HH:mm, DD.MM.YY",JP_TIME_DATE:"llll",TIME_DATE_LONG:"LLLL"},t.TIME_FORMATS={default:"HH:mm:ss",withCharacters:"HH[h] mm[m] ss[s]"};const a=e=>null===e.toLowerCase().match(/h/,"i");t.stripHour=e=>{const t=e.trim().match(new RegExp(/[:|\s]/,"i"));if(t){const[n]=t;return e.split(n).filter(a).join(n)}return e},t.getDurationTimeFormat=(e,n=!1)=>{let{default:r,withCharacters:i}=t.TIME_FORMATS;return e>=3600||(r=t.stripHour(r),i=t.stripHour(i)),n?i:r},t.getDuration=(e,n=!1)=>{const r=e<0?"-":"",a=Math.abs(e),o=t.getDurationTimeFormat(a,n);return`${r}${i.default.utc(1e3*a).format(o)}`},t.getDateFormat=e=>{let n,r,i;return e.includes("US")?(n=t.DATE_FORMATS.US_TIME_DATE,r=t.DATE_FORMATS.US_DATE,i=t.DATE_FORMATS.US_TIME):e.includes("RU")?(n=t.DATE_FORMATS.RU_TIME_DATE,r=t.DATE_FORMATS.RU_DATE,i=t.DATE_FORMATS.RU_TIME):e.includes("JP")?(n=t.DATE_FORMATS.JP_TIME_DATE,r=t.DATE_FORMATS.JP_DATE,i=t.DATE_FORMATS.JP_TIME):(n=t.DATE_FORMATS.EU_TIME_DATE,r=t.DATE_FORMATS.EU_DATE,i=t.DATE_FORMATS.EU_TIME),{formatDateTime:n,formatDate:r,formatTime:i}},t.getDate=(e,n)=>{const{formatDate:r}=t.getDateFormat(n),a=new Date(e);return i.default.utc(a,void 0,n).format(r)},t.getTime=(e,n)=>{const{formatTime:r}=t.getDateFormat(n),a=new Date(e);return i.default.utc(a,void 0,n).format(r)},t.getDateTime=(e,n,r=0)=>{const{formatDateTime:a}=t.getDateFormat(n),o=new Date(e-r);return i.default.utc(o,void 0,n).format(a)},t.getDateTimeLong=(e,n,r=0,a=t.DATE_FORMATS.TIME_DATE_LONG)=>{const o=new Date(e-r);return i.default.utc(o).locale(n).format(a)};const o=e=>{const t=e||(new Date).getTimezoneOffset(),n=t>0?"-":"+",r=Math.abs(t);return`${n}${i.default.utc(1e3*r).format("mm:ss")}`};t.getTimezoneOffset=e=>{if(e)return o(e);try{const e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e)return e;throw{message:"Timezone is undefined"}}catch(e){return o()}},t.getTimezoneOffsetInMs=e=>60*(e||(new Date).getTimezoneOffset())*1e3},function(e,t,n){var r={"./af":314,"./af.js":314,"./ar":315,"./ar-dz":316,"./ar-dz.js":316,"./ar-kw":317,"./ar-kw.js":317,"./ar-ly":318,"./ar-ly.js":318,"./ar-ma":319,"./ar-ma.js":319,"./ar-sa":320,"./ar-sa.js":320,"./ar-tn":321,"./ar-tn.js":321,"./ar.js":315,"./az":322,"./az.js":322,"./be":323,"./be.js":323,"./bg":324,"./bg.js":324,"./bm":325,"./bm.js":325,"./bn":326,"./bn-bd":327,"./bn-bd.js":327,"./bn.js":326,"./bo":328,"./bo.js":328,"./br":329,"./br.js":329,"./bs":330,"./bs.js":330,"./ca":331,"./ca.js":331,"./cs":332,"./cs.js":332,"./cv":333,"./cv.js":333,"./cy":334,"./cy.js":334,"./da":335,"./da.js":335,"./de":336,"./de-at":337,"./de-at.js":337,"./de-ch":338,"./de-ch.js":338,"./de.js":336,"./dv":339,"./dv.js":339,"./el":340,"./el.js":340,"./en-au":341,"./en-au.js":341,"./en-ca":342,"./en-ca.js":342,"./en-gb":343,"./en-gb.js":343,"./en-ie":344,"./en-ie.js":344,"./en-il":345,"./en-il.js":345,"./en-in":346,"./en-in.js":346,"./en-nz":347,"./en-nz.js":347,"./en-sg":348,"./en-sg.js":348,"./eo":349,"./eo.js":349,"./es":350,"./es-do":351,"./es-do.js":351,"./es-mx":352,"./es-mx.js":352,"./es-us":353,"./es-us.js":353,"./es.js":350,"./et":354,"./et.js":354,"./eu":355,"./eu.js":355,"./fa":356,"./fa.js":356,"./fi":357,"./fi.js":357,"./fil":358,"./fil.js":358,"./fo":359,"./fo.js":359,"./fr":360,"./fr-ca":361,"./fr-ca.js":361,"./fr-ch":362,"./fr-ch.js":362,"./fr.js":360,"./fy":363,"./fy.js":363,"./ga":364,"./ga.js":364,"./gd":365,"./gd.js":365,"./gl":366,"./gl.js":366,"./gom-deva":367,"./gom-deva.js":367,"./gom-latn":368,"./gom-latn.js":368,"./gu":369,"./gu.js":369,"./he":370,"./he.js":370,"./hi":371,"./hi.js":371,"./hr":372,"./hr.js":372,"./hu":373,"./hu.js":373,"./hy-am":374,"./hy-am.js":374,"./id":375,"./id.js":375,"./is":376,"./is.js":376,"./it":377,"./it-ch":378,"./it-ch.js":378,"./it.js":377,"./ja":379,"./ja.js":379,"./jv":380,"./jv.js":380,"./ka":381,"./ka.js":381,"./kk":382,"./kk.js":382,"./km":383,"./km.js":383,"./kn":384,"./kn.js":384,"./ko":385,"./ko.js":385,"./ku":386,"./ku.js":386,"./ky":387,"./ky.js":387,"./lb":388,"./lb.js":388,"./lo":389,"./lo.js":389,"./lt":390,"./lt.js":390,"./lv":391,"./lv.js":391,"./me":392,"./me.js":392,"./mi":393,"./mi.js":393,"./mk":394,"./mk.js":394,"./ml":395,"./ml.js":395,"./mn":396,"./mn.js":396,"./mr":397,"./mr.js":397,"./ms":398,"./ms-my":399,"./ms-my.js":399,"./ms.js":398,"./mt":400,"./mt.js":400,"./my":401,"./my.js":401,"./nb":402,"./nb.js":402,"./ne":403,"./ne.js":403,"./nl":404,"./nl-be":405,"./nl-be.js":405,"./nl.js":404,"./nn":406,"./nn.js":406,"./oc-lnc":407,"./oc-lnc.js":407,"./pa-in":408,"./pa-in.js":408,"./pl":409,"./pl.js":409,"./pt":410,"./pt-br":411,"./pt-br.js":411,"./pt.js":410,"./ro":412,"./ro.js":412,"./ru":413,"./ru.js":413,"./sd":414,"./sd.js":414,"./se":415,"./se.js":415,"./si":416,"./si.js":416,"./sk":417,"./sk.js":417,"./sl":418,"./sl.js":418,"./sq":419,"./sq.js":419,"./sr":420,"./sr-cyrl":421,"./sr-cyrl.js":421,"./sr.js":420,"./ss":422,"./ss.js":422,"./sv":423,"./sv.js":423,"./sw":424,"./sw.js":424,"./ta":425,"./ta.js":425,"./te":426,"./te.js":426,"./tet":427,"./tet.js":427,"./tg":428,"./tg.js":428,"./th":429,"./th.js":429,"./tk":430,"./tk.js":430,"./tl-ph":431,"./tl-ph.js":431,"./tlh":432,"./tlh.js":432,"./tr":433,"./tr.js":433,"./tzl":434,"./tzl.js":434,"./tzm":435,"./tzm-latn":436,"./tzm-latn.js":436,"./tzm.js":435,"./ug-cn":437,"./ug-cn.js":437,"./uk":438,"./uk.js":438,"./ur":439,"./ur.js":439,"./uz":440,"./uz-latn":441,"./uz-latn.js":441,"./uz.js":440,"./vi":442,"./vi.js":442,"./x-pseudo":443,"./x-pseudo.js":443,"./yo":444,"./yo.js":444,"./zh-cn":445,"./zh-cn.js":445,"./zh-hk":446,"./zh-hk.js":446,"./zh-mo":447,"./zh-mo.js":447,"./zh-tw":448,"./zh-tw.js":448};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id=1047},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedLabel=void 0,t.getFormattedLabel=(e,t)=>Object.keys(t).reduce((e,n)=>e.replace(`{{${n}}}`,t[n]),e)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.setTimeOffset=t.jsonPayloadFormatter=t.baseUrlFormatter=t.applyAuthorizationHeader=t.defaultRequestHeaders=t.queryStringFormatter=void 0;const s=n(154),u=n(78),l=n(451);i(n(1050),t),t.queryStringFormatter=()=>e=>(t,n)=>{const{method:r,queryParams:i}=n;if(r===s.METHODS.get&&i){const r=Object.keys(i).reduce((e,t)=>{const n=encodeURIComponent(t),r=i[t];if(Array.isArray(r)){const t=[];return r.forEach(e=>{const r=encodeURIComponent(String(e));t.push(`${n}=${r}`)}),e.concat([t.join("&")])}const a=encodeURIComponent(String(r));return e.concat([`${n}=${a}`])},[]).join("&");return e(`${t}?${r}`,n)}return e(t,n)},t.defaultRequestHeaders=(e,t)=>n=>(r,i)=>a(void 0,void 0,void 0,(function*(){const a=Object.assign({[u.HTTPHeaders.ACCEPT]:"application/json, text/plain, */*",[u.HTTPHeaders.CONTENT_TYPE]:u.HTTPContentTypes.JSON,[u.HTTPHeaders.API_KEY]:(yield e.get("apiKey"))||"",[u.HTTPHeaders.APP]:u.DICE_APP_HEADER},i.headers),o=yield e.get("realm");o&&!(null==a?void 0:a[u.HTTPHeaders.REALM])&&(a[u.HTTPHeaders.REALM]=o),t&&(a[u.HTTPHeaders.APP_VERSION]=t),(null==a?void 0:a[u.HTTPHeaders.CONTENT_TYPE])===u.HTTPContentTypes.FORM_DATA&&delete a[u.HTTPHeaders.CONTENT_TYPE];const s=Object.assign(Object.assign({},i),{headers:a});return n(r,s)})),t.applyAuthorizationHeader=(e,t)=>n=>(r,i)=>a(void 0,void 0,void 0,(function*(){var{useAuth:a}=i,s=o(i,["useAuth"]);if(!a)return n(r,s);const l=`Bearer ${yield e.get(u.AUTH_TOKEN_KEY)}`,c=Object.assign(Object.assign({},s),{headers:Object.assign(Object.assign({},s.headers),{[u.HTTPHeaders.AUTHORIZATION]:l})});if(null==t||t(s.clientRequestId||r,Object.assign({useAuth:a},c)),![u.HTTPHeaders.AUTHORIZATION,u.HTTPHeaders.REALM,u.HTTPHeaders.API_KEY].every(e=>!!c.headers[e]))throw new Error("Authorization headers missing. Required: Authorization, Realm, x-api-key");return n(r,c)})),t.baseUrlFormatter=e=>t=>(n,r)=>n.startsWith("http")?t(n,r):t(`${e}${n}`,r),t.jsonPayloadFormatter=()=>e=>(t,n)=>{const{body:r}=n,i="string"==typeof r,a=r&&n.headers&&l.isJsonContentType(n.headers[u.HTTPHeaders.CONTENT_TYPE])&&!i?JSON.stringify(r):r,o=Object.assign(Object.assign({},n),{body:a});return e(t,o)},t.setTimeOffset=e=>t=>(n,r,i,o)=>a(void 0,void 0,void 0,(function*(){if(n.headers){const t=n.headers.get(u.HTTPHeaders.DATE);if(t){const n=new Date(t).getTime(),r=Date.now()-n;yield e.set(u.TIME_OFFSET_STORAGE_KEY,r.toString())}}return t(n,r,i,o)}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkToken=t.tokenRefresh=void 0;const a=i(n(155)),o=n(78);t.tokenRefresh=(e,t)=>n=>(i,a,o,s,u)=>r(void 0,void 0,void 0,(function*(){const r=null==t?void 0:t.some(e=>a.includes(e));let l=i;if(401===(null==i?void 0:i.status)){try{yield e({useErrorMiddlewares:!r,headers:o.headers})}catch(e){const t=!0!==(null==e?void 0:e.ok)||-1===(null==e?void 0:e.status)||(null==e?void 0:e.status)>=500,i=r&&t?a:e.url;return Object.defineProperty(e,"url",{value:i}),n(e,a,o,s)}try{const e=yield s(a,o);if(e.ok)return u({response:e});l=e}catch(e){l=e}}return n(l,a,o,s)})),t.checkToken=(e,t)=>n=>(i,s)=>r(void 0,void 0,void 0,(function*(){if(s.useAuth){const n=yield t.get(o.AUTH_TOKEN_KEY);if(n){const{exp:r}=a.default(n),i=(yield t.get(o.TIME_OFFSET_STORAGE_KEY))||"0";1e3*r<=Date.now()-parseInt(i,10)&&(yield e())}}return n(i,s)}))},function(e,t,n){var r=n(1052);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(r(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return r(t)}}},function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,a,o=0,s=0,u="";a=t.charAt(s++);~a&&(i=o%4?64*i+a:a,o++%4)?u+=String.fromCharCode(255&i>>(-2*o&6)):0)a=n.indexOf(a);return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentMethodType=t.GuestAccessType=t.CheckoutStepKey=t.PaymentProviderTypes=t.PaymentProviderGroupTypes=t.MarketingProviderTypes=t.DeviceTypes=t.NavbarPositions=t.DEFAULT_THEME=void 0;const r=n(112),i="https://imggaming.s3.amazonaws.com/dice-web/assets/fonts/poppins-bold-webfont",a="https://imggaming.s3.amazonaws.com/dice-web/assets/fonts/Roboto-Regular",o="https://imggaming.s3.amazonaws.com/dice-web/assets/fonts/Roboto-Bold",s="https://imggaming.s3.amazonaws.com/dice-web/assets/fonts/robotocondensed-bold-webfont";t.DEFAULT_THEME={colors:{primary:"#0076C0",secondary:"#FFFFFF",tertiary:"#272727",background:"#000000",splashBackground:"#000000",epg:"#10253D"},fonts:{primaryUrl:i,primaryName:r.getFontName(i)||"poppins-bold-webfont",secondaryUrl:a,secondaryName:r.getFontName(a)||"Roboto-Regular",secondaryBoldUrl:o,secondaryBoldName:r.getFontName(o)||"Roboto-Bold",tertiaryUrl:s,tertiaryName:r.getFontName(s)||"robotocondensed-bold-webfont"},images:{},positions:{}},function(e){e.RIGHT="RIGHT",e.LEFT="LEFT",e.TOP="TOP",e.BOTTOM="BOTTOM"}(t.NavbarPositions||(t.NavbarPositions={})),function(e){e.WEB="WEB",e.IOS="IOS",e.ANDROID="ANDROID"}(t.DeviceTypes||(t.DeviceTypes={})),function(e){e.ADOBE="ADOBE",e.CATCH_MEDIA="CATCHMEDIA",e.MIXPANEL="MIXPANEL",e.GOOGLE="GOOGLE"}(t.MarketingProviderTypes||(t.MarketingProviderTypes={})),function(e){e.CREDIT_CARD="CREDIT_CARD",e.PAYPAL="PAYPAL",e.WALLET="WALLET",e.MOBILE="MOBILE_BILLING"}(t.PaymentProviderGroupTypes||(t.PaymentProviderGroupTypes={})),function(e){e.STRIPE="STRIPE",e.GOOGLE_IAP="GOOGLE_IAP",e.APPLE_IAP="APPLE_IAP",e.AMAZON_IAP="AMAZON_IAP",e.ROKU_IAP="ROKU_IAP",e.PAYCELL="PAYCELL",e.PAYPAL="PAYPAL",e.ADYEN="ADYEN",e.MICROSOFT_IAP="MICROSOFT_IAP",e.ZERO_BALANCE="ZERO_BALANCE",e.FONIX="FONIX"}(t.PaymentProviderTypes||(t.PaymentProviderTypes={})),function(e){e.CREATE_ACCOUNT="CREATE_ACCOUNT",e.SELECT_LICENCE="SELECT_LICENCE"}(t.CheckoutStepKey||(t.CheckoutStepKey={})),function(e){e.ALLOWED="ALLOWED",e.DISALLOWED="DISALLOWED"}(t.GuestAccessType||(t.GuestAccessType={})),function(e){e.CARD="CARD",e.RECURRING_BANCONTACT="RECURRING_BANCONTACT",e.PAYPAL="PAYPAL",e.MOBILE="MOBILE_BILLING"}(t.PaymentMethodType||(t.PaymentMethodType={}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Realm=void 0;const i=n(111),a=n(78),o=n(1055),s=n(112);class u{constructor(e){if(this._data=null,this._dataRaw=null,this.defaultRealmData=null,this._lastUpdated=null,this._listeners=new Set,!e.name&&!e.hostname)throw new Error("Either realm name or app hostname must be provided.");this.storageProvider=e.storageProvider,this._http=e.http,this.defaultRealmData=e.defaultDataRaw,this._dataRaw=i.pick(e.defaultDataRaw,null),this.defaultTheme=e.defaultTheme,this.useDynamicFonts=i.pick(e.useDynamicFonts,!0),this.activeLocale=i.pick(e.defaultLocale,"en_US"),this.path=e.name?`realm/${e.name}`:`domain/${e.hostname}`,this._dataRaw&&(this._data=o.transform(this._dataRaw,e.defaultTheme,this.activeLocale))}get listeners(){return this._listeners}addListener(e){this._listeners.add(e)}removeListener(e){this._listeners.delete(e)}fetch(){return r(this,void 0,void 0,(function*(){const e=yield this.storageProvider.get(a.AUTH_TOKEN_KEY),{parsedData:t}=yield this._http.get(`/realm-settings/${this.path}`,{useAuth:!!e});return yield this.processRawData(t)}))}processRawData(e){return r(this,void 0,void 0,(function*(){const t=o.transform(e,this.defaultTheme,this.activeLocale);return this.update(t,e)}))}updateFonts(e,t){return r(this,void 0,void 0,(function*(){this._data&&this._dataRaw&&(this.activeLocale=`${e}_${t}`,this._data.theme.fonts=s.getLanguageFont({realmDataRaw:this.useDynamicFonts?this._dataRaw:this.defaultRealmData,languageCode:e,languageRegion:t,theme:this.defaultTheme}),yield this.refreshCache())}))}get http(){return this._http}set http(e){this._http=e}get data(){return this._data}get dataRaw(){return this._dataRaw}getDataRawForKey(e){return e.split(".").reduce((e,t)=>e&&e[t],this._dataRaw)}get lastUpdated(){return this._lastUpdated}hydrate(){return r(this,void 0,void 0,(function*(){const e=yield this.storageProvider.get(u.KEY_ROOT);if(e){const t=JSON.parse(e);return t[u.KEY_LOCALE]===this.activeLocale&&(t[u.KEY_DATA]&&(this._data=t[u.KEY_DATA]),t[u.KEY_LAST_UPDATED]&&(this._lastUpdated=t[u.KEY_LAST_UPDATED]),t[u.KEY_DATA_RAW]&&(this._dataRaw=t[u.KEY_DATA_RAW]),this._listeners.forEach(({notifyRealmChange:e})=>e()),!0)}return!1}))}refreshCache(){return r(this,void 0,void 0,(function*(){yield this.storageProvider.set(u.KEY_ROOT,JSON.stringify({[u.KEY_DATA]:this._data,[u.KEY_LAST_UPDATED]:Date.now(),[u.KEY_DATA_RAW]:this._dataRaw,[u.KEY_LOCALE]:this.activeLocale})),this._listeners.forEach(({notifyRealmChange:e})=>e())}))}update(e,t){return r(this,void 0,void 0,(function*(){return this._dataRaw=t,!this.useDynamicFonts&&this._data?this._data=Object.assign(Object.assign({},e),{theme:Object.assign(Object.assign({},e.theme),{fonts:this._data.theme.fonts}),languages:this._data.languages}):this._data=e,yield this.refreshCache(),this._data}))}}t.Realm=u,u.KEY_ROOT="_REALM_SERVICE",u.KEY_DATA="KEY_DATA",u.KEY_DATA_RAW="KEY_DATA_RAW",u.KEY_LAST_UPDATED="KEY_LAST_UPDATED",u.KEY_LOCALE="KEY_LOCALE"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transform=void 0;const r=n(112);t.transform=(e,t,n)=>{const{appSettings:i,authenticationProviders:a,marketingProviders:o,domains:s,geoRestriction:u,paymentProviders:l,hasVod:c,hasLive:d,allowSelfregistration:f,requiresConfirmation:h,compulsoryTrial:p,signupWithConsent:m,showLicencesOnSignup:g,signupWithCredentials:v,hasPromoNotification:y,guestsAllowed:_,vpnAllowed:b,hasVouchers:T,hasDvr:E,showWelcomeScreen:S,settings:{PRIMARY_COLOR:w,SECONDARY_COLOR:A,TERTIARY_COLOR:M,BG_COLOR:L,SPLASH_BG_COLOR:C,SPLASH_BACKGROUND_COLOR:D,EPG_COLOR:k,APP_ICON:P,CARD_THUMBNAIL:I,POSTER_THUMBNAIL:O,SECTION_THUMBNAIL:R,LANDING_BG:x,LANDING_BG_WEB:N,LARGE_LOGO:j,LOGO:F,LOGO_LONG_FORM:U,LOADER:B,PLAYLIST_THUMBNAIL:Y,SPLASH_SCREEN:H,WITH_COOKIE_BANNER:V,NAVBAR_POSITION:G,REDICRECT_ON_SPLASH_SCREEN_URL:K,SEASONAL_CALENDAR:W,EPG_MATRIX_HEADER_IMAGE:q,GAM_PRODUCT_NAME:z,GAM_NETWORK_ID:X,ANIMATE_SPLASH_SCREEN:Q,ANIMATE_SPLASH_SCREEN_CONFIG:$,VIDEO_ANALYTICS_KEY:J,APS_TEST_MODE:Z},iosSettings:ee,androidSettings:te,webSettings:ne,showSponsorship:re,sponsorLogo:ie,customizations:ae,checkoutFirstStep:oe,fullGuestAccess:se,allowGuestSchedule:ue,pinLoginEnabled:le,dynamicLinks:ce,vcidInjection:de,partitionSettings:fe,epgMatrix:he,scheduleSection:pe,hideSpoilers:me}=e,ge=i||{},[ve,ye]=n.split("_");return{appSettings:{android:ge.ANDROID||{},chromecast:ge.CHROMECAST||{},ios:ge.IOS||{},samsung:ge.SAMSUNG||{}},authenticationProviders:a,marketingProviders:o,domains:s,geoRestriction:u,languages:e.realmLanguages,name:e.realm,paymentProviders:l.sort((e,t)=>e&&t?e.providerId-t.providerId:0),settings:{showSponsorship:re,sponsorLogo:ie,showWelcomeScreen:S,vpnAllowed:b,hasVouchers:T,hasDvr:E,hasVod:c,hasLive:d,allowSelfRegistration:f,requiresConfirmation:h,compulsoryTrial:p,signUpWithConsent:m,showLicencesOnSignUp:g,signUpWithCredentials:v,hasPromoNotification:y,withCookieBanner:"string"==typeof V?"true"===V:V,redirectOnSplashScreenUrl:K,ios:ee,android:te,web:ne,guestsAllowed:_,customizations:ae,checkoutFirstStep:oe,fullGuestAccess:se,allowGuestSchedule:ue,pinLoginEnabled:le,vcidInjection:de,partitionSettings:fe,seasonalCalendar:W,epgMatrix:he,epgMatrixHeaderImage:q,scheduleSection:pe,hideSpoilers:me,gamProductName:z,gamNetworkId:X,animateSplashScreen:Q,animateSplashScreenConfig:$,videoAnalyticsKey:J,apsTestMode:Z},theme:{colors:{primary:w||t.colors.primary,secondary:A||t.colors.secondary,tertiary:M||t.colors.tertiary,background:L||t.colors.background,splashBackground:D||C||t.colors.splashBackground,epg:k||t.colors.epg},fonts:r.getLanguageFont({realmDataRaw:e,theme:t,languageRegion:ye,languageCode:ve}),images:{appIcon:P,cardThumbnail:I,posterThumbnail:O,sectionThumbnail:R,landingBackground:x,landingBackgroundWeb:N,largeLogo:j,logo:F,longLogoForm:U,loader:B,playlistThumbnail:Y,splashScreen:H},positions:{navbar:G}},dynamicLinks:ce}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageProvider=void 0;t.LocalStorageProvider=class{constructor(e){this.getKey=e=>`${this.keyPrefix}${e}`,this.get=e=>{const t=localStorage.getItem(this.getKey(e));return Promise.resolve(t)},this.set=(e,t)=>(localStorage.setItem(this.getKey(e),t),Promise.resolve()),this.remove=e=>(localStorage.removeItem(this.getKey(e)),Promise.resolve()),this.keyPrefix=`${e}_`}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorageProvider=void 0;t.MemoryStorageProvider=class{constructor(){this.storage={}}get(e){const t=this.storage[e];return void 0!==t?Promise.resolve(t):Promise.resolve(null)}set(e,t){return this.storage[e]=t,Promise.resolve()}remove(e){return delete this.storage[e],Promise.resolve()}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(1059),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subscriber=void 0;const r=n(1060);t.Subscriber=class{constructor({manager:e,pubnubConfig:t}){this.id="",this.subscribe=e=>this.manager.subscribe(Object.assign(Object.assign({},e),{subscriptionId:this.id})),this.unsubscribe=e=>this.manager.unsubscribe(Object.assign(Object.assign({},e),{subscriptionId:this.id})),this.manager=e||new r.PubnubManager(t),this.id=this.manager.subscriptionId}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PubnubManager=void 0;const i=r(n(1061));t.PubnubManager=class{constructor(e){this.channels={},this.handleMessage=e=>{(this.channels[e.channel]||[]).forEach(t=>{t.handler(e)})},this.subscribe=({channel:e,handler:t,subscriptionId:n,withPresence:r})=>{this.channels[e]||(this.channels[e]=[]),this.channels[e].length||this.pubnub.subscribe({channels:[e],withPresence:r}),n&&t&&this.channels[e].push({subscriptionId:n,handler:t})},this.unsubscribe=({channel:e,subscriptionId:t})=>{if(this.channels[e]){const n=this.channels[e].filter(e=>e.subscriptionId!==t);return n.length!==this.channels[e].length&&(this.channels[e]=n,this.pubnub.unsubscribe({channels:[e]}),!0)}return!1},this.pubnub=new i.default(Object.assign({},e)),this.pubnub.addListener({message:this.handleMessage})}get subscriptionId(){return i.default.generateUUID()}}},function(e,t,n){var r;window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=27)}([function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNMessageCounts:"PNMessageCountsOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNSignalOperation:"PNSignalOperation",PNAddMessageActionOperation:"PNAddActionOperation",PNRemoveMessageActionOperation:"PNRemoveMessageActionOperation",PNGetMessageActionsOperation:"PNGetMessageActionsOperation",PNCreateUserOperation:"PNCreateUserOperation",PNUpdateUserOperation:"PNUpdateUserOperation",PNDeleteUserOperation:"PNDeleteUserOperation",PNGetUserOperation:"PNGetUsersOperation",PNGetUsersOperation:"PNGetUsersOperation",PNCreateSpaceOperation:"PNCreateSpaceOperation",PNUpdateSpaceOperation:"PNUpdateSpaceOperation",PNDeleteSpaceOperation:"PNDeleteSpaceOperation",PNGetSpaceOperation:"PNGetSpacesOperation",PNGetSpacesOperation:"PNGetSpacesOperation",PNGetMembersOperation:"PNGetMembersOperation",PNUpdateMembersOperation:"PNUpdateMembersOperation",PNGetMembershipsOperation:"PNGetMembershipsOperation",PNUpdateMembershipsOperation:"PNUpdateMembershipsOperation",PNListFilesOperation:"PNListFilesOperation",PNGenerateUploadUrlOperation:"PNGenerateUploadUrlOperation",PNPublishFileOperation:"PNPublishFileOperation",PNGetFileUrlOperation:"PNGetFileUrlOperation",PNDownloadFileOperation:"PNDownloadFileOperation",PNGetAllUUIDMetadataOperation:"PNGetAllUUIDMetadataOperation",PNGetUUIDMetadataOperation:"PNGetUUIDMetadataOperation",PNSetUUIDMetadataOperation:"PNSetUUIDMetadataOperation",PNRemoveUUIDMetadataOperation:"PNRemoveUUIDMetadataOperation",PNGetAllChannelMetadataOperation:"PNGetAllChannelMetadataOperation",PNGetChannelMetadataOperation:"PNGetChannelMetadataOperation",PNSetChannelMetadataOperation:"PNSetChannelMetadataOperation",PNRemoveChannelMetadataOperation:"PNRemoveChannelMetadataOperation",PNSetMembersOperation:"PNSetMembersOperation",PNSetMembershipsOperation:"PNSetMembershipsOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerGrantToken:"PNAccessManagerGrantToken",PNAccessManagerAudit:"PNAccessManagerAudit"},e.exports=t.default},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";(function(t){function n(e){return encodeURIComponent(e).replace(/[!~*'()]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}var r="The Objects v1 API has been deprecated.\nYou can learn more about Objects v2 API at https://www.pubnub.com/docs/web-javascript/api-reference-objects.\nIf you have questions about the Objects v2 API or require additional help with migrating to the new data model, please contact PubNub Support at support@pubnub.com.";e.exports={signPamFromParams:function(e){return function(e){return function(e){var t=[];return Object.keys(e).forEach((function(e){return t.push(e)})),t}(e).sort()}(e).map((function(t){return"".concat(t,"=").concat(n(e[t]))})).join("&")},endsWith:function(e,t){return-1!==e.indexOf(t,this.length-t.length)},createPromise:function(){var e,t;return{promise:new Promise((function(n,r){e=n,t=r})),reject:t,fulfill:e}},encodeString:n,deprecated:function(e){return function(){var n,i;return void 0!==t&&"test"!==(null===(n=t)||void 0===n||null===(i=n.env)||void 0===i?void 0:"production")&&console.warn(r),e.apply(void 0,arguments)}}}}).call(this,n(39))},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5)),a=r(n(6)),o=r(n(4)),s=r(n(17)),u=(n(2),function(){function e(t){var n,r,a=t.setup,u=t.db;(0,i.default)(this,e),(0,o.default)(this,"_db",void 0),(0,o.default)(this,"subscribeKey",void 0),(0,o.default)(this,"publishKey",void 0),(0,o.default)(this,"secretKey",void 0),(0,o.default)(this,"cipherKey",void 0),(0,o.default)(this,"authKey",void 0),(0,o.default)(this,"UUID",void 0),(0,o.default)(this,"proxy",void 0),(0,o.default)(this,"instanceId",void 0),(0,o.default)(this,"sdkName",void 0),(0,o.default)(this,"sdkFamily",void 0),(0,o.default)(this,"partnerId",void 0),(0,o.default)(this,"filterExpression",void 0),(0,o.default)(this,"suppressLeaveEvents",void 0),(0,o.default)(this,"secure",void 0),(0,o.default)(this,"origin",void 0),(0,o.default)(this,"logVerbosity",void 0),(0,o.default)(this,"useInstanceId",void 0),(0,o.default)(this,"useRequestId",void 0),(0,o.default)(this,"keepAlive",void 0),(0,o.default)(this,"keepAliveSettings",void 0),(0,o.default)(this,"autoNetworkDetection",void 0),(0,o.default)(this,"announceSuccessfulHeartbeats",void 0),(0,o.default)(this,"announceFailedHeartbeats",void 0),(0,o.default)(this,"_presenceTimeout",void 0),(0,o.default)(this,"_heartbeatInterval",void 0),(0,o.default)(this,"_subscribeRequestTimeout",void 0),(0,o.default)(this,"_transactionalRequestTimeout",void 0),(0,o.default)(this,"_useSendBeacon",void 0),(0,o.default)(this,"_PNSDKSuffix",void 0),(0,o.default)(this,"requestMessageCountThreshold",void 0),(0,o.default)(this,"restore",void 0),(0,o.default)(this,"dedupeOnSubscribe",void 0),(0,o.default)(this,"maximumCacheSize",void 0),(0,o.default)(this,"customEncrypt",void 0),(0,o.default)(this,"customDecrypt",void 0),(0,o.default)(this,"fileUploadPublishRetryLimit",void 0),(0,o.default)(this,"useRandomIVs",void 0),this._PNSDKSuffix={},this._db=u,this.instanceId="pn-".concat(s.default.createUUID()),this.secretKey=a.secretKey||a.secret_key,this.subscribeKey=a.subscribeKey||a.subscribe_key,this.publishKey=a.publishKey||a.publish_key,this.sdkName=a.sdkName,this.sdkFamily=a.sdkFamily,this.partnerId=a.partnerId,this.setAuthKey(a.authKey),this.setCipherKey(a.cipherKey),this.setFilterExpression(a.filterExpression),this.origin=a.origin||"ps.pndsn.com",this.secure=a.ssl||!1,this.restore=a.restore||!1,this.proxy=a.proxy,this.keepAlive=a.keepAlive,this.keepAliveSettings=a.keepAliveSettings,this.autoNetworkDetection=a.autoNetworkDetection||!1,this.dedupeOnSubscribe=a.dedupeOnSubscribe||!1,this.maximumCacheSize=a.maximumCacheSize||100,this.customEncrypt=a.customEncrypt,this.customDecrypt=a.customDecrypt,this.fileUploadPublishRetryLimit=null!==(n=a.fileUploadPublishRetryLimit)&&void 0!==n?n:5,this.useRandomIVs=null!==(r=a.useRandomIVs)&&void 0!==r&&r,"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0),this.logVerbosity=a.logVerbosity||!1,this.suppressLeaveEvents=a.suppressLeaveEvents||!1,this.announceFailedHeartbeats=a.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=a.announceSuccessfulHeartbeats||!1,this.useInstanceId=a.useInstanceId||!1,this.useRequestId=a.useRequestId||!1,this.requestMessageCountThreshold=a.requestMessageCountThreshold,this.setTransactionTimeout(a.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(a.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(a.useSendBeacon||!0),a.presenceTimeout?this.setPresenceTimeout(a.presenceTimeout):this._presenceTimeout=300,null!=a.heartbeatInterval&&this.setHeartbeatInterval(a.heartbeatInterval),this.setUUID(this._decideUUID(a.uuid))}return(0,a.default)(e,[{key:"getAuthKey",value:function(){return this.authKey}},{key:"setAuthKey",value:function(e){return this.authKey=e,this}},{key:"setCipherKey",value:function(e){return this.cipherKey=e,this}},{key:"getUUID",value:function(){return this.UUID}},{key:"setUUID",value:function(e){return this._db&&this._db.set&&this._db.set("".concat(this.subscribeKey,"uuid"),e),this.UUID=e,this}},{key:"getFilterExpression",value:function(){return this.filterExpression}},{key:"setFilterExpression",value:function(e){return this.filterExpression=e,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(e){return e>=20?this._presenceTimeout=e:(this._presenceTimeout=20,console.log("WARNING: Presence timeout is less than the minimum. Using minimum value: ",this._presenceTimeout)),this.setHeartbeatInterval(this._presenceTimeout/2-1),this}},{key:"setProxy",value:function(e){this.proxy=e}},{key:"getHeartbeatInterval",value:function(){return this._heartbeatInterval}},{key:"setHeartbeatInterval",value:function(e){return this._heartbeatInterval=e,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(e){return this._subscribeRequestTimeout=e,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(e){return this._transactionalRequestTimeout=e,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(e){return this._useSendBeacon=e,this}},{key:"getVersion",value:function(){return"4.29.11"}},{key:"_addPnsdkSuffix",value:function(e,t){this._PNSDKSuffix[e]=t}},{key:"_getPnsdkSuffix",value:function(e){var t=this;return Object.keys(this._PNSDKSuffix).reduce((function(n,r){return n+e+t._PNSDKSuffix[r]}),"")}},{key:"_decideUUID",value:function(e){return e||(this._db&&this._db.get&&this._db.get("".concat(this.subscribeKey,"uuid"))?this._db.get("".concat(this.subscribeKey,"uuid")):"pn-".concat(s.default.createUUID()))}}]),e}());t.default=u,e.exports=t.default},function(e,t,n){var r=n(77),i=n(78),a=n(79),o=n(81);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"},e.exports=t.default},function(e,t,n){e.exports=n(72)},function(e,t){function n(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,u,"next",e)}function u(e){n(o,i,a,s,u,"throw",e)}s(void 0)}))}}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(15);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){var r=n(7),i=n(19);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(31)),a={createUUID:function(){return i.default.uuid?i.default.uuid():(0,i.default)()}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.createValidationError=v,t.generatePNSDK=b,t.signRequest=E,t.default=function(e,t){var n=e.networking,r=e.config,i=e.telemetryManager,a=c.default.createUUID(),o=null,s=null,u={};t.getOperation()===f.default.PNTimeOperation||t.getOperation()===f.default.PNChannelGroupsOperation?o=arguments.length<=2?void 0:arguments[2]:(u=arguments.length<=2?void 0:arguments[2],o=arguments.length<=3?void 0:arguments[3]),"undefined"==typeof Promise||o||(s=d.default.createPromise());var l=t.validateParams(e,u);if(l)return o?o(v(l)):s?(s.reject(new g("Validation failed, check status for details",v(l))),s.promise):void 0;var p,S=t.prepareParams(e,u),w=y(t,e,u),A={url:w,operation:t.getOperation(),timeout:t.getRequestTimeout(e),headers:t.getRequestHeaders?t.getRequestHeaders():{},ignoreBody:"function"==typeof t.ignoreBody&&t.ignoreBody(e),forceBuffered:"function"==typeof t.forceBuffered?t.forceBuffered(e,u):null};S.uuid=r.UUID,S.pnsdk=b(r);var M=i.operationsLatencyForRequest();if(Object.keys(M).length&&(S=m(m({},S),M)),r.useInstanceId&&(S.instanceid=r.instanceId),r.useRequestId&&(S.requestid=a),t.isAuthSupported()){var L=_(t,e,u),C=L||r.getAuthKey();C&&(S.auth=C)}r.secretKey&&E(e,w,S,u,t);var D=function(n,r){var l;if(n.error)o?o(n):s&&s.reject(new g("PubNub call failed, check status for details",n));else{i.stopLatencyMeasure(t.getOperation(),a);var c=t.handleResponse(e,r,u);"function"!=typeof(null===(l=c)||void 0===l?void 0:l.then)&&(c=Promise.resolve(c)),c.then((function(e){o?o(n,e):s&&s.fulfill(e)})).catch((function(e){if(o){var n=e;t.getOperation()===f.default.PNSubscribeOperation&&(n={statusCode:400,error:!0,operation:t.getOperation(),errorData:e,category:h.default.PNUnknownCategory}),o(n,null)}else s&&s.reject(new g("PubNub call failed, check status for details",e))}))}};if(i.startLatencyMeasure(t.getOperation(),a),"POST"===T(e,t,u)){var k=t.postPayload(e,u);p=n.POST(S,k,A,D)}else if("PATCH"===T(e,t,u)){var P=t.patchPayload(e,u);p=n.PATCH(S,P,A,D)}else p="DELETE"===T(e,t,u)?n.DELETE(S,A,D):"GETFILE"===T(e,t,u)?n.GETFILE(S,A,D):n.GET(S,A,D);return t.getOperation()===f.default.PNSubscribeOperation?p:s?s.promise:void 0},t.PubNubError=void 0;var i=r(n(4)),a=r(n(5)),o=r(n(14)),s=r(n(16)),u=r(n(13)),l=r(n(45)),c=r(n(17)),d=(n(2),r(n(3))),f=(r(n(8)),r(n(1))),h=r(n(10));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){(0,o.default)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}(n);function n(e,r){var i;return(0,a.default)(this,n),(i=t.call(this,e)).name=i.constructor.name,i.status=r,i.message=e,i}return n}((0,l.default)(Error));function v(e){return(t={message:e}).type="validationError",t.error=!0,t;var t}function y(e,t,n){return e.usePost&&e.usePost(t,n)?e.postURL(t,n):e.usePatch&&e.usePatch(t,n)?e.patchURL(t,n):e.useGetFile&&e.useGetFile(t,n)?e.getFileURL(t,n):e.getURL(t,n)}function _(e,t,n){var r;return e.getAuthToken&&(r=e.getAuthToken(t,n)),r}function b(e){if(e.sdkName)return e.sdkName;var t="PubNub-JS-".concat(e.sdkFamily);e.partnerId&&(t+="-".concat(e.partnerId)),t+="/".concat(e.getVersion());var n=e._getPnsdkSuffix(" ");return n.length>0&&(t+=n),t}function T(e,t,n){return t.usePost&&t.usePost(e,n)?"POST":t.usePatch&&t.usePatch(e,n)?"PATCH":t.useDelete&&t.useDelete(e,n)?"DELETE":t.useGetFile&&t.useGetFile(e,n)?"GETFILE":"GET"}function E(e,t,n,r,i){var a=e.config,o=e.crypto,s=T(e,i,r);n.timestamp=Math.floor((new Date).getTime()/1e3),"PNPublishOperation"===i.getOperation()&&i.usePost&&i.usePost(e,r)&&(s="GET"),"GETFILE"===s&&(s="GET");var u="".concat(s,"\n").concat(a.publishKey,"\n").concat(t,"\n").concat(d.default.signPamFromParams(n),"\n");if("POST"===s){var l=i.postPayload(e,r);u+="string"==typeof l?l:JSON.stringify(l)}else if("PATCH"===s){var c=i.patchPayload(e,r);u+="string"==typeof c?c:JSON.stringify(c)}var f="v2.".concat(o.HMACSHA256(u));f=(f=(f=f.replace(/\+/g,"-")).replace(/\//g,"_")).replace(/=+$/,""),n.signature=f}t.PubNubError=g},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";(function(r){var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(5)),o=i(n(6)),s=i(n(4)),u=(i(n(8)),i(n(22)));function l(e){var t,n=[];for(t=0;t<e.length;t+=1)n[t/4|0]|=e[t]<<24-8*t;return u.default.lib.WordArray.create(n,e.length)}var c=function(){function e(t){var n=t.config;(0,a.default)(this,e),(0,s.default)(this,"_config",void 0),(0,s.default)(this,"_iv",void 0),(0,s.default)(this,"_allowedKeyEncodings",void 0),(0,s.default)(this,"_allowedKeyLengths",void 0),(0,s.default)(this,"_allowedModes",void 0),(0,s.default)(this,"_defaultOptions",void 0),this._config=n,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}return(0,o.default)(e,[{key:"HMACSHA256",value:function(e){return u.default.HmacSHA256(e,this._config.secretKey).toString(u.default.enc.Base64)}},{key:"SHA256",value:function(e){return u.default.SHA256(e).toString(u.default.enc.Hex)}},{key:"_parseOptions",value:function(e){var t=e||{};return t.hasOwnProperty("encryptKey")||(t.encryptKey=this._defaultOptions.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=this._defaultOptions.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=this._defaultOptions.keyLength),t.hasOwnProperty("mode")||(t.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(t.keyEncoding.toLowerCase())&&(t.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(t.keyLength,10))&&(t.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(t.mode.toLowerCase())&&(t.mode=this._defaultOptions.mode),t}},{key:"_decodeKey",value:function(e,t){return"base64"===t.keyEncoding?u.default.enc.Base64.parse(e):"hex"===t.keyEncoding?u.default.enc.Hex.parse(e):e}},{key:"_getPaddedKey",value:function(e,t){return e=this._decodeKey(e,t),t.encryptKey?u.default.enc.Utf8.parse(this.SHA256(e).slice(0,32)):e}},{key:"_getMode",value:function(e){return"ecb"===e.mode?u.default.mode.ECB:u.default.mode.CBC}},{key:"_getIV",value:function(e){return"cbc"===e.mode?u.default.enc.Utf8.parse(this._iv):null}},{key:"_getRandomIV",value:function(){return u.default.lib.WordArray.random(16)}},{key:"encrypt",value:function(e,t,n){return this._config.customEncrypt?this._config.customEncrypt(e):this.pnEncrypt(e,t,n)}},{key:"decrypt",value:function(e,t,n){return this._config.customDecrypt?this._config.customDecrypt(e):this.pnDecrypt(e,t,n)}},{key:"pnEncrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var r=this._getMode(n),i=this._getPaddedKey(t||this._config.cipherKey,n);if(this._config.useRandomIVs){var a=this._getRandomIV(),o=u.default.AES.encrypt(e,i,{iv:a,mode:r}).ciphertext;return a.clone().concat(o.clone()).toString(u.default.enc.Base64)}var s=this._getIV(n);return u.default.AES.encrypt(e,i,{iv:s,mode:r}).ciphertext.toString(u.default.enc.Base64)||e}},{key:"pnDecrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var i=this._getMode(n),a=this._getPaddedKey(t||this._config.cipherKey,n);if(this._config.useRandomIVs){var o=r.from(e,"base64"),s=l(o.slice(0,16)),c=l(o.slice(16));try{var d=u.default.AES.decrypt({ciphertext:c},a,{iv:s,mode:i}).toString(u.default.enc.Utf8);return JSON.parse(d)}catch(e){return null}}else{var f=this._getIV(n);try{var h=u.default.enc.Base64.parse(e),p=u.default.AES.decrypt({ciphertext:h},a,{iv:f,mode:i}).toString(u.default.enc.Utf8);return JSON.parse(p)}catch(e){return null}}}}]),e}();t.default=c,e.exports=t.default}).call(this,n(21).Buffer)},function(e,t,n){"use strict";(function(e){var r=n(33),i=n(34),a=n(35);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=s(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,n);case"utf8":case"utf-8":return M(this,t,n);case"ascii":return L(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var d=!0,f=0;f<u;f++)if(l(e,a+f)!==l(t,f)){d=!1;break}if(d)return a}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function b(e,t,n,r){return H(B(t,e.length-n),e,n,r)}function T(e,t,n,r){return H(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return T(e,t,n,r)}function S(e,t,n,r){return H(Y(t),e,n,r)}function w(e,t,n,r){return H(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function M(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,l=e[i],c=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function L(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function D(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=U(e[a]);return i}function k(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function x(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,a){return a||x(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,a){return a||x(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=e.slice(t,n),d=0;d<s;++d)if(l[d]!==c[d]){a=l[d],o=c[d];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=u.isBuffer(e)?e:B(new u(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function Y(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(32))},function(e,t,n){"use strict";var r,i,a,o,s,u=u||function(e,t){var n={},r=n.lib={},i=function(){},a=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},u=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},l=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,a=this.blockSize,s=i/(4*a);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,i=e.min(4*t,i),t){for(var u=0;u<t;u+=a)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=i}return new o.init(u,i)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new f.HMAC.init(e,n).finalize(t)}}});var f=n.algo={};return n}(Math);!function(e){for(var t=u,n=(i=t.lib).WordArray,r=i.Hasher,i=t.algo,a=[],o=[],s=function(e){return 4294967296*(e-(0|e))|0},l=2,c=0;64>c;){var d;e:{d=l;for(var f=e.sqrt(d),h=2;h<=f;h++)if(!(d%h)){d=!1;break e}d=!0}d&&(8>c&&(a[c]=s(e.pow(l,.5))),o[c]=s(e.pow(l,1/3)),c++),l++}var p=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],d=n[7],f=0;64>f;f++){if(16>f)p[f]=0|e[t+f];else{var h=p[f-15],m=p[f-2];p[f]=((h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3)+p[f-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+p[f-16]}h=d+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&l^~u&c)+o[f]+p[f],m=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&a^i&a),d=c,c=l,l=u,u=s+h|0,s=a,a=i,i=r,r=h+m|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0,n[5]=n[5]+l|0,n[6]=n[6]+c|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=r._createHelper(i),t.HmacSHA256=r._createHmacHelper(i)}(Math),i=(r=u).enc.Utf8,r.algo.HMAC=r.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),o=this._iKey=t.clone(),s=a.words,u=o.words,l=0;l<n;l++)s[l]^=1549556828,u[l]^=909522486;a.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),o=(a=u).lib.WordArray,a.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<n;o++)e.push(r.charAt(a>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;(r=n.charAt(64))&&-1!=(r=e.indexOf(r))&&(t=r);for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=n.indexOf(e.charAt(a-1))<<a%4*2,u=n.indexOf(e.charAt(a))>>>6-a%4*2;r[i>>>2]|=(s|u)<<24-i%4*8,i++}return o.create(r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,n,r,i,a,o){return((e=e+(t&n|~t&r)+i+o)<<a|e>>>32-a)+t}function n(e,t,n,r,i,a,o){return((e=e+(t&r|n&~r)+i+o)<<a|e>>>32-a)+t}function r(e,t,n,r,i,a,o){return((e=e+(t^n^r)+i+o)<<a|e>>>32-a)+t}function i(e,t,n,r,i,a,o){return((e=e+(n^(t|~r))+i+o)<<a|e>>>32-a)+t}for(var a=u,o=(l=a.lib).WordArray,s=l.Hasher,l=a.algo,c=[],d=0;64>d;d++)c[d]=4294967296*e.abs(e.sin(d+1))|0;l=l.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,a){for(var o=0;16>o;o++){var s=e[u=a+o];e[u]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}o=this._hash.words;var u=e[a+0],l=(s=e[a+1],e[a+2]),d=e[a+3],f=e[a+4],h=e[a+5],p=e[a+6],m=e[a+7],g=e[a+8],v=e[a+9],y=e[a+10],_=e[a+11],b=e[a+12],T=e[a+13],E=e[a+14],S=e[a+15],w=t(w=o[0],L=o[1],M=o[2],A=o[3],u,7,c[0]),A=t(A,w,L,M,s,12,c[1]),M=t(M,A,w,L,l,17,c[2]),L=t(L,M,A,w,d,22,c[3]);w=t(w,L,M,A,f,7,c[4]),A=t(A,w,L,M,h,12,c[5]),M=t(M,A,w,L,p,17,c[6]),L=t(L,M,A,w,m,22,c[7]),w=t(w,L,M,A,g,7,c[8]),A=t(A,w,L,M,v,12,c[9]),M=t(M,A,w,L,y,17,c[10]),L=t(L,M,A,w,_,22,c[11]),w=t(w,L,M,A,b,7,c[12]),A=t(A,w,L,M,T,12,c[13]),M=t(M,A,w,L,E,17,c[14]),w=n(w,L=t(L,M,A,w,S,22,c[15]),M,A,s,5,c[16]),A=n(A,w,L,M,p,9,c[17]),M=n(M,A,w,L,_,14,c[18]),L=n(L,M,A,w,u,20,c[19]),w=n(w,L,M,A,h,5,c[20]),A=n(A,w,L,M,y,9,c[21]),M=n(M,A,w,L,S,14,c[22]),L=n(L,M,A,w,f,20,c[23]),w=n(w,L,M,A,v,5,c[24]),A=n(A,w,L,M,E,9,c[25]),M=n(M,A,w,L,d,14,c[26]),L=n(L,M,A,w,g,20,c[27]),w=n(w,L,M,A,T,5,c[28]),A=n(A,w,L,M,l,9,c[29]),M=n(M,A,w,L,m,14,c[30]),w=r(w,L=n(L,M,A,w,b,20,c[31]),M,A,h,4,c[32]),A=r(A,w,L,M,g,11,c[33]),M=r(M,A,w,L,_,16,c[34]),L=r(L,M,A,w,E,23,c[35]),w=r(w,L,M,A,s,4,c[36]),A=r(A,w,L,M,f,11,c[37]),M=r(M,A,w,L,m,16,c[38]),L=r(L,M,A,w,y,23,c[39]),w=r(w,L,M,A,T,4,c[40]),A=r(A,w,L,M,u,11,c[41]),M=r(M,A,w,L,d,16,c[42]),L=r(L,M,A,w,p,23,c[43]),w=r(w,L,M,A,v,4,c[44]),A=r(A,w,L,M,b,11,c[45]),M=r(M,A,w,L,S,16,c[46]),w=i(w,L=r(L,M,A,w,l,23,c[47]),M,A,u,6,c[48]),A=i(A,w,L,M,m,10,c[49]),M=i(M,A,w,L,E,15,c[50]),L=i(L,M,A,w,h,21,c[51]),w=i(w,L,M,A,b,6,c[52]),A=i(A,w,L,M,d,10,c[53]),M=i(M,A,w,L,y,15,c[54]),L=i(L,M,A,w,s,21,c[55]),w=i(w,L,M,A,g,6,c[56]),A=i(A,w,L,M,S,10,c[57]),M=i(M,A,w,L,p,15,c[58]),L=i(L,M,A,w,T,21,c[59]),w=i(w,L,M,A,f,6,c[60]),A=i(A,w,L,M,_,10,c[61]),M=i(M,A,w,L,l,15,c[62]),L=i(L,M,A,w,v,21,c[63]),o[0]=o[0]+w|0,o[1]=o[1]+L|0,o[2]=o[2]+M|0,o[3]=o[3]+A|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var a=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=s._createHelper(l),a.HmacMD5=s._createHmacHelper(l)}(Math),function(){var e,t=u,n=(e=t.lib).Base,r=e.WordArray,i=(e=t.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(s=this.cfg).hasher.create(),i=r.create(),a=i.words,o=s.keySize,s=s.iterations;a.length<o;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var l=1;l<s;l++)u=n.finalize(u),n.reset();i.concat(u)}return i.sigBytes=4*o,i}});t.EvpKDF=function(e,t,n){return i.create(n).compute(e,t)}}(),u.lib.Cipher||function(e){var t=(p=u).lib,n=t.Base,r=t.WordArray,i=t.BufferedBlockAlgorithm,a=p.enc.Base64,o=p.algo.EvpKDF,s=t.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?m:h).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?m:h).decrypt(e,t,n,r)}}}});t.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=p.mode={},c=function(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]},d=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();d.Encryptor=d.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;c.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),d.Decryptor=d.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),c.call(this,e,t,r),this._prevBlock=i}}),l=l.CBC=d,d=(p.pad={}).Pkcs7={pad:function(e,t){for(var n,i=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,a=[],o=0;o<n;o+=4)a.push(i);n=r.create(a,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=s.extend({cfg:s.cfg.extend({mode:l,padding:d}),reset:function(){s.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var f=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(l=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){var t=(e=a.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=r.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return f.create({ciphertext:e,salt:n})}},t.SerializableCipher=n.extend({cfg:n.extend({format:l}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,f.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),p=(p.kdf={}).OpenSSL={execute:function(e,t,n,i){return i||(i=r.random(8)),e=o.create({keySize:t+n}).compute(e,i),n=r.create(e.words.slice(t),4*n),e.sigBytes=4*t,f.create({key:e,iv:n,salt:i})}},m=t.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:p}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=h.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,h.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=u,t=e.lib.BlockCipher,n=e.algo,r=[],i=[],a=[],o=[],s=[],l=[],c=[],d=[],f=[],h=[],p=[],m=0;256>m;m++)p[m]=128>m?m<<1:m<<1^283;var g=0,v=0;for(m=0;256>m;m++){var y=(y=v^v<<1^v<<2^v<<3^v<<4)>>>8^255&y^99;r[g]=y,i[y]=g;var _=p[g],b=p[_],T=p[b],E=257*p[y]^16843008*y;a[g]=E<<24|E>>>8,o[g]=E<<16|E>>>16,s[g]=E<<8|E>>>24,l[g]=E,E=16843009*T^65537*b^257*_^16843008*g,c[y]=E<<24|E>>>8,d[y]=E<<16|E>>>16,f[y]=E<<8|E>>>24,h[y]=E,g?(g=_^p[p[p[T^_]]],v^=p[p[v]]):g=v=1}var S=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],a=0;a<n;a++)if(a<t)i[a]=e[a];else{var o=i[a-1];a%t?6<t&&4==a%t&&(o=r[o>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o]):(o=r[(o=o<<8|o>>>24)>>>24]<<24|r[o>>>16&255]<<16|r[o>>>8&255]<<8|r[255&o],o^=S[a/t|0]<<24),i[a]=i[a-t]^o}for(e=this._invKeySchedule=[],t=0;t<n;t++)a=n-t,o=t%4?i[a]:i[a-4],e[t]=4>t||4>=a?o:c[r[o>>>24]]^d[r[o>>>16&255]]^f[r[o>>>8&255]]^h[r[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,o,s,l,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,d,f,h,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,a,o,s){for(var u=this._nRounds,l=e[t]^n[0],c=e[t+1]^n[1],d=e[t+2]^n[2],f=e[t+3]^n[3],h=4,p=1;p<u;p++){var m=r[l>>>24]^i[c>>>16&255]^a[d>>>8&255]^o[255&f]^n[h++],g=r[c>>>24]^i[d>>>16&255]^a[f>>>8&255]^o[255&l]^n[h++],v=r[d>>>24]^i[f>>>16&255]^a[l>>>8&255]^o[255&c]^n[h++];f=r[f>>>24]^i[l>>>16&255]^a[c>>>8&255]^o[255&d]^n[h++],l=m,c=g,d=v}m=(s[l>>>24]<<24|s[c>>>16&255]<<16|s[d>>>8&255]<<8|s[255&f])^n[h++],g=(s[c>>>24]<<24|s[d>>>16&255]<<16|s[f>>>8&255]<<8|s[255&l])^n[h++],v=(s[d>>>24]<<24|s[f>>>16&255]<<16|s[l>>>8&255]<<8|s[255&c])^n[h++],f=(s[f>>>24]<<24|s[l>>>16&255]<<16|s[c>>>8&255]<<8|s[255&d])^n[h++],e[t]=m,e[t+1]=g,e[t+2]=v,e[t+3]=f},keySize:8}),e.AES=t._createHelper(n)}(),u.mode.ECB=((s=u.lib.BlockCipherMode.extend()).Encryptor=s.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),s.Decryptor=s.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),s),e.exports=u},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5)),a=r(n(6)),o=r(n(4)),s=(n(2),r(n(10))),u=function(){function e(){(0,i.default)(this,e),(0,o.default)(this,"_listeners",void 0),this._listeners=[]}return(0,a.default)(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"removeListener",value:function(e){var t=[];this._listeners.forEach((function(n){n!==e&&t.push(n)})),this._listeners=t}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"announcePresence",value:function(e){this._listeners.forEach((function(t){t.presence&&t.presence(e)}))}},{key:"announceStatus",value:function(e){this._listeners.forEach((function(t){t.status&&t.status(e)}))}},{key:"announceMessage",value:function(e){this._listeners.forEach((function(t){t.message&&t.message(e)}))}},{key:"announceSignal",value:function(e){this._listeners.forEach((function(t){t.signal&&t.signal(e)}))}},{key:"announceMessageAction",value:function(e){this._listeners.forEach((function(t){t.messageAction&&t.messageAction(e)}))}},{key:"announceFile",value:function(e){this._listeners.forEach((function(t){t.file&&t.file(e)}))}},{key:"announceObjects",value:function(e){this._listeners.forEach((function(t){t.objects&&t.objects(e)}))}},{key:"announceUser",value:function(e){this._listeners.forEach((function(t){t.user&&t.user(e)}))}},{key:"announceSpace",value:function(e){this._listeners.forEach((function(t){t.space&&t.space(e)}))}},{key:"announceMembership",value:function(e){this._listeners.forEach((function(t){t.membership&&t.membership(e)}))}},{key:"announceNetworkUp",value:function(){var e={};e.category=s.default.PNNetworkUpCategory,this.announceStatus(e)}},{key:"announceNetworkDown",value:function(){var e={};e.category=s.default.PNNetworkDownCategory,this.announceStatus(e)}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNTimeOperation},t.getURL=function(){return"/time/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.isAuthSupported=function(){return!1},t.handleResponse=function(e,t){return{timetoken:t[0]}},t.validateParams=function(){},n(2);var i=r(n(1))},function(e,t,n){},function(e,t,n){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5)),a=r(n(14)),o=r(n(16)),s=r(n(13)),u=r(n(7)),l=r(n(28)),c=r(n(29)),d=r(n(121)),f=r(n(22)),h=r(n(122)),p=r(n(123)),m=n(124),g=(n(2),r(n(131))),v=r(n(132));function y(e){if(!navigator||!navigator.sendBeacon)return!1;navigator.sendBeacon(e)}function _(e){for(var t=f.default.enc.Base64.parse(e).words,n=new ArrayBuffer(4*t.length),r=new Uint8Array(n),i=0,a=0,o=0;o<t.length;o+=1){var s=t[o];r[a=4*o]=(4278190080&s)>>24,r[a+1]=(16711680&s)>>16,r[a+2]=(65280&s)>>8,r[a+3]=255&s}for(var u=a+3;u>=a;u-=1)0===r[u]&&(i+=1);return i>0?r.buffer.slice(0,r.byteLength-i):r.buffer}var b=function(e){(0,a.default)(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.default)(e);if(t){var i=(0,s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.default)(this,n)}}(n);function n(e){var r;(0,i.default)(this,n);var a=e.listenToBrowserNetworkEvents,o=void 0===a||a;return e.db=h.default,e.sdkFamily="Web",e.networking=new d.default({del:m.del,get:m.get,post:m.post,patch:m.patch,sendBeacon:y,getfile:m.getfile,postfile:m.postfile}),e.cbor=new p.default((function(e){return function e(t){var n=function(e){return e&&"object"===(0,u.default)(e)&&e.constructor===Object};if(!n(t))return t;var r={};return Object.keys(t).forEach((function(i){var a=function(e){return"string"==typeof e||e instanceof String}(i),o=i,s=t[i];Array.isArray(i)||a&&i.indexOf(",")>=0?o=(a?i.split(","):i).reduce((function(e,t){return e+String.fromCharCode(t)}),""):(function(e){return"number"==typeof e&&isFinite(e)}(i)||a&&!isNaN(i))&&(o=String.fromCharCode(a?parseInt(i,10):10)),r[o]=n(s)?e(s):s})),r}(l.default.decode(e))}),_),e.PubNubFile=v.default,e.cryptography=new g.default,r=t.call(this,e),o&&(window.addEventListener("offline",(function(){r.networkDownDetected()})),window.addEventListener("online",(function(){r.networkUpDetected()}))),r}return n}(c.default);t.default=b,e.exports=t.default},function(e,t,n){var r,i;!function(a,o){"use strict";var s=Math.pow(2,-24),u=Math.pow(2,32),l=Math.pow(2,53);void 0===(i="function"==typeof(r={encode:function(e){var t,n=new ArrayBuffer(256),r=new DataView(n),i=0;function a(e){for(var a=n.byteLength,o=i+e;a<o;)a*=2;if(a!==n.byteLength){var s=r;n=new ArrayBuffer(a),r=new DataView(n);for(var u=i+3>>2,l=0;l<u;++l)r.setUint32(4*l,s.getUint32(4*l))}return t=e,r}function o(){i+=t}function s(e){o(a(1).setUint8(i,e))}function c(e){for(var t=a(e.length),n=0;n<e.length;++n)t.setUint8(i+n,e[n]);o()}function d(e,t){t<24?s(e<<5|t):t<256?(s(e<<5|24),s(t)):t<65536?(s(e<<5|25),function(e){o(a(2).setUint16(i,e))}(t)):t<4294967296?(s(e<<5|26),function(e){o(a(4).setUint32(i,e))}(t)):(s(e<<5|27),function(e){var t=e%u,n=(e-t)/u,r=a(8);r.setUint32(i,n),r.setUint32(i+4,t),o()}(t))}if(function e(t){var n;if(!1===t)return s(244);if(!0===t)return s(245);if(null===t)return s(246);if(void 0===t)return s(247);switch(typeof t){case"number":if(Math.floor(t)===t){if(0<=t&&t<=l)return d(0,t);if(-l<=t&&t<0)return d(1,-(t+1))}return s(251),function(e){o(a(8).setFloat64(i,e))}(t);case"string":var r=[];for(n=0;n<t.length;++n){var u=t.charCodeAt(n);u<128?r.push(u):u<2048?(r.push(192|u>>6),r.push(128|63&u)):u<55296?(r.push(224|u>>12),r.push(128|u>>6&63),r.push(128|63&u)):(u=(1023&u)<<10,u|=1023&t.charCodeAt(++n),u+=65536,r.push(240|u>>18),r.push(128|u>>12&63),r.push(128|u>>6&63),r.push(128|63&u))}return d(3,r.length),c(r);default:var f;if(Array.isArray(t))for(d(4,f=t.length),n=0;n<f;++n)e(t[n]);else if(t instanceof Uint8Array)d(2,t.length),c(t);else{var h=Object.keys(t);for(d(5,f=h.length),n=0;n<f;++n){var p=h[n];e(p),e(t[p])}}}}(e),"slice"in n)return n.slice(0,i);for(var f=new ArrayBuffer(i),h=new DataView(f),p=0;p<i;++p)h.setUint8(p,r.getUint8(p));return f},decode:function(e,t,n){var r=new DataView(e),i=0;function a(e,t){return i+=t,e}function o(t){return a(new Uint8Array(e,i,t),t)}function l(){return a(r.getUint8(i),1)}function c(){return a(r.getUint16(i),2)}function d(){return a(r.getUint32(i),4)}function f(){return 255===r.getUint8(i)&&(i+=1,!0)}function h(e){if(e<24)return e;if(24===e)return l();if(25===e)return c();if(26===e)return d();if(27===e)return d()*u+d();if(31===e)return-1;throw"Invalid length encoding"}function p(e){var t=l();if(255===t)return-1;var n=h(31&t);if(n<0||t>>5!==e)throw"Invalid indefinite length element";return n}function m(e,t){for(var n=0;n<t;++n){var r=l();128&r&&(r<224?(r=(31&r)<<6|63&l(),t-=1):r<240?(r=(15&r)<<12|(63&l())<<6|63&l(),t-=2):(r=(15&r)<<18|(63&l())<<12|(63&l())<<6|63&l(),t-=3)),r<65536?e.push(r):(r-=65536,e.push(55296|r>>10),e.push(56320|1023&r))}}"function"!=typeof t&&(t=function(e){return e}),"function"!=typeof n&&(n=function(){});var g=function e(){var u,d,g=l(),v=g>>5,y=31&g;if(7===v)switch(y){case 25:return function(){var e=new ArrayBuffer(4),t=new DataView(e),n=c(),r=32768&n,i=31744&n,a=1023&n;if(31744===i)i=261120;else if(0!==i)i+=114688;else if(0!==a)return a*s;return t.setUint32(0,r<<16|i<<13|a<<13),t.getFloat32(0)}();case 26:return a(r.getFloat32(i),4);case 27:return a(r.getFloat64(i),8)}if((d=h(y))<0&&(v<2||6<v))throw"Invalid length";switch(v){case 0:return d;case 1:return-1-d;case 2:if(d<0){for(var _=[],b=0;(d=p(v))>=0;)b+=d,_.push(o(d));var T=new Uint8Array(b),E=0;for(u=0;u<_.length;++u)T.set(_[u],E),E+=_[u].length;return T}return o(d);case 3:var S=[];if(d<0)for(;(d=p(v))>=0;)m(S,d);else m(S,d);return String.fromCharCode.apply(null,S);case 4:var w;if(d<0)for(w=[];!f();)w.push(e());else for(w=new Array(d),u=0;u<d;++u)w[u]=e();return w;case 5:var A={};for(u=0;u<d||d<0&&!f();++u)A[e()]=e();return A;case 6:return t(e(),d);case 7:switch(d){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:return n(d)}}}();if(i!==e.byteLength)throw"Remaining bytes";return g}})?r.call(t,n,t,e):r)||(e.exports=i)}()},function(e,t,n){"use strict";var r=n(30),i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(5)),o=i(n(6)),s=i(n(4)),u=i(n(8)),l=i(n(20)),c=i(n(36)),d=i(n(40)),f=i(n(41)),h=i(n(23)),p=i(n(44)),m=i(n(18)),g=n(3),v=r(n(49)),y=r(n(50)),_=r(n(51)),b=r(n(52)),T=r(n(53)),E=r(n(54)),S=r(n(55)),w=r(n(56)),A=r(n(57)),M=r(n(58)),L=r(n(59)),C=r(n(60)),D=r(n(61)),k=r(n(62)),P=r(n(63)),I=r(n(64)),O=r(n(65)),R=r(n(66)),x=(n(25),r(n(67)),i(n(68))),N=i(n(69)),j=i(n(70)),F=i(n(71)),U=i(n(73)),B=i(n(74)),Y=i(n(75)),H=i(n(76)),V=i(n(82)),G=i(n(83)),K=i(n(84)),W=i(n(85)),q=i(n(86)),z=i(n(87)),X=i(n(88)),Q=i(n(89)),$=i(n(90)),J=i(n(91)),Z=i(n(92)),ee=r(n(93)),te=r(n(94)),ne=r(n(95)),re=r(n(96)),ie=r(n(97)),ae=r(n(98)),oe=r(n(99)),se=r(n(100)),ue=r(n(101)),le=r(n(102)),ce=r(n(103)),de=r(n(104)),fe=r(n(105)),he=r(n(106)),pe=r(n(107)),me=r(n(108)),ge=r(n(109)),ve=r(n(110)),ye=r(n(111)),_e=r(n(112)),be=r(n(113)),Te=r(n(114)),Ee=r(n(115)),Se=r(n(116)),we=r(n(117)),Ae=r(n(118)),Me=r(n(119)),Le=r(n(24)),Ce=r(n(120)),De=i(n(1)),ke=i(n(10)),Pe=(n(2),i(n(17)));function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re=function(){function e(t){var n=this;(0,a.default)(this,e),(0,s.default)(this,"_config",void 0),(0,s.default)(this,"_telemetryManager",void 0),(0,s.default)(this,"_listenerManager",void 0),(0,s.default)(this,"_tokenManager",void 0),(0,s.default)(this,"time",void 0),(0,s.default)(this,"publish",void 0),(0,s.default)(this,"fire",void 0),(0,s.default)(this,"history",void 0),(0,s.default)(this,"deleteMessages",void 0),(0,s.default)(this,"messageCounts",void 0),(0,s.default)(this,"fetchMessages",void 0),(0,s.default)(this,"channelGroups",void 0),(0,s.default)(this,"push",void 0),(0,s.default)(this,"hereNow",void 0),(0,s.default)(this,"whereNow",void 0),(0,s.default)(this,"getState",void 0),(0,s.default)(this,"setState",void 0),(0,s.default)(this,"grant",void 0),(0,s.default)(this,"grantToken",void 0),(0,s.default)(this,"audit",void 0),(0,s.default)(this,"subscribe",void 0),(0,s.default)(this,"signal",void 0),(0,s.default)(this,"presence",void 0),(0,s.default)(this,"unsubscribe",void 0),(0,s.default)(this,"unsubscribeAll",void 0),(0,s.default)(this,"addMessageAction",void 0),(0,s.default)(this,"removeMessageAction",void 0),(0,s.default)(this,"getMessageActions",void 0),(0,s.default)(this,"File",void 0),(0,s.default)(this,"encryptFile",void 0),(0,s.default)(this,"decryptFile",void 0),(0,s.default)(this,"listFiles",void 0),(0,s.default)(this,"sendFile",void 0),(0,s.default)(this,"downloadFile",void 0),(0,s.default)(this,"getFileUrl",void 0),(0,s.default)(this,"deleteFile",void 0),(0,s.default)(this,"publishFile",void 0),(0,s.default)(this,"objects",void 0),(0,s.default)(this,"createUser",void 0),(0,s.default)(this,"updateUser",void 0),(0,s.default)(this,"deleteUser",void 0),(0,s.default)(this,"getUser",void 0),(0,s.default)(this,"getUsers",void 0),(0,s.default)(this,"createSpace",void 0),(0,s.default)(this,"updateSpace",void 0),(0,s.default)(this,"deleteSpace",void 0),(0,s.default)(this,"getSpaces",void 0),(0,s.default)(this,"getSpace",void 0),(0,s.default)(this,"getMembers",void 0),(0,s.default)(this,"addMembers",void 0),(0,s.default)(this,"updateMembers",void 0),(0,s.default)(this,"removeMembers",void 0),(0,s.default)(this,"getMemberships",void 0),(0,s.default)(this,"joinSpaces",void 0),(0,s.default)(this,"updateMemberships",void 0),(0,s.default)(this,"leaveSpaces",void 0),(0,s.default)(this,"disconnect",void 0),(0,s.default)(this,"reconnect",void 0),(0,s.default)(this,"destroy",void 0),(0,s.default)(this,"stop",void 0),(0,s.default)(this,"getSubscribedChannels",void 0),(0,s.default)(this,"getSubscribedChannelGroups",void 0),(0,s.default)(this,"addListener",void 0),(0,s.default)(this,"removeListener",void 0),(0,s.default)(this,"removeAllListeners",void 0),(0,s.default)(this,"parseToken",void 0),(0,s.default)(this,"setToken",void 0),(0,s.default)(this,"setTokens",void 0),(0,s.default)(this,"getToken",void 0),(0,s.default)(this,"getTokens",void 0),(0,s.default)(this,"clearTokens",void 0),(0,s.default)(this,"getAuthKey",void 0),(0,s.default)(this,"setAuthKey",void 0),(0,s.default)(this,"setCipherKey",void 0),(0,s.default)(this,"setUUID",void 0),(0,s.default)(this,"getUUID",void 0),(0,s.default)(this,"getFilterExpression",void 0),(0,s.default)(this,"setFilterExpression",void 0),(0,s.default)(this,"setHeartbeatInterval",void 0),(0,s.default)(this,"setProxy",void 0),(0,s.default)(this,"encrypt",void 0),(0,s.default)(this,"decrypt",void 0);var r=t.db,i=t.networking,o=t.cbor,f=this._config=new u.default({setup:t,db:r}),De=new l.default({config:f}),ke=t.cryptography;i.init(f);var Pe=this._tokenManager=new p.default(f,o),Ie=this._telemetryManager=new d.default({maximumSamplesCount:6e4}),Re={config:f,networking:i,crypto:De,cryptography:ke,tokenManager:Pe,telemetryManager:Ie,PubNubFile:t.PubNubFile};this.File=t.PubNubFile,this.encryptFile=function(e,t){return ke.encryptFile(e,t,n.File)},this.decryptFile=function(e,t){return ke.decryptFile(e,t,n.File)};var xe=m.default.bind(this,Re,Le),Ne=m.default.bind(this,Re,M),je=m.default.bind(this,Re,C),Fe=m.default.bind(this,Re,k),Ue=m.default.bind(this,Re,Ce),Be=this._listenerManager=new h.default,Ye=new c.default({timeEndpoint:xe,leaveEndpoint:Ne,heartbeatEndpoint:je,setStateEndpoint:Fe,subscribeEndpoint:Ue,crypto:Re.crypto,config:Re.config,listenerManager:Be,getFileUrl:function(e){return(0,U.default)(Re,e)}});this.addListener=Be.addListener.bind(Be),this.removeListener=Be.removeListener.bind(Be),this.removeAllListeners=Be.removeAllListeners.bind(Be),this.parseToken=Pe.parseToken.bind(Pe),this.setToken=Pe.setToken.bind(Pe),this.setTokens=Pe.setTokens.bind(Pe),this.getToken=Pe.getToken.bind(Pe),this.getTokens=Pe.getTokens.bind(Pe),this.clearTokens=Pe.clearTokens.bind(Pe),this.channelGroups={listGroups:m.default.bind(this,Re,b),listChannels:m.default.bind(this,Re,T),addChannels:m.default.bind(this,Re,v),removeChannels:m.default.bind(this,Re,y),deleteGroup:m.default.bind(this,Re,_)},this.push={addChannels:m.default.bind(this,Re,E),removeChannels:m.default.bind(this,Re,S),deleteDevice:m.default.bind(this,Re,A),listChannels:m.default.bind(this,Re,w)},this.hereNow=m.default.bind(this,Re,P),this.whereNow=m.default.bind(this,Re,L),this.getState=m.default.bind(this,Re,D),this.setState=Ye.adaptStateChange.bind(Ye),this.grant=m.default.bind(this,Re,_e),this.grantToken=m.default.bind(this,Re,be),this.audit=m.default.bind(this,Re,ye),this.publish=m.default.bind(this,Re,Te),this.fire=function(e,t){return e.replicate=!1,e.storeInHistory=!1,n.publish(e,t)},this.signal=m.default.bind(this,Re,Ee),this.history=m.default.bind(this,Re,Se),this.deleteMessages=m.default.bind(this,Re,we),this.messageCounts=m.default.bind(this,Re,Ae),this.fetchMessages=m.default.bind(this,Re,Me),this.addMessageAction=m.default.bind(this,Re,I),this.removeMessageAction=m.default.bind(this,Re,O),this.getMessageActions=m.default.bind(this,Re,R),this.listFiles=m.default.bind(this,Re,x.default);var He=m.default.bind(this,Re,N.default);this.publishFile=m.default.bind(this,Re,j.default),this.sendFile=(0,F.default)({generateUploadUrl:He,publishFile:this.publishFile,modules:Re}),this.getFileUrl=function(e){return(0,U.default)(Re,e)},this.downloadFile=m.default.bind(this,Re,B.default),this.deleteFile=m.default.bind(this,Re,Y.default),this.objects={getAllUUIDMetadata:m.default.bind(this,Re,H.default),getUUIDMetadata:m.default.bind(this,Re,V.default),setUUIDMetadata:m.default.bind(this,Re,G.default),removeUUIDMetadata:m.default.bind(this,Re,K.default),getAllChannelMetadata:m.default.bind(this,Re,W.default),getChannelMetadata:m.default.bind(this,Re,q.default),setChannelMetadata:m.default.bind(this,Re,z.default),removeChannelMetadata:m.default.bind(this,Re,X.default),getChannelMembers:m.default.bind(this,Re,Q.default),setChannelMembers:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return m.default.call.apply(m.default,[n,Re,$.default,Oe({type:"set"},e)].concat(r))},removeChannelMembers:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return m.default.call.apply(m.default,[n,Re,$.default,Oe({type:"delete"},e)].concat(r))},getMemberships:m.default.bind(this,Re,J.default),setMemberships:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return m.default.call.apply(m.default,[n,Re,Z.default,Oe({type:"set"},e)].concat(r))},removeMemberships:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return m.default.call.apply(m.default,[n,Re,Z.default,Oe({type:"delete"},e)].concat(r))}},this.createUser=(0,g.deprecated)(m.default.bind(this,Re,ee)),this.updateUser=(0,g.deprecated)(m.default.bind(this,Re,te)),this.deleteUser=(0,g.deprecated)(m.default.bind(this,Re,ne)),this.getUser=(0,g.deprecated)(m.default.bind(this,Re,re)),this.getUsers=(0,g.deprecated)(m.default.bind(this,Re,ie)),this.createSpace=(0,g.deprecated)(m.default.bind(this,Re,ae)),this.updateSpace=(0,g.deprecated)(m.default.bind(this,Re,oe)),this.deleteSpace=(0,g.deprecated)(m.default.bind(this,Re,se)),this.getSpaces=(0,g.deprecated)(m.default.bind(this,Re,ue)),this.getSpace=(0,g.deprecated)(m.default.bind(this,Re,le)),this.addMembers=(0,g.deprecated)(m.default.bind(this,Re,de)),this.updateMembers=(0,g.deprecated)(m.default.bind(this,Re,fe)),this.removeMembers=(0,g.deprecated)(m.default.bind(this,Re,he)),this.getMembers=(0,g.deprecated)(m.default.bind(this,Re,ce)),this.getMemberships=(0,g.deprecated)(m.default.bind(this,Re,pe)),this.joinSpaces=(0,g.deprecated)(m.default.bind(this,Re,ge)),this.updateMemberships=(0,g.deprecated)(m.default.bind(this,Re,me)),this.leaveSpaces=(0,g.deprecated)(m.default.bind(this,Re,ve)),this.time=xe,this.subscribe=Ye.adaptSubscribeChange.bind(Ye),this.presence=Ye.adaptPresenceChange.bind(Ye),this.unsubscribe=Ye.adaptUnsubscribeChange.bind(Ye),this.disconnect=Ye.disconnect.bind(Ye),this.reconnect=Ye.reconnect.bind(Ye),this.destroy=function(e){Ye.unsubscribeAll(e),Ye.disconnect()},this.stop=this.destroy,this.unsubscribeAll=Ye.unsubscribeAll.bind(Ye),this.getSubscribedChannels=Ye.getSubscribedChannels.bind(Ye),this.getSubscribedChannelGroups=Ye.getSubscribedChannelGroups.bind(Ye),this.encrypt=De.encrypt.bind(De),this.decrypt=De.decrypt.bind(De),this.getAuthKey=Re.config.getAuthKey.bind(Re.config),this.setAuthKey=Re.config.setAuthKey.bind(Re.config),this.setCipherKey=Re.config.setCipherKey.bind(Re.config),this.getUUID=Re.config.getUUID.bind(Re.config),this.setUUID=Re.config.setUUID.bind(Re.config),this.getFilterExpression=Re.config.getFilterExpression.bind(Re.config),this.setFilterExpression=Re.config.setFilterExpression.bind(Re.config),this.setHeartbeatInterval=Re.config.setHeartbeatInterval.bind(Re.config),i.hasModule("proxy")&&(this.setProxy=function(e){Re.config.setProxy(e),n.reconnect()})}return(0,o.default)(e,[{key:"getVersion",value:function(){return this._config.getVersion()}},{key:"_addPnsdkSuffix",value:function(e,t){this._config._addPnsdkSuffix(e,t)}},{key:"networkDownDetected",value:function(){this._listenerManager.announceNetworkDown(),this._config.restore?this.disconnect():this.destroy(!0)}},{key:"networkUpDetected",value:function(){this._listenerManager.announceNetworkUp(),this.reconnect()}}],[{key:"notificationPayload",value:function(e,t){return new f.default(e,t)}},{key:"generateUUID",value:function(){return Pe.default.createUUID()}}]),e}();t.default=Re,(0,s.default)(Re,"OPERATIONS",De.default),(0,s.default)(Re,"CATEGORIES",ke.default),e.exports=t.default},function(e,t,n){var r=n(7);function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}},function(e,t,n){var r,i;void 0===(i="function"==typeof(r=function(e){var t={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};function n(){var e,t,n="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(n+="-"),n+=(12===e?4:16===e?3&t|8:t).toString(16);return n}function r(e,n){var r=t[n||"all"];return r&&r.test(e)||!1}n.isUUID=r,n.VERSION="0.1.0",e.uuid=n,e.isUUID=r})?r.apply(t,[t]):r)||(e.exports=i)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),o=r[0],s=r[1],u=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),c=0,d=s>0?o-4:o;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(c(e,o,o+16383>s?s:o+16383));return 1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=f,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+d>=1?f/u:f*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*u-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7)),a=r(n(5)),o=r(n(6)),s=r(n(4)),u=(r(n(20)),r(n(8)),r(n(23)),r(n(37))),l=r(n(38)),c=r(n(3)),d=(n(2),r(n(10))),f=function(){function e(t){var n=t.subscribeEndpoint,r=t.leaveEndpoint,i=t.heartbeatEndpoint,o=t.setStateEndpoint,c=t.timeEndpoint,d=t.getFileUrl,f=t.config,h=t.crypto,p=t.listenerManager;(0,a.default)(this,e),(0,s.default)(this,"_crypto",void 0),(0,s.default)(this,"_config",void 0),(0,s.default)(this,"_listenerManager",void 0),(0,s.default)(this,"_reconnectionManager",void 0),(0,s.default)(this,"_leaveEndpoint",void 0),(0,s.default)(this,"_heartbeatEndpoint",void 0),(0,s.default)(this,"_setStateEndpoint",void 0),(0,s.default)(this,"_subscribeEndpoint",void 0),(0,s.default)(this,"_getFileUrl",void 0),(0,s.default)(this,"_channels",void 0),(0,s.default)(this,"_presenceChannels",void 0),(0,s.default)(this,"_heartbeatChannels",void 0),(0,s.default)(this,"_heartbeatChannelGroups",void 0),(0,s.default)(this,"_channelGroups",void 0),(0,s.default)(this,"_presenceChannelGroups",void 0),(0,s.default)(this,"_currentTimetoken",void 0),(0,s.default)(this,"_lastTimetoken",void 0),(0,s.default)(this,"_storedTimetoken",void 0),(0,s.default)(this,"_region",void 0),(0,s.default)(this,"_subscribeCall",void 0),(0,s.default)(this,"_heartbeatTimer",void 0),(0,s.default)(this,"_subscriptionStatusAnnounced",void 0),(0,s.default)(this,"_autoNetworkDetection",void 0),(0,s.default)(this,"_isOnline",void 0),(0,s.default)(this,"_pendingChannelSubscriptions",void 0),(0,s.default)(this,"_pendingChannelGroupSubscriptions",void 0),(0,s.default)(this,"_dedupingManager",void 0),this._listenerManager=p,this._config=f,this._leaveEndpoint=r,this._heartbeatEndpoint=i,this._setStateEndpoint=o,this._subscribeEndpoint=n,this._getFileUrl=d,this._crypto=h,this._channels={},this._presenceChannels={},this._heartbeatChannels={},this._heartbeatChannelGroups={},this._channelGroups={},this._presenceChannelGroups={},this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[],this._currentTimetoken=0,this._lastTimetoken=0,this._storedTimetoken=null,this._subscriptionStatusAnnounced=!1,this._isOnline=!0,this._reconnectionManager=new u.default({timeEndpoint:c}),this._dedupingManager=new l.default({config:f})}return(0,o.default)(e,[{key:"adaptStateChange",value:function(e,t){var n=this,r=e.state,i=e.channels,a=void 0===i?[]:i,o=e.channelGroups,s=void 0===o?[]:o;return a.forEach((function(e){e in n._channels&&(n._channels[e].state=r)})),s.forEach((function(e){e in n._channelGroups&&(n._channelGroups[e].state=r)})),this._setStateEndpoint({state:r,channels:a,channelGroups:s},t)}},{key:"adaptPresenceChange",value:function(e){var t=this,n=e.connected,r=e.channels,i=void 0===r?[]:r,a=e.channelGroups,o=void 0===a?[]:a;n?(i.forEach((function(e){t._heartbeatChannels[e]={state:{}}})),o.forEach((function(e){t._heartbeatChannelGroups[e]={state:{}}}))):(i.forEach((function(e){e in t._heartbeatChannels&&delete t._heartbeatChannels[e]})),o.forEach((function(e){e in t._heartbeatChannelGroups&&delete t._heartbeatChannelGroups[e]})),!1===this._config.suppressLeaveEvents&&this._leaveEndpoint({channels:i,channelGroups:o},(function(e){t._listenerManager.announceStatus(e)}))),this.reconnect()}},{key:"adaptSubscribeChange",value:function(e){var t=this,n=e.timetoken,r=e.channels,i=void 0===r?[]:r,a=e.channelGroups,o=void 0===a?[]:a,s=e.withPresence,u=void 0!==s&&s,l=e.withHeartbeats,c=void 0!==l&&l;this._config.subscribeKey&&""!==this._config.subscribeKey?(n&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=n),"0"!==this._currentTimetoken&&0!==this._currentTimetoken&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),i.forEach((function(e){t._channels[e]={state:{}},u&&(t._presenceChannels[e]={}),(c||t._config.getHeartbeatInterval())&&(t._heartbeatChannels[e]={}),t._pendingChannelSubscriptions.push(e)})),o.forEach((function(e){t._channelGroups[e]={state:{}},u&&(t._presenceChannelGroups[e]={}),(c||t._config.getHeartbeatInterval())&&(t._heartbeatChannelGroups[e]={}),t._pendingChannelGroupSubscriptions.push(e)})),this._subscriptionStatusAnnounced=!1,this.reconnect()):console&&console.log&&console.log("subscribe key missing; aborting subscribe")}},{key:"adaptUnsubscribeChange",value:function(e,t){var n=this,r=e.channels,i=void 0===r?[]:r,a=e.channelGroups,o=void 0===a?[]:a,s=[],u=[];i.forEach((function(e){e in n._channels&&(delete n._channels[e],s.push(e),e in n._heartbeatChannels&&delete n._heartbeatChannels[e]),e in n._presenceChannels&&(delete n._presenceChannels[e],s.push(e))})),o.forEach((function(e){e in n._channelGroups&&(delete n._channelGroups[e],u.push(e),e in n._heartbeatChannelGroups&&delete n._heartbeatChannelGroups[e]),e in n._presenceChannelGroups&&(delete n._channelGroups[e],u.push(e))})),0===s.length&&0===u.length||(!1!==this._config.suppressLeaveEvents||t||this._leaveEndpoint({channels:s,channelGroups:u},(function(e){e.affectedChannels=s,e.affectedChannelGroups=u,e.currentTimetoken=n._currentTimetoken,e.lastTimetoken=n._lastTimetoken,n._listenerManager.announceStatus(e)})),0===Object.keys(this._channels).length&&0===Object.keys(this._presenceChannels).length&&0===Object.keys(this._channelGroups).length&&0===Object.keys(this._presenceChannelGroups).length&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect())}},{key:"unsubscribeAll",value:function(e){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},e)}},{key:"getHeartbeatChannels",value:function(){return Object.keys(this._heartbeatChannels)}},{key:"getHeartbeatChannelGroups",value:function(){return Object.keys(this._heartbeatChannelGroups)}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channels)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroups)}},{key:"reconnect",value:function(){this._startSubscribeLoop(),this._registerHeartbeatTimer()}},{key:"disconnect",value:function(){this._stopSubscribeLoop(),this._stopHeartbeatTimer(),this._reconnectionManager.stopPolling()}},{key:"_registerHeartbeatTimer",value:function(){this._stopHeartbeatTimer(),0!==this._config.getHeartbeatInterval()&&void 0!==this._config.getHeartbeatInterval()&&(this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval()))}},{key:"_stopHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_performHeartbeatLoop",value:function(){var e=this,t=this.getHeartbeatChannels(),n=this.getHeartbeatChannelGroups(),r={};0===t.length&&0===n.length||(this.getSubscribedChannels().forEach((function(t){var n=e._channels[t].state;Object.keys(n).length&&(r[t]=n)})),this.getSubscribedChannelGroups().forEach((function(t){var n=e._channelGroups[t].state;Object.keys(n).length&&(r[t]=n)})),this._heartbeatEndpoint({channels:t,channelGroups:n,state:r},function(t){t.error&&e._config.announceFailedHeartbeats&&e._listenerManager.announceStatus(t),t.error&&e._config.autoNetworkDetection&&e._isOnline&&(e._isOnline=!1,e.disconnect(),e._listenerManager.announceNetworkDown(),e.reconnect()),!t.error&&e._config.announceSuccessfulHeartbeats&&e._listenerManager.announceStatus(t)}.bind(this)))}},{key:"_startSubscribeLoop",value:function(){var e=this;this._stopSubscribeLoop();var t={},n=[],r=[];if(Object.keys(this._channels).forEach((function(r){var i=e._channels[r].state;Object.keys(i).length&&(t[r]=i),n.push(r)})),Object.keys(this._presenceChannels).forEach((function(e){n.push("".concat(e,"-pnpres"))})),Object.keys(this._channelGroups).forEach((function(n){var i=e._channelGroups[n].state;Object.keys(i).length&&(t[n]=i),r.push(n)})),Object.keys(this._presenceChannelGroups).forEach((function(e){r.push("".concat(e,"-pnpres"))})),0!==n.length||0!==r.length){var i={channels:n,channelGroups:r,state:t,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region};this._subscribeCall=this._subscribeEndpoint(i,this._processSubscribeResponse.bind(this))}}},{key:"_processSubscribeResponse",value:function(e,t){var n=this;if(e.error)e.category===d.default.PNTimeoutCategory?this._startSubscribeLoop():e.category===d.default.PNNetworkIssuesCategory?(this.disconnect(),e.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection((function(){n._config.autoNetworkDetection&&!n._isOnline&&(n._isOnline=!0,n._listenerManager.announceNetworkUp()),n.reconnect(),n._subscriptionStatusAnnounced=!0;var t={category:d.default.PNReconnectedCategory,operation:e.operation,lastTimetoken:n._lastTimetoken,currentTimetoken:n._currentTimetoken};n._listenerManager.announceStatus(t)})),this._reconnectionManager.startPolling(),this._listenerManager.announceStatus(e)):e.category===d.default.PNBadRequestCategory?(this._stopHeartbeatTimer(),this._listenerManager.announceStatus(e)):this._listenerManager.announceStatus(e);else{if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=t.metadata.timetoken),!this._subscriptionStatusAnnounced){var r={};r.category=d.default.PNConnectedCategory,r.operation=e.operation,r.affectedChannels=this._pendingChannelSubscriptions,r.subscribedChannels=this.getSubscribedChannels(),r.affectedChannelGroups=this._pendingChannelGroupSubscriptions,r.lastTimetoken=this._lastTimetoken,r.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(r),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var a=t.messages||[],o=this._config,s=o.requestMessageCountThreshold,u=o.dedupeOnSubscribe;if(s&&a.length>=s){var l={};l.category=d.default.PNRequestMessageCountExceededCategory,l.operation=e.operation,this._listenerManager.announceStatus(l)}a.forEach((function(e){var t=e.channel,r=e.subscriptionMatch,a=e.publishMetaData;if(t===r&&(r=null),u){if(n._dedupingManager.isDuplicate(e))return;n._dedupingManager.addEntry(e)}if(c.default.endsWith(e.channel,"-pnpres")){var o={channel:null,subscription:null};o.actualChannel=null!=r?t:null,o.subscribedChannel=null!=r?r:t,t&&(o.channel=t.substring(0,t.lastIndexOf("-pnpres"))),r&&(o.subscription=r.substring(0,r.lastIndexOf("-pnpres"))),o.action=e.payload.action,o.state=e.payload.data,o.timetoken=a.publishTimetoken,o.occupancy=e.payload.occupancy,o.uuid=e.payload.uuid,o.timestamp=e.payload.timestamp,e.payload.join&&(o.join=e.payload.join),e.payload.leave&&(o.leave=e.payload.leave),e.payload.timeout&&(o.timeout=e.payload.timeout),n._listenerManager.announcePresence(o)}else if(1===e.messageType){var s={channel:null,subscription:null};s.channel=t,s.subscription=r,s.timetoken=a.publishTimetoken,s.publisher=e.issuingClientId,e.userMetadata&&(s.userMetadata=e.userMetadata),s.message=e.payload,n._listenerManager.announceSignal(s)}else if(2===e.messageType){var l={channel:null,subscription:null};l.channel=t,l.subscription=r,l.timetoken=a.publishTimetoken,l.publisher=e.issuingClientId,e.userMetadata&&(l.userMetadata=e.userMetadata),l.message={event:e.payload.event,type:e.payload.type,data:e.payload.data},n._listenerManager.announceObjects(l),"user"===e.payload.type?n._listenerManager.announceUser(l):"space"===e.payload.type?n._listenerManager.announceSpace(l):"membership"===e.payload.type&&n._listenerManager.announceMembership(l)}else if(3===e.messageType){var d={};d.channel=t,d.subscription=r,d.timetoken=a.publishTimetoken,d.publisher=e.issuingClientId,d.data={messageTimetoken:e.payload.data.messageTimetoken,actionTimetoken:e.payload.data.actionTimetoken,type:e.payload.data.type,uuid:e.issuingClientId,value:e.payload.data.value},d.event=e.payload.event,n._listenerManager.announceMessageAction(d)}else if(4===e.messageType){var f={};f.channel=t,f.subscription=r,f.timetoken=a.publishTimetoken,f.publisher=e.issuingClientId;var h=e.payload;if(n._config.cipherKey){var p=n._crypto.decrypt(e.payload);"object"===(0,i.default)(p)&&null!==p&&(h=p)}e.userMetadata&&(f.userMetadata=e.userMetadata),f.message=h.message,f.file={id:h.file.id,name:h.file.name,url:n._getFileUrl({id:h.file.id,name:h.file.name,channel:t})},n._listenerManager.announceFile(f)}else{var m={channel:null,subscription:null};m.actualChannel=null!=r?t:null,m.subscribedChannel=null!=r?r:t,m.channel=t,m.subscription=r,m.timetoken=a.publishTimetoken,m.publisher=e.issuingClientId,e.userMetadata&&(m.userMetadata=e.userMetadata),n._config.cipherKey?m.message=n._crypto.decrypt(e.payload):m.message=e.payload,n._listenerManager.announceMessage(m)}})),this._region=t.metadata.region,this._startSubscribeLoop()}}},{key:"_stopSubscribeLoop",value:function(){this._subscribeCall&&("function"==typeof this._subscribeCall.abort&&this._subscribeCall.abort(),this._subscribeCall=null)}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5)),a=r(n(6)),o=r(n(4)),s=(r(n(24)),n(2),function(){function e(t){var n=t.timeEndpoint;(0,i.default)(this,e),(0,o.default)(this,"_reconnectionCallback",void 0),(0,o.default)(this,"_timeEndpoint",void 0),(0,o.default)(this,"_timeTimer",void 0),this._timeEndpoint=n}return(0,a.default)(e,[{key:"onReconnection",value:function(e){this._reconnectionCallback=e}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var e=this;this._timeEndpoint((function(t){t.error||(clearInterval(e._timeTimer),e._reconnectionCallback())}))}}]),e}());t.default=s,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5)),a=r(n(6)),o=r(n(4)),s=(r(n(8)),n(2),function(){function e(t){var n=t.config;(0,i.default)(this,e),(0,o.default)(this,"_config",void 0),(0,o.default)(this,"hashHistory",void 0),this.hashHistory=[],this._config=n}return(0,a.default)(e,[{key:"getKey",value:function(e){var t=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}(JSON.stringify(e.payload)).toString(),n=e.publishMetaData.publishTimetoken;return"".concat(n,"-").concat(t)}},{key:"isDuplicate",value:function(e){return this.hashHistory.includes(this.getKey(e))}},{key:"addEntry",value:function(e){this.hashHistory.length>=this._config.maximumCacheSize&&this.hashHistory.shift(),this.hashHistory.push(this.getKey(e))}},{key:"clearHistory",value:function(){this.hashHistory=[]}}]),e}());t.default=s,e.exports=t.default},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,l=[],c=!1,d=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=s(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++d<t;)u&&u[d].run();d=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5)),a=r(n(6)),o=r(n(4)),s=r(n(1)),u=function(){function e(t){(0,i.default)(this,e),(0,o.default)(this,"_maximumSamplesCount",100),(0,o.default)(this,"_trackedLatencies",{}),(0,o.default)(this,"_latencies",{}),this._maximumSamplesCount=t.maximumSamplesCount||this._maximumSamplesCount}return(0,a.default)(e,[{key:"operationsLatencyForRequest",value:function(){var e=this,t={};return Object.keys(this._latencies).forEach((function(n){var r=e._latencies[n],i=e._averageLatency(r);i>0&&(t["l_".concat(n)]=i)})),t}},{key:"startLatencyMeasure",value:function(e,t){e!==s.default.PNSubscribeOperation&&t&&(this._trackedLatencies[t]=Date.now())}},{key:"stopLatencyMeasure",value:function(e,t){if(e!==s.default.PNSubscribeOperation&&t){var n=this._endpointName(e),r=this._latencies[n],i=this._trackedLatencies[t];r||(r=this._latencies[n]=[]),r.push(Date.now()-i),r.length>this._maximumSamplesCount&&r.splice(0,r.length-this._maximumSamplesCount),delete this._trackedLatencies[t]}}},{key:"_averageLatency",value:function(e){return Math.floor(e.reduce((function(e,t){return e+t}),0)/e.length)}},{key:"_endpointName",value:function(e){var t=null;switch(e){case s.default.PNPublishOperation:t="pub";break;case s.default.PNSignalOperation:t="sig";break;case s.default.PNHistoryOperation:case s.default.PNFetchMessagesOperation:case s.default.PNDeleteMessagesOperation:case s.default.PNMessageCounts:t="hist";break;case s.default.PNUnsubscribeOperation:case s.default.PNWhereNowOperation:case s.default.PNHereNowOperation:case s.default.PNHeartbeatOperation:case s.default.PNSetStateOperation:case s.default.PNGetStateOperation:t="pres";break;case s.default.PNAddChannelsToGroupOperation:case s.default.PNRemoveChannelsFromGroupOperation:case s.default.PNChannelGroupsOperation:case s.default.PNRemoveGroupOperation:case s.default.PNChannelsForGroupOperation:t="cg";break;case s.default.PNPushNotificationEnabledChannelsOperation:case s.default.PNRemoveAllPushNotificationsOperation:t="push";break;case s.default.PNCreateUserOperation:case s.default.PNUpdateUserOperation:case s.default.PNDeleteUserOperation:case s.default.PNGetUserOperation:case s.default.PNGetUsersOperation:case s.default.PNCreateSpaceOperation:case s.default.PNUpdateSpaceOperation:case s.default.PNDeleteSpaceOperation:case s.default.PNGetSpaceOperation:case s.default.PNGetSpacesOperation:case s.default.PNGetMembersOperation:case s.default.PNUpdateMembersOperation:case s.default.PNGetMembershipsOperation:case s.default.PNUpdateMembershipsOperation:t="obj";break;case s.default.PNAddMessageActionOperation:case s.default.PNRemoveMessageActionOperation:case s.default.PNGetMessageActionsOperation:t="msga";break;case s.default.PNAccessManagerGrant:case s.default.PNAccessManagerAudit:t="pam";break;case s.default.PNAccessManagerGrantToken:t="pam3";break;default:t="time"}return t}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FCMNotificationPayload=t.MPNSNotificationPayload=t.APNSNotificationPayload=void 0;var i=r(n(42)),a=r(n(19)),o=r(n(14)),s=r(n(16)),u=r(n(13)),l=r(n(5)),c=r(n(6)),d=r(n(4));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}n(2);var m=function(){function e(t,n,r){(0,l.default)(this,e),(0,d.default)(this,"_subtitle",void 0),(0,d.default)(this,"_payload",void 0),(0,d.default)(this,"_badge",void 0),(0,d.default)(this,"_sound",void 0),(0,d.default)(this,"_title",void 0),(0,d.default)(this,"_body",void 0),this._payload=t,this._setDefaultPayloadStructure(),this.title=n,this.body=r}return(0,c.default)(e,[{key:"payload",get:function(){return this._payload}},{key:"title",set:function(e){this._title=e}},{key:"subtitle",set:function(e){this._subtitle=e}},{key:"body",set:function(e){this._body=e}},{key:"badge",set:function(e){this._badge=e}},{key:"sound",set:function(e){this._sound=e}}]),(0,c.default)(e,[{key:"_setDefaultPayloadStructure",value:function(){}},{key:"toObject",value:function(){return{}}}]),e}(),g=function(e){(0,o.default)(n,e);var t=p(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,d.default)((0,a.default)(e),"_configurations",void 0),(0,d.default)((0,a.default)(e),"_apnsPushType",void 0),(0,d.default)((0,a.default)(e),"_isSilent",void 0),e}return(0,c.default)(n,[{key:"_setDefaultPayloadStructure",value:function(){this._payload.aps={alert:{}}}},{key:"toObject",value:function(){var e=this,t=h({},this._payload),n=t.aps,r=n.alert;if(this._isSilent&&(n["content-available"]=1),"apns2"===this._apnsPushType){if(!this._configurations||!this._configurations.length)throw new ReferenceError("APNS2 configuration is missing");var i=[];this._configurations.forEach((function(t){i.push(e._objectFromAPNS2Configuration(t))})),i.length&&(t.pn_push=i)}return r&&Object.keys(r).length||delete n.alert,this._isSilent&&(delete n.alert,delete n.badge,delete n.sound,r={}),this._isSilent||Object.keys(r).length?t:null}},{key:"_objectFromAPNS2Configuration",value:function(e){var t=this;if(!e.targets||!e.targets.length)throw new ReferenceError("At least one APNS2 target should be provided");var n=[];e.targets.forEach((function(e){n.push(t._objectFromAPNSTarget(e))}));var r=e.collapseId,i=e.expirationDate,a={auth_method:"token",targets:n,version:"v2"};return r&&r.length&&(a.collapse_id=r),i&&(a.expiration=i.toISOString()),a}},{key:"_objectFromAPNSTarget",value:function(e){if(!e.topic||!e.topic.length)throw new TypeError("Target 'topic' undefined.");var t=e.topic,n=e.environment,r=void 0===n?"development":n,i=e.excludedDevices,a=void 0===i?[]:i,o={topic:t,environment:r};return a.length&&(o.excluded_devices=a),o}},{key:"configurations",set:function(e){e&&e.length&&(this._configurations=e)}},{key:"notification",get:function(){return this._payload.aps}},{key:"title",get:function(){return this._title},set:function(e){e&&e.length&&(this._payload.aps.alert.title=e,this._title=e)}},{key:"subtitle",get:function(){return this._subtitle},set:function(e){e&&e.length&&(this._payload.aps.alert.subtitle=e,this._subtitle=e)}},{key:"body",get:function(){return this._body},set:function(e){e&&e.length&&(this._payload.aps.alert.body=e,this._body=e)}},{key:"badge",get:function(){return this._badge},set:function(e){null!=e&&(this._payload.aps.badge=e,this._badge=e)}},{key:"sound",get:function(){return this._sound},set:function(e){e&&e.length&&(this._payload.aps.sound=e,this._sound=e)}},{key:"silent",set:function(e){this._isSilent=e}}]),n}(m);t.APNSNotificationPayload=g;var v=function(e){(0,o.default)(n,e);var t=p(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,d.default)((0,a.default)(e),"_backContent",void 0),(0,d.default)((0,a.default)(e),"_backTitle",void 0),(0,d.default)((0,a.default)(e),"_count",void 0),(0,d.default)((0,a.default)(e),"_type",void 0),e}return(0,c.default)(n,[{key:"toObject",value:function(){return Object.keys(this._payload).length?h({},this._payload):null}},{key:"backContent",get:function(){return this._backContent},set:function(e){e&&e.length&&(this._payload.back_content=e,this._backContent=e)}},{key:"backTitle",get:function(){return this._backTitle},set:function(e){e&&e.length&&(this._payload.back_title=e,this._backTitle=e)}},{key:"count",get:function(){return this._count},set:function(e){null!=e&&(this._payload.count=e,this._count=e)}},{key:"title",get:function(){return this._title},set:function(e){e&&e.length&&(this._payload.title=e,this._title=e)}},{key:"type",get:function(){return this._type},set:function(e){e&&e.length&&(this._payload.type=e,this._type=e)}},{key:"subtitle",get:function(){return this.backTitle},set:function(e){this.backTitle=e}},{key:"body",get:function(){return this.backContent},set:function(e){this.backContent=e}},{key:"badge",get:function(){return this.count},set:function(e){this.count=e}}]),n}(m);t.MPNSNotificationPayload=v;var y=function(e){(0,o.default)(n,e);var t=p(n);function n(){var e;(0,l.default)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),(0,d.default)((0,a.default)(e),"_isSilent",void 0),(0,d.default)((0,a.default)(e),"_icon",void 0),(0,d.default)((0,a.default)(e),"_tag",void 0),e}return(0,c.default)(n,[{key:"_setDefaultPayloadStructure",value:function(){this._payload.notification={},this._payload.data={}}},{key:"toObject",value:function(){var e=h({},this._payload.data),t=null,n={};if(Object.keys(this._payload).length>2){var r=this._payload,a=(r.notification,r.data,(0,i.default)(r,["notification","data"]));e=h(h({},e),a)}return this._isSilent?e.notification=this._payload.notification:t=this._payload.notification,Object.keys(e).length&&(n.data=e),t&&Object.keys(t).length&&(n.notification=t),Object.keys(n).length?n:null}},{key:"notification",get:function(){return this._payload.notification}},{key:"data",get:function(){return this._payload.data}},{key:"title",get:function(){return this._title},set:function(e){e&&e.length&&(this._payload.notification.title=e,this._title=e)}},{key:"body",get:function(){return this._body},set:function(e){e&&e.length&&(this._payload.notification.body=e,this._body=e)}},{key:"sound",get:function(){return this._sound},set:function(e){e&&e.length&&(this._payload.notification.sound=e,this._sound=e)}},{key:"icon",get:function(){return this._icon},set:function(e){e&&e.length&&(this._payload.notification.icon=e,this._icon=e)}},{key:"tag",get:function(){return this._tag},set:function(e){e&&e.length&&(this._payload.notification.tag=e,this._tag=e)}},{key:"silent",set:function(e){this._isSilent=e}}]),n}(m);t.FCMNotificationPayload=y;var _=function(){function e(t,n){(0,l.default)(this,e),(0,d.default)(this,"_payload",void 0),(0,d.default)(this,"_debugging",void 0),(0,d.default)(this,"_subtitle",void 0),(0,d.default)(this,"_badge",void 0),(0,d.default)(this,"_sound",void 0),(0,d.default)(this,"_title",void 0),(0,d.default)(this,"_body",void 0),(0,d.default)(this,"apns",void 0),(0,d.default)(this,"mpns",void 0),(0,d.default)(this,"fcm",void 0),this._payload={apns:{},mpns:{},fcm:{}},this._title=t,this._body=n,this.apns=new g(this._payload.apns,t,n),this.mpns=new v(this._payload.mpns,t,n),this.fcm=new y(this._payload.fcm,t,n)}return(0,c.default)(e,[{key:"debugging",set:function(e){this._debugging=e}},{key:"title",get:function(){return this._title}},{key:"body",get:function(){return this._body}},{key:"subtitle",get:function(){return this._subtitle},set:function(e){this._subtitle=e,this.apns.subtitle=e,this.mpns.subtitle=e,this.fcm.subtitle=e}},{key:"badge",get:function(){return this._badge},set:function(e){this._badge=e,this.apns.badge=e,this.mpns.badge=e,this.fcm.badge=e}},{key:"sound",get:function(){return this._sound},set:function(e){this._sound=e,this.apns.sound=e,this.mpns.sound=e,this.fcm.sound=e}}]),(0,c.default)(e,[{key:"buildPayload",value:function(e){var t={};if(e.includes("apns")||e.includes("apns2")){this.apns._apnsPushType=e.includes("apns")?"apns":"apns2";var n=this.apns.toObject();n&&Object.keys(n).length&&(t.pn_apns=n)}if(e.includes("mpns")){var r=this.mpns.toObject();r&&Object.keys(r).length&&(t.pn_mpns=r)}if(e.includes("fcm")){var i=this.fcm.toObject();i&&Object.keys(i).length&&(t.pn_gcm=i)}return Object.keys(t).length&&this._debugging&&(t.pn_debug=!0),t}}]),e}();t.default=_},function(e,t,n){var r=n(43);e.exports=function(e,t){if(null==e)return{};var n,i,a=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7)),a=r(n(5)),o=r(n(6)),s=r(n(4)),u=(r(n(8)),n(2),function(){function e(t,n){(0,a.default)(this,e),(0,s.default)(this,"_config",void 0),(0,s.default)(this,"_cbor",void 0),(0,s.default)(this,"_userTokens",void 0),(0,s.default)(this,"_spaceTokens",void 0),(0,s.default)(this,"_userToken",void 0),(0,s.default)(this,"_spaceToken",void 0),this._config=t,this._cbor=n,this._initializeTokens()}return(0,o.default)(e,[{key:"_initializeTokens",value:function(){this._userTokens={},this._spaceTokens={},this._userToken=void 0,this._spaceToken=void 0}},{key:"_setToken",value:function(e){var t=this,n=this.parseToken(e);n&&n.resources&&(n.resources.users&&Object.keys(n.resources.users).forEach((function(n){t._userTokens[n]=e})),n.resources.spaces&&Object.keys(n.resources.spaces).forEach((function(n){t._spaceTokens[n]=e}))),n&&n.patterns&&(n.patterns.users&&Object.keys(n.patterns.users).length>0&&(this._userToken=e),n.patterns.spaces&&Object.keys(n.patterns.spaces).length>0&&(this._spaceToken=e))}},{key:"setToken",value:function(e){e&&e.length>0&&this._setToken(e)}},{key:"setTokens",value:function(e){var t=this;e&&e.length&&"object"===(0,i.default)(e)&&e.forEach((function(e){t.setToken(e)}))}},{key:"getTokens",value:function(e){var t=this,n={users:{},spaces:{}};return e?(e.user&&(n.user=this._userToken),e.space&&(n.space=this._spaceToken),e.users&&e.users.forEach((function(e){n.users[e]=t._userTokens[e]})),e.space&&e.spaces.forEach((function(e){n.spaces[e]=t._spaceTokens[e]}))):(this._userToken&&(n.user=this._userToken),this._spaceToken&&(n.space=this._spaceToken),Object.keys(this._userTokens).forEach((function(e){n.users[e]=t._userTokens[e]})),Object.keys(this._spaceTokens).forEach((function(e){n.spaces[e]=t._spaceTokens[e]}))),n}},{key:"getToken",value:function(e,t){var n;return t?"user"===e?n=this._userTokens[t]:"space"===e&&(n=this._spaceTokens[t]):"user"===e?n=this._userToken:"space"===e&&(n=this._spaceToken),n}},{key:"extractPermissions",value:function(e){var t={create:!1,read:!1,write:!1,manage:!1,delete:!1};return 16==(16&e)&&(t.create=!0),8==(8&e)&&(t.delete=!0),4==(4&e)&&(t.manage=!0),2==(2&e)&&(t.write=!0),1==(1&e)&&(t.read=!0),t}},{key:"parseToken",value:function(e){var t=this,n=this._cbor.decodeToken(e);if(void 0!==n){var r=Object.keys(n.res.usr),i=Object.keys(n.res.spc),a=Object.keys(n.pat.usr),o=Object.keys(n.pat.spc),s={version:n.v,timestamp:n.t,ttl:n.ttl},u=r.length>0,l=i.length>0;(u||l)&&(s.resources={},u&&(s.resources.users={},r.forEach((function(e){s.resources.users[e]=t.extractPermissions(n.res.usr[e])}))),l&&(s.resources.spaces={},i.forEach((function(e){s.resources.spaces[e]=t.extractPermissions(n.res.spc[e])}))));var c=a.length>0,d=o.length>0;return(c||d)&&(s.patterns={},c&&(s.patterns.users={},a.forEach((function(e){s.patterns.users[e]=t.extractPermissions(n.pat.usr[e])}))),d&&(s.patterns.spaces={},o.forEach((function(e){s.patterns.spaces[e]=t.extractPermissions(n.pat.spc[e])})))),Object.keys(n.meta).length>0&&(s.meta=n.meta),s.signature=n.sig,s}}},{key:"clearTokens",value:function(){this._initializeTokens()}}]),e}());t.default=u,e.exports=t.default},function(e,t,n){var r=n(13),i=n(15),a=n(46),o=n(47);function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},s(t)}e.exports=s},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var r=n(15),i=n(48);function a(t,n,o){return i()?e.exports=a=Reflect.construct:e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},a.apply(null,arguments)}e.exports=a},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAddChannelsToGroupOperation},t.validateParams=function(e,t){var n=t.channels,r=t.channelGroup,i=e.config;return r?n&&0!==n.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup,r=e.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(a.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{add:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}},n(2);var i=r(n(1)),a=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveChannelsFromGroupOperation},t.validateParams=function(e,t){var n=t.channels,r=t.channelGroup,i=e.config;return r?n&&0!==n.length?i.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup,r=e.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(a.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{remove:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}},n(2);var i=r(n(1)),a=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveGroupOperation},t.validateParams=function(e,t){var n=t.channelGroup,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup,r=e.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(a.default.encodeString(n),"/remove")},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.handleResponse=function(){return{}},n(2);var i=r(n(1)),a=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNChannelGroupsOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){var t=e.config;return"/v1/channel-registration/sub-key/".concat(t.subscribeKey,"/channel-group")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{groups:t.payload.groups}},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNChannelsForGroupOperation},t.validateParams=function(e,t){var n=t.channelGroup,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){var n=t.channelGroup,r=e.config;return"/v1/channel-registration/sub-key/".concat(r.subscribeKey,"/channel-group/").concat(a.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{channels:t.payload.channels}},n(2);var i=r(n(1)),a=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.channels,a=t.topic,o=e.config;return n?r?"apns2"!==r||a?i&&0!==i.length?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return"apns2"===r?"/v2/push/sub-key/".concat(i.subscribeKey,"/devices-apns2/").concat(n):"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.channels,i=void 0===r?[]:r,a=t.environment,o=void 0===a?"development":a,s=t.topic,u={type:n,add:i.join(",")};return"apns2"===n&&delete(u=Object.assign({},u,{environment:o,topic:s})).type,u},t.handleResponse=function(){return{}},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.channels,a=t.topic,o=e.config;return n?r?"apns2"!==r||a?i&&0!==i.length?o.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return"apns2"===r?"/v2/push/sub-key/".concat(i.subscribeKey,"/devices-apns2/").concat(n):"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.channels,i=void 0===r?[]:r,a=t.environment,o=void 0===a?"development":a,s=t.topic,u={type:n,remove:i.join(",")};return"apns2"===n&&delete(u=Object.assign({},u,{environment:o,topic:s})).type,u},t.handleResponse=function(){return{}},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.topic,a=e.config;return n?r?"apns2"!==r||i?a.subscribeKey?void 0:"Missing Subscribe Key":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return"apns2"===r?"/v2/push/sub-key/".concat(i.subscribeKey,"/devices-apns2/").concat(n):"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.environment,i=void 0===r?"development":r,a=t.topic,o={type:n};return"apns2"===n&&delete(o=Object.assign({},o,{environment:i,topic:a})).type,o},t.handleResponse=function(e,t){return{channels:t}},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveAllPushNotificationsOperation},t.validateParams=function(e,t){var n=t.device,r=t.pushGateway,i=t.topic,a=e.config;return n?r?"apns2"!==r||i?a.subscribeKey?void 0:"Missing Subscribe Key":"Missing APNS2 topic":"Missing GW Type (pushGateway: gcm, apns or apns2)":"Missing Device ID (device)"},t.getURL=function(e,t){var n=t.device,r=t.pushGateway,i=e.config;return"apns2"===r?"/v2/push/sub-key/".concat(i.subscribeKey,"/devices-apns2/").concat(n,"/remove"):"/v1/push/sub-key/".concat(i.subscribeKey,"/devices/").concat(n,"/remove")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.pushGateway,r=t.environment,i=void 0===r?"development":r,a=t.topic,o={type:n};return"apns2"===n&&delete(o=Object.assign({},o,{environment:i,topic:a})).type,o},t.handleResponse=function(){return{}},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUnsubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(a.default.encodeString(o),"/leave")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return r.length>0&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(){return{}},n(2);var i=r(n(1)),a=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNWhereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.uuid,i=void 0===r?n.UUID:r;return"/v2/presence/sub-key/".concat(n.subscribeKey,"/uuid/").concat(i)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t.payload?{channels:t.payload.channels}:{channels:[]}},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNHeartbeatOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(a.default.encodeString(o),"/heartbeat")},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i=t.state,a=void 0===i?{}:i,o=e.config,s={};return r.length>0&&(s["channel-group"]=r.join(",")),s.state=JSON.stringify(a),s.heartbeat=o.getPresenceTimeout(),s},t.handleResponse=function(){return{}},n(2);var i=r(n(1)),a=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetStateOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.uuid,i=void 0===r?n.UUID:r,o=t.channels,s=void 0===o?[]:o,u=s.length>0?s.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(a.default.encodeString(u),"/uuid/").concat(i)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return r.length>0&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(e,t,n){var r=n.channels,i=void 0===r?[]:r,a=n.channelGroups,o=void 0===a?[]:a,s={};return 1===i.length&&0===o.length?s[i[0]]=t.payload:s=t.payload,{channels:s}},n(2);var i=r(n(1)),a=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNSetStateOperation},t.validateParams=function(e,t){var n=e.config,r=t.state,i=t.channels,a=void 0===i?[]:i,o=t.channelGroups,s=void 0===o?[]:o;return r?n.subscribeKey?0===a.length&&0===s.length?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key":"Missing State"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/presence/sub-key/".concat(n.subscribeKey,"/channel/").concat(a.default.encodeString(o),"/uuid/").concat(n.UUID,"/data")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.state,r=t.channelGroups,i=void 0===r?[]:r,a={};return a.state=JSON.stringify(n),i.length>0&&(a["channel-group"]=i.join(",")),a},t.handleResponse=function(e,t){return{state:t.payload}},n(2);var i=r(n(1)),a=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return a.default.PNHereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,a=t.channelGroups,s=void 0===a?[]:a,u="/v2/presence/sub-key/".concat(n.subscribeKey);if(i.length>0||s.length>0){var l=i.length>0?i.join(","):",";u+="/channel/".concat(o.default.encodeString(l))}return u},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i=t.includeUUIDs,a=void 0===i||i,o=t.includeState,s=void 0!==o&&o,l=t.queryParameters,c=void 0===l?{}:l,d={};return a||(d.disable_uuids=1),s&&(d.state=1),r.length>0&&(d["channel-group"]=r.join(",")),u(u({},d),c)},t.handleResponse=function(e,t,n){var r=n.channels,i=void 0===r?[]:r,a=n.channelGroups,o=void 0===a?[]:a,s=n.includeUUIDs,u=void 0===s||s,l=n.includeState,c=void 0!==l&&l;return i.length>1||o.length>0||0===o.length&&0===i.length?function(){var e={};return e.totalChannels=t.payload.total_channels,e.totalOccupancy=t.payload.total_occupancy,e.channels={},Object.keys(t.payload.channels).forEach((function(n){var r=t.payload.channels[n],i=[];return e.channels[n]={occupants:i,name:n,occupancy:r.occupancy},u&&r.uuids.forEach((function(e){c?i.push({state:e.state,uuid:e.uuid}):i.push({state:null,uuid:e})})),e})),e}():function(){var e={},n=[];return e.totalChannels=1,e.totalOccupancy=t.occupancy,e.channels={},e.channels[i[0]]={occupants:n,name:i[0],occupancy:t.occupancy},u&&t.uuids&&t.uuids.forEach((function(e){c?n.push({state:e.state,uuid:e.uuid}):n.push({state:null,uuid:e})})),e}()};var i=r(n(4)),a=(n(2),r(n(1))),o=r(n(3));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAddMessageActionOperation},t.validateParams=function(e,t){var n=e.config,r=t.action,i=t.channel;return t.messageTimetoken?n.subscribeKey?i?r?r.value?r.type?r.type.length>15?"Action.type value exceed maximum length of 15":void 0:"Missing Action.type":"Missing Action.value":"Missing Action":"Missing message channel":"Missing Subscribe Key":"Missing message timetoken"},t.usePost=function(){return!0},t.postURL=function(e,t){var n=e.config,r=t.channel,i=t.messageTimetoken;return"/v1/message-actions/".concat(n.subscribeKey,"/channel/").concat(r,"/message/").concat(i)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.getRequestHeaders=function(){return{"Content-Type":"application/json"}},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.postPayload=function(e,t){return t.action},t.handleResponse=function(e,t){return{data:t.data}},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveMessageActionOperation},t.validateParams=function(e,t){var n=e.config,r=t.channel,i=t.actionTimetoken;return t.messageTimetoken?i?n.subscribeKey?r?void 0:"Missing message channel":"Missing Subscribe Key":"Missing action timetoken":"Missing message timetoken"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=e.config,r=t.channel,i=t.actionTimetoken,a=t.messageTimetoken;return"/v1/message-actions/".concat(n.subscribeKey,"/channel/").concat(r,"/message/").concat(a,"/action/").concat(i)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{data:t.data}},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetMessageActionsOperation},t.validateParams=function(e,t){var n=e.config,r=t.channel;return n.subscribeKey?r?void 0:"Missing message channel":"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channel;return"/v1/message-actions/".concat(n.subscribeKey,"/channel/").concat(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.limit,r=t.start,i=t.end,a={};return n&&(a.limit=n),r&&(a.start=r),i&&(a.end=i),a},t.handleResponse=function(e,t){var n={data:t.data,start:null,end:null};return n.data.length&&(n.end=n.data[n.data.length-1].actionTimetoken,n.start=n.data[0].actionTimetoken),n},n(2);var i=r(n(1))},function(e,t,n){},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),a={getOperation:function(){return i.default.PNListFilesOperation},validateParams:function(e,t){if(!(null==t?void 0:t.channel))return"channel can't be empty"},getURL:function(e,t){var n=e.config;return"/v1/files/".concat(n.subscribeKey,"/channels/").concat(t.channel,"/files")},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("fileUpload")},prepareParams:function(e,t){var n={};return t.limit&&(n.limit=t.limit),t.next&&(n.next=t.next),n},handleResponse:function(e,t){return{status:t.status,data:t.data,next:t.next,count:t.count}}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),a={getOperation:function(){return i.default.PNGenerateUploadUrlOperation},validateParams:function(e,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.name)?void 0:"name can't be empty":"channel can't be empty"},usePost:function(){return!0},postURL:function(e,t){var n=e.config;return"/v1/files/".concat(n.subscribeKey,"/channels/").concat(t.channel,"/generate-upload-url")},postPayload:function(e,t){return{name:t.name}},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("fileUpload")},prepareParams:function(){return{}},handleResponse:function(e,t){return{status:t.status,data:t.data,file_upload_request:t.file_upload_request}}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7)),a=r(n(1)),o=r(n(3)),s={getOperation:function(){return a.default.PNPublishFileOperation},validateParams:function(e,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.fileId)?(null==t?void 0:t.fileName)?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"},getURL:function(e,t){var n=e.config,r=n.publishKey,i=n.subscribeKey,a=function(e,t){var n=e.crypto,r=e.config,i=JSON.stringify(t);return r.cipherKey&&(i=n.encrypt(i),i=JSON.stringify(i)),i||""}(e,{message:t.message,file:{name:t.fileName,id:t.fileId}});return"/v1/files/publish-file/".concat(r,"/").concat(i,"/0/").concat(t.channel,"/0/").concat(o.default.encodeString(a))},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("fileUpload")},prepareParams:function(e,t){var n={};return t.ttl&&(n.ttl=t.ttl),void 0!==t.storeInHistory&&(n.store=t.storeInHistory?"1":"0"),t.meta&&"object"===(0,i.default)(t.meta)&&(n.meta=JSON.stringify(t.meta)),n},handleResponse:function(e,t){return{timetoken:t[2]}}};t.default=s,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(11)),a=r(n(12)),o=n(18),s=function(e){return new Promise((function(t){var n="";e.on("data",(function(e){n+=e.toString("utf8")})),e.on("end",(function(){t(n)}))}))};t.default=function(e){var t,n,r,u,l,c,d,f,h,p=(r=(t=e).generateUploadUrl,u=t.publishFile,l=t.modules,c=l.PubNubFile,d=l.config,f=l.cryptography,h=l.networking,n=(0,a.default)(i.default.mark((function e(t){var n,a,l,p,m,g,v,y,_,b,T,E,S,w,A,M,L,C,D,k,P,I;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.channel,a=t.file,l=t.message,p=t.cipherKey,m=t.meta,g=t.ttl,v=t.storeInHistory,n){e.next=3;break}throw new o.PubNubError("Validation failed, check status for details",(0,o.createValidationError)("channel can't be empty"));case 3:if(a){e.next=5;break}throw new o.PubNubError("Validation failed, check status for details",(0,o.createValidationError)("file can't be empty"));case 5:return y=c.create(a),e.next=8,r({channel:n,name:y.name});case 8:if(_=e.sent,b=_.file_upload_request,T=b.url,E=b.form_fields,S=_.data,w=S.id,A=S.name,!c.supportsEncryptFile||!(null!=p?p:d.cipherKey)){e.next=19;break}return e.next=18,f.encryptFile(null!=p?p:d.cipherKey,y,c);case 18:y=e.sent;case 19:if(M=E,y.mimeType&&(M=E.map((function(e){return"Content-Type"===e.key?{key:e.key,value:y.mimeType}:e}))),e.prev=21,!c.supportsFileUri||!a.uri){e.next=34;break}return e.t0=h,e.t1=T,e.t2=M,e.next=28,y.toFileUri();case 28:return e.t3=e.sent,e.next=31,e.t0.POSTFILE.call(e.t0,e.t1,e.t2,e.t3);case 31:L=e.sent,e.next=71;break;case 34:if(!c.supportsFile){e.next=46;break}return e.t4=h,e.t5=T,e.t6=M,e.next=40,y.toFile();case 40:return e.t7=e.sent,e.next=43,e.t4.POSTFILE.call(e.t4,e.t5,e.t6,e.t7);case 43:L=e.sent,e.next=71;break;case 46:if(!c.supportsBuffer){e.next=58;break}return e.t8=h,e.t9=T,e.t10=M,e.next=52,y.toBuffer();case 52:return e.t11=e.sent,e.next=55,e.t8.POSTFILE.call(e.t8,e.t9,e.t10,e.t11);case 55:L=e.sent,e.next=71;break;case 58:if(!c.supportsBlob){e.next=70;break}return e.t12=h,e.t13=T,e.t14=M,e.next=64,y.toBlob();case 64:return e.t15=e.sent,e.next=67,e.t12.POSTFILE.call(e.t12,e.t13,e.t14,e.t15);case 67:L=e.sent,e.next=71;break;case 70:throw new Error("Unsupported environment");case 71:e.next=80;break;case 73:return e.prev=73,e.t16=e.catch(21),e.next=77,s(e.t16.response);case 77:throw C=e.sent,D=/<Message>(.*)<\/Message>/gi.exec(C),new o.PubNubError(D?"Upload to bucket failed: ".concat(D[1]):"Upload to bucket failed.",e.t16);case 80:if(204===L.status){e.next=82;break}throw new o.PubNubError("Upload to bucket was unsuccessful",L);case 82:k=5,P=!1,I={timetoken:"0"};case 85:if(P||!(k>0)){e.next=98;break}return e.prev=86,e.next=89,u({channel:n,message:l,fileId:w,fileName:A,meta:m,storeInHistory:v,ttl:g});case 89:I=e.sent,P=!0,e.next=96;break;case 93:e.prev=93,e.t17=e.catch(86),k-=1;case 96:e.next=85;break;case 98:if(P){e.next=102;break}throw new o.PubNubError("Publish failed. You may want to execute that operation manually using pubnub.publishFile",{channel:n,id:w,name:A});case 102:return e.abrupt("return",{timetoken:I.timetoken,id:w,name:A});case 103:case"end":return e.stop()}}),e,null,[[21,73],[86,93]])}))),function(e){return n.apply(this,arguments)});return function(e,t){var n=p(e);return"function"==typeof t?(n.then((function(e){return t(null,e)})).catch((function(e){return t(e,null)})),n):n}},e.exports=t.default},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function d(){}function f(){}function h(){}var p={};p[i]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(w([])));g&&g!==t&&n.call(g,i)&&(p=g);var v=h.prototype=d.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){var r;this._invoke=function(i,a){function o(){return new t((function(r,o){!function r(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function w(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=v.constructor=h,h.constructor=f,f.displayName=s(h,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(_.prototype),_.prototype[a]=function(){return this},e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(v),s(v,o,"Generator"),v[i]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=w,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(18);t.default=function(e,t){var n=t.channel,i=t.id,a=t.name,o=e.config;if(!n)throw new r.PubNubError("Validation failed, check status for details",(0,r.createValidationError)("channel can't be empty"));if(!i)throw new r.PubNubError("Validation failed, check status for details",(0,r.createValidationError)("file id can't be empty"));if(!a)throw new r.PubNubError("Validation failed, check status for details",(0,r.createValidationError)("file name can't be empty"));var s="/v1/files/".concat(o.subscribeKey,"/channels/").concat(n,"/files/").concat(i,"/").concat(a),u={};u.uuid=o.getUUID(),u.pnsdk=(0,r.generatePNSDK)(o),o.getAuthKey()&&(u.auth=o.getAuthKey()),o.secretKey&&(0,r.signRequest)(e,s,u,{},{getOperation:function(){return"PubNubGetFileUrlOperation"}});var l=Object.keys(u).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(u[e]))})).join("&");return""!==l?"https://".concat(o.origin).concat(s,"?").concat(l):"https://".concat(o.origin).concat(s)},e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=r(n(11)),o=r(n(12)),s=r(n(1)),u={getOperation:function(){return s.default.PNDownloadFileOperation},validateParams:function(e,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.name)?(null==t?void 0:t.id)?void 0:"id can't be empty":"name can't be empty":"channel can't be empty"},useGetFile:function(){return!0},getFileURL:function(e,t){var n=e.config;return"/v1/files/".concat(n.subscribeKey,"/channels/").concat(t.channel,"/files/").concat(t.id,"/").concat(t.name)},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},ignoreBody:function(){return!0},forceBuffered:function(){return!0},prepareParams:function(){return{}},handleResponse:(i=(0,o.default)(a.default.mark((function e(t,n,r){var i,o,s,u,l,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.PubNubFile,s=t.config,u=t.cryptography,l=n.response.body,!o.supportsEncryptFile||!s.cipherKey){e.next=6;break}return e.next=5,u.decrypt(null!==(c=r.cipherKey)&&void 0!==c?c:s.cipherKey,l);case 5:l=e.sent;case 6:return e.abrupt("return",o.create({data:l,name:null!==(i=n.response.name)&&void 0!==i?i:r.name,mimeType:n.response.type}));case 7:case"end":return e.stop()}}),e)}))),function(e,t,n){return i.apply(this,arguments)})};t.default=u,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),a={getOperation:function(){return i.default.PNListFilesOperation},validateParams:function(e,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.id)?(null==t?void 0:t.name)?void 0:"file name can't be empty":"file id can't be empty":"channel can't be empty"},useDelete:function(){return!0},getURL:function(e,t){var n=e.config;return"/v1/files/".concat(n.subscribeKey,"/channels/").concat(t.channel,"/files/").concat(t.id,"/").concat(t.name)},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("fileUpload")},prepareParams:function(){return{}},handleResponse:function(e,t){return{status:t.status}}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),a=r(n(1)),o={getOperation:function(){return a.default.PNGetAllUUIDMetadataOperation},validateParams:function(){},getURL:function(e){var t=e.config;return"/v2/objects/".concat(t.subscribeKey,"/uuids")},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("user")},prepareParams:function(e,t){var n,r,a,o,s,u,l,c,d={};return(null==t||null===(n=t.include)||void 0===n?void 0:n.customFields)&&(d.include="custom"),(null==t||null===(r=t.include)||void 0===r?void 0:r.totalCount)&&(d.count=null===(s=t.include)||void 0===s?void 0:s.totalCount),(null==t||null===(a=t.page)||void 0===a?void 0:a.next)&&(d.start=null===(u=t.page)||void 0===u?void 0:u.next),(null==t||null===(o=t.page)||void 0===o?void 0:o.prev)&&(d.end=null===(l=t.page)||void 0===l?void 0:l.prev),(null==t?void 0:t.filter)&&(d.filter=t.filter),d.limit=null==t?void 0:t.limit,(null==t?void 0:t.sort)&&(d.sort=Object.entries(null!==(c=t.sort)&&void 0!==c?c:{}).map((function(e){var t=(0,i.default)(e,2),n=t[0],r=t[1];return"asc"===r||"desc"===r?"".concat(n,":").concat(r):n}))),d},handleResponse:function(e,t){return{status:t.status,data:t.data,totalCount:t.totalCount,next:t.next,prev:t.prev}}};t.default=o,e.exports=t.default},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}},function(e,t,n){var r=n(80);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),a={getOperation:function(){return i.default.PNGetUUIDMetadataOperation},validateParams:function(){},getURL:function(e,t){var n,r=e.config;return"/v2/objects/".concat(r.subscribeKey,"/uuids/").concat(null!==(n=null==t?void 0:t.uuid)&&void 0!==n?n:r.getUUID())},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("user")},prepareParams:function(e,t){var n,r,i,a=e.config;return{uuid:null!==(n=null==t?void 0:t.uuid)&&void 0!==n?n:a.getUUID(),include:(null===(r=null==t||null===(i=t.include)||void 0===i?void 0:i.customFields)||void 0===r||r)&&"custom"}},handleResponse:function(e,t){return{status:t.status,data:t.data}}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),a={getOperation:function(){return i.default.PNSetUUIDMetadataOperation},validateParams:function(e,t){if(!(null==t?void 0:t.data))return"Data cannot be empty"},usePatch:function(){return!0},patchURL:function(e,t){var n,r=e.config;return"/v2/objects/".concat(r.subscribeKey,"/uuids/").concat(null!==(n=null==t?void 0:t.uuid)&&void 0!==n?n:r.getUUID())},patchPayload:function(e,t){return t.data},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("user")},prepareParams:function(e,t){var n,r,i,a=e.config;return{uuid:null!==(n=null==t?void 0:t.uuid)&&void 0!==n?n:a.getUUID(),include:(null===(r=null==t||null===(i=t.include)||void 0===i?void 0:i.customFields)||void 0===r||r)&&"custom"}},handleResponse:function(e,t){return{status:t.status,data:t.data}}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),a={getOperation:function(){return i.default.PNRemoveUUIDMetadataOperation},validateParams:function(){},getURL:function(e,t){var n,r=e.config;return"/v2/objects/".concat(r.subscribeKey,"/uuids/").concat(null!==(n=null==t?void 0:t.uuid)&&void 0!==n?n:r.getUUID())},useDelete:function(){return!0},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("user")},prepareParams:function(e,t){var n,r=e.config;return{uuid:null!==(n=null==t?void 0:t.uuid)&&void 0!==n?n:r.getUUID()}},handleResponse:function(e,t){return{status:t.status,data:t.data}}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),a=r(n(1)),o={getOperation:function(){return a.default.PNGetAllChannelMetadataOperation},validateParams:function(){},getURL:function(e){var t=e.config;return"/v2/objects/".concat(t.subscribeKey,"/channels")},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("channel")},prepareParams:function(e,t){var n,r,a,o,s,u,l,c,d={};return(null==t||null===(n=t.include)||void 0===n?void 0:n.customFields)&&(d.include="custom"),(null==t||null===(r=t.include)||void 0===r?void 0:r.totalCount)&&(d.count=null===(s=t.include)||void 0===s?void 0:s.totalCount),(null==t||null===(a=t.page)||void 0===a?void 0:a.next)&&(d.start=null===(u=t.page)||void 0===u?void 0:u.next),(null==t||null===(o=t.page)||void 0===o?void 0:o.prev)&&(d.end=null===(l=t.page)||void 0===l?void 0:l.prev),(null==t?void 0:t.filter)&&(d.filter=t.filter),(null==t?void 0:t.limit)&&(d.limit=t.limit),(null==t?void 0:t.sort)&&(d.sort=Object.entries(null!==(c=t.sort)&&void 0!==c?c:{}).map((function(e){var t=(0,i.default)(e,2),n=t[0],r=t[1];return"asc"===r||"desc"===r?"".concat(n,":").concat(r):n}))),d},handleResponse:function(e,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}};t.default=o,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),a={getOperation:function(){return i.default.PNGetChannelMetadataOperation},validateParams:function(e,t){if(!(null==t?void 0:t.channel))return"Channel cannot be empty"},getURL:function(e,t){var n=e.config;return"/v2/objects/".concat(n.subscribeKey,"/channels/").concat(t.channel)},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("channel")},prepareParams:function(e,t){var n,r;return{include:(null===(n=null==t||null===(r=t.include)||void 0===r?void 0:r.customFields)||void 0===n||n)&&"custom"}},handleResponse:function(e,t){return{status:t.status,data:t.data}}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),a={getOperation:function(){return i.default.PNSetChannelMetadataOperation},validateParams:function(e,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.data)?void 0:"Data cannot be empty":"Channel cannot be empty"},usePatch:function(){return!0},patchURL:function(e,t){var n=e.config;return"/v2/objects/".concat(n.subscribeKey,"/channels/").concat(t.channel)},patchPayload:function(e,t){return t.data},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("channel")},prepareParams:function(e,t){var n,r;return{include:(null===(n=null==t||null===(r=t.include)||void 0===r?void 0:r.customFields)||void 0===n||n)&&"custom"}},handleResponse:function(e,t){return{status:t.status,data:t.data}}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),a={getOperation:function(){return i.default.PNRemoveChannelMetadataOperation},validateParams:function(e,t){if(!(null==t?void 0:t.channel))return"Channel cannot be empty"},getURL:function(e,t){var n=e.config;return"/v2/objects/".concat(n.subscribeKey,"/channels/").concat(t.channel)},useDelete:function(){return!0},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("channel")},prepareParams:function(){return{}},handleResponse:function(e,t){return{status:t.status,data:t.data}}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),a=r(n(1)),o={getOperation:function(){return a.default.PNGetMembersOperation},validateParams:function(e,t){if(!(null==t?void 0:t.channel))return"UUID cannot be empty"},getURL:function(e,t){var n=e.config;return"/v2/objects/".concat(n.subscribeKey,"/channels/").concat(t.channel,"/uuids")},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("member")},prepareParams:function(e,t){var n,r,a,o,s,u,l,c,d,f,h,p,m={};return(null==t?void 0:t.include)&&(m.include=[],(null===(s=t.include)||void 0===s?void 0:s.customFields)&&m.include.push("custom"),(null===(u=t.include)||void 0===u?void 0:u.customUUIDFields)&&m.include.push("uuid.custom"),(null===(l=null===(c=t.include)||void 0===c?void 0:c.UUIDFields)||void 0===l||l)&&m.include.push("uuid"),m.include=m.include.join(",")),(null==t||null===(n=t.include)||void 0===n?void 0:n.totalCount)&&(m.count=null===(d=t.include)||void 0===d?void 0:d.totalCount),(null==t||null===(r=t.page)||void 0===r?void 0:r.next)&&(m.start=null===(f=t.page)||void 0===f?void 0:f.next),(null==t||null===(a=t.page)||void 0===a?void 0:a.prev)&&(m.end=null===(h=t.page)||void 0===h?void 0:h.prev),(null==t?void 0:t.filter)&&(m.filter=t.filter),m.limit=null!==(o=null==t?void 0:t.limit)&&void 0!==o?o:100,(null==t?void 0:t.sort)&&(m.sort=Object.entries(null!==(p=t.sort)&&void 0!==p?p:{}).map((function(e){var t=(0,i.default)(e,2),n=t[0],r=t[1];return"asc"===r||"desc"===r?"".concat(n,":").concat(r):n}))),m},handleResponse:function(e,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}};t.default=o,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),a=r(n(4)),o=r(n(1)),s={getOperation:function(){return o.default.PNSetMembersOperation},validateParams:function(e,t){return(null==t?void 0:t.channel)?(null==t?void 0:t.uuids)&&0!==(null==t?void 0:t.uuids.length)?void 0:"UUIDs cannot be empty":"Channel cannot be empty"},usePatch:function(){return!0},patchURL:function(e,t){var n=e.config;return"/v2/objects/".concat(n.subscribeKey,"/channels/").concat(t.channel,"/uuids")},patchPayload:function(e,t){return(0,a.default)({set:[],remove:[]},t.type,t.uuids.map((function(e){return"string"==typeof e?{uuid:{id:e}}:{uuid:{id:e.id},custom:e.custom}})))},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("member")},prepareParams:function(e,t){var n,r,a,o,s,u,l,c,d,f={};return(null==t?void 0:t.include)&&(f.include=[],(null===(o=t.include)||void 0===o?void 0:o.customFields)&&f.include.push("custom"),(null===(s=t.include)||void 0===s?void 0:s.customUUIDFields)&&f.include.push("uuid.custom"),(null===(u=t.include)||void 0===u?void 0:u.UUIDFields)&&f.include.push("uuid"),f.include=f.include.join(",")),(null==t||null===(n=t.include)||void 0===n?void 0:n.totalCount)&&(f.count=!0),(null==t||null===(r=t.page)||void 0===r?void 0:r.next)&&(f.start=null===(l=t.page)||void 0===l?void 0:l.next),(null==t||null===(a=t.page)||void 0===a?void 0:a.prev)&&(f.end=null===(c=t.page)||void 0===c?void 0:c.prev),(null==t?void 0:t.filter)&&(f.filter=t.filter),(null==t?void 0:t.limit)&&(f.limit=t.limit),(null==t?void 0:t.sort)&&(f.sort=Object.entries(null!==(d=t.sort)&&void 0!==d?d:{}).map((function(e){var t=(0,i.default)(e,2),n=t[0],r=t[1];return"asc"===r||"desc"===r?"".concat(n,":").concat(r):n}))),f},handleResponse:function(e,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}};t.default=s,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),a=r(n(1)),o={getOperation:function(){return a.default.PNGetMembershipsOperation},validateParams:function(e,t){if(!(null==t?void 0:t.uuid))return"UUID cannot be empty"},getURL:function(e,t){var n=e.config;return"/v2/objects/".concat(n.subscribeKey,"/uuids/").concat(t.uuid,"/channels")},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("membership")},prepareParams:function(e,t){var n,r,a,o,s,u,l,c,d,f,h,p={};return(null==t?void 0:t.include)&&(p.include=[],(null===(s=t.include)||void 0===s?void 0:s.customFields)&&p.include.push("custom"),(null===(u=t.include)||void 0===u?void 0:u.customChannelFields)&&p.include.push("channel.custom"),(null===(l=t.include)||void 0===l?void 0:l.channelFields)&&p.include.push("channel"),p.include=p.include.join(",")),(null==t||null===(n=t.include)||void 0===n?void 0:n.totalCount)&&(p.count=null===(c=t.include)||void 0===c?void 0:c.totalCount),(null==t||null===(r=t.page)||void 0===r?void 0:r.next)&&(p.start=null===(d=t.page)||void 0===d?void 0:d.next),(null==t||null===(a=t.page)||void 0===a?void 0:a.prev)&&(p.end=null===(f=t.page)||void 0===f?void 0:f.prev),(null==t?void 0:t.filter)&&(p.filter=t.filter),p.limit=null!==(o=null==t?void 0:t.limit)&&void 0!==o?o:100,(null==t?void 0:t.sort)&&(p.sort=Object.entries(null!==(h=t.sort)&&void 0!==h?h:{}).map((function(e){var t=(0,i.default)(e,2),n=t[0],r=t[1];return"asc"===r||"desc"===r?"".concat(n,":").concat(r):n}))),p},handleResponse:function(e,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}};t.default=o,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9)),a=r(n(4)),o=r(n(1)),s={getOperation:function(){return o.default.PNSetMembershipsOperation},validateParams:function(e,t){if(!(null==t?void 0:t.channels)||0===(null==t?void 0:t.channels.length))return"Channels cannot be empty"},usePatch:function(){return!0},patchURL:function(e,t){var n,r=e.config;return"/v2/objects/".concat(r.subscribeKey,"/uuids/").concat(null!==(n=t.uuid)&&void 0!==n?n:r.getUUID(),"/channels")},patchPayload:function(e,t){return(0,a.default)({set:[],remove:[]},t.type,t.channels.map((function(e){return"string"==typeof e?{channel:{id:e}}:{channel:{id:e.id},custom:e.custom}})))},getRequestTimeout:function(e){return e.config.getTransactionTimeout()},isAuthSupported:function(){return!0},getAuthToken:function(e){return e.tokenManager.getToken("membership")},prepareParams:function(e,t){var n,r,a,o,s,u,l,c,d,f={};return(null==t?void 0:t.include)&&(f.include=[],(null===(o=t.include)||void 0===o?void 0:o.customFields)&&f.include.push("custom"),(null===(s=t.include)||void 0===s?void 0:s.customChannelFields)&&f.include.push("channel.custom"),(null===(u=t.include)||void 0===u?void 0:u.channelFields)&&f.include.push("channel"),f.include=f.include.join(",")),(null==t||null===(n=t.include)||void 0===n?void 0:n.totalCount)&&(f.count=!0),(null==t||null===(r=t.page)||void 0===r?void 0:r.next)&&(f.start=null===(l=t.page)||void 0===l?void 0:l.next),(null==t||null===(a=t.page)||void 0===a?void 0:a.prev)&&(f.end=null===(c=t.page)||void 0===c?void 0:c.prev),(null==t?void 0:t.filter)&&(f.filter=t.filter),(null==t?void 0:t.limit)&&(f.limit=t.limit),(null==t?void 0:t.sort)&&(f.sort=Object.entries(null!==(d=t.sort)&&void 0!==d?d:{}).map((function(e){var t=(0,i.default)(e,2),n=t[0],r=t[1];return"asc"===r||"desc"===r?"".concat(n,":").concat(r):n}))),f},handleResponse:function(e,t){return{status:t.status,data:t.data,totalCount:t.totalCount,prev:t.prev,next:t.next}}};t.default=s,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNCreateUserOperation},t.validateParams=function(e,t){var n=e.config,r=t.id,i=t.name,a=t.custom;return r?i?n.subscribeKey?a&&!Object.values(a).every((function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))?"Invalid custom type, only string, number and boolean values are allowed.":void 0:"Missing Subscribe Key":"Missing User.name":"Missing User.id"},t.usePost=function(){return!0},t.getURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/users")},t.postURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/users")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.id)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r={};if(n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0},n){var i=[];n.customFields&&i.push("custom");var a=i.join(",");a.length>0&&(r.include=a)}return r},t.postPayload=function(e,t){return function(e,t){return t}(0,t)},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateUserOperation},t.validateParams=function(e,t){var n=e.config,r=t.id,i=t.name,a=t.custom;return r?i?n.subscribeKey?a&&!Object.values(a).every((function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))?"Invalid custom type, only string, number and boolean values are allowed.":void 0:"Missing Subscribe Key":"Missing User.name":"Missing User.id"},t.usePatch=function(){return!0},t.getURL=function(e,t){var n=e.config,r=t.id;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(r)},t.patchURL=function(e,t){var n=e.config,r=t.id;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.id)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r={};if(n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0},n){var i=[];n.customFields&&i.push("custom");var a=i.join(",");a.length>0&&(r.include=a)}return r},t.patchPayload=function(e,t){return function(e,t){return t}(0,t)},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNDeleteUserOperation},t.validateParams=function(e,t){var n=e.config;return t?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing UserId"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t)||e.tokenManager.getToken("user")},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetUserOperation},t.validateParams=function(e,t){if(!t.userId)return"Missing userId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.userId)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r={};if(n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0},n){var i=[];n.customFields&&i.push("custom");var a=i.join(",");a.length>0&&(r.include=a)}return r},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetUsersOperation},t.validateParams=function(){},t.getURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/users")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e){return e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,a=t.filter,o={};if(r&&(o.limit=r),n){var s=[];n.totalCount&&(o.count=!0),n.customFields&&s.push("custom");var u=s.join(",");u.length>0&&(o.include=u)}return i&&(i.next&&(o.start=i.next),i.prev&&(o.end=i.prev)),a&&(o.filter=a),o},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNCreateSpaceOperation},t.validateParams=function(e,t){var n=e.config,r=t.id,i=t.name,a=t.custom;return r?i?n.subscribeKey?a&&!Object.values(a).every((function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))?"Invalid custom type, only string, number and boolean values are allowed.":void 0:"Missing Subscribe Key":"Missing Space.name":"Missing Space.id"},t.usePost=function(){return!0},t.getURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/spaces")},t.postURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/spaces")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.id)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r={};if(n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0},n){var i=[];n.customFields&&i.push("custom");var a=i.join(",");a.length>0&&(r.include=a)}return r},t.postPayload=function(e,t){return function(e,t){return t}(0,t)},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateSpaceOperation},t.validateParams=function(e,t){var n=e.config,r=t.id,i=t.name,a=t.custom;return r?i?n.subscribeKey?a&&!Object.values(a).every((function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}))?"Invalid custom type, only string, number and boolean values are allowed.":void 0:"Missing Subscribe Key":"Missing Space.name":"Missing Space.id"},t.usePatch=function(){return!0},t.getURL=function(e,t){var n=e.config,r=t.id;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(r)},t.patchURL=function(e,t){var n=e.config,r=t.id;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.id)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r={};if(n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0},n){var i=[];n.customFields&&i.push("custom");var a=i.join(",");a.length>0&&(r.include=a)}return r},t.patchPayload=function(e,t){return function(e,t){return t}(0,t)},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNDeleteSpaceOperation},t.validateParams=function(e,t){var n=e.config;return t?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing SpaceId"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t)||e.tokenManager.getToken("space")},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetSpacesOperation},t.validateParams=function(){},t.getURL=function(e){var t=e.config;return"/v1/objects/".concat(t.subscribeKey,"/spaces")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e){return e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,a=t.filter,o={};if(r&&(o.limit=r),n){var s=[];n.totalCount&&(o.count=!0),n.customFields&&s.push("custom");var u=s.join(",");u.length>0&&(o.include=u)}return i&&(i.next&&(o.start=i.next),i.prev&&(o.end=i.prev)),a&&(o.filter=a),o},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetSpaceOperation},t.validateParams=function(e,t){if(!t.spaceId)return"Missing spaceId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.spaceId)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r={};if(n?void 0===n.customFields&&(n.customFields=!0):n={customFields:!0},n){var i=[];n.customFields&&i.push("custom");var a=i.join(",");a.length>0&&(r.include=a)}return r},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetMembersOperation},t.validateParams=function(e,t){if(!t.spaceId)return"Missing spaceId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.spaceId)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,a=t.filter,o={};if(r&&(o.limit=r),n){var s=[];n.totalCount&&(o.count=!0),n.customFields&&s.push("custom"),n.userFields&&s.push("user"),n.customUserFields&&s.push("user.custom");var u=s.join(",");u.length>0&&(o.include=u)}return i&&(i.next&&(o.start=i.next),i.prev&&(o.end=i.prev)),a&&(o.filter=a),o},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateMembersOperation},t.validateParams=function(e,t){var n=t.spaceId,r=t.users;return n?r?void 0:"Missing users":"Missing spaceId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.spaceId)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,a={};if(r&&(a.limit=r),n){var o=[];n.totalCount&&(a.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var s=o.join(",");s.length>0&&(a.include=s)}return i&&(i.next&&(a.start=i.next),i.prev&&(a.end=i.prev)),a},t.patchPayload=function(e,t){return function(e,t){var n=t.users,r={};return n&&n.length>0&&(r.add=[],n.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),r.add.push(t)}))),r}(0,t)},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateMembersOperation},t.validateParams=function(e,t){var n=t.spaceId,r=t.users;return n?r?void 0:"Missing users":"Missing spaceId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.spaceId)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,a={};if(r&&(a.limit=r),n){var o=[];n.totalCount&&(a.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var s=o.join(",");s.length>0&&(a.include=s)}return i&&(i.next&&(a.start=i.next),i.prev&&(a.end=i.prev)),a},t.patchPayload=function(e,t){return function(e,t){var n=t.addMembers,r=t.updateMembers,i=t.removeMembers,a=t.users,o={};return n&&n.length>0&&(o.add=[],n.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.add.push(t)}))),r&&r.length>0&&(o.update=[],r.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.update.push(t)}))),a&&a.length>0&&(o.update=o.update||[],a.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.update.push(t)}))),i&&i.length>0&&(o.remove=[],i.forEach((function(e){o.remove.push({id:e})}))),o}(0,t)},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateMembersOperation},t.validateParams=function(e,t){var n=t.spaceId,r=t.users;return n?r?void 0:"Missing users":"Missing spaceId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/spaces/").concat(t.spaceId,"/users")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("space",t.spaceId)||e.tokenManager.getToken("space")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,a={};if(r&&(a.limit=r),n){var o=[];n.totalCount&&(a.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var s=o.join(",");s.length>0&&(a.include=s)}return i&&(i.next&&(a.start=i.next),i.prev&&(a.end=i.prev)),a},t.patchPayload=function(e,t){return function(e,t){var n=t.users,r={};return n&&n.length>0&&(r.remove=[],n.forEach((function(e){r.remove.push({id:e})}))),r}(0,t)},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetMembershipsOperation},t.validateParams=function(e,t){if(!t.userId)return"Missing userId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.userId)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,a=t.filter,o={};if(r&&(o.limit=r),n){var s=[];n.totalCount&&(o.count=!0),n.customFields&&s.push("custom"),n.spaceFields&&s.push("space"),n.customSpaceFields&&s.push("space.custom");var u=s.join(",");u.length>0&&(o.include=u)}return i&&(i.next&&(o.start=i.next),i.prev&&(o.end=i.prev)),a&&(o.filter=a),o},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateMembershipsOperation},t.validateParams=function(e,t){var n=t.userId,r=t.spaces;return n?r?void 0:"Missing spaces":"Missing userId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.userId)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,a={};if(r&&(a.limit=r),n){var o=[];n.totalCount&&(a.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var s=o.join(",");s.length>0&&(a.include=s)}return i&&(i.next&&(a.start=i.next),i.prev&&(a.end=i.prev)),a},t.patchPayload=function(e,t){return function(e,t){var n=t.addMemberships,r=t.updateMemberships,i=t.removeMemberships,a=t.spaces,o={};return n&&n.length>0&&(o.add=[],n.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.add.push(t)}))),r&&r.length>0&&(o.update=[],r.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.update.push(t)}))),a&&a.length>0&&(o.update=o.update||[],a.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),o.update.push(t)}))),i&&i.length>0&&(o.remove=[],i.forEach((function(e){o.remove.push({id:e})}))),o}(0,t)},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateMembershipsOperation},t.validateParams=function(e,t){var n=t.userId,r=t.spaces;return n?r?void 0:"Missing spaces":"Missing userId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.userId)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,a={};if(r&&(a.limit=r),n){var o=[];n.totalCount&&(a.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var s=o.join(",");s.length>0&&(a.include=s)}return i&&(i.next&&(a.start=i.next),i.prev&&(a.end=i.prev)),a},t.patchPayload=function(e,t){return function(e,t){var n=t.spaces,r={};return n&&n.length>0&&(r.add=[],n.forEach((function(e){var t={id:e.id};e.custom&&(t.custom=e.custom),r.add.push(t)}))),r}(0,t)},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUpdateMembershipsOperation},t.validateParams=function(e,t){var n=t.userId,r=t.spaces;return n?r?void 0:"Missing spaces":"Missing userId"},t.getURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.patchURL=function(e,t){var n=e.config;return"/v1/objects/".concat(n.subscribeKey,"/users/").concat(t.userId,"/spaces")},t.usePatch=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.getAuthToken=function(e,t){return e.tokenManager.getToken("user",t.userId)||e.tokenManager.getToken("user")},t.prepareParams=function(e,t){var n=t.include,r=t.limit,i=t.page,a={};if(r&&(a.limit=r),n){var o=[];n.totalCount&&(a.count=!0),n.customFields&&o.push("custom"),n.spaceFields&&o.push("space"),n.customSpaceFields&&o.push("space.custom");var s=o.join(",");s.length>0&&(a.include=s)}return i&&(i.next&&(a.start=i.next),i.prev&&(a.end=i.prev)),a},t.patchPayload=function(e,t){return function(e,t){var n=t.spaces,r={};return n&&n.length>0&&(r.remove=[],n.forEach((function(e){r.remove.push({id:e})}))),r}(0,t)},t.handleResponse=function(e,t){return t},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAccessManagerAudit},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){var t=e.config;return"/v2/auth/audit/sub-key/".concat(t.subscribeKey)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channel,r=t.channelGroup,i=t.authKeys,a=void 0===i?[]:i,o={};return n&&(o.channel=n),r&&(o["channel-group"]=r),a.length>0&&(o.auth=a.join(",")),o},t.handleResponse=function(e,t){return t.payload},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAccessManagerGrant},t.validateParams=function(e,t){var n=e.config;return n.subscribeKey?n.publishKey?n.secretKey?null==t.uuids||t.authKeys?null==t.uuids||null==t.channels&&null==t.channelGroups?void 0:"Both channel/channelgroup and uuid cannot be used in the same request":"authKeys are required for grant request on uuids":"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"},t.getURL=function(e){var t=e.config;return"/v2/auth/grant/sub-key/".concat(t.subscribeKey)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channels,r=void 0===n?[]:n,i=t.channelGroups,a=void 0===i?[]:i,o=t.uuids,s=void 0===o?[]:o,u=t.ttl,l=t.read,c=void 0!==l&&l,d=t.write,f=void 0!==d&&d,h=t.manage,p=void 0!==h&&h,m=t.get,g=void 0!==m&&m,v=t.join,y=void 0!==v&&v,_=t.update,b=void 0!==_&&_,T=t.authKeys,E=void 0===T?[]:T,S=t.delete,w={};return w.r=c?"1":"0",w.w=f?"1":"0",w.m=p?"1":"0",w.d=S?"1":"0",w.g=g?"1":"0",w.j=y?"1":"0",w.u=b?"1":"0",r.length>0&&(w.channel=r.join(",")),a.length>0&&(w["channel-group"]=a.join(",")),E.length>0&&(w.auth=E.join(",")),s.length>0&&(w["target-uuid"]=s.join(",")),(u||0===u)&&(w.ttl=u),w},t.handleResponse=function(){return{}},n(2);var i=r(n(1))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAccessManagerGrantToken},t.extractPermissions=a,t.validateParams=function(e,t){var n=e.config;return n.subscribeKey?n.publishKey?n.secretKey?t.resources||t.patterns?(!t.resources||t.resources.users&&0!==Object.keys(t.resources.users).length||t.resources.spaces&&0!==Object.keys(t.resources.spaces).length)&&(!t.patterns||t.patterns.users&&0!==Object.keys(t.patterns.users).length||t.patterns.spaces&&0!==Object.keys(t.patterns.spaces).length)?void 0:"Missing values for either Resources or Patterns.":"Missing either Resources or Patterns.":"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"},t.postURL=function(e){var t=e.config;return"/v3/pam/".concat(t.subscribeKey,"/grant")},t.usePost=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(){return{}},t.postPayload=function(e,t){return function(e,t){var n=t.ttl,r=t.resources,i=t.patterns,o=t.meta,s={ttl:0,permissions:{resources:{channels:{},groups:{},users:{},spaces:{}},patterns:{channels:{},groups:{},users:{},spaces:{}},meta:{}}};if(r){var u=r.users,l=r.spaces;u&&Object.keys(u).forEach((function(e){s.permissions.resources.users[e]=a(u[e])})),l&&Object.keys(l).forEach((function(e){s.permissions.resources.spaces[e]=a(l[e])}))}if(i){var c=i.users,d=i.spaces;c&&Object.keys(c).forEach((function(e){s.permissions.patterns.users[e]=a(c[e])})),d&&Object.keys(d).forEach((function(e){s.permissions.patterns.spaces[e]=a(d[e])}))}return(n||0===n)&&(s.ttl=n),o&&(s.permissions.meta=o),s}(0,t)},t.handleResponse=function(e,t){return t.data.token},n(2);var i=r(n(1));function a(e){var t=0;return e.create&&(t|=16),e.delete&&(t|=8),e.manage&&(t|=4),e.write&&(t|=2),e.read&&(t|=1),t}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return a.default.PNPublishOperation},t.validateParams=function(e,t){var n=e.config,r=t.message;return t.channel?r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},t.usePost=function(e,t){var n=t.sendByPost;return void 0!==n&&n},t.getURL=function(e,t){var n=e.config,r=t.channel,i=s(e,t.message);return"/publish/".concat(n.publishKey,"/").concat(n.subscribeKey,"/0/").concat(o.default.encodeString(r),"/0/").concat(o.default.encodeString(i))},t.postURL=function(e,t){var n=e.config,r=t.channel;return"/publish/".concat(n.publishKey,"/").concat(n.subscribeKey,"/0/").concat(o.default.encodeString(r),"/0")},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.postPayload=function(e,t){return s(e,t.message)},t.prepareParams=function(e,t){var n=t.meta,r=t.replicate,a=void 0===r||r,o=t.storeInHistory,s=t.ttl,u={};return null!=o&&(u.store=o?"1":"0"),s&&(u.ttl=s),!1===a&&(u.norep="true"),n&&"object"===(0,i.default)(n)&&(u.meta=JSON.stringify(n)),u},t.handleResponse=function(e,t){return{timetoken:t[2]}};var i=r(n(7)),a=(n(2),r(n(1))),o=r(n(3));function s(e,t){var n=e.crypto,r=e.config,i=JSON.stringify(t);return r.cipherKey&&(i=n.encrypt(i),i=JSON.stringify(i)),i}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNSignalOperation},t.validateParams=function(e,t){var n=e.config,r=t.message;return t.channel?r?n.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},t.getURL=function(e,t){var n,r=e.config,i=t.channel,o=(n=t.message,JSON.stringify(n));return"/signal/".concat(r.publishKey,"/").concat(r.subscribeKey,"/0/").concat(a.default.encodeString(i),"/0/").concat(a.default.encodeString(o))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{timetoken:t[2]}},n(2);var i=r(n(1)),a=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNHistoryOperation},t.validateParams=function(e,t){var n=t.channel,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.getURL=function(e,t){var n=t.channel,r=e.config;return"/v2/history/sub-key/".concat(r.subscribeKey,"/channel/").concat(a.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i=t.reverse,a=t.count,o=void 0===a?100:a,s=t.stringifiedTimeToken,u=void 0!==s&&s,l=t.includeMeta,c=void 0!==l&&l,d={include_token:"true"};return d.count=o,n&&(d.start=n),r&&(d.end=r),u&&(d.string_message_token="true"),null!=i&&(d.reverse=i.toString()),c&&(d.include_meta="true"),d},t.handleResponse=function(e,t){var n={messages:[],startTimeToken:t[1],endTimeToken:t[2]};return Array.isArray(t[0])&&t[0].forEach((function(t){var r={timetoken:t.timetoken,entry:o(e,t.message)};t.meta&&(r.meta=t.meta),n.messages.push(r)})),n},n(2);var i=r(n(1)),a=r(n(3));function o(e,t){var n=e.config,r=e.crypto;if(!n.cipherKey)return t;try{return r.decrypt(t)}catch(e){return t}}},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNDeleteMessagesOperation},t.validateParams=function(e,t){var n=t.channel,r=e.config;return n?r.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.useDelete=function(){return!0},t.getURL=function(e,t){var n=t.channel,r=e.config;return"/v3/history/sub-key/".concat(r.subscribeKey,"/channel/").concat(a.default.encodeString(n))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i={};return n&&(i.start=n),r&&(i.end=r),i},t.handleResponse=function(e,t){return t.payload},n(2);var i=r(n(1)),a=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return a.default.PNMessageCounts},t.validateParams=function(e,t){var n=t.channels,r=t.timetoken,i=t.channelTimetokens,a=e.config;return n?r&&i?"timetoken and channelTimetokens are incompatible together":r&&i&&i.length>1&&n.length!==i.length?"Length of channelTimetokens and channels do not match":a.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.getURL=function(e,t){var n=t.channels,r=e.config,i=n.join(",");return"/v3/history/sub-key/".concat(r.subscribeKey,"/message-counts/").concat(o.default.encodeString(i))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.timetoken,r=t.channelTimetokens,a={};if(r&&1===r.length){var o=(0,i.default)(r,1)[0];a.timetoken=o}else r?a.channelsTimetoken=r.join(","):n&&(a.timetoken=n);return a},t.handleResponse=function(e,t){return{channels:t.channels}};var i=r(n(9)),a=r(n(1)),o=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNFetchMessagesOperation},t.validateParams=function(e,t){var n=t.channels,r=t.includeMessageActions,i=void 0!==r&&r,a=e.config;if(!n||0===n.length)return"Missing channels";if(!a.subscribeKey)return"Missing Subscribe Key";if(i&&n.length>1)throw new TypeError("History can return actions data for a single channel only. Either pass a single channel or disable the includeMessageActions flag.")},t.getURL=function(e,t){var n=t.channels,r=void 0===n?[]:n,i=t.includeMessageActions,o=void 0!==i&&i,s=e.config,u=o?"history-with-actions":"history",l=r.length>0?r.join(","):",";return"/v3/".concat(u,"/sub-key/").concat(s.subscribeKey,"/channel/").concat(a.default.encodeString(l))},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels,r=t.start,i=t.end,a=t.includeMessageActions,o=t.count,s=t.stringifiedTimeToken,u=void 0!==s&&s,l=t.includeMeta,c=void 0!==l&&l,d=t.includeUuid,f=t.includeUUID,h=void 0===f||f,p=t.includeMessageType,m=void 0===p||p,g={};return g.max=o||(n.length>1||!0===a?25:100),r&&(g.start=r),i&&(g.end=i),u&&(g.string_message_token="true"),c&&(g.include_meta="true"),h&&!1!==d&&(g.include_uuid="true"),m&&(g.include_message_type="true"),g},t.handleResponse=function(e,t){var n={channels:{}};return Object.keys(t.channels||{}).forEach((function(r){n.channels[r]=[],(t.channels[r]||[]).forEach((function(t){var i={};i.channel=r,i.timetoken=t.timetoken,i.message=function(e,t){var n=e.config,r=e.crypto;if(!n.cipherKey)return t;try{return r.decrypt(t)}catch(e){return t}}(e,t.message),i.messageType=t.message_type,i.uuid=t.uuid,t.actions&&(i.actions=t.actions,i.data=t.actions),t.meta&&(i.meta=t.meta),n.channels[r].push(i)}))})),t.more&&(n.more=t.more),n},n(2);var i=r(n(1)),a=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNSubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/subscribe/".concat(n.subscribeKey,"/").concat(a.default.encodeString(o),"/0")},t.getRequestTimeout=function(e){return e.config.getSubscribeTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=e.config,r=t.state,i=t.channelGroups,a=void 0===i?[]:i,o=t.timetoken,s=t.filterExpression,u=t.region,l={heartbeat:n.getPresenceTimeout()};return a.length>0&&(l["channel-group"]=a.join(",")),s&&s.length>0&&(l["filter-expr"]=s),Object.keys(r).length&&(l.state=JSON.stringify(r)),o&&(l.tt=o),u&&(l.tr=u),l},t.handleResponse=function(e,t){var n=[];t.m.forEach((function(e){var t={publishTimetoken:e.p.t,region:e.p.r},r={shard:parseInt(e.a,10),subscriptionMatch:e.b,channel:e.c,messageType:e.e,payload:e.d,flags:e.f,issuingClientId:e.i,subscribeKey:e.k,originationTimetoken:e.o,userMetadata:e.u,publishMetaData:t};n.push(r)}));var r={timetoken:t.t.t,region:t.t.r};return{messages:n,metadata:r}},n(2);var i=r(n(1)),a=r(n(3))},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5)),a=r(n(6)),o=r(n(4)),s=(r(n(8)),r(n(10))),u=(n(2),function(){function e(t){var n=this;(0,i.default)(this,e),(0,o.default)(this,"_modules",void 0),(0,o.default)(this,"_config",void 0),(0,o.default)(this,"_maxSubDomain",void 0),(0,o.default)(this,"_currentSubDomain",void 0),(0,o.default)(this,"_standardOrigin",void 0),(0,o.default)(this,"_subscribeOrigin",void 0),(0,o.default)(this,"_providedFQDN",void 0),(0,o.default)(this,"_requestTimeout",void 0),(0,o.default)(this,"_coreParams",void 0),this._modules={},Object.keys(t).forEach((function(e){n._modules[e]=t[e].bind(n)}))}return(0,a.default)(e,[{key:"init",value:function(e){this._config=e,this._maxSubDomain=20,this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain),this._providedFQDN=(this._config.secure?"https://":"http://")+this._config.origin,this._coreParams={},this.shiftStandardOrigin()}},{key:"nextOrigin",value:function(){return this._providedFQDN.match(/ps\.pndsn\.com$/i)?(this._currentSubDomain+=1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),e=this._currentSubDomain.toString(),this._providedFQDN.replace("ps.pndsn.com","ps".concat(e,".pndsn.com"))):this._providedFQDN;var e}},{key:"hasModule",value:function(e){return e in this._modules}},{key:"shiftStandardOrigin",value:function(){return this._standardOrigin=this.nextOrigin(),this._standardOrigin}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"POSTFILE",value:function(e,t,n){return this._modules.postfile(e,t,n)}},{key:"GETFILE",value:function(e,t,n){return this._modules.getfile(e,t,n)}},{key:"POST",value:function(e,t,n,r){return this._modules.post(e,t,n,r)}},{key:"PATCH",value:function(e,t,n,r){return this._modules.patch(e,t,n,r)}},{key:"GET",value:function(e,t,n){return this._modules.get(e,t,n)}},{key:"DELETE",value:function(e,t,n){return this._modules.del(e,t,n)}},{key:"_detectErrorCategory",value:function(e){if("ENOTFOUND"===e.code)return s.default.PNNetworkIssuesCategory;if("ECONNREFUSED"===e.code)return s.default.PNNetworkIssuesCategory;if("ECONNRESET"===e.code)return s.default.PNNetworkIssuesCategory;if("EAI_AGAIN"===e.code)return s.default.PNNetworkIssuesCategory;if(0===e.status||e.hasOwnProperty("status")&&void 0===e.status)return s.default.PNNetworkIssuesCategory;if(e.timeout)return s.default.PNTimeoutCategory;if("ETIMEDOUT"===e.code)return s.default.PNNetworkIssuesCategory;if(e.response){if(e.response.badRequest)return s.default.PNBadRequestCategory;if(e.response.forbidden)return s.default.PNAccessDeniedCategory}return s.default.PNUnknownCategory}}]),e}());t.default=u,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={get:function(e){try{return localStorage.getItem(e)}catch(e){return null}},set:function(e,t){try{return localStorage.setItem(e,t)}catch(e){return null}}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(7)),a=r(n(5)),o=r(n(6)),s=r(n(4)),u=function(){function e(t,n){(0,a.default)(this,e),(0,s.default)(this,"_base64ToBinary",void 0),(0,s.default)(this,"_cborReader",void 0),this._base64ToBinary=n,this._decode=t}return(0,o.default)(e,[{key:"decodeToken",value:function(e){var t="";e.length%4==3?t="=":e.length%4==2&&(t="==");var n=e.replace(/-/gi,"+").replace(/_/gi,"/")+t,r=this._decode(this._base64ToBinary(n));if("object"===(0,i.default)(r))return r}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.postfile=function(e,t,n){return l.apply(this,arguments)},t.getfile=function(e,t,n){var r=o.default.get(this.getStandardOrigin()+t.url).set(t.headers).query(e);return u.call(this,r,t,n)},t.get=function(e,t,n){var r=o.default.get(this.getStandardOrigin()+t.url).set(t.headers).query(e);return u.call(this,r,t,n)},t.post=function(e,t,n,r){var i=o.default.post(this.getStandardOrigin()+n.url).query(e).set(n.headers).send(t);return u.call(this,i,n,r)},t.patch=function(e,t,n,r){var i=o.default.patch(this.getStandardOrigin()+n.url).query(e).set(n.headers).send(t);return u.call(this,i,n,r)},t.del=function(e,t,n){var r=o.default.delete(this.getStandardOrigin()+t.url).set(t.headers).query(e);return u.call(this,r,t,n)};var i=r(n(11)),a=r(n(12)),o=r(n(125));function s(e){var t=(new Date).getTime(),n=(new Date).toISOString(),r=console&&console.log?console:window&&window.console&&window.console.log?window.console:console;r.log("<<<<<"),r.log("[".concat(n,"]"),"\n",e.url,"\n",e.qs),r.log("-----"),e.on("response",(function(n){var i=(new Date).getTime()-t,a=(new Date).toISOString();r.log(">>>>>>"),r.log("[".concat(a," / ").concat(i,"]"),"\n",e.url,"\n",e.qs,"\n",n.text),r.log("-----")}))}function u(e,t,n){var r=this;this._config.logVerbosity&&(e=e.use(s)),this._config.proxy&&this._modules.proxy&&(e=this._modules.proxy.call(this,e)),this._config.keepAlive&&this._modules.keepAlive&&(e=this._modules.keepAlive(e));var i=e;return!0===t.forceBuffered?i="undefined"==typeof Blob?i.buffer().responseType("arraybuffer"):i.responseType("arraybuffer"):!1===t.forceBuffered&&(i=i.buffer(!1)),i.timeout(t.timeout).end((function(e,i){var a,o={};if(o.error=null!==e,o.operation=t.operation,i&&i.status&&(o.statusCode=i.status),e){if(e.response&&e.response.text&&!r._config.logVerbosity)try{o.errorData=JSON.parse(e.response.text)}catch(t){o.errorData=e}else o.errorData=e;return o.category=r._detectErrorCategory(e),n(o,null)}if(t.ignoreBody)a={headers:i.headers,redirects:i.redirects,response:i};else try{a=JSON.parse(i.text)}catch(e){return o.errorData=i,o.error=!0,n(o,null)}return a.error&&1===a.error&&a.status&&a.message&&a.service?(o.errorData=a,o.statusCode=a.status,o.error=!0,o.category=r._detectErrorCategory(o),n(o,null)):(a.error&&a.error.message&&(o.errorData=a.error),n(o,a))}))}function l(){return(l=(0,a.default)(i.default.mark((function e(t,n,r){var a,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.default.post(t),n.forEach((function(e){var t=e.key,n=e.value;a=a.field(t,n)})),a.attach("file",r,{contentType:"application/octet-stream"}),e.next=5,a;case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(2)},function(e,t,n){var r;"undefined"!=typeof window?r=window:"undefined"!=typeof self?r=self:(console.warn("Using browser-only version of superagent in non-browser environment"),r=this);var i=n(126),a=n(127),o=n(26),s=n(128),u=n(130);function l(){}var c=t=e.exports=function(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)};t.Request=v,c.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&"file:"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var d="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function f(e){if(!o(e))return e;var t=[];for(var n in e)h(t,n,e[n]);return t.join("&")}function h(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach((function(n){h(e,t,n)}));else if(o(n))for(var r in n)h(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function p(e){for(var t,n,r={},i=e.split("&"),a=0,o=i.length;a<o;++a)-1==(n=(t=i[a]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function m(e){return/[\/+]json($|[^-\w])/.test(e)}function g(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,i,a=e.split(/\r?\n/),o={},s=0,u=a.length;s<u;++s)-1!==(t=(n=a[s]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),i=d(n.slice(t+1)),o[r]=i);return o}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function v(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,r=null;try{r=new g(n)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)}))}function y(e,t,n){var r=c("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}c.serializeObject=f,c.parseString=p,c.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},c.serialize={"application/x-www-form-urlencoded":f,"application/json":JSON.stringify},c.parse={"application/x-www-form-urlencoded":p,"application/json":JSON.parse},s(g.prototype),g.prototype._parseBody=function(e){var t=c.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&m(this.type)&&(t=c.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},g.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},c.Response=g,i(v.prototype),a(v.prototype),v.prototype.type=function(e){return this.set("Content-Type",c.types[e]||e),this},v.prototype.accept=function(e){return this.set("Accept",c.types[e]||e),this},v.prototype.auth=function(e,t,n){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});var r=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,n,r)},v.prototype.query=function(e){return"string"!=typeof e&&(e=f(e)),e&&this._query.push(e),this},v.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},v.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},v.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},v.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},v.prototype.buffer=v.prototype.ca=v.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},v.prototype.pipe=v.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},v.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},v.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||l,this._finalizeQueryString(),this._end()},v.prototype._end=function(){var e=this,t=this.xhr=c.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],a=this._serializer||c.serialize[i?i.split(";")[0]:""];!a&&m(i)&&(a=c.serialize["application/json"]),a&&(n=a(n))}for(var o in this.header)null!=this.header[o]&&this.header.hasOwnProperty(o)&&t.setRequestHeader(o,this.header[o]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},c.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){u.prototype[e.toLowerCase()]=function(t,n){var r=new c.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}})),u.prototype.del=u.prototype.delete,c.get=function(e,t,n){var r=c("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},c.head=function(e,t,n){var r=c("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},c.options=function(e,t,n){var r=c("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},c.del=y,c.delete=y,c.patch=function(e,t,n){var r=c("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},c.post=function(e,t,n){var r=c("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},c.put=function(e,t,n){var r=c("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";var r=n(26);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},i.prototype.parse=function(e){return this._parser=e,this},i.prototype.responseType=function(e){return this._responseType=e,this},i.prototype.serialize=function(e){return this._serializer=e,this},i.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},i.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var a=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];i.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~a.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.end((function(n,r){n?t(n):e(r)}))}))}return this._fullfilledPromise.then(e,t)},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.use=function(e){return e(this),this},i.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},i.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},i.prototype.get=function(e){return this._header[e.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},i.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},i.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var i in t)this.field(e,t[i]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},i.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},i.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},i.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},i.prototype.redirects=function(e){return this._maxRedirects=e,this},i.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(e){var t=r(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var i in e)this._data[i]=e[i];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||n||this.type("json"),this},i.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},i.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},i.prototype._appendQueryString=function(){console.trace("Unsupported")},i.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},i.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,n){"use strict";var r=n(129);function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.get=function(e){return this.header[e.toLowerCase()]},i.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var n=r.params(t);for(var i in n)this[i]=n[i];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},i.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,n){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function n(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){n.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),n.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=n},function(e,t,n){"use strict";(function(r){var i=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n(11)),o=i(n(12)),s=i(n(5)),u=i(n(6)),l=i(n(4)),c=i(n(133));function d(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}var f=function(){function e(){(0,s.default)(this,e)}var t,n,i,l,f,h,p,m,g;return(0,u.default)(e,[{key:"encrypt",value:(g=(0,o.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getKey(t);case 2:if(r=e.sent,!(n instanceof ArrayBuffer)){e.next=7;break}return e.abrupt("return",this.encryptArrayBuffer(r,n));case 7:if("string"!=typeof n){e.next=11;break}return e.abrupt("return",this.encryptString(r,n));case 11:throw new Error("Cannot encrypt this file. In browsers file encryption supports only string or ArrayBuffer");case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"decrypt",value:(m=(0,o.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getKey(t);case 2:if(r=e.sent,!(n instanceof ArrayBuffer)){e.next=7;break}return e.abrupt("return",this.decryptArrayBuffer(r,n));case 7:if("string"!=typeof n){e.next=11;break}return e.abrupt("return",this.decryptString(r,n));case 11:throw new Error("Cannot decrypt this file. In browsers file decryption supports only string or ArrayBuffer");case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"encryptFile",value:(p=(0,o.default)(a.default.mark((function e(t,n,r){var i,o,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getKey(t);case 2:return i=e.sent,e.next=5,n.toArrayBuffer();case 5:return o=e.sent,e.next=8,this.encryptArrayBuffer(i,o);case 8:return s=e.sent,e.abrupt("return",r.create({name:n.name,mimeType:"application/octet-stream",data:s}));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return p.apply(this,arguments)})},{key:"decryptFile",value:(h=(0,o.default)(a.default.mark((function e(t,n,r){var i,o,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getKey(t);case 2:return i=e.sent,e.next=5,n.toArrayBuffer();case 5:return o=e.sent,e.next=8,this.decryptArrayBuffer(i,o);case 8:if(s=e.sent,!(n.data instanceof ArrayBuffer)){e.next=13;break}return e.abrupt("return",r.create({name:n.name,data:s}));case 13:throw new Error("Cannot decrypt this file. In browser environment file decryption supports only ArrayBuffer.");case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return h.apply(this,arguments)})},{key:"getKey",value:(f=(0,o.default)(a.default.mark((function e(t){var n,i,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.from(t),e.next=3,c.default.subtle.digest("SHA-256",n.buffer);case 3:return i=e.sent,o=r.from(r.from(i).toString("hex").slice(0,32),"utf8").buffer,e.abrupt("return",c.default.subtle.importKey("raw",o,"AES-CBC",!0,["encrypt","decrypt"]));case 6:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)})},{key:"encryptArrayBuffer",value:(l=(0,o.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.default.getRandomValues(new Uint8Array(16)),e.t0=d,e.t1=r.buffer,e.next=5,c.default.subtle.encrypt({name:"AES-CBC",iv:r},t,n);case 5:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return l.apply(this,arguments)})},{key:"decryptArrayBuffer",value:(i=(0,o.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.slice(0,16),e.abrupt("return",c.default.subtle.decrypt({name:"AES-CBC",iv:r},t,n.slice(16)));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)})},{key:"encryptString",value:(n=(0,o.default)(a.default.mark((function e(t,n){var i,o,s,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.default.getRandomValues(new Uint8Array(16)),o=r.from(n).buffer,e.next=4,c.default.subtle.encrypt({name:"AES-CBC",iv:i},t,o);case 4:return s=e.sent,u=d(i.buffer,s),e.abrupt("return",r.from(u).toString("utf8"));case 7:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"decryptString",value:(t=(0,o.default)(a.default.mark((function e(t,n){var i,o,s,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.from(n),o=i.slice(0,16),s=i.slice(16),e.next=5,c.default.subtle.decrypt({name:"AES-CBC",iv:o},t,s);case 5:return u=e.sent,e.abrupt("return",r.from(u).toString("utf8"));case 7:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})},{key:"algo",get:function(){return"aes-256-cbc"}}]),e}();t.default=f,(0,l.default)(f,"IV_LENGTH",16),e.exports=t.default}).call(this,n(21).Buffer)},function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a,o=r(n(11)),s=r(n(12)),u=r(n(5)),l=r(n(6)),c=r(n(4)),d=(n(25),a=i=function(){function e(t){if((0,u.default)(this,e),(0,c.default)(this,"data",void 0),(0,c.default)(this,"name",void 0),(0,c.default)(this,"mimeType",void 0),t instanceof File)this.data=t,this.name=this.data.name,this.mimeType=this.data.type;else if(t.data){var n=t.data;this.data=new File([n],t.name,{type:t.mimeType}),this.name=t.name,t.mimeType&&(this.mimeType=t.mimeType)}if(void 0===this.data)throw new Error("Couldn't construct a file out of supplied options.");if(void 0===this.name)throw new Error("Couldn't guess filename out of the options. Please provide one.")}var t,n,r,i,a,d,f;return(0,l.default)(e,null,[{key:"create",value:function(e){return new this(e)}}]),(0,l.default)(e,[{key:"toBuffer",value:(f=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("This feature is only supported in Node.js environments.");case 1:case"end":return e.stop()}}),e)}))),function(){return f.apply(this,arguments)})},{key:"toStream",value:(d=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("This feature is only supported in Node.js environments.");case 1:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"toFileUri",value:(a=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("This feature is only supported in react native environments.");case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"toBlob",value:(i=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.data);case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"toArrayBuffer",value:(r=(0,s.default)(o.default.mark((function e(){var t=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.addEventListener("load",(function(){if(r.result instanceof ArrayBuffer)return e(r.result)})),r.addEventListener("error",(function(){n(r.error)})),r.readAsArrayBuffer(t.data)})));case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"toString",value:(n=(0,s.default)(o.default.mark((function e(){var t=this;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.addEventListener("load",(function(){if("string"==typeof r.result)return e(r.result)})),r.addEventListener("error",(function(){n(r.error)})),r.readAsBinaryString(t.data)})));case 1:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"toFile",value:(t=(0,s.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.data);case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),(0,c.default)(i,"supportsFile","undefined"!=typeof File),(0,c.default)(i,"supportsBlob","undefined"!=typeof Blob),(0,c.default)(i,"supportsArrayBuffer","undefined"!=typeof ArrayBuffer),(0,c.default)(i,"supportsBuffer",!1),(0,c.default)(i,"supportsStream",!1),(0,c.default)(i,"supportsString",!0),(0,c.default)(i,"supportsEncryptFile",!0),(0,c.default)(i,"supportsFileUri",!1),a);t.default=d,e.exports=t.default},function(n,i,a){"use strict";a.r(i),function(n,i){void 0===(r=function(){return function(e){if("function"!=typeof Promise)throw"Promise support required";var t=e.crypto||e.msCrypto;if(t){var n=t.subtle||t.webkitSubtle;if(n){var r=e.Crypto||t.constructor||Object,i=e.SubtleCrypto||n.constructor||Object,a=(e.CryptoKey||e.Key,e.navigator.userAgent.indexOf("Edge/")>-1),o=!!e.msCrypto&&!a,s=!t.subtle&&!!t.webkitSubtle;if(o||s){var u={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},l={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach((function(e){var r=n[e];n[e]=function(i,a,u){var l,c,d,p,b=[].slice.call(arguments);switch(e){case"generateKey":l=m(i),c=a,d=u;break;case"importKey":l=m(u),c=b[3],d=b[4],"jwk"===i&&((a=v(a)).alg||(a.alg=g(l)),a.key_ops||(a.key_ops="oct"!==a.kty?"d"in a?d.filter(A):d.filter(w):d.slice()),b[1]=y(a));break;case"unwrapKey":l=b[4],c=b[5],d=b[6],b[2]=u._key}if("generateKey"===e&&"HMAC"===l.name&&l.hash)return l.length=l.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[l.hash.name],n.importKey("raw",t.getRandomValues(new Uint8Array(l.length+7>>3)),l,c,d);if(s&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===l.name&&(!l.modulusLength||l.modulusLength>=2048))return(i=m(i)).name="RSAES-PKCS1-v1_5",delete i.hash,n.generateKey(i,!0,["encrypt","decrypt"]).then((function(e){return Promise.all([n.exportKey("jwk",e.publicKey),n.exportKey("jwk",e.privateKey)])})).then((function(e){return e[0].alg=e[1].alg=g(l),e[0].key_ops=d.filter(w),e[1].key_ops=d.filter(A),Promise.all([n.importKey("jwk",e[0],l,!0,e[0].key_ops),n.importKey("jwk",e[1],l,c,e[1].key_ops)])})).then((function(e){return{publicKey:e[0],privateKey:e[1]}}));if((s||o&&"SHA-1"===(l.hash||{}).name)&&"importKey"===e&&"jwk"===i&&"HMAC"===l.name&&"oct"===a.kty)return n.importKey("raw",h(f(a.k)),u,b[3],b[4]);if(s&&"importKey"===e&&("spki"===i||"pkcs8"===i))return n.importKey("jwk",_(a),u,b[3],b[4]);if(o&&"unwrapKey"===e)return n.decrypt(b[3],u,a).then((function(e){return n.importKey(i,e,b[4],b[5],b[6])}));try{p=r.apply(n,b)}catch(e){return Promise.reject(e)}return o&&(p=new Promise((function(e,t){p.onabort=p.onerror=function(e){t(e)},p.oncomplete=function(t){e(t.target.result)}}))),p=p.then((function(e){return"HMAC"===l.name&&(l.length||(l.length=8*e.algorithm.length)),0==l.name.search("RSA")&&(l.modulusLength||(l.modulusLength=(e.publicKey||e).algorithm.modulusLength),l.publicExponent||(l.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e.publicKey&&e.privateKey?{publicKey:new S(e.publicKey,l,c,d.filter(w)),privateKey:new S(e.privateKey,l,c,d.filter(A))}:new S(e,l,c,d)}))}})),["exportKey","wrapKey"].forEach((function(e){var t=n[e];n[e]=function(r,i,a){var u,l=[].slice.call(arguments);switch(e){case"exportKey":l[1]=i._key;break;case"wrapKey":l[1]=i._key,l[2]=a._key}if((s||o&&"SHA-1"===(i.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===r&&"HMAC"===i.algorithm.name&&(l[0]="raw"),!s||"exportKey"!==e||"spki"!==r&&"pkcs8"!==r||(l[0]="jwk"),o&&"wrapKey"===e)return n.exportKey(r,i).then((function(e){return"jwk"===r&&(e=h(unescape(encodeURIComponent(JSON.stringify(v(e)))))),n.encrypt(l[3],a,e)}));try{u=t.apply(n,l)}catch(e){return Promise.reject(e)}return o&&(u=new Promise((function(e,t){u.onabort=u.onerror=function(e){t(e)},u.oncomplete=function(t){e(t.target.result)}}))),"exportKey"===e&&"jwk"===r&&(u=u.then((function(e){return(s||o&&"SHA-1"===(i.algorithm.hash||{}).name)&&"HMAC"===i.algorithm.name?{kty:"oct",alg:g(i.algorithm),key_ops:i.usages.slice(),ext:!0,k:d(p(e))}:((e=v(e)).alg||(e.alg=g(i.algorithm)),e.key_ops||(e.key_ops="public"===i.type?i.usages.filter(w):"private"===i.type?i.usages.filter(A):i.usages.slice()),e)}))),!s||"exportKey"!==e||"spki"!==r&&"pkcs8"!==r||(u=u.then((function(e){return b(v(e))}))),u}})),["encrypt","decrypt","sign","verify"].forEach((function(e){var t=n[e];n[e]=function(r,i,a,s){if(o&&(!a.byteLength||s&&!s.byteLength))throw new Error("Empy input is not allowed");var u,l=[].slice.call(arguments),c=m(r);if(o&&"decrypt"===e&&"AES-GCM"===c.name){var d=r.tagLength>>3;l[2]=(a.buffer||a).slice(0,a.byteLength-d),r.tag=(a.buffer||a).slice(a.byteLength-d)}l[1]=i._key;try{u=t.apply(n,l)}catch(e){return Promise.reject(e)}return o&&(u=new Promise((function(t,n){u.onabort=u.onerror=function(e){n(e)},u.oncomplete=function(n){if(n=n.target.result,"encrypt"===e&&n instanceof AesGcmEncryptResult){var r=n.ciphertext,i=n.tag;(n=new Uint8Array(r.byteLength+i.byteLength)).set(new Uint8Array(r),0),n.set(new Uint8Array(i),r.byteLength),n=n.buffer}t(n)}}))),u}})),o){var c=n.digest;n.digest=function(e,t){if(!t.byteLength)throw new Error("Empy input is not allowed");var r;try{r=c.call(n,e,t)}catch(e){return Promise.reject(e)}return r=new Promise((function(e,t){r.onabort=r.onerror=function(e){t(e)},r.oncomplete=function(t){e(t.target.result)}}))},e.crypto=Object.create(t,{getRandomValues:{value:function(e){return t.getRandomValues(e)}},subtle:{value:n}}),e.CryptoKey=S}s&&(t.subtle=n,e.Crypto=r,e.SubtleCrypto=i,e.CryptoKey=S)}}}function d(e){return btoa(e).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function f(e){return e=(e+="===").slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function h(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function p(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function m(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=m(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=m(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function g(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function v(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(p(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach((function(n){n in e&&(t[n]=e[n])}));break;default:throw new TypeError("Unsupported key type")}return t}function y(e){var t=v(e);return o&&(t.extractable=t.ext,delete t.ext),h(unescape(encodeURIComponent(JSON.stringify(t)))).buffer}function _(e){var t=T(e),n=!1;t.length>2&&(n=!0,t.shift());var r={ext:!0};switch(t[0][0]){case"1.2.840.113549.1.1.1":var i=["n","e","d","p","q","dp","dq","qi"],a=T(t[1]);n&&a.shift();for(var o=0;o<a.length;o++)a[o][0]||(a[o]=a[o].subarray(1)),r[i[o]]=d(p(a[o]));r.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return r}function b(e){var t,n=[["",null]],r=!1;switch(e.kty){case"RSA":for(var i=["n","e","d","p","q","dp","dq","qi"],a=[],o=0;o<i.length&&i[o]in e;o++){var s=a[o]=h(f(e[i[o]]));128&s[0]&&(a[o]=new Uint8Array(s.length+1),a[o].set(s,1))}a.length>2&&(r=!0,a.unshift(new Uint8Array([0]))),n[0][0]="1.2.840.113549.1.1.1",t=a;break;default:throw new TypeError("Unsupported key type")}return n.push(new Uint8Array(E(t)).buffer),r?n.unshift(new Uint8Array([0])):n[1]={tag:3,value:n[1]},new Uint8Array(E(n)).buffer}function T(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),t.end-t.pos<2||t.end>e.length)throw new RangeError("Malformed DER");var n,r=e[t.pos++],i=e[t.pos++];if(i>=128){if(i&=127,t.end-t.pos<i)throw new RangeError("Malformed DER");for(var a=0;i--;)a<<=8,a|=e[t.pos++];i=a}if(t.end-t.pos<i)throw new RangeError("Malformed DER");switch(r){case 2:n=e.subarray(t.pos,t.pos+=i);break;case 3:if(e[t.pos++])throw new Error("Unsupported bit string");i--;case 4:n=new Uint8Array(e.subarray(t.pos,t.pos+=i)).buffer;break;case 5:n=null;break;case 6:var o=btoa(p(e.subarray(t.pos,t.pos+=i)));if(!(o in u))throw new Error("Unsupported OBJECT ID "+o);n=u[o];break;case 48:n=[];for(var s=t.pos+i;t.pos<s;)n.push(T(e,t));break;default:throw new Error("Unsupported DER tag 0x"+r.toString(16))}return n}function E(e,t){t||(t=[]);var n=0,r=0,i=t.length+2;if(t.push(0,0),e instanceof Uint8Array){n=2,r=e.length;for(var a=0;a<r;a++)t.push(e[a])}else if(e instanceof ArrayBuffer)for(n=4,r=e.byteLength,e=new Uint8Array(e),a=0;a<r;a++)t.push(e[a]);else if(null===e)n=5,r=0;else if("string"==typeof e&&e in l){var o=h(atob(l[e]));for(n=6,r=o.length,a=0;a<r;a++)t.push(o[a])}else if(e instanceof Array){for(a=0;a<e.length;a++)E(e[a],t);n=48,r=t.length-i}else{if(!("object"==typeof e&&3===e.tag&&e.value instanceof ArrayBuffer))throw new Error("Unsupported DER value "+e);for(n=3,r=(e=new Uint8Array(e.value)).byteLength,t.push(0),a=0;a<r;a++)t.push(e[a]);r++}if(r>=128){var s=r;for(r=4,t.splice(i,0,s>>24&255,s>>16&255,s>>8&255,255&s);r>1&&!(s>>24);)s<<=8,r--;r<4&&t.splice(i,4-r),r|=128}return t.splice(i-2,2,n,r),t}function S(e,t,n,r){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===n?e.extractable:n,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===r?e.usages:r,enumerable:!0}})}function w(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function A(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}}(n)}.apply(t,[]))||(e.exports=r)}("undefined"!=typeof self?self:void 0),i.default=window.crypto}])},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(312),t),i(n(1063),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_STATE=t.MIN_BEACON_INTERVAL=t.DEFAULT_BEACON_INTERVAL=t.BEACON_ERRORS=t.REJECT_STATUSES=void 0;const r=n(456);t.REJECT_STATUSES=[401,403,409],t.BEACON_ERRORS={401:r.EBeaconErrors.VIDEO_FORBIDDEN,403:r.EBeaconErrors.VIDEO_FORBIDDEN,409:r.EBeaconErrors.CONFLICT,default:r.EBeaconErrors.VIDEO_ERROR},t.DEFAULT_BEACON_INTERVAL=5e3,t.MIN_BEACON_INTERVAL=4e3,t.DEFAULT_STATE={isSendingBeacon:!1,lastBeaconSentAt:0,interval:t.DEFAULT_BEACON_INTERVAL}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0;t.Search=class{constructor(e){this.search=e=>r(this,void 0,void 0,(function*(){return yield this.driver.getFacets(e)})),this.driver=e.driver}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(1067),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeAdTagParameters=void 0;const r=n(457),i=n(1070);t.sanitizeAdTagParameters=e=>{const n={};for(const a in e){const o=e[a];n[a]="string"==typeof o?"iu"===a?i.sanitizeInventoryUnit(o):"cust_params"===a?o.split("&").map(e=>{const[t,n]=e.split("=");return`${t}=${i.normalizeString(n,r.DEFAULT_NORMALIZE_OPTIONS)}`}).join("&"):i.normalizeString(o,r.DEFAULT_NORMALIZE_OPTIONS):"cust_params"===a&&"object"==typeof o?t.sanitizeAdTagParameters(o):o}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_NORMALIZE_OPTIONS=void 0,t.DEFAULT_NORMALIZE_OPTIONS={removeAccents:!0,removeWhitespace:!0,toLowerCase:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IU_NORMALIZE_OPTIONS=void 0,t.IU_NORMALIZE_OPTIONS={removeAccents:!0,removeNonEnglishCharacters:!0,removeWhitespace:!0,toLowerCase:!0}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(458),t),i(n(1071),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeInventoryUnit=void 0;const r=n(457),i=n(458);t.sanitizeInventoryUnit=e=>{const t=i.normalizeString(e,r.DEFAULT_NORMALIZE_OPTIONS).split("/");t[5]&&(t[5]=i.normalizeString(t[5],r.IU_NORMALIZE_OPTIONS));let n=t.length-1;for(;n>0&&""===t[n];)t.splice(n,1);return t.join("/")}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const i=n(111),a=n(1073),o=n(154);t.Logger=class{constructor(e){this.api=e.api||a.DEFAULT_LOGGER_CONFIG.api,this.driver=e.driver||a.DEFAULT_LOGGER_CONFIG.driver,this.useGET=i.pick(e.useGET,a.DEFAULT_LOGGER_CONFIG.useGET),this.onError=e.onError,this.staticMetadata=this.getStaticMetadata(e)}getObfuscatedApiKey(e){return e.substring(0,4).concat("****")}getStaticMetadata({environment:e,realm:t,version:n,apiKey:r,appName:i}){return{env:e,rl:t,v:n,ak:this.getObfuscatedApiKey(r),serviceType:i,project:a.DICE_PROJECT_NAME}}getParams(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];if(null!=r&&"function"!=typeof r){return`${t}${encodeURIComponent(n)}=${encodeURIComponent(r.toString())}${a.PARAM_SEPARATOR}`}return t},"?").slice(0,-1)}handleError(e,t){this.onError&&this.onError(t,e),console.warn(`Couldn't log message to "${this.api}".`,e,t)}sendAsGetRequest(e){const t=this.getParams(e),n=`${this.api}${t}`;return this.driver(n)}send(e){const t={method:o.METHODS.post,body:JSON.stringify(e)};return this.driver(this.api,t)}isValidMessage({message:e,level:t}){return!!e&&!!t}mapMessage({message:e,level:t,ip:n,location:r,userId:i,requestId:a,eventName:o,stackTrace:s}){return{message:e,level:t,rh:n,loc:r,usr:i,rid:a,eventName:o,stack_trace:s}}log(e){return r(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},this.mapMessage(e)),this.staticMetadata);try{if(!this.isValidMessage(e))throw{message:"Invalid message"};this.useGET?yield this.sendAsGetRequest(t):yield this.send(t)}catch(e){this.handleError(t,e.message)}}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DICE_PROJECT_NAME=t.PARAM_SEPARATOR=t.DEFAULT_LOGGER_CONFIG=void 0,t.DEFAULT_LOGGER_CONFIG={api:"https://6uogbsyg0f.execute-api.eu-west-1.amazonaws.com/prod",driver:(e,t)=>fetch(e,t),useGET:!1},t.PARAM_SEPARATOR="&",t.DICE_PROJECT_NAME="DCE"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=(e,t,n,r=!0)=>{if(r&&null==e)throw new Error(`Invalid value for "${n}". Expected, but not found.`);if(null!=e&&typeof e!==t)throw new Error(`Invalid type for "${n}". Expected ${t}, Found ${typeof e}`)};t.validateBeaconPayload=e=>{const{action:t,cid:n,startedAt:i,video:a,endpoint:o,progress:s}=e;r(t,"number","action"),r(n,"string","cid"),r(i,"number","startedAt"),r(a,"number","video"),r(o,"string","endpoint"),r(s,"number","progress",!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(103),i=n(199),a=n(90),o=n(309),s=n(1076),u=n(64),l=n(156),c=n(461),d=n(153),f=n(65),h=n(460);t.default=async e=>{var t,n;const{media:p}=e;if(l.hideError(),!(p&&p.customData&&p.customData.chromecastSessionSerialized)){const e={eventName:"chromecast.receiver.media.load.invalid",level:h.LoggerMessageLevels.ERROR,message:"Invalid media payload."};throw c.default(e),new Error("Invalid media metadata")}{const{chromecastSessionSerialized:m}=p.customData;try{const l=JSON.parse(m),{$beacon:c,$http:g,gamNetworkId:v,gamProductName:y,domain:_,realm:b}=await f.initState(l);c&&c.send();const T=l.beacon.action===h.Action.LIVE;if(p.customData=Object.assign(Object.assign({},p.customData),{mux:{data:s.getMuxData(e,T)}}),!g)throw new Error("HTTP service is not available!");if(!p.contentType&&(null===(t=p.customData)||void 0===t?void 0:t.resolutionType)===r.DICE_RESOLVABLE_SOURCE&&(null===(n=p.customData)||void 0===n?void 0:n.resolutionCustomData)){console.log("Prefetching Dice stream info...");const e=await(async e=>{var t,n;const{customData:r,http:a,id:o}=e,s=null===(t=r.isDVR)||void 0===t||t,u=Boolean(null!==(n=r.isLive)&&void 0!==n&&n),{parsedData:{playerUrlCallback:l}}=await i.getPlayerUrlCallback(a,o,u);return await i.getStreamInfo(l,u,s)})({customData:p.customData.resolutionCustomData,http:g,id:p.contentId});console.log("Stream info:",e),Boolean(i.getDaiUrl(e.hls)||i.getDaiUrl(e.hlsWidevine))&&(console.log(`DAI source found! Hard coding content-type to ${u.HLS_CONTENT_TYPE}`),p.contentType=u.HLS_CONTENT_TYPE),p.customData.resolutionCustomData.resolvedData={streamInfo:{value:e,allowedUses:1,expiry:new Date(Date.now()+5e3)}}}return b===u.UNIVISION_REALM&&(((e,t,n)=>{const r=e.getPluginByType(d.EPGPlugin),i=t.customData.epg;r&&i&&(r.setApiUrl(i.apiUrl),r.setChannelId(i.channelId),r.setPubNubChannel(i.pubNubChannel),r.setHttpService(n))})(a.player,p,g),(e=>{var t,n;const r=null===(n=null===(t=e.customData.resolutionCustomData)||void 0===t?void 0:t.ima)||void 0===n?void 0:n.adTagParameters;if(r&&"string"==typeof r.iu){const e=r.iu.split("/");e.length>=5&&(e[4]="chromecast",r.iu=e.join("/"))}})(p),await o.setInitialAdTagParameters({domain:_,gamNetworkId:v,gamProductName:y,http:g,media:p,player:a.player})),await i.addDiceSourceResolver({player:a.player,http:g}),await s.addMuxPlugin(),e}catch(e){const t=l.getErrorPayload(e),n={eventName:"chromecast.receiver.media.load.failed",level:h.LoggerMessageLevels.ERROR,message:"Failed to refresh token.",stackTrace:JSON.stringify(t)};throw c.default(n),e}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(1077))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(90),i=n(155),a=n(64),o=n(65);t.addMuxPlugin=async()=>{if(r.player.getPluginByType(r.MuxPlugin)||r.player.getPluginByName("mux"))return;const{$storage:e,realm:t,muxEnvironmentKey:n}=o.default,s=await e.get(a.TOKEN_KEYS.refresh),{sub:u}=s?i(s):{};r.player.addPlugin({name:"mux",Plugin:r.MuxPlugin,config:{environmentKey:n,playerName:"Chromecast",playerVersion:"2.30.0",userId:u,subPropertyId:t,deviceModel:r.getModelName()}})};const s=e=>Number.isInteger("number"==typeof e?e:parseFloat(e));t.getMuxData=(e,t)=>{var n,r,i;const{media:a}=e,{contentId:u,customData:l,metadata:c}=a,{id:d,title:f}=c;let h;if(null==l?void 0:l.chromecastSessionSerialized){let e={};if(l.chromecastSessionSerialized)try{e=JSON.parse(l.chromecastSessionSerialized)}catch(e){console.error("Failed to parse Chromecast Session!",e)}h=null===(r=null===(n=e.beacon)||void 0===n?void 0:n.video)||void 0===r?void 0:r.toString()}return h||(s(d)?h=d.toString():s(u)&&(h=u.toString())),{video_id:h,video_title:f,video_stream_type:t?"live":"on-demand",custom_1:null===(i=o.default.$beacon)||void 0===i?void 0:i.state.cid}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(90),i=n(65);t.default=async()=>{i.default.$beacon&&(i.default.$beacon.progress=Math.round(r.player.getCurrentTime(!0)))}}]);